!function(){function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}System.register(["./antdv-legacy.7bd4694a.js"],(function(e,n){"use strict";var i,o,r,s,a,u,l=document.createElement("style");return l.textContent='.super-flow__menu-container .super-flow__menu{position:absolute;outline:none;width:180px;padding:4px 0;border:1px solid #b4b4b4;box-shadow:0 8px 16px rgba(0,0,0,.3);overflow:hidden;border-radius:3px;z-index:10;background-color:#fff;margin:0}.super-flow__menu-container .super-flow__menu-item{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;box-sizing:content-box;width:170px;min-height:26px;line-height:26px;cursor:pointer;position:relative;padding:0 4px}.super-flow__menu-container .super-flow__menu-item:last-child{margin:0}.super-flow__menu-container .super-flow__menu-item:last-child:after{display:none}.super-flow__menu-container .super-flow__menu-item:hover{background-color:#eee}.super-flow__menu-container .super-flow__menu-item-icon{float:left;width:26px;height:26px}.super-flow__menu-container .super-flow__menu-item-content{float:left;display:inline-block;color:#333;font-size:14px;line-height:26px;width:144px;font-weight:400}.super-flow__menu-container .super-flow__menu-item>div{position:absolute;top:0;left:0;right:0;bottom:0}.super-flow__menu-container .super-flow__menu-item.is-disabled{cursor:no-drop}.super-flow__menu-container .super-flow__menu-item.is-disabled>span{color:#999}.super-flow__menu-container .super-flow__menu-item.is-disabled:hover{background-color:transparent}.super-flow__menu-container .super-flow__menu-line{width:100%;margin:4px 0;border-bottom:1px solid #b4b4b4;height:0}.super-flow__menu-container .super-flow__menu-line:last-child{display:none}.super-flow__menu-container .flow__menu-mask{content:"";position:fixed;top:0;bottom:0;right:0;left:0;z-index:10;background-color:transparent}.super-flow__node{box-shadow:1px 2px 8px rgba(0,0,0,.2);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:absolute;background-color:#fff;border:1px solid #b4b4b4;z-index:1;outline:none}.super-flow__node.can-move{cursor:move}.super-flow__node-header{background-color:green}.super-flow__node .node-side{position:absolute;cursor:crosshair}.super-flow__node .node-side-top{top:-5px;right:0;left:0;height:10px}.super-flow__node .node-side-right{top:0;right:-5px;bottom:0;width:10px}.super-flow__node .node-side-bottom{right:0;bottom:-5px;left:0;height:10px}.super-flow__node .node-side-left{top:0;bottom:0;left:-5px;width:10px}.super-flow__node:hover{box-shadow:1px 2px 8px rgba(0,0,0,.4)}.super-flow__node.isSelect{z-index:2}.super-flow__line{position:absolute;z-index:0}.super-flow__line.inPath{cursor:pointer}.super-flow__mark-line{position:absolute;z-index:0;border:1px solid transparent}.super-flow{font-family:Apple System,SF Pro SC,SF Pro Display,Helvetica Neue,Arial,PingFang SC,Hiragino Sans GB,STHeiti,Microsoft YaHei,Microsoft JhengHei,Source Han Sans SC,Noto Sans CJK SC,Source Han Sans CN,sans-serif;position:relative;background-color:transparent;width:100%;height:100%;overflow:hidden}.super-flow>.select-all__mask{position:absolute;background-color:rgba(85,175,255,.1);z-index:20;border:1px dashed #55abfc;cursor:move;outline:none}\n',document.head.appendChild(l),{setters:[function(t){t.P,i=t.at,o=t.r,r=t.k,s=t.j,a=t.u,u=t.o}],execute:function(){var n={exports:{}};!function(e,n){"undefined"!=typeof self&&self,e.exports=function(e){var n={};function i(t){if(n[t])return n[t].exports;var o=n[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=e,i.c=n,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(e,n){if(1&n&&(e=i(e)),8&n)return e;if(4&n&&"object"===t(e)&&e&&e.__esModule)return e;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)i.d(o,r,function(t){return e[t]}.bind(null,r));return o},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s="fb15")}({2470:function(t,e,n){n("5341")},"3ad9":function(t,e,n){n("41f0")},"41f0":function(t,e,n){},5341:function(t,e,n){},"5ebe":function(t,e,n){},"5fa5":function(t,e,n){},"7e2d":function(t,e,n){n("5fa5")},8875:function(t,e,n){var i,o,r,s;"undefined"!=typeof self&&self,s=function(){function t(){if(document.currentScript)return document.currentScript;try{throw new Error}catch(c){var t,e,n,i=/@([^@]*):(\d+):(\d+)\s*$/gi,o=/.*at [^(]*\((.*):(.+):(.+)\)$/gi.exec(c.stack)||i.exec(c.stack),r=o&&o[1]||!1,s=o&&o[2]||!1,a=document.location.href.replace(document.location.hash,""),u=document.getElementsByTagName("script");r===a&&(t=document.documentElement.outerHTML,e=new RegExp("(?:[^\\n]+?\\n){0,"+(s-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),n=t.replace(e,"$1").trim());for(var l=0;l<u.length;l++){if("interactive"===u[l].readyState)return u[l];if(u[l].src===r)return u[l];if(r===a&&u[l].innerHTML&&u[l].innerHTML.trim()===n)return u[l]}return null}}return t},o=[],void 0===(r="function"==typeof(i=s)?i.apply(e,o):i)||(t.exports=r)},a733:function(t,e,n){},b8fb:function(t,e,n){n("a733")},bce9:function(t,e,n){n("5ebe")},fb15:function(e,n,i){if(i.r(n),"undefined"!=typeof window){var o=window.document.currentScript,r=i("8875");o=r(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:r});var s=o&&o.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);s&&(i.p=s[1])}var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"flow-canvas",staticClass:"super-flow",on:{contextmenu:function(e){return e.preventDefault(),e.stopPropagation(),t.contextmenu(e)}}},[t.temEdgeConf.visible?n("graph-line",{attrs:{padding:t.linkPadding,graph:t.graph,link:t.temEdgeConf.link,"link-base-style":t.linkBaseStyle,"link-desc":t.linkDesc,"link-style":t.linkStyle}}):t._e(),t._l(t.graph.linkList,(function(e,i){return n("graph-line",{key:e.key,attrs:{index:i,padding:t.linkPadding,graph:t.graph,link:e,"link-base-style":t.linkBaseStyle,"link-desc":t.linkDesc,"link-style":t.linkStyle}})})),t.moveNodeConf.isMove&&t.hasMarkLine?n("mark-line",{attrs:{width:t.clientWidth,height:t.clientHeight,"mark-color":t.markLineColor,markLine:t.moveNodeConf.markLine}}):t._e(),t._l(t.graph.nodeList,(function(e,i){return n("graph-node",{key:e.key,attrs:{index:i,node:e,graph:t.graph,"is-move":e===t.moveNodeConf.node,"is-tem-edge":t.temEdgeConf.visible,"node-intercept":t.nodeIntercept(e),"line-drop":t.linkAddable,"node-drop":t.draggable},on:{"node-mousedown":t.nodeMousedown,"node-mouseenter":t.nodeMouseenter,"node-mouseleave":t.nodeMouseleave,"node-mouseup":t.nodeMouseup,"side-mousedown":t.sideMousedown,"node-contextmenu":t.nodeContextmenu},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.meta;return[t._t("node",null,{meta:n})]}}],null,!0)})})),n("graph-menu",{attrs:{visible:t.menuConf.visible,graph:t.graph,position:t.menuConf.position,list:t.menuConf.list,source:t.menuConf.source},on:{"update:visible":function(e){return t.$set(t.menuConf,"visible",e)}},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.item;return[t._t("menuItem",null,{item:n})]}}],null,!0)}),n("div",{directives:[{name:"show",rawName:"v-show",value:t.graph.graphSelected,expression:"graph.graphSelected"}],ref:"selectAllMask",staticClass:"select-all__mask",style:t.maskStyle,attrs:{tabindex:"-1"},on:{blur:function(e){t.graph.graphSelected=!1},mousedown:t.selectAllMaskMouseDown,contextmenu:function(t){t.preventDefault(),t.stopPropagation()}}})],2)},u=[];function l(t){return f(t)||h(t)||d(t)||c()}function c(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function d(t,e){if(t){if("string"==typeof t)return p(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(t,e):void 0}}function h(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function f(t){if(Array.isArray(t))return p(t)}function p(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function m(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function v(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function y(t,e,n){return e&&v(t.prototype,e),n&&v(t,n),t}var g,b=function(){function t(){m(this,t),this.listeners={}}return y(t,[{key:"add",value:function(t,e){t in this.listeners||(this.listeners[t]=[]),this.listeners[t].push(e)}},{key:"remove",value:function(t,e){if(t in this.listeners)for(var n=this.listeners[t],i=0,o=n.length;i<o;i++)if(n[i]===e)return n.splice(i,1),this.remove(t,e)}},{key:"dispatch",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t.type in this.listeners){var i=this.listeners[t.type];t.target=this,n?i.some((function(n,o){var r=n.call(e,t);return r&&i.unshift.apply(i,l(i.splice(o,1))),r})):i.forEach((function(n){return n.call(e,t)}))}}}]),t}();function w(t){return L(t)||x(t)||_(t)||k()}function k(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _(t,e){if(t){if("string"==typeof t)return S(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?S(t,e):void 0}}function x(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function L(t){if(Array.isArray(t))return S(t)}function S(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function A(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),i=n.length,o=[],r=16,s=0;s<r;s++)o[s]=n[0|Math.random()*i];return t+o.join("")+e}function C(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=t.clientX,i=t.clientY,o=t.currentTarget,r=(e||o).getBoundingClientRect();return[n-r.left,i-r.top]}function M(t,e){return[t[0]+e[0],t[1]+e[1]]}function P(t,e){return[t[0]*e,t[1]*e]}function O(t,e){return[e[0]-t[0],e[1]-t[1]]}function j(t,e){return[t[0]-e[0],t[1]-e[1]]}function E(t,e){return t[0]*e[0]+t[1]*e[1]}function $(t,e){return t[0]*e[1]-t[1]*e[0]}function N(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]);return[t[0]/e,t[1]/e]}function I(t,e){return t[0]===e[0]&&t[1]===e[1]}function D(t){return Math.round(180/Math.PI*Math.atan2(t[1],t[0]))+180}function T(t,e){return t[0]*e[1]-t[1]*e[0]==0}function B(t){var e={add:M,multiply:P,differ:O,minus:j,dotProduct:E,cross:$,unitVector:N,equals:I,angle:D,parallel:T},n={};return Object.keys(e).forEach((function(i){Object.defineProperty(n,i,{get:function(){return function(o){return t=e[i](t,o),n}}})})),Object.defineProperty(n,"end",{get:function(){return t}}),n}function R(t){return Object.prototype.toString.call(t).slice(8,-1).toLocaleLowerCase()}function H(t){return"function"===R(t)}function F(t){return"boolean"===R(t)}function z(t){return"string"===R(t)}function X(t){return"object"===R(t)}function Y(t,e){t.splice.apply(t,[0,t.length].concat(w(e)))}function U(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var J={top:1,right:2,bottom:3,left:4},W=(U(g={},J.top,[0,-1]),U(g,J.right,[1,0]),U(g,J.bottom,[0,1]),U(g,J.left,[-1,0]),g);function G(t){return Q(t)||K(t)||q(t)||V()}function V(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function q(t,e){if(t){if("string"==typeof t)return Z(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Z(t,e):void 0}}function K(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function Q(t){if(Array.isArray(t))return Z(t)}function Z(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function tt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function et(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function nt(t,e,n){return e&&et(t.prototype,e),n&&et(t,n),t}var it=function(){function t(e,n){tt(this,t);var i=e.id,o=void 0===i?A("node"):i,r=e.width,s=void 0===r?180:r,a=e.height,u=void 0===a?100:a,l=e.coordinate,c=void 0===l?[0,0]:l,d=e.meta,h=void 0===d?null:d;this.key=A("node"),this.graph=n,this.id=o,this.coordinate=G(c),this.meta=h,this.width=s,this.height=u}return nt(t,[{key:"position",get:function(){return B(this.coordinate).add(this.graph.origin).end},set:function(t){this.coordinate=B(t).minus(this.graph.origin).end}},{key:"center",get:function(){return B(this.coordinate).add([this.width/2,this.height/2]).end},set:function(t){this.coordinate=B(t).minus([this.width/2,this.height/2]).end}},{key:"width",get:function(){return this._width},set:function(t){t=Math.floor(t),this._width=t>50?t:50,this.angle()}},{key:"height",get:function(){return this._height},set:function(t){t=Math.floor(t),this._height=t>20?t:20,this.angle()}},{key:"angle",value:function(){var t=this.width/2,e=this.height/2,n=[0,0],i=B(n).minus([t,e]).angle().end,o=B(n).add([t,0]).minus([0,e]).angle().end,r=B(n).add([t,e]).angle().end,s=B(n).add([0,e]).minus([t,0]).angle().end;this.angleList=[i,o,r,s]}},{key:"relative",value:function(t){var e=B(t).minus([this.width/2,this.height/2]).angle().end,n=this.angleList,i=[J.top,J.right,J.bottom,J.left],o=J.left;return n.reduce((function(t,n,r){return e>=t&&e<n&&(o=i[r-1]),n})),{position:this.fixOffset(t,o),direction:W[o]}}},{key:"fixOffset",value:function(t,e){switch(e){case J.top:t[0]=this.width/2,t[1]=0;break;case J.right:t[0]=this.width,t[1]=this.height/2;break;case J.bottom:t[0]=this.width/2,t[1]=this.height;break;case J.left:default:t[0]=0,t[1]=this.height/2}return t}},{key:"remove",value:function(){return this.graph.removeNode(this)}},{key:"toJSON",value:function(){return{id:this.id,width:this.width,height:this.height,coordinate:G(this.coordinate),meta:this.meta}}}]),t}();function ot(t,e){return lt(t)||ut(t,e)||st(t,e)||rt()}function rt(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function st(t,e){if(t){if("string"==typeof t)return at(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?at(t,e):void 0}}function at(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function ut(t,e){var n=t&&("undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null!=n){var i,o,r=[],s=!0,a=!1;try{for(n=n.call(t);!(s=(i=n.next()).done)&&(r.push(i.value),!e||r.length!==e);s=!0);}catch(l){a=!0,o=l}finally{try{s||null==n.return||n.return()}finally{if(a)throw o}}return r}}function lt(t){if(Array.isArray(t))return t}function ct(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function dt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function ht(t,e,n){return e&&dt(t.prototype,e),n&&dt(t,n),t}function ft(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var pt=function(){function t(e,n){ct(this,t);var i=e.id,o=void 0===i?A("link"):i,r=e.start,s=e.end,a=void 0===s?null:s,u=e.startAt,l=void 0===u?[0,0]:u,c=e.endAt,d=void 0===c?[0,0]:c,h=e.meta,f=void 0===h?null:h;this.key=A("link"),this.id=o,this.graph=n,this.start=r,this.meta=f,this.end=a,this.startDirection=W[J.top],this.endDirection=W[J.top],this.startAt=l,this.endAt=d}return ht(t,[{key:"end",get:function(){return this._end},set:function(t){if(this.start===t)return!1;this._end=t}},{key:"startAt",get:function(){return this._startAt},set:function(t){var e=this.start.relative(t);this._startAt=e.position,this.startDirection=e.direction}},{key:"endAt",get:function(){return this._endAt},set:function(t){if(this.end){var e=this.end.relative(t);this._endAt=e.position,this.endDirection=e.direction}else this._endAt=t}},{key:"movePosition",get:function(){return this._movePosition},set:function(t){if(this._movePosition=t,!this.end){var e=this.start.relative(B(t).minus(this.graph.origin).minus(this.start.coordinate).end);this.endDirection=B(e.direction).multiply(-1).end}}},{key:"pathPointList",get:function(){var t=this.coordinateList(),e=[],n=[];return t.forEach((function(t){e.push(t[0]),n.push(t[1])})),{pointList:t,xList:e,yList:n,minX:Math.min.apply(Math,e),maxX:Math.max.apply(Math,e),minY:Math.min.apply(Math,n),maxY:Math.max.apply(Math,n)}}},{key:"startCoordinate",value:function(){return B(this.start.position).add(this.startAt).end}},{key:"endCoordinate",value:function(){return this.end?B(this.end.position).add(this.endAt).end:this.movePosition}},{key:"coordinateList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,n=this.startCoordinate(),i=this.endCoordinate(),o=this.startDirection,r=this.endDirection,s=B(o).multiply(t.distance).add(n).end,a=B(r).multiply(t.distance).add(i).end;r=B(r).multiply(-1).end;var u=[a[0]-s[0],0],l=[0,a[1]-s[1]],c=this.pathDirection(l,u,o),d=this.pathDirection(l,u,r),h=B(c).dotProduct(d).end>0?2:1,f=d===u?l:u,p=[];if(p.push(n,s),1===h){var m=B(s).add(c).end,v=B(m).add(d).end;p.push(m,v)}else{var y=B(c).multiply(e).add(s).end,g=B(y).add(f).end,b=B(d).multiply(1-e).add(g).end;p.push(y,g,b)}return p.push(i),p}},{key:"pathDirection",value:function(t,e,n){return B(e).parallel(n).end?B(e).dotProduct(n).end>0?e:t:B(t).dotProduct(n).end>0?t:e}},{key:"isPointInLink",value:function(t,e){var n=e||this.pathPointList,i=n.pointList,o=n.minX,r=n.minY,s=n.maxX,a=n.maxY,u=5;if(t[0]<o-u||t[0]>s+u||t[1]<r-u||t[1]>a+u)return!1;for(var l=0;l<i.length-2;l++){var c=i[l],d=i[l+1],h=Math.min(c[1],d[1])-u,f=Math.max(c[0],d[0])+u,p=Math.max(c[1],d[1])+u,m=Math.min(c[0],d[0])-u,v=ot(t,2),y=v[0],g=v[1];if(y>m&&y<f&&g>h&&g<p)return!0}return!1}},{key:"remove",value:function(){return this.graph.removeLink(this)}},{key:"toJSON",value:function(){return{id:this.id,startId:this.start.id,endId:this.end.id,startAt:this.startAt,endAt:this.endAt,meta:this.meta}}}]),t}();function mt(e){return mt="function"==typeof Symbol&&"symbol"===t(Symbol.iterator)?function(e){return t(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":t(e)},mt(e)}function vt(t){return wt(t)||bt(t)||gt(t)||yt()}function yt(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function gt(t,e){if(t){if("string"==typeof t)return kt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?kt(t,e):void 0}}function bt(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function wt(t){if(Array.isArray(t))return kt(t)}function kt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function _t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function xt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Lt(t,e,n){return e&&xt(t.prototype,e),n&&xt(t,n),t}function St(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&At(t,e)}function At(t,e){return At=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},At(t,e)}function Ct(t){var e=Ot();return function(){var n,i=jt(t);if(e){var o=jt(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return Mt(this,n)}}function Mt(t,e){return!e||"object"!==mt(e)&&"function"!=typeof e?Pt(t):e}function Pt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ot(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function jt(t){return jt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},jt(t)}ft(pt,"distance",15);var Et=function(t){St(n,t);var e=Ct(n);function n(t){var i;_t(this,n);var o=t.nodeList,r=void 0===o?[]:o,s=t.linkList,a=void 0===s?[]:s,u=t.origin;return(i=e.call(this)).nodeList=[],i.linkList=[],i.origin=u,i.mouseonLink=null,i.mouseonNode=null,i.graphSelected=!1,i.maskBoundingClientRect={},i.initNode(r),i.initLink(a),i}return Lt(n,[{key:"pointMap",value:function(){var t={};return this.nodeList.forEach((function(e){t[e.id]=e})),t}},{key:"initNode",value:function(t){var e=this;return Y(this.nodeList,t.map((function(t){return e.createNode(t)}))),this.nodeList}},{key:"initLink",value:function(t){var e=this,n=[];return t.forEach((function(t){var i=t.startId,o=void 0===i?"":i,r=t.endId,s=void 0===r?"":r,a=t.startAt,u=void 0===a?[0,0]:a,l=t.endAt,c=void 0===l?[0,0]:l,d=t.meta,h=void 0===d?null:d,f=e.pointMap(),p=f[o],m=f[s];p&&m&&n.push(e.createLink({start:p,end:m,meta:h,startAt:u,endAt:c}))})),Y(this.linkList,n),this.linkList}},{key:"createNode",value:function(t){return new it(t,this)}},{key:"createLink",value:function(t){return new pt(t,this)}},{key:"addNode",value:function(t){var e=t.constructor===it?t:this.createNode(t);return this.nodeList.push(e),e}},{key:"addLink",value:function(t){var e=t.constructor===pt?t:this.createLink(t),n=this.linkList.find((function(t){return t.start===e.start&&t.end===e.end}));return n?(n.startAt=e.startAt,n.endAt=e.endAt):e.start&&e.end&&this.linkList.push(e),e}},{key:"removeNode",value:function(t){var e=this,n=this.nodeList.indexOf(t);return this.linkList.filter((function(e){return e.start===t||e.end===t})).forEach((function(t){e.removeLink(t)})),this.nodeList.splice(n,1),t}},{key:"removeLink",value:function(t){var e=this.linkList.indexOf(t);return this.linkList.splice(e,1),this.mouseonLink===t&&(this.mouseonLink=null),t}},{key:"toLastNode",value:function(t){var e=this.nodeList;e.splice.apply(e,[e.length-1,0].concat(vt(e.splice(t,1))))}},{key:"toLastLink",value:function(t){var e=this.linkList;e.splice.apply(e,[e.length-1,0].concat(vt(e.splice(t,1))))}},{key:"toJSON",value:function(){return{origin:this.origin,nodeList:this.nodeList.map((function(t){return t.toJSON()})),linkList:this.linkList.map((function(t){return t.toJSON()}))}}},{key:"selectAll",value:function(){var t=this.nodeList,e=20;this.maskBoundingClientRect={top:Math.min.apply(Math,vt(t.map((function(t){return t.center[1]-t.height/2}))))-e,right:Math.max.apply(Math,vt(t.map((function(t){return t.center[0]+t.width/2}))))+e,bottom:Math.max.apply(Math,vt(t.map((function(t){return t.center[1]+t.height/2}))))+e,left:Math.min.apply(Math,vt(t.map((function(t){return t.center[0]-t.width/2}))))-e},this.graphSelected=!0}}]),n}(b),$t=Et,Nt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"super-flow__menu-container"},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"flow__menu-mask",on:{mousemove:function(t){t.stopPropagation(),t.preventDefault()},mousedown:t.close}}),n("ul",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"super-flow__menu",style:t.style,attrs:{tabindex:"-1"},on:{mousemove:function(t){t.stopPropagation(),t.preventDefault()},contextmenu:function(t){t.preventDefault(),t.stopPropagation()},blur:t.close}},[t._l(t.list,(function(e){return[t._l(e,(function(e){return n("li",{staticClass:"super-flow__menu-item",class:{"is-disabled":e.disable},on:{click:function(n){return t.select(e)}}},[t._t("default",[n("span",{staticClass:"super-flow__menu-item-icon"}),n("span",{staticClass:"super-flow__menu-item-content"},[t._v(" "+t._s(e.label)+" ")])],{item:e})],2)})),n("li",{staticClass:"super-flow__menu-line"})]}))],2)])},It=[],Dt={props:{graph:Object,visible:{type:Boolean,default:!1},list:{type:Array,default:function(){return[]}},position:{type:Array,default:function(){return[0,0]}},source:{type:Object,default:function(){return{}}}},computed:{style:function(){return{left:this.position[0]+"px",top:this.position[1]+"px"}}},methods:{select:function(t){t.disable||(this.$emit("update:visible",!1),t.selected(this.source,B(this.position).minus(this.graph.origin).end))},close:function(t){this.$emit("update:visible",!1)}},watch:{visible:function(){var t=this;this.visible&&this.$nextTick((function(){return t.$el.focus()}))}}},Tt=Dt;function Bt(t,e,n,i,o,r,s,a){var u,l="function"==typeof t?t.options:t;if(e&&(l.render=e,l.staticRenderFns=n,l._compiled=!0),i&&(l.functional=!0),r&&(l._scopeId="data-v-"+r),s?(u=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),o&&o.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(s)},l._ssrRegister=u):o&&(u=a?function(){o.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:o),u)if(l.functional){l._injectStyles=u;var c=l.render;l.render=function(t,e){return u.call(e),c(t,e)}}else{var d=l.beforeCreate;l.beforeCreate=d?[].concat(d,u):[u]}return{exports:t,options:l}}i("b8fb");var Rt=Bt(Tt,Nt,It,!1,null,null,null).exports,Ht=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"super-flow__node",class:{"can-move":t.nodeDrop},style:t.style,attrs:{tabindex:"-1"},on:{mousedown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button?null:t.nodeMousedown(e)},mouseenter:t.nodeMouseenter,mouseleave:t.nodeMouseleave,mouseup:t.nodeMouseup,contextmenu:function(e){return e.preventDefault(),e.stopPropagation(),t.nodeContextmenu(e)}}},[t._t("default",null,{meta:t.node.meta}),t._l(t.direction,(function(e,i){return n("div",{directives:[{name:"show",rawName:"v-show",value:t.output&&t.lineDrop,expression:"output && lineDrop"}],class:"node-side node-side-"+i,on:{contextmenu:function(t){t.stopPropagation(),t.preventDefault()},mousedown:function(n){return!n.type.indexOf("key")&&t._k(n.keyCode,"left",37,n.key,["Left","ArrowLeft"])||"button"in n&&0!==n.button?null:(n.preventDefault(),n.stopPropagation(),function(n){return t.sideMousedown(n,e)}(n))}}})}))],2)},Ft=[],zt={props:{graph:Object,node:Object,index:Number,isMove:Boolean,isTemEdge:Boolean,nodeIntercept:Function,lineDrop:Boolean,nodeDrop:Boolean},data:function(){return{direction:J,output:this.nodeIntercept()}},computed:{style:function(){var t=this.node,e=t.position;return{width:t.width+"px",height:t.height+"px",top:e[1]+"px",left:e[0]+"px"}}},methods:{nodeMousedown:function(t){this.graph.toLastNode(this.index),this.$emit("node-mousedown",this.node,C(t))},nodeMouseenter:function(t){this.output=this.nodeIntercept(),this.graph.mouseonNode=this.node,this.isTemEdge&&this.$emit("node-mouseenter",t,this.node,C(t,this.$el))},nodeMouseleave:function(){this.graph.mouseonNode=null,this.isTemEdge&&this.$emit("node-mouseleave")},nodeMouseup:function(){this.isTemEdge&&this.$emit("node-mouseup")},nodeContextmenu:function(t){this.$emit("node-contextmenu",t,this.node)},sideMousedown:function(t){this.$emit("side-mousedown",t,this.node,C(t,this.$el))}}},Xt=zt,Yt=(i("2470"),Bt(Xt,Ht,Ft,!1,null,null,null)).exports,Ut=function(){var t=this,e=t.$createElement;return(t._self._c||e)("canvas",{staticClass:"super-flow__line"})},Jt=[];function Wt(t,e){return qt(t)||Vt(t,e)||Zt(t,e)||Gt()}function Gt(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Vt(t,e){var n=t&&("undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null!=n){var i,o,r=[],s=!0,a=!1;try{for(n=n.call(t);!(s=(i=n.next()).done)&&(r.push(i.value),!e||r.length!==e);s=!0);}catch(l){a=!0,o=l}finally{try{s||null==n.return||n.return()}finally{if(a)throw o}}return r}}function qt(t){if(Array.isArray(t))return t}function Kt(t){return ee(t)||te(t)||Zt(t)||Qt()}function Qt(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Zt(t,e){if(t){if("string"==typeof t)return ne(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ne(t,e):void 0}}function te(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function ee(t){if(Array.isArray(t))return ne(t)}function ne(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var ie={props:{padding:{type:Number,default:50},linkDesc:[Function,null],linkStyle:[Function,null],linkBaseStyle:Object,index:Number,graph:Object,link:Object},data:function(){return{top:0,right:0,bottom:0,left:0,currentPointList:[],currentPathPointList:null}},mounted:function(){var t=this;this.ctx=this.$el.getContext("2d"),this.draw(),this.graph.add("mousemove",this.rootMousemove),this.$once("hook:beforeDestroy",(function(){t.graph.remove("mousemove",t.rootMousemove)}))},computed:{styles:function(){return Object.assign({hover:"#FF0000",color:"#666666",textColor:"#666666",textHover:"#FF0000",font:"14px Arial",dotted:!1,lineDash:[4,4],background:"rgba(255,255,255,0.6)"},this.linkBaseStyle)},inPath:{get:function(){return this.graph.mouseonLink===this.link},set:function(t){t&&!this.graph.mouseonNode?(this.graph.mouseonLink=this.link,this.$el.style.zIndex="1",this.graph.toLastLink(this.index)):this.inPath&&(this.graph.mouseonLink=null,this.$el.style.zIndex="0")}}},methods:{draw:function(){var t=this,e=this.currentPathPointList=this.link.pathPointList,n=e.pointList,i=e.minX,o=e.minY,r=e.maxX,s=e.maxY;this.top=o-this.padding,this.right=r+this.padding,this.bottom=s+this.padding,this.left=i-this.padding,this.currentPointList=n.map((function(e){return[Math.floor(e[0]-t.left),Math.floor(e[1]-t.top)]})),this.changeStyle(),this.initLine()},changeStyle:function(){this.$el.width=this.right-this.left,this.$el.height=this.bottom-this.top,this.$el.style.top=this.top+"px",this.$el.style.left=this.left+"px"},initLine:function(){if(this.ctx.clearRect(0,0,this.$el.width,this.$el.height),this.linkStyle){var t=this.linkStyle(this.link);X(t)&&Object.assign(this.styles,t)}if(this.inPath){var e=this.styles.hover,n=this.styles.textHover;this.drawLine(e),this.drawDesc(n),this.drawArrow(e)}else{var i=this.styles.color,o=this.styles.textColor;this.drawLine(i),this.drawDesc(o),this.drawArrow(i)}},drawLine:function(t){var e=2,n=this.ctx;n.lineJoin="round",n.beginPath(),this.styles.dotted&&n.setLineDash(this.styles.lineDash),n.lineWidth=e,n.strokeStyle=t,this.currentPointList.forEach((function(t,e){0===e?n.moveTo.apply(n,Kt(t)):(n.lineTo.apply(n,Kt(t)),n.stroke())})),n.save()},drawDesc:function(t){var e,n=this.ctx;if(H(this.linkDesc)&&(e=this.linkDesc(this.link)),z(e)){var i=this.styles,o=i.font,r=i.background;this.ctx.font=o,this.ctx.textAlign="center",this.ctx.textBaseline="middle";var s=this.descIntercept(e),a=s.text,u=s.width,l=parseInt(o.match(/(\d+px)/g)[0]),c=this.descPosition(),d=B(c).minus([u/2,l/2]).end;this.ctx.fillStyle=r,n.fillRect(d[0],d[1],u,l),this.ctx.fillStyle=t,n.fillText.apply(n,[a].concat(Kt(c)))}},descPosition:function(){var t=0,e=0,n=null;return this.currentPointList.reduce((function(e,n){var i=B(e).minus(n).end;return t+=Math.abs(i[0])+Math.abs(i[1]),n})),this.currentPointList.reduce((function(i,o){var r=B(i).minus(o).end,s=Math.abs(r[0])+Math.abs(r[1]),a=e,u=t/2;return(e+=s)>=t/2&&null===n&&(n=i,n=i[0]===o[0]?i[1]<o[1]?B(i).add([0,u-a]).end:B(i).add([0,-(u-a)]).end:i[0]<o[0]?B(i).add([u-a,0]).end:B(i).add([-(u-a),0]).end),o})),n},descIntercept:function(t){var e=this.ctx,n=e.measureText(t).width,i=2*this.padding-10,o="...",r=e.measureText(o).width;if(n<=i||i<=r)return{text:t,width:n};for(var s=t.length;n>=i-r&&s-- >0;)t=t.slice(0,s),n=e.measureText(t).width;return{text:t+o,width:i+r}},drawArrow:function(t){var e=4,n=this.currentPointList.length;if(!(n<2)){var i=this.currentPointList[n-2],o=this.currentPointList[n-1],r=this.ctx;r.translate.apply(r,Kt(o));var s=Math.atan((o[0]-i[0])/(o[1]-i[1]));r.beginPath(),o[1]-i[1]>=0?r.rotate(-s):r.rotate(Math.PI-s),r.fillStyle=t,r.lineTo(-e,2*-e),r.lineTo(0,-e),r.lineTo(e,2*-e),r.lineTo(0,0),r.closePath(),r.fill(),r.restore()}},getCoordinates:function(t){var e=t.clientX,n=t.clientY,i=this.$el.getBoundingClientRect(),o=i.top;return[e-i.left,n-o]},isPointInStroke:function(t){var e=Wt(this.getCoordinates(t),2),n=e[0],i=e[1];return this.link.isPointInLink([this.left+n,this.top+i],this.currentPathPointList)},rootMousemove:function(t){var e=t.evt;return this.inPath=this.isPointInStroke(e),this.inPath}},watch:{"link.pathPointList":function(){this.draw()},inPath:function(){this.initLine()},"link.meta":{deep:!0,handler:function(){this.draw()}},linkBaseStyle:{deep:!0,handler:function(){this.draw()}}}},oe=ie,re=(i("7e2d"),Bt(oe,Ut,Jt,!1,null,null,null)).exports,se=function(){var t=this,e=t.$createElement;return(t._self._c||e)("canvas",{ref:"markLine",staticClass:"super-flow__mark-line"})},ae=[];function ue(t){return de(t)||ce(t)||pe(t)||le()}function le(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ce(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function de(t){if(Array.isArray(t))return me(t)}function he(t,e){return ye(t)||ve(t,e)||pe(t,e)||fe()}function fe(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function pe(t,e){if(t){if("string"==typeof t)return me(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?me(t,e):void 0}}function me(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function ve(t,e){var n=t&&("undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null!=n){var i,o,r=[],s=!0,a=!1;try{for(n=n.call(t);!(s=(i=n.next()).done)&&(r.push(i.value),!e||r.length!==e);s=!0);}catch(l){a=!0,o=l}finally{try{s||null==n.return||n.return()}finally{if(a)throw o}}return r}}function ye(t){if(Array.isArray(t))return t}var ge={props:{width:{type:Number,default:0},height:{type:Number,default:0},markLine:Array,markColor:String},mounted:function(){this.$refs.markLine.height=this.height,this.$refs.markLine.width=this.width,this.draw()},methods:{draw:function(){var t=this.$el.getContext("2d");t.clearRect(0,0,this.width,this.height),t.strokeStyle=this.markColor,t.lineWidth=1,t.setLineDash([4,2]),this.markLine.forEach((function(e){var n=he(e,2),i=n[0],o=n[1];t.beginPath(),t.moveTo.apply(t,ue(i)),t.lineTo.apply(t,ue(o)),t.stroke()}))}},watch:{markLine:function(){this.draw()}}},be=ge,we=(i("bce9"),Bt(be,se,ae,!1,null,null,null)).exports;function ke(t){return Se(t)||Le(t)||xe(t)||_e()}function _e(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function xe(t,e){if(t){if("string"==typeof t)return Ae(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ae(t,e):void 0}}function Le(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function Se(t){if(Array.isArray(t))return Ae(t)}function Ae(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function Ce(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Me(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ce(Object(n),!0).forEach((function(e){Pe(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ce(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Pe(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Oe={name:"super-flow",props:{draggable:{type:Boolean,default:!0},linkAddable:{type:Boolean,default:!0},linkEditable:{type:Boolean,default:!0},hasMarkLine:{type:Boolean,default:!0},linkDesc:{type:[Function,null],default:null},linkStyle:{type:[Function,null],default:null},linkBaseStyle:{type:Object,default:function(){return{}}},markLineColor:{type:String,default:"#55abfc"},origin:{type:Array,default:function(){return[0,0]}},nodeList:{type:Array,default:function(){return[]}},linkList:{type:Array,default:function(){return[]}},graphMenu:{type:Array,default:function(){return[]}},nodeMenu:{type:Array,default:function(){return[]}},linkMenu:{type:Array,default:function(){return[]}},linkPadding:{type:Number,default:50},enterIntercept:{type:Function,default:function(){return!0}},outputIntercept:{type:Function,default:function(){return!0}}},data:function(){return{graph:new $t({width:this.width,height:this.height,origin:this.origin}),menuConf:{visible:!1,position:[0,0],source:null,list:[]},moveNodeConf:{isMove:!1,node:null,offset:null,verticalList:[],horizontalList:[],markLine:[]},moveAllConf:{isMove:!1,downPosition:[0,0]},temEdgeConf:{visible:!1,link:null},loaded:!1,clientWidth:0,clientHeight:0}},components:{GraphMenu:Rt,GraphNode:Yt,GraphLine:re,MarkLine:we},computed:{maskStyle:function(){var t=this.graph.maskBoundingClientRect,e=t.top,n=t.right,i=t.bottom,o=t.left;return{width:"".concat(n-o,"px"),height:"".concat(i-e,"px"),top:"".concat(e+this.graph.origin[1],"px"),left:"".concat(o+this.graph.origin[0],"px")}}},mounted:function(){var t=this;document.addEventListener("mouseup",this.docMouseup),document.addEventListener("mousemove",this.docMousemove),this.$once("hook:beforeDestroy",(function(){document.removeEventListener("mouseup",t.docMouseup),document.removeEventListener("mousemove",t.docMousemove)})),this.$nextTick((function(){t.graph.initNode(t.nodeList),t.graph.initLink(t.linkList)}))},methods:{initMenu:function(t,e){return t.map((function(t){return t.map((function(t){var n,i;return n=H(t.disable)?t.disable(e):F(t.disable)?t.disable:Boolean(t.disable),i=H(t.hidden)?t.hidden(e):F(t.hidden)?t.hidden:Boolean(t.hidden),Me(Me({},t),{},{disable:n,hidden:i})})).filter((function(t){return!t.hidden}))})).filter((function(t){return t.length}))},showContextMenu:function(t,e,n){e.length&&(this.$set(this.menuConf,"position",t),this.$set(this.menuConf,"list",e),this.$set(this.menuConf,"source",n),this.menuConf.visible=!0)},docMouseup:function(t){this.moveNodeConf.isMove&&(t.stopPropagation(),t.preventDefault()),this.moveNodeConf.isMove=!1,this.moveNodeConf.node=null,this.moveNodeConf.offset=null,Y(this.moveNodeConf.markLine,[]),this.temEdgeConf.visible=!1,this.temEdgeConf.link=null,this.moveAllConf.isMove=!1},docMousemove:function(t){this.moveNodeConf.isMove?this.moveNode(t):this.temEdgeConf.visible?this.moveTemEdge(t):this.graph.graphSelected?this.moveWhole(t):this.linkEditable&&this.graph.dispatch({type:"mousemove",evt:t},!0)},moveNode:function(t){var e=this,n=10,i=this.moveNodeConf,o=this.graph.origin,r=B(i.offset).differ(C(t,this.$el)).minus(o).add([i.node.width/2,i.node.height/2]).end;if(this.hasMarkLine){var s=[];i.verticalList.some((function(t){var i=r[0],a=t-n<i&&t+n>i;return a&&(r[0]=t,t=Math.floor(t),t+=o[0],t+=t%1==0?.5:0,s.push([[t,0],[t,e.clientHeight]])),a})),i.horizontalList.some((function(t){var i=r[1],a=t-n<i&&t+n>i;return a&&(r[1]=t,t=Math.floor(t),t+=o[1],t+=t%1==0?.5:0,s.push([[0,t],[e.clientWidth,t]])),a})),Y(i.markLine,s)}i.node.center=r},moveTemEdge:function(t){this.temEdgeConf.link.movePosition=C(t,this.$el)},moveWhole:function(t){if(this.moveAllConf.isMove){var e=B(this.moveAllConf.downPosition).differ([t.clientX,t.clientY]).end;Y(this.graph.origin,B(this.moveAllConf.origin).add(e).end)}},contextmenu:function(t){var e,n,i=this.graph.mouseonLink,o=C(t);i&&i.isPointInLink(o)?(e=this.initMenu(this.linkMenu,i),n=i):(i&&(this.graph.mouseonLink=null),e=this.initMenu(this.graphMenu,this.graph),n=this.graph),this.showContextMenu(o,e,n)},nodeMousedown:function(t,e){if(this.draggable){this.clientWidth=this.$el.clientWidth,this.clientHeight=this.$el.clientHeight;var n=this.moveNodeConf.verticalList,i=this.moveNodeConf.horizontalList,o=this.graph.nodeList.filter((function(e){return e!==t})).map((function(t){return t.center}));Y(n,ke(new Set(o.map((function(t){return t[0]})))).sort((function(t,e){return t-e}))),Y(i,ke(new Set(o.map((function(t){return t[1]})))).sort((function(t,e){return t-e}))),this.moveNodeConf.isMove=!0,this.moveNodeConf.node=t,this.moveNodeConf.offset=e}},nodeMouseenter:function(t,e,n){var i=this.temEdgeConf.link;this.enterIntercept(i.start,e,this.graph)&&(i.end=e,i.endAt=n)},nodeMouseleave:function(){this.temEdgeConf.link.end=null},nodeMouseup:function(){this.graph.addLink(this.temEdgeConf.link)},nodeContextmenu:function(t,e){var n=this.initMenu(this.nodeMenu,e);n.length&&(this.$set(this.menuConf,"position",C(t,this.$el)),this.$set(this.menuConf,"list",n),this.$set(this.menuConf,"source",e),this.menuConf.visible=!0)},sideMousedown:function(t,e,n){if(this.linkAddable){var i=this.graph.createLink({start:e,startAt:n});i.movePosition=C(t,this.$el),this.$set(this.temEdgeConf,"link",i),this.temEdgeConf.visible=!0}},nodeIntercept:function(t){var e=this;return function(){return e.outputIntercept(t,e.graph)}},menuItemSelect:function(){this.menuConf.visible=!1},selectAllMaskMouseDown:function(t){this.moveAllConf.isMove=!0,this.moveAllConf.origin=ke(this.graph.origin),this.moveAllConf.downPosition=[t.clientX,t.clientY]},selectedAll:function(){this.graph.selectAll()},toJSON:function(){return this.graph.toJSON()},getMouseCoordinate:function(t,e){return B(C({clientX:t,clientY:e},this.$el)).minus(this.graph.origin).end},addNode:function(t){return this.graph.addNode(t)}},watch:{"graph.graphSelected":function(){var t=this;this.graph.graphSelected&&this.$nextTick((function(){t.$refs.selectAllMask.focus()}))},"graph.mouseonLink":function(){this.graph.mouseonLink?document.body.style.cursor="pointer":document.body.style.cursor=""},origin:function(){this.graph.origin=this.origin||[]},nodeList:function(){this.graph.initNode(this.nodeList)},linkList:function(){this.graph.initLink(this.linkList)}},install:function(t){t.component(this.name,this)}},je=Oe,Ee=(i("3ad9"),Bt(je,a,u,!1,null,null,null)).exports;n.default=Ee}}).default}(n);var l=i(n.exports),c={style:{height:"calc(100vh - 120px)"}};e("default",{__name:"index",setup:function(t){var e=o([0,0]),n=o([{id:"node43ciCsyL5ERMSDXL",width:50,height:25,coordinate:[179.828125,-229],meta:{id:"69edbfc2-f0f9-4a12-92ae-b2154f5dcc8f",prop:"condition",name:"IP库服务",desc:"IP库服务",users:[237]}},{id:"node07Yr3DlCiLUQ4dpN",width:50,height:25,coordinate:[123.8359375,-293.5],meta:{id:"6801bbfc-f06e-40c5-a553-537d43c7b6cd",prop:"condition",name:"HB/ADNET/Frontier",desc:"HB/ADNET",users:[153]}}]),i=o([{id:"linkozpMt9FvxDKjhFxe",startId:"node07Yr3DlCiLUQ4dpN",endId:"node43ciCsyL5ERMSDXL",startAt:[50,12.5],endAt:[25,0],meta:null}]);return function(t,o){return u(),r("div",c,[s(a(l),{ref:"flow",origin:e.value,"node-list":n.value,"link-list":i.value},null,8,["origin","node-list","link-list"])])}}})}}}))}();
