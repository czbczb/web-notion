import{P as Ts,o as nC,k as iC,q as rf,t as eO,r as tO,b as rO,aa as nO,u as iO,j as Ry,F as oO,av as aO,aw as sO}from"./antdv.415263d7.js";var vc=function(r,t){return vc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},vc(r,t)};function oe(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");vc(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var N=function(){return N=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},N.apply(this,arguments)};function _r(r,t){var e={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&t.indexOf(n)<0&&(e[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(e[n[i]]=r[n[i]]);return e}function jt(r,t,e,n){function i(o){return o instanceof e?o:new e(function(a){a(o)})}return new(e||(e=Promise))(function(o,a){function s(d){try{u(n.next(d))}catch(h){a(h)}}function l(d){try{u(n.throw(d))}catch(h){a(h)}}function u(d){d.done?o(d.value):i(d.value).then(s,l)}u((n=n.apply(r,t||[])).next())})}function er(r,t){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(d){return l([u,d])}}function l(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(e=0)),e;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return e.label++,{value:u[1],done:!1};case 5:e.label++,i=u[1],u=[0];continue;case 7:u=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){e=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){e.label=u[1];break}if(u[0]===6&&e.label<o[1]){e.label=o[1],o=u;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(u);break}o[2]&&e.ops.pop(),e.trys.pop();continue}u=t.call(r,e)}catch(d){u=[6,d],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function Qt(r){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&r[t],n=0;if(e)return e.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function F(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(a)throw a.error}}return o}function X(r,t,e){if(e||arguments.length===2)for(var n=0,i=t.length,o;n<i;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return r.concat(o||Array.prototype.slice.call(t))}function lO(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var oC={exports:{}};(function(r){var t=Object.prototype.hasOwnProperty,e="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(e=!1));function i(l,u,d){this.fn=l,this.context=u,this.once=d||!1}function o(l,u,d,h,v){if(typeof d!="function")throw new TypeError("The listener must be a function");var p=new i(d,h||l,v),g=e?e+u:u;return l._events[g]?l._events[g].fn?l._events[g]=[l._events[g],p]:l._events[g].push(p):(l._events[g]=p,l._eventsCount++),l}function a(l,u){--l._eventsCount===0?l._events=new n:delete l._events[u]}function s(){this._events=new n,this._eventsCount=0}s.prototype.eventNames=function(){var u=[],d,h;if(this._eventsCount===0)return u;for(h in d=this._events)t.call(d,h)&&u.push(e?h.slice(1):h);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},s.prototype.listeners=function(u){var d=e?e+u:u,h=this._events[d];if(!h)return[];if(h.fn)return[h.fn];for(var v=0,p=h.length,g=new Array(p);v<p;v++)g[v]=h[v].fn;return g},s.prototype.listenerCount=function(u){var d=e?e+u:u,h=this._events[d];return h?h.fn?1:h.length:0},s.prototype.emit=function(u,d,h,v,p,g){var m=e?e+u:u;if(!this._events[m])return!1;var C=this._events[m],w=arguments.length,_,S;if(C.fn){switch(C.once&&this.removeListener(u,C.fn,void 0,!0),w){case 1:return C.fn.call(C.context),!0;case 2:return C.fn.call(C.context,d),!0;case 3:return C.fn.call(C.context,d,h),!0;case 4:return C.fn.call(C.context,d,h,v),!0;case 5:return C.fn.call(C.context,d,h,v,p),!0;case 6:return C.fn.call(C.context,d,h,v,p,g),!0}for(S=1,_=new Array(w-1);S<w;S++)_[S-1]=arguments[S];C.fn.apply(C.context,_)}else{var b=C.length,T;for(S=0;S<b;S++)switch(C[S].once&&this.removeListener(u,C[S].fn,void 0,!0),w){case 1:C[S].fn.call(C[S].context);break;case 2:C[S].fn.call(C[S].context,d);break;case 3:C[S].fn.call(C[S].context,d,h);break;case 4:C[S].fn.call(C[S].context,d,h,v);break;default:if(!_)for(T=1,_=new Array(w-1);T<w;T++)_[T-1]=arguments[T];C[S].fn.apply(C[S].context,_)}}return!0},s.prototype.on=function(u,d,h){return o(this,u,d,h,!1)},s.prototype.once=function(u,d,h){return o(this,u,d,h,!0)},s.prototype.removeListener=function(u,d,h,v){var p=e?e+u:u;if(!this._events[p])return this;if(!d)return a(this,p),this;var g=this._events[p];if(g.fn)g.fn===d&&(!v||g.once)&&(!h||g.context===h)&&a(this,p);else{for(var m=0,C=[],w=g.length;m<w;m++)(g[m].fn!==d||v&&!g[m].once||h&&g[m].context!==h)&&C.push(g[m]);C.length?this._events[p]=C.length===1?C[0]:C:a(this,p)}return this},s.prototype.removeAllListeners=function(u){var d;return u?(d=e?e+u:u,this._events[d]&&a(this,d)):(this._events=new n,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=e,s.EventEmitter=s,r.exports=s})(oC);var uO=oC.exports,Rv=lO(uO),ht=1e-6,Rt=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var r=0,t=arguments.length;t--;)r+=arguments[t]*arguments[t];return Math.sqrt(r)});function aC(){var r=new Rt(9);return Rt!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[5]=0,r[6]=0,r[7]=0),r[0]=1,r[4]=1,r[8]=1,r}function fO(r,t){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[4],r[4]=t[5],r[5]=t[6],r[6]=t[8],r[7]=t[9],r[8]=t[10],r}function dO(r,t,e,n,i,o,a,s,l){var u=new Rt(9);return u[0]=r,u[1]=t,u[2]=e,u[3]=n,u[4]=i,u[5]=o,u[6]=a,u[7]=s,u[8]=l,u}function it(){var r=new Rt(16);return Rt!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0),r[0]=1,r[5]=1,r[10]=1,r[15]=1,r}function sC(r){var t=new Rt(16);return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],t}function Go(r,t){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r[6]=t[6],r[7]=t[7],r[8]=t[8],r[9]=t[9],r[10]=t[10],r[11]=t[11],r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15],r}function hO(r,t,e,n,i,o,a,s,l,u,d,h,v,p,g,m){var C=new Rt(16);return C[0]=r,C[1]=t,C[2]=e,C[3]=n,C[4]=i,C[5]=o,C[6]=a,C[7]=s,C[8]=l,C[9]=u,C[10]=d,C[11]=h,C[12]=v,C[13]=p,C[14]=g,C[15]=m,C}function pc(r,t,e,n,i,o,a,s,l,u,d,h,v,p,g,m,C){return r[0]=t,r[1]=e,r[2]=n,r[3]=i,r[4]=o,r[5]=a,r[6]=s,r[7]=l,r[8]=u,r[9]=d,r[10]=h,r[11]=v,r[12]=p,r[13]=g,r[14]=m,r[15]=C,r}function vl(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function lC(r,t){if(r===t){var e=t[1],n=t[2],i=t[3],o=t[6],a=t[7],s=t[11];r[1]=t[4],r[2]=t[8],r[3]=t[12],r[4]=e,r[6]=t[9],r[7]=t[13],r[8]=n,r[9]=o,r[11]=t[14],r[12]=i,r[13]=a,r[14]=s}else r[0]=t[0],r[1]=t[4],r[2]=t[8],r[3]=t[12],r[4]=t[1],r[5]=t[5],r[6]=t[9],r[7]=t[13],r[8]=t[2],r[9]=t[6],r[10]=t[10],r[11]=t[14],r[12]=t[3],r[13]=t[7],r[14]=t[11],r[15]=t[15];return r}function ii(r,t){var e=t[0],n=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=t[6],u=t[7],d=t[8],h=t[9],v=t[10],p=t[11],g=t[12],m=t[13],C=t[14],w=t[15],_=e*s-n*a,S=e*l-i*a,b=e*u-o*a,T=n*l-i*s,E=n*u-o*s,R=i*u-o*l,O=d*m-h*g,A=d*C-v*g,P=d*w-p*g,D=h*C-v*m,k=h*w-p*m,z=v*w-p*C,V=_*z-S*k+b*D+T*P-E*A+R*O;return V?(V=1/V,r[0]=(s*z-l*k+u*D)*V,r[1]=(i*k-n*z-o*D)*V,r[2]=(m*R-C*E+w*T)*V,r[3]=(v*E-h*R-p*T)*V,r[4]=(l*P-a*z-u*A)*V,r[5]=(e*z-i*P+o*A)*V,r[6]=(C*b-g*R-w*S)*V,r[7]=(d*R-v*b+p*S)*V,r[8]=(a*k-s*P+u*O)*V,r[9]=(n*P-e*k-o*O)*V,r[10]=(g*E-m*b+w*_)*V,r[11]=(h*b-d*E-p*_)*V,r[12]=(s*A-a*D-l*O)*V,r[13]=(e*D-n*A+i*O)*V,r[14]=(m*S-g*T-C*_)*V,r[15]=(d*T-h*S+v*_)*V,r):null}function cO(r,t){var e=t[0],n=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=t[6],u=t[7],d=t[8],h=t[9],v=t[10],p=t[11],g=t[12],m=t[13],C=t[14],w=t[15];return r[0]=s*(v*w-p*C)-h*(l*w-u*C)+m*(l*p-u*v),r[1]=-(n*(v*w-p*C)-h*(i*w-o*C)+m*(i*p-o*v)),r[2]=n*(l*w-u*C)-s*(i*w-o*C)+m*(i*u-o*l),r[3]=-(n*(l*p-u*v)-s*(i*p-o*v)+h*(i*u-o*l)),r[4]=-(a*(v*w-p*C)-d*(l*w-u*C)+g*(l*p-u*v)),r[5]=e*(v*w-p*C)-d*(i*w-o*C)+g*(i*p-o*v),r[6]=-(e*(l*w-u*C)-a*(i*w-o*C)+g*(i*u-o*l)),r[7]=e*(l*p-u*v)-a*(i*p-o*v)+d*(i*u-o*l),r[8]=a*(h*w-p*m)-d*(s*w-u*m)+g*(s*p-u*h),r[9]=-(e*(h*w-p*m)-d*(n*w-o*m)+g*(n*p-o*h)),r[10]=e*(s*w-u*m)-a*(n*w-o*m)+g*(n*u-o*s),r[11]=-(e*(s*p-u*h)-a*(n*p-o*h)+d*(n*u-o*s)),r[12]=-(a*(h*C-v*m)-d*(s*C-l*m)+g*(s*v-l*h)),r[13]=e*(h*C-v*m)-d*(n*C-i*m)+g*(n*v-i*h),r[14]=-(e*(s*C-l*m)-a*(n*C-i*m)+g*(n*l-i*s)),r[15]=e*(s*v-l*h)-a*(n*v-i*h)+d*(n*l-i*s),r}function uC(r){var t=r[0],e=r[1],n=r[2],i=r[3],o=r[4],a=r[5],s=r[6],l=r[7],u=r[8],d=r[9],h=r[10],v=r[11],p=r[12],g=r[13],m=r[14],C=r[15],w=t*a-e*o,_=t*s-n*o,S=t*l-i*o,b=e*s-n*a,T=e*l-i*a,E=n*l-i*s,R=u*g-d*p,O=u*m-h*p,A=u*C-v*p,P=d*m-h*g,D=d*C-v*g,k=h*C-v*m;return w*k-_*D+S*P+b*A-T*O+E*R}function lr(r,t,e){var n=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],u=t[6],d=t[7],h=t[8],v=t[9],p=t[10],g=t[11],m=t[12],C=t[13],w=t[14],_=t[15],S=e[0],b=e[1],T=e[2],E=e[3];return r[0]=S*n+b*s+T*h+E*m,r[1]=S*i+b*l+T*v+E*C,r[2]=S*o+b*u+T*p+E*w,r[3]=S*a+b*d+T*g+E*_,S=e[4],b=e[5],T=e[6],E=e[7],r[4]=S*n+b*s+T*h+E*m,r[5]=S*i+b*l+T*v+E*C,r[6]=S*o+b*u+T*p+E*w,r[7]=S*a+b*d+T*g+E*_,S=e[8],b=e[9],T=e[10],E=e[11],r[8]=S*n+b*s+T*h+E*m,r[9]=S*i+b*l+T*v+E*C,r[10]=S*o+b*u+T*p+E*w,r[11]=S*a+b*d+T*g+E*_,S=e[12],b=e[13],T=e[14],E=e[15],r[12]=S*n+b*s+T*h+E*m,r[13]=S*i+b*l+T*v+E*C,r[14]=S*o+b*u+T*p+E*w,r[15]=S*a+b*d+T*g+E*_,r}function oo(r,t,e){var n=e[0],i=e[1],o=e[2],a,s,l,u,d,h,v,p,g,m,C,w;return t===r?(r[12]=t[0]*n+t[4]*i+t[8]*o+t[12],r[13]=t[1]*n+t[5]*i+t[9]*o+t[13],r[14]=t[2]*n+t[6]*i+t[10]*o+t[14],r[15]=t[3]*n+t[7]*i+t[11]*o+t[15]):(a=t[0],s=t[1],l=t[2],u=t[3],d=t[4],h=t[5],v=t[6],p=t[7],g=t[8],m=t[9],C=t[10],w=t[11],r[0]=a,r[1]=s,r[2]=l,r[3]=u,r[4]=d,r[5]=h,r[6]=v,r[7]=p,r[8]=g,r[9]=m,r[10]=C,r[11]=w,r[12]=a*n+d*i+g*o+t[12],r[13]=s*n+h*i+m*o+t[13],r[14]=l*n+v*i+C*o+t[14],r[15]=u*n+p*i+w*o+t[15]),r}function nf(r,t,e){var n=e[0],i=e[1],o=e[2];return r[0]=t[0]*n,r[1]=t[1]*n,r[2]=t[2]*n,r[3]=t[3]*n,r[4]=t[4]*i,r[5]=t[5]*i,r[6]=t[6]*i,r[7]=t[7]*i,r[8]=t[8]*o,r[9]=t[9]*o,r[10]=t[10]*o,r[11]=t[11]*o,r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15],r}function vO(r,t,e,n){var i=n[0],o=n[1],a=n[2],s=Math.hypot(i,o,a),l,u,d,h,v,p,g,m,C,w,_,S,b,T,E,R,O,A,P,D,k,z,V,Z;return s<ht?null:(s=1/s,i*=s,o*=s,a*=s,l=Math.sin(e),u=Math.cos(e),d=1-u,h=t[0],v=t[1],p=t[2],g=t[3],m=t[4],C=t[5],w=t[6],_=t[7],S=t[8],b=t[9],T=t[10],E=t[11],R=i*i*d+u,O=o*i*d+a*l,A=a*i*d-o*l,P=i*o*d-a*l,D=o*o*d+u,k=a*o*d+i*l,z=i*a*d+o*l,V=o*a*d-i*l,Z=a*a*d+u,r[0]=h*R+m*O+S*A,r[1]=v*R+C*O+b*A,r[2]=p*R+w*O+T*A,r[3]=g*R+_*O+E*A,r[4]=h*P+m*D+S*k,r[5]=v*P+C*D+b*k,r[6]=p*P+w*D+T*k,r[7]=g*P+_*D+E*k,r[8]=h*z+m*V+S*Z,r[9]=v*z+C*V+b*Z,r[10]=p*z+w*V+T*Z,r[11]=g*z+_*V+E*Z,t!==r&&(r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15]),r)}function fC(r,t,e){var n=Math.sin(e),i=Math.cos(e),o=t[4],a=t[5],s=t[6],l=t[7],u=t[8],d=t[9],h=t[10],v=t[11];return t!==r&&(r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15]),r[4]=o*i+u*n,r[5]=a*i+d*n,r[6]=s*i+h*n,r[7]=l*i+v*n,r[8]=u*i-o*n,r[9]=d*i-a*n,r[10]=h*i-s*n,r[11]=v*i-l*n,r}function dC(r,t,e){var n=Math.sin(e),i=Math.cos(e),o=t[0],a=t[1],s=t[2],l=t[3],u=t[8],d=t[9],h=t[10],v=t[11];return t!==r&&(r[4]=t[4],r[5]=t[5],r[6]=t[6],r[7]=t[7],r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15]),r[0]=o*i-u*n,r[1]=a*i-d*n,r[2]=s*i-h*n,r[3]=l*i-v*n,r[8]=o*n+u*i,r[9]=a*n+d*i,r[10]=s*n+h*i,r[11]=l*n+v*i,r}function pO(r,t,e){var n=Math.sin(e),i=Math.cos(e),o=t[0],a=t[1],s=t[2],l=t[3],u=t[4],d=t[5],h=t[6],v=t[7];return t!==r&&(r[8]=t[8],r[9]=t[9],r[10]=t[10],r[11]=t[11],r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15]),r[0]=o*i+u*n,r[1]=a*i+d*n,r[2]=s*i+h*n,r[3]=l*i+v*n,r[4]=u*i-o*n,r[5]=d*i-a*n,r[6]=h*i-s*n,r[7]=v*i-l*n,r}function hC(r,t){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=t[0],r[13]=t[1],r[14]=t[2],r[15]=1,r}function cC(r,t){return r[0]=t[0],r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=t[1],r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=t[2],r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function gO(r,t,e){var n=e[0],i=e[1],o=e[2],a=Math.hypot(n,i,o),s,l,u;return a<ht?null:(a=1/a,n*=a,i*=a,o*=a,s=Math.sin(t),l=Math.cos(t),u=1-l,r[0]=n*n*u+l,r[1]=i*n*u+o*s,r[2]=o*n*u-i*s,r[3]=0,r[4]=n*i*u-o*s,r[5]=i*i*u+l,r[6]=o*i*u+n*s,r[7]=0,r[8]=n*o*u+i*s,r[9]=i*o*u-n*s,r[10]=o*o*u+l,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r)}function yO(r,t){var e=Math.sin(t),n=Math.cos(t);return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=n,r[6]=e,r[7]=0,r[8]=0,r[9]=-e,r[10]=n,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function mO(r,t){var e=Math.sin(t),n=Math.cos(t);return r[0]=n,r[1]=0,r[2]=-e,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=e,r[9]=0,r[10]=n,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function CO(r,t){var e=Math.sin(t),n=Math.cos(t);return r[0]=n,r[1]=e,r[2]=0,r[3]=0,r[4]=-e,r[5]=n,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function vC(r,t,e){var n=t[0],i=t[1],o=t[2],a=t[3],s=n+n,l=i+i,u=o+o,d=n*s,h=n*l,v=n*u,p=i*l,g=i*u,m=o*u,C=a*s,w=a*l,_=a*u;return r[0]=1-(p+m),r[1]=h+_,r[2]=v-w,r[3]=0,r[4]=h-_,r[5]=1-(d+m),r[6]=g+C,r[7]=0,r[8]=v+w,r[9]=g-C,r[10]=1-(d+p),r[11]=0,r[12]=e[0],r[13]=e[1],r[14]=e[2],r[15]=1,r}function wO(r,t){var e=new Rt(3),n=-t[0],i=-t[1],o=-t[2],a=t[3],s=t[4],l=t[5],u=t[6],d=t[7],h=n*n+i*i+o*o+a*a;return h>0?(e[0]=(s*a+d*n+l*o-u*i)*2/h,e[1]=(l*a+d*i+u*n-s*o)*2/h,e[2]=(u*a+d*o+s*i-l*n)*2/h):(e[0]=(s*a+d*n+l*o-u*i)*2,e[1]=(l*a+d*i+u*n-s*o)*2,e[2]=(u*a+d*o+s*i-l*n)*2),vC(r,t,e),r}function of(r,t){return r[0]=t[12],r[1]=t[13],r[2]=t[14],r}function Va(r,t){var e=t[0],n=t[1],i=t[2],o=t[4],a=t[5],s=t[6],l=t[8],u=t[9],d=t[10];return r[0]=Math.hypot(e,n,i),r[1]=Math.hypot(o,a,s),r[2]=Math.hypot(l,u,d),r}function af(r,t){var e=new Rt(3);Va(e,t);var n=1/e[0],i=1/e[1],o=1/e[2],a=t[0]*n,s=t[1]*i,l=t[2]*o,u=t[4]*n,d=t[5]*i,h=t[6]*o,v=t[8]*n,p=t[9]*i,g=t[10]*o,m=a+d+g,C=0;return m>0?(C=Math.sqrt(m+1)*2,r[3]=.25*C,r[0]=(h-p)/C,r[1]=(v-l)/C,r[2]=(s-u)/C):a>d&&a>g?(C=Math.sqrt(1+a-d-g)*2,r[3]=(h-p)/C,r[0]=.25*C,r[1]=(s+u)/C,r[2]=(v+l)/C):d>g?(C=Math.sqrt(1+d-a-g)*2,r[3]=(v-l)/C,r[0]=(s+u)/C,r[1]=.25*C,r[2]=(h+p)/C):(C=Math.sqrt(1+g-a-d)*2,r[3]=(s-u)/C,r[0]=(v+l)/C,r[1]=(h+p)/C,r[2]=.25*C),r}function xO(r,t,e,n){var i=t[0],o=t[1],a=t[2],s=t[3],l=i+i,u=o+o,d=a+a,h=i*l,v=i*u,p=i*d,g=o*u,m=o*d,C=a*d,w=s*l,_=s*u,S=s*d,b=n[0],T=n[1],E=n[2];return r[0]=(1-(g+C))*b,r[1]=(v+S)*b,r[2]=(p-_)*b,r[3]=0,r[4]=(v-S)*T,r[5]=(1-(h+C))*T,r[6]=(m+w)*T,r[7]=0,r[8]=(p+_)*E,r[9]=(m-w)*E,r[10]=(1-(h+g))*E,r[11]=0,r[12]=e[0],r[13]=e[1],r[14]=e[2],r[15]=1,r}function Gs(r,t,e,n,i){var o=t[0],a=t[1],s=t[2],l=t[3],u=o+o,d=a+a,h=s+s,v=o*u,p=o*d,g=o*h,m=a*d,C=a*h,w=s*h,_=l*u,S=l*d,b=l*h,T=n[0],E=n[1],R=n[2],O=i[0],A=i[1],P=i[2],D=(1-(m+w))*T,k=(p+b)*T,z=(g-S)*T,V=(p-b)*E,Z=(1-(v+w))*E,Q=(C+_)*E,Y=(g+S)*R,te=(C-_)*R,ae=(1-(v+m))*R;return r[0]=D,r[1]=k,r[2]=z,r[3]=0,r[4]=V,r[5]=Z,r[6]=Q,r[7]=0,r[8]=Y,r[9]=te,r[10]=ae,r[11]=0,r[12]=e[0]+O-(D*O+V*A+Y*P),r[13]=e[1]+A-(k*O+Z*A+te*P),r[14]=e[2]+P-(z*O+Q*A+ae*P),r[15]=1,r}function Mv(r,t){var e=t[0],n=t[1],i=t[2],o=t[3],a=e+e,s=n+n,l=i+i,u=e*a,d=n*a,h=n*s,v=i*a,p=i*s,g=i*l,m=o*a,C=o*s,w=o*l;return r[0]=1-h-g,r[1]=d+w,r[2]=v-C,r[3]=0,r[4]=d-w,r[5]=1-u-g,r[6]=p+m,r[7]=0,r[8]=v+C,r[9]=p-m,r[10]=1-u-h,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function _O(r,t,e,n,i,o,a){var s=1/(e-t),l=1/(i-n),u=1/(o-a);return r[0]=o*2*s,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=o*2*l,r[6]=0,r[7]=0,r[8]=(e+t)*s,r[9]=(i+n)*l,r[10]=(a+o)*u,r[11]=-1,r[12]=0,r[13]=0,r[14]=a*o*2*u,r[15]=0,r}function pC(r,t,e,n,i){var o=1/Math.tan(t/2),a;return r[0]=o/e,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=o,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=-1,r[12]=0,r[13]=0,r[15]=0,i!=null&&i!==1/0?(a=1/(n-i),r[10]=(i+n)*a,r[14]=2*i*n*a):(r[10]=-1,r[14]=-2*n),r}var EO=pC;function SO(r,t,e,n,i){var o=1/Math.tan(t/2),a;return r[0]=o/e,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=o,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=-1,r[12]=0,r[13]=0,r[15]=0,i!=null&&i!==1/0?(a=1/(n-i),r[10]=i*a,r[14]=i*n*a):(r[10]=-1,r[14]=-n),r}function TO(r,t,e,n){var i=Math.tan(t.upDegrees*Math.PI/180),o=Math.tan(t.downDegrees*Math.PI/180),a=Math.tan(t.leftDegrees*Math.PI/180),s=Math.tan(t.rightDegrees*Math.PI/180),l=2/(a+s),u=2/(i+o);return r[0]=l,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=u,r[6]=0,r[7]=0,r[8]=-((a-s)*l*.5),r[9]=(i-o)*u*.5,r[10]=n/(e-n),r[11]=-1,r[12]=0,r[13]=0,r[14]=n*e/(e-n),r[15]=0,r}function gC(r,t,e,n,i,o,a){var s=1/(t-e),l=1/(n-i),u=1/(o-a);return r[0]=-2*s,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=-2*l,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=2*u,r[11]=0,r[12]=(t+e)*s,r[13]=(i+n)*l,r[14]=(a+o)*u,r[15]=1,r}var yC=gC;function mC(r,t,e,n,i,o,a){var s=1/(t-e),l=1/(n-i),u=1/(o-a);return r[0]=-2*s,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=-2*l,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=u,r[11]=0,r[12]=(t+e)*s,r[13]=(i+n)*l,r[14]=o*u,r[15]=1,r}function CC(r,t,e,n){var i,o,a,s,l,u,d,h,v,p,g=t[0],m=t[1],C=t[2],w=n[0],_=n[1],S=n[2],b=e[0],T=e[1],E=e[2];return Math.abs(g-b)<ht&&Math.abs(m-T)<ht&&Math.abs(C-E)<ht?vl(r):(d=g-b,h=m-T,v=C-E,p=1/Math.hypot(d,h,v),d*=p,h*=p,v*=p,i=_*v-S*h,o=S*d-w*v,a=w*h-_*d,p=Math.hypot(i,o,a),p?(p=1/p,i*=p,o*=p,a*=p):(i=0,o=0,a=0),s=h*a-v*o,l=v*i-d*a,u=d*o-h*i,p=Math.hypot(s,l,u),p?(p=1/p,s*=p,l*=p,u*=p):(s=0,l=0,u=0),r[0]=i,r[1]=s,r[2]=d,r[3]=0,r[4]=o,r[5]=l,r[6]=h,r[7]=0,r[8]=a,r[9]=u,r[10]=v,r[11]=0,r[12]=-(i*g+o*m+a*C),r[13]=-(s*g+l*m+u*C),r[14]=-(d*g+h*m+v*C),r[15]=1,r)}function bO(r,t,e,n){var i=t[0],o=t[1],a=t[2],s=n[0],l=n[1],u=n[2],d=i-e[0],h=o-e[1],v=a-e[2],p=d*d+h*h+v*v;p>0&&(p=1/Math.sqrt(p),d*=p,h*=p,v*=p);var g=l*v-u*h,m=u*d-s*v,C=s*h-l*d;return p=g*g+m*m+C*C,p>0&&(p=1/Math.sqrt(p),g*=p,m*=p,C*=p),r[0]=g,r[1]=m,r[2]=C,r[3]=0,r[4]=h*C-v*m,r[5]=v*g-d*C,r[6]=d*m-h*g,r[7]=0,r[8]=d,r[9]=h,r[10]=v,r[11]=0,r[12]=i,r[13]=o,r[14]=a,r[15]=1,r}function LO(r){return"mat4("+r[0]+", "+r[1]+", "+r[2]+", "+r[3]+", "+r[4]+", "+r[5]+", "+r[6]+", "+r[7]+", "+r[8]+", "+r[9]+", "+r[10]+", "+r[11]+", "+r[12]+", "+r[13]+", "+r[14]+", "+r[15]+")"}function RO(r){return Math.hypot(r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7],r[8],r[9],r[10],r[11],r[12],r[13],r[14],r[15])}function MO(r,t,e){return r[0]=t[0]+e[0],r[1]=t[1]+e[1],r[2]=t[2]+e[2],r[3]=t[3]+e[3],r[4]=t[4]+e[4],r[5]=t[5]+e[5],r[6]=t[6]+e[6],r[7]=t[7]+e[7],r[8]=t[8]+e[8],r[9]=t[9]+e[9],r[10]=t[10]+e[10],r[11]=t[11]+e[11],r[12]=t[12]+e[12],r[13]=t[13]+e[13],r[14]=t[14]+e[14],r[15]=t[15]+e[15],r}function wC(r,t,e){return r[0]=t[0]-e[0],r[1]=t[1]-e[1],r[2]=t[2]-e[2],r[3]=t[3]-e[3],r[4]=t[4]-e[4],r[5]=t[5]-e[5],r[6]=t[6]-e[6],r[7]=t[7]-e[7],r[8]=t[8]-e[8],r[9]=t[9]-e[9],r[10]=t[10]-e[10],r[11]=t[11]-e[11],r[12]=t[12]-e[12],r[13]=t[13]-e[13],r[14]=t[14]-e[14],r[15]=t[15]-e[15],r}function OO(r,t,e){return r[0]=t[0]*e,r[1]=t[1]*e,r[2]=t[2]*e,r[3]=t[3]*e,r[4]=t[4]*e,r[5]=t[5]*e,r[6]=t[6]*e,r[7]=t[7]*e,r[8]=t[8]*e,r[9]=t[9]*e,r[10]=t[10]*e,r[11]=t[11]*e,r[12]=t[12]*e,r[13]=t[13]*e,r[14]=t[14]*e,r[15]=t[15]*e,r}function IO(r,t,e,n){return r[0]=t[0]+e[0]*n,r[1]=t[1]+e[1]*n,r[2]=t[2]+e[2]*n,r[3]=t[3]+e[3]*n,r[4]=t[4]+e[4]*n,r[5]=t[5]+e[5]*n,r[6]=t[6]+e[6]*n,r[7]=t[7]+e[7]*n,r[8]=t[8]+e[8]*n,r[9]=t[9]+e[9]*n,r[10]=t[10]+e[10]*n,r[11]=t[11]+e[11]*n,r[12]=t[12]+e[12]*n,r[13]=t[13]+e[13]*n,r[14]=t[14]+e[14]*n,r[15]=t[15]+e[15]*n,r}function AO(r,t){return r[0]===t[0]&&r[1]===t[1]&&r[2]===t[2]&&r[3]===t[3]&&r[4]===t[4]&&r[5]===t[5]&&r[6]===t[6]&&r[7]===t[7]&&r[8]===t[8]&&r[9]===t[9]&&r[10]===t[10]&&r[11]===t[11]&&r[12]===t[12]&&r[13]===t[13]&&r[14]===t[14]&&r[15]===t[15]}function NO(r,t){var e=r[0],n=r[1],i=r[2],o=r[3],a=r[4],s=r[5],l=r[6],u=r[7],d=r[8],h=r[9],v=r[10],p=r[11],g=r[12],m=r[13],C=r[14],w=r[15],_=t[0],S=t[1],b=t[2],T=t[3],E=t[4],R=t[5],O=t[6],A=t[7],P=t[8],D=t[9],k=t[10],z=t[11],V=t[12],Z=t[13],Q=t[14],Y=t[15];return Math.abs(e-_)<=ht*Math.max(1,Math.abs(e),Math.abs(_))&&Math.abs(n-S)<=ht*Math.max(1,Math.abs(n),Math.abs(S))&&Math.abs(i-b)<=ht*Math.max(1,Math.abs(i),Math.abs(b))&&Math.abs(o-T)<=ht*Math.max(1,Math.abs(o),Math.abs(T))&&Math.abs(a-E)<=ht*Math.max(1,Math.abs(a),Math.abs(E))&&Math.abs(s-R)<=ht*Math.max(1,Math.abs(s),Math.abs(R))&&Math.abs(l-O)<=ht*Math.max(1,Math.abs(l),Math.abs(O))&&Math.abs(u-A)<=ht*Math.max(1,Math.abs(u),Math.abs(A))&&Math.abs(d-P)<=ht*Math.max(1,Math.abs(d),Math.abs(P))&&Math.abs(h-D)<=ht*Math.max(1,Math.abs(h),Math.abs(D))&&Math.abs(v-k)<=ht*Math.max(1,Math.abs(v),Math.abs(k))&&Math.abs(p-z)<=ht*Math.max(1,Math.abs(p),Math.abs(z))&&Math.abs(g-V)<=ht*Math.max(1,Math.abs(g),Math.abs(V))&&Math.abs(m-Z)<=ht*Math.max(1,Math.abs(m),Math.abs(Z))&&Math.abs(C-Q)<=ht*Math.max(1,Math.abs(C),Math.abs(Q))&&Math.abs(w-Y)<=ht*Math.max(1,Math.abs(w),Math.abs(Y))}var PO=lr,BO=wC,DO=Object.freeze({__proto__:null,add:MO,adjoint:cO,clone:sC,copy:Go,create:it,determinant:uC,equals:NO,exactEquals:AO,frob:RO,fromQuat:Mv,fromQuat2:wO,fromRotation:gO,fromRotationTranslation:vC,fromRotationTranslationScale:xO,fromRotationTranslationScaleOrigin:Gs,fromScaling:cC,fromTranslation:hC,fromValues:hO,fromXRotation:yO,fromYRotation:mO,fromZRotation:CO,frustum:_O,getRotation:af,getScaling:Va,getTranslation:of,identity:vl,invert:ii,lookAt:CC,mul:PO,multiply:lr,multiplyScalar:OO,multiplyScalarAndAdd:IO,ortho:yC,orthoNO:gC,orthoZO:mC,perspective:EO,perspectiveFromFieldOfView:TO,perspectiveNO:pC,perspectiveZO:SO,rotate:vO,rotateX:fC,rotateY:dC,rotateZ:pO,scale:nf,set:pc,str:LO,sub:BO,subtract:wC,targetTo:bO,translate:oo,transpose:lC});function Ne(){var r=new Rt(3);return Rt!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0),r}function Ri(r){var t=new Rt(3);return t[0]=r[0],t[1]=r[1],t[2]=r[2],t}function Oi(r){var t=r[0],e=r[1],n=r[2];return Math.hypot(t,e,n)}function et(r,t,e){var n=new Rt(3);return n[0]=r,n[1]=t,n[2]=e,n}function Nr(r,t){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r}function Nn(r,t,e,n){return r[0]=t,r[1]=e,r[2]=n,r}function Da(r,t,e){return r[0]=t[0]+e[0],r[1]=t[1]+e[1],r[2]=t[2]+e[2],r}function My(r,t,e){return r[0]=t[0]-e[0],r[1]=t[1]-e[1],r[2]=t[2]-e[2],r}function FO(r,t,e){return r[0]=t[0]*e[0],r[1]=t[1]*e[1],r[2]=t[2]*e[2],r}function gc(r,t,e){return r[0]=t[0]*e,r[1]=t[1]*e,r[2]=t[2]*e,r}function kO(r,t){var e=t[0]-r[0],n=t[1]-r[1],i=t[2]-r[2];return Math.hypot(e,n,i)}function ko(r,t){var e=t[0],n=t[1],i=t[2],o=e*e+n*n+i*i;return o>0&&(o=1/Math.sqrt(o)),r[0]=t[0]*o,r[1]=t[1]*o,r[2]=t[2]*o,r}function oi(r,t){return r[0]*t[0]+r[1]*t[1]+r[2]*t[2]}function qu(r,t,e){var n=t[0],i=t[1],o=t[2],a=e[0],s=e[1],l=e[2];return r[0]=i*l-o*s,r[1]=o*a-n*l,r[2]=n*s-i*a,r}function yc(r,t,e,n){var i=t[0],o=t[1],a=t[2];return r[0]=i+n*(e[0]-i),r[1]=o+n*(e[1]-o),r[2]=a+n*(e[2]-a),r}function wn(r,t,e){var n=t[0],i=t[1],o=t[2],a=e[3]*n+e[7]*i+e[11]*o+e[15];return a=a||1,r[0]=(e[0]*n+e[4]*i+e[8]*o+e[12])/a,r[1]=(e[1]*n+e[5]*i+e[9]*o+e[13])/a,r[2]=(e[2]*n+e[6]*i+e[10]*o+e[14])/a,r}function HO(r,t,e){var n=t[0],i=t[1],o=t[2];return r[0]=n*e[0]+i*e[3]+o*e[6],r[1]=n*e[1]+i*e[4]+o*e[7],r[2]=n*e[2]+i*e[5]+o*e[8],r}function zO(r,t,e){var n=e[0],i=e[1],o=e[2],a=e[3],s=t[0],l=t[1],u=t[2],d=i*u-o*l,h=o*s-n*u,v=n*l-i*s,p=i*v-o*h,g=o*d-n*v,m=n*h-i*d,C=a*2;return d*=C,h*=C,v*=C,p*=2,g*=2,m*=2,r[0]=s+d+p,r[1]=l+h+g,r[2]=u+v+m,r}function bs(r,t){var e=r[0],n=r[1],i=r[2],o=t[0],a=t[1],s=t[2];return Math.abs(e-o)<=ht*Math.max(1,Math.abs(e),Math.abs(o))&&Math.abs(n-a)<=ht*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(i-s)<=ht*Math.max(1,Math.abs(i),Math.abs(s))}var Oy=kO,xC=Oi;(function(){var r=Ne();return function(t,e,n,i,o,a){var s,l;for(e||(e=3),n||(n=0),i?l=Math.min(i*e+n,t.length):l=t.length,s=n;s<l;s+=e)r[0]=t[s],r[1]=t[s+1],r[2]=t[s+2],o(r,r,a),t[s]=r[0],t[s+1]=r[1],t[s+2]=r[2];return t}})();function Ma(){var r=new Rt(4);return Rt!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0,r[3]=0),r}function GO(r,t,e,n){var i=new Rt(4);return i[0]=r,i[1]=t,i[2]=e,i[3]=n,i}function WO(r,t){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r}function UO(r,t){var e=t[0],n=t[1],i=t[2],o=t[3],a=e*e+n*n+i*i+o*o;return a>0&&(a=1/Math.sqrt(a)),r[0]=e*a,r[1]=n*a,r[2]=i*a,r[3]=o*a,r}function Ps(r,t,e){var n=t[0],i=t[1],o=t[2],a=t[3];return r[0]=e[0]*n+e[4]*i+e[8]*o+e[12]*a,r[1]=e[1]*n+e[5]*i+e[9]*o+e[13]*a,r[2]=e[2]*n+e[6]*i+e[10]*o+e[14]*a,r[3]=e[3]*n+e[7]*i+e[11]*o+e[15]*a,r}(function(){var r=Ma();return function(t,e,n,i,o,a){var s,l;for(e||(e=4),n||(n=0),i?l=Math.min(i*e+n,t.length):l=t.length,s=n;s<l;s+=e)r[0]=t[s],r[1]=t[s+1],r[2]=t[s+2],r[3]=t[s+3],o(r,r,a),t[s]=r[0],t[s+1]=r[1],t[s+2]=r[2],t[s+3]=r[3];return t}})();function bt(){var r=new Rt(4);return Rt!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0),r[3]=1,r}function ro(r,t,e){e=e*.5;var n=Math.sin(e);return r[0]=n*t[0],r[1]=n*t[1],r[2]=n*t[2],r[3]=Math.cos(e),r}function ao(r,t,e){var n=t[0],i=t[1],o=t[2],a=t[3],s=e[0],l=e[1],u=e[2],d=e[3];return r[0]=n*d+a*s+i*u-o*l,r[1]=i*d+a*l+o*s-n*u,r[2]=o*d+a*u+n*l-i*s,r[3]=a*d-n*s-i*l-o*u,r}function kh(r,t,e,n){var i=t[0],o=t[1],a=t[2],s=t[3],l=e[0],u=e[1],d=e[2],h=e[3],v,p,g,m,C;return p=i*l+o*u+a*d+s*h,p<0&&(p=-p,l=-l,u=-u,d=-d,h=-h),1-p>ht?(v=Math.acos(p),g=Math.sin(v),m=Math.sin((1-n)*v)/g,C=Math.sin(n*v)/g):(m=1-n,C=n),r[0]=m*i+C*l,r[1]=m*o+C*u,r[2]=m*a+C*d,r[3]=m*s+C*h,r}function Hh(r,t){var e=t[0],n=t[1],i=t[2],o=t[3],a=e*e+n*n+i*i+o*o,s=a?1/a:0;return r[0]=-e*s,r[1]=-n*s,r[2]=-i*s,r[3]=o*s,r}function VO(r,t){var e=t[0]+t[4]+t[8],n;if(e>0)n=Math.sqrt(e+1),r[3]=.5*n,n=.5/n,r[0]=(t[5]-t[7])*n,r[1]=(t[6]-t[2])*n,r[2]=(t[1]-t[3])*n;else{var i=0;t[4]>t[0]&&(i=1),t[8]>t[i*3+i]&&(i=2);var o=(i+1)%3,a=(i+2)%3;n=Math.sqrt(t[i*3+i]-t[o*3+o]-t[a*3+a]+1),r[i]=.5*n,n=.5/n,r[3]=(t[o*3+a]-t[a*3+o])*n,r[o]=(t[o*3+i]+t[i*3+o])*n,r[a]=(t[a*3+i]+t[i*3+a])*n}return r}function _u(r,t,e,n){var i=.5*Math.PI/180;t*=i,e*=i,n*=i;var o=Math.sin(t),a=Math.cos(t),s=Math.sin(e),l=Math.cos(e),u=Math.sin(n),d=Math.cos(n);return r[0]=o*l*d-a*s*u,r[1]=a*s*d+o*l*u,r[2]=a*l*u-o*s*d,r[3]=a*l*d+o*s*u,r}var zh=GO,Eu=WO,Iy=ao,sf=UO;(function(){var r=Ne(),t=et(1,0,0),e=et(0,1,0);return function(n,i,o){var a=oi(i,o);return a<-.999999?(qu(r,t,i),xC(r)<1e-6&&qu(r,e,i),ko(r,r),ro(n,r,Math.PI),n):a>.999999?(n[0]=0,n[1]=0,n[2]=0,n[3]=1,n):(qu(r,i,o),n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=1+a,sf(n,n))}})();(function(){var r=bt(),t=bt();return function(e,n,i,o,a,s){return kh(r,n,a,s),kh(t,i,o,s),kh(e,r,t,2*s*(1-s)),e}})();(function(){var r=aC();return function(t,e,n,i){return r[0]=n[0],r[3]=n[1],r[6]=n[2],r[1]=i[0],r[4]=i[1],r[7]=i[2],r[2]=-e[0],r[5]=-e[1],r[8]=-e[2],sf(t,VO(t,r))}})();function YO(){var r=new Rt(2);return Rt!=Float32Array&&(r[0]=0,r[1]=0),r}function XO(r,t){var e=new Rt(2);return e[0]=r,e[1]=t,e}function $O(r,t){return r[0]=t[0],r[1]=t[1],r}function qO(r,t){var e=t[0],n=t[1],i=e*e+n*n;return i>0&&(i=1/Math.sqrt(i)),r[0]=t[0]*i,r[1]=t[1]*i,r}function KO(r,t){return r[0]*t[0]+r[1]*t[1]}function ZO(r,t){return r[0]===t[0]&&r[1]===t[1]}(function(){var r=YO();return function(t,e,n,i,o,a){var s,l;for(e||(e=2),n||(n=0),i?l=Math.min(i*e+n,t.length):l=t.length,s=n;s<l;s+=e)r[0]=t[s],r[1]=t[s+1],o(r,r,a),t[s]=r[0],t[s+1]=r[1];return t}})();var de=function(r){return r==null},QO={}.toString,Uf=function(r,t){return QO.call(r)==="[object "+t+"]"},Ov=function(r){return Array.isArray?Array.isArray(r):Uf(r,"Array")},Ku=function(r){var t=typeof r;return r!==null&&t==="object"||t==="function"},Ay=function(r){if(!!Ov(r))return r.reduce(function(t,e){return Math.max(t,e)},r[0])},Ny=function(r){if(!!Ov(r))return r.reduce(function(t,e){return Math.min(t,e)},r[0])},tr=function(r){return Uf(r,"String")},tn=function(r,t,e){return r<t?t:r>e?e:r},Wn=function(r){return Uf(r,"Number")},JO=1e-5;function Ws(r,t,e){return e===void 0&&(e=JO),Math.abs(r-t)<e}var _C=function(r,t){return(r%t+t)%t},Py=function(r){return Uf(r,"Boolean")},mt=function(r){return r===void 0},EC={x1:0,y1:0,x2:0,y2:0,x:0,y:0,qx:null,qy:null};function jO(r,t,e){if(r[e].length>7){r[e].shift();for(var n=r[e],i=e;n.length;)t[e]="A",r.splice(i+=1,0,["C"].concat(n.splice(0,6)));r.splice(e,1)}}var Us={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0};function SC(r){return Array.isArray(r)&&r.every(function(t){var e=t[0].toLowerCase();return Us[e]===t.length-1&&"achlmqstvz".includes(e)})}function TC(r){return SC(r)&&r.every(function(t){var e=t[0];return e===e.toUpperCase()})}function bC(r){return TC(r)&&r.every(function(t){var e=t[0];return"ACLMQZ".includes(e)})}function By(r){for(var t=r.pathValue[r.segmentStart],e=t.toLowerCase(),n=r.data;n.length>=Us[e]&&(e==="m"&&n.length>2?(r.segments.push([t].concat(n.splice(0,2))),e="l",t=t==="m"?"l":"L"):r.segments.push([t].concat(n.splice(0,Us[e]))),!!Us[e]););}function eI(r){var t=r.index,e=r.pathValue,n=e.charCodeAt(t);if(n===48){r.param=0,r.index+=1;return}if(n===49){r.param=1,r.index+=1;return}r.err='[path-util]: invalid Arc flag "'+e[t]+'", expecting 0 or 1 at index '+t}function tI(r){return r>=48&&r<=57||r===43||r===45||r===46}function Ea(r){return r>=48&&r<=57}function rI(r){var t=r.max,e=r.pathValue,n=r.index,i=n,o=!1,a=!1,s=!1,l=!1,u;if(i>=t){r.err="[path-util]: Invalid path value at index "+i+', "pathValue" is missing param';return}if(u=e.charCodeAt(i),(u===43||u===45)&&(i+=1,u=e.charCodeAt(i)),!Ea(u)&&u!==46){r.err="[path-util]: Invalid path value at index "+i+', "'+e[i]+'" is not a number';return}if(u!==46){if(o=u===48,i+=1,u=e.charCodeAt(i),o&&i<t&&u&&Ea(u)){r.err="[path-util]: Invalid path value at index "+n+', "'+e[n]+'" illegal number';return}for(;i<t&&Ea(e.charCodeAt(i));)i+=1,a=!0;u=e.charCodeAt(i)}if(u===46){for(l=!0,i+=1;Ea(e.charCodeAt(i));)i+=1,s=!0;u=e.charCodeAt(i)}if(u===101||u===69){if(l&&!a&&!s){r.err="[path-util]: Invalid path value at index "+i+', "'+e[i]+'" invalid float exponent';return}if(i+=1,u=e.charCodeAt(i),(u===43||u===45)&&(i+=1),i<t&&Ea(e.charCodeAt(i)))for(;i<t&&Ea(e.charCodeAt(i));)i+=1;else{r.err="[path-util]: Invalid path value at index "+i+', "'+e[i]+'" invalid integer exponent';return}}r.index=i,r.param=+r.pathValue.slice(n,i)}function nI(r){var t=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];return r===10||r===13||r===8232||r===8233||r===32||r===9||r===11||r===12||r===160||r>=5760&&t.includes(r)}function Zu(r){for(var t=r.pathValue,e=r.max;r.index<e&&nI(t.charCodeAt(r.index));)r.index+=1}function iI(r){switch(r|32){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:return!0;default:return!1}}function oI(r){return(r|32)===97}function aI(r){var t=r.max,e=r.pathValue,n=r.index,i=e.charCodeAt(n),o=Us[e[n].toLowerCase()];if(r.segmentStart=n,!iI(i)){r.err='[path-util]: Invalid path value "'+e[n]+'" is not a path command';return}if(r.index+=1,Zu(r),r.data=[],!o){By(r);return}for(;;){for(var a=o;a>0;a-=1){if(oI(i)&&(a===3||a===4)?eI(r):rI(r),r.err.length)return;r.data.push(r.param),Zu(r),r.index<t&&e.charCodeAt(r.index)===44&&(r.index+=1,Zu(r))}if(r.index>=r.max||!tI(e.charCodeAt(r.index)))break}By(r)}var sI=function(){function r(t){this.pathValue=t,this.segments=[],this.max=t.length,this.index=0,this.param=0,this.segmentStart=0,this.data=[],this.err=""}return r}();function lI(r){if(SC(r))return[].concat(r);var t=new sI(r);for(Zu(t);t.index<t.max&&!t.err.length;)aI(t);return t.err?t.err:t.segments}function uI(r){if(TC(r))return[].concat(r);var t=lI(r),e=0,n=0,i=0,o=0;return t.map(function(a){var s=a.slice(1).map(Number),l=a[0],u=l.toUpperCase();if(l==="M")return e=s[0],n=s[1],i=e,o=n,["M",e,n];var d;if(l!==u)switch(u){case"A":d=[u,s[0],s[1],s[2],s[3],s[4],s[5]+e,s[6]+n];break;case"V":d=[u,s[0]+n];break;case"H":d=[u,s[0]+e];break;default:{var h=s.map(function(p,g){return p+(g%2?n:e)});d=[u].concat(h)}}else d=[u].concat(s);var v=d.length;switch(u){case"Z":e=i,n=o;break;case"H":e=d[1];break;case"V":n=d[1];break;default:e=d[v-2],n=d[v-1],u==="M"&&(i=e,o=n)}return d})}function fI(r,t){var e=r[0],n=t.x1,i=t.y1,o=t.x2,a=t.y2,s=r.slice(1).map(Number),l=r;if("TQ".includes(e)||(t.qx=null,t.qy=null),e==="H")l=["L",r[1],i];else if(e==="V")l=["L",n,r[1]];else if(e==="S"){var u=n*2-o,d=i*2-a;t.x1=u,t.y1=d,l=["C",u,d].concat(s)}else if(e==="T"){var h=n*2-t.qx,v=i*2-t.qy;t.qx=h,t.qy=v,l=["Q",h,v].concat(s)}else if(e==="Q"){var p=s[0],g=s[1];t.qx=p,t.qy=g}return l}function lf(r){if(bC(r))return[].concat(r);for(var t=uI(r),e=N({},EC),n=0;n<t.length;n+=1){t[n]=fI(t[n],e);var i=t[n],o=i.length;e.x1=+i[o-2],e.y1=+i[o-1],e.x2=+i[o-4]||e.x1,e.y2=+i[o-3]||e.y1}return t}function dI(r){return bC(r)&&r.every(function(t){var e=t[0];return"MC".includes(e)})}function Su(r,t,e){var n=r*Math.cos(e)-t*Math.sin(e),i=r*Math.sin(e)+t*Math.cos(e);return{x:n,y:i}}function Iv(r,t,e,n,i,o,a,s,l,u){var d=r,h=t,v=e,p=n,g=s,m=l,C=Math.PI*120/180,w=Math.PI/180*(+i||0),_=[],S,b,T,E,R;if(u)b=u[0],T=u[1],E=u[2],R=u[3];else{S=Su(d,h,-w),d=S.x,h=S.y,S=Su(g,m,-w),g=S.x,m=S.y;var O=(d-g)/2,A=(h-m)/2,P=O*O/(v*v)+A*A/(p*p);P>1&&(P=Math.sqrt(P),v*=P,p*=P);var D=v*v,k=p*p,z=(o===a?-1:1)*Math.sqrt(Math.abs((D*k-D*A*A-k*O*O)/(D*A*A+k*O*O)));E=z*v*A/p+(d+g)/2,R=z*-p*O/v+(h+m)/2,b=Math.asin(((h-R)/p*Math.pow(10,9)>>0)/Math.pow(10,9)),T=Math.asin(((m-R)/p*Math.pow(10,9)>>0)/Math.pow(10,9)),b=d<E?Math.PI-b:b,T=g<E?Math.PI-T:T,b<0&&(b=Math.PI*2+b),T<0&&(T=Math.PI*2+T),a&&b>T&&(b-=Math.PI*2),!a&&T>b&&(T-=Math.PI*2)}var V=T-b;if(Math.abs(V)>C){var Z=T,Q=g,Y=m;T=b+C*(a&&T>b?1:-1),g=E+v*Math.cos(T),m=R+p*Math.sin(T),_=Iv(g,m,v,p,i,0,a,Q,Y,[T,Z,E,R])}V=T-b;var te=Math.cos(b),ae=Math.sin(b),pe=Math.cos(T),Ee=Math.sin(T),me=Math.tan(V/4),Ze=4/3*v*me,Ge=4/3*p*me,Ye=[d,h],Fe=[d+Ze*ae,h-Ge*te],nr=[g+Ze*Ee,m-Ge*pe],At=[g,m];if(Fe[0]=2*Ye[0]-Fe[0],Fe[1]=2*Ye[1]-Fe[1],u)return Fe.concat(nr,At,_);_=Fe.concat(nr,At,_);for(var Sr=[],dr=0,Tn=_.length;dr<Tn;dr+=1)Sr[dr]=dr%2?Su(_[dr-1],_[dr],w).y:Su(_[dr],_[dr+1],w).x;return Sr}function hI(r,t,e,n,i,o){var a=.3333333333333333,s=2/3;return[a*r+s*e,a*t+s*n,a*i+s*e,a*o+s*n,i,o]}function Ji(r,t,e){var n=r[0],i=r[1],o=t[0],a=t[1];return[n+(o-n)*e,i+(a-i)*e]}var Dy=function(r,t,e,n){var i=.5,o=Ji([r,t],[e,n],i);return X(X([],o,!0),[e,n,e,n],!1)};function cI(r,t){var e=r[0],n=r.slice(1).map(Number),i=n[0],o=n[1],a,s=t.x1,l=t.y1,u=t.x,d=t.y;switch("TQ".includes(e)||(t.qx=null,t.qy=null),e){case"M":return t.x=i,t.y=o,r;case"A":return a=[s,l].concat(n),["C"].concat(Iv(a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9]));case"Q":return t.qx=i,t.qy=o,a=[s,l].concat(n),["C"].concat(hI(a[0],a[1],a[2],a[3],a[4],a[5]));case"L":return["C"].concat(Dy(s,l,i,o));case"Z":return s===u&&l===d?["C",s,l,u,d,u,d]:["C"].concat(Dy(s,l,u,d))}return r}function mc(r,t){if(t===void 0&&(t=!1),dI(r)){var e=[].concat(r);return t?[e,[]]:e}for(var n=lf(r),i=N({},EC),o=[],a="",s=n.length,l,u,d=[],h=0;h<s;h+=1){n[h]&&(a=n[h][0]),o[h]=a;var v=cI(n[h],i);n[h]=v,jO(n,o,h),s=n.length,a==="Z"&&d.push(h),l=n[h],u=l.length,i.x1=+l[u-2],i.y1=+l[u-1],i.x2=+l[u-4]||i.x1,i.y2=+l[u-3]||i.y1}return t?[n,d]:n}function vI(r){return r.map(function(t){return Array.isArray(t)?[].concat(t):t})}function pI(r){var t=r.slice(1).map(function(e,n,i){return n?i[n-1].slice(-2).concat(e.slice(1)):r[0].slice(1).concat(e.slice(1))}).map(function(e){return e.map(function(n,i){return e[e.length-i-2*(1-i%2)]})}).reverse();return[["M"].concat(t[0].slice(0,2))].concat(t.map(function(e){return["C"].concat(e.slice(2))}))}function Jr(r,t){return Math.sqrt((r[0]-t[0])*(r[0]-t[0])+(r[1]-t[1])*(r[1]-t[1]))}function Cc(r,t,e,n,i){var o=Jr([r,t],[e,n]),a={x:0,y:0};if(typeof i=="number")if(i<=0)a={x:r,y:t};else if(i>=o)a={x:e,y:n};else{var s=Ji([r,t],[e,n],i/o),l=s[0],u=s[1];a={x:l,y:u}}return{length:o,point:a,min:{x:Math.min(r,e),y:Math.min(t,n)},max:{x:Math.max(r,e),y:Math.max(t,n)}}}function Fy(r,t){var e=r.x,n=r.y,i=t.x,o=t.y,a=e*i+n*o,s=Math.sqrt((Math.pow(e,2)+Math.pow(n,2))*(Math.pow(i,2)+Math.pow(o,2))),l=e*o-n*i<0?-1:1,u=l*Math.acos(a/s);return u}function gI(r,t,e,n,i,o,a,s,l,u){var d=Math.abs,h=Math.sin,v=Math.cos,p=Math.sqrt,g=Math.PI,m=d(e),C=d(n),w=(i%360+360)%360,_=w*(g/180);if(r===s&&t===l)return{x:r,y:t};if(m===0||C===0)return Cc(r,t,s,l,u).point;var S=(r-s)/2,b=(t-l)/2,T={x:v(_)*S+h(_)*b,y:-h(_)*S+v(_)*b},E=Math.pow(T.x,2)/Math.pow(m,2)+Math.pow(T.y,2)/Math.pow(C,2);E>1&&(m*=p(E),C*=p(E));var R=Math.pow(m,2)*Math.pow(C,2)-Math.pow(m,2)*Math.pow(T.y,2)-Math.pow(C,2)*Math.pow(T.x,2),O=Math.pow(m,2)*Math.pow(T.y,2)+Math.pow(C,2)*Math.pow(T.x,2),A=R/O;A=A<0?0:A;var P=(o!==a?1:-1)*p(A),D={x:P*(m*T.y/C),y:P*(-(C*T.x)/m)},k={x:v(_)*D.x-h(_)*D.y+(r+s)/2,y:h(_)*D.x+v(_)*D.y+(t+l)/2},z={x:(T.x-D.x)/m,y:(T.y-D.y)/C},V=Fy({x:1,y:0},z),Z={x:(-T.x-D.x)/m,y:(-T.y-D.y)/C},Q=Fy(z,Z);!a&&Q>0?Q-=2*g:a&&Q<0&&(Q+=2*g),Q%=2*g;var Y=V+Q*u,te=m*v(Y),ae=C*h(Y),pe={x:v(_)*te-h(_)*ae+k.x,y:h(_)*te+v(_)*ae+k.y};return pe}function yI(r,t,e,n,i,o,a,s,l,u,d){var h,v=d.bbox,p=v===void 0?!0:v,g=d.length,m=g===void 0?!0:g,C=d.sampleSize,w=C===void 0?30:C,_=typeof u=="number",S=r,b=t,T=0,E=[S,b,T],R=[S,b],O=0,A={x:0,y:0},P=[{x:S,y:b}];_&&u<=0&&(A={x:S,y:b});for(var D=0;D<=w;D+=1){if(O=D/w,h=gI(r,t,e,n,i,o,a,s,l,O),S=h.x,b=h.y,p&&P.push({x:S,y:b}),m&&(T+=Jr(R,[S,b])),R=[S,b],_&&T>=u&&u>E[2]){var k=(T-u)/(T-E[2]);A={x:R[0]*(1-k)+E[0]*k,y:R[1]*(1-k)+E[1]*k}}E=[S,b,T]}return _&&u>=T&&(A={x:s,y:l}),{length:T,point:A,min:{x:Math.min.apply(null,P.map(function(z){return z.x})),y:Math.min.apply(null,P.map(function(z){return z.y}))},max:{x:Math.max.apply(null,P.map(function(z){return z.x})),y:Math.max.apply(null,P.map(function(z){return z.y}))}}}function mI(r,t,e,n,i,o,a,s,l){var u=1-l;return{x:Math.pow(u,3)*r+3*Math.pow(u,2)*l*e+3*u*Math.pow(l,2)*i+Math.pow(l,3)*a,y:Math.pow(u,3)*t+3*Math.pow(u,2)*l*n+3*u*Math.pow(l,2)*o+Math.pow(l,3)*s}}function LC(r,t,e,n,i,o,a,s,l,u){var d,h=u.bbox,v=h===void 0?!0:h,p=u.length,g=p===void 0?!0:p,m=u.sampleSize,C=m===void 0?10:m,w=typeof l=="number",_=r,S=t,b=0,T=[_,S,b],E=[_,S],R=0,O={x:0,y:0},A=[{x:_,y:S}];w&&l<=0&&(O={x:_,y:S});for(var P=0;P<=C;P+=1){if(R=P/C,d=mI(r,t,e,n,i,o,a,s,R),_=d.x,S=d.y,v&&A.push({x:_,y:S}),g&&(b+=Jr(E,[_,S])),E=[_,S],w&&b>=l&&l>T[2]){var D=(b-l)/(b-T[2]);O={x:E[0]*(1-D)+T[0]*D,y:E[1]*(1-D)+T[1]*D}}T=[_,S,b]}return w&&l>=b&&(O={x:a,y:s}),{length:b,point:O,min:{x:Math.min.apply(null,A.map(function(k){return k.x})),y:Math.min.apply(null,A.map(function(k){return k.y}))},max:{x:Math.max.apply(null,A.map(function(k){return k.x})),y:Math.max.apply(null,A.map(function(k){return k.y}))}}}function CI(r,t,e,n,i,o,a){var s=1-a;return{x:Math.pow(s,2)*r+2*s*a*e+Math.pow(a,2)*i,y:Math.pow(s,2)*t+2*s*a*n+Math.pow(a,2)*o}}function wI(r,t,e,n,i,o,a,s){var l,u=s.bbox,d=u===void 0?!0:u,h=s.length,v=h===void 0?!0:h,p=s.sampleSize,g=p===void 0?10:p,m=typeof a=="number",C=r,w=t,_=0,S=[C,w,_],b=[C,w],T=0,E={x:0,y:0},R=[{x:C,y:w}];m&&a<=0&&(E={x:C,y:w});for(var O=0;O<=g;O+=1){if(T=O/g,l=CI(r,t,e,n,i,o,T),C=l.x,w=l.y,d&&R.push({x:C,y:w}),v&&(_+=Jr(b,[C,w])),b=[C,w],m&&_>=a&&a>S[2]){var A=(_-a)/(_-S[2]);E={x:b[0]*(1-A)+S[0]*A,y:b[1]*(1-A)+S[1]*A}}S=[C,w,_]}return m&&a>=_&&(E={x:i,y:o}),{length:_,point:E,min:{x:Math.min.apply(null,R.map(function(P){return P.x})),y:Math.min.apply(null,R.map(function(P){return P.y}))},max:{x:Math.max.apply(null,R.map(function(P){return P.x})),y:Math.max.apply(null,R.map(function(P){return P.y}))}}}function RC(r,t,e){for(var n,i,o,a,s,l,u=lf(r),d=typeof t=="number",h,v=[],p,g=0,m=0,C=0,w=0,_,S=[],b=[],T=0,E={x:0,y:0},R=E,O=E,A=E,P=0,D=0,k=u.length;D<k;D+=1)_=u[D],p=_[0],h=p==="M",v=h?v:[g,m].concat(_.slice(1)),h?(C=_[1],w=_[2],E={x:C,y:w},R=E,T=0,d&&t<.001&&(A=E)):p==="L"?(n=Cc(v[0],v[1],v[2],v[3],(t||0)-P),T=n.length,E=n.min,R=n.max,O=n.point):p==="A"?(i=yI(v[0],v[1],v[2],v[3],v[4],v[5],v[6],v[7],v[8],(t||0)-P,e||{}),T=i.length,E=i.min,R=i.max,O=i.point):p==="C"?(o=LC(v[0],v[1],v[2],v[3],v[4],v[5],v[6],v[7],(t||0)-P,e||{}),T=o.length,E=o.min,R=o.max,O=o.point):p==="Q"?(a=wI(v[0],v[1],v[2],v[3],v[4],v[5],(t||0)-P,e||{}),T=a.length,E=a.min,R=a.max,O=a.point):p==="Z"&&(v=[g,m,C,w],s=Cc(v[0],v[1],v[2],v[3],(t||0)-P),T=s.length,E=s.min,R=s.max,O=s.point),d&&P<t&&P+T>=t&&(A=O),b.push(R),S.push(E),P+=T,l=p!=="Z"?_.slice(-2):[C,w],g=l[0],m=l[1];return d&&t>=P&&(A={x:g,y:m}),{length:P,point:A,min:{x:Math.min.apply(null,S.map(function(z){return z.x})),y:Math.min.apply(null,S.map(function(z){return z.y}))},max:{x:Math.max.apply(null,b.map(function(z){return z.x})),y:Math.max.apply(null,b.map(function(z){return z.y}))}}}function xI(r,t){return RC(r,void 0,N(N({},t),{bbox:!1,length:!0})).length}function _I(r){var t=r.length,e=t-1;return r.map(function(n,i){return r.map(function(o,a){var s=i+a,l;return a===0||r[s]&&r[s][0]==="M"?(l=r[s],["M"].concat(l.slice(-2))):(s>=t&&(s-=e),r[s])})})}function EI(r,t){var e=r.length-1,n=[],i=0,o=0,a=_I(r);return a.forEach(function(s,l){r.slice(1).forEach(function(u,d){o+=Jr(r[(l+d)%e].slice(-2),t[d%e].slice(-2))}),n[l]=o,o=0}),i=n.indexOf(Math.min.apply(null,n)),a[i]}function SI(r,t,e,n,i,o,a,s){return 3*((s-t)*(e+i)-(a-r)*(n+o)+n*(r-i)-e*(t-o)+s*(i+r/3)-a*(o+t/3))/20}function TI(r){var t=0,e=0,n=0;return mc(r).map(function(i){var o;switch(i[0]){case"M":return t=i[1],e=i[2],0;default:var a=i.slice(1),s=a[0],l=a[1],u=a[2],d=a[3],h=a[4],v=a[5];return n=SI(t,e,s,l,u,d,h,v),o=i.slice(-2),t=o[0],e=o[1],n}}).reduce(function(i,o){return i+o},0)}function ky(r){return TI(r)>=0}function bI(r,t,e){return RC(r,t,N(N({},e),{bbox:!1,length:!0})).point}function LI(r,t){t===void 0&&(t=.5);var e=r.slice(0,2),n=r.slice(2,4),i=r.slice(4,6),o=r.slice(6,8),a=Ji(e,n,t),s=Ji(n,i,t),l=Ji(i,o,t),u=Ji(a,s,t),d=Ji(s,l,t),h=Ji(u,d,t);return[["C"].concat(a,u,h),["C"].concat(d,l,o)]}function Hy(r){return r.map(function(t,e,n){var i=e&&n[e-1].slice(-2).concat(t.slice(1)),o=e?LC(i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],i[8],{bbox:!1}).length:0,a;return e?a=o?LI(i):[t,t]:a=[t],{s:t,ss:a,l:o}})}function MC(r,t,e){var n=Hy(r),i=Hy(t),o=n.length,a=i.length,s=n.filter(function(C){return C.l}).length,l=i.filter(function(C){return C.l}).length,u=n.filter(function(C){return C.l}).reduce(function(C,w){var _=w.l;return C+_},0)/s||0,d=i.filter(function(C){return C.l}).reduce(function(C,w){var _=w.l;return C+_},0)/l||0,h=e||Math.max(o,a),v=[u,d],p=[h-o,h-a],g=0,m=[n,i].map(function(C,w){return C.l===h?C.map(function(_){return _.s}):C.map(function(_,S){return g=S&&p[w]&&_.l>=v[w],p[w]-=g?1:0,g?_.ss:[_.s]}).flat()});return m[0].length===m[1].length?m:MC(m[0],m[1],h)}function Av(r,t,e){r.prototype=t.prototype=e,e.constructor=r}function OC(r,t){var e=Object.create(r.prototype);for(var n in t)e[n]=t[n];return e}function pl(){}var qs=.7,uf=1/qs,Fa="\\s*([+-]?\\d+)\\s*",Ks="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",li="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",RI=/^#([0-9a-f]{3,8})$/,MI=new RegExp("^rgb\\("+[Fa,Fa,Fa]+"\\)$"),OI=new RegExp("^rgb\\("+[li,li,li]+"\\)$"),II=new RegExp("^rgba\\("+[Fa,Fa,Fa,Ks]+"\\)$"),AI=new RegExp("^rgba\\("+[li,li,li,Ks]+"\\)$"),NI=new RegExp("^hsl\\("+[Ks,li,li]+"\\)$"),PI=new RegExp("^hsla\\("+[Ks,li,li,Ks]+"\\)$"),zy={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Av(pl,Ya,{copy:function(r){return Object.assign(new this.constructor,this,r)},displayable:function(){return this.rgb().displayable()},hex:Gy,formatHex:Gy,formatHsl:BI,formatRgb:Wy,toString:Wy});function Gy(){return this.rgb().formatHex()}function BI(){return IC(this).formatHsl()}function Wy(){return this.rgb().formatRgb()}function Ya(r){var t,e;return r=(r+"").trim().toLowerCase(),(t=RI.exec(r))?(e=t[1].length,t=parseInt(t[1],16),e===6?Uy(t):e===3?new rn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):e===8?Tu(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):e===4?Tu(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=MI.exec(r))?new rn(t[1],t[2],t[3],1):(t=OI.exec(r))?new rn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=II.exec(r))?Tu(t[1],t[2],t[3],t[4]):(t=AI.exec(r))?Tu(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=NI.exec(r))?Xy(t[1],t[2]/100,t[3]/100,1):(t=PI.exec(r))?Xy(t[1],t[2]/100,t[3]/100,t[4]):zy.hasOwnProperty(r)?Uy(zy[r]):r==="transparent"?new rn(NaN,NaN,NaN,0):null}function Uy(r){return new rn(r>>16&255,r>>8&255,r&255,1)}function Tu(r,t,e,n){return n<=0&&(r=t=e=NaN),new rn(r,t,e,n)}function DI(r){return r instanceof pl||(r=Ya(r)),r?(r=r.rgb(),new rn(r.r,r.g,r.b,r.opacity)):new rn}function wc(r,t,e,n){return arguments.length===1?DI(r):new rn(r,t,e,n==null?1:n)}function rn(r,t,e,n){this.r=+r,this.g=+t,this.b=+e,this.opacity=+n}Av(rn,wc,OC(pl,{brighter:function(r){return r=r==null?uf:Math.pow(uf,r),new rn(this.r*r,this.g*r,this.b*r,this.opacity)},darker:function(r){return r=r==null?qs:Math.pow(qs,r),new rn(this.r*r,this.g*r,this.b*r,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Vy,formatHex:Vy,formatRgb:Yy,toString:Yy}));function Vy(){return"#"+Gh(this.r)+Gh(this.g)+Gh(this.b)}function Yy(){var r=this.opacity;return r=isNaN(r)?1:Math.max(0,Math.min(1,r)),(r===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(r===1?")":", "+r+")")}function Gh(r){return r=Math.max(0,Math.min(255,Math.round(r)||0)),(r<16?"0":"")+r.toString(16)}function Xy(r,t,e,n){return n<=0?r=t=e=NaN:e<=0||e>=1?r=t=NaN:t<=0&&(r=NaN),new ri(r,t,e,n)}function IC(r){if(r instanceof ri)return new ri(r.h,r.s,r.l,r.opacity);if(r instanceof pl||(r=Ya(r)),!r)return new ri;if(r instanceof ri)return r;r=r.rgb();var t=r.r/255,e=r.g/255,n=r.b/255,i=Math.min(t,e,n),o=Math.max(t,e,n),a=NaN,s=o-i,l=(o+i)/2;return s?(t===o?a=(e-n)/s+(e<n)*6:e===o?a=(n-t)/s+2:a=(t-e)/s+4,s/=l<.5?o+i:2-o-i,a*=60):s=l>0&&l<1?0:a,new ri(a,s,l,r.opacity)}function FI(r,t,e,n){return arguments.length===1?IC(r):new ri(r,t,e,n==null?1:n)}function ri(r,t,e,n){this.h=+r,this.s=+t,this.l=+e,this.opacity=+n}Av(ri,FI,OC(pl,{brighter:function(r){return r=r==null?uf:Math.pow(uf,r),new ri(this.h,this.s,this.l*r,this.opacity)},darker:function(r){return r=r==null?qs:Math.pow(qs,r),new ri(this.h,this.s,this.l*r,this.opacity)},rgb:function(){var r=this.h%360+(this.h<0)*360,t=isNaN(r)||isNaN(this.s)?0:this.s,e=this.l,n=e+(e<.5?e:1-e)*t,i=2*e-n;return new rn(Wh(r>=240?r-240:r+120,i,n),Wh(r,i,n),Wh(r<120?r+240:r-120,i,n),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var r=this.opacity;return r=isNaN(r)?1:Math.max(0,Math.min(1,r)),(r===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(r===1?")":", "+r+")")}}));function Wh(r,t,e){return(r<60?t+(e-t)*r/60:r<180?e:r<240?t+(e-t)*(240-r)/60:t)*255}function Ni(r,t,e,n){var i=r-e,o=t-n;return Math.sqrt(i*i+o*o)}function AC(r,t){var e=Math.min.apply(Math,X([],F(r),!1)),n=Math.min.apply(Math,X([],F(t),!1)),i=Math.max.apply(Math,X([],F(r),!1)),o=Math.max.apply(Math,X([],F(t),!1));return{x:e,y:n,width:i-e,height:o-n}}function kI(r,t,e){return Math.atan(-t/r*Math.tan(e))}function HI(r,t,e){return Math.atan(t/(r*Math.tan(e)))}function zI(r,t,e,n,i,o){return e*Math.cos(i)*Math.cos(o)-n*Math.sin(i)*Math.sin(o)+r}function GI(r,t,e,n,i,o){return e*Math.sin(i)*Math.cos(o)+n*Math.cos(i)*Math.sin(o)+t}function WI(r,t,e,n,i,o,a){for(var s=kI(e,n,i),l=1/0,u=-1/0,d=[o,a],h=-Math.PI*2;h<=Math.PI*2;h+=Math.PI){var v=s+h;o<a?o<v&&v<a&&d.push(v):a<v&&v<o&&d.push(v)}for(var h=0;h<d.length;h++){var p=zI(r,t,e,n,i,d[h]);p<l&&(l=p),p>u&&(u=p)}for(var g=HI(e,n,i),m=1/0,C=-1/0,w=[o,a],h=-Math.PI*2;h<=Math.PI*2;h+=Math.PI){var _=g+h;o<a?o<_&&_<a&&w.push(_):a<_&&_<o&&w.push(_)}for(var h=0;h<w.length;h++){var S=GI(r,t,e,n,i,w[h]);S<m&&(m=S),S>C&&(C=S)}return{x:l,y:m,width:u-l,height:C-m}}var UI=1e-4;function NC(r,t,e,n,i,o){var a=-1,s=1/0,l=[e,n],u=20;o&&o>200&&(u=o/10);for(var d=1/u,h=d/10,v=0;v<=u;v++){var p=v*d,g=[i.apply(void 0,X([],F(r.concat([p])),!1)),i.apply(void 0,X([],F(t.concat([p])),!1))],m=Ni(l[0],l[1],g[0],g[1]);m<s&&(a=p,s=m)}if(a===0)return{x:r[0],y:t[0]};if(a===1){var C=r.length;return{x:r[C-1],y:t[C-1]}}s=1/0;for(var v=0;v<32&&!(h<UI);v++){var w=a-h,_=a+h,g=[i.apply(void 0,X([],F(r.concat([w])),!1)),i.apply(void 0,X([],F(t.concat([w])),!1))],m=Ni(l[0],l[1],g[0],g[1]);if(w>=0&&m<s)a=w,s=m;else{var S=[i.apply(void 0,X([],F(r.concat([_])),!1)),i.apply(void 0,X([],F(t.concat([_])),!1))],b=Ni(l[0],l[1],S[0],S[1]);_<=1&&b<s?(a=_,s=b):h*=.5}}return{x:i.apply(void 0,X([],F(r.concat([a])),!1)),y:i.apply(void 0,X([],F(t.concat([a])),!1))}}function PC(r,t,e,n){return Ni(r,t,e,n)}function BC(r,t,e,n,i){return{x:(1-i)*r+i*e,y:(1-i)*t+i*n}}function VI(r,t,e,n,i,o){var a=[e-r,n-t];if(ZO(a,[0,0]))return Math.sqrt((i-r)*(i-r)+(o-t)*(o-t));var s=[-a[1],a[0]];qO(s,s);var l=[i-r,o-t];return Math.abs(KO(l,s))}function xc(r,t,e,n,i){var o=1-i;return o*o*o*r+3*t*i*o*o+3*e*i*i*o+n*i*i*i}function $y(r,t,e,n){var i=-3*r+9*t-9*e+3*n,o=6*r-12*t+6*e,a=3*t-3*r,s=[],l,u,d;if(Ws(i,0))Ws(o,0)||(l=-a/o,l>=0&&l<=1&&s.push(l));else{var h=o*o-4*i*a;Ws(h,0)?s.push(-o/(2*i)):h>0&&(d=Math.sqrt(h),l=(-o+d)/(2*i),u=(-o-d)/(2*i),l>=0&&l<=1&&s.push(l),u>=0&&u<=1&&s.push(u))}return s}function YI(r,t,e,n,i,o,a,s){for(var l=[r,a],u=[t,s],d=$y(r,e,i,a),h=$y(t,n,o,s),v=0;v<d.length;v++)l.push(xc(r,e,i,a,d[v]));for(var v=0;v<h.length;v++)u.push(xc(t,n,o,s,h[v]));return AC(l,u)}function XI(r,t,e,n,i,o,a,s,l,u,d){return NC([r,e,i,a],[t,n,o,s],l,u,xc,d)}function qy(r,t,e,n,i,o,a,s,l,u,d){var h=XI(r,t,e,n,i,o,a,s,l,u,d);return Ni(h.x,h.y,l,u)}function $I(r){if(r.length<2)return 0;for(var t=0,e=0;e<r.length-1;e++){var n=r[e],i=r[e+1];t+=Ni(n[0],n[1],i[0],i[1])}return t}function qI(r){return $I(r)}function _c(r,t,e,n){var i=1-n;return i*i*r+2*n*i*t+n*n*e}function Ky(r,t,e){var n=r+e-2*t;if(Ws(n,0))return[.5];var i=(r-t)/n;return i<=1&&i>=0?[i]:[]}function KI(r,t,e,n,i,o){var a=Ky(r,e,i)[0],s=Ky(t,n,o)[0],l=[r,i],u=[t,o];return a!==void 0&&l.push(_c(r,e,i,a)),s!==void 0&&u.push(_c(t,n,o,s)),AC(l,u)}function ZI(r,t,e,n,i,o,a,s){return NC([r,e,i],[t,n,o],a,s,_c)}function QI(r,t,e,n,i,o,a,s){var l=ZI(r,t,e,n,i,o,a,s);return Ni(l.x,l.y,a,s)}var JI=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},DC={exports:{}};(function(r,t){(function(e,n){r.exports=n()})(JI,function(){function e(T,E,R,O,A){n(T,E,R||0,O||T.length-1,A||o)}function n(T,E,R,O,A){for(;O>R;){if(O-R>600){var P=O-R+1,D=E-R+1,k=Math.log(P),z=.5*Math.exp(2*k/3),V=.5*Math.sqrt(k*z*(P-z)/P)*(D-P/2<0?-1:1),Z=Math.max(R,Math.floor(E-D*z/P+V)),Q=Math.min(O,Math.floor(E+(P-D)*z/P+V));n(T,E,Z,Q,A)}var Y=T[E],te=R,ae=O;for(i(T,R,E),A(T[O],Y)>0&&i(T,R,O);te<ae;){for(i(T,te,ae),te++,ae--;A(T[te],Y)<0;)te++;for(;A(T[ae],Y)>0;)ae--}A(T[R],Y)===0?i(T,R,ae):(ae++,i(T,ae,O)),ae<=E&&(R=ae+1),E<=ae&&(O=ae-1)}}function i(T,E,R){var O=T[E];T[E]=T[R],T[R]=O}function o(T,E){return T<E?-1:T>E?1:0}var a=function(E){E===void 0&&(E=9),this._maxEntries=Math.max(4,E),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()};a.prototype.all=function(){return this._all(this.data,[])},a.prototype.search=function(E){var R=this.data,O=[];if(!_(E,R))return O;for(var A=this.toBBox,P=[];R;){for(var D=0;D<R.children.length;D++){var k=R.children[D],z=R.leaf?A(k):k;_(E,z)&&(R.leaf?O.push(k):w(E,z)?this._all(k,O):P.push(k))}R=P.pop()}return O},a.prototype.collides=function(E){var R=this.data;if(!_(E,R))return!1;for(var O=[];R;){for(var A=0;A<R.children.length;A++){var P=R.children[A],D=R.leaf?this.toBBox(P):P;if(_(E,D)){if(R.leaf||w(E,D))return!0;O.push(P)}}R=O.pop()}return!1},a.prototype.load=function(E){if(!(E&&E.length))return this;if(E.length<this._minEntries){for(var R=0;R<E.length;R++)this.insert(E[R]);return this}var O=this._build(E.slice(),0,E.length-1,0);if(!this.data.children.length)this.data=O;else if(this.data.height===O.height)this._splitRoot(this.data,O);else{if(this.data.height<O.height){var A=this.data;this.data=O,O=A}this._insert(O,this.data.height-O.height-1,!0)}return this},a.prototype.insert=function(E){return E&&this._insert(E,this.data.height-1),this},a.prototype.clear=function(){return this.data=S([]),this},a.prototype.remove=function(E,R){if(!E)return this;for(var O=this.data,A=this.toBBox(E),P=[],D=[],k,z,V;O||P.length;){if(O||(O=P.pop(),z=P[P.length-1],k=D.pop(),V=!0),O.leaf){var Z=s(E,O.children,R);if(Z!==-1)return O.children.splice(Z,1),P.push(O),this._condense(P),this}!V&&!O.leaf&&w(O,A)?(P.push(O),D.push(k),k=0,z=O,O=O.children[0]):z?(k++,O=z.children[k],V=!1):O=null}return this},a.prototype.toBBox=function(E){return E},a.prototype.compareMinX=function(E,R){return E.minX-R.minX},a.prototype.compareMinY=function(E,R){return E.minY-R.minY},a.prototype.toJSON=function(){return this.data},a.prototype.fromJSON=function(E){return this.data=E,this},a.prototype._all=function(E,R){for(var O=[];E;)E.leaf?R.push.apply(R,E.children):O.push.apply(O,E.children),E=O.pop();return R},a.prototype._build=function(E,R,O,A){var P=O-R+1,D=this._maxEntries,k;if(P<=D)return k=S(E.slice(R,O+1)),l(k,this.toBBox),k;A||(A=Math.ceil(Math.log(P)/Math.log(D)),D=Math.ceil(P/Math.pow(D,A-1))),k=S([]),k.leaf=!1,k.height=A;var z=Math.ceil(P/D),V=z*Math.ceil(Math.sqrt(D));b(E,R,O,V,this.compareMinX);for(var Z=R;Z<=O;Z+=V){var Q=Math.min(Z+V-1,O);b(E,Z,Q,z,this.compareMinY);for(var Y=Z;Y<=Q;Y+=z){var te=Math.min(Y+z-1,Q);k.children.push(this._build(E,Y,te,A-1))}}return l(k,this.toBBox),k},a.prototype._chooseSubtree=function(E,R,O,A){for(;A.push(R),!(R.leaf||A.length-1===O);){for(var P=1/0,D=1/0,k=void 0,z=0;z<R.children.length;z++){var V=R.children[z],Z=p(V),Q=m(E,V)-Z;Q<D?(D=Q,P=Z<P?Z:P,k=V):Q===D&&Z<P&&(P=Z,k=V)}R=k||R.children[0]}return R},a.prototype._insert=function(E,R,O){var A=O?E:this.toBBox(E),P=[],D=this._chooseSubtree(A,this.data,R,P);for(D.children.push(E),d(D,A);R>=0&&P[R].children.length>this._maxEntries;)this._split(P,R),R--;this._adjustParentBBoxes(A,P,R)},a.prototype._split=function(E,R){var O=E[R],A=O.children.length,P=this._minEntries;this._chooseSplitAxis(O,P,A);var D=this._chooseSplitIndex(O,P,A),k=S(O.children.splice(D,O.children.length-D));k.height=O.height,k.leaf=O.leaf,l(O,this.toBBox),l(k,this.toBBox),R?E[R-1].children.push(k):this._splitRoot(O,k)},a.prototype._splitRoot=function(E,R){this.data=S([E,R]),this.data.height=E.height+1,this.data.leaf=!1,l(this.data,this.toBBox)},a.prototype._chooseSplitIndex=function(E,R,O){for(var A,P=1/0,D=1/0,k=R;k<=O-R;k++){var z=u(E,0,k,this.toBBox),V=u(E,k,O,this.toBBox),Z=C(z,V),Q=p(z)+p(V);Z<P?(P=Z,A=k,D=Q<D?Q:D):Z===P&&Q<D&&(D=Q,A=k)}return A||O-R},a.prototype._chooseSplitAxis=function(E,R,O){var A=E.leaf?this.compareMinX:h,P=E.leaf?this.compareMinY:v,D=this._allDistMargin(E,R,O,A),k=this._allDistMargin(E,R,O,P);D<k&&E.children.sort(A)},a.prototype._allDistMargin=function(E,R,O,A){E.children.sort(A);for(var P=this.toBBox,D=u(E,0,R,P),k=u(E,O-R,O,P),z=g(D)+g(k),V=R;V<O-R;V++){var Z=E.children[V];d(D,E.leaf?P(Z):Z),z+=g(D)}for(var Q=O-R-1;Q>=R;Q--){var Y=E.children[Q];d(k,E.leaf?P(Y):Y),z+=g(k)}return z},a.prototype._adjustParentBBoxes=function(E,R,O){for(var A=O;A>=0;A--)d(R[A],E)},a.prototype._condense=function(E){for(var R=E.length-1,O=void 0;R>=0;R--)E[R].children.length===0?R>0?(O=E[R-1].children,O.splice(O.indexOf(E[R]),1)):this.clear():l(E[R],this.toBBox)};function s(T,E,R){if(!R)return E.indexOf(T);for(var O=0;O<E.length;O++)if(R(T,E[O]))return O;return-1}function l(T,E){u(T,0,T.children.length,E,T)}function u(T,E,R,O,A){A||(A=S(null)),A.minX=1/0,A.minY=1/0,A.maxX=-1/0,A.maxY=-1/0;for(var P=E;P<R;P++){var D=T.children[P];d(A,T.leaf?O(D):D)}return A}function d(T,E){return T.minX=Math.min(T.minX,E.minX),T.minY=Math.min(T.minY,E.minY),T.maxX=Math.max(T.maxX,E.maxX),T.maxY=Math.max(T.maxY,E.maxY),T}function h(T,E){return T.minX-E.minX}function v(T,E){return T.minY-E.minY}function p(T){return(T.maxX-T.minX)*(T.maxY-T.minY)}function g(T){return T.maxX-T.minX+(T.maxY-T.minY)}function m(T,E){return(Math.max(E.maxX,T.maxX)-Math.min(E.minX,T.minX))*(Math.max(E.maxY,T.maxY)-Math.min(E.minY,T.minY))}function C(T,E){var R=Math.max(T.minX,E.minX),O=Math.max(T.minY,E.minY),A=Math.min(T.maxX,E.maxX),P=Math.min(T.maxY,E.maxY);return Math.max(0,A-R)*Math.max(0,P-O)}function w(T,E){return T.minX<=E.minX&&T.minY<=E.minY&&E.maxX<=T.maxX&&E.maxY<=T.maxY}function _(T,E){return E.minX<=T.maxX&&E.minY<=T.maxY&&E.maxX>=T.minX&&E.maxY>=T.minY}function S(T){return{children:T,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function b(T,E,R,O,A){for(var P=[E,R];P.length;)if(R=P.pop(),E=P.pop(),!(R-E<=O)){var D=E+Math.ceil((R-E)/O/2)*O;e(T,D,E,R,A),P.push(E,D,D,R)}}return a})})(DC);var jI=DC.exports,$;(function(r){r.GROUP="g",r.CIRCLE="circle",r.ELLIPSE="ellipse",r.IMAGE="image",r.RECT="rect",r.LINE="line",r.POLYLINE="polyline",r.POLYGON="polygon",r.TEXT="text",r.PATH="path",r.HTML="html",r.MESH="mesh"})($||($={}));var ka;(function(r){r[r.ZERO=0]="ZERO",r[r.NEGATIVE_ONE=1]="NEGATIVE_ONE"})(ka||(ka={}));var jo=function(){function r(){this.plugins=[]}return r.prototype.addRenderingPlugin=function(t){this.plugins.push(t),this.context.renderingPlugins.push(t)},r.prototype.removeAllRenderingPlugins=function(){var t=this;this.plugins.forEach(function(e){var n=t.context.renderingPlugins.indexOf(e);n>=0&&t.context.renderingPlugins.splice(n,1)})},r}(),eA=function(){function r(t){this.clipSpaceNearZ=ka.NEGATIVE_ONE,this.plugins=[],this.config=N({enableDirtyCheck:!0,enableCulling:!1,enableAutoRendering:!0,enableDirtyRectangleRendering:!0,enableDirtyRectangleRenderingDebug:!1,enableSizeAttenuation:!0},t)}return r.prototype.registerPlugin=function(t){var e=this.plugins.findIndex(function(n){return n===t});e===-1&&this.plugins.push(t)},r.prototype.unregisterPlugin=function(t){var e=this.plugins.findIndex(function(n){return n===t});e>-1&&this.plugins.splice(e,1)},r.prototype.getPlugins=function(){return this.plugins},r.prototype.getPlugin=function(t){return this.plugins.find(function(e){return e.name===t})},r.prototype.getConfig=function(){return this.config},r.prototype.setConfig=function(t){Object.assign(this.config,t)},r}();function Sa(r,t){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r}function Uh(r,t,e){return r[0]=t[0]-e[0],r[1]=t[1]-e[1],r[2]=t[2]-e[2],r}function Qu(r,t,e){return r[0]=t[0]+e[0],r[1]=t[1]+e[1],r[2]=t[2]+e[2],r}function Zy(r,t,e){return r[0]=t[0]*e,r[1]=t[1]*e,r[2]=t[2]*e,r}function tA(r,t,e){return r[0]=Math.max(t[0],e[0]),r[1]=Math.max(t[1],e[1]),r[2]=Math.max(t[2],e[2]),r}function rA(r,t,e){return r[0]=Math.min(t[0],e[0]),r[1]=Math.min(t[1],e[1]),r[2]=Math.min(t[2],e[2]),r}function Ha(r){return r===void 0?0:r>360||r<-360?r%360:r}function yr(r,t,e){return t===void 0&&(t=0),e===void 0&&(e=0),Array.isArray(r)&&r.length===3?Ri(r):Wn(r)?et(r,t,e):et(r[0],r[1]||t,r[2]||e)}function gt(r){return r*(Math.PI/180)}function Cn(r){return r*(180/Math.PI)}function nA(r){return 360*r}function iA(r,t){var e=t[0],n=t[1],i=t[2],o=t[3],a=e*e,s=n*n,l=i*i,u=o*o,d=a+s+l+u,h=e*o-n*i;return h>.499995*d?(r[0]=Math.PI/2,r[1]=2*Math.atan2(n,e),r[2]=0):h<-.499995*d?(r[0]=-Math.PI/2,r[1]=2*Math.atan2(n,e),r[2]=0):(r[0]=Math.asin(2*(e*i-o*n)),r[1]=Math.atan2(2*(e*o+n*i),1-2*(l+u)),r[2]=Math.atan2(2*(e*n+i*o),1-2*(s+l))),r}function oA(r,t){var e,n,i=Math.PI*.5,o=F(Va(Ne(),t),3),a=o[0],s=o[1],l=o[2],u=Math.asin(-t[2]/a);return u<i?u>-i?(e=Math.atan2(t[6]/s,t[10]/l),n=Math.atan2(t[1]/a,t[0]/a)):(n=0,e=-Math.atan2(t[4]/s,t[5]/s)):(n=0,e=Math.atan2(t[4]/s,t[5]/s)),r[0]=e,r[1]=u,r[2]=n,r}function Vh(r,t){return t.length===16?oA(r,t):iA(r,t)}function aA(r,t,e,n,i){var o=Math.cos(r),a=Math.sin(r);return dO(n*o,i*a,0,-n*a,i*o,0,t,e,1)}function sA(r,t,e,n,i,o,a,s){s===void 0&&(s=!1);var l=2*o/(e-t),u=2*o/(n-i),d=(e+t)/(e-t),h=(n+i)/(n-i),v,p;return s?(v=-a/(a-o),p=-a*o/(a-o)):(v=-(a+o)/(a-o),p=-2*a*o/(a-o)),r[0]=l,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=u,r[6]=0,r[7]=0,r[8]=d,r[9]=h,r[10]=v,r[11]=-1,r[12]=0,r[13]=0,r[14]=p,r[15]=0,r}function Qy(r){var t=r[0],e=r[1],n=r[3],i=r[4],o=Math.sqrt(t*t+e*e),a=Math.sqrt(n*n+i*i),s=t*i-e*n;s<0&&(t<i?o=-o:a=-a),o&&(t*=1/o,e*=1/o),a&&(n*=1/a,i*=1/a);var l=Math.atan2(e,t),u=Cn(l);return[r[6],r[7],o,a,u]}var ei=it(),On=it(),Ls=Ma(),Se=[Ne(),Ne(),Ne()],Jy=Ne();function lA(r,t,e,n,i,o){if(!uA(ei,r)||(Go(On,ei),On[3]=0,On[7]=0,On[11]=0,On[15]=1,Math.abs(uC(On))<1e-8))return!1;var a=ei[3],s=ei[7],l=ei[11],u=ei[12],d=ei[13],h=ei[14],v=ei[15];if(a!==0||s!==0||l!==0){Ls[0]=a,Ls[1]=s,Ls[2]=l,Ls[3]=v;var p=ii(On,On);if(!p)return!1;lC(On,On),Ps(i,Ls,On)}else i[0]=i[1]=i[2]=0,i[3]=1;if(t[0]=u,t[1]=d,t[2]=h,fA(Se,ei),e[0]=Oi(Se[0]),ko(Se[0],Se[0]),n[0]=oi(Se[0],Se[1]),Yh(Se[1],Se[1],Se[0],1,-n[0]),e[1]=Oi(Se[1]),ko(Se[1],Se[1]),n[0]/=e[1],n[1]=oi(Se[0],Se[2]),Yh(Se[2],Se[2],Se[0],1,-n[1]),n[2]=oi(Se[1],Se[2]),Yh(Se[2],Se[2],Se[1],1,-n[2]),e[2]=Oi(Se[2]),ko(Se[2],Se[2]),n[1]/=e[2],n[2]/=e[2],qu(Jy,Se[1],Se[2]),oi(Se[0],Jy)<0)for(var g=0;g<3;g++)e[g]*=-1,Se[g][0]*=-1,Se[g][1]*=-1,Se[g][2]*=-1;return o[0]=.5*Math.sqrt(Math.max(1+Se[0][0]-Se[1][1]-Se[2][2],0)),o[1]=.5*Math.sqrt(Math.max(1-Se[0][0]+Se[1][1]-Se[2][2],0)),o[2]=.5*Math.sqrt(Math.max(1-Se[0][0]-Se[1][1]+Se[2][2],0)),o[3]=.5*Math.sqrt(Math.max(1+Se[0][0]+Se[1][1]+Se[2][2],0)),Se[2][1]>Se[1][2]&&(o[0]=-o[0]),Se[0][2]>Se[2][0]&&(o[1]=-o[1]),Se[1][0]>Se[0][1]&&(o[2]=-o[2]),!0}function uA(r,t){var e=t[15];if(e===0)return!1;for(var n=1/e,i=0;i<16;i++)r[i]=t[i]*n;return!0}function fA(r,t){r[0][0]=t[0],r[0][1]=t[1],r[0][2]=t[2],r[1][0]=t[4],r[1][1]=t[5],r[1][2]=t[6],r[2][0]=t[8],r[2][1]=t[9],r[2][2]=t[10]}function Yh(r,t,e,n,i){r[0]=t[0]*n+e[0]*i,r[1]=t[1]*n+e[1]*i,r[2]=t[2]*n+e[2]*i}var Mt=function(){function r(){this.center=[0,0,0],this.halfExtents=[0,0,0],this.min=[0,0,0],this.max=[0,0,0]}return r.isEmpty=function(t){return!t||t.halfExtents[0]===0&&t.halfExtents[1]===0&&t.halfExtents[2]===0},r.prototype.update=function(t,e){Sa(this.center,t),Sa(this.halfExtents,e),Uh(this.min,this.center,this.halfExtents),Qu(this.max,this.center,this.halfExtents)},r.prototype.setMinMax=function(t,e){Qu(this.center,e,t),Zy(this.center,this.center,.5),Uh(this.halfExtents,e,t),Zy(this.halfExtents,this.halfExtents,.5),Sa(this.min,t),Sa(this.max,e)},r.prototype.getMin=function(){return this.min},r.prototype.getMax=function(){return this.max},r.prototype.add=function(t){if(!r.isEmpty(t)){if(r.isEmpty(this)){this.setMinMax(t.getMin(),t.getMax());return}var e=this.center,n=e[0],i=e[1],o=e[2],a=this.halfExtents,s=a[0],l=a[1],u=a[2],d=n-s,h=n+s,v=i-l,p=i+l,g=o-u,m=o+u,C=t.center,w=C[0],_=C[1],S=C[2],b=t.halfExtents,T=b[0],E=b[1],R=b[2],O=w-T,A=w+T,P=_-E,D=_+E,k=S-R,z=S+R;O<d&&(d=O),A>h&&(h=A),P<v&&(v=P),D>p&&(p=D),k<g&&(g=k),z>m&&(m=z),e[0]=(d+h)*.5,e[1]=(v+p)*.5,e[2]=(g+m)*.5,a[0]=(h-d)*.5,a[1]=(p-v)*.5,a[2]=(m-g)*.5,this.min[0]=d,this.min[1]=v,this.min[2]=g,this.max[0]=h,this.max[1]=p,this.max[2]=m}},r.prototype.setFromTransformedAABB=function(t,e){var n=this.center,i=this.halfExtents,o=t.center,a=t.halfExtents,s=e[0],l=e[4],u=e[8],d=e[1],h=e[5],v=e[9],p=e[2],g=e[6],m=e[10],C=Math.abs(s),w=Math.abs(l),_=Math.abs(u),S=Math.abs(d),b=Math.abs(h),T=Math.abs(v),E=Math.abs(p),R=Math.abs(g),O=Math.abs(m);n[0]=e[12]+s*o[0]+l*o[1]+u*o[2],n[1]=e[13]+d*o[0]+h*o[1]+v*o[2],n[2]=e[14]+p*o[0]+g*o[1]+m*o[2],i[0]=C*a[0]+w*a[1]+_*a[2],i[1]=S*a[0]+b*a[1]+T*a[2],i[2]=E*a[0]+R*a[1]+O*a[2],Uh(this.min,n,i),Qu(this.max,n,i)},r.prototype.intersects=function(t){var e=this.getMax(),n=this.getMin(),i=t.getMax(),o=t.getMin();return n[0]<=i[0]&&e[0]>=o[0]&&n[1]<=i[1]&&e[1]>=o[1]&&n[2]<=i[2]&&e[2]>=o[2]},r.prototype.intersection=function(t){if(!this.intersects(t))return null;var e=new r,n=tA([0,0,0],this.getMin(),t.getMin()),i=rA([0,0,0],this.getMax(),t.getMax());return e.setMinMax(n,i),e},r.prototype.getNegativeFarPoint=function(t){return t.pnVertexFlag===273?Sa([0,0,0],this.min):t.pnVertexFlag===272?[this.min[0],this.min[1],this.max[2]]:t.pnVertexFlag===257?[this.min[0],this.max[1],this.min[2]]:t.pnVertexFlag===256?[this.min[0],this.max[1],this.max[2]]:t.pnVertexFlag===17?[this.max[0],this.min[1],this.min[2]]:t.pnVertexFlag===16?[this.max[0],this.min[1],this.max[2]]:t.pnVertexFlag===1?[this.max[0],this.max[1],this.min[2]]:[this.max[0],this.max[1],this.max[2]]},r.prototype.getPositiveFarPoint=function(t){return t.pnVertexFlag===273?Sa([0,0,0],this.max):t.pnVertexFlag===272?[this.max[0],this.max[1],this.min[2]]:t.pnVertexFlag===257?[this.max[0],this.min[1],this.max[2]]:t.pnVertexFlag===256?[this.max[0],this.min[1],this.min[2]]:t.pnVertexFlag===17?[this.min[0],this.max[1],this.max[2]]:t.pnVertexFlag===16?[this.min[0],this.max[1],this.min[2]]:t.pnVertexFlag===1?[this.min[0],this.min[1],this.max[2]]:[this.min[0],this.min[1],this.min[2]]},r}(),dA=function(){function r(t,e){this.distance=t||0,this.normal=e||et(0,1,0),this.updatePNVertexFlag()}return r.prototype.updatePNVertexFlag=function(){this.pnVertexFlag=(Number(this.normal[0]>=0)<<8)+(Number(this.normal[1]>=0)<<4)+Number(this.normal[2]>=0)},r.prototype.distanceToPoint=function(t){return oi(t,this.normal)-this.distance},r.prototype.normalize=function(){var t=1/xC(this.normal);gc(this.normal,this.normal,t),this.distance*=t},r.prototype.intersectsLine=function(t,e,n){var i=this.distanceToPoint(t),o=this.distanceToPoint(e),a=i/(i-o),s=a>=0&&a<=1;return s&&n&&yc(n,t,e,a),s},r}(),ji;(function(r){r[r.OUTSIDE=4294967295]="OUTSIDE",r[r.INSIDE=0]="INSIDE",r[r.INDETERMINATE=2147483647]="INDETERMINATE"})(ji||(ji={}));var hA=function(){function r(t){if(this.planes=[],t)this.planes=t;else for(var e=0;e<6;e++)this.planes.push(new dA)}return r.prototype.extractFromVPMatrix=function(t){var e=F(t,16),n=e[0],i=e[1],o=e[2],a=e[3],s=e[4],l=e[5],u=e[6],d=e[7],h=e[8],v=e[9],p=e[10],g=e[11],m=e[12],C=e[13],w=e[14],_=e[15];Nn(this.planes[0].normal,a-n,d-s,g-h),this.planes[0].distance=_-m,Nn(this.planes[1].normal,a+n,d+s,g+h),this.planes[1].distance=_+m,Nn(this.planes[2].normal,a+i,d+l,g+v),this.planes[2].distance=_+C,Nn(this.planes[3].normal,a-i,d-l,g-v),this.planes[3].distance=_-C,Nn(this.planes[4].normal,a-o,d-u,g-p),this.planes[4].distance=_-w,Nn(this.planes[5].normal,a+o,d+u,g+p),this.planes[5].distance=_+w,this.planes.forEach(function(S){S.normalize(),S.updatePNVertexFlag()})},r}(),Yt=function(){function r(t,e){t===void 0&&(t=0),e===void 0&&(e=0),this.x=0,this.y=0,this.x=t,this.y=e}return r.prototype.clone=function(){return new r(this.x,this.y)},r.prototype.copyFrom=function(t){this.x=t.x,this.y=t.y},r}(),Wo=function(){function r(t,e,n,i){this.x=t,this.y=e,this.width=n,this.height=i,this.left=t,this.right=t+n,this.top=e,this.bottom=e+i}return r.prototype.toJSON=function(){},r}(),je="Method not implemented.",Ta="Use document.documentElement instead.",cA="Cannot append a destroyed element.",qe;(function(r){r[r.ORBITING=0]="ORBITING",r[r.EXPLORING=1]="EXPLORING",r[r.TRACKING=2]="TRACKING"})(qe||(qe={}));var Zs;(function(r){r[r.DEFAULT=0]="DEFAULT",r[r.ROTATIONAL=1]="ROTATIONAL",r[r.TRANSLATIONAL=2]="TRANSLATIONAL",r[r.CINEMATIC=3]="CINEMATIC"})(Zs||(Zs={}));var Ar;(function(r){r[r.ORTHOGRAPHIC=0]="ORTHOGRAPHIC",r[r.PERSPECTIVE=1]="PERSPECTIVE"})(Ar||(Ar={}));var FC={UPDATED:"updated"},jy=2e-4,kC=function(){function r(){this.clipSpaceNearZ=ka.NEGATIVE_ONE,this.eventEmitter=new Rv,this.matrix=it(),this.right=et(1,0,0),this.up=et(0,1,0),this.forward=et(0,0,1),this.position=et(0,0,1),this.focalPoint=et(0,0,0),this.distanceVector=et(0,0,-1),this.distance=1,this.azimuth=0,this.elevation=0,this.roll=0,this.relAzimuth=0,this.relElevation=0,this.relRoll=0,this.dollyingStep=0,this.maxDistance=1/0,this.minDistance=-1/0,this.zoom=1,this.rotateWorld=!1,this.fov=30,this.near=.1,this.far=1e3,this.aspect=1,this.projectionMatrix=it(),this.projectionMatrixInverse=it(),this.jitteredProjectionMatrix=void 0,this.enableUpdate=!0,this.type=qe.EXPLORING,this.trackingMode=Zs.DEFAULT,this.projectionMode=Ar.PERSPECTIVE,this.frustum=new hA,this.orthoMatrix=it()}return r.prototype.isOrtho=function(){return this.projectionMode===Ar.ORTHOGRAPHIC},r.prototype.getProjectionMode=function(){return this.projectionMode},r.prototype.getPerspective=function(){return this.jitteredProjectionMatrix||this.projectionMatrix},r.prototype.getPerspectiveInverse=function(){return this.projectionMatrixInverse},r.prototype.getFrustum=function(){return this.frustum},r.prototype.getPosition=function(){return this.position},r.prototype.getFocalPoint=function(){return this.focalPoint},r.prototype.getDollyingStep=function(){return this.dollyingStep},r.prototype.getNear=function(){return this.near},r.prototype.getFar=function(){return this.far},r.prototype.getZoom=function(){return this.zoom},r.prototype.getOrthoMatrix=function(){return this.orthoMatrix},r.prototype.getView=function(){return this.view},r.prototype.setEnableUpdate=function(t){this.enableUpdate=t},r.prototype.setType=function(t,e){return this.type=t,this.type===qe.EXPLORING?this.setWorldRotation(!0):this.setWorldRotation(!1),this._getAngles(),this.type===qe.TRACKING&&e!==void 0&&this.setTrackingMode(e),this},r.prototype.setProjectionMode=function(t){return this.projectionMode=t,this},r.prototype.setTrackingMode=function(t){if(this.type!==qe.TRACKING)throw new Error("Impossible to set a tracking mode if the camera is not of tracking type");return this.trackingMode=t,this},r.prototype.setWorldRotation=function(t){return this.rotateWorld=t,this._getAngles(),this},r.prototype.getViewTransform=function(){return ii(it(),this.matrix)},r.prototype.getWorldTransform=function(){return this.matrix},r.prototype.jitterProjectionMatrix=function(t,e){var n=hC(it(),[t,e,0]);this.jitteredProjectionMatrix=lr(it(),n,this.projectionMatrix)},r.prototype.clearJitterProjectionMatrix=function(){this.jitteredProjectionMatrix=void 0},r.prototype.setMatrix=function(t){return this.matrix=t,this._update(),this},r.prototype.setFov=function(t){return this.setPerspective(this.near,this.far,t,this.aspect),this},r.prototype.setAspect=function(t){return this.setPerspective(this.near,this.far,this.fov,t),this},r.prototype.setNear=function(t){return this.projectionMode===Ar.PERSPECTIVE?this.setPerspective(t,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,t,this.far),this},r.prototype.setFar=function(t){return this.projectionMode===Ar.PERSPECTIVE?this.setPerspective(this.near,t,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,t),this},r.prototype.setViewOffset=function(t,e,n,i,o,a){return this.aspect=t/e,this.view===void 0&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=i,this.view.width=o,this.view.height=a,this.projectionMode===Ar.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this},r.prototype.clearViewOffset=function(){return this.view!==void 0&&(this.view.enabled=!1),this.projectionMode===Ar.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this},r.prototype.setZoom=function(t){return this.zoom=t,this.projectionMode===Ar.ORTHOGRAPHIC?this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far):this.projectionMode===Ar.PERSPECTIVE&&this.setPerspective(this.near,this.far,this.fov,this.aspect),this},r.prototype.setZoomByViewportPoint=function(t,e){var n=this.canvas.viewport2Canvas({x:e[0],y:e[1]}),i=n.x,o=n.y,a=this.roll;this.rotate(0,0,-a),this.setPosition(i,o),this.setFocalPoint(i,o),this.setZoom(t),this.rotate(0,0,a);var s=this.canvas.viewport2Canvas({x:e[0],y:e[1]}),l=s.x,u=s.y,d=et(l-i,u-o,0),h=oi(d,this.right)/Oi(this.right),v=oi(d,this.up)/Oi(this.up);return this.pan(-h,-v),this},r.prototype.setPerspective=function(t,e,n,i){var o;this.projectionMode=Ar.PERSPECTIVE,this.fov=n,this.near=t,this.far=e,this.aspect=i;var a=this.near*Math.tan(gt(.5*this.fov))/this.zoom,s=2*a,l=this.aspect*s,u=-.5*l;if(!((o=this.view)===null||o===void 0)&&o.enabled){var d=this.view.fullWidth,h=this.view.fullHeight;u+=this.view.offsetX*l/d,a-=this.view.offsetY*s/h,l*=this.view.width/d,s*=this.view.height/h}return sA(this.projectionMatrix,u,u+l,a,a-s,t,this.far,this.clipSpaceNearZ===ka.ZERO),nf(this.projectionMatrix,this.projectionMatrix,et(1,-1,1)),ii(this.projectionMatrixInverse,this.projectionMatrix),this.triggerUpdate(),this},r.prototype.setOrthographic=function(t,e,n,i,o,a){var s;this.projectionMode=Ar.ORTHOGRAPHIC,this.rright=e,this.left=t,this.top=n,this.bottom=i,this.near=o,this.far=a;var l=(this.rright-this.left)/(2*this.zoom),u=(this.top-this.bottom)/(2*this.zoom),d=(this.rright+this.left)/2,h=(this.top+this.bottom)/2,v=d-l,p=d+l,g=h+u,m=h-u;if(!((s=this.view)===null||s===void 0)&&s.enabled){var C=(this.rright-this.left)/this.view.fullWidth/this.zoom,w=(this.top-this.bottom)/this.view.fullHeight/this.zoom;v+=C*this.view.offsetX,p=v+C*this.view.width,g-=w*this.view.offsetY,m=g-w*this.view.height}return this.clipSpaceNearZ===ka.NEGATIVE_ONE?yC(this.projectionMatrix,v,p,m,g,o,a):mC(this.projectionMatrix,v,p,m,g,o,a),nf(this.projectionMatrix,this.projectionMatrix,et(1,-1,1)),ii(this.projectionMatrixInverse,this.projectionMatrix),this._getOrthoMatrix(),this.triggerUpdate(),this},r.prototype.setPosition=function(t,e,n){e===void 0&&(e=this.position[1]),n===void 0&&(n=this.position[2]);var i=yr(t,e,n);return this._setPosition(i),this.setFocalPoint(this.focalPoint),this.triggerUpdate(),this},r.prototype.setFocalPoint=function(t,e,n){e===void 0&&(e=this.focalPoint[1]),n===void 0&&(n=this.focalPoint[2]);var i=et(0,1,0);if(this.focalPoint=yr(t,e,n),this.trackingMode===Zs.CINEMATIC){var o=My(Ne(),this.focalPoint,this.position);t=o[0],e=o[1],n=o[2];var a=Oi(o),s=Cn(Math.asin(e/a)),l=90+Cn(Math.atan2(n,t)),u=it();dC(u,u,gt(l)),fC(u,u,gt(s)),i=wn(Ne(),[0,1,0],u)}return ii(this.matrix,CC(it(),this.position,this.focalPoint,i)),this._getAxes(),this._getDistance(),this._getAngles(),this.triggerUpdate(),this},r.prototype.getDistance=function(){return this.distance},r.prototype.getDistanceVector=function(){return this.distanceVector},r.prototype.setDistance=function(t){if(this.distance===t||t<0)return this;this.distance=t,this.distance<jy&&(this.distance=jy),this.dollyingStep=this.distance/100;var e=Ne();t=this.distance;var n=this.forward,i=this.focalPoint;return e[0]=t*n[0]+i[0],e[1]=t*n[1]+i[1],e[2]=t*n[2]+i[2],this._setPosition(e),this.triggerUpdate(),this},r.prototype.setMaxDistance=function(t){return this.maxDistance=t,this},r.prototype.setMinDistance=function(t){return this.minDistance=t,this},r.prototype.setAzimuth=function(t){return this.azimuth=Ha(t),this.computeMatrix(),this._getAxes(),this.type===qe.ORBITING||this.type===qe.EXPLORING?this._getPosition():this.type===qe.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this},r.prototype.getAzimuth=function(){return this.azimuth},r.prototype.setElevation=function(t){return this.elevation=Ha(t),this.computeMatrix(),this._getAxes(),this.type===qe.ORBITING||this.type===qe.EXPLORING?this._getPosition():this.type===qe.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this},r.prototype.getElevation=function(){return this.elevation},r.prototype.setRoll=function(t){return this.roll=Ha(t),this.computeMatrix(),this._getAxes(),this.type===qe.ORBITING||this.type===qe.EXPLORING?this._getPosition():this.type===qe.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this},r.prototype.getRoll=function(){return this.roll},r.prototype._update=function(){this._getAxes(),this._getPosition(),this._getDistance(),this._getAngles(),this._getOrthoMatrix(),this.triggerUpdate()},r.prototype.computeMatrix=function(){var t=ro(bt(),[0,0,1],gt(this.roll));vl(this.matrix);var e=ro(bt(),[1,0,0],gt((this.rotateWorld&&this.type!==qe.TRACKING||this.type===qe.TRACKING?1:-1)*this.elevation)),n=ro(bt(),[0,1,0],gt((this.rotateWorld&&this.type!==qe.TRACKING||this.type===qe.TRACKING?1:-1)*this.azimuth)),i=ao(bt(),n,e);i=ao(bt(),i,t);var o=Mv(it(),i);this.type===qe.ORBITING||this.type===qe.EXPLORING?(oo(this.matrix,this.matrix,this.focalPoint),lr(this.matrix,this.matrix,o),oo(this.matrix,this.matrix,[0,0,this.distance])):this.type===qe.TRACKING&&(oo(this.matrix,this.matrix,this.position),lr(this.matrix,this.matrix,o))},r.prototype._setPosition=function(t,e,n){this.position=yr(t,e,n);var i=this.matrix;i[12]=this.position[0],i[13]=this.position[1],i[14]=this.position[2],i[15]=1,this._getOrthoMatrix()},r.prototype._getAxes=function(){Nr(this.right,yr(Ps(Ma(),[1,0,0,0],this.matrix))),Nr(this.up,yr(Ps(Ma(),[0,1,0,0],this.matrix))),Nr(this.forward,yr(Ps(Ma(),[0,0,1,0],this.matrix))),ko(this.right,this.right),ko(this.up,this.up),ko(this.forward,this.forward)},r.prototype._getAngles=function(){var t=this.distanceVector[0],e=this.distanceVector[1],n=this.distanceVector[2],i=Oi(this.distanceVector);if(i===0){this.elevation=0,this.azimuth=0;return}this.type===qe.TRACKING?(this.elevation=Cn(Math.asin(e/i)),this.azimuth=Cn(Math.atan2(-t,-n))):this.rotateWorld?(this.elevation=Cn(Math.asin(e/i)),this.azimuth=Cn(Math.atan2(-t,-n))):(this.elevation=-Cn(Math.asin(e/i)),this.azimuth=-Cn(Math.atan2(-t,-n)))},r.prototype._getPosition=function(){Nr(this.position,yr(Ps(Ma(),[0,0,0,1],this.matrix))),this._getDistance()},r.prototype._getFocalPoint=function(){HO(this.distanceVector,[0,0,-this.distance],fO(aC(),this.matrix)),Da(this.focalPoint,this.position,this.distanceVector),this._getDistance()},r.prototype._getDistance=function(){this.distanceVector=My(Ne(),this.focalPoint,this.position),this.distance=Oi(this.distanceVector),this.dollyingStep=this.distance/100},r.prototype._getOrthoMatrix=function(){if(this.projectionMode===Ar.ORTHOGRAPHIC){var t=this.position,e=ro(bt(),[0,0,1],-this.roll*Math.PI/180);Gs(this.orthoMatrix,e,et((this.rright-this.left)/2-t[0],(this.top-this.bottom)/2-t[1],0),et(this.zoom,this.zoom,1),t)}},r.prototype.triggerUpdate=function(){if(this.enableUpdate){var t=this.getViewTransform(),e=lr(it(),this.getPerspective(),t);this.getFrustum().extractFromVPMatrix(e),this.eventEmitter.emit(FC.UPDATED)}},r.prototype.rotate=function(t,e,n){throw new Error(je)},r.prototype.pan=function(t,e){throw new Error(je)},r.prototype.dolly=function(t){throw new Error(je)},r.prototype.createLandmark=function(t,e){throw new Error(je)},r.prototype.gotoLandmark=function(t,e){throw new Error(je)},r.prototype.cancelLandmarkAnimation=function(){throw new Error(je)},r}();function rr(r,t){if(typeof r!="function"||t!=null&&typeof t!="function")throw new TypeError("Expected a function");var e=function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var o=t?t.apply(this,n):n[0],a=e.cache;if(a.has(o))return a.get(o);var s=r.apply(this,n);return e.cache=a.set(o,s)||a,s};return e.cache=new(rr.Cache||Map),e}rr.Cache=Map;var le;(function(r){r[r.kUnknown=0]="kUnknown",r[r.kNumber=1]="kNumber",r[r.kPercentage=2]="kPercentage",r[r.kEms=3]="kEms",r[r.kPixels=4]="kPixels",r[r.kRems=5]="kRems",r[r.kDegrees=6]="kDegrees",r[r.kRadians=7]="kRadians",r[r.kGradians=8]="kGradians",r[r.kTurns=9]="kTurns",r[r.kMilliseconds=10]="kMilliseconds",r[r.kSeconds=11]="kSeconds",r[r.kInteger=12]="kInteger"})(le||(le={}));var en;(function(r){r[r.kUNumber=0]="kUNumber",r[r.kUPercent=1]="kUPercent",r[r.kULength=2]="kULength",r[r.kUAngle=3]="kUAngle",r[r.kUTime=4]="kUTime",r[r.kUOther=5]="kUOther"})(en||(en={}));var e1;(function(r){r[r.kAll=0]="kAll",r[r.kNonNegative=1]="kNonNegative",r[r.kInteger=2]="kInteger",r[r.kNonNegativeInteger=3]="kNonNegativeInteger",r[r.kPositiveInteger=4]="kPositiveInteger"})(e1||(e1={}));var Ec;(function(r){r[r.kYes=0]="kYes",r[r.kNo=1]="kNo"})(Ec||(Ec={}));var Sc;(function(r){r[r.kYes=0]="kYes",r[r.kNo=1]="kNo"})(Sc||(Sc={}));var vA=[{name:"em",unit_type:le.kEms},{name:"px",unit_type:le.kPixels},{name:"deg",unit_type:le.kDegrees},{name:"rad",unit_type:le.kRadians},{name:"grad",unit_type:le.kGradians},{name:"ms",unit_type:le.kMilliseconds},{name:"s",unit_type:le.kSeconds},{name:"rem",unit_type:le.kRems},{name:"turn",unit_type:le.kTurns}],fo;(function(r){r[r.kUnknownType=0]="kUnknownType",r[r.kUnparsedType=1]="kUnparsedType",r[r.kKeywordType=2]="kKeywordType",r[r.kUnitType=3]="kUnitType",r[r.kSumType=4]="kSumType",r[r.kProductType=5]="kProductType",r[r.kNegateType=6]="kNegateType",r[r.kInvertType=7]="kInvertType",r[r.kMinType=8]="kMinType",r[r.kMaxType=9]="kMaxType",r[r.kClampType=10]="kClampType",r[r.kTransformType=11]="kTransformType",r[r.kPositionType=12]="kPositionType",r[r.kURLImageType=13]="kURLImageType",r[r.kColorType=14]="kColorType",r[r.kUnsupportedColorType=15]="kUnsupportedColorType"})(fo||(fo={}));var pA=function(r){return vA.find(function(t){return t.name===r}).unit_type},gA=function(r){return r?r==="number"?le.kNumber:r==="percent"||r==="%"?le.kPercentage:pA(r):le.kUnknown},yA=function(r){switch(r){case le.kNumber:case le.kInteger:return en.kUNumber;case le.kPercentage:return en.kUPercent;case le.kPixels:return en.kULength;case le.kMilliseconds:case le.kSeconds:return en.kUTime;case le.kDegrees:case le.kRadians:case le.kGradians:case le.kTurns:return en.kUAngle;default:return en.kUOther}},mA=function(r){switch(r){case en.kUNumber:return le.kNumber;case en.kULength:return le.kPixels;case en.kUPercent:return le.kPercentage;case en.kUTime:return le.kSeconds;case en.kUAngle:return le.kDegrees;default:return le.kUnknown}},t1=function(r){var t=1;switch(r){case le.kPixels:case le.kDegrees:case le.kSeconds:break;case le.kMilliseconds:t=.001;break;case le.kRadians:t=180/Math.PI;break;case le.kGradians:t=.9;break;case le.kTurns:t=360;break}return t},Tc=function(r){switch(r){case le.kNumber:case le.kInteger:return"";case le.kPercentage:return"%";case le.kEms:return"em";case le.kRems:return"rem";case le.kPixels:return"px";case le.kDegrees:return"deg";case le.kRadians:return"rad";case le.kGradians:return"grad";case le.kMilliseconds:return"ms";case le.kSeconds:return"s";case le.kTurns:return"turn"}return""},Vf=function(){function r(){}return r.isAngle=function(t){return t===le.kDegrees||t===le.kRadians||t===le.kGradians||t===le.kTurns},r.isLength=function(t){return t>=le.kEms&&t<le.kDegrees},r.isRelativeUnit=function(t){return t===le.kPercentage||t===le.kEms||t===le.kRems},r.isTime=function(t){return t===le.kSeconds||t===le.kMilliseconds},r.prototype.toString=function(){return this.buildCSSText(Ec.kNo,Sc.kNo,"")},r.prototype.isNumericValue=function(){return this.getType()>=fo.kUnitType&&this.getType()<=fo.kClampType},r}(),CA=function(r){oe(t,r);function t(e){var n=r.call(this)||this;return n.colorSpace=e,n}return t.prototype.getType=function(){return fo.kColorType},t.prototype.to=function(e){return this},t}(Vf),ai;(function(r){r[r.Constant=0]="Constant",r[r.LinearGradient=1]="LinearGradient",r[r.RadialGradient=2]="RadialGradient"})(ai||(ai={}));var bu=function(r){oe(t,r);function t(e,n){var i=r.call(this)||this;return i.type=e,i.value=n,i}return t.prototype.clone=function(){return new t(this.type,this.value)},t.prototype.buildCSSText=function(e,n,i){return i},t.prototype.getType=function(){return fo.kColorType},t}(Vf),Fr=function(r){oe(t,r);function t(e){var n=r.call(this)||this;return n.value=e,n}return t.prototype.clone=function(){return new t(this.value)},t.prototype.getType=function(){return fo.kKeywordType},t.prototype.buildCSSText=function(e,n,i){return i+this.value},t}(Vf),wA=rr(function(r){return r===void 0&&(r=""),r.replace(/-([a-z])/g,function(t){return t[1].toUpperCase()})}),r1=function(r){return r.split("").map(function(t,e){return t.toUpperCase()===t?"".concat(e!==0?"-":"").concat(t.toLowerCase()):t}).join("")};function xA(r){if(!r)throw new Error}function Oa(r){return typeof r=="function"}function _A(r){return typeof r=="symbol"}var EA={d:{alias:"path"},strokeDasharray:{alias:"lineDash"},strokeWidth:{alias:"lineWidth"},textAnchor:{alias:"textAlign"},src:{alias:"img"}},bc=rr(function(r){var t=wA(r),e=EA[t];return t=(e==null?void 0:e.alias)||t,t}),SA=function(r,t){t===void 0&&(t="");var e="";return Number.isFinite(r)?(xA(Number.isNaN(r)),e="NaN"):r>0?e="infinity":e="-infinity",e+=t},Lc=function(r){return mA(yA(r))},Gt=function(r){oe(t,r);function t(e,n){n===void 0&&(n=le.kNumber);var i=r.call(this)||this,o;return typeof n=="string"?o=gA(n):o=n,i.unit=o,i.value=e,i}return t.prototype.clone=function(){return new t(this.value,this.unit)},t.prototype.equals=function(e){var n=e;return this.value===n.value&&this.unit===n.unit},t.prototype.getType=function(){return fo.kUnitType},t.prototype.convertTo=function(e){if(this.unit===e)return new t(this.value,this.unit);var n=Lc(this.unit);if(n!==Lc(e)||n===le.kUnknown)return null;var i=t1(this.unit)/t1(e);return new t(this.value*i,e)},t.prototype.buildCSSText=function(e,n,i){var o;switch(this.unit){case le.kUnknown:break;case le.kInteger:o=Number(this.value).toFixed(0);break;case le.kNumber:case le.kPercentage:case le.kEms:case le.kRems:case le.kPixels:case le.kDegrees:case le.kRadians:case le.kGradians:case le.kMilliseconds:case le.kSeconds:case le.kTurns:{var a=-999999,s=999999,l=this.value,u=Tc(this.unit);if(l<a||l>s){var d=Tc(this.unit);!Number.isFinite(l)||Number.isNaN(l)?o=SA(l,d):o=l+(d||"")}else o="".concat(l).concat(u)}}return i+=o,i},t}(Vf),Bt=new Gt(0,"px");new Gt(1,"px");var Bn=new Gt(0,"deg"),Nv=function(r){oe(t,r);function t(e,n,i,o,a){o===void 0&&(o=1),a===void 0&&(a=!1);var s=r.call(this,"rgb")||this;return s.r=e,s.g=n,s.b=i,s.alpha=o,s.isNone=a,s}return t.prototype.clone=function(){return new t(this.r,this.g,this.b,this.alpha)},t.prototype.buildCSSText=function(e,n,i){return i+"rgba(".concat(this.r,",").concat(this.g,",").concat(this.b,",").concat(this.alpha,")")},t}(CA),nt=new Fr("unset"),TA=new Fr("initial"),bA=new Fr("inherit"),Xh={"":nt,unset:nt,initial:TA,inherit:bA},Rc=function(r){return Xh[r]||(Xh[r]=new Fr(r)),Xh[r]},Mc=new Nv(0,0,0,0,!0),HC=new Nv(0,0,0,0),LA=rr(function(r,t,e,n){return new Nv(r,t,e,n)},function(r,t,e,n){return"rgba(".concat(r,",").concat(t,",").concat(e,",").concat(n,")")}),tt=function(r,t){return t===void 0&&(t=le.kNumber),new Gt(r,t)},ff=new Gt(50,"%"),Oc;(function(r){r[r.Standard=0]="Standard"})(Oc||(Oc={}));var Xa;(function(r){r[r.ADDED=0]="ADDED",r[r.REMOVED=1]="REMOVED",r[r.Z_INDEX_CHANGED=2]="Z_INDEX_CHANGED"})(Xa||(Xa={}));var zC={absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:new Wo(0,0,0,0)},ue;(function(r){r.COORDINATE="<coordinate>",r.COLOR="<color>",r.PAINT="<paint>",r.NUMBER="<number>",r.ANGLE="<angle>",r.OPACITY_VALUE="<opacity-value>",r.SHADOW_BLUR="<shadow-blur>",r.LENGTH="<length>",r.PERCENTAGE="<percentage>",r.LENGTH_PERCENTAGE="<length> | <percentage>",r.LENGTH_PERCENTAGE_12="[<length> | <percentage>]{1,2}",r.LENGTH_PERCENTAGE_14="[<length> | <percentage>]{1,4}",r.LIST_OF_POINTS="<list-of-points>",r.PATH="<path>",r.FILTER="<filter>",r.Z_INDEX="<z-index>",r.OFFSET_DISTANCE="<offset-distance>",r.DEFINED_PATH="<defined-path>",r.MARKER="<marker>",r.TRANSFORM="<transform>",r.TRANSFORM_ORIGIN="<transform-origin>",r.TEXT="<text>",r.TEXT_TRANSFORM="<text-transform>"})(ue||(ue={}));function RA(r){var t=r.type,e=r.value;return t==="hex"?"#".concat(e):t==="literal"?e:t==="rgb"?"rgb(".concat(e.join(","),")"):"rgba(".concat(e.join(","),")")}var MA=function(){var r={linearGradient:/^(linear\-gradient)/i,repeatingLinearGradient:/^(repeating\-linear\-gradient)/i,radialGradient:/^(radial\-gradient)/i,repeatingRadialGradient:/^(repeating\-radial\-gradient)/i,conicGradient:/^(conic\-gradient)/i,sideOrCorner:/^to (left (top|bottom)|right (top|bottom)|top (left|right)|bottom (left|right)|left|right|top|bottom)/i,extentKeywords:/^(closest\-side|closest\-corner|farthest\-side|farthest\-corner|contain|cover)/,positionKeywords:/^(left|center|right|top|bottom)/i,pixelValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))px/,percentageValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))\%/,emValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))em/,angleValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))deg/,startCall:/^\(/,endCall:/^\)/,comma:/^,/,hexColor:/^\#([0-9a-fA-F]+)/,literalColor:/^([a-zA-Z]+)/,rgbColor:/^rgb/i,rgbaColor:/^rgba/i,number:/^(([0-9]*\.[0-9]+)|([0-9]+\.?))/},t="";function e(Y){throw new Error(t+": "+Y)}function n(){var Y=i();return t.length>0&&e("Invalid input not EOF"),Y}function i(){return S(o)}function o(){return a("linear-gradient",r.linearGradient,l)||a("repeating-linear-gradient",r.repeatingLinearGradient,l)||a("radial-gradient",r.radialGradient,h)||a("repeating-radial-gradient",r.repeatingRadialGradient,h)||a("conic-gradient",r.conicGradient,h)}function a(Y,te,ae){return s(te,function(pe){var Ee=ae();return Ee&&(Z(r.comma)||e("Missing comma before color stops")),{type:Y,orientation:Ee,colorStops:S(b)}})}function s(Y,te){var ae=Z(Y);if(ae){Z(r.startCall)||e("Missing (");var pe=te(ae);return Z(r.endCall)||e("Missing )"),pe}}function l(){return u()||d()}function u(){return V("directional",r.sideOrCorner,1)}function d(){return V("angular",r.angleValue,1)}function h(){var Y,te=v(),ae;return te&&(Y=[],Y.push(te),ae=t,Z(r.comma)&&(te=v(),te?Y.push(te):t=ae)),Y}function v(){var Y=p()||g();if(Y)Y.at=C();else{var te=m();if(te){Y=te;var ae=C();ae&&(Y.at=ae)}else{var pe=w();pe&&(Y={type:"default-radial",at:pe})}}return Y}function p(){var Y=V("shape",/^(circle)/i,0);return Y&&(Y.style=z()||m()),Y}function g(){var Y=V("shape",/^(ellipse)/i,0);return Y&&(Y.style=D()||m()),Y}function m(){return V("extent-keyword",r.extentKeywords,1)}function C(){if(V("position",/^at/,0)){var Y=w();return Y||e("Missing positioning value"),Y}}function w(){var Y=_();if(Y.x||Y.y)return{type:"position",value:Y}}function _(){return{x:D(),y:D()}}function S(Y){var te=Y(),ae=[];if(te)for(ae.push(te);Z(r.comma);)te=Y(),te?ae.push(te):e("One extra comma");return ae}function b(){var Y=T();return Y||e("Expected color definition"),Y.length=D(),Y}function T(){return R()||A()||O()||E()}function E(){return V("literal",r.literalColor,0)}function R(){return V("hex",r.hexColor,1)}function O(){return s(r.rgbColor,function(){return{type:"rgb",value:S(P)}})}function A(){return s(r.rgbaColor,function(){return{type:"rgba",value:S(P)}})}function P(){return Z(r.number)[1]}function D(){return V("%",r.percentageValue,1)||k()||z()}function k(){return V("position-keyword",r.positionKeywords,1)}function z(){return V("px",r.pixelValue,1)||V("em",r.emValue,1)}function V(Y,te,ae){var pe=Z(te);if(pe)return{type:Y,value:pe[ae]}}function Z(Y){var te=/^[\n\r\t\s]+/.exec(t);te&&Q(te[0].length);var ae=Y.exec(t);return ae&&Q(ae[0].length),ae}function Q(Y){t=t.substring(Y)}return function(Y){return t=Y,n()}}();function OA(r,t,e){var n=gt(e.value),i=0,o=0,a=i+r/2,s=o+t/2,l=Math.abs(r*Math.cos(n))+Math.abs(t*Math.sin(n)),u=a-Math.cos(n)*l/2,d=s-Math.sin(n)*l/2,h=a+Math.cos(n)*l/2,v=s+Math.sin(n)*l/2;return{x1:u,y1:d,x2:h,y2:v}}function IA(r,t,e,n,i){var o=e.value,a=n.value;e.unit===le.kPercentage&&(o=e.value/100*r),n.unit===le.kPercentage&&(a=n.value/100*t);var s=Math.max(Jr([0,0],[o,a]),Jr([0,t],[o,a]),Jr([r,t],[o,a]),Jr([r,0],[o,a]));return i&&(i instanceof Gt?s=i.value:i instanceof Fr&&(i.value==="closest-side"?s=Math.min(o,r-o,a,t-a):i.value==="farthest-side"?s=Math.max(o,r-o,a,t-a):i.value==="closest-corner"&&(s=Math.min(Jr([0,0],[o,a]),Jr([0,t],[o,a]),Jr([r,t],[o,a]),Jr([r,0],[o,a]))))),{x:o,y:a,r:s}}var AA=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,NA=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,PA=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,GC=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function BA(r){var t,e,n,i=r.length;r[i-1].length=(t=r[i-1].length)!==null&&t!==void 0?t:{type:"%",value:"100"},i>1&&(r[0].length=(e=r[0].length)!==null&&e!==void 0?e:{type:"%",value:"0"});for(var o=0,a=Number(r[0].length.value),s=1;s<i;s++){var l=(n=r[s].length)===null||n===void 0?void 0:n.value;if(!de(l)&&!de(a)){for(var u=1;u<s-o;u++)r[o+u].length={type:"%",value:"".concat(a+(Number(l)-a)*u/(s-o))};o=s,a=Number(l)}}}var DA={left:270-90,top:0-90,bottom:180-90,right:90-90,"left top":315-90,"top left":315-90,"left bottom":225-90,"bottom left":225-90,"right top":45-90,"top right":45-90,"right bottom":135-90,"bottom right":135-90},FA=rr(function(r){var t;return r.type==="angular"?t=Number(r.value):t=DA[r.value]||0,tt(t,"deg")}),kA=rr(function(r){var t=50,e=50,n="%",i="%";if((r==null?void 0:r.type)==="position"){var o=r.value,a=o.x,s=o.y;(a==null?void 0:a.type)==="position-keyword"&&(a.value==="left"?t=0:a.value==="center"?t=50:a.value==="right"?t=100:a.value==="top"?e=0:a.value==="bottom"&&(e=100)),(s==null?void 0:s.type)==="position-keyword"&&(s.value==="left"?t=0:s.value==="center"?e=50:s.value==="right"?t=100:s.value==="top"?e=0:s.value==="bottom"&&(e=100)),((a==null?void 0:a.type)==="px"||(a==null?void 0:a.type)==="%"||(a==null?void 0:a.type)==="em")&&(n=a==null?void 0:a.type,t=Number(a.value)),((s==null?void 0:s.type)==="px"||(s==null?void 0:s.type)==="%"||(s==null?void 0:s.type)==="em")&&(i=s==null?void 0:s.type,e=Number(s.value))}return{cx:tt(t,n),cy:tt(e,i)}}),HA=rr(function(r){var t;if(r.indexOf("linear")>-1||r.indexOf("radial")>-1){var e=MA(r);return e.map(function(s){var l=s.type,u=s.orientation,d=s.colorStops;BA(d);var h=d.map(function(S){return{offset:tt(Number(S.length.value),"%"),color:RA(S)}});if(l==="linear-gradient")return new bu(ai.LinearGradient,{angle:u?FA(u):Bn,steps:h});if(l==="radial-gradient"&&(u||(u=[{type:"shape",value:"circle"}]),u[0].type==="shape"&&u[0].value==="circle")){var v=kA(u[0].at),p=v.cx,g=v.cy,m=void 0;if(u[0].style){var C=u[0].style,w=C.type,_=C.value;w==="extent-keyword"?m=Rc(_):m=tt(_,w)}return new bu(ai.RadialGradient,{cx:p,cy:g,size:m,steps:h})}})}var n=r[0];if(r[1]==="("||r[2]==="("){if(n==="l"){var i=AA.exec(r);if(i){var o=((t=i[2].match(GC))===null||t===void 0?void 0:t.map(function(s){return s.split(":")}))||[];return[new bu(ai.LinearGradient,{angle:tt(parseFloat(i[1]),"deg"),steps:o.map(function(s){var l=F(s,2),u=l[0],d=l[1];return{offset:tt(Number(u)*100,"%"),color:d}})})]}}else if(n==="r"){var a=zA(r);if(a)if(tr(a))r=a;else return[new bu(ai.RadialGradient,a)]}else if(n==="p")return GA(r)}});function zA(r){var t,e=NA.exec(r);if(e){var n=((t=e[4].match(GC))===null||t===void 0?void 0:t.map(function(i){return i.split(":")}))||[];return{cx:tt(50,"%"),cy:tt(50,"%"),steps:n.map(function(i){var o=F(i,2),a=o[0],s=o[1];return{offset:tt(Number(a)*100,"%"),color:s}})}}return null}function GA(r){var t=PA.exec(r);if(t){var e=t[1],n=t[2];switch(e){case"a":e="repeat";break;case"x":e="repeat-x";break;case"y":e="repeat-y";break;case"n":e="no-repeat";break;default:e="no-repeat"}return{image:n,repetition:e}}return null}function Qs(r){return r&&!!r.image}function df(r){return r&&!de(r.r)&&!de(r.g)&&!de(r.b)}var za=rr(function(r){if(Qs(r))return N({repetition:"repeat"},r);if(de(r)&&(r=""),r==="transparent")return HC;r==="currentColor"&&(r="black");var t=HA(r);if(t)return t;var e=Ya(r),n=[0,0,0,0];return e!==null&&(n[0]=e.r||0,n[1]=e.g||0,n[2]=e.b||0,n[3]=e.opacity),LA.apply(void 0,X([],F(n),!1))});function WA(r,t){if(!(!df(r)||!df(t)))return[[Number(r.r),Number(r.g),Number(r.b),Number(r.alpha)],[Number(t.r),Number(t.g),Number(t.b),Number(t.alpha)],function(e){var n=e.slice();if(n[3])for(var i=0;i<3;i++)n[i]=Math.round(tn(n[i],0,255));return n[3]=tn(n[3],0,1),"rgba(".concat(n.join(","),")")}]}function gl(r,t){if(de(t))return tt(0,"px");if(t="".concat(t).trim().toLowerCase(),isFinite(Number(t))){if("px".search(r)>=0)return tt(Number(t),"px");if("deg".search(r)>=0)return tt(Number(t),"deg")}var e=[];t=t.replace(r,function(i){return e.push(i),"U"+i});var n="U("+r.source+")";return e.map(function(i){return tt(Number(t.replace(new RegExp("U"+i,"g"),"").replace(new RegExp(n,"g"),"*0")),i)})[0]}var WC=function(r){return gl(new RegExp("px","g"),r)},UA=rr(WC),VA=function(r){return gl(new RegExp("%","g"),r)};rr(VA);var Js=function(r){return Wn(r)||isFinite(Number(r))?tt(Number(r)||0,"px"):gl(new RegExp("px|%|em|rem","g"),r)},$a=rr(Js),Pv=function(r){return gl(new RegExp("deg|rad|grad|turn","g"),r)},UC=rr(Pv);function YA(r,t,e,n,i){i===void 0&&(i=0);var o="",a=r.value||0,s=t.value||0,l=Lc(r.unit),u=r.convertTo(l),d=t.convertTo(l);return u&&d?(a=u.value,s=d.value,o=Tc(r.unit)):(Gt.isLength(r.unit)||Gt.isLength(t.unit))&&(a=Zr(r,i,e),s=Zr(t,i,e),o="px"),[a,s,function(h){return n&&(h=Math.max(h,0)),h+o}]}function jr(r){var t=0;return r.unit===le.kDegrees?t=r.value:r.unit===le.kRadians?t=Cn(Number(r.value)):r.unit===le.kTurns&&(t=nA(Number(r.value))),t}function $h(r,t){var e;return Array.isArray(r)?e=r.map(function(n){return Number(n)}):tr(r)?e=r.split(" ").map(function(n){return Number(n)}):Wn(r)&&(e=[r]),t===2?e.length===1?[e[0],e[0]]:[e[0],e[1]]:e.length===1?[e[0],e[0],e[0],e[0]]:e.length===2?[e[0],e[1],e[0],e[1]]:e.length===3?[e[0],e[1],e[2],e[1]]:[e[0],e[1],e[2],e[3]]}function VC(r){return tr(r)?r.split(" ").map(function(t){return $a(t)}):r.map(function(t){return $a(t.toString())})}function Zr(r,t,e){if(r.value===0)return 0;if(r.unit===le.kPixels)return Number(r.value);if(r.unit===le.kPercentage&&e){var n=e.nodeName===$.GROUP?e.getLocalBounds():e.geometry.contentBounds;return r.value/100*n.halfExtents[t]*2}return 0}var XA=function(r){return gl(/deg|rad|grad|turn|px|%/g,r)},$A=["blur","brightness","drop-shadow","contrast","grayscale","sepia","saturate","hue-rotate","invert"];function YC(r){if(r===void 0&&(r=""),r=r.toLowerCase().trim(),r==="none")return[];for(var t=/\s*([\w-]+)\(([^)]*)\)/g,e=[],n,i=0;n=t.exec(r);){if(n.index!==i)return[];if(i=n.index+n[0].length,$A.indexOf(n[1])>-1&&e.push({name:n[1],params:n[2].split(" ").map(function(o){return XA(o)||za(o)})}),t.lastIndex===r.length)return e}return[]}function XC(r){return r.toString()}var ns=function(r){return typeof r=="number"?tt(r):/^\s*[-+]?(\d*\.)?\d+\s*$/.test(r)?tt(Number(r)):tt(0)},Uo=rr(ns);rr(function(r){return tr(r)?r.split(" ").map(Uo):r.map(Uo)});function Bv(r,t){return[r,t,XC]}function Dv(r,t){return function(e,n){return[e,n,function(i){return XC(tn(i,r,t))}]}}function $C(r,t){if(r.length===t.length)return[r,t,function(e){return e}]}function Ic(r){return r.parsedStyle.path.totalLength===0&&(r.parsedStyle.path.totalLength=xI(r.parsedStyle.path.absolutePath)),r.parsedStyle.path.totalLength}function qA(r){for(var t=0;t<r.length;t++){var e=r[t-1],n=r[t],i=n[0];if(i==="M"&&e){var o=e[0],a=[n[1],n[2]],s=void 0;o==="L"||o==="M"?s=[e[1],e[2]]:(o==="C"||o==="A"||o==="Q")&&(s=[e[e.length-2],e[e.length-1]]),s&&hf(a,s)&&(r.splice(t,1),t--)}}}function KA(r){for(var t=!1,e=r.length,n=0;n<e;n++){var i=r[n],o=i[0];if(o==="C"||o==="A"||o==="Q"){t=!0;break}}return t}function ZA(r){for(var t=[],e=[],n=[],i=0;i<r.length;i++){var o=r[i],a=o[0];a==="M"?(n.length&&(e.push(n),n=[]),n.push([o[1],o[2]])):a==="Z"?n.length&&(t.push(n),n=[]):n.push([o[1],o[2]])}return n.length>0&&e.push(n),{polygons:t,polylines:e}}function hf(r,t){return r[0]===t[0]&&r[1]===t[1]}function QA(r,t){for(var e=[],n=[],i=[],o=0;o<r.length;o++){var a=r[o],s=a.currentPoint,l=a.params,u=a.prePoint,d=void 0;switch(a.command){case"Q":d=KI(u[0],u[1],l[1],l[2],l[3],l[4]);break;case"C":d=YI(u[0],u[1],l[1],l[2],l[3],l[4],l[5],l[6]);break;case"A":var h=a.arcParams;d=WI(h.cx,h.cy,h.rx,h.ry,h.xRotation,h.startAngle,h.endAngle);break;default:e.push(s[0]),n.push(s[1]);break}d&&(a.box=d,e.push(d.x,d.x+d.width),n.push(d.y,d.y+d.height)),t&&(a.command==="L"||a.command==="M")&&a.prePoint&&a.nextPoint&&i.push(a)}e=e.filter(function(w){return!Number.isNaN(w)&&w!==1/0&&w!==-1/0}),n=n.filter(function(w){return!Number.isNaN(w)&&w!==1/0&&w!==-1/0});var v=Ny(e),p=Ny(n),g=Ay(e),m=Ay(n);if(i.length===0)return{x:v,y:p,width:g-v,height:m-p};for(var o=0;o<i.length;o++){var a=i[o],s=a.currentPoint,C=void 0;s[0]===v?(C=Lu(a,t),v=v-C.xExtra):s[0]===g&&(C=Lu(a,t),g=g+C.xExtra),s[1]===p?(C=Lu(a,t),p=p-C.yExtra):s[1]===m&&(C=Lu(a,t),m=m+C.yExtra)}return{x:v,y:p,width:g-v,height:m-p}}function Lu(r,t){var e=r.prePoint,n=r.currentPoint,i=r.nextPoint,o=Math.pow(n[0]-e[0],2)+Math.pow(n[1]-e[1],2),a=Math.pow(n[0]-i[0],2)+Math.pow(n[1]-i[1],2),s=Math.pow(e[0]-i[0],2)+Math.pow(e[1]-i[1],2),l=Math.acos((o+a-s)/(2*Math.sqrt(o)*Math.sqrt(a)));if(!l||Math.sin(l)===0||Ws(l,0))return{xExtra:0,yExtra:0};var u=Math.abs(Math.atan2(i[1]-n[1],i[0]-n[0])),d=Math.abs(Math.atan2(i[0]-n[0],i[1]-n[1]));u=u>Math.PI/2?Math.PI-u:u,d=d>Math.PI/2?Math.PI-d:d;var h={xExtra:Math.cos(l/2-u)*(t/2*(1/Math.sin(l/2)))-t/2||0,yExtra:Math.cos(d-l/2)*(t/2*(1/Math.sin(l/2)))-t/2||0};return h}function n1(r,t){return[t[0]+(t[0]-r[0]),t[1]+(t[1]-r[1])]}var i1=function(r,t){var e=r.x*t.x+r.y*t.y,n=Math.sqrt((Math.pow(r.x,2)+Math.pow(r.y,2))*(Math.pow(t.x,2)+Math.pow(t.y,2))),i=r.x*t.y-r.y*t.x<0?-1:1,o=i*Math.acos(e/n);return o},o1=function(r,t,e,n,i,o,a,s){t=Math.abs(t),e=Math.abs(e),n=_C(n,360);var l=gt(n);if(r.x===a.x&&r.y===a.y)return{x:r.x,y:r.y,ellipticalArcAngle:0};if(t===0||e===0)return{x:0,y:0,ellipticalArcAngle:0};var u=(r.x-a.x)/2,d=(r.y-a.y)/2,h={x:Math.cos(l)*u+Math.sin(l)*d,y:-Math.sin(l)*u+Math.cos(l)*d},v=Math.pow(h.x,2)/Math.pow(t,2)+Math.pow(h.y,2)/Math.pow(e,2);v>1&&(t=Math.sqrt(v)*t,e=Math.sqrt(v)*e);var p=Math.pow(t,2)*Math.pow(e,2)-Math.pow(t,2)*Math.pow(h.y,2)-Math.pow(e,2)*Math.pow(h.x,2),g=Math.pow(t,2)*Math.pow(h.y,2)+Math.pow(e,2)*Math.pow(h.x,2),m=p/g;m=m<0?0:m;var C=(i!==o?1:-1)*Math.sqrt(m),w={x:C*(t*h.y/e),y:C*(-(e*h.x)/t)},_={x:Math.cos(l)*w.x-Math.sin(l)*w.y+(r.x+a.x)/2,y:Math.sin(l)*w.x+Math.cos(l)*w.y+(r.y+a.y)/2},S={x:(h.x-w.x)/t,y:(h.y-w.y)/e},b=i1({x:1,y:0},S),T={x:(-h.x-w.x)/t,y:(-h.y-w.y)/e},E=i1(S,T);!o&&E>0?E-=2*Math.PI:o&&E<0&&(E+=2*Math.PI),E%=2*Math.PI;var R=b+E*s,O=t*Math.cos(R),A=e*Math.sin(R),P={x:Math.cos(l)*O-Math.sin(l)*A+_.x,y:Math.sin(l)*O+Math.cos(l)*A+_.y,ellipticalArcStartAngle:b,ellipticalArcEndAngle:b+E,ellipticalArcAngle:R,ellipticalArcCenter:_,resultantRx:t,resultantRy:e};return P};function JA(r){for(var t=[],e=null,n=null,i=null,o=0,a=r.length,s=0;s<a;s++){var l=r[s];n=r[s+1];var u=l[0],d={command:u,prePoint:e,params:l,startTangent:null,endTangent:null,currentPoint:null,nextPoint:null,arcParams:null,box:null,cubicParams:null};switch(u){case"M":i=[l[1],l[2]],o=s;break;case"A":var h=jA(e,l);d.arcParams=h;break}if(u==="Z")e=i,n=r[o+1];else{var v=l.length;e=[l[v-2],l[v-1]]}n&&n[0]==="Z"&&(n=r[o],t[o]&&(t[o].prePoint=e)),d.currentPoint=e,t[o]&&hf(e,t[o].currentPoint)&&(t[o].prePoint=d.prePoint);var p=n?[n[n.length-2],n[n.length-1]]:null;d.nextPoint=p;var g=d.prePoint;if(["L","H","V"].includes(u))d.startTangent=[g[0]-e[0],g[1]-e[1]],d.endTangent=[e[0]-g[0],e[1]-g[1]];else if(u==="Q"){var m=[l[1],l[2]];d.startTangent=[g[0]-m[0],g[1]-m[1]],d.endTangent=[e[0]-m[0],e[1]-m[1]]}else if(u==="T"){var C=t[s-1],m=n1(C.currentPoint,g);C.command==="Q"?(d.command="Q",d.startTangent=[g[0]-m[0],g[1]-m[1]],d.endTangent=[e[0]-m[0],e[1]-m[1]]):(d.command="TL",d.startTangent=[g[0]-e[0],g[1]-e[1]],d.endTangent=[e[0]-g[0],e[1]-g[1]])}else if(u==="C"){var w=[l[1],l[2]],_=[l[3],l[4]];d.startTangent=[g[0]-w[0],g[1]-w[1]],d.endTangent=[e[0]-_[0],e[1]-_[1]],d.startTangent[0]===0&&d.startTangent[1]===0&&(d.startTangent=[w[0]-_[0],w[1]-_[1]]),d.endTangent[0]===0&&d.endTangent[1]===0&&(d.endTangent=[_[0]-w[0],_[1]-w[1]])}else if(u==="S"){var C=t[s-1],w=n1(C.currentPoint,g),_=[l[1],l[2]];C.command==="C"?(d.command="C",d.startTangent=[g[0]-w[0],g[1]-w[1]],d.endTangent=[e[0]-_[0],e[1]-_[1]]):(d.command="SQ",d.startTangent=[g[0]-_[0],g[1]-_[1]],d.endTangent=[e[0]-_[0],e[1]-_[1]])}else if(u==="A"){var S=a1(d,0),b=S.x,T=S.y,E=a1(d,1,!1),R=E.x,O=E.y;d.startTangent=[b,T],d.endTangent=[R,O]}t.push(d)}return t}function a1(r,t,e){e===void 0&&(e=!0);var n=r.arcParams,i=n.rx,o=i===void 0?0:i,a=n.ry,s=a===void 0?0:a,l=n.xRotation,u=n.arcFlag,d=n.sweepFlag,h=o1({x:r.prePoint[0],y:r.prePoint[1]},o,s,l,!!u,!!d,{x:r.currentPoint[0],y:r.currentPoint[1]},t),v=o1({x:r.prePoint[0],y:r.prePoint[1]},o,s,l,!!u,!!d,{x:r.currentPoint[0],y:r.currentPoint[1]},e?t+.005:t-.005),p=v.x-h.x,g=v.y-h.y,m=Math.sqrt(p*p+g*g);return{x:-p/m,y:-g/m}}function Ru(r){return Math.sqrt(r[0]*r[0]+r[1]*r[1])}function Ac(r,t){return Ru(r)*Ru(t)?(r[0]*t[0]+r[1]*t[1])/(Ru(r)*Ru(t)):1}function s1(r,t){return(r[0]*t[1]<r[1]*t[0]?-1:1)*Math.acos(Ac(r,t))}function jA(r,t){var e=t[1],n=t[2],i=_C(gt(t[3]),Math.PI*2),o=t[4],a=t[5],s=r[0],l=r[1],u=t[6],d=t[7],h=Math.cos(i)*(s-u)/2+Math.sin(i)*(l-d)/2,v=-1*Math.sin(i)*(s-u)/2+Math.cos(i)*(l-d)/2,p=h*h/(e*e)+v*v/(n*n);p>1&&(e*=Math.sqrt(p),n*=Math.sqrt(p));var g=e*e*(v*v)+n*n*(h*h),m=g?Math.sqrt((e*e*(n*n)-g)/g):1;o===a&&(m*=-1),isNaN(m)&&(m=0);var C=n?m*e*v/n:0,w=e?m*-n*h/e:0,_=(s+u)/2+Math.cos(i)*C-Math.sin(i)*w,S=(l+d)/2+Math.sin(i)*C+Math.cos(i)*w,b=[(h-C)/e,(v-w)/n],T=[(-1*h-C)/e,(-1*v-w)/n],E=s1([1,0],b),R=s1(b,T);return Ac(b,T)<=-1&&(R=Math.PI),Ac(b,T)>=1&&(R=0),a===0&&R>0&&(R=R-2*Math.PI),a===1&&R<0&&(R=R+2*Math.PI),{cx:_,cy:S,rx:hf(r,[u,d])?0:e,ry:hf(r,[u,d])?0:n,startAngle:E,endAngle:E+R,xRotation:i,arcFlag:o,sweepFlag:a}}var qC=function(r){if(r===""||Array.isArray(r)&&r.length===0)return{absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:{x:0,y:0,width:0,height:0}};var t;try{t=lf(r)}catch(v){t=lf(""),console.error("[g]: Invalid SVG Path definition: ".concat(r))}qA(t);var e=KA(t),n=ZA(t),i=n.polygons,o=n.polylines,a=JA(t),s=QA(a,0),l=s.x,u=s.y,d=s.width,h=s.height;return{absolutePath:t,hasArc:e,segments:a,polygons:i,polylines:o,totalLength:0,rect:{x:Number.isFinite(l)?l:0,y:Number.isFinite(u)?u:0,width:Number.isFinite(d)?d:0,height:Number.isFinite(h)?h:0}}},eN=rr(qC);function Nc(r){return tr(r)?eN(r):qC(r)}function tN(r,t,e){var n=r.curve,i=t.curve;(!n||n.length===0)&&(n=mc(r.absolutePath,!1),r.curve=n),(!i||i.length===0)&&(i=mc(t.absolutePath,!1),t.curve=i);var o=[n,i];n.length!==i.length&&(o=MC(n,i));var a=ky(o[0])!==ky(o[1])?pI(o[0]):vI(o[0]);return[a,EI(o[1],a),function(s){return s}]}function KC(r,t){var e;tr(r)?e=r.split(" ").map(function(d){var h=F(d.split(","),2),v=h[0],p=h[1];return[Number(v),Number(p)]}):e=r;var n=[],i=0,o,a,s=qI(e);e.forEach(function(d,h){e[h+1]&&(o=[0,0],o[0]=i/s,a=PC(d[0],d[1],e[h+1][0],e[h+1][1]),i+=a,o[1]=i/s,n.push(o))});var l=Math.min.apply(Math,X([],F(e.map(function(d){return d[0]})),!1)),u=Math.min.apply(Math,X([],F(e.map(function(d){return d[1]})),!1));return t&&(t.parsedStyle.defX=l,t.parsedStyle.defY=u),{points:e,totalLength:s,segments:n}}function rN(r,t){return[r.points,t.points,function(e){return e}]}var Ct=null;function Ir(r){return function(t){var e=0;return r.map(function(n){return n===Ct?t[e++]:n})}}function Io(r){return r}var cf={matrix:["NNNNNN",[Ct,Ct,0,0,Ct,Ct,0,0,0,0,1,0,Ct,Ct,0,1],Io],matrix3d:["NNNNNNNNNNNNNNNN",Io],rotate:["A"],rotatex:["A"],rotatey:["A"],rotatez:["A"],rotate3d:["NNNA"],perspective:["L"],scale:["Nn",Ir([Ct,Ct,new Gt(1)]),Io],scalex:["N",Ir([Ct,new Gt(1),new Gt(1)]),Ir([Ct,new Gt(1)])],scaley:["N",Ir([new Gt(1),Ct,new Gt(1)]),Ir([new Gt(1),Ct])],scalez:["N",Ir([new Gt(1),new Gt(1),Ct])],scale3d:["NNN",Io],skew:["Aa",null,Io],skewx:["A",null,Ir([Ct,Bn])],skewy:["A",null,Ir([Bn,Ct])],translate:["Tt",Ir([Ct,Ct,Bt]),Io],translatex:["T",Ir([Ct,Bt,Bt]),Ir([Ct,Bt])],translatey:["T",Ir([Bt,Ct,Bt]),Ir([Bt,Ct])],translatez:["L",Ir([Bt,Bt,Ct])],translate3d:["TTL",Io]};function Fv(r){if(r=(r||"none").toLowerCase().trim(),r==="none")return[];for(var t=/\s*(\w+)\(([^)]*)\)/g,e=[],n,i=0;n=t.exec(r);){if(n.index!==i)return[];i=n.index+n[0].length;var o=n[1],a=cf[o];if(!a)return[];var s=n[2].split(","),l=a[0];if(l.length<s.length)return[];for(var u=[],d=0;d<l.length;d++){var h=s[d],v=l[d],p=void 0;if(h?p={A:function(g){return g.trim()==="0"?Bn:UC(g)},N:Uo,T:$a,L:UA}[v.toUpperCase()](h):p={a:Bn,n:u[0],t:Bt}[v],p===void 0)return[];u.push(p)}if(e.push({t:o,d:u}),t.lastIndex===r.length)return e}return[]}function l1(r){if(r=(r||"none").toLowerCase().trim(),r==="none")return[];for(var t=/\s*(\w+)\(([^)]*)\)/g,e=[],n,i=0;n=t.exec(r);){if(n.index!==i)return[];i=n.index+n[0].length;var o=n[1],a=cf[o];if(!a)return[];var s=n[2].split(","),l=a[0];if(l.length<s.length)return[];for(var u=[],d=0;d<l.length;d++){var h=s[d],v=l[d],p=void 0;if(h?p={A:function(g){return g.trim()==="0"?Bn:Pv(g)},N:ns,T:Js,L:WC}[v.toUpperCase()](h):p={a:Bn,n:u[0],t:Bt}[v],p===void 0)return[];u.push(p)}if(e.push({t:o,d:u}),t.lastIndex===r.length)return e}return[]}function nN(r){var t,e,n,i;switch(r.t){case"rotatex":return i=gt(jr(r.d[0])),[1,0,0,0,0,Math.cos(i),Math.sin(i),0,0,-Math.sin(i),Math.cos(i),0,0,0,0,1];case"rotatey":return i=gt(jr(r.d[0])),[Math.cos(i),0,-Math.sin(i),0,0,1,0,0,Math.sin(i),0,Math.cos(i),0,0,0,0,1];case"rotate":case"rotatez":return i=gt(jr(r.d[0])),[Math.cos(i),Math.sin(i),0,0,-Math.sin(i),Math.cos(i),0,0,0,0,1,0,0,0,0,1];case"rotate3d":t=r.d[0].value,e=r.d[1].value,n=r.d[2].value,i=gt(jr(r.d[3]));var o=t*t+e*e+n*n;if(o===0)t=1,e=0,n=0;else if(o!==1){var a=Math.sqrt(o);t/=a,e/=a,n/=a}var s=Math.sin(i/2),l=s*Math.cos(i/2),u=s*s;return[1-2*(e*e+n*n)*u,2*(t*e*u+n*l),2*(t*n*u-e*l),0,2*(t*e*u-n*l),1-2*(t*t+n*n)*u,2*(e*n*u+t*l),0,2*(t*n*u+e*l),2*(e*n*u-t*l),1-2*(t*t+e*e)*u,0,0,0,0,1];case"scale":return[r.d[0].value,0,0,0,0,r.d[1].value,0,0,0,0,1,0,0,0,0,1];case"scalex":return[r.d[0].value,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];case"scaley":return[1,0,0,0,0,r.d[0].value,0,0,0,0,1,0,0,0,0,1];case"scalez":return[1,0,0,0,0,1,0,0,0,0,r.d[0].value,0,0,0,0,1];case"scale3d":return[r.d[0].value,0,0,0,0,r.d[1].value,0,0,0,0,r.d[2].value,0,0,0,0,1];case"skew":var d=gt(jr(r.d[0])),h=gt(jr(r.d[1]));return[1,Math.tan(h),0,0,Math.tan(d),1,0,0,0,0,1,0,0,0,0,1];case"skewx":return i=gt(jr(r.d[0])),[1,0,0,0,Math.tan(i),1,0,0,0,0,1,0,0,0,0,1];case"skewy":return i=gt(jr(r.d[0])),[1,Math.tan(i),0,0,0,1,0,0,0,0,1,0,0,0,0,1];case"translate":return t=Zr(r.d[0],0,null)||0,e=Zr(r.d[1],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,t,e,0,1];case"translatex":return t=Zr(r.d[0],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,t,0,0,1];case"translatey":return e=Zr(r.d[0],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,0,e,0,1];case"translatez":return n=Zr(r.d[0],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,n,1];case"translate3d":return t=Zr(r.d[0],0,null)||0,e=Zr(r.d[1],0,null)||0,n=Zr(r.d[2],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,t,e,n,1];case"perspective":var v=Zr(r.d[0],0,null)||0,p=v?-1/v:0;return[1,0,0,0,0,1,0,0,0,0,1,p,0,0,0,1];case"matrix":return[r.d[0].value,r.d[1].value,0,0,r.d[2].value,r.d[3].value,0,0,0,0,1,0,r.d[4].value,r.d[5].value,0,1];case"matrix3d":return r.d.map(function(g){return g.value})}}function iN(r,t){return[r[0]*t[0]+r[4]*t[1]+r[8]*t[2]+r[12]*t[3],r[1]*t[0]+r[5]*t[1]+r[9]*t[2]+r[13]*t[3],r[2]*t[0]+r[6]*t[1]+r[10]*t[2]+r[14]*t[3],r[3]*t[0]+r[7]*t[1]+r[11]*t[2]+r[15]*t[3],r[0]*t[4]+r[4]*t[5]+r[8]*t[6]+r[12]*t[7],r[1]*t[4]+r[5]*t[5]+r[9]*t[6]+r[13]*t[7],r[2]*t[4]+r[6]*t[5]+r[10]*t[6]+r[14]*t[7],r[3]*t[4]+r[7]*t[5]+r[11]*t[6]+r[15]*t[7],r[0]*t[8]+r[4]*t[9]+r[8]*t[10]+r[12]*t[11],r[1]*t[8]+r[5]*t[9]+r[9]*t[10]+r[13]*t[11],r[2]*t[8]+r[6]*t[9]+r[10]*t[10]+r[14]*t[11],r[3]*t[8]+r[7]*t[9]+r[11]*t[10]+r[15]*t[11],r[0]*t[12]+r[4]*t[13]+r[8]*t[14]+r[12]*t[15],r[1]*t[12]+r[5]*t[13]+r[9]*t[14]+r[13]*t[15],r[2]*t[12]+r[6]*t[13]+r[10]*t[14]+r[14]*t[15],r[3]*t[12]+r[7]*t[13]+r[11]*t[14]+r[15]*t[15]]}function oN(r){return r.length===0?[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]:r.map(nN).reduce(iN)}function u1(r){var t=[0,0,0],e=[1,1,1],n=[0,0,0],i=[0,0,0,1],o=[0,0,0,1];return lA(oN(r),t,e,n,i,o),[[t,e,n,o,i]]}var aN=function(){function r(n,i){for(var o=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],a=0;a<4;a++)for(var s=0;s<4;s++)for(var l=0;l<4;l++)o[a][s]+=i[a][l]*n[l][s];return o}function t(n){return n[0][2]==0&&n[0][3]==0&&n[1][2]==0&&n[1][3]==0&&n[2][0]==0&&n[2][1]==0&&n[2][2]==1&&n[2][3]==0&&n[3][2]==0&&n[3][3]==1}function e(n,i,o,a,s){for(var l=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],u=0;u<4;u++)l[u][3]=s[u];for(var u=0;u<3;u++)for(var d=0;d<3;d++)l[3][u]+=n[d]*l[d][u];var h=a[0],v=a[1],p=a[2],g=a[3],m=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];m[0][0]=1-2*(v*v+p*p),m[0][1]=2*(h*v-p*g),m[0][2]=2*(h*p+v*g),m[1][0]=2*(h*v+p*g),m[1][1]=1-2*(h*h+p*p),m[1][2]=2*(v*p-h*g),m[2][0]=2*(h*p-v*g),m[2][1]=2*(v*p+h*g),m[2][2]=1-2*(h*h+v*v),l=r(l,m);var C=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];o[2]&&(C[2][1]=o[2],l=r(l,C)),o[1]&&(C[2][1]=0,C[2][0]=o[0],l=r(l,C)),o[0]&&(C[2][0]=0,C[1][0]=o[0],l=r(l,C));for(var u=0;u<3;u++)for(var d=0;d<3;d++)l[u][d]*=i[u];return t(l)?[l[0][0],l[0][1],l[1][0],l[1][1],l[3][0],l[3][1]]:l[0].concat(l[1],l[2],l[3])}return e}();function sN(r){return r.toFixed(6).replace(".000000","")}function qh(r,t){var e,n;return r.decompositionPair!==t&&(r.decompositionPair=t,e=u1(r)),t.decompositionPair!==r&&(t.decompositionPair=r,n=u1(t)),e[0]===null||n[0]===null?[[!1],[!0],function(i){return i?t[0].d:r[0].d}]:(e[0].push(0),n[0].push(1),[e,n,function(i){var o=uN(e[0][3],n[0][3],i[5]),a=aN(i[0],i[1],i[2],o,i[4]),s=a.map(sN).join(",");return s}])}function lN(r,t){for(var e=0,n=0;n<r.length;n++)e+=r[n]*t[n];return e}function uN(r,t,e){var n=lN(r,t);n=tn(n,-1,1);var i=[];if(n===1)i=r;else for(var o=Math.acos(n),a=Math.sin(e*o)*1/Math.sqrt(1-n*n),s=0;s<4;s++)i.push(r[s]*(Math.cos(e*o)-n*a)+t[s]*a);return i}function Kh(r){return r.replace(/[xy]/,"")}function Zh(r){return r.replace(/(x|y|z|3d)?$/,"3d")}var fN=function(r,t){return r==="perspective"&&t==="perspective"||(r==="matrix"||r==="matrix3d")&&(t==="matrix"||t==="matrix3d")};function dN(r,t,e){var n=!1;if(!r.length||!t.length){r.length||(n=!0,r=t,t=[]);for(var i=function(E){var R=r[E],O=R.t,A=R.d,P=O.substring(0,5)==="scale"?1:0;t.push({t:O,d:A.map(function(D){return typeof D=="number"?tt(P):tt(P,D.unit)})})},o=0;o<r.length;o++)i(o)}var a=[],s=[],l=[];if(r.length!==t.length){var u=qh(r,t);a=[u[0]],s=[u[1]],l=[["matrix",[u[2]]]]}else for(var o=0;o<r.length;o++){var d=r[o].t,h=t[o].t,v=r[o].d,p=t[o].d,g=cf[d],m=cf[h],C=void 0;if(fN(d,h)){var u=qh([r[o]],[t[o]]);a.push(u[0]),s.push(u[1]),l.push(["matrix",[u[2]]]);continue}else if(d===h)C=d;else if(g[2]&&m[2]&&Kh(d)===Kh(h))C=Kh(d),v=g[2](v),p=m[2](p);else if(g[1]&&m[1]&&Zh(d)===Zh(h))C=Zh(d),v=g[1](v),p=m[1](p);else{var u=qh(r,t);a=[u[0]],s=[u[1]],l=[["matrix",[u[2]]]];break}for(var w=[],_=[],S=[],b=0;b<v.length;b++){var u=YA(v[b],p[b],e,!1,b);w[b]=u[0],_[b]=u[1],S.push(u[2])}a.push(w),s.push(_),l.push([C,S])}if(n){var T=a;a=s,s=T}return[a,s,function(E){return E.map(function(R,O){var A=R.map(function(P,D){return l[O][1][D](P)}).join(",");return l[O][0]==="matrix"&&A.split(",").length===16&&(l[O][0]="matrix3d"),l[O][0]==="matrix3d"&&A.split(",").length===6&&(l[O][0]="matrix"),l[O][0]+"("+A+")"}).join(" ")}]}var ZC=rr(function(r){if(tr(r)){if(r==="text-anchor")return[tt(0,"px"),tt(0,"px")];var t=r.split(" ");return t.length===1&&(t[0]==="top"||t[0]==="bottom"?(t[1]=t[0],t[0]="center"):t[1]="center"),t.length!==2?null:[$a(vf(t[0])),$a(vf(t[1]))]}else return[tt(r[0]||0,"px"),tt(r[1]||0,"px")]}),hN=function(r){if(tr(r)){if(r==="text-anchor")return[tt(0,"px"),tt(0,"px")];var t=r.split(" ");return t.length===1&&(t[0]==="top"||t[0]==="bottom"?(t[1]=t[0],t[0]="center"):t[1]="center"),t.length!==2?null:[Js(vf(t[0])),Js(vf(t[1]))]}else return[tt(r[0]||0,"px"),tt(r[1]||0,"px")]};function vf(r){return r==="center"?"50%":r==="left"||r==="top"?"0":r==="right"||r==="bottom"?"100%":r}var kv=[{n:"display",k:["none"]},{n:"opacity",int:!0,inh:!0,d:"1",syntax:ue.OPACITY_VALUE},{n:"fillOpacity",int:!0,inh:!0,d:"1",syntax:ue.OPACITY_VALUE},{n:"strokeOpacity",int:!0,inh:!0,d:"1",syntax:ue.OPACITY_VALUE},{n:"fill",int:!0,k:["none"],d:"none",syntax:ue.PAINT},{n:"fillRule",k:["nonzero","evenodd"],d:"nonzero"},{n:"stroke",int:!0,k:["none"],d:"none",syntax:ue.PAINT,l:!0},{n:"shadowType",k:["inner","outer","both"],d:"outer",l:!0},{n:"shadowColor",int:!0,syntax:ue.COLOR},{n:"shadowOffsetX",int:!0,l:!0,d:"0",syntax:ue.LENGTH_PERCENTAGE},{n:"shadowOffsetY",int:!0,l:!0,d:"0",syntax:ue.LENGTH_PERCENTAGE},{n:"shadowBlur",int:!0,l:!0,d:"0",syntax:ue.SHADOW_BLUR},{n:"lineWidth",int:!0,inh:!0,d:"1",l:!0,a:["strokeWidth"],syntax:ue.LENGTH_PERCENTAGE},{n:"increasedLineWidthForHitTesting",inh:!0,d:"0",l:!0,syntax:ue.LENGTH_PERCENTAGE},{n:"lineJoin",inh:!0,l:!0,a:["strokeLinejoin"],k:["miter","bevel","round"],d:"miter"},{n:"lineCap",inh:!0,l:!0,a:["strokeLinecap"],k:["butt","round","square"],d:"butt"},{n:"lineDash",int:!0,inh:!0,k:["none"],a:["strokeDasharray"],syntax:ue.LENGTH_PERCENTAGE_12},{n:"lineDashOffset",int:!0,inh:!0,d:"0",a:["strokeDashoffset"],syntax:ue.LENGTH_PERCENTAGE},{n:"offsetPath",syntax:ue.DEFINED_PATH},{n:"offsetDistance",int:!0,syntax:ue.OFFSET_DISTANCE},{n:"dx",int:!0,l:!0,d:"0",syntax:ue.LENGTH_PERCENTAGE},{n:"dy",int:!0,l:!0,d:"0",syntax:ue.LENGTH_PERCENTAGE},{n:"zIndex",ind:!0,int:!0,d:"0",k:["auto"],syntax:ue.Z_INDEX},{n:"visibility",k:["visible","hidden"],ind:!0,inh:!0,int:!0,d:"visible"},{n:"pointerEvents",inh:!0,k:["none","auto","stroke","fill","painted","visible","visiblestroke","visiblefill","visiblepainted","all"],d:"auto"},{n:"filter",ind:!0,l:!0,k:["none"],d:"none",syntax:ue.FILTER},{n:"clipPath",syntax:ue.DEFINED_PATH},{n:"textPath",syntax:ue.DEFINED_PATH},{n:"textPathSide",k:["left","right"],d:"left"},{n:"textPathStartOffset",l:!0,d:"0",syntax:ue.LENGTH_PERCENTAGE},{n:"transform",p:100,int:!0,k:["none"],d:"none",syntax:ue.TRANSFORM},{n:"transformOrigin",p:100,d:function(r){return r===$.CIRCLE||r===$.ELLIPSE?"center":r===$.TEXT?"text-anchor":"left top"},l:!0,syntax:ue.TRANSFORM_ORIGIN},{n:"anchor",p:99,d:function(r){return r===$.CIRCLE||r===$.ELLIPSE?"0.5 0.5":"0 0"},l:!0,syntax:ue.LENGTH_PERCENTAGE_12},{n:"cx",int:!0,d:"0",syntax:ue.COORDINATE},{n:"cy",int:!0,d:"0",syntax:ue.COORDINATE},{n:"cz",int:!0,d:"0",syntax:ue.COORDINATE},{n:"r",int:!0,l:!0,d:"0",syntax:ue.LENGTH_PERCENTAGE},{n:"rx",int:!0,l:!0,d:"0",syntax:ue.LENGTH_PERCENTAGE},{n:"ry",int:!0,l:!0,d:"0",syntax:ue.LENGTH_PERCENTAGE},{n:"x",int:!0,d:"0",syntax:ue.COORDINATE},{n:"y",int:!0,d:"0",syntax:ue.COORDINATE},{n:"z",int:!0,d:"0",syntax:ue.COORDINATE},{n:"width",int:!0,l:!0,k:["auto","fit-content","min-content","max-content"],d:"0",syntax:ue.LENGTH_PERCENTAGE},{n:"height",int:!0,l:!0,k:["auto","fit-content","min-content","max-content"],d:"0",syntax:ue.LENGTH_PERCENTAGE},{n:"radius",int:!0,l:!0,d:"0",syntax:ue.LENGTH_PERCENTAGE_14},{n:"x1",int:!0,l:!0,syntax:ue.COORDINATE},{n:"y1",int:!0,l:!0,syntax:ue.COORDINATE},{n:"z1",int:!0,l:!0,syntax:ue.COORDINATE},{n:"x2",int:!0,l:!0,syntax:ue.COORDINATE},{n:"y2",int:!0,l:!0,syntax:ue.COORDINATE},{n:"z2",int:!0,l:!0,syntax:ue.COORDINATE},{n:"path",int:!0,l:!0,d:"",a:["d"],syntax:ue.PATH,p:50},{n:"points",int:!0,l:!0,syntax:ue.LIST_OF_POINTS,p:50},{n:"text",l:!0,d:"",syntax:ue.TEXT,p:50},{n:"textTransform",l:!0,inh:!0,k:["capitalize","uppercase","lowercase","none"],d:"none",syntax:ue.TEXT_TRANSFORM,p:51},{n:"font",l:!0},{n:"fontSize",int:!0,inh:!0,d:"16px",l:!0,syntax:ue.LENGTH_PERCENTAGE},{n:"fontFamily",l:!0,inh:!0,d:"sans-serif"},{n:"fontStyle",l:!0,inh:!0,k:["normal","italic","oblique"],d:"normal"},{n:"fontWeight",l:!0,inh:!0,k:["normal","bold","bolder","lighter"],d:"normal"},{n:"fontVariant",l:!0,inh:!0,k:["normal","small-caps"],d:"normal"},{n:"lineHeight",l:!0,syntax:ue.LENGTH,int:!0,d:"0"},{n:"letterSpacing",l:!0,syntax:ue.LENGTH,int:!0,d:"0"},{n:"miterLimit",l:!0,syntax:ue.NUMBER,d:function(r){return r===$.PATH||r===$.POLYGON||r===$.POLYLINE?"4":"10"}},{n:"wordWrap",l:!0},{n:"wordWrapWidth",l:!0},{n:"maxLines",l:!0},{n:"textOverflow",l:!0,d:"clip"},{n:"leading",l:!0},{n:"textBaseline",l:!0,inh:!0,k:["top","hanging","middle","alphabetic","ideographic","bottom"],d:"alphabetic"},{n:"textAlign",l:!0,inh:!0,k:["start","center","middle","end","left","right"],d:"start"},{n:"markerStart",syntax:ue.MARKER},{n:"markerEnd",syntax:ue.MARKER},{n:"markerMid",syntax:ue.MARKER},{n:"markerStartOffset",syntax:ue.LENGTH,l:!0,int:!0,d:"0"},{n:"markerEndOffset",syntax:ue.LENGTH,l:!0,int:!0,d:"0"}],f1=kv.filter(function(r){return!!r.l}).map(function(r){return r.n}),Qi={},La=new WeakMap,cN=function(r,t){var e=La.get(r);return!e||e.length===0?!0:e.includes(t)},vN=function(){function r(t){var e=this;this.runtime=t,kv.forEach(function(n){e.registerMetadata(n)})}return r.prototype.registerMetadata=function(t){X([t.n],F(t.a||[]),!1).forEach(function(e){Qi[e]=t})},r.prototype.unregisterMetadata=function(t){delete Qi[t]},r.prototype.getPropertySyntax=function(t){return this.runtime.CSSPropertySyntaxFactory[t]},r.prototype.processProperties=function(t,e,n){var i=this;if(n===void 0&&(n={skipUpdateAttribute:!1,skipParse:!1,forceUpdateGeometry:!1,usedAttributes:[],memoize:!0}),!this.runtime.enableCSSParsing){Object.assign(t.attributes,e);var o=Object.keys(e),a=t.parsedStyle.clipPath,s=t.parsedStyle.offsetPath;t.parsedStyle=Object.assign(t.parsedStyle,e);var l=!!n.forceUpdateGeometry;if(!l){for(var u=0;u<f1.length;u++)if(f1[u]in e){l=!0;break}}e.fill&&(t.parsedStyle.fill=za(e.fill)),e.stroke&&(t.parsedStyle.stroke=za(e.stroke)),e.shadowColor&&(t.parsedStyle.shadowColor=za(e.shadowColor)),e.filter&&(t.parsedStyle.filter=YC(e.filter)),de(e.radius)||(t.parsedStyle.radius=$h(e.radius,4)),de(e.lineDash)||(t.parsedStyle.lineDash=$h(e.lineDash,2)),e.points&&(t.parsedStyle.points=KC(e.points,t)),e.path===""&&(t.parsedStyle.path=N({},zC)),e.path&&(t.parsedStyle.path=Nc(e.path),t.parsedStyle.defX=t.parsedStyle.path.rect.x,t.parsedStyle.defY=t.parsedStyle.path.rect.y),e.textTransform&&this.runtime.CSSPropertySyntaxFactory["<text-transform>"].calculator(null,null,{value:e.textTransform},t,null),e.clipPath&&this.runtime.CSSPropertySyntaxFactory["<defined-path>"].calculator("clipPath",a,e.clipPath,t,this.runtime),e.offsetPath&&this.runtime.CSSPropertySyntaxFactory["<defined-path>"].calculator("offsetPath",s,e.offsetPath,t,this.runtime),e.anchor&&(t.parsedStyle.anchor=$h(e.anchor,2)),e.transform&&(t.parsedStyle.transform=Fv(e.transform)),e.transformOrigin&&(t.parsedStyle.transformOrigin=ZC(e.transformOrigin)),e.markerStart&&(t.parsedStyle.markerStart=this.runtime.CSSPropertySyntaxFactory["<marker>"].calculator(null,e.markerStart,e.markerStart,null,null)),e.markerEnd&&(t.parsedStyle.markerEnd=this.runtime.CSSPropertySyntaxFactory["<marker>"].calculator(null,e.markerEnd,e.markerEnd,null,null)),e.markerMid&&(t.parsedStyle.markerMid=this.runtime.CSSPropertySyntaxFactory["<marker>"].calculator("",e.markerMid,e.markerMid,null,null)),((t.nodeName===$.CIRCLE||t.nodeName===$.ELLIPSE)&&(!de(e.cx)||!de(e.cy))||(t.nodeName===$.RECT||t.nodeName===$.IMAGE||t.nodeName===$.GROUP||t.nodeName===$.HTML||t.nodeName===$.TEXT||t.nodeName===$.MESH)&&(!de(e.x)||!de(e.y)||!de(e.z))||t.nodeName===$.LINE&&(!de(e.x1)||!de(e.y1)||!de(e.z1)||!de(e.x2)||!de(e.y2)||!de(e.z2)))&&this.runtime.CSSPropertySyntaxFactory["<coordinate>"].postProcessor(t,o),de(e.zIndex)||this.runtime.CSSPropertySyntaxFactory["<z-index>"].postProcessor(t,o),e.path&&this.runtime.CSSPropertySyntaxFactory["<path>"].postProcessor(t,o),e.points&&this.runtime.CSSPropertySyntaxFactory["<list-of-points>"].postProcessor(t,o),de(e.offsetDistance)||this.runtime.CSSPropertySyntaxFactory["<offset-distance>"].postProcessor(t,o),e.transform&&this.runtime.CSSPropertySyntaxFactory["<transform>"].postProcessor(t,o),l&&this.updateGeometry(t);return}var d=n.skipUpdateAttribute,h=n.skipParse,v=n.forceUpdateGeometry,p=n.usedAttributes,g=n.memoize,m=v,C=Object.keys(e);C.forEach(function(w){var _;d||(t.attributes[w]=e[w]),!m&&((_=Qi[w])===null||_===void 0?void 0:_.l)&&(m=!0)}),h||C.forEach(function(w){t.computedStyle[w]=i.parseProperty(w,t.attributes[w],t,g)}),p!=null&&p.length&&(C=Array.from(new Set(C.concat(p)))),C.forEach(function(w){w in t.computedStyle&&(t.parsedStyle[w]=i.computeProperty(w,t.computedStyle[w],t,g))}),m&&this.updateGeometry(t),C.forEach(function(w){w in t.parsedStyle&&i.postProcessProperty(w,t,C)}),this.runtime.enableCSSParsing&&t.children.length&&C.forEach(function(w){w in t.parsedStyle&&i.isPropertyInheritable(w)&&t.children.forEach(function(_){_.internalSetAttribute(w,null,{skipUpdateAttribute:!0,skipParse:!0})})})},r.prototype.parseProperty=function(t,e,n,i){var o=Qi[t],a=e;if((e===""||de(e))&&(e="unset"),e==="unset"||e==="initial"||e==="inherit")a=Rc(e);else if(o){var s=o.k,l=o.syntax,u=l&&this.getPropertySyntax(l);s&&s.indexOf(e)>-1?a=Rc(e):u&&(!i&&u.parserUnmemoize?a=u.parserUnmemoize(e,n):u.parser&&(a=u.parser(e,n)))}return a},r.prototype.computeProperty=function(t,e,n,i){var o=Qi[t],a=n.id==="g-root",s=e;if(o){var l=o.syntax,u=o.inh,d=o.d;if(e instanceof Fr){var h=e.value;if(h==="unset"&&(u&&!a?h="inherit":h="initial"),h==="initial")de(d)||(e=this.parseProperty(t,Oa(d)?d(n.nodeName):d,n,i));else if(h==="inherit"){var v=this.tryToResolveProperty(n,t,{inherited:!0});if(de(v)){this.addUnresolveProperty(n,t);return}else return v}}var p=l&&this.getPropertySyntax(l);if(p&&p.calculator){var g=n.parsedStyle[t];s=p.calculator(t,g,e,n,this.runtime)}else e instanceof Fr?s=e.value:s=e}return s},r.prototype.postProcessProperty=function(t,e,n){var i=Qi[t];if(i&&i.syntax){var o=i.syntax&&this.getPropertySyntax(i.syntax),a=o;a&&a.postProcessor&&a.postProcessor(e,n)}},r.prototype.addUnresolveProperty=function(t,e){var n=La.get(t);n||(La.set(t,[]),n=La.get(t)),n.indexOf(e)===-1&&n.push(e)},r.prototype.tryToResolveProperty=function(t,e,n){n===void 0&&(n={});var i=n.inherited;if(i&&t.parentElement&&cN(t.parentElement,e)){var o=t.parentElement.parsedStyle[e];return o==="unset"||o==="initial"||o==="inherit"?void 0:o}},r.prototype.recalc=function(t){var e=La.get(t);if(e&&e.length){var n={};e.forEach(function(i){n[i]=t.attributes[i]}),this.processProperties(t,n),La.delete(t)}},r.prototype.updateGeometry=function(t){var e=t.nodeName,n=this.runtime.geometryUpdaterFactory[e];if(n){var i=t.geometry;i.contentBounds||(i.contentBounds=new Mt),i.renderBounds||(i.renderBounds=new Mt);var o=t.parsedStyle,a=n.update(o,t),s=a.width,l=a.height,u=a.depth,d=u===void 0?0:u,h=a.offsetX,v=h===void 0?0:h,p=a.offsetY,g=p===void 0?0:p,m=a.offsetZ,C=m===void 0?0:m,w=[Math.abs(s)/2,Math.abs(l)/2,d/2],_=o,S=_.stroke,b=_.lineWidth,T=_.increasedLineWidthForHitTesting,E=_.shadowType,R=_.shadowColor,O=_.filter,A=O===void 0?[]:O,P=_.transformOrigin,D=o.anchor;e===$.TEXT?delete o.anchor:e===$.MESH&&(o.anchor[2]=.5);var k=[(1-(D&&D[0]||0)*2)*s/2+v,(1-(D&&D[1]||0)*2)*l/2+g,(1-(D&&D[2]||0)*2)*w[2]+C];i.contentBounds.update(k,w);var z=e===$.POLYLINE||e===$.POLYGON||e===$.PATH?Math.SQRT2:.5,V=S&&!S.isNone;if(V){var Z=((b||0)+(T||0))*z;w[0]+=Z,w[1]+=Z}if(i.renderBounds.update(k,w),R&&E&&E!=="inner"){var Q=i.renderBounds,Y=Q.min,te=Q.max,ae=o,pe=ae.shadowBlur,Ee=ae.shadowOffsetX,me=ae.shadowOffsetY,Ze=pe||0,Ge=Ee||0,Ye=me||0,Fe=Y[0]-Ze+Ge,nr=te[0]+Ze+Ge,At=Y[1]-Ze+Ye,Sr=te[1]+Ze+Ye;Y[0]=Math.min(Y[0],Fe),te[0]=Math.max(te[0],nr),Y[1]=Math.min(Y[1],At),te[1]=Math.max(te[1],Sr),i.renderBounds.setMinMax(Y,te)}A.forEach(function(Tr){var Gi=Tr.name,sa=Tr.params;if(Gi==="blur"){var on=sa[0].value;i.renderBounds.update(i.renderBounds.center,Qu(i.renderBounds.halfExtents,i.renderBounds.halfExtents,[on,on,0]))}else if(Gi==="drop-shadow"){var us=sa[0].value,Nl=sa[1].value,Zn=sa[2].value,br=i.renderBounds,Wr=br.min,an=br.max,pd=Wr[0]-Zn+us,wo=an[0]+Zn+us,gd=Wr[1]-Zn+Nl,xo=an[1]+Zn+Nl;Wr[0]=Math.min(Wr[0],pd),an[0]=Math.max(an[0],wo),Wr[1]=Math.min(Wr[1],gd),an[1]=Math.max(an[1],xo),i.renderBounds.setMinMax(Wr,an)}}),D=o.anchor;var dr=s<0,Tn=l<0,Kn=(dr?-1:1)*(P?Zr(P[0],0,t):0),aa=(Tn?-1:1)*(P?Zr(P[1],1,t):0);Kn=Kn-(dr?-1:1)*(D&&D[0]||0)*i.contentBounds.halfExtents[0]*2,aa=aa-(Tn?-1:1)*(D&&D[1]||0)*i.contentBounds.halfExtents[1]*2,t.setOrigin(Kn,aa),this.runtime.sceneGraphService.dirtifyToRoot(t)}},r.prototype.updateSizeAttenuation=function(t,e){t.style.isSizeAttenuation?(t.style.rawLineWidth||(t.style.rawLineWidth=t.style.lineWidth),t.style.lineWidth=t.style.rawLineWidth/e,t.nodeName===$.CIRCLE&&(t.style.rawR||(t.style.rawR=t.style.r),t.style.r=t.style.rawR/e)):(t.style.rawLineWidth&&(t.style.lineWidth=t.style.rawLineWidth,delete t.style.rawLineWidth),t.nodeName===$.CIRCLE&&t.style.rawR&&(t.style.r=t.style.rawR,delete t.style.rawR))},r.prototype.isPropertyInheritable=function(t){var e=Qi[t];return e?e.inh:!1},r}(),pN=function(){function r(){this.parser=UC,this.parserUnmemoize=Pv,this.parserWithCSSDisabled=null,this.mixer=Bv}return r.prototype.calculator=function(t,e,n,i){return jr(n)},r}(),gN=function(){function r(){}return r.prototype.calculator=function(t,e,n,i,o){return n instanceof Fr&&(n=null),o.sceneGraphService.updateDisplayObjectDependency(t,e,n,i),t==="clipPath"&&i.forEach(function(a){a.childNodes.length===0&&o.sceneGraphService.dirtifyToRoot(a)}),n},r}(),yN=function(){function r(){this.parser=za,this.parserWithCSSDisabled=za,this.mixer=WA}return r.prototype.calculator=function(t,e,n,i){return n instanceof Fr?n.value==="none"?Mc:HC:n},r}(),mN=function(){function r(){this.parser=YC}return r.prototype.calculator=function(t,e,n){return n instanceof Fr?[]:n},r}();function d1(r){var t=r.parsedStyle.fontSize;return de(t)?null:t}var Hv=function(){function r(){this.parser=$a,this.parserUnmemoize=Js,this.parserWithCSSDisabled=null,this.mixer=Bv}return r.prototype.calculator=function(t,e,n,i,o){var a;if(Wn(n))return n;if(Gt.isRelativeUnit(n.unit)){var s=o.styleValueRegistry;if(n.unit===le.kPercentage)return 0;if(n.unit===le.kEms){if(i.parentNode){var l=d1(i.parentNode);if(l)return l*=n.value,l;s.addUnresolveProperty(i,t)}else s.addUnresolveProperty(i,t);return 0}else if(n.unit===le.kRems){if(!((a=i==null?void 0:i.ownerDocument)===null||a===void 0)&&a.documentElement){var l=d1(i.ownerDocument.documentElement);if(l)return l*=n.value,l;s.addUnresolveProperty(i,t)}else s.addUnresolveProperty(i,t);return 0}}else return n.value},r}(),CN=function(){function r(){this.mixer=$C}return r.prototype.parser=function(t){var e=VC(Wn(t)?[t]:t),n;return e.length===1?n=[e[0],e[0]]:n=[e[0],e[1]],n},r.prototype.calculator=function(t,e,n){return n.map(function(i){return i.value})},r}(),wN=function(){function r(){this.mixer=$C}return r.prototype.parser=function(t){var e=VC(Wn(t)?[t]:t),n;return e.length===1?n=[e[0],e[0],e[0],e[0]]:e.length===2?n=[e[0],e[1],e[0],e[1]]:e.length===3?n=[e[0],e[1],e[2],e[1]]:n=[e[0],e[1],e[2],e[3]],n},r.prototype.calculator=function(t,e,n){return n.map(function(i){return i.value})},r}(),Rs=it();function zv(r,t){var e=t.parsedStyle.defX||0,n=t.parsedStyle.defY||0;return t.resetLocalTransform(),t.setLocalPosition(e,n),r.forEach(function(i){var o=i.t,a=i.d;if(o==="scale"){var s=(a==null?void 0:a.map(function(_){return _.value}))||[1,1];t.scaleLocal(s[0],s[1],1)}else if(o==="scalex"){var s=(a==null?void 0:a.map(function(S){return S.value}))||[1];t.scaleLocal(s[0],1,1)}else if(o==="scaley"){var s=(a==null?void 0:a.map(function(S){return S.value}))||[1];t.scaleLocal(1,s[0],1)}else if(o==="scalez"){var s=(a==null?void 0:a.map(function(S){return S.value}))||[1];t.scaleLocal(1,1,s[0])}else if(o==="scale3d"){var s=(a==null?void 0:a.map(function(S){return S.value}))||[1,1,1];t.scaleLocal(s[0],s[1],s[2])}else if(o==="translate"){var l=a||[Bt,Bt];t.translateLocal(l[0].value,l[1].value,0)}else if(o==="translatex"){var l=a||[Bt];t.translateLocal(l[0].value,0,0)}else if(o==="translatey"){var l=a||[Bt];t.translateLocal(0,l[0].value,0)}else if(o==="translatez"){var l=a||[Bt];t.translateLocal(0,0,l[0].value)}else if(o==="translate3d"){var l=a||[Bt,Bt,Bt];t.translateLocal(l[0].value,l[1].value,l[2].value)}else if(o==="rotate"){var u=a||[Bn];t.rotateLocal(0,0,jr(u[0]))}else if(o==="rotatex"){var u=a||[Bn];t.rotateLocal(jr(u[0]),0,0)}else if(o==="rotatey"){var u=a||[Bn];t.rotateLocal(0,jr(u[0]),0)}else if(o==="rotatez"){var u=a||[Bn];t.rotateLocal(0,0,jr(u[0]))}else if(o!=="rotate3d")if(o==="skew"){var d=(a==null?void 0:a.map(function(_){return _.value}))||[0,0];t.setLocalSkew(gt(d[0]),gt(d[1]))}else if(o==="skewx"){var d=(a==null?void 0:a.map(function(S){return S.value}))||[0];t.setLocalSkew(gt(d[0]),t.getLocalSkew()[1])}else if(o==="skewy"){var d=(a==null?void 0:a.map(function(S){return S.value}))||[0];t.setLocalSkew(t.getLocalSkew()[0],gt(d[0]))}else if(o==="matrix"){var h=F(a.map(function(_){return _.value}),6),v=h[0],p=h[1],g=h[2],m=h[3],C=h[4],w=h[5];t.setLocalTransform(pc(Rs,v,p,0,0,g,m,0,0,0,0,1,0,C+e,w+n,0,1))}else o==="matrix3d"&&(pc.apply(DO,X([Rs],F(a.map(function(_){return _.value})),!1)),Rs[12]+=e,Rs[13]+=n,t.setLocalTransform(Rs))}),t.getLocalTransform()}var xN=function(r){oe(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.postProcessor=function(e,n){var i,o,a;switch(e.nodeName){case $.CIRCLE:case $.ELLIPSE:var s=e.parsedStyle,l=s.cx,u=s.cy,d=s.cz;de(l)||(i=l),de(u)||(o=u),de(d)||(a=d);break;case $.LINE:var h=e.parsedStyle,v=h.x1,p=h.x2,g=h.y1,m=h.y2,C=Math.min(v,p),w=Math.min(g,m);i=C,o=w,a=0;break;case $.RECT:case $.IMAGE:case $.GROUP:case $.HTML:case $.TEXT:case $.MESH:de(e.parsedStyle.x)||(i=e.parsedStyle.x),de(e.parsedStyle.y)||(o=e.parsedStyle.y),de(e.parsedStyle.z)||(a=e.parsedStyle.z);break}e.nodeName!==$.PATH&&e.nodeName!==$.POLYLINE&&e.nodeName!==$.POLYGON&&(e.parsedStyle.defX=i||0,e.parsedStyle.defY=o||0);var _=!de(i)||!de(o)||!de(a);if(_&&n.indexOf("transform")===-1){var S=e.parsedStyle.transform;if(S&&S.length)zv(S,e);else{var b=F(e.getLocalPosition(),3),T=b[0],E=b[1],R=b[2];e.setLocalPosition(de(i)?T:i,de(o)?E:o,de(a)?R:a)}}},t}(Hv),_N=function(){function r(){}return r.prototype.calculator=function(t,e,n,i){n instanceof Fr&&(n=null);var o=n==null?void 0:n.cloneNode(!0);return o&&(o.style.isMarker=!0),o},r}(),EN=function(){function r(){this.mixer=Bv,this.parser=Uo,this.parserUnmemoize=ns,this.parserWithCSSDisabled=null}return r.prototype.calculator=function(t,e,n){return n.value},r}(),SN=function(){function r(){this.parser=Uo,this.parserUnmemoize=ns,this.parserWithCSSDisabled=null,this.mixer=Dv(0,1)}return r.prototype.calculator=function(t,e,n){return n.value},r.prototype.postProcessor=function(t){var e=t.parsedStyle,n=e.offsetPath,i=e.offsetDistance;if(!!n){var o=n.nodeName;if(o===$.LINE||o===$.PATH||o===$.POLYLINE){var a=n.getPoint(i);a&&(t.parsedStyle.defX=a.x,t.parsedStyle.defY=a.y,t.setLocalPosition(a.x,a.y))}}},r}(),TN=function(){function r(){this.parser=Uo,this.parserUnmemoize=ns,this.parserWithCSSDisabled=null,this.mixer=Dv(0,1)}return r.prototype.calculator=function(t,e,n){return n.value},r}(),bN=function(){function r(){this.parser=Nc,this.parserWithCSSDisabled=Nc,this.mixer=tN}return r.prototype.calculator=function(t,e,n){return n instanceof Fr&&n.value==="unset"?{absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:new Wo(0,0,0,0)}:n},r.prototype.postProcessor=function(t,e){if(t.parsedStyle.defX=t.parsedStyle.path.rect.x,t.parsedStyle.defY=t.parsedStyle.path.rect.y,t.nodeName===$.PATH&&e.indexOf("transform")===-1){var n=t.parsedStyle,i=n.defX,o=i===void 0?0:i,a=n.defY,s=a===void 0?0:a;t.setLocalPosition(o,s)}},r}(),LN=function(){function r(){this.parser=KC,this.mixer=rN}return r.prototype.postProcessor=function(t,e){if((t.nodeName===$.POLYGON||t.nodeName===$.POLYLINE)&&e.indexOf("transform")===-1){var n=t.parsedStyle,i=n.defX,o=n.defY;t.setLocalPosition(i,o)}},r}(),RN=function(r){oe(t,r);function t(){var e=r.apply(this,X([],F(arguments),!1))||this;return e.mixer=Dv(0,1/0),e}return t}(Hv),MN=function(){function r(){}return r.prototype.calculator=function(t,e,n,i){return n instanceof Fr?n.value==="unset"?"":n.value:"".concat(n)},r.prototype.postProcessor=function(t){t.nodeValue="".concat(t.parsedStyle.text)||""},r}(),ON=function(){function r(){}return r.prototype.calculator=function(t,e,n,i){var o=i.getAttribute("text");if(o){var a=o;n.value==="capitalize"?a=o.charAt(0).toUpperCase()+o.slice(1):n.value==="lowercase"?a=o.toLowerCase():n.value==="uppercase"&&(a=o.toUpperCase()),i.parsedStyle.text=a}return n.value},r}(),Qh={},IN=0;function AN(r,t){if(r){var e=typeof r=="string"?r:r.id||IN++;Qh[e]&&Qh[e].destroy(),Qh[e]=t}}var yl=typeof window<"u"&&typeof window.document<"u";function NN(r){return!!r.getAttribute}function PN(r,t){for(var e=0,n=r.length;e<n;){var i=e+n>>>1;QC(r[i],t)<0?e=i+1:n=i}return e}function QC(r,t){var e=Number(r.parsedStyle.zIndex),n=Number(t.parsedStyle.zIndex);if(e===n){var i=r.parentNode;if(i){var o=i.childNodes||[];return o.indexOf(r)-o.indexOf(t)}}return e-n}function JC(r){var t,e=r;do{var n=(t=e.parsedStyle)===null||t===void 0?void 0:t.clipPath;if(n)return e;e=e.parentElement}while(e!==null);return null}var h1="px";function BN(r,t,e){yl&&r.style&&(r.style.width=t+h1,r.style.height=e+h1)}function jC(r,t){if(yl)return document.defaultView.getComputedStyle(r,null).getPropertyValue(t)}function DN(r){var t=jC(r,"width");return t==="auto"?r.offsetWidth:parseFloat(t)}function FN(r){var t=jC(r,"height");return t==="auto"?r.offsetHeight:parseFloat(t)}var kN=1,HN={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},Pc=typeof performance=="object"&&performance.now?performance:Date;function ea(r,t,e){var n=!1,i=!1,o=!!t&&!t.isNone,a=!!e&&!e.isNone;return r==="visiblepainted"||r==="painted"||r==="auto"?(n=o,i=a):r==="visiblefill"||r==="fill"?n=!0:r==="visiblestroke"||r==="stroke"?i=!0:(r==="visible"||r==="all")&&(n=!0,i=!0),[n,i]}var zN=1,GN=function(){return zN++},ui=typeof self=="object"&&self.self==self?self:typeof global=="object"&&global.global==global?global:{},WN=Date.now(),UN=function(){return ui.performance&&typeof ui.performance.now=="function"?ui.performance.now():Date.now()-WN},Bs={},c1=Date.now(),VN=function(r){if(typeof r!="function")throw new TypeError(r+" is not a function");var t=Date.now(),e=t-c1,n=e>16?0:16-e,i=GN();return Bs[i]=r,Object.keys(Bs).length>1||setTimeout(function(){c1=t;var o=Bs;Bs={},Object.keys(o).forEach(function(a){return o[a](UN())})},n),i},YN=function(r){delete Bs[r]},XN=["","webkit","moz","ms","o"],ew=function(r){return typeof r!="string"?VN:r===""?ui.requestAnimationFrame:ui[r+"RequestAnimationFrame"]},$N=function(r){return typeof r!="string"?YN:r===""?ui.cancelAnimationFrame:ui[r+"CancelAnimationFrame"]||ui[r+"CancelRequestAnimationFrame"]},qN=function(r,t){for(var e=0;r[e]!==void 0;){if(t(r[e]))return r[e];e=e+1}},tw=qN(XN,function(r){return!!ew(r)}),rw=ew(tw),nw=$N(tw);ui.requestAnimationFrame=rw;ui.cancelAnimationFrame=nw;var KN=function(){function r(){this.callbacks=[]}return r.prototype.getCallbacksNum=function(){return this.callbacks.length},r.prototype.tapPromise=function(t,e){this.callbacks.push(e)},r.prototype.promise=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Promise.all(this.callbacks.map(function(n){return n.apply(void 0,X([],F(t),!1))}))},r}(),ZN=function(){function r(){this.callbacks=[]}return r.prototype.tapPromise=function(t,e){this.callbacks.push(e)},r.prototype.promise=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return jt(this,void 0,void 0,function(){var n,i,o,a;return er(this,function(s){switch(s.label){case 0:return this.callbacks.length?[4,(a=this.callbacks)[0].apply(a,X([],F(t),!1))]:[3,6];case 1:n=s.sent(),i=0,s.label=2;case 2:return i<this.callbacks.length-1?(o=this.callbacks[i],[4,o(n)]):[3,5];case 3:n=s.sent(),s.label=4;case 4:return i++,[3,2];case 5:return[2,n];case 6:return[2,null]}})})},r}(),pr=function(){function r(){this.callbacks=[]}return r.prototype.tap=function(t,e){this.callbacks.push(e)},r.prototype.call=function(){var t=arguments;this.callbacks.forEach(function(e){e.apply(void 0,t)})},r}(),Jh=function(){function r(){this.callbacks=[]}return r.prototype.tap=function(t,e){this.callbacks.push(e)},r.prototype.call=function(){if(this.callbacks.length){for(var t=arguments,e=this.callbacks[0].apply(void 0,t),n=0;n<this.callbacks.length-1;n++){var i=this.callbacks[n];e=i(e)}return e}return null},r}(),QN=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],JN=/([\"\'])[^\'\"]+\1/;function jN(r){for(var t=r.fontSize,e=r.fontFamily,n=r.fontStyle,i=r.fontVariant,o=r.fontWeight,a=Wn(t)&&"".concat(t,"px")||"16px",s=e.split(","),l=s.length-1;l>=0;l--){var u=s[l].trim();!JN.test(u)&&QN.indexOf(u)<0&&(u='"'.concat(u,'"')),s[l]=u}return"".concat(n," ").concat(i," ").concat(o," ").concat(a," ").concat(s.join(","))}var eP=function(){function r(){this.parser=Fv,this.parserUnmemoize=l1,this.parserWithCSSDisabled=l1,this.mixer=dN}return r.prototype.calculator=function(t,e,n,i){return n instanceof Fr?[]:n},r.prototype.postProcessor=function(t){var e=t.parsedStyle.transform;zv(e,t)},r}(),tP=function(){function r(){this.parser=ZC,this.parserUnmemoize=hN}return r}(),rP=function(){function r(){this.parser=Uo,this.parserUnmemoize=ns}return r.prototype.calculator=function(t,e,n,i){return n.value},r.prototype.postProcessor=function(t){if(t.parentNode){var e=t.parentNode,n=e.renderable,i=e.sortable;n&&(n.dirty=!0),i&&(i.dirty=!0,i.dirtyReason=Xa.Z_INDEX_CHANGED)}},r}(),nP=function(){function r(){}return r.prototype.update=function(t,e){var n=t.r,i=n*2,o=n*2;return{width:i,height:o}},r}(),iP=function(){function r(){}return r.prototype.update=function(t,e){var n=t.rx,i=t.ry,o=n*2,a=i*2;return{width:o,height:a}},r}(),oP=function(){function r(){}return r.prototype.update=function(t){var e=t.x1,n=t.y1,i=t.x2,o=t.y2,a=Math.min(e,i),s=Math.max(e,i),l=Math.min(n,o),u=Math.max(n,o),d=s-a,h=u-l;return{width:d,height:h}},r}(),aP=function(){function r(){}return r.prototype.update=function(t){var e=t.path,n=e.rect,i=n.width,o=n.height;return{width:i,height:o}},r}(),sP=function(){function r(){}return r.prototype.update=function(t){if(t.points&&Ov(t.points.points)){var e=t.points.points,n=Math.min.apply(Math,X([],F(e.map(function(u){return u[0]})),!1)),i=Math.max.apply(Math,X([],F(e.map(function(u){return u[0]})),!1)),o=Math.min.apply(Math,X([],F(e.map(function(u){return u[1]})),!1)),a=Math.max.apply(Math,X([],F(e.map(function(u){return u[1]})),!1)),s=i-n,l=a-o;return{width:s,height:l}}return{width:0,height:0}},r}(),lP=function(){function r(){}return r.prototype.update=function(t,e){var n=t.img,i=t.width,o=i===void 0?0:i,a=t.height,s=a===void 0?0:a,l=o,u=s;return n&&!tr(n)&&(l||(l=n.width,t.width=l),u||(u=n.height,t.height=u)),{width:l,height:u}},r}(),uP=function(){function r(t){this.globalRuntime=t}return r.prototype.isReadyToMeasure=function(t,e){var n=t.text,i=t.textAlign,o=t.textBaseline,a=t.fontSize,s=t.fontStyle,l=t.fontWeight,u=t.fontVariant,d=t.lineWidth;return n&&a&&s&&l&&u&&i&&o&&!de(d)},r.prototype.update=function(t,e){var n,i,o=t.text,a=t.textAlign,s=t.lineWidth,l=t.textBaseline,u=t.dx,d=t.dy;if(!this.isReadyToMeasure(t,e))return t.metrics={font:"",width:0,height:0,lines:[],lineWidths:[],lineHeight:0,maxLineWidth:0,fontProperties:{ascent:0,descent:0,fontSize:0},lineMetrics:[]},{width:0,height:0,x:0,y:0,offsetX:0,offsetY:0};var h=(((i=(n=e==null?void 0:e.ownerDocument)===null||n===void 0?void 0:n.defaultView)===null||i===void 0?void 0:i.getConfig())||{}).offscreenCanvas,v=this.globalRuntime.textService.measureText(o,t,h);t.metrics=v;var p=v.width,g=v.height,m=v.lineHeight,C=v.fontProperties,w=[p/2,g/2,0],_=[0,1],S=0;a==="center"||a==="middle"?(S=s/2,_=[.5,1]):(a==="right"||a==="end")&&(S=s,_=[1,1]);var b=0;return l==="middle"?b=w[1]:l==="top"||l==="hanging"?b=w[1]*2:l==="alphabetic"?b=this.globalRuntime.enableCSSParsing?m-C.ascent:0:(l==="bottom"||l==="ideographic")&&(b=0),u&&(S+=u),d&&(b+=d),t.anchor=[_[0],_[1],0],{width:w[0]*2,height:w[1]*2,offsetX:S,offsetY:b}},r}();function fP(r){return!!r.type}var Yf=function(){function r(t){this.eventPhase=r.prototype.NONE,this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.defaultPrevented=!1,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new Yt,this.page=new Yt,this.canvas=new Yt,this.viewport=new Yt,this.composed=!1,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=t}return Object.defineProperty(r.prototype,"name",{get:function(){return this.type},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"layerX",{get:function(){return this.layer.x},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"layerY",{get:function(){return this.layer.y},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"pageX",{get:function(){return this.page.x},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"pageY",{get:function(){return this.page.y},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"x",{get:function(){return this.canvas.x},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"y",{get:function(){return this.canvas.y},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"canvasX",{get:function(){return this.canvas.x},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"canvasY",{get:function(){return this.canvas.y},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"viewportX",{get:function(){return this.viewport.x},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"viewportY",{get:function(){return this.viewport.y},enumerable:!1,configurable:!0}),r.prototype.composedPath=function(){return this.manager&&(!this.path||this.path[0]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path},Object.defineProperty(r.prototype,"propagationPath",{get:function(){return this.composedPath()},enumerable:!1,configurable:!0}),r.prototype.preventDefault=function(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0},r.prototype.stopImmediatePropagation=function(){this.propagationImmediatelyStopped=!0},r.prototype.stopPropagation=function(){this.propagationStopped=!0},r.prototype.initEvent=function(){},r.prototype.initUIEvent=function(){},r.prototype.clone=function(){throw new Error(je)},r}(),iw=function(r){oe(t,r);function t(){var e=r.apply(this,X([],F(arguments),!1))||this;return e.client=new Yt,e.movement=new Yt,e.offset=new Yt,e.global=new Yt,e.screen=new Yt,e}return Object.defineProperty(t.prototype,"clientX",{get:function(){return this.client.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"clientY",{get:function(){return this.client.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"movementX",{get:function(){return this.movement.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"movementY",{get:function(){return this.movement.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"offsetX",{get:function(){return this.offset.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"offsetY",{get:function(){return this.offset.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"globalX",{get:function(){return this.global.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"globalY",{get:function(){return this.global.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"screenX",{get:function(){return this.screen.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"screenY",{get:function(){return this.screen.y},enumerable:!1,configurable:!0}),t.prototype.getModifierState=function(e){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(e)},t.prototype.initMouseEvent=function(){throw new Error(je)},t}(Yf),Bc=function(r){oe(t,r);function t(){var e=r.apply(this,X([],F(arguments),!1))||this;return e.width=0,e.height=0,e.isPrimary=!1,e}return t.prototype.getCoalescedEvents=function(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]},t.prototype.getPredictedEvents=function(){throw new Error("getPredictedEvents is not supported!")},t.prototype.clone=function(){return this.manager.clonePointerEvent(this)},t}(iw),Dc=function(r){oe(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.clone=function(){return this.manager.cloneWheelEvent(this)},t}(iw),Ut=function(r){oe(t,r);function t(e,n){var i=r.call(this,null)||this;return i.type=e,i.detail=n,Object.assign(i,n),i}return t}(Yf),v1=":",ow=function(){function r(){this.emitter=new Rv}return r.prototype.on=function(t,e,n){return this.addEventListener(t,e,n),this},r.prototype.addEventListener=function(t,e,n){var i=Py(n)&&n||Ku(n)&&n.capture,o=Ku(n)&&n.once,a=Oa(e)?void 0:e,s=!1,l="";if(t.indexOf(v1)>-1){var u=F(t.split(v1),2),d=u[0],h=u[1];t=h,l=d,s=!0}if(t=i?"".concat(t,"capture"):t,e=Oa(e)?e:e.handleEvent,s){var v=e;e=function(){for(var p,g=[],m=0;m<arguments.length;m++)g[m]=arguments[m];((p=g[0].target)===null||p===void 0?void 0:p.name)===l&&v.apply(void 0,X([],F(g),!1))}}return o?this.emitter.once(t,e,a):this.emitter.on(t,e,a),this},r.prototype.off=function(t,e,n){return t?this.removeEventListener(t,e,n):this.removeAllEventListeners(),this},r.prototype.removeAllEventListeners=function(){this.emitter.removeAllListeners()},r.prototype.removeEventListener=function(t,e,n){var i=Py(n)&&n||Ku(n)&&n.capture,o=Oa(e)?void 0:e;return t=i?"".concat(t,"capture"):t,e=Oa(e)?e:e==null?void 0:e.handleEvent,this.emitter.off(t,e,o),this},r.prototype.emit=function(t,e){this.dispatchEvent(new Ut(t,e))},r.prototype.dispatchEvent=function(t,e){var n,i;if(e===void 0&&(e=!1),!fP(t))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");var o;if(this.document?o=this:this.defaultView?o=this.defaultView:o=(n=this.ownerDocument)===null||n===void 0?void 0:n.defaultView,o){if(t.manager=o.getEventService()||null,!t.manager)return!1;t.defaultPrevented=!1,t.path=[],e||(t.target=this),(i=t.manager)===null||i===void 0||i.dispatchEvent(t,t.type,e)}return!t.defaultPrevented},r}(),zt=function(r){oe(t,r);function t(){var e=r.apply(this,X([],F(arguments),!1))||this;return e.shadow=!1,e.ownerDocument=null,e.isConnected=!1,e.baseURI="",e.childNodes=[],e.nodeType=0,e.nodeName="",e.nodeValue=null,e.parentNode=null,e}return t.isNode=function(e){return!!e.childNodes},Object.defineProperty(t.prototype,"textContent",{get:function(){var e,n,i="";this.nodeName===$.TEXT&&(i+=this.style.text);try{for(var o=Qt(this.childNodes),a=o.next();!a.done;a=o.next()){var s=a.value;s.nodeName===$.TEXT?i+=s.nodeValue:i+=s.textContent}}catch(l){e={error:l}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return i},set:function(e){var n=this;this.childNodes.slice().forEach(function(i){n.removeChild(i)}),this.nodeName===$.TEXT&&(this.style.text="".concat(e))},enumerable:!1,configurable:!0}),t.prototype.getRootNode=function(e){return e===void 0&&(e={}),this.parentNode?this.parentNode.getRootNode(e):e.composed&&this.host?this.host.getRootNode(e):this},t.prototype.hasChildNodes=function(){return this.childNodes.length>0},t.prototype.isDefaultNamespace=function(e){throw new Error(je)},t.prototype.lookupNamespaceURI=function(e){throw new Error(je)},t.prototype.lookupPrefix=function(e){throw new Error(je)},t.prototype.normalize=function(){throw new Error(je)},t.prototype.isEqualNode=function(e){return this===e},t.prototype.isSameNode=function(e){return this.isEqualNode(e)},Object.defineProperty(t.prototype,"parent",{get:function(){return this.parentNode},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parentElement",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextSibling",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"previousSibling",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"firstChild",{get:function(){return this.childNodes.length>0?this.childNodes[0]:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastChild",{get:function(){return this.childNodes.length>0?this.childNodes[this.childNodes.length-1]:null},enumerable:!1,configurable:!0}),t.prototype.compareDocumentPosition=function(e){var n;if(e===this)return 0;for(var i=e,o=this,a=[i],s=[o];(n=i.parentNode)!==null&&n!==void 0?n:o.parentNode;)i=i.parentNode?(a.push(i.parentNode),i.parentNode):i,o=o.parentNode?(s.push(o.parentNode),o.parentNode):o;if(i!==o)return t.DOCUMENT_POSITION_DISCONNECTED|t.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC|t.DOCUMENT_POSITION_PRECEDING;var l=a.length>s.length?a:s,u=l===a?s:a;if(l[l.length-u.length]===u[0])return l===a?t.DOCUMENT_POSITION_CONTAINED_BY|t.DOCUMENT_POSITION_FOLLOWING:t.DOCUMENT_POSITION_CONTAINS|t.DOCUMENT_POSITION_PRECEDING;for(var d=l.length-u.length,h=u.length-1;h>=0;h--){var v=u[h],p=l[d+h];if(p!==v){var g=v.parentNode.childNodes;return g.indexOf(v)<g.indexOf(p)?u===a?t.DOCUMENT_POSITION_PRECEDING:t.DOCUMENT_POSITION_FOLLOWING:l===a?t.DOCUMENT_POSITION_PRECEDING:t.DOCUMENT_POSITION_FOLLOWING}}return t.DOCUMENT_POSITION_FOLLOWING},t.prototype.contain=function(e){return this.contains(e)},t.prototype.contains=function(e){for(var n=e;n&&this!==n;)n=n.parentNode;return!!n},t.prototype.getAncestor=function(e){for(var n=this;e>0&&n;)n=n.parentNode,e--;return n},t.prototype.forEach=function(e,n){n===void 0&&(n=!1),e(this)||(n?this.childNodes.slice():this.childNodes).forEach(function(i){i.forEach(e)})},t.DOCUMENT_POSITION_DISCONNECTED=1,t.DOCUMENT_POSITION_PRECEDING=2,t.DOCUMENT_POSITION_FOLLOWING=4,t.DOCUMENT_POSITION_CONTAINS=8,t.DOCUMENT_POSITION_CONTAINED_BY=16,t.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC=32,t}(ow),dP=2048,hP=function(){function r(t,e){var n=this;this.globalRuntime=t,this.context=e,this.emitter=new Rv,this.nativeHTMLMap=new WeakMap,this.cursor="default",this.mappingTable={},this.mappingState={trackingData:{}},this.eventPool=new Map,this.tmpMatrix=it(),this.tmpVec3=Ne(),this.onPointerDown=function(i){var o=n.createPointerEvent(i);if(n.dispatchEvent(o,"pointerdown"),o.pointerType==="touch")n.dispatchEvent(o,"touchstart");else if(o.pointerType==="mouse"||o.pointerType==="pen"){var a=o.button===2;n.dispatchEvent(o,a?"rightdown":"mousedown")}var s=n.trackingData(i.pointerId);s.pressTargetsByButton[i.button]=o.composedPath(),n.freeEvent(o)},this.onPointerUp=function(i){var o,a=Pc.now(),s=n.createPointerEvent(i,void 0,void 0,n.context.config.alwaysTriggerPointerEventOnCanvas?n.rootTarget:void 0);if(n.dispatchEvent(s,"pointerup"),s.pointerType==="touch")n.dispatchEvent(s,"touchend");else if(s.pointerType==="mouse"||s.pointerType==="pen"){var l=s.button===2;n.dispatchEvent(s,l?"rightup":"mouseup")}var u=n.trackingData(i.pointerId),d=n.findMountedTarget(u.pressTargetsByButton[i.button]),h=d;if(d&&!s.composedPath().includes(d)){for(var v=d;v&&!s.composedPath().includes(v);){if(s.currentTarget=v,n.notifyTarget(s,"pointerupoutside"),s.pointerType==="touch")n.notifyTarget(s,"touchendoutside");else if(s.pointerType==="mouse"||s.pointerType==="pen"){var l=s.button===2;n.notifyTarget(s,l?"rightupoutside":"mouseupoutside")}zt.isNode(v)&&(v=v.parentNode)}delete u.pressTargetsByButton[i.button],h=v}if(h){var p=n.clonePointerEvent(s,"click");p.target=h,p.path=[],u.clicksByButton[i.button]||(u.clicksByButton[i.button]={clickCount:0,target:p.target,timeStamp:a});var g=u.clicksByButton[i.button];g.target===p.target&&a-g.timeStamp<200?++g.clickCount:g.clickCount=1,g.target=p.target,g.timeStamp=a,p.detail=g.clickCount,!((o=s.detail)===null||o===void 0)&&o.preventClick||(!n.context.config.useNativeClickEvent&&(p.pointerType==="mouse"||p.pointerType==="touch")&&n.dispatchEvent(p,"click"),n.dispatchEvent(p,"pointertap")),n.freeEvent(p)}n.freeEvent(s)},this.onPointerMove=function(i){var o=n.createPointerEvent(i,void 0,void 0,n.context.config.alwaysTriggerPointerEventOnCanvas?n.rootTarget:void 0),a=o.pointerType==="mouse"||o.pointerType==="pen",s=n.trackingData(i.pointerId),l=n.findMountedTarget(s.overTargets);if(s.overTargets&&l!==o.target){var u=i.type==="mousemove"?"mouseout":"pointerout",d=n.createPointerEvent(i,u,l||void 0);if(n.dispatchEvent(d,"pointerout"),a&&n.dispatchEvent(d,"mouseout"),!o.composedPath().includes(l)){var h=n.createPointerEvent(i,"pointerleave",l||void 0);for(h.eventPhase=h.AT_TARGET;h.target&&!o.composedPath().includes(h.target);)h.currentTarget=h.target,n.notifyTarget(h),a&&n.notifyTarget(h,"mouseleave"),zt.isNode(h.target)&&(h.target=h.target.parentNode);n.freeEvent(h)}n.freeEvent(d)}if(l!==o.target){var v=i.type==="mousemove"?"mouseover":"pointerover",p=n.clonePointerEvent(o,v);n.dispatchEvent(p,"pointerover"),a&&n.dispatchEvent(p,"mouseover");for(var g=l&&zt.isNode(l)&&l.parentNode;g&&g!==(zt.isNode(n.rootTarget)&&n.rootTarget.parentNode)&&g!==o.target;)g=g.parentNode;var m=!g||g===(zt.isNode(n.rootTarget)&&n.rootTarget.parentNode);if(m){var C=n.clonePointerEvent(o,"pointerenter");for(C.eventPhase=C.AT_TARGET;C.target&&C.target!==l&&C.target!==(zt.isNode(n.rootTarget)&&n.rootTarget.parentNode);)C.currentTarget=C.target,n.notifyTarget(C),a&&n.notifyTarget(C,"mouseenter"),zt.isNode(C.target)&&(C.target=C.target.parentNode);n.freeEvent(C)}n.freeEvent(p)}n.dispatchEvent(o,"pointermove"),o.pointerType==="touch"&&n.dispatchEvent(o,"touchmove"),a&&(n.dispatchEvent(o,"mousemove"),n.cursor=n.getCursor(o.target)),s.overTargets=o.composedPath(),n.freeEvent(o)},this.onPointerOut=function(i){var o=n.trackingData(i.pointerId);if(o.overTargets){var a=i.pointerType==="mouse"||i.pointerType==="pen",s=n.findMountedTarget(o.overTargets),l=n.createPointerEvent(i,"pointerout",s||void 0);n.dispatchEvent(l),a&&n.dispatchEvent(l,"mouseout");var u=n.createPointerEvent(i,"pointerleave",s||void 0);for(u.eventPhase=u.AT_TARGET;u.target&&u.target!==(zt.isNode(n.rootTarget)&&n.rootTarget.parentNode);)u.currentTarget=u.target,n.notifyTarget(u),a&&n.notifyTarget(u,"mouseleave"),zt.isNode(u.target)&&(u.target=u.target.parentNode);o.overTargets=null,n.freeEvent(l),n.freeEvent(u)}n.cursor=null},this.onPointerOver=function(i){var o=n.trackingData(i.pointerId),a=n.createPointerEvent(i),s=a.pointerType==="mouse"||a.pointerType==="pen";n.dispatchEvent(a,"pointerover"),s&&n.dispatchEvent(a,"mouseover"),a.pointerType==="mouse"&&(n.cursor=n.getCursor(a.target));var l=n.clonePointerEvent(a,"pointerenter");for(l.eventPhase=l.AT_TARGET;l.target&&l.target!==(zt.isNode(n.rootTarget)&&n.rootTarget.parentNode);)l.currentTarget=l.target,n.notifyTarget(l),s&&n.notifyTarget(l,"mouseenter"),zt.isNode(l.target)&&(l.target=l.target.parentNode);o.overTargets=a.composedPath(),n.freeEvent(a),n.freeEvent(l)},this.onPointerUpOutside=function(i){var o=n.trackingData(i.pointerId),a=n.findMountedTarget(o.pressTargetsByButton[i.button]),s=n.createPointerEvent(i);if(a){for(var l=a;l;)s.currentTarget=l,n.notifyTarget(s,"pointerupoutside"),s.pointerType==="touch"||(s.pointerType==="mouse"||s.pointerType==="pen")&&n.notifyTarget(s,s.button===2?"rightupoutside":"mouseupoutside"),zt.isNode(l)&&(l=l.parentNode);delete o.pressTargetsByButton[i.button]}n.freeEvent(s)},this.onWheel=function(i){var o=n.createWheelEvent(i);n.dispatchEvent(o),n.freeEvent(o)},this.onClick=function(i){if(n.context.config.useNativeClickEvent){var o=n.createPointerEvent(i);n.dispatchEvent(o),n.freeEvent(o)}},this.onPointerCancel=function(i){var o=n.createPointerEvent(i,void 0,void 0,n.context.config.alwaysTriggerPointerEventOnCanvas?n.rootTarget:void 0);n.dispatchEvent(o),n.freeEvent(o)}}return r.prototype.init=function(){this.rootTarget=this.context.renderingContext.root.parentNode,this.addEventMapping("pointerdown",this.onPointerDown),this.addEventMapping("pointerup",this.onPointerUp),this.addEventMapping("pointermove",this.onPointerMove),this.addEventMapping("pointerout",this.onPointerOut),this.addEventMapping("pointerleave",this.onPointerOut),this.addEventMapping("pointercancel",this.onPointerCancel),this.addEventMapping("pointerover",this.onPointerOver),this.addEventMapping("pointerupoutside",this.onPointerUpOutside),this.addEventMapping("wheel",this.onWheel),this.addEventMapping("click",this.onClick)},r.prototype.destroy=function(){this.emitter.removeAllListeners(),this.mappingTable={},this.mappingState={},this.eventPool.clear()},r.prototype.client2Viewport=function(t){var e=this.context.contextService.getBoundingClientRect();return new Yt(t.x-((e==null?void 0:e.left)||0),t.y-((e==null?void 0:e.top)||0))},r.prototype.viewport2Client=function(t){var e=this.context.contextService.getBoundingClientRect();return new Yt(t.x+((e==null?void 0:e.left)||0),t.y+((e==null?void 0:e.top)||0))},r.prototype.viewport2Canvas=function(t){var e=t.x,n=t.y,i=this.rootTarget.defaultView,o=i.getCamera(),a=this.context.config,s=a.width,l=a.height,u=o.getPerspectiveInverse(),d=o.getWorldTransform(),h=lr(this.tmpMatrix,d,u),v=Nn(this.tmpVec3,e/s*2-1,(1-n/l)*2-1,0);return wn(v,v,h),new Yt(v[0],v[1])},r.prototype.canvas2Viewport=function(t){var e=this.rootTarget.defaultView,n=e.getCamera(),i=n.getPerspective(),o=n.getViewTransform(),a=lr(this.tmpMatrix,i,o),s=Nn(this.tmpVec3,t.x,t.y,0);wn(this.tmpVec3,this.tmpVec3,a);var l=this.context.config,u=l.width,d=l.height;return new Yt((s[0]+1)/2*u,(1-(s[1]+1)/2)*d)},r.prototype.setPickHandler=function(t){this.pickHandler=t},r.prototype.addEventMapping=function(t,e){this.mappingTable[t]||(this.mappingTable[t]=[]),this.mappingTable[t].push({fn:e,priority:0}),this.mappingTable[t].sort(function(n,i){return n.priority-i.priority})},r.prototype.mapEvent=function(t){if(!!this.rootTarget){var e=this.mappingTable[t.type];if(e)for(var n=0,i=e.length;n<i;n++)e[n].fn(t);else console.warn("[EventService]: Event mapping not defined for ".concat(t.type))}},r.prototype.dispatchEvent=function(t,e,n){if(!n)t.propagationStopped=!1,t.propagationImmediatelyStopped=!1,this.propagate(t,e);else{t.eventPhase=t.AT_TARGET;var i=this.rootTarget.defaultView||null;t.currentTarget=i,this.notifyListeners(t,e)}this.emitter.emit(e||t.type,t)},r.prototype.propagate=function(t,e){if(!!t.target){var n=t.composedPath();t.eventPhase=t.CAPTURING_PHASE;for(var i=n.length-1;i>=1;i--)if(t.currentTarget=n[i],this.notifyTarget(t,e),t.propagationStopped||t.propagationImmediatelyStopped)return;if(t.eventPhase=t.AT_TARGET,t.currentTarget=t.target,this.notifyTarget(t,e),!(t.propagationStopped||t.propagationImmediatelyStopped)){var o=n.indexOf(t.currentTarget);t.eventPhase=t.BUBBLING_PHASE;for(var i=o+1;i<n.length;i++)if(t.currentTarget=n[i],this.notifyTarget(t,e),t.propagationStopped||t.propagationImmediatelyStopped)return}}},r.prototype.propagationPath=function(t){var e=[t],n=this.rootTarget.defaultView||null;if(n&&n===t)return e.unshift(n.document),e;for(var i=0;i<dP&&t!==this.rootTarget;i++)zt.isNode(t)&&t.parentNode&&(e.push(t.parentNode),t=t.parentNode);return n&&e.push(n),e},r.prototype.hitTest=function(t){var e=t.viewportX,n=t.viewportY,i=this.context.config,o=i.width,a=i.height,s=i.disableHitTesting;return e<0||n<0||e>o||n>a?null:!s&&this.pickHandler(t)||this.rootTarget||null},r.prototype.isNativeEventFromCanvas=function(t){var e,n=this.context.contextService.getDomElement(),i=(e=t.nativeEvent)===null||e===void 0?void 0:e.target;if(i){if(i===n)return!0;if(n&&n.contains)return n.contains(i)}return t.nativeEvent.composedPath?t.nativeEvent.composedPath().indexOf(n)>-1:!1},r.prototype.getExistedHTML=function(t){var e,n;if(t.nativeEvent.composedPath)try{for(var i=Qt(t.nativeEvent.composedPath()),o=i.next();!o.done;o=i.next()){var a=o.value,s=this.nativeHTMLMap.get(a);if(s)return s}}catch(l){e={error:l}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return null},r.prototype.pickTarget=function(t){return this.hitTest({clientX:t.clientX,clientY:t.clientY,viewportX:t.viewportX,viewportY:t.viewportY,x:t.canvasX,y:t.canvasY})},r.prototype.createPointerEvent=function(t,e,n,i){var o=this.allocateEvent(Bc);this.copyPointerData(t,o),this.copyMouseData(t,o),this.copyData(t,o),o.nativeEvent=t.nativeEvent,o.originalEvent=t;var a=this.getExistedHTML(o);return o.target=n!=null?n:a||this.isNativeEventFromCanvas(o)&&this.pickTarget(o)||i,typeof e=="string"&&(o.type=e),o},r.prototype.createWheelEvent=function(t){var e=this.allocateEvent(Dc);this.copyWheelData(t,e),this.copyMouseData(t,e),this.copyData(t,e),e.nativeEvent=t.nativeEvent,e.originalEvent=t;var n=this.getExistedHTML(e);return e.target=n||this.isNativeEventFromCanvas(e)&&this.pickTarget(e),e},r.prototype.trackingData=function(t){return this.mappingState.trackingData[t]||(this.mappingState.trackingData[t]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[t]},r.prototype.cloneWheelEvent=function(t){var e=this.allocateEvent(Dc);return e.nativeEvent=t.nativeEvent,e.originalEvent=t.originalEvent,this.copyWheelData(t,e),this.copyMouseData(t,e),this.copyData(t,e),e.target=t.target,e.path=t.composedPath().slice(),e.type=t.type,e},r.prototype.clonePointerEvent=function(t,e){var n=this.allocateEvent(Bc);return n.nativeEvent=t.nativeEvent,n.originalEvent=t.originalEvent,this.copyPointerData(t,n),this.copyMouseData(t,n),this.copyData(t,n),n.target=t.target,n.path=t.composedPath().slice(),n.type=e!=null?e:n.type,n},r.prototype.copyPointerData=function(t,e){e.pointerId=t.pointerId,e.width=t.width,e.height=t.height,e.isPrimary=t.isPrimary,e.pointerType=t.pointerType,e.pressure=t.pressure,e.tangentialPressure=t.tangentialPressure,e.tiltX=t.tiltX,e.tiltY=t.tiltY,e.twist=t.twist},r.prototype.copyMouseData=function(t,e){e.altKey=t.altKey,e.button=t.button,e.buttons=t.buttons,e.ctrlKey=t.ctrlKey,e.metaKey=t.metaKey,e.shiftKey=t.shiftKey,e.client.copyFrom(t.client),e.movement.copyFrom(t.movement),e.canvas.copyFrom(t.canvas),e.screen.copyFrom(t.screen),e.global.copyFrom(t.global),e.offset.copyFrom(t.offset)},r.prototype.copyWheelData=function(t,e){e.deltaMode=t.deltaMode,e.deltaX=t.deltaX,e.deltaY=t.deltaY,e.deltaZ=t.deltaZ},r.prototype.copyData=function(t,e){e.isTrusted=t.isTrusted,e.timeStamp=Pc.now(),e.type=t.type,e.detail=t.detail,e.view=t.view,e.page.copyFrom(t.page),e.viewport.copyFrom(t.viewport)},r.prototype.allocateEvent=function(t){this.eventPool.has(t)||this.eventPool.set(t,[]);var e=this.eventPool.get(t).pop()||new t(this);return e.eventPhase=e.NONE,e.currentTarget=null,e.path=[],e.target=null,e},r.prototype.freeEvent=function(t){if(t.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");var e=t.constructor;this.eventPool.has(e)||this.eventPool.set(e,[]),this.eventPool.get(e).push(t)},r.prototype.notifyTarget=function(t,e){e=e!=null?e:t.type;var n=t.eventPhase===t.CAPTURING_PHASE||t.eventPhase===t.AT_TARGET?"".concat(e,"capture"):e;this.notifyListeners(t,n),t.eventPhase===t.AT_TARGET&&this.notifyListeners(t,e)},r.prototype.notifyListeners=function(t,e){var n=t.currentTarget.emitter,i=n._events[e];if(!!i)if("fn"in i)i.once&&n.removeListener(e,i.fn,void 0,!0),i.fn.call(t.currentTarget||i.context,t);else for(var o=0;o<i.length&&!t.propagationImmediatelyStopped;o++)i[o].once&&n.removeListener(e,i[o].fn,void 0,!0),i[o].fn.call(t.currentTarget||i[o].context,t)},r.prototype.findMountedTarget=function(t){if(!t)return null;for(var e=t[t.length-1],n=t.length-2;n>=0;n--){var i=t[n];if(i===this.rootTarget||zt.isNode(i)&&i.parentNode===e)e=t[n];else break}return e},r.prototype.getCursor=function(t){for(var e=t;e;){var n=NN(e)&&e.getAttribute("cursor");if(n)return n;e=zt.isNode(e)&&e.parentNode}},r}(),cP=function(){function r(){}return r.prototype.getOrCreateCanvas=function(t,e){if(this.canvas)return this.canvas;if(t||K.offscreenCanvas)this.canvas=t||K.offscreenCanvas,this.context=this.canvas.getContext("2d",N({willReadFrequently:!0},e));else try{this.canvas=new window.OffscreenCanvas(0,0),this.context=this.canvas.getContext("2d",N({willReadFrequently:!0},e)),(!this.context||!this.context.measureText)&&(this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"))}catch(n){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d",N({willReadFrequently:!0},e))}return this.canvas.width=10,this.canvas.height=10,this.canvas},r.prototype.getOrCreateContext=function(t,e){return this.context?this.context:(this.getOrCreateCanvas(t,e),this.context)},r}(),so;(function(r){r[r.CAMERA_CHANGED=0]="CAMERA_CHANGED",r[r.DISPLAY_OBJECT_CHANGED=1]="DISPLAY_OBJECT_CHANGED",r[r.NONE=2]="NONE"})(so||(so={}));var vP=function(){function r(t,e){this.globalRuntime=t,this.context=e,this.inited=!1,this.stats={total:0,rendered:0},this.zIndexCounter=0,this.hooks={init:new pr,initAsync:new KN,dirtycheck:new Jh,cull:new Jh,beginFrame:new pr,beforeRender:new pr,render:new pr,afterRender:new pr,endFrame:new pr,destroy:new pr,pick:new ZN,pickSync:new Jh,pointerDown:new pr,pointerUp:new pr,pointerMove:new pr,pointerOut:new pr,pointerOver:new pr,pointerWheel:new pr,pointerCancel:new pr,click:new pr}}return r.prototype.init=function(t){var e=this,n=N(N({},this.globalRuntime),this.context);this.context.renderingPlugins.forEach(function(i){i.apply(n,e.globalRuntime)}),this.hooks.init.call(),this.hooks.initAsync.getCallbacksNum()===0?(this.inited=!0,t()):this.hooks.initAsync.promise().then(function(){e.inited=!0,t()})},r.prototype.getStats=function(){return this.stats},r.prototype.disableDirtyRectangleRendering=function(){var t=this.context.config.renderer,e=t.getConfig().enableDirtyRectangleRendering;return!e||this.context.renderingContext.renderReasons.has(so.CAMERA_CHANGED)},r.prototype.render=function(t,e){var n=this;this.stats.total=0,this.stats.rendered=0,this.zIndexCounter=0;var i=this.context.renderingContext;if(this.globalRuntime.sceneGraphService.syncHierarchy(i.root),this.globalRuntime.sceneGraphService.triggerPendingEvents(),i.renderReasons.size&&this.inited){i.dirtyRectangleRenderingDisabled=this.disableDirtyRectangleRendering();var o=i.renderReasons.size===1&&i.renderReasons.has(so.CAMERA_CHANGED),a=!t.disableRenderHooks||!(t.disableRenderHooks&&o);a&&this.renderDisplayObject(i.root,t,i),this.hooks.beginFrame.call(),a&&i.renderListCurrentFrame.forEach(function(s){n.hooks.beforeRender.call(s),n.hooks.render.call(s),n.hooks.afterRender.call(s)}),this.hooks.endFrame.call(),i.renderListCurrentFrame=[],i.renderReasons.clear(),e()}},r.prototype.renderDisplayObject=function(t,e,n){var i=this,o=e.renderer.getConfig(),a=o.enableDirtyCheck,s=o.enableCulling;this.globalRuntime.enableCSSParsing&&this.globalRuntime.styleValueRegistry.recalc(t);var l=t.renderable,u=a?l.dirty||n.dirtyRectangleRenderingDisabled?t:null:t;if(u){var d=s?this.hooks.cull.call(u,this.context.camera):u;d&&(this.stats.rendered++,n.renderListCurrentFrame.push(d))}t.renderable.dirty=!1,t.sortable.renderOrder=this.zIndexCounter++,this.stats.total++;var h=t.sortable;h.dirty&&(this.sort(t,h),h.dirty=!1,h.dirtyChildren=[],h.dirtyReason=void 0),(h.sorted||t.childNodes).forEach(function(v){i.renderDisplayObject(v,e,n)})},r.prototype.sort=function(t,e){e.sorted&&e.dirtyReason!==Xa.Z_INDEX_CHANGED?e.dirtyChildren.forEach(function(n){var i=t.childNodes.indexOf(n);if(i===-1){var o=e.sorted.indexOf(n);o>=0&&e.sorted.splice(o,1)}else if(e.sorted.length===0)e.sorted.push(n);else{var a=PN(e.sorted,n);e.sorted.splice(a,0,n)}}):e.sorted=t.childNodes.slice().sort(QC)},r.prototype.destroy=function(){this.inited=!1,this.hooks.destroy.call(),this.globalRuntime.sceneGraphService.clearPendingEvents()},r.prototype.dirtify=function(){this.context.renderingContext.renderReasons.add(so.DISPLAY_OBJECT_CHANGED)},r}(),pP=/\[\s*(.*)=(.*)\s*\]/,gP=function(){function r(){}return r.prototype.selectOne=function(t,e){var n=this;if(t.startsWith("."))return e.find(function(s){return((s==null?void 0:s.classList)||[]).indexOf(n.getIdOrClassname(t))>-1});if(t.startsWith("#"))return e.find(function(s){return s.id===n.getIdOrClassname(t)});if(t.startsWith("[")){var i=this.getAttribute(t),o=i.name,a=i.value;return o?e.find(function(s){return e!==s&&(o==="name"?s.name===a:n.attributeToString(s,o)===a)}):null}else return e.find(function(s){return e!==s&&s.nodeName===t})},r.prototype.selectAll=function(t,e){var n=this;if(t.startsWith("."))return e.findAll(function(s){return e!==s&&((s==null?void 0:s.classList)||[]).indexOf(n.getIdOrClassname(t))>-1});if(t.startsWith("#"))return e.findAll(function(s){return e!==s&&s.id===n.getIdOrClassname(t)});if(t.startsWith("[")){var i=this.getAttribute(t),o=i.name,a=i.value;return o?e.findAll(function(s){return e!==s&&(o==="name"?s.name===a:n.attributeToString(s,o)===a)}):[]}else return e.findAll(function(s){return e!==s&&s.nodeName===t})},r.prototype.is=function(t,e){if(t.startsWith("."))return e.className===this.getIdOrClassname(t);if(t.startsWith("#"))return e.id===this.getIdOrClassname(t);if(t.startsWith("[")){var n=this.getAttribute(t),i=n.name,o=n.value;return i==="name"?e.name===o:this.attributeToString(e,i)===o}else return e.nodeName===t},r.prototype.getIdOrClassname=function(t){return t.substring(1)},r.prototype.getAttribute=function(t){var e=t.match(pP),n="",i="";return e&&e.length>2&&(n=e[1].replace(/"/g,""),i=e[2].replace(/"/g,"")),{name:n,value:i}},r.prototype.attributeToString=function(t,e){if(!t.getAttribute)return"";var n=t.getAttribute(e);return de(n)?"":n.toString?n.toString():""},r}(),Vo=function(r){oe(t,r);function t(e,n,i,o,a,s,l,u){var d=r.call(this,null)||this;return d.relatedNode=n,d.prevValue=i,d.newValue=o,d.attrName=a,d.attrChange=s,d.prevParsedValue=l,d.newParsedValue=u,d.type=e,d}return t.ADDITION=2,t.MODIFICATION=1,t.REMOVAL=3,t}(Yf),He;(function(r){r.REPARENT="reparent",r.DESTROY="destroy",r.ATTR_MODIFIED="DOMAttrModified",r.INSERTED="DOMNodeInserted",r.REMOVED="removed",r.MOUNTED="DOMNodeInsertedIntoDocument",r.UNMOUNTED="DOMNodeRemovedFromDocument",r.BOUNDS_CHANGED="bounds-changed",r.CULLED="culled"})(He||(He={}));function p1(r){var t=r.renderable;t&&(t.renderBoundsDirty=!0,t.boundsDirty=!0)}var yP=new Vo(He.REPARENT,null,"","","",0,"",""),mP=function(){function r(t){var e=this;this.runtime=t,this.pendingEvents=[],this.boundsChangedEvent=new Ut(He.BOUNDS_CHANGED),this.rotate=function(){var n=bt();return function(i,o,a,s){a===void 0&&(a=0),s===void 0&&(s=0),typeof o=="number"&&(o=et(o,a,s));var l=i.transformable;if(i.parentNode===null||!i.parentNode.transformable)e.rotateLocal(i,o);else{var u=bt();_u(u,o[0],o[1],o[2]);var d=e.getRotation(i),h=e.getRotation(i.parentNode);Eu(n,h),Hh(n,n),ao(u,n,u),ao(l.localRotation,u,d),sf(l.localRotation,l.localRotation),e.dirtifyLocal(i,l)}}}(),this.rotateLocal=function(){var n=bt();return function(i,o,a,s){a===void 0&&(a=0),s===void 0&&(s=0),typeof o=="number"&&(o=et(o,a,s));var l=i.transformable;_u(n,o[0],o[1],o[2]),Iy(l.localRotation,l.localRotation,n),e.dirtifyLocal(i,l)}}(),this.setEulerAngles=function(){var n=bt();return function(i,o,a,s){a===void 0&&(a=0),s===void 0&&(s=0),typeof o=="number"&&(o=et(o,a,s));var l=i.transformable;if(i.parentNode===null||!i.parentNode.transformable)e.setLocalEulerAngles(i,o);else{_u(l.localRotation,o[0],o[1],o[2]);var u=e.getRotation(i.parentNode);Eu(n,Hh(bt(),u)),Iy(l.localRotation,l.localRotation,n),e.dirtifyLocal(i,l)}}}(),this.translateLocal=function(){return function(n,i,o,a){o===void 0&&(o=0),a===void 0&&(a=0),typeof i=="number"&&(i=et(i,o,a));var s=n.transformable;bs(i,Ne())||(zO(i,i,s.localRotation),Da(s.localPosition,s.localPosition,i),e.dirtifyLocal(n,s))}}(),this.setPosition=function(){var n=it(),i=Ne();return function(o,a){var s=o.transformable;if(i[0]=a[0],i[1]=a[1],i[2]=a[2]||0,!bs(e.getPosition(o),i)){if(Nr(s.position,i),o.parentNode===null||!o.parentNode.transformable)Nr(s.localPosition,i);else{var l=o.parentNode.transformable;Go(n,l.worldTransform),ii(n,n),wn(s.localPosition,i,n)}e.dirtifyLocal(o,s)}}}(),this.setLocalPosition=function(){var n=Ne();return function(i,o){var a=i.transformable;n[0]=o[0],n[1]=o[1],n[2]=o[2]||0,!bs(a.localPosition,n)&&(Nr(a.localPosition,n),e.dirtifyLocal(i,a))}}(),this.translate=function(){var n=Ne(),i=Ne(),o=Ne();return function(a,s,l,u){l===void 0&&(l=0),u===void 0&&(u=0),typeof s=="number"&&(s=Nn(i,s,l,u)),!bs(s,n)&&(Da(o,e.getPosition(a),s),e.setPosition(a,o))}}(),this.setRotation=function(){var n=bt();return function(i,o,a,s,l){var u=i.transformable;if(typeof o=="number"&&(o=zh(o,a,s,l)),i.parentNode===null||!i.parentNode.transformable)e.setLocalRotation(i,o);else{var d=e.getRotation(i.parentNode);Eu(n,d),Hh(n,n),ao(u.localRotation,n,o),sf(u.localRotation,u.localRotation),e.dirtifyLocal(i,u)}}},this.displayObjectDependencyMap=new WeakMap,this.calcLocalTransform=function(){var n=it(),i=Ne(),o=zh(0,0,0,1);return function(a){var s=a.localSkew[0]!==0||a.localSkew[1]!==0;if(s){if(Gs(a.localTransform,a.localRotation,a.localPosition,et(1,1,1),a.origin),a.localSkew[0]!==0||a.localSkew[1]!==0){var l=vl(n);l[4]=Math.tan(a.localSkew[0]),l[1]=Math.tan(a.localSkew[1]),lr(a.localTransform,a.localTransform,l)}var u=Gs(n,o,i,a.localScale,a.origin);lr(a.localTransform,a.localTransform,u)}else Gs(a.localTransform,a.localRotation,a.localPosition,a.localScale,a.origin)}}()}return r.prototype.matches=function(t,e){return this.runtime.sceneGraphSelector.is(t,e)},r.prototype.querySelector=function(t,e){return this.runtime.sceneGraphSelector.selectOne(t,e)},r.prototype.querySelectorAll=function(t,e){return this.runtime.sceneGraphSelector.selectAll(t,e)},r.prototype.attach=function(t,e,n){var i,o,a=!1;t.parentNode&&(a=t.parentNode!==e,this.detach(t)),t.parentNode=e,de(n)?t.parentNode.childNodes.push(t):t.parentNode.childNodes.splice(n,0,t);var s=e.sortable;(((i=s==null?void 0:s.sorted)===null||i===void 0?void 0:i.length)||((o=t.style)===null||o===void 0?void 0:o.zIndex))&&(s.dirtyChildren.indexOf(t)===-1&&s.dirtyChildren.push(t),s.dirty=!0,s.dirtyReason=Xa.ADDED);var l=t.transformable;l&&this.dirtifyWorld(t,l),l.frozen&&this.unfreezeParentToRoot(t),a&&t.dispatchEvent(yP)},r.prototype.detach=function(t){var e,n;if(t.parentNode){var i=t.transformable,o=t.parentNode.sortable;(((e=o==null?void 0:o.sorted)===null||e===void 0?void 0:e.length)||((n=t.style)===null||n===void 0?void 0:n.zIndex))&&(o.dirtyChildren.indexOf(t)===-1&&o.dirtyChildren.push(t),o.dirty=!0,o.dirtyReason=Xa.REMOVED);var a=t.parentNode.childNodes.indexOf(t);a>-1&&t.parentNode.childNodes.splice(a,1),i&&this.dirtifyWorld(t,i),t.parentNode=null}},r.prototype.getOrigin=function(t){return t.transformable.origin},r.prototype.setOrigin=function(t,e,n,i){n===void 0&&(n=0),i===void 0&&(i=0),typeof e=="number"&&(e=[e,n,i]);var o=t.transformable;if(!(e[0]===o.origin[0]&&e[1]===o.origin[1]&&e[2]===o.origin[2])){var a=o.origin;a[0]=e[0],a[1]=e[1],a[2]=e[2]||0,this.dirtifyLocal(t,o)}},r.prototype.setLocalEulerAngles=function(t,e,n,i){n===void 0&&(n=0),i===void 0&&(i=0),typeof e=="number"&&(e=et(e,n,i));var o=t.transformable;_u(o.localRotation,e[0],e[1],e[2]),this.dirtifyLocal(t,o)},r.prototype.scaleLocal=function(t,e){var n=t.transformable;FO(n.localScale,n.localScale,et(e[0],e[1],e[2]||1)),this.dirtifyLocal(t,n)},r.prototype.setLocalScale=function(t,e){var n=t.transformable,i=et(e[0],e[1],e[2]||n.localScale[2]);bs(i,n.localScale)||(Nr(n.localScale,i),this.dirtifyLocal(t,n))},r.prototype.setLocalRotation=function(t,e,n,i,o){typeof e=="number"&&(e=zh(e,n,i,o));var a=t.transformable;Eu(a.localRotation,e),this.dirtifyLocal(t,a)},r.prototype.setLocalSkew=function(t,e,n){typeof e=="number"&&(e=XO(e,n));var i=t.transformable;$O(i.localSkew,e),this.dirtifyLocal(t,i)},r.prototype.dirtifyLocal=function(t,e){e.localDirtyFlag||(e.localDirtyFlag=!0,e.dirtyFlag||this.dirtifyWorld(t,e))},r.prototype.dirtifyWorld=function(t,e){e.dirtyFlag||this.unfreezeParentToRoot(t),this.dirtifyWorldInternal(t,e),this.dirtifyToRoot(t,!0)},r.prototype.triggerPendingEvents=function(){var t=this,e=new Set,n=function(i,o){i.isConnected&&!e.has(i.entity)&&(t.boundsChangedEvent.detail=o,t.boundsChangedEvent.target=i,i.isMutationObserved?i.dispatchEvent(t.boundsChangedEvent):i.ownerDocument.defaultView.dispatchEvent(t.boundsChangedEvent,!0),e.add(i.entity))};this.pendingEvents.forEach(function(i){var o=F(i,2),a=o[0],s=o[1];s.affectChildren?a.forEach(function(l){n(l,s)}):n(a,s)}),this.clearPendingEvents(),e.clear()},r.prototype.clearPendingEvents=function(){this.pendingEvents=[]},r.prototype.dirtifyToRoot=function(t,e){e===void 0&&(e=!1);var n=t;for(n.renderable&&(n.renderable.dirty=!0);n;)p1(n),n=n.parentNode;e&&t.forEach(function(i){p1(i)}),this.informDependentDisplayObjects(t),this.pendingEvents.push([t,{affectChildren:e}])},r.prototype.updateDisplayObjectDependency=function(t,e,n,i){if(e&&e!==n){var o=this.displayObjectDependencyMap.get(e);if(o&&o[t]){var a=o[t].indexOf(i);o[t].splice(a,1)}}if(n){var s=this.displayObjectDependencyMap.get(n);s||(this.displayObjectDependencyMap.set(n,{}),s=this.displayObjectDependencyMap.get(n)),s[t]||(s[t]=[]),s[t].push(i)}},r.prototype.informDependentDisplayObjects=function(t){var e=this,n=this.displayObjectDependencyMap.get(t);n&&Object.keys(n).forEach(function(i){n[i].forEach(function(o){e.dirtifyToRoot(o,!0),o.dispatchEvent(new Vo(He.ATTR_MODIFIED,o,e,e,i,Vo.MODIFICATION,e,e)),o.isCustomElement&&o.isConnected&&o.attributeChangedCallback&&o.attributeChangedCallback(i,e,e)})})},r.prototype.getPosition=function(t){var e=t.transformable;return of(e.position,this.getWorldTransform(t,e))},r.prototype.getRotation=function(t){var e=t.transformable;return af(e.rotation,this.getWorldTransform(t,e))},r.prototype.getScale=function(t){var e=t.transformable;return Va(e.scaling,this.getWorldTransform(t,e))},r.prototype.getWorldTransform=function(t,e){return e===void 0&&(e=t.transformable),!e.localDirtyFlag&&!e.dirtyFlag||(t.parentNode&&t.parentNode.transformable&&this.getWorldTransform(t.parentNode),this.sync(t,e)),e.worldTransform},r.prototype.getLocalPosition=function(t){return t.transformable.localPosition},r.prototype.getLocalRotation=function(t){return t.transformable.localRotation},r.prototype.getLocalScale=function(t){return t.transformable.localScale},r.prototype.getLocalSkew=function(t){return t.transformable.localSkew},r.prototype.getLocalTransform=function(t){var e=t.transformable;return e.localDirtyFlag&&(this.calcLocalTransform(e),e.localDirtyFlag=!1),e.localTransform},r.prototype.setLocalTransform=function(t,e){var n=of(Ne(),e),i=af(bt(),e),o=Va(Ne(),e);this.setLocalScale(t,o),this.setLocalPosition(t,n),this.setLocalRotation(t,i)},r.prototype.resetLocalTransform=function(t){this.setLocalScale(t,[1,1,1]),this.setLocalPosition(t,[0,0,0]),this.setLocalEulerAngles(t,[0,0,0]),this.setLocalSkew(t,[0,0])},r.prototype.getTransformedGeometryBounds=function(t,e,n){e===void 0&&(e=!1);var i=this.getGeometryBounds(t,e);if(Mt.isEmpty(i))return null;var o=n||new Mt;return o.setFromTransformedAABB(i,this.getWorldTransform(t)),o},r.prototype.getGeometryBounds=function(t,e){e===void 0&&(e=!1);var n=t.geometry,i=e?n.renderBounds:n.contentBounds||null;return i||new Mt},r.prototype.getBounds=function(t,e){var n=this;e===void 0&&(e=!1);var i=t.renderable;if(!i.boundsDirty&&!e&&i.bounds)return i.bounds;if(!i.renderBoundsDirty&&e&&i.renderBounds)return i.renderBounds;var o=e?i.renderBounds:i.bounds,a=this.getTransformedGeometryBounds(t,e,o),s=t.childNodes;if(s.forEach(function(d){var h=n.getBounds(d,e);h&&(a?a.add(h):(a=o||new Mt,a.update(h.center,h.halfExtents)))}),a||(a=new Mt),e){var l=JC(t);if(l){var u=l.parsedStyle.clipPath.getBounds(e);a?u&&(a=u.intersection(a)):a.update(u.center,u.halfExtents)}}return e?(i.renderBounds=a,i.renderBoundsDirty=!1):(i.bounds=a,i.boundsDirty=!1),a},r.prototype.getLocalBounds=function(t){if(t.parentNode){var e=it();t.parentNode.transformable&&(e=ii(it(),this.getWorldTransform(t.parentNode)));var n=this.getBounds(t);if(!Mt.isEmpty(n)){var i=new Mt;return i.setFromTransformedAABB(n,e),i}}return this.getBounds(t)},r.prototype.getBoundingClientRect=function(t){var e,n,i,o=this.getGeometryBounds(t);Mt.isEmpty(o)||(i=new Mt,i.setFromTransformedAABB(o,this.getWorldTransform(t)));var a=(n=(e=t.ownerDocument)===null||e===void 0?void 0:e.defaultView)===null||n===void 0?void 0:n.getContextService().getBoundingClientRect();if(i){var s=F(i.getMin(),2),l=s[0],u=s[1],d=F(i.getMax(),2),h=d[0],v=d[1];return new Wo(l+((a==null?void 0:a.left)||0),u+((a==null?void 0:a.top)||0),h-l,v-u)}return new Wo((a==null?void 0:a.left)||0,(a==null?void 0:a.top)||0,0,0)},r.prototype.dirtifyWorldInternal=function(t,e){var n=this;if(!e.dirtyFlag){e.dirtyFlag=!0,e.frozen=!1,t.childNodes.forEach(function(o){var a=o.transformable;a.dirtyFlag||n.dirtifyWorldInternal(o,a)});var i=t.renderable;i&&(i.renderBoundsDirty=!0,i.boundsDirty=!0,i.dirty=!0)}},r.prototype.syncHierarchy=function(t){var e=t.transformable;if(!e.frozen){e.frozen=!0,(e.localDirtyFlag||e.dirtyFlag)&&this.sync(t,e);for(var n=t.childNodes,i=0;i<n.length;i++)this.syncHierarchy(n[i])}},r.prototype.sync=function(t,e){if(e.localDirtyFlag&&(this.calcLocalTransform(e),e.localDirtyFlag=!1),e.dirtyFlag){var n=t.parentNode,i=n&&n.transformable;n===null||!i?Go(e.worldTransform,e.localTransform):lr(e.worldTransform,i.worldTransform,e.localTransform),e.dirtyFlag=!1}},r.prototype.unfreezeParentToRoot=function(t){for(var e=t.parentNode;e;){var n=e.transformable;n&&(n.frozen=!1),e=e.parentNode}},r}(),Ao={MetricsString:"|\xC9q\xC5",BaselineSymbol:"M",BaselineMultiplier:1.4,HeightMultiplier:2,Newlines:[10,13],BreakingSpaces:[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288]},g1=/[a-zA-Z0-9\u00C0-\u00D6\u00D8-\u00f6\u00f8-\u00ff!"#$%&'()*+,-./:;]/,CP=/[!%),.:;?\]}'""]/,wP=/[$('"]/,xP=/[!),.:;?\]}'""]/,_P=/[([{'"]/,EP=/[)\]'"?!:;,.]/,SP=/[(['"...]/,TP=/[!%),.:;?\]}'"]/,bP=/[$([{'"#]/,LP=new RegExp("".concat(CP.source,"|").concat(xP.source,"|").concat(EP.source,"|").concat(TP.source)),RP=new RegExp("".concat(wP.source,"|").concat(_P.source,"|").concat(SP.source,"|").concat(bP.source)),MP=function(){function r(t){var e=this;this.runtime=t,this.fontMetricsCache={},this.shouldBreakByKinsokuShorui=function(n,i){return e.isBreakingSpace(i)?!1:!!(n&&(RP.exec(i)||LP.exec(n)))},this.trimByKinsokuShorui=function(n){var i=X([],F(n),!1),o=i[i.length-2];if(!o)return n;var a=o[o.length-1];return i[i.length-2]=o.slice(0,-1),i[i.length-1]=a+i[i.length-1],i}}return r.prototype.measureFont=function(t,e){if(this.fontMetricsCache[t])return this.fontMetricsCache[t];var n={ascent:0,descent:0,fontSize:0},i=this.runtime.offscreenCanvasCreator.getOrCreateCanvas(e),o=this.runtime.offscreenCanvasCreator.getOrCreateContext(e,{willReadFrequently:!0});o.font=t;var a=Ao.MetricsString+Ao.BaselineSymbol,s=Math.ceil(o.measureText(a).width),l=Math.ceil(o.measureText(Ao.BaselineSymbol).width),u=Ao.HeightMultiplier*l;l=l*Ao.BaselineMultiplier|0,i.width=s,i.height=u,o.fillStyle="#f00",o.fillRect(0,0,s,u),o.font=t,o.textBaseline="alphabetic",o.fillStyle="#000",o.fillText(a,0,l);var d=o.getImageData(0,0,s||1,u||1).data,h=d.length,v=s*4,p=0,g=0,m=!1;for(p=0;p<l;++p){for(var C=0;C<v;C+=4)if(d[g+C]!==255){m=!0;break}if(!m)g+=v;else break}for(n.ascent=l-p,g=h-v,m=!1,p=u;p>l;--p){for(var C=0;C<v;C+=4)if(d[g+C]!==255){m=!0;break}if(!m)g-=v;else break}return n.descent=p-l,n.fontSize=n.ascent+n.descent,this.fontMetricsCache[t]=n,n},r.prototype.measureText=function(t,e,n){var i=e.fontSize,o=e.wordWrap,a=e.lineHeight,s=e.lineWidth,l=e.textBaseline,u=e.textAlign,d=e.letterSpacing,h=e.textPath;e.textPathSide,e.textPathStartOffset;var v=e.leading,p=v===void 0?0:v,g=jN(e),m=this.measureFont(g,n);m.fontSize===0&&(m.fontSize=i,m.ascent=i);var C=this.runtime.offscreenCanvasCreator.getOrCreateContext(n);C.font=g,e.isOverflowing=!1;var w=o?this.wordWrap(t,e,n):t,_=w.split(/(?:\r\n|\r|\n)/),S=new Array(_.length),b=0;if(h){h.getTotalLength();for(var T=0;T<_.length;T++)var E=C.measureText(_[T]).width+(_[T].length-1)*d}else{for(var T=0;T<_.length;T++){var R=C.measureText(_[T]).width+(_[T].length-1)*d;S[T]=R,b=Math.max(b,R)}var E=b+s,O=a||m.fontSize+s,A=Math.max(O,m.fontSize+s)+(_.length-1)*(O+p);O+=p;var P=0;return l==="middle"?P=-A/2:l==="bottom"||l==="alphabetic"||l==="ideographic"?P=-A:(l==="top"||l==="hanging")&&(P=0),{font:g,width:E,height:A,lines:_,lineWidths:S,lineHeight:O,maxLineWidth:b,fontProperties:m,lineMetrics:S.map(function(k,z){var V=0;return u==="center"||u==="middle"?V-=k/2:(u==="right"||u==="end")&&(V-=k),new Wo(V-s/2,P+z*O,k+s,O)})}}},r.prototype.setGraphemeOnPath=function(){},r.prototype.wordWrap=function(t,e,n){var i=this,o=e.wordWrapWidth,a=o===void 0?0:o,s=e.letterSpacing,l=e.maxLines,u=l===void 0?1/0:l,d=e.textOverflow,h=this.runtime.offscreenCanvasCreator.getOrCreateContext(n),v=a+s,p="";d==="ellipsis"?p="...":d&&d!=="clip"&&(p=d);for(var g=[],m=0,C=0,w={},_=function(Z){return i.getFromCache(Z,s,w,h)},S=Array.from(p).reduce(function(Z,Q){return Z+_(Q)},0),b=Array.from(t),T=0;T<b.length;T++){var E=b[T],R=t[T-1],O=t[T+1],A=_(E);if(this.isNewline(E)){if(m++,m>=u){e.isOverflowing=!0;break}C=0,g[m]="";continue}if(C>0&&C+A>v){if(m+1>=u){if(e.isOverflowing=!0,S>0&&S<=v){for(var P=g[m].length,D=0,k=P,z=0;z<P;z++){var V=_(g[m][z]);if(D+V+S>v){k=z;break}D+=V}g[m]=(g[m]||"").slice(0,k)+p}break}if(m++,C=0,g[m]="",this.isBreakingSpace(E))continue;this.canBreakInLastChar(E)||(g=this.trimToBreakable(g),C=this.sumTextWidthByCache(g[m]||"",w)),this.shouldBreakByKinsokuShorui(E,O)&&(g=this.trimByKinsokuShorui(g),C+=_(R||""))}C+=A,g[m]=(g[m]||"")+E}return g.join(`
`)},r.prototype.isBreakingSpace=function(t){return typeof t!="string"?!1:Ao.BreakingSpaces.indexOf(t.charCodeAt(0))>=0},r.prototype.isNewline=function(t){return typeof t!="string"?!1:Ao.Newlines.indexOf(t.charCodeAt(0))>=0},r.prototype.trimToBreakable=function(t){var e=X([],F(t),!1),n=e[e.length-2],i=this.findBreakableIndex(n);if(i===-1||!n)return e;var o=n.slice(i,i+1),a=this.isBreakingSpace(o),s=i+1,l=i+(a?0:1);return e[e.length-1]+=n.slice(s,n.length),e[e.length-2]=n.slice(0,l),e},r.prototype.canBreakInLastChar=function(t){return!(t&&g1.test(t))},r.prototype.sumTextWidthByCache=function(t,e){return t.split("").reduce(function(n,i){if(!e[i])throw Error("cannot count the word without cache");return n+e[i]},0)},r.prototype.findBreakableIndex=function(t){for(var e=t.length-1;e>=0;e--)if(!g1.test(t[e]))return e;return-1},r.prototype.getFromCache=function(t,e,n,i){var o=n[t];if(typeof o!="number"){var a=t.length*e;o=i.measureText(t).width+a,n[t]=o}return o},r}(),K={},OP=function(){var r,t=new lP,e=new sP;return r={},r[$.CIRCLE]=new nP,r[$.ELLIPSE]=new iP,r[$.RECT]=t,r[$.IMAGE]=t,r[$.GROUP]=t,r[$.LINE]=new oP,r[$.TEXT]=new uP(K),r[$.POLYLINE]=e,r[$.POLYGON]=e,r[$.PATH]=new aP,r[$.HTML]=null,r[$.MESH]=null,r}(),IP=function(){var r,t=new yN,e=new Hv;return r={},r[ue.PERCENTAGE]=null,r[ue.NUMBER]=new EN,r[ue.ANGLE]=new pN,r[ue.DEFINED_PATH]=new gN,r[ue.PAINT]=t,r[ue.COLOR]=t,r[ue.FILTER]=new mN,r[ue.LENGTH]=e,r[ue.LENGTH_PERCENTAGE]=e,r[ue.LENGTH_PERCENTAGE_12]=new CN,r[ue.LENGTH_PERCENTAGE_14]=new wN,r[ue.COORDINATE]=new xN,r[ue.OFFSET_DISTANCE]=new SN,r[ue.OPACITY_VALUE]=new TN,r[ue.PATH]=new bN,r[ue.LIST_OF_POINTS]=new LN,r[ue.SHADOW_BLUR]=new RN,r[ue.TEXT]=new MN,r[ue.TEXT_TRANSFORM]=new ON,r[ue.TRANSFORM]=new eP,r[ue.TRANSFORM_ORIGIN]=new tP,r[ue.Z_INDEX]=new rP,r[ue.MARKER]=new _N,r}(),AP=function(){return typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}};K.CameraContribution=kC;K.AnimationTimeline=null;K.EasingFunction=null;K.offscreenCanvasCreator=new cP;K.sceneGraphSelector=new gP;K.sceneGraphService=new mP(K);K.textService=new MP(K);K.geometryUpdaterFactory=OP;K.CSSPropertySyntaxFactory=IP;K.styleValueRegistry=new vN(K);K.layoutRegistry=null;K.globalThis=AP();K.enableCSSParsing=!0;K.enableDataset=!1;K.enableStyleSyntax=!0;K.enableSizeAttenuation=!1;var NP=0,y1=new Vo(He.INSERTED,null,"","","",0,"",""),m1=new Vo(He.REMOVED,null,"","","",0,"",""),PP=new Ut(He.DESTROY),BP=function(r){oe(t,r);function t(){var e=r.apply(this,X([],F(arguments),!1))||this;return e.entity=NP++,e.renderable={bounds:void 0,boundsDirty:!0,renderBounds:void 0,renderBoundsDirty:!0,dirtyRenderBounds:void 0,dirty:!1},e.cullable={strategy:Oc.Standard,visibilityPlaneMask:-1,visible:!0,enable:!0},e.transformable={dirtyFlag:!1,localDirtyFlag:!1,frozen:!1,localPosition:[0,0,0],localRotation:[0,0,0,1],localScale:[1,1,1],localTransform:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],localSkew:[0,0],position:[0,0,0],rotation:[0,0,0,1],scaling:[1,1,1],worldTransform:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],origin:[0,0,0]},e.sortable={dirty:!1,sorted:void 0,renderOrder:0,dirtyChildren:[],dirtyReason:void 0},e.geometry={contentBounds:void 0,renderBounds:void 0},e.rBushNode={aabb:void 0},e.namespaceURI="g",e.scrollLeft=0,e.scrollTop=0,e.clientTop=0,e.clientLeft=0,e.destroyed=!1,e.style={},e.computedStyle=K.enableCSSParsing?{anchor:nt,opacity:nt,fillOpacity:nt,strokeOpacity:nt,fill:nt,stroke:nt,transform:nt,transformOrigin:nt,visibility:nt,pointerEvents:nt,lineWidth:nt,lineCap:nt,lineJoin:nt,increasedLineWidthForHitTesting:nt,fontSize:nt,fontFamily:nt,fontStyle:nt,fontWeight:nt,fontVariant:nt,textAlign:nt,textBaseline:nt,textTransform:nt,zIndex:nt,filter:nt,shadowType:nt}:null,e.parsedStyle={},e.attributes={},e}return Object.defineProperty(t.prototype,"className",{get:function(){return this.getAttribute("class")||""},set:function(e){this.setAttribute("class",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"classList",{get:function(){return this.className.split(" ").filter(function(e){return e!==""})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tagName",{get:function(){return this.nodeName},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"children",{get:function(){return this.childNodes},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"childElementCount",{get:function(){return this.childNodes.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"firstElementChild",{get:function(){return this.firstChild},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastElementChild",{get:function(){return this.lastChild},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parentElement",{get:function(){return this.parentNode},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextSibling",{get:function(){if(this.parentNode){var e=this.parentNode.childNodes.indexOf(this);return this.parentNode.childNodes[e+1]||null}return null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"previousSibling",{get:function(){if(this.parentNode){var e=this.parentNode.childNodes.indexOf(this);return this.parentNode.childNodes[e-1]||null}return null},enumerable:!1,configurable:!0}),t.prototype.cloneNode=function(e){throw new Error(je)},t.prototype.appendChild=function(e,n){var i;if(e.destroyed)throw new Error(cA);return K.sceneGraphService.attach(e,this,n),!((i=this.ownerDocument)===null||i===void 0)&&i.defaultView&&this.ownerDocument.defaultView.mountChildren(e),y1.relatedNode=this,e.dispatchEvent(y1),e},t.prototype.insertBefore=function(e,n){if(!n)this.appendChild(e);else{e.parentElement&&e.parentElement.removeChild(e);var i=this.childNodes.indexOf(n);i===-1?this.appendChild(e):this.appendChild(e,i)}return e},t.prototype.replaceChild=function(e,n){var i=this.childNodes.indexOf(n);return this.removeChild(n),this.appendChild(e,i),n},t.prototype.removeChild=function(e){var n;return m1.relatedNode=this,e.dispatchEvent(m1),!((n=e.ownerDocument)===null||n===void 0)&&n.defaultView&&e.ownerDocument.defaultView.unmountChildren(e),K.sceneGraphService.detach(e),e},t.prototype.removeChildren=function(){for(var e=this.childNodes.length-1;e>=0;e--){var n=this.childNodes[e];this.removeChild(n)}},t.prototype.destroyChildren=function(){for(var e=this.childNodes.length-1;e>=0;e--){var n=this.childNodes[e];n.childNodes.length&&n.destroyChildren(),n.destroy()}},t.prototype.matches=function(e){return K.sceneGraphService.matches(e,this)},t.prototype.getElementById=function(e){return K.sceneGraphService.querySelector("#".concat(e),this)},t.prototype.getElementsByName=function(e){return K.sceneGraphService.querySelectorAll('[name="'.concat(e,'"]'),this)},t.prototype.getElementsByClassName=function(e){return K.sceneGraphService.querySelectorAll(".".concat(e),this)},t.prototype.getElementsByTagName=function(e){return K.sceneGraphService.querySelectorAll(e,this)},t.prototype.querySelector=function(e){return K.sceneGraphService.querySelector(e,this)},t.prototype.querySelectorAll=function(e){return K.sceneGraphService.querySelectorAll(e,this)},t.prototype.closest=function(e){var n=this;do{if(K.sceneGraphService.matches(e,n))return n;n=n.parentElement}while(n!==null);return null},t.prototype.find=function(e){var n=this,i=null;return this.forEach(function(o){return o!==n&&e(o)?(i=o,!0):!1}),i},t.prototype.findAll=function(e){var n=this,i=[];return this.forEach(function(o){o!==n&&e(o)&&i.push(o)}),i},t.prototype.after=function(){for(var e=this,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];if(this.parentNode){var o=this.parentNode.childNodes.indexOf(this);n.forEach(function(a,s){var l;return(l=e.parentNode)===null||l===void 0?void 0:l.appendChild(a,o+s+1)})}},t.prototype.before=function(){for(var e,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];if(this.parentNode){var o=this.parentNode.childNodes.indexOf(this),a=F(n),s=a[0],l=a.slice(1);this.parentNode.appendChild(s,o),(e=s).after.apply(e,X([],F(l),!1))}},t.prototype.replaceWith=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.after.apply(this,X([],F(e),!1)),this.remove()},t.prototype.append=function(){for(var e=this,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];n.forEach(function(o){return e.appendChild(o)})},t.prototype.prepend=function(){for(var e=this,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];n.forEach(function(o,a){return e.appendChild(o,a)})},t.prototype.replaceChildren=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];for(;this.childNodes.length&&this.firstChild;)this.removeChild(this.firstChild);this.append.apply(this,X([],F(e),!1))},t.prototype.remove=function(){return this.parentNode?this.parentNode.removeChild(this):this},t.prototype.destroy=function(){this.dispatchEvent(PP),this.remove(),this.emitter.removeAllListeners(),this.destroyed=!0},t.prototype.getGeometryBounds=function(){return K.sceneGraphService.getGeometryBounds(this)},t.prototype.getRenderBounds=function(){return K.sceneGraphService.getBounds(this,!0)},t.prototype.getBounds=function(){return K.sceneGraphService.getBounds(this)},t.prototype.getLocalBounds=function(){return K.sceneGraphService.getLocalBounds(this)},t.prototype.getBoundingClientRect=function(){return K.sceneGraphService.getBoundingClientRect(this)},t.prototype.getClientRects=function(){return[this.getBoundingClientRect()]},t.prototype.computedStyleMap=function(){return new Map(Object.entries(this.computedStyle))},t.prototype.getAttributeNames=function(){return Object.keys(this.attributes)},t.prototype.getAttribute=function(e){if(_A(e))return K.enableCSSParsing?null:void 0;var n=this.attributes[e];if(n===void 0){var i=bc(e);return n=this.attributes[i],K.enableCSSParsing&&de(n)?null:n}else return n},t.prototype.hasAttribute=function(e){return this.getAttributeNames().includes(e)},t.prototype.hasAttributes=function(){return!!this.getAttributeNames().length},t.prototype.removeAttribute=function(e){this.setAttribute(e,null),delete this.attributes[e]},t.prototype.setAttribute=function(e,n,i){this.attributes[e]=n},t.prototype.getAttributeNS=function(e,n){throw new Error(je)},t.prototype.getAttributeNode=function(e){throw new Error(je)},t.prototype.getAttributeNodeNS=function(e,n){throw new Error(je)},t.prototype.hasAttributeNS=function(e,n){throw new Error(je)},t.prototype.removeAttributeNS=function(e,n){throw new Error(je)},t.prototype.removeAttributeNode=function(e){throw new Error(je)},t.prototype.setAttributeNS=function(e,n,i){throw new Error(je)},t.prototype.setAttributeNode=function(e){throw new Error(je)},t.prototype.setAttributeNodeNS=function(e){throw new Error(je)},t.prototype.toggleAttribute=function(e,n){throw new Error(je)},t}(zt);function Ve(r){return!!(r!=null&&r.nodeName)}var Ti=new Vo(He.ATTR_MODIFIED,null,null,null,null,Vo.MODIFICATION,null,null),DP={anchor:"",opacity:"",fillOpacity:"",strokeOpacity:"",fill:"",stroke:"",transform:"",transformOrigin:"",visibility:"",pointerEvents:"",lineWidth:"",lineCap:"",lineJoin:"",increasedLineWidthForHitTesting:"",fontSize:"",fontFamily:"",fontStyle:"",fontWeight:"",fontVariant:"",textAlign:"",textBaseline:"",textTransform:"",zIndex:"",filter:"",shadowType:""},aw={anchor:[0,0],fill:Mc,stroke:Mc,transform:[],zIndex:0,filter:[],shadowType:"outer",miterLimit:10},FP=N(N({},aw),{opacity:1,fillOpacity:1,strokeOpacity:1,visibility:"visible",pointerEvents:"auto",lineWidth:1,lineCap:"butt",lineJoin:"miter",increasedLineWidthForHitTesting:0,fillRule:"nonzero"}),kP=["opacity","fillOpacity","strokeOpacity","transformOrigin","visibility","pointerEvents","lineWidth","lineCap","lineJoin","increasedLineWidthForHitTesting"],HP=X(X([],F(kP),!1),["fontSize","fontFamily","fontStyle","fontWeight","fontVariant","textAlign","textBaseline","textTransform"],!1),C1="data-",Gr=function(r){oe(t,r);function t(e){var n,i=r.call(this)||this;i.isCustomElement=!1,i.isMutationObserved=!1,i.activeAnimations=[],i.getClip=function(){return this.style.clipPath||null},i.config=e,i.config.interactive=(n=i.config.capture)!==null&&n!==void 0?n:i.config.interactive,i.id=i.config.id||"",i.name=i.config.name||"",(i.config.className||i.config.class)&&(i.className=i.config.className||i.config.class),i.nodeName=i.config.type||$.GROUP,i.config.style=i.config.style||i.config.attrs||{},Object.assign(i.config.style,i.config.attrs),i.config.visible!=null&&(i.config.style.visibility=i.config.visible===!1?"hidden":"visible"),i.config.interactive!=null&&(i.config.style.pointerEvents=i.config.interactive===!1?"none":"auto"),Object.assign(i.parsedStyle,K.enableCSSParsing?aw:FP,i.config.initialParsedStyle),K.enableCSSParsing&&Object.assign(i.attributes,DP),i.initAttributes(i.config.style);var o=K.globalThis.Proxy?K.globalThis.Proxy:function(){};return K.enableDataset&&(i.dataset=new o({},{get:function(a,s){var l="".concat(C1).concat(r1(s));return a[l]!==void 0?a[l]:i.getAttribute(l)},set:function(a,s,l){return i.setAttribute("".concat(C1).concat(r1(s)),l),!0}})),K.enableStyleSyntax&&(i.style=new o({setProperty:function(a,s){i.setAttribute(a,s)},getPropertyValue:function(a){return i.getAttribute(a)},removeProperty:function(a){i.removeAttribute(a)},item:function(){return""}},{get:function(a,s){return a[s]!==void 0?a[s]:i.getAttribute(s)},set:function(a,s,l){return i.setAttribute(s,l),!0}})),i}return t.prototype.destroy=function(){r.prototype.destroy.call(this),this.getAnimations().forEach(function(e){e.cancel()})},t.prototype.cloneNode=function(e,n){var i=N({},this.attributes);for(var o in i){var a=i[o];Ve(a)&&o!=="clipPath"&&o!=="offsetPath"&&o!=="textPath"&&(i[o]=a.cloneNode(e)),n&&(i[o]=n(o,a))}var s=new this.constructor({id:this.id,name:this.name,className:this.name,interactive:this.interactive,style:i});return s.setLocalTransform(this.getLocalTransform()),e&&this.children.forEach(function(l){if(!l.style.isMarker){var u=l.cloneNode(e);s.appendChild(u)}}),s},t.prototype.initAttributes=function(e){e===void 0&&(e={});var n=this.renderable,i={forceUpdateGeometry:!0};K.enableCSSParsing&&(i.usedAttributes=HP);var o={};for(var a in e){var s=bc(a);o[s]=e[a]}K.styleValueRegistry.processProperties(this,o,i),n.dirty=!0},t.prototype.setAttribute=function(e,n,i,o){i===void 0&&(i=!1),o===void 0&&(o=!0);var a=bc(e);mt(n)||(i||n!==this.attributes[a])&&(this.internalSetAttribute(a,n,{memoize:o}),r.prototype.setAttribute.call(this,a,n))},t.prototype.internalSetAttribute=function(e,n,i){var o;i===void 0&&(i={});var a=this.renderable,s=this.attributes[e],l=this.parsedStyle[e];K.styleValueRegistry.processProperties(this,(o={},o[e]=n,o),i),a.dirty=!0;var u=this.parsedStyle[e];this.isConnected&&(Ti.relatedNode=this,Ti.prevValue=s,Ti.newValue=n,Ti.attrName=e,Ti.prevParsedValue=l,Ti.newParsedValue=u,this.isMutationObserved?this.dispatchEvent(Ti):(Ti.target=this,this.ownerDocument.defaultView.dispatchEvent(Ti,!0))),(this.isCustomElement&&this.isConnected||!this.isCustomElement)&&this.attributeChangedCallback&&this.attributeChangedCallback(e,s,n,l,u)},t.prototype.getBBox=function(){var e=this.getBounds(),n=F(e.getMin(),2),i=n[0],o=n[1],a=F(e.getMax(),2),s=a[0],l=a[1];return new Wo(i,o,s-i,l-o)},t.prototype.setOrigin=function(e,n,i){return n===void 0&&(n=0),i===void 0&&(i=0),K.sceneGraphService.setOrigin(this,yr(e,n,i)),this},t.prototype.getOrigin=function(){return K.sceneGraphService.getOrigin(this)},t.prototype.setPosition=function(e,n,i){return n===void 0&&(n=0),i===void 0&&(i=0),K.sceneGraphService.setPosition(this,yr(e,n,i)),this},t.prototype.setLocalPosition=function(e,n,i){return n===void 0&&(n=0),i===void 0&&(i=0),K.sceneGraphService.setLocalPosition(this,yr(e,n,i)),this},t.prototype.translate=function(e,n,i){return n===void 0&&(n=0),i===void 0&&(i=0),K.sceneGraphService.translate(this,yr(e,n,i)),this},t.prototype.translateLocal=function(e,n,i){return n===void 0&&(n=0),i===void 0&&(i=0),K.sceneGraphService.translateLocal(this,yr(e,n,i)),this},t.prototype.getPosition=function(){return K.sceneGraphService.getPosition(this)},t.prototype.getLocalPosition=function(){return K.sceneGraphService.getLocalPosition(this)},t.prototype.scale=function(e,n,i){return this.scaleLocal(e,n,i)},t.prototype.scaleLocal=function(e,n,i){return typeof e=="number"&&(n=n||e,i=i||e,e=yr(e,n,i)),K.sceneGraphService.scaleLocal(this,e),this},t.prototype.setLocalScale=function(e,n,i){return typeof e=="number"&&(n=n||e,i=i||e,e=yr(e,n,i)),K.sceneGraphService.setLocalScale(this,e),this},t.prototype.getLocalScale=function(){return K.sceneGraphService.getLocalScale(this)},t.prototype.getScale=function(){return K.sceneGraphService.getScale(this)},t.prototype.getEulerAngles=function(){var e=F(Vh(Ne(),K.sceneGraphService.getWorldTransform(this)),3),n=e[2];return Cn(n)},t.prototype.getLocalEulerAngles=function(){var e=F(Vh(Ne(),K.sceneGraphService.getLocalRotation(this)),3),n=e[2];return Cn(n)},t.prototype.setEulerAngles=function(e){return K.sceneGraphService.setEulerAngles(this,0,0,e),this},t.prototype.setLocalEulerAngles=function(e){return K.sceneGraphService.setLocalEulerAngles(this,0,0,e),this},t.prototype.rotateLocal=function(e,n,i){return de(n)&&de(i)?K.sceneGraphService.rotateLocal(this,0,0,e):K.sceneGraphService.rotateLocal(this,e,n,i),this},t.prototype.rotate=function(e,n,i){return de(n)&&de(i)?K.sceneGraphService.rotate(this,0,0,e):K.sceneGraphService.rotate(this,e,n,i),this},t.prototype.setRotation=function(e,n,i,o){return K.sceneGraphService.setRotation(this,e,n,i,o),this},t.prototype.setLocalRotation=function(e,n,i,o){return K.sceneGraphService.setLocalRotation(this,e,n,i,o),this},t.prototype.setLocalSkew=function(e,n){return K.sceneGraphService.setLocalSkew(this,e,n),this},t.prototype.getRotation=function(){return K.sceneGraphService.getRotation(this)},t.prototype.getLocalRotation=function(){return K.sceneGraphService.getLocalRotation(this)},t.prototype.getLocalSkew=function(){return K.sceneGraphService.getLocalSkew(this)},t.prototype.getLocalTransform=function(){return K.sceneGraphService.getLocalTransform(this)},t.prototype.getWorldTransform=function(){return K.sceneGraphService.getWorldTransform(this)},t.prototype.setLocalTransform=function(e){return K.sceneGraphService.setLocalTransform(this,e),this},t.prototype.resetLocalTransform=function(){K.sceneGraphService.resetLocalTransform(this)},t.prototype.getAnimations=function(){return this.activeAnimations},t.prototype.animate=function(e,n){var i,o=(i=this.ownerDocument)===null||i===void 0?void 0:i.timeline;return o?o.play(this,e,n):null},t.prototype.isVisible=function(){var e;return((e=this.parsedStyle)===null||e===void 0?void 0:e.visibility)==="visible"},Object.defineProperty(t.prototype,"interactive",{get:function(){return this.isInteractive()},set:function(e){this.style.pointerEvents=e?"auto":"none"},enumerable:!1,configurable:!0}),t.prototype.isInteractive=function(){var e;return((e=this.parsedStyle)===null||e===void 0?void 0:e.pointerEvents)!=="none"},t.prototype.isCulled=function(){return!!(this.cullable&&this.cullable.enable&&!this.cullable.visible)},t.prototype.toFront=function(){return this.parentNode&&(this.style.zIndex=Math.max.apply(Math,X([],F(this.parentNode.children.map(function(e){return Number(e.style.zIndex)})),!1))+1),this},t.prototype.toBack=function(){return this.parentNode&&(this.style.zIndex=Math.min.apply(Math,X([],F(this.parentNode.children.map(function(e){return Number(e.style.zIndex)})),!1))-1),this},t.prototype.getConfig=function(){return this.config},t.prototype.attr=function(){for(var e=this,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var o=F(n,2),a=o[0],s=o[1];return a?Ku(a)?(Object.keys(a).forEach(function(l){e.setAttribute(l,a[l])}),this):n.length===2?(this.setAttribute(a,s),this):this.attributes[a]:this.attributes},t.prototype.getMatrix=function(e){var n=e||this.getWorldTransform(),i=F(of(Ne(),n),2),o=i[0],a=i[1],s=F(Va(Ne(),n),2),l=s[0],u=s[1],d=af(bt(),n),h=F(Vh(Ne(),d),3),v=h[0],p=h[2];return aA(v||p,o,a,l,u)},t.prototype.getLocalMatrix=function(){return this.getMatrix(this.getLocalTransform())},t.prototype.setMatrix=function(e){var n=F(Qy(e),5),i=n[0],o=n[1],a=n[2],s=n[3],l=n[4];this.setEulerAngles(l).setPosition(i,o).setLocalScale(a,s)},t.prototype.setLocalMatrix=function(e){var n=F(Qy(e),5),i=n[0],o=n[1],a=n[2],s=n[3],l=n[4];this.setLocalEulerAngles(l).setLocalPosition(i,o).setLocalScale(a,s)},t.prototype.show=function(){K.enableCSSParsing?this.style.visibility="visible":this.forEach(function(e){e.style.visibility="visible"})},t.prototype.hide=function(){K.enableCSSParsing?this.style.visibility="hidden":this.forEach(function(e){e.style.visibility="hidden"})},t.prototype.getCount=function(){return this.childElementCount},t.prototype.getParent=function(){return this.parentElement},t.prototype.getChildren=function(){return this.children},t.prototype.getFirst=function(){return this.firstElementChild},t.prototype.getLast=function(){return this.lastElementChild},t.prototype.getChildByIndex=function(e){return this.children[e]||null},t.prototype.add=function(e,n){return this.appendChild(e,n)},t.prototype.setClip=function(e){this.style.clipPath=e},t.prototype.set=function(e,n){this.config[e]=n},t.prototype.get=function(e){return this.config[e]},t.prototype.moveTo=function(e,n,i){return n===void 0&&(n=0),i===void 0&&(i=0),this.setPosition(e,n,i),this},t.prototype.move=function(e,n,i){return n===void 0&&(n=0),i===void 0&&(i=0),this.setPosition(e,n,i),this},t.prototype.setZIndex=function(e){return this.style.zIndex=e,this},t}(BP),sw=function(r){oe(t,r);function t(e){e===void 0&&(e={});var n=e.style,i=_r(e,["style"]);return r.call(this,N({type:$.CIRCLE,style:K.enableCSSParsing?N({cx:"",cy:"",r:""},n):N({},n),initialParsedStyle:{anchor:[.5,.5],transformOrigin:K.enableCSSParsing?null:[ff,ff]}},i))||this}return t}(Gr);(function(r){oe(t,r);function t(e){e===void 0&&(e={});var n=this,i=e.style,o=_r(e,["style"]);return n=r.call(this,N({style:K.enableCSSParsing?N({x:"",y:""},i):N({},i)},o))||this,n.isCustomElement=!0,n}return t})(Gr);var zP=function(r){oe(t,r);function t(e){e===void 0&&(e={});var n=e.style,i=_r(e,["style"]);return r.call(this,N({type:$.ELLIPSE,style:K.enableCSSParsing?N({cx:"",cy:"",rx:"",ry:""},n):N({},n),initialParsedStyle:{anchor:[.5,.5],transformOrigin:K.enableCSSParsing?null:[ff,ff]}},i))||this}return t}(Gr),ft=function(r){oe(t,r);function t(e){e===void 0&&(e={});var n=e.style,i=_r(e,["style"]);return r.call(this,N({type:$.GROUP,style:K.enableCSSParsing?N({x:"",y:"",width:"",height:""},n):N({},n)},i))||this}return t}(Gr),GP=function(r){oe(t,r);function t(e){e===void 0&&(e={});var n=this,i=e.style,o=_r(e,["style"]);return n=r.call(this,N({type:$.HTML,style:K.enableCSSParsing?N({x:"",y:"",width:"auto",height:"auto",innerHTML:""},i):N({},i)},o))||this,n.cullable.enable=!1,n}return t.prototype.getDomElement=function(){return this.parsedStyle.$el},t.prototype.getBoundingClientRect=function(){if(this.parsedStyle.$el)return this.parsedStyle.$el.getBoundingClientRect();var e=this.parsedStyle,n=e.x,i=e.y,o=e.width,a=e.height;return new Wo(n,i,o,a)},t.prototype.getClientRects=function(){return[this.getBoundingClientRect()]},t.prototype.getBounds=function(){var e,n,i=this.getBoundingClientRect(),o=(n=(e=this.ownerDocument)===null||e===void 0?void 0:e.defaultView)===null||n===void 0?void 0:n.getContextService().getBoundingClientRect(),a=new Mt,s=i.left-((o==null?void 0:o.left)||0),l=i.top-((o==null?void 0:o.top)||0);return a.setMinMax([s,l,0],[s+i.width,l+i.height,0]),a},t.prototype.getLocalBounds=function(){if(this.parentNode){var e=ii(it(),this.parentNode.getWorldTransform()),n=this.getBounds();if(!Mt.isEmpty(n)){var i=new Mt;return i.setFromTransformedAABB(n,e),i}}return this.getBounds()},t}(Gr),lw=function(r){oe(t,r);function t(e){e===void 0&&(e={});var n=e.style,i=_r(e,["style"]);return r.call(this,N({type:$.IMAGE,style:K.enableCSSParsing?N({x:"",y:"",img:"",width:"",height:""},n):N({},n)},i))||this}return t}(Gr),Ia=function(r){oe(t,r);function t(e){e===void 0&&(e={});var n=this,i=e.style,o=_r(e,["style"]);n=r.call(this,N({type:$.LINE,style:N({x1:0,y1:0,x2:0,y2:0,z1:0,z2:0},i)},o))||this,n.markerStartAngle=0,n.markerEndAngle=0;var a=n.parsedStyle,s=a.markerStart,l=a.markerEnd;return s&&Ve(s)&&(n.markerStartAngle=s.getLocalEulerAngles(),n.appendChild(s)),l&&Ve(l)&&(n.markerEndAngle=l.getLocalEulerAngles(),n.appendChild(l)),n.transformMarker(!0),n.transformMarker(!1),n}return t.prototype.attributeChangedCallback=function(e,n,i,o,a){e==="x1"||e==="y1"||e==="x2"||e==="y2"||e==="markerStartOffset"||e==="markerEndOffset"?(this.transformMarker(!0),this.transformMarker(!1)):e==="markerStart"?(o&&Ve(o)&&(this.markerStartAngle=0,o.remove()),a&&Ve(a)&&(this.markerStartAngle=a.getLocalEulerAngles(),this.appendChild(a),this.transformMarker(!0))):e==="markerEnd"&&(o&&Ve(o)&&(this.markerEndAngle=0,o.remove()),a&&Ve(a)&&(this.markerEndAngle=a.getLocalEulerAngles(),this.appendChild(a),this.transformMarker(!1)))},t.prototype.transformMarker=function(e){var n=this.parsedStyle,i=n.markerStart,o=n.markerEnd,a=n.markerStartOffset,s=n.markerEndOffset,l=n.x1,u=n.x2,d=n.y1,h=n.y2,v=n.defX,p=n.defY,g=e?i:o;if(!(!g||!Ve(g))){var m=0,C,w,_,S,b,T;e?(_=l-v,S=d-p,C=u-l,w=h-d,b=a||0,T=this.markerStartAngle):(_=u-v,S=h-p,C=l-u,w=d-h,b=s||0,T=this.markerEndAngle),m=Math.atan2(w,C),g.setLocalEulerAngles(m*180/Math.PI+T),g.setLocalPosition(_+Math.cos(m)*b,S+Math.sin(m)*b)}},t.prototype.getPoint=function(e,n){n===void 0&&(n=!1);var i=this.parsedStyle,o=i.x1,a=i.y1,s=i.x2,l=i.y2,u=i.defX,d=i.defY,h=BC(o,a,s,l,e),v=h.x,p=h.y,g=wn(Ne(),et(v-u,p-d,0),n?this.getWorldTransform():this.getLocalTransform());return new Yt(g[0],g[1])},t.prototype.getPointAtLength=function(e,n){return n===void 0&&(n=!1),this.getPoint(e/this.getTotalLength(),n)},t.prototype.getTotalLength=function(){var e=this.parsedStyle,n=e.x1,i=e.y1,o=e.x2,a=e.y2;return PC(n,i,o,a)},t}(Gr),Fc=function(r){oe(t,r);function t(e){e===void 0&&(e={});var n=this,i=e.style,o=_r(e,["style"]);n=r.call(this,N({type:$.PATH,style:K.enableCSSParsing?N({path:"",miterLimit:""},i):N({},i),initialParsedStyle:K.enableCSSParsing?null:{miterLimit:4,path:N({},zC)}},o))||this,n.markerStartAngle=0,n.markerEndAngle=0,n.markerMidList=[];var a=n.parsedStyle,s=a.markerStart,l=a.markerEnd,u=a.markerMid;return s&&Ve(s)&&(n.markerStartAngle=s.getLocalEulerAngles(),n.appendChild(s)),u&&Ve(u)&&n.placeMarkerMid(u),l&&Ve(l)&&(n.markerEndAngle=l.getLocalEulerAngles(),n.appendChild(l)),n.transformMarker(!0),n.transformMarker(!1),n}return t.prototype.attributeChangedCallback=function(e,n,i,o,a){e==="path"?(this.transformMarker(!0),this.transformMarker(!1),this.placeMarkerMid(this.parsedStyle.markerMid)):e==="markerStartOffset"||e==="markerEndOffset"?(this.transformMarker(!0),this.transformMarker(!1)):e==="markerStart"?(o&&Ve(o)&&(this.markerStartAngle=0,o.remove()),a&&Ve(a)&&(this.markerStartAngle=a.getLocalEulerAngles(),this.appendChild(a),this.transformMarker(!0))):e==="markerEnd"?(o&&Ve(o)&&(this.markerEndAngle=0,o.remove()),a&&Ve(a)&&(this.markerEndAngle=a.getLocalEulerAngles(),this.appendChild(a),this.transformMarker(!1))):e==="markerMid"&&this.placeMarkerMid(a)},t.prototype.transformMarker=function(e){var n=this.parsedStyle,i=n.markerStart,o=n.markerEnd,a=n.markerStartOffset,s=n.markerEndOffset,l=n.defX,u=n.defY,d=e?i:o;if(!(!d||!Ve(d))){var h=0,v,p,g,m,C,w;if(e){var _=F(this.getStartTangent(),2),S=_[0],b=_[1];g=b[0]-l,m=b[1]-u,v=S[0]-b[0],p=S[1]-b[1],C=a||0,w=this.markerStartAngle}else{var T=F(this.getEndTangent(),2),S=T[0],b=T[1];g=b[0]-l,m=b[1]-u,v=S[0]-b[0],p=S[1]-b[1],C=s||0,w=this.markerEndAngle}h=Math.atan2(p,v),d.setLocalEulerAngles(h*180/Math.PI+w),d.setLocalPosition(g+Math.cos(h)*C,m+Math.sin(h)*C)}},t.prototype.placeMarkerMid=function(e){var n=this.parsedStyle,i=n.path.segments,o=n.defX,a=n.defY;if(this.markerMidList.forEach(function(v){v.remove()}),e&&Ve(e))for(var s=1;s<i.length-1;s++){var l=F(i[s].currentPoint,2),u=l[0],d=l[1],h=s===1?e:e.cloneNode(!0);this.markerMidList.push(h),this.appendChild(h),h.setLocalPosition(u-o,d-a)}},t.prototype.getTotalLength=function(){return Ic(this)},t.prototype.getPointAtLength=function(e,n){n===void 0&&(n=!1);var i=this.parsedStyle,o=i.defX,a=i.defY,s=i.path.absolutePath,l=bI(s,e),u=l.x,d=l.y,h=wn(Ne(),et(u-o,d-a,0),n?this.getWorldTransform():this.getLocalTransform());return new Yt(h[0],h[1])},t.prototype.getPoint=function(e,n){return n===void 0&&(n=!1),this.getPointAtLength(e*Ic(this),n)},t.prototype.getStartTangent=function(){var e=this.parsedStyle.path.segments,n=[];if(e.length>1){var i=e[0].currentPoint,o=e[1].currentPoint,a=e[1].startTangent;n=[],a?(n.push([i[0]-a[0],i[1]-a[1]]),n.push([i[0],i[1]])):(n.push([o[0],o[1]]),n.push([i[0],i[1]]))}return n},t.prototype.getEndTangent=function(){var e=this.parsedStyle.path.segments,n=e.length,i=[];if(n>1){var o=e[n-2].currentPoint,a=e[n-1].currentPoint,s=e[n-1].endTangent;i=[],s?(i.push([a[0]-s[0],a[1]-s[1]]),i.push([a[0],a[1]])):(i.push([o[0],o[1]]),i.push([a[0],a[1]]))}return i},t}(Gr),Gv=function(r){oe(t,r);function t(e){e===void 0&&(e={});var n=this,i=e.style,o=_r(e,["style"]);n=r.call(this,N({type:$.POLYGON,style:K.enableCSSParsing?N({points:"",miterLimit:"",isClosed:!0},i):N({},i),initialParsedStyle:K.enableCSSParsing?null:{points:{points:[],totalLength:0,segments:[]},miterLimit:4,isClosed:!0}},o))||this,n.markerStartAngle=0,n.markerEndAngle=0,n.markerMidList=[];var a=n.parsedStyle,s=a.markerStart,l=a.markerEnd,u=a.markerMid;return s&&Ve(s)&&(n.markerStartAngle=s.getLocalEulerAngles(),n.appendChild(s)),u&&Ve(u)&&n.placeMarkerMid(u),l&&Ve(l)&&(n.markerEndAngle=l.getLocalEulerAngles(),n.appendChild(l)),n.transformMarker(!0),n.transformMarker(!1),n}return t.prototype.attributeChangedCallback=function(e,n,i,o,a){e==="points"?(this.transformMarker(!0),this.transformMarker(!1),this.placeMarkerMid(this.parsedStyle.markerMid)):e==="markerStartOffset"||e==="markerEndOffset"?(this.transformMarker(!0),this.transformMarker(!1)):e==="markerStart"?(o&&Ve(o)&&(this.markerStartAngle=0,o.remove()),a&&Ve(a)&&(this.markerStartAngle=a.getLocalEulerAngles(),this.appendChild(a),this.transformMarker(!0))):e==="markerEnd"?(o&&Ve(o)&&(this.markerEndAngle=0,o.remove()),a&&Ve(a)&&(this.markerEndAngle=a.getLocalEulerAngles(),this.appendChild(a),this.transformMarker(!1))):e==="markerMid"&&this.placeMarkerMid(a)},t.prototype.transformMarker=function(e){var n=this.parsedStyle,i=n.markerStart,o=n.markerEnd,a=n.markerStartOffset,s=n.markerEndOffset,l=n.points,u=n.defX,d=n.defY,h=(l||{}).points,v=e?i:o;if(!(!v||!Ve(v)||!h)){var p=0,g,m,C,w,_,S;if(C=h[0][0]-u,w=h[0][1]-d,e)g=h[1][0]-h[0][0],m=h[1][1]-h[0][1],_=a||0,S=this.markerStartAngle;else{var b=h.length;this.parsedStyle.isClosed?(g=h[b-1][0]-h[0][0],m=h[b-1][1]-h[0][1]):(C=h[b-1][0]-u,w=h[b-1][1]-d,g=h[b-2][0]-h[b-1][0],m=h[b-2][1]-h[b-1][1]),_=s||0,S=this.markerEndAngle}p=Math.atan2(m,g),v.setLocalEulerAngles(p*180/Math.PI+S),v.setLocalPosition(C+Math.cos(p)*_,w+Math.sin(p)*_)}},t.prototype.placeMarkerMid=function(e){var n=this.parsedStyle,i=n.points,o=n.defX,a=n.defY,s=(i||{}).points;if(this.markerMidList.forEach(function(v){v.remove()}),this.markerMidList=[],e&&Ve(e)&&s)for(var l=1;l<(this.parsedStyle.isClosed?s.length:s.length-1);l++){var u=s[l][0]-o,d=s[l][1]-a,h=l===1?e:e.cloneNode(!0);this.markerMidList.push(h),this.appendChild(h),h.setLocalPosition(u,d)}},t}(Gr),uw=function(r){oe(t,r);function t(e){e===void 0&&(e={});var n=e.style,i=_r(e,["style"]);return r.call(this,N({type:$.POLYLINE,style:K.enableCSSParsing?N({points:"",miterLimit:"",isClosed:!1},n):N({},n),initialParsedStyle:K.enableCSSParsing?null:{points:{points:[],totalLength:0,segments:[]},miterLimit:4,isClosed:!1}},i))||this}return t.prototype.getTotalLength=function(){return this.parsedStyle.points.totalLength},t.prototype.getPointAtLength=function(e,n){return n===void 0&&(n=!1),this.getPoint(e/this.getTotalLength(),n)},t.prototype.getPoint=function(e,n){n===void 0&&(n=!1);var i=this.parsedStyle,o=i.defX,a=i.defY,s=i.points,l=s.points,u=s.segments,d=0,h=0;u.forEach(function(C,w){e>=C[0]&&e<=C[1]&&(d=(e-C[0])/(C[1]-C[0]),h=w)});var v=BC(l[h][0],l[h][1],l[h+1][0],l[h+1][1],d),p=v.x,g=v.y,m=wn(Ne(),et(p-o,g-a,0),n?this.getWorldTransform():this.getLocalTransform());return new Yt(m[0],m[1])},t.prototype.getStartTangent=function(){var e=this.parsedStyle.points.points,n=[];return n.push([e[1][0],e[1][1]]),n.push([e[0][0],e[0][1]]),n},t.prototype.getEndTangent=function(){var e=this.parsedStyle.points.points,n=e.length-1,i=[];return i.push([e[n-1][0],e[n-1][1]]),i.push([e[n][0],e[n][1]]),i},t}(Gv),wt=function(r){oe(t,r);function t(e){e===void 0&&(e={});var n=e.style,i=_r(e,["style"]);return r.call(this,N({type:$.RECT,style:K.enableCSSParsing?N({x:"",y:"",width:"",height:"",radius:""},n):N({},n)},i))||this}return t}(Gr),Wv=function(r){oe(t,r);function t(e){e===void 0&&(e={});var n=e.style,i=_r(e,["style"]);return r.call(this,N({type:$.TEXT,style:K.enableCSSParsing?N({x:"",y:"",text:"",fontSize:"",fontFamily:"",fontStyle:"",fontWeight:"",fontVariant:"",textAlign:"",textBaseline:"",textTransform:"",fill:"black",letterSpacing:"",lineHeight:"",miterLimit:"",wordWrap:!1,wordWrapWidth:0,leading:0,dx:"",dy:""},n):N({fill:"black"},n),initialParsedStyle:K.enableCSSParsing?{}:{x:0,y:0,fontSize:16,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",lineHeight:0,letterSpacing:0,textBaseline:"alphabetic",textAlign:"start",wordWrap:!1,wordWrapWidth:0,leading:0,dx:0,dy:0}},i))||this}return t.prototype.getComputedTextLength=function(){var e;return((e=this.parsedStyle.metrics)===null||e===void 0?void 0:e.maxLineWidth)||0},t.prototype.getLineBoundingRects=function(){var e;return((e=this.parsedStyle.metrics)===null||e===void 0?void 0:e.lineMetrics)||[]},t.prototype.isOverflowing=function(){return!!this.parsedStyle.isOverflowing},t}(Gr),WP=function(){function r(){this.registry={},this.define($.CIRCLE,sw),this.define($.ELLIPSE,zP),this.define($.RECT,wt),this.define($.IMAGE,lw),this.define($.LINE,Ia),this.define($.GROUP,ft),this.define($.PATH,Fc),this.define($.POLYGON,Gv),this.define($.POLYLINE,uw),this.define($.TEXT,Wv),this.define($.HTML,GP)}return r.prototype.define=function(t,e){this.registry[t]=e},r.prototype.get=function(t){return this.registry[t]},r}(),UP=function(r){oe(t,r);function t(){var e=r.call(this)||this;e.defaultView=null,e.ownerDocument=null,e.nodeName="document";try{e.timeline=new K.AnimationTimeline(e)}catch(i){}var n={};return kv.forEach(function(i){var o=i.n,a=i.inh,s=i.d;a&&s&&(n[o]=Oa(s)?s($.GROUP):s)}),e.documentElement=new ft({id:"g-root",style:n}),e.documentElement.ownerDocument=e,e.documentElement.parentNode=e,e.childNodes=[e.documentElement],e}return Object.defineProperty(t.prototype,"children",{get:function(){return this.childNodes},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"childElementCount",{get:function(){return this.childNodes.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"firstElementChild",{get:function(){return this.firstChild},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastElementChild",{get:function(){return this.lastChild},enumerable:!1,configurable:!0}),t.prototype.createElement=function(e,n){if(e==="svg")return this.documentElement;var i=this.defaultView.customElements.get(e);i||(console.warn("Unsupported tagName: ",e),i=e==="tspan"?Wv:ft);var o=new i(n);return o.ownerDocument=this,o},t.prototype.createElementNS=function(e,n,i){return this.createElement(n,i)},t.prototype.cloneNode=function(e){throw new Error(je)},t.prototype.destroy=function(){try{this.documentElement.destroyChildren(),this.timeline.destroy()}catch(e){}},t.prototype.elementsFromBBox=function(e,n,i,o){var a=this.defaultView.context.rBushRoot,s=a.search({minX:e,minY:n,maxX:i,maxY:o}),l=[];return s.forEach(function(u){var d=u.displayObject,h=d.parsedStyle.pointerEvents,v=["auto","visiblepainted","visiblefill","visiblestroke","visible"].includes(h);(!v||v&&d.isVisible())&&!d.isCulled()&&d.isInteractive()&&l.push(d)}),l.sort(function(u,d){return d.sortable.renderOrder-u.sortable.renderOrder}),l},t.prototype.elementFromPointSync=function(e,n){var i=this.defaultView.canvas2Viewport({x:e,y:n}),o=i.x,a=i.y,s=this.defaultView.getConfig(),l=s.width,u=s.height;if(o<0||a<0||o>l||a>u)return null;var d=this.defaultView.viewport2Client({x:o,y:a}),h=d.x,v=d.y,p=this.defaultView.getRenderingService().hooks.pickSync.call({topmost:!0,position:{x:e,y:n,viewportX:o,viewportY:a,clientX:h,clientY:v},picked:[]}).picked;return p&&p[0]||this.documentElement},t.prototype.elementFromPoint=function(e,n){return jt(this,void 0,void 0,function(){var i,o,a,s,l,u,d,h,v,p;return er(this,function(g){switch(g.label){case 0:return i=this.defaultView.canvas2Viewport({x:e,y:n}),o=i.x,a=i.y,s=this.defaultView.getConfig(),l=s.width,u=s.height,o<0||a<0||o>l||a>u?[2,null]:(d=this.defaultView.viewport2Client({x:o,y:a}),h=d.x,v=d.y,[4,this.defaultView.getRenderingService().hooks.pick.promise({topmost:!0,position:{x:e,y:n,viewportX:o,viewportY:a,clientX:h,clientY:v},picked:[]})]);case 1:return p=g.sent().picked,[2,p&&p[0]||this.documentElement]}})})},t.prototype.elementsFromPointSync=function(e,n){var i=this.defaultView.canvas2Viewport({x:e,y:n}),o=i.x,a=i.y,s=this.defaultView.getConfig(),l=s.width,u=s.height;if(o<0||a<0||o>l||a>u)return[];var d=this.defaultView.viewport2Client({x:o,y:a}),h=d.x,v=d.y,p=this.defaultView.getRenderingService().hooks.pickSync.call({topmost:!1,position:{x:e,y:n,viewportX:o,viewportY:a,clientX:h,clientY:v},picked:[]}).picked;return p[p.length-1]!==this.documentElement&&p.push(this.documentElement),p},t.prototype.elementsFromPoint=function(e,n){return jt(this,void 0,void 0,function(){var i,o,a,s,l,u,d,h,v,p;return er(this,function(g){switch(g.label){case 0:return i=this.defaultView.canvas2Viewport({x:e,y:n}),o=i.x,a=i.y,s=this.defaultView.getConfig(),l=s.width,u=s.height,o<0||a<0||o>l||a>u?[2,[]]:(d=this.defaultView.viewport2Client({x:o,y:a}),h=d.x,v=d.y,[4,this.defaultView.getRenderingService().hooks.pick.promise({topmost:!1,position:{x:e,y:n,viewportX:o,viewportY:a,clientX:h,clientY:v},picked:[]})]);case 1:return p=g.sent().picked,p[p.length-1]!==this.documentElement&&p.push(this.documentElement),[2,p]}})})},t.prototype.appendChild=function(e,n){throw new Error(Ta)},t.prototype.insertBefore=function(e,n){throw new Error(Ta)},t.prototype.removeChild=function(e,n){throw new Error(Ta)},t.prototype.replaceChild=function(e,n,i){throw new Error(Ta)},t.prototype.append=function(){throw new Error(Ta)},t.prototype.prepend=function(){throw new Error(Ta)},t.prototype.getElementById=function(e){return this.documentElement.getElementById(e)},t.prototype.getElementsByName=function(e){return this.documentElement.getElementsByName(e)},t.prototype.getElementsByTagName=function(e){return this.documentElement.getElementsByTagName(e)},t.prototype.getElementsByClassName=function(e){return this.documentElement.getElementsByClassName(e)},t.prototype.querySelector=function(e){return this.documentElement.querySelector(e)},t.prototype.querySelectorAll=function(e){return this.documentElement.querySelectorAll(e)},t.prototype.find=function(e){return this.documentElement.find(e)},t.prototype.findAll=function(e){return this.documentElement.findAll(e)},t}(zt),VP=function(){function r(t){this.strategies=t}return r.prototype.apply=function(t){var e=t.camera,n=t.renderingService,i=t.renderingContext,o=this.strategies;n.hooks.cull.tap(r.tag,function(a){if(a){var s=a.cullable;return o.length===0?s.visible=i.unculledEntities.indexOf(a.entity)>-1:s.visible=o.every(function(l){return l.isVisible(e,a)}),!a.isCulled()&&a.isVisible()?a:(a.dispatchEvent(new Ut(He.CULLED)),null)}return a}),n.hooks.afterRender.tap(r.tag,function(a){a.cullable.visibilityPlaneMask=-1})},r.tag="Culling",r}(),YP=function(){function r(){var t=this;this.autoPreventDefault=!1,this.rootPointerEvent=new Bc(null),this.rootWheelEvent=new Dc(null),this.onPointerMove=function(e){var n,i,o,a,s=(a=(o=t.context.renderingContext.root)===null||o===void 0?void 0:o.ownerDocument)===null||a===void 0?void 0:a.defaultView;if(!(s.supportsTouchEvents&&e.pointerType==="touch")){var l=t.normalizeToPointerEvent(e,s);try{for(var u=Qt(l),d=u.next();!d.done;d=u.next()){var h=d.value,v=t.bootstrapEvent(t.rootPointerEvent,h,s,e);t.context.eventService.mapEvent(v)}}catch(p){n={error:p}}finally{try{d&&!d.done&&(i=u.return)&&i.call(u)}finally{if(n)throw n.error}}t.setCursor(t.context.eventService.cursor)}},this.onClick=function(e){var n,i,o,a,s=(a=(o=t.context.renderingContext.root)===null||o===void 0?void 0:o.ownerDocument)===null||a===void 0?void 0:a.defaultView,l=t.normalizeToPointerEvent(e,s);try{for(var u=Qt(l),d=u.next();!d.done;d=u.next()){var h=d.value,v=t.bootstrapEvent(t.rootPointerEvent,h,s,e);t.context.eventService.mapEvent(v)}}catch(p){n={error:p}}finally{try{d&&!d.done&&(i=u.return)&&i.call(u)}finally{if(n)throw n.error}}t.setCursor(t.context.eventService.cursor)}}return r.prototype.apply=function(t){var e=this;this.context=t;var n=t.renderingService,i=this.context.renderingContext.root.ownerDocument.defaultView;this.context.eventService.setPickHandler(function(o){var a=e.context.renderingService.hooks.pickSync.call({position:o,picked:[],topmost:!0}).picked;return a[0]||null}),n.hooks.pointerWheel.tap(r.tag,function(o){var a=e.normalizeWheelEvent(o);e.context.eventService.mapEvent(a)}),n.hooks.pointerDown.tap(r.tag,function(o){var a,s;if(!(i.supportsTouchEvents&&o.pointerType==="touch")){var l=e.normalizeToPointerEvent(o,i);if(e.autoPreventDefault&&l[0].isNormalized){var u=o.cancelable||!("cancelable"in o);u&&o.preventDefault()}try{for(var d=Qt(l),h=d.next();!h.done;h=d.next()){var v=h.value,p=e.bootstrapEvent(e.rootPointerEvent,v,i,o);e.context.eventService.mapEvent(p)}}catch(g){a={error:g}}finally{try{h&&!h.done&&(s=d.return)&&s.call(d)}finally{if(a)throw a.error}}e.setCursor(e.context.eventService.cursor)}}),n.hooks.pointerUp.tap(r.tag,function(o){var a,s;if(!(i.supportsTouchEvents&&o.pointerType==="touch")){var l=e.context.contextService.getDomElement(),u="outside";try{u=l&&o.target&&o.target!==l&&l.contains&&!l.contains(o.target)?"outside":""}catch(m){}var d=e.normalizeToPointerEvent(o,i);try{for(var h=Qt(d),v=h.next();!v.done;v=h.next()){var p=v.value,g=e.bootstrapEvent(e.rootPointerEvent,p,i,o);g.type+=u,e.context.eventService.mapEvent(g)}}catch(m){a={error:m}}finally{try{v&&!v.done&&(s=h.return)&&s.call(h)}finally{if(a)throw a.error}}e.setCursor(e.context.eventService.cursor)}}),n.hooks.pointerMove.tap(r.tag,this.onPointerMove),n.hooks.pointerOver.tap(r.tag,this.onPointerMove),n.hooks.pointerOut.tap(r.tag,this.onPointerMove),n.hooks.click.tap(r.tag,this.onClick),n.hooks.pointerCancel.tap(r.tag,function(o){var a,s,l=e.normalizeToPointerEvent(o,i);try{for(var u=Qt(l),d=u.next();!d.done;d=u.next()){var h=d.value,v=e.bootstrapEvent(e.rootPointerEvent,h,i,o);e.context.eventService.mapEvent(v)}}catch(p){a={error:p}}finally{try{d&&!d.done&&(s=u.return)&&s.call(u)}finally{if(a)throw a.error}}e.setCursor(e.context.eventService.cursor)})},r.prototype.getViewportXY=function(t){var e,n,i=t.offsetX,o=t.offsetY,a=t.clientX,s=t.clientY;if(this.context.config.supportsCSSTransform&&!de(i)&&!de(o))e=i,n=o;else{var l=this.context.eventService.client2Viewport(new Yt(a,s));e=l.x,n=l.y}return{x:e,y:n}},r.prototype.bootstrapEvent=function(t,e,n,i){t.view=n,t.originalEvent=null,t.nativeEvent=i,t.pointerId=e.pointerId,t.width=e.width,t.height=e.height,t.isPrimary=e.isPrimary,t.pointerType=e.pointerType,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist,this.transferMouseData(t,e);var o=this.getViewportXY(e),a=o.x,s=o.y;t.viewport.x=a,t.viewport.y=s;var l=this.context.eventService.viewport2Canvas(t.viewport),u=l.x,d=l.y;return t.canvas.x=u,t.canvas.y=d,t.global.copyFrom(t.canvas),t.offset.copyFrom(t.canvas),t.isTrusted=i.isTrusted,t.type==="pointerleave"&&(t.type="pointerout"),t.type.startsWith("mouse")&&(t.type=t.type.replace("mouse","pointer")),t.type.startsWith("touch")&&(t.type=HN[t.type]||t.type),t},r.prototype.normalizeWheelEvent=function(t){var e=this.rootWheelEvent;this.transferMouseData(e,t),e.deltaMode=t.deltaMode,e.deltaX=t.deltaX,e.deltaY=t.deltaY,e.deltaZ=t.deltaZ;var n=this.getViewportXY(t),i=n.x,o=n.y;e.viewport.x=i,e.viewport.y=o;var a=this.context.eventService.viewport2Canvas(e.viewport),s=a.x,l=a.y;return e.canvas.x=s,e.canvas.y=l,e.global.copyFrom(e.canvas),e.offset.copyFrom(e.canvas),e.nativeEvent=t,e.type=t.type,e},r.prototype.transferMouseData=function(t,e){t.isTrusted=e.isTrusted,t.srcElement=e.srcElement,t.timeStamp=Pc.now(),t.type=e.type,t.altKey=e.altKey,t.metaKey=e.metaKey,t.shiftKey=e.shiftKey,t.ctrlKey=e.ctrlKey,t.button=e.button,t.buttons=e.buttons,t.client.x=e.clientX,t.client.y=e.clientY,t.movement.x=e.movementX,t.movement.y=e.movementY,t.page.x=e.pageX,t.page.y=e.pageY,t.screen.x=e.screenX,t.screen.y=e.screenY,t.relatedTarget=null},r.prototype.setCursor=function(t){this.context.contextService.applyCursorStyle(t||this.context.config.cursor||"default")},r.prototype.normalizeToPointerEvent=function(t,e){var n=[];if(e.isTouchEvent(t))for(var i=0;i<t.changedTouches.length;i++){var o=t.changedTouches[i];mt(o.button)&&(o.button=0),mt(o.buttons)&&(o.buttons=1),mt(o.isPrimary)&&(o.isPrimary=t.touches.length===1&&t.type==="touchstart"),mt(o.width)&&(o.width=o.radiusX||1),mt(o.height)&&(o.height=o.radiusY||1),mt(o.tiltX)&&(o.tiltX=0),mt(o.tiltY)&&(o.tiltY=0),mt(o.pointerType)&&(o.pointerType="touch"),mt(o.pointerId)&&(o.pointerId=o.identifier||0),mt(o.pressure)&&(o.pressure=o.force||.5),mt(o.twist)&&(o.twist=0),mt(o.tangentialPressure)&&(o.tangentialPressure=0),o.isNormalized=!0,o.type=t.type,n.push(o)}else if(e.isMouseEvent(t)){var a=t;mt(a.isPrimary)&&(a.isPrimary=!0),mt(a.width)&&(a.width=1),mt(a.height)&&(a.height=1),mt(a.tiltX)&&(a.tiltX=0),mt(a.tiltY)&&(a.tiltY=0),mt(a.pointerType)&&(a.pointerType="mouse"),mt(a.pointerId)&&(a.pointerId=kN),mt(a.pressure)&&(a.pressure=.5),mt(a.twist)&&(a.twist=0),mt(a.tangentialPressure)&&(a.tangentialPressure=0),a.isNormalized=!0,n.push(a)}else n.push(t);return n},r.tag="Event",r}(),XP=[$.CIRCLE,$.ELLIPSE,$.IMAGE,$.RECT,$.LINE,$.POLYLINE,$.POLYGON,$.TEXT,$.PATH,$.HTML],$P=function(){function r(){}return r.prototype.isVisible=function(t,e){var n,i,o=e.cullable;if(!o.enable)return!0;var a=e.getRenderBounds();if(Mt.isEmpty(a))return!1;var s=t.getFrustum(),l=(i=(n=e.parentNode)===null||n===void 0?void 0:n.cullable)===null||i===void 0?void 0:i.visibilityPlaneMask;return o.visibilityPlaneMask=this.computeVisibilityWithPlaneMask(e,a,l||ji.INDETERMINATE,s.planes),o.visible=o.visibilityPlaneMask!==ji.OUTSIDE,o.visible},r.prototype.computeVisibilityWithPlaneMask=function(t,e,n,i){if(n===ji.OUTSIDE||n===ji.INSIDE)return n;for(var o=ji.INSIDE,a=XP.indexOf(t.nodeName)>-1,s=0,l=i.length;s<l;++s){var u=1<<s;if((n&u)!==0&&!(a&&(s===4||s===5))){var d=i[s],h=d.normal,v=d.distance;if(oi(h,e.getPositiveFarPoint(i[s]))+v<0)return ji.OUTSIDE;oi(h,e.getNegativeFarPoint(i[s]))+v<0&&(o|=u)}}return o},r}(),qP=function(){function r(){this.toSync=new Set}return r.prototype.apply=function(t){var e=this,n=t.renderingService,i=t.renderingContext,o=t.rBushRoot,a=i.root.ownerDocument.defaultView;this.rBush=o;var s=function(h){var v=h.target;v.renderable.dirty=!0,n.dirtify()},l=function(h){var v=h.detail.affectChildren,p=h.target;v&&p.forEach(function(m){e.toSync.add(m)});for(var g=p;g;)g.renderable&&e.toSync.add(g),g=g.parentElement;n.dirtify()},u=function(h){var v=h.target;K.enableSizeAttenuation&&K.styleValueRegistry.updateSizeAttenuation(v,a.getCamera().getZoom()),K.enableCSSParsing&&K.styleValueRegistry.recalc(v),K.sceneGraphService.dirtifyToRoot(v),n.dirtify()},d=function(h){var v=h.target,p=v.rBushNode;p.aabb&&e.rBush.remove(p.aabb),e.toSync.delete(v),K.sceneGraphService.dirtifyToRoot(v),n.dirtify()};n.hooks.init.tap(r.tag,function(){a.addEventListener(He.MOUNTED,u),a.addEventListener(He.UNMOUNTED,d),a.addEventListener(He.ATTR_MODIFIED,s),a.addEventListener(He.BOUNDS_CHANGED,l)}),n.hooks.destroy.tap(r.tag,function(){a.removeEventListener(He.MOUNTED,u),a.removeEventListener(He.UNMOUNTED,d),a.removeEventListener(He.ATTR_MODIFIED,s),a.removeEventListener(He.BOUNDS_CHANGED,l),e.toSync.clear()}),n.hooks.endFrame.tap(r.tag,function(){e.syncRTree()})},r.prototype.syncRTree=function(){var t=this,e=[];Array.from(this.toSync).filter(function(n){return n.isConnected}).forEach(function(n){var i=n.rBushNode;i&&i.aabb&&t.rBush.remove(i.aabb);var o=n.getRenderBounds();if(o){var a=F(o.getMin(),2),s=a[0],l=a[1],u=F(o.getMax(),2),d=u[0],h=u[1];i.aabb||(i.aabb={}),i.aabb.displayObject=n,i.aabb.minX=s,i.aabb.minY=l,i.aabb.maxX=d,i.aabb.maxY=h}i.aabb&&!isNaN(i.aabb.maxX)&&!isNaN(i.aabb.maxX)&&!isNaN(i.aabb.minX)&&!isNaN(i.aabb.minY)&&e.push(i.aabb)}),this.rBush.load(e),e.length=0,this.toSync.clear()},r.tag="Prepare",r}(),Pr;(function(r){r.READY="ready",r.BEFORE_RENDER="beforerender",r.RERENDER="rerender",r.AFTER_RENDER="afterrender",r.BEFORE_DESTROY="beforedestroy",r.AFTER_DESTROY="afterdestroy",r.RESIZE="resize",r.DIRTY_RECTANGLE="dirtyrectangle",r.RENDERER_CHANGED="rendererchanged"})(Pr||(Pr={}));var w1=500,KP=.1,ZP=1e3,jh=new Ut(He.MOUNTED),ec=new Ut(He.UNMOUNTED),QP=new Ut(Pr.BEFORE_RENDER),JP=new Ut(Pr.RERENDER),jP=new Ut(Pr.AFTER_RENDER),kc=function(r){oe(t,r);function t(e){var n=r.call(this)||this;n.Element=Gr,n.inited=!1,n.context={},n.document=new UP,n.document.defaultView=n,n.customElements=new WP;var i=e.container,o=e.canvas,a=e.offscreenCanvas,s=e.width,l=e.height,u=e.devicePixelRatio,d=e.renderer,h=e.background,v=e.cursor,p=e.document,g=e.requestAnimationFrame,m=e.cancelAnimationFrame,C=e.createImage,w=e.supportsPointerEvents,_=e.supportsTouchEvents,S=e.supportsCSSTransform,b=e.supportsMutipleCanvasesInOneContainer,T=e.useNativeClickEvent,E=e.alwaysTriggerPointerEventOnCanvas,R=e.isTouchEvent,O=e.isMouseEvent;b||AN(i,n);var A=s,P=l,D=u;return o&&(D=u||yl&&window.devicePixelRatio||1,D=D>=1?Math.ceil(D):1,A=s||DN(o)||o.width/D,P=l||FN(o)||o.height/D),a&&(K.offscreenCanvas=a),n.devicePixelRatio=D,n.requestAnimationFrame=g!=null?g:rw.bind(K.globalThis),n.cancelAnimationFrame=m!=null?m:nw.bind(K.globalThis),n.supportsTouchEvents=_!=null?_:"ontouchstart"in K.globalThis,n.supportsPointerEvents=w!=null?w:!!K.globalThis.PointerEvent,n.isTouchEvent=R!=null?R:function(k){return n.supportsTouchEvents&&k instanceof K.globalThis.TouchEvent},n.isMouseEvent=O!=null?O:function(k){return!K.globalThis.MouseEvent||k instanceof K.globalThis.MouseEvent&&(!n.supportsPointerEvents||!(k instanceof K.globalThis.PointerEvent))},n.initRenderingContext({container:i,canvas:o,width:A,height:P,renderer:d,offscreenCanvas:a,devicePixelRatio:D,cursor:v||"default",background:h||"transparent",createImage:C,document:p,supportsCSSTransform:S,useNativeClickEvent:T,alwaysTriggerPointerEventOnCanvas:E}),n.initDefaultCamera(A,P,d.clipSpaceNearZ),n.initRenderer(d,!0),n}return t.prototype.initRenderingContext=function(e){this.context.config=e,this.context.renderingContext={root:this.document.documentElement,renderListCurrentFrame:[],unculledEntities:[],renderReasons:new Set,force:!1,dirty:!1}},t.prototype.initDefaultCamera=function(e,n,i){var o=this,a=new K.CameraContribution;a.clipSpaceNearZ=i,a.setType(qe.EXPLORING,Zs.DEFAULT).setPosition(e/2,n/2,w1).setFocalPoint(e/2,n/2,0).setOrthographic(e/-2,e/2,n/2,n/-2,KP,ZP),a.canvas=this,a.eventEmitter.on(FC.UPDATED,function(){o.context.renderingContext.renderReasons.add(so.CAMERA_CHANGED),K.enableSizeAttenuation&&o.getConfig().renderer.getConfig().enableSizeAttenuation&&o.updateSizeAttenuation()}),this.context.camera=a},t.prototype.updateSizeAttenuation=function(){var e=this.getCamera().getZoom();this.document.documentElement.forEach(function(n){K.styleValueRegistry.updateSizeAttenuation(n,e)})},t.prototype.getConfig=function(){return this.context.config},t.prototype.getRoot=function(){return this.document.documentElement},t.prototype.getCamera=function(){return this.context.camera},t.prototype.getContextService=function(){return this.context.contextService},t.prototype.getEventService=function(){return this.context.eventService},t.prototype.getRenderingService=function(){return this.context.renderingService},t.prototype.getRenderingContext=function(){return this.context.renderingContext},t.prototype.getStats=function(){return this.getRenderingService().getStats()},Object.defineProperty(t.prototype,"ready",{get:function(){var e=this;return this.readyPromise||(this.readyPromise=new Promise(function(n){e.resolveReadyPromise=function(){n(e)}}),this.inited&&this.resolveReadyPromise()),this.readyPromise},enumerable:!1,configurable:!0}),t.prototype.destroy=function(e,n){if(e===void 0&&(e=!0),n===void 0&&(n=!1),n||this.dispatchEvent(new Ut(Pr.BEFORE_DESTROY)),this.frameId){var i=this.getConfig().cancelAnimationFrame||cancelAnimationFrame;i(this.frameId)}var o=this.getRoot();this.unmountChildren(o),e&&(this.document.destroy(),this.getEventService().destroy()),this.getRenderingService().destroy(),this.getContextService().destroy(),e&&this.context.rBushRoot&&(this.context.rBushRoot.clear(),this.context.rBushRoot=null,this.context.renderingContext.root=null),n||this.dispatchEvent(new Ut(Pr.AFTER_DESTROY))},t.prototype.changeSize=function(e,n){this.resize(e,n)},t.prototype.resize=function(e,n){var i=this.context.config;i.width=e,i.height=n,this.getContextService().resize(e,n);var o=this.context.camera,a=o.getProjectionMode();o.setPosition(e/2,n/2,w1).setFocalPoint(e/2,n/2,0),a===Ar.ORTHOGRAPHIC?o.setOrthographic(e/-2,e/2,n/2,n/-2,o.getNear(),o.getFar()):o.setAspect(e/n),this.dispatchEvent(new Ut(Pr.RESIZE,{width:e,height:n}))},t.prototype.appendChild=function(e,n){return this.document.documentElement.appendChild(e,n)},t.prototype.insertBefore=function(e,n){return this.document.documentElement.insertBefore(e,n)},t.prototype.removeChild=function(e){return this.document.documentElement.removeChild(e)},t.prototype.removeChildren=function(){this.document.documentElement.removeChildren()},t.prototype.destroyChildren=function(){this.document.documentElement.destroyChildren()},t.prototype.render=function(){var e=this;this.dispatchEvent(QP);var n=this.getRenderingService();n.render(this.getConfig(),function(){e.dispatchEvent(JP)}),this.dispatchEvent(jP)},t.prototype.run=function(){var e=this,n=function(){e.render(),e.frameId=e.requestAnimationFrame(n)};n()},t.prototype.initRenderer=function(e,n){var i=this;if(n===void 0&&(n=!1),!e)throw new Error("Renderer is required.");this.inited=!1,this.readyPromise=void 0,this.context.rBushRoot=new jI,this.context.renderingPlugins=[],this.context.renderingPlugins.push(new YP,new qP,new VP([new $P])),this.loadRendererContainerModule(e),this.context.contextService=new this.context.ContextService(N(N({},K),this.context)),this.context.renderingService=new vP(K,this.context),this.context.eventService=new hP(K,this.context),this.context.eventService.init(),this.context.contextService.init?(this.context.contextService.init(),this.initRenderingService(e,n,!0)):this.context.contextService.initAsync().then(function(){i.initRenderingService(e,n)})},t.prototype.initRenderingService=function(e,n,i){var o=this;n===void 0&&(n=!1),i===void 0&&(i=!1),this.context.renderingService.init(function(){o.inited=!0,n?(i?o.requestAnimationFrame(function(){o.dispatchEvent(new Ut(Pr.READY))}):o.dispatchEvent(new Ut(Pr.READY)),o.readyPromise&&o.resolveReadyPromise()):o.dispatchEvent(new Ut(Pr.RENDERER_CHANGED)),n||o.getRoot().forEach(function(a){var s=a.renderable;s&&(s.renderBoundsDirty=!0,s.boundsDirty=!0,s.dirty=!0)}),o.mountChildren(o.getRoot()),e.getConfig().enableAutoRendering&&o.run()})},t.prototype.loadRendererContainerModule=function(e){var n=this,i=e.getPlugins();i.forEach(function(o){o.context=n.context,o.init(K)})},t.prototype.setRenderer=function(e){var n=this.getConfig();if(n.renderer!==e){var i=n.renderer;n.renderer=e,this.destroy(!1,!0),X([],F(i==null?void 0:i.getPlugins()),!1).reverse().forEach(function(o){o.destroy(K)}),this.initRenderer(e)}},t.prototype.setCursor=function(e){var n=this.getConfig();n.cursor=e,this.getContextService().applyCursorStyle(e)},t.prototype.unmountChildren=function(e){var n=this;e.childNodes.forEach(function(i){n.unmountChildren(i)}),this.inited&&(e.isMutationObserved?e.dispatchEvent(ec):(ec.target=e,this.dispatchEvent(ec,!0)),e!==this.document.documentElement&&(e.ownerDocument=null),e.isConnected=!1),e.isCustomElement&&e.disconnectedCallback&&e.disconnectedCallback()},t.prototype.mountChildren=function(e){var n=this;this.inited?e.isConnected||(e.ownerDocument=this.document,e.isConnected=!0,e.isMutationObserved?e.dispatchEvent(jh):(jh.target=e,this.dispatchEvent(jh,!0))):console.warn("[g]: You are trying to call `canvas.appendChild` before canvas' initialization finished. You can either await `canvas.ready` or listen to `CanvasEvent.READY` manually.","appended child: ",e.nodeName),e.childNodes.forEach(function(i){n.mountChildren(i)}),e.isCustomElement&&e.connectedCallback&&e.connectedCallback()},t.prototype.client2Viewport=function(e){return this.getEventService().client2Viewport(e)},t.prototype.viewport2Client=function(e){return this.getEventService().viewport2Client(e)},t.prototype.viewport2Canvas=function(e){return this.getEventService().viewport2Canvas(e)},t.prototype.canvas2Viewport=function(e){return this.getEventService().canvas2Viewport(e)},t.prototype.getPointByClient=function(e,n){return this.client2Viewport({x:e,y:n})},t.prototype.getClientByPoint=function(e,n){return this.viewport2Client({x:e,y:n})},t}(ow),eB=function(r){oe(t,r);function t(){var e=r.apply(this,X([],F(arguments),!1))||this;return e.landmarks=[],e}return t.prototype.rotate=function(e,n,i){if(this.relElevation=Ha(n),this.relAzimuth=Ha(e),this.relRoll=Ha(i),this.elevation+=this.relElevation,this.azimuth+=this.relAzimuth,this.roll+=this.relRoll,this.type===qe.EXPLORING){var o=ro(bt(),[1,0,0],gt((this.rotateWorld?1:-1)*this.relElevation)),a=ro(bt(),[0,1,0],gt((this.rotateWorld?1:-1)*this.relAzimuth)),s=ro(bt(),[0,0,1],gt(this.relRoll)),l=ao(bt(),a,o);l=ao(bt(),l,s);var u=Mv(it(),l);oo(this.matrix,this.matrix,[0,0,-this.distance]),lr(this.matrix,this.matrix,u),oo(this.matrix,this.matrix,[0,0,this.distance])}else{if(Math.abs(this.elevation)>90)return this;this.computeMatrix()}return this._getAxes(),this.type===qe.ORBITING||this.type===qe.EXPLORING?this._getPosition():this.type===qe.TRACKING&&this._getFocalPoint(),this._update(),this},t.prototype.pan=function(e,n){var i=yr(e,n,0),o=Ri(this.position);return Da(o,o,gc(Ne(),this.right,i[0])),Da(o,o,gc(Ne(),this.up,i[1])),this._setPosition(o),this.triggerUpdate(),this},t.prototype.dolly=function(e){var n=this.forward,i=Ri(this.position),o=e*this.dollyingStep,a=this.distance+e*this.dollyingStep;return o=Math.max(Math.min(a,this.maxDistance),this.minDistance)-this.distance,i[0]+=o*n[0],i[1]+=o*n[1],i[2]+=o*n[2],this._setPosition(i),this.type===qe.ORBITING||this.type===qe.EXPLORING?this._getDistance():this.type===qe.TRACKING&&Da(this.focalPoint,i,this.distanceVector),this.triggerUpdate(),this},t.prototype.cancelLandmarkAnimation=function(){this.landmarkAnimationID!==void 0&&this.canvas.cancelAnimationFrame(this.landmarkAnimationID)},t.prototype.createLandmark=function(e,n){var i,o,a,s;n===void 0&&(n={});var l=n.position,u=l===void 0?this.position:l,d=n.focalPoint,h=d===void 0?this.focalPoint:d,v=n.roll,p=n.zoom,g=new K.CameraContribution;g.setType(this.type,void 0),g.setPosition(u[0],(i=u[1])!==null&&i!==void 0?i:this.position[1],(o=u[2])!==null&&o!==void 0?o:this.position[2]),g.setFocalPoint(h[0],(a=h[1])!==null&&a!==void 0?a:this.focalPoint[1],(s=h[2])!==null&&s!==void 0?s:this.focalPoint[2]),g.setRoll(v!=null?v:this.roll),g.setZoom(p!=null?p:this.zoom);var m={name:e,matrix:sC(g.getWorldTransform()),right:Ri(g.right),up:Ri(g.up),forward:Ri(g.forward),position:Ri(g.getPosition()),focalPoint:Ri(g.getFocalPoint()),distanceVector:Ri(g.getDistanceVector()),distance:g.getDistance(),dollyingStep:g.getDollyingStep(),azimuth:g.getAzimuth(),elevation:g.getElevation(),roll:g.getRoll(),relAzimuth:g.relAzimuth,relElevation:g.relElevation,relRoll:g.relRoll,zoom:g.getZoom()};return this.landmarks.push(m),m},t.prototype.gotoLandmark=function(e,n){var i=this;n===void 0&&(n={});var o=tr(e)?this.landmarks.find(function(P){return P.name===e}):e;if(o){var a=Wn(n)?{duration:n}:n,s=a.easing,l=s===void 0?"linear":s,u=a.duration,d=u===void 0?100:u,h=a.easingFunction,v=h===void 0?void 0:h,p=a.onfinish,g=p===void 0?void 0:p,m=a.onframe,C=m===void 0?void 0:m,w=.01;if(d===0){this.syncFromLandmark(o),g&&g();return}this.cancelLandmarkAnimation();var _=o.position,S=o.focalPoint,b=o.zoom,T=o.roll,E=v||K.EasingFunction(l),R,O=function(){i.setFocalPoint(S),i.setPosition(_),i.setRoll(T),i.setZoom(b),i.computeMatrix(),i.triggerUpdate(),g&&g()},A=function(P){R===void 0&&(R=P);var D=P-R;if(D>d){O();return}var k=E(D/d),z=Ne(),V=Ne(),Z=1,Q=0;yc(z,i.focalPoint,S,k),yc(V,i.position,_,k),Q=i.roll*(1-k)+T*k,Z=i.zoom*(1-k)+b*k,i.setFocalPoint(z),i.setPosition(V),i.setRoll(Q),i.setZoom(Z);var Y=Oy(z,S)+Oy(V,_);if(Y<=w&&b==null&&T==null){O();return}i.computeMatrix(),i.triggerUpdate(),D<d&&(C&&C(k),i.landmarkAnimationID=i.canvas.requestAnimationFrame(A))};this.canvas.requestAnimationFrame(A)}},t.prototype.syncFromLandmark=function(e){this.matrix=Go(this.matrix,e.matrix),this.right=Nr(this.right,e.right),this.up=Nr(this.up,e.up),this.forward=Nr(this.forward,e.forward),this.position=Nr(this.position,e.position),this.focalPoint=Nr(this.focalPoint,e.focalPoint),this.distanceVector=Nr(this.distanceVector,e.distanceVector),this.azimuth=e.azimuth,this.elevation=e.elevation,this.roll=e.roll,this.relAzimuth=e.relAzimuth,this.relElevation=e.relElevation,this.relRoll=e.relRoll,this.dollyingStep=e.dollyingStep,this.distance=e.distance,this.zoom=e.zoom},t}(kC);K.CameraContribution=eB;var tc=function(r){oe(t,r);function t(e,n,i,o){var a=r.call(this,e)||this;return a.currentTime=i,a.timelineTime=o,a.target=n,a.type="finish",a.bubbles=!1,a.currentTarget=n,a.defaultPrevented=!1,a.eventPhase=a.AT_TARGET,a.timeStamp=Date.now(),a.currentTime=i,a.timelineTime=o,a}return t}(Yf),tB=0,rB=function(){function r(t,e){var n;this.currentTimePending=!1,this._idle=!0,this._paused=!1,this._finishedFlag=!0,this._currentTime=0,this._playbackRate=1,this._inTimeline=!0,this.effect=t,t.animation=this,this.timeline=e,this.id="".concat(tB++),this._inEffect=!!this.effect.update(0),this._totalDuration=Number((n=this.effect)===null||n===void 0?void 0:n.getComputedTiming().endTime),this._holdTime=0,this._paused=!1,this.oldPlayState="idle",this.updatePromises()}return Object.defineProperty(r.prototype,"pending",{get:function(){return this._startTime===null&&!this._paused&&this.playbackRate!==0||this.currentTimePending},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"playState",{get:function(){return this._idle?"idle":this._isFinished?"finished":this._paused?"paused":"running"},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"ready",{get:function(){var t=this;return this.readyPromise||(this.timeline.animationsWithPromises.indexOf(this)===-1&&this.timeline.animationsWithPromises.push(this),this.readyPromise=new Promise(function(e,n){t.resolveReadyPromise=function(){e(t)},t.rejectReadyPromise=function(){n(new Error)}}),this.pending||this.resolveReadyPromise()),this.readyPromise},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"finished",{get:function(){var t=this;return this.finishedPromise||(this.timeline.animationsWithPromises.indexOf(this)===-1&&this.timeline.animationsWithPromises.push(this),this.finishedPromise=new Promise(function(e,n){t.resolveFinishedPromise=function(){e(t)},t.rejectFinishedPromise=function(){n(new Error)}}),this.playState==="finished"&&this.resolveFinishedPromise()),this.finishedPromise},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"currentTime",{get:function(){return this.updatePromises(),this._idle||this.currentTimePending?null:this._currentTime},set:function(t){var e;t=Number(t),!isNaN(t)&&(this.timeline.restart(),!this._paused&&this._startTime!==null&&(this._startTime=Number((e=this.timeline)===null||e===void 0?void 0:e.currentTime)-t/this.playbackRate),this.currentTimePending=!1,this._currentTime!==t&&(this._idle&&(this._idle=!1,this._paused=!0),this.tickCurrentTime(t,!0),this.timeline.applyDirtiedAnimation(this)))},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"startTime",{get:function(){return this._startTime},set:function(t){if(t!==null){if(this.updatePromises(),t=Number(t),isNaN(t)||this._paused||this._idle)return;this._startTime=t,this.tickCurrentTime((Number(this.timeline.currentTime)-this._startTime)*this.playbackRate),this.timeline.applyDirtiedAnimation(this),this.updatePromises()}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"playbackRate",{get:function(){return this._playbackRate},set:function(t){if(t!==this._playbackRate){this.updatePromises();var e=this.currentTime;this._playbackRate=t,this.startTime=null,this.playState!=="paused"&&this.playState!=="idle"&&(this._finishedFlag=!1,this._idle=!1,this.ensureAlive(),this.timeline.applyDirtiedAnimation(this)),e!==null&&(this.currentTime=e),this.updatePromises()}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"_isFinished",{get:function(){return!this._idle&&(this._playbackRate>0&&Number(this._currentTime)>=this._totalDuration||this._playbackRate<0&&Number(this._currentTime)<=0)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"totalDuration",{get:function(){return this._totalDuration},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"_needsTick",{get:function(){return this.pending||this.playState==="running"||!this._finishedFlag},enumerable:!1,configurable:!0}),r.prototype.updatePromises=function(){var t=this.oldPlayState,e=this.pending?"pending":this.playState;return this.readyPromise&&e!==t&&(e==="idle"?(this.rejectReadyPromise(),this.readyPromise=void 0):t==="pending"?this.resolveReadyPromise():e==="pending"&&(this.readyPromise=void 0)),this.finishedPromise&&e!==t&&(e==="idle"?(this.rejectFinishedPromise(),this.finishedPromise=void 0):e==="finished"?this.resolveFinishedPromise():t==="finished"&&(this.finishedPromise=void 0)),this.oldPlayState=e,this.readyPromise||this.finishedPromise},r.prototype.play=function(){this.updatePromises(),this._paused=!1,(this._isFinished||this._idle)&&(this.rewind(),this._startTime=null),this._finishedFlag=!1,this._idle=!1,this.ensureAlive(),this.timeline.applyDirtiedAnimation(this),this.timeline.animations.indexOf(this)===-1&&this.timeline.animations.push(this),this.updatePromises()},r.prototype.pause=function(){this.updatePromises(),this.currentTime&&(this._holdTime=this.currentTime),!this._isFinished&&!this._paused&&!this._idle?this.currentTimePending=!0:this._idle&&(this.rewind(),this._idle=!1),this._startTime=null,this._paused=!0,this.updatePromises()},r.prototype.finish=function(){this.updatePromises(),!this._idle&&(this.currentTime=this._playbackRate>0?this._totalDuration:0,this._startTime=this._totalDuration-this.currentTime,this.currentTimePending=!1,this.timeline.applyDirtiedAnimation(this),this.updatePromises())},r.prototype.cancel=function(){var t=this;if(this.updatePromises(),!!this._inEffect&&(this._inEffect=!1,this._idle=!0,this._paused=!1,this._finishedFlag=!0,this._currentTime=0,this._startTime=null,this.effect.update(null),this.timeline.applyDirtiedAnimation(this),this.updatePromises(),this.oncancel)){var e=new tc(null,this,this.currentTime,null);setTimeout(function(){t.oncancel(e)})}},r.prototype.reverse=function(){this.updatePromises();var t=this.currentTime;this.playbackRate*=-1,this.play(),t!==null&&(this.currentTime=t),this.updatePromises()},r.prototype.updatePlaybackRate=function(t){this.playbackRate=t},r.prototype.targetAnimations=function(){var t,e=(t=this.effect)===null||t===void 0?void 0:t.target;return e.getAnimations()},r.prototype.markTarget=function(){var t=this.targetAnimations();t.indexOf(this)===-1&&t.push(this)},r.prototype.unmarkTarget=function(){var t=this.targetAnimations(),e=t.indexOf(this);e!==-1&&t.splice(e,1)},r.prototype.tick=function(t,e){!this._idle&&!this._paused&&(this._startTime===null?e&&(this.startTime=t-this._currentTime/this.playbackRate):this._isFinished||this.tickCurrentTime((t-this._startTime)*this.playbackRate)),e&&(this.currentTimePending=!1,this.fireEvents(t))},r.prototype.rewind=function(){if(this.playbackRate>=0)this.currentTime=0;else if(this._totalDuration<1/0)this.currentTime=this._totalDuration;else throw new Error("Unable to rewind negative playback rate animation with infinite duration")},r.prototype.persist=function(){throw new Error(je)},r.prototype.addEventListener=function(t,e,n){throw new Error(je)},r.prototype.removeEventListener=function(t,e,n){throw new Error(je)},r.prototype.dispatchEvent=function(t){throw new Error(je)},r.prototype.commitStyles=function(){throw new Error(je)},r.prototype.ensureAlive=function(){var t,e;this.playbackRate<0&&this.currentTime===0?this._inEffect=!!(!((t=this.effect)===null||t===void 0)&&t.update(-1)):this._inEffect=!!(!((e=this.effect)===null||e===void 0)&&e.update(this.currentTime)),!this._inTimeline&&(this._inEffect||!this._finishedFlag)&&(this._inTimeline=!0,this.timeline.animations.push(this))},r.prototype.tickCurrentTime=function(t,e){t!==this._currentTime&&(this._currentTime=t,this._isFinished&&!e&&(this._currentTime=this._playbackRate>0?this._totalDuration:0),this.ensureAlive())},r.prototype.fireEvents=function(t){var e=this;if(this._isFinished){if(!this._finishedFlag){if(this.onfinish){var n=new tc(null,this,this.currentTime,t);setTimeout(function(){e.onfinish&&e.onfinish(n)})}this._finishedFlag=!0}}else{if(this.onframe&&this.playState==="running"){var i=new tc(null,this,this.currentTime,t);this.onframe(i)}this._finishedFlag=!1}},r}(),nB=4,iB=.001,oB=1e-7,aB=10,Ds=11,Mu=1/(Ds-1),sB=typeof Float32Array=="function",fw=function(r,t){return 1-3*t+3*r},dw=function(r,t){return 3*t-6*r},hw=function(r){return 3*r},pf=function(r,t,e){return((fw(t,e)*r+dw(t,e))*r+hw(t))*r},cw=function(r,t,e){return 3*fw(t,e)*r*r+2*dw(t,e)*r+hw(t)},lB=function(r,t,e,n,i){var o,a,s=0;do a=t+(e-t)/2,o=pf(a,n,i)-r,o>0?e=a:t=a;while(Math.abs(o)>oB&&++s<aB);return a},uB=function(r,t,e,n){for(var i=0;i<nB;++i){var o=cw(t,e,n);if(o===0)return t;var a=pf(t,e,n)-r;t-=a/o}return t},Uv=function(r,t,e,n){if(!(0<=r&&r<=1&&0<=e&&e<=1))throw new Error("bezier x values must be in [0, 1] range");if(r===t&&e===n)return function(s){return s};for(var i=sB?new Float32Array(Ds):new Array(Ds),o=0;o<Ds;++o)i[o]=pf(o*Mu,r,e);var a=function(s){for(var l=0,u=1,d=Ds-1;u!==d&&i[u]<=s;++u)l+=Mu;--u;var h=(s-i[u])/(i[u+1]-i[u]),v=l+h*Mu,p=cw(v,r,e);return p>=iB?uB(s,v,r,e):p===0?v:lB(s,l,l+Mu,r,e)};return function(s){return s===0||s===1?s:pf(a(s),t,n)}},fB=function(r){return r=r.replace(/([A-Z])/g,function(t){return"-".concat(t.toLowerCase())}),r.charAt(0)==="-"?r.substring(1):r},Ou=function(r){return Math.pow(r,2)},Iu=function(r){return Math.pow(r,3)},Au=function(r){return Math.pow(r,4)},Nu=function(r){return Math.pow(r,5)},Pu=function(r){return Math.pow(r,6)},Bu=function(r){return 1-Math.cos(r*Math.PI/2)},Du=function(r){return 1-Math.sqrt(1-r*r)},Fu=function(r){return r*r*(3*r-2)},ku=function(r){for(var t,e=4;r<((t=Math.pow(2,--e))-1)/11;);return 1/Math.pow(4,3-e)-7.5625*Math.pow((t*3-2)/22-r,2)},Hu=function(r,t){t===void 0&&(t=[]);var e=F(t,2),n=e[0],i=n===void 0?1:n,o=e[1],a=o===void 0?.5:o,s=tn(Number(i),1,10),l=tn(Number(a),.1,2);return r===0||r===1?r:-s*Math.pow(2,10*(r-1))*Math.sin((r-1-l/(Math.PI*2)*Math.asin(1/s))*(Math.PI*2)/l)},Ms=function(r,t,e){t===void 0&&(t=[]);var n=F(t,4),i=n[0],o=i===void 0?1:i,a=n[1],s=a===void 0?100:a,l=n[2],u=l===void 0?10:l,d=n[3],h=d===void 0?0:d;o=tn(o,.1,1e3),s=tn(s,.1,1e3),u=tn(u,.1,1e3),h=tn(h,.1,1e3);var v=Math.sqrt(s/o),p=u/(2*Math.sqrt(s*o)),g=p<1?v*Math.sqrt(1-p*p):0,m=1,C=p<1?(p*v+-h)/g:-h+v,w=e?e*r/1e3:r;return p<1?w=Math.exp(-w*p*v)*(m*Math.cos(g*w)+C*Math.sin(g*w)):w=(m+C*w)*Math.exp(-w*v),r===0||r===1?r:1-w},rc=function(r,t){t===void 0&&(t=[]);var e=F(t,2),n=e[0],i=n===void 0?10:n,o=e[1],a=o=="start"?Math.ceil:Math.floor;return a(tn(r,0,1)*i)/i},x1=function(r,t){t===void 0&&(t=[]);var e=F(t,4),n=e[0],i=e[1],o=e[2],a=e[3];return Uv(n,i,o,a)(r)},zu=Uv(.42,0,1,1),pn=function(r){return function(t,e,n){return e===void 0&&(e=[]),1-r(1-t,e,n)}},gn=function(r){return function(t,e,n){return e===void 0&&(e=[]),t<.5?r(t*2,e,n)/2:1-r(t*-2+2,e,n)/2}},yn=function(r){return function(t,e,n){return e===void 0&&(e=[]),t<.5?(1-r(1-t*2,e,n))/2:(r(t*2-1,e,n)+1)/2}},_1={steps:rc,"step-start":function(r){return rc(r,[1,"start"])},"step-end":function(r){return rc(r,[1,"end"])},linear:function(r){return r},"cubic-bezier":x1,ease:function(r){return x1(r,[.25,.1,.25,1])},in:zu,out:pn(zu),"in-out":gn(zu),"out-in":yn(zu),"in-quad":Ou,"out-quad":pn(Ou),"in-out-quad":gn(Ou),"out-in-quad":yn(Ou),"in-cubic":Iu,"out-cubic":pn(Iu),"in-out-cubic":gn(Iu),"out-in-cubic":yn(Iu),"in-quart":Au,"out-quart":pn(Au),"in-out-quart":gn(Au),"out-in-quart":yn(Au),"in-quint":Nu,"out-quint":pn(Nu),"in-out-quint":gn(Nu),"out-in-quint":yn(Nu),"in-expo":Pu,"out-expo":pn(Pu),"in-out-expo":gn(Pu),"out-in-expo":yn(Pu),"in-sine":Bu,"out-sine":pn(Bu),"in-out-sine":gn(Bu),"out-in-sine":yn(Bu),"in-circ":Du,"out-circ":pn(Du),"in-out-circ":gn(Du),"out-in-circ":yn(Du),"in-back":Fu,"out-back":pn(Fu),"in-out-back":gn(Fu),"out-in-back":yn(Fu),"in-bounce":ku,"out-bounce":pn(ku),"in-out-bounce":gn(ku),"out-in-bounce":yn(ku),"in-elastic":Hu,"out-elastic":pn(Hu),"in-out-elastic":gn(Hu),"out-in-elastic":yn(Hu),spring:Ms,"spring-in":Ms,"spring-out":pn(Ms),"spring-in-out":gn(Ms),"spring-out-in":yn(Ms)},dB=function(r){return fB(r).replace(/^ease-/,"").replace(/(\(|\s).+/,"").toLowerCase().trim()},hB=function(r){return _1[dB(r)]||_1.linear},cB=function(r){return r},vB=1,pB=.5,E1=0;function S1(r,t){return function(e){if(e>=1)return 1;var n=1/r;return e+=t*n,e-e%n}}var Gu="\\s*(-?\\d+\\.?\\d*|-?\\.\\d+)\\s*",gB=new RegExp("cubic-bezier\\("+Gu+","+Gu+","+Gu+","+Gu+"\\)"),yB=/steps\(\s*(\d+)\s*\)/,mB=/steps\(\s*(\d+)\s*,\s*(start|middle|end)\s*\)/;function Vv(r){var t=gB.exec(r);if(t)return Uv.apply(void 0,X([],F(t.slice(1).map(Number)),!1));var e=yB.exec(r);if(e)return S1(Number(e[1]),E1);var n=mB.exec(r);return n?S1(Number(n[1]),{start:vB,middle:pB,end:E1}[n[2]]):hB(r)}function CB(r){return Math.abs(wB(r)/(r.playbackRate||1))}function wB(r){var t;return r.duration===0||r.iterations===0?0:(r.duration==="auto"?0:Number(r.duration))*((t=r.iterations)!==null&&t!==void 0?t:1)}var vw=0,Yv=1,Xf=2,pw=3;function xB(r,t,e){if(t===null)return vw;var n=e.endTime;return t<Math.min(e.delay,n)?Yv:t>=Math.min(e.delay+r+e.endDelay,n)?Xf:pw}function _B(r,t,e,n,i){switch(n){case Yv:return t==="backwards"||t==="both"?0:null;case pw:return e-i;case Xf:return t==="forwards"||t==="both"?r:null;case vw:return null}}function EB(r,t,e,n,i){var o=i;return r===0?t!==Yv&&(o+=e):o+=n/r,o}function SB(r,t,e,n,i,o){var a=r===1/0?t%1:r%1;return a===0&&e===Xf&&n!==0&&(i!==0||o===0)&&(a=1),a}function TB(r,t,e,n){return r===Xf&&t===1/0?1/0:e===1?Math.floor(n)-1:Math.floor(n)}function bB(r,t,e){var n=r;if(r!=="normal"&&r!=="reverse"){var i=t;r==="alternate-reverse"&&(i+=1),n="normal",i!==1/0&&i%2!==0&&(n="reverse")}return n==="normal"?e:1-e}function LB(r,t,e){var n=xB(r,t,e),i=_B(r,e.fill,t,n,e.delay);if(i===null)return null;var o=e.duration==="auto"?0:e.duration,a=EB(o,n,e.iterations,i,e.iterationStart),s=SB(a,e.iterationStart,n,e.iterations,i,o),l=TB(n,e.iterations,s,a),u=bB(e.direction,l,s);return e.currentIteration=l,e.progress=u,e.easingFunction(u)}function RB(r,t,e){var n=MB(r,t),i=OB(n,e);return function(o,a){if(a!==null)i.filter(function(l){return a>=l.applyFrom&&a<l.applyTo}).forEach(function(l){var u=a-l.startOffset,d=l.endOffset-l.startOffset,h=d===0?0:l.easingFunction(u/d);o.setAttribute(l.property,l.interpolation(h),!1,!1)});else for(var s in n)gw(s)&&o.setAttribute(s,null)}}function gw(r){return r!=="offset"&&r!=="easing"&&r!=="composite"&&r!=="computedOffset"}function MB(r,t){for(var e={},n=0;n<r.length;n++)for(var i in r[n])if(gw(i)){var o={offset:r[n].offset,computedOffset:r[n].computedOffset,easing:r[n].easing,easingFunction:Vv(r[n].easing)||t.easingFunction,value:r[n][i]};e[i]=e[i]||[],e[i].push(o)}return e}function OB(r,t){var e=[];for(var n in r)for(var i=r[n],o=0;o<i.length-1;o++){var a=o,s=o+1,l=i[a].computedOffset,u=i[s].computedOffset,d=l,h=u;o===0&&(d=-1/0,u===0&&(s=a)),o===i.length-2&&(h=1/0,l===1&&(a=s)),e.push({applyFrom:d,applyTo:h,startOffset:i[a].computedOffset,endOffset:i[s].computedOffset,easingFunction:i[a].easingFunction,property:n,interpolation:IB(n,i[a].value,i[s].value,t)})}return e.sort(function(v,p){return v.startOffset-p.startOffset}),e}var T1=function(r,t,e){return function(n){var i=yw(r,t,n);return!K.enableCSSParsing&&Wn(i)?i:e(i)}};function IB(r,t,e,n){var i=Qi[r];if(i&&i.syntax&&i.int){var o=K.styleValueRegistry.getPropertySyntax(i.syntax);if(o){var a=void 0,s=void 0;if(K.enableCSSParsing){var l=K.styleValueRegistry.parseProperty(r,t,n,!1),u=K.styleValueRegistry.parseProperty(r,e,n,!1);a=K.styleValueRegistry.computeProperty(r,l,n,!1),s=K.styleValueRegistry.computeProperty(r,u,n,!1)}else{var d=o.parserWithCSSDisabled;a=d?d(t,n):t,s=d?d(e,n):e}var h=o.mixer(a,s,n);if(h){var v=T1.apply(void 0,X([],F(h),!1));return function(p){return p===0?t:p===1?e:v(p)}}}}return T1(!1,!0,function(p){return p?e:t})}function yw(r,t,e){if(typeof r=="number"&&typeof t=="number")return r*(1-e)+t*e;if(typeof r=="boolean"&&typeof t=="boolean"||typeof r=="string"&&typeof t=="string")return e<.5?r:t;if(Array.isArray(r)&&Array.isArray(t)){for(var n=r.length,i=t.length,o=Math.max(n,i),a=[],s=0;s<o;s++)a.push(yw(r[s<n?s:n-1],t[s<i?s:i-1],e));return a}throw new Error("Mismatched interpolation arguments "+r+":"+t)}var AB=function(){function r(){this.delay=0,this.direction="normal",this.duration="auto",this._easing="linear",this.easingFunction=cB,this.endDelay=0,this.fill="auto",this.iterationStart=0,this.iterations=1,this.currentIteration=null,this.progress=null}return Object.defineProperty(r.prototype,"easing",{get:function(){return this._easing},set:function(t){this.easingFunction=Vv(t),this._easing=t},enumerable:!1,configurable:!0}),r}();function NB(r){var t=[];for(var e in r)if(!(e in["easing","offset","composite"])){var n=r[e];Array.isArray(n)||(n=[n]);for(var i=n.length,o=0;o<i;o++){if(!t[o]){var a={};"offset"in r&&(a.offset=Number(r.offset)),"easing"in r&&(a.easing=r.easing),"composite"in r&&(a.composite=r.composite),t[o]=a}n[o]!==void 0&&n[o]!==null&&(t[o][e]=n[o])}}return t.sort(function(s,l){return(s.computedOffset||0)-(l.computedOffset||0)}),t}function b1(r,t){if(r===null)return[];Array.isArray(r)||(r=NB(r));for(var e=r.map(function(l){var u={};t!=null&&t.composite&&(u.composite="auto");for(var d in l){var h=l[d];if(d==="offset"){if(h!==null){if(h=Number(h),!isFinite(h))throw new Error("Keyframe offsets must be numbers.");if(h<0||h>1)throw new Error("Keyframe offsets must be between 0 and 1.");u.computedOffset=h}}else if(d==="composite"&&["replace","add","accumulate","auto"].indexOf(h)===-1)throw new Error("".concat(h," compositing is not supported"));u[d]=h}return u.offset===void 0&&(u.offset=null),u.easing===void 0&&(u.easing=(t==null?void 0:t.easing)||"linear"),u.composite===void 0&&(u.composite="auto"),u}),n=!0,i=-1/0,o=0;o<e.length;o++){var a=e[o].offset;if(de(a))n=!1;else{if(a<i)throw new TypeError("Keyframes are not loosely sorted by offset. Sort or specify offsets.");i=a}}e=e.filter(function(l){return Number(l.offset)>=0&&Number(l.offset)<=1});function s(){var l,u,d=e.length;e[d-1].computedOffset=Number((l=e[d-1].offset)!==null&&l!==void 0?l:1),d>1&&(e[0].computedOffset=Number((u=e[0].offset)!==null&&u!==void 0?u:0));for(var h=0,v=Number(e[0].computedOffset),p=1;p<d;p++){var g=e[p].computedOffset;if(!de(g)&&!de(v)){for(var m=1;m<p-h;m++)e[h+m].computedOffset=v+(Number(g)-v)*m/(p-h);h=p,v=Number(g)}}}return n||s(),e}var PB="backwards|forwards|both|none".split("|"),BB="reverse|alternate|alternate-reverse".split("|");function DB(r,t){var e=new AB;return t&&(e.fill="both",e.duration="auto"),typeof r=="number"&&!isNaN(r)?e.duration=r:r!==void 0&&Object.keys(r).forEach(function(n){if(r[n]!==void 0&&r[n]!==null&&r[n]!=="auto"){if((typeof e[n]=="number"||n==="duration")&&(typeof r[n]!="number"||isNaN(r[n]))||n==="fill"&&PB.indexOf(r[n])===-1||n==="direction"&&BB.indexOf(r[n])===-1)return;e[n]=r[n]}}),e}function FB(r,t){return r=kB(r!=null?r:{duration:"auto"}),DB(r,t)}function kB(r){return typeof r=="number"&&(isNaN(r)?r={duration:"auto"}:r={duration:r}),r}var HB=function(){function r(t,e,n){var i=this;this.composite="replace",this.iterationComposite="replace",this.target=t,this.timing=FB(n,!1),this.timing.effect=this,this.timing.activeDuration=CB(this.timing),this.timing.endTime=Math.max(0,this.timing.delay+this.timing.activeDuration+this.timing.endDelay),this.normalizedKeyframes=b1(e,this.timing),this.interpolations=RB(this.normalizedKeyframes,this.timing,this.target);var o=K.globalThis.Proxy;this.computedTiming=o?new o(this.timing,{get:function(a,s){return s==="duration"?a.duration==="auto"?0:a.duration:s==="fill"?a.fill==="auto"?"none":a.fill:s==="localTime"?i.animation&&i.animation.currentTime||null:s==="currentIteration"?!i.animation||i.animation.playState!=="running"?null:a.currentIteration||0:s==="progress"?!i.animation||i.animation.playState!=="running"?null:a.progress||0:a[s]},set:function(){return!0}}):this.timing}return r.prototype.applyInterpolations=function(){this.interpolations(this.target,Number(this.timeFraction))},r.prototype.update=function(t){return t===null?!1:(this.timeFraction=LB(this.timing.activeDuration,t,this.timing),this.timeFraction!==null)},r.prototype.getKeyframes=function(){return this.normalizedKeyframes},r.prototype.setKeyframes=function(t){this.normalizedKeyframes=b1(t)},r.prototype.getComputedTiming=function(){return this.computedTiming},r.prototype.getTiming=function(){return this.timing},r.prototype.updateTiming=function(t){var e=this;Object.keys(t||{}).forEach(function(n){e.timing[n]=t[n]})},r}();function L1(r,t){return Number(r.id)-Number(t.id)}var zB=function(){function r(t){var e=this;this.document=t,this.animations=[],this.ticking=!1,this.timelineTicking=!1,this.hasRestartedThisFrame=!1,this.animationsWithPromises=[],this.inTick=!1,this.pendingEffects=[],this.currentTime=null,this.rafId=0,this.rafCallbacks=[],this.webAnimationsNextTick=function(n){e.currentTime=n,e.discardAnimations(),e.animations.length===0?e.timelineTicking=!1:e.requestAnimationFrame(e.webAnimationsNextTick)},this.processRafCallbacks=function(n){var i=e.rafCallbacks;e.rafCallbacks=[],n<Number(e.currentTime)&&(n=Number(e.currentTime)),e.animations.sort(L1),e.animations=e.tick(n,!0,e.animations)[0],i.forEach(function(o){o[1](n)}),e.applyPendingEffects()}}return r.prototype.getAnimations=function(){return this.discardAnimations(),this.animations.slice()},r.prototype.isTicking=function(){return this.inTick},r.prototype.play=function(t,e,n){var i=new HB(t,e,n),o=new rB(i,this);return this.animations.push(o),this.restartWebAnimationsNextTick(),o.updatePromises(),o.play(),o.updatePromises(),o},r.prototype.applyDirtiedAnimation=function(t){var e=this;if(!this.inTick){t.markTarget();var n=t.targetAnimations();n.sort(L1);var i=this.tick(Number(this.currentTime),!1,n.slice())[1];i.forEach(function(o){var a=e.animations.indexOf(o);a!==-1&&e.animations.splice(a,1)}),this.applyPendingEffects()}},r.prototype.restart=function(){return this.ticking||(this.ticking=!0,this.requestAnimationFrame(function(){}),this.hasRestartedThisFrame=!0),this.hasRestartedThisFrame},r.prototype.destroy=function(){this.document.defaultView.cancelAnimationFrame(this.frameId)},r.prototype.applyPendingEffects=function(){this.pendingEffects.forEach(function(t){t==null||t.applyInterpolations()}),this.pendingEffects=[]},r.prototype.updateAnimationsPromises=function(){this.animationsWithPromises=this.animationsWithPromises.filter(function(t){return t.updatePromises()})},r.prototype.discardAnimations=function(){this.updateAnimationsPromises(),this.animations=this.animations.filter(function(t){return t.playState!=="finished"&&t.playState!=="idle"})},r.prototype.restartWebAnimationsNextTick=function(){this.timelineTicking||(this.timelineTicking=!0,this.requestAnimationFrame(this.webAnimationsNextTick))},r.prototype.rAF=function(t){var e=this.rafId++;return this.rafCallbacks.length===0&&(this.frameId=this.document.defaultView.requestAnimationFrame(this.processRafCallbacks)),this.rafCallbacks.push([e,t]),e},r.prototype.requestAnimationFrame=function(t){var e=this;return this.rAF(function(n){e.updateAnimationsPromises(),t(n),e.updateAnimationsPromises()})},r.prototype.tick=function(t,e,n){var i,o,a=this;this.inTick=!0,this.hasRestartedThisFrame=!1,this.currentTime=t,this.ticking=!1;var s=[],l=[],u=[],d=[];return n.forEach(function(h){h.tick(t,e),h._inEffect?(l.push(h.effect),h.markTarget()):(s.push(h.effect),h.unmarkTarget()),h._needsTick&&(a.ticking=!0);var v=h._inEffect||h._needsTick;h._inTimeline=v,v?u.push(h):d.push(h)}),(i=this.pendingEffects).push.apply(i,X([],F(s),!1)),(o=this.pendingEffects).push.apply(o,X([],F(l),!1)),this.ticking&&this.requestAnimationFrame(function(){}),this.inTick=!1,[u,d]},r}();K.EasingFunction=Vv;K.AnimationTimeline=zB;var Bi="$$value$$",Ae="$$extra$$",Hc="$$origin$$",GB="$$extra_column$$",Di="$$total$$",Ju="$$multi$$",nn="$$series_number$$",ml="$$empty_field_value$$",Xv="$$empty_extra_placeholder$$",WB="$$null$$",UB="$$undefined$$",R1;(function(r){r.DATA_CELL_CLICK_EVENT="interaction:data-cell-click",r.MERGED_CELLS_CLICK_EVENT="interaction:merged-cells-click",r.CORNER_TEXT_CLICK_EVENT="interaction:corner-cell-text-click",r.ROW_COLUMN_CLICK_EVENT="interaction:row-column-click",r.ROW_TEXT_CLICK_EVENT="interaction:row-text-click",r.HOVER_EVENT="interaction:hover"})(R1||(R1={}));var Xe;(function(r){r.MOUSE_DOWN="mousedown",r.MOUSE_MOVE="mousemove",r.MOUSE_UP="mouseup",r.MOUSE_OUT="mouseout",r.MOUSE_LEAVE="mouseleave",r.TOUCH_START="touchstart",r.KEY_DOWN="keydown",r.KEY_UP="keyup",r.CLICK="click",r.HOVER="hover",r.DOUBLE_CLICK="dblclick",r.CONTEXT_MENU="contextmenu",r.POINTER_DOWN="pointerdown",r.POINTER_MOVE="pointermove",r.POINTER_OUT="pointerout",r.POINTER_LEAVE="pointerleave",r.POINTER_UP="pointerup",r.POINTER_CANCEL="pointercancel",r.POINTER_ENTER="pointerenter",r.POINTER_OVER="pointerover",r.RIGHT_DOWN="rightdown",r.RIGHT_UP="rightup"})(Xe||(Xe={}));var U;(function(r){r.ROW_CELL_HOVER="row-cell:hover",r.ROW_CELL_CLICK="row-cell:click",r.ROW_CELL_DOUBLE_CLICK="row-cell:double-click",r.ROW_CELL_CONTEXT_MENU="row-cell:context-menu",r.ROW_CELL_MOUSE_DOWN="row-cell:mouse-down",r.ROW_CELL_MOUSE_UP="row-cell:mouse-up",r.ROW_CELL_MOUSE_MOVE="row-cell:mouse-move",r.ROW_CELL_SCROLL="row-cell:scroll",r.ROW_CELL_BRUSH_SELECTION="row-cell:brush-selection",r.ROW_CELL_COLLAPSED="row-cell:collapsed",r.ROW_CELL_ALL_COLLAPSED="row-cell:all-collapsed",r.ROW_CELL_RENDER="row-cell:render",r.ROW_CELL_COLLAPSED__PRIVATE="row-cell:collapsed__private",r.ROW_CELL_ALL_COLLAPSED__PRIVATE="row-cell:all-collapsed__private",r.COL_CELL_HOVER="col-cell:hover",r.COL_CELL_CLICK="col-cell:click",r.COL_CELL_DOUBLE_CLICK="col-cell:double-click",r.COL_CELL_CONTEXT_MENU="col-cell:context-menu",r.COL_CELL_MOUSE_DOWN="col-cell:mouse-down",r.COL_CELL_MOUSE_UP="col-cell:mouse-up",r.COL_CELL_MOUSE_MOVE="col-cell:mouse-move",r.COL_CELL_BRUSH_SELECTION="col-cell:brush-selection",r.COL_CELL_EXPANDED="col-cell:expanded",r.COL_CELL_HIDDEN="col-cell:hidden",r.COL_CELL_RENDER="col-cell:render",r.DATA_CELL_HOVER="data-cell:hover",r.DATA_CELL_CLICK="data-cell:click",r.DATA_CELL_DOUBLE_CLICK="data-cell:double-click",r.DATA_CELL_CONTEXT_MENU="data-cell:context-menu",r.DATA_CELL_MOUSE_UP="data-cell:mouse-up",r.DATA_CELL_MOUSE_DOWN="data-cell:mouse-down",r.DATA_CELL_MOUSE_MOVE="data-cell:mouse-move",r.DATA_CELL_BRUSH_SELECTION="data-cell:brush-selection",r.DATA_CELL_SELECT_MOVE="data-cell:select-move",r.DATA_CELL_RENDER="data-cell:render",r.CORNER_CELL_HOVER="corner-cell:hover",r.CORNER_CELL_CLICK="corner-cell:click",r.CORNER_CELL_DOUBLE_CLICK="corner-cell:double-click",r.CORNER_CELL_CONTEXT_MENU="corner-cell:context-menu",r.CORNER_CELL_MOUSE_DOWN="corner-cell:mouse-down",r.CORNER_CELL_MOUSE_UP="corner-cell:mouse-up",r.CORNER_CELL_MOUSE_MOVE="corner-cell:mouse-move",r.CORNER_CELL_RENDER="corner-cell:render",r.MERGED_CELLS_HOVER="merged-cells:hover",r.MERGED_CELLS_CLICK="merged-cells:click",r.MERGED_CELLS_DOUBLE_CLICK="merged-cells:double-click",r.MERGED_CELLS_CONTEXT_MENU="merged-cells:context-menu",r.MERGED_CELLS_MOUSE_DOWN="merged-cells:mouse-down",r.MERGED_CELLS_MOUSE_UP="merged-cells:mouse-up",r.MERGED_CELLS_MOUSE_MOVE="merged-cells:mouse-move",r.MERGED_CELLS_RENDER="merged-cells:render",r.SERIES_NUMBER_CELL_RENDER="series-number-cell:render",r.RANGE_SORT="sort:range-sort",r.RANGE_SORTED="sort:range-sorted",r.RANGE_FILTER="filter:range-filter",r.RANGE_FILTERED="filter:range-filtered",r.LAYOUT_AFTER_HEADER_LAYOUT="layout:after-header-layout",r.LAYOUT_CELL_RENDER="layout:cell-render",r.LAYOUT_PAGINATION="layout:pagination",r.LAYOUT_AFTER_REAL_DATA_CELL_RENDER="layout:after-real-data-cell-render",r.LAYOUT_AFTER_RENDER="layout:after-render",r.LAYOUT_BEFORE_RENDER="layout:before-render",r.LAYOUT_DESTROY="layout:destroy",r.LAYOUT_RESIZE="layout:resize",r.LAYOUT_RESIZE_SERIES_WIDTH="layout:resize-series-width",r.LAYOUT_RESIZE_ROW_WIDTH="layout:resize-row-width",r.LAYOUT_RESIZE_ROW_HEIGHT="layout:resize-row-height",r.LAYOUT_RESIZE_COL_WIDTH="layout:resize-column-width",r.LAYOUT_RESIZE_COL_HEIGHT="layout:resize-column-height",r.LAYOUT_RESIZE_TREE_WIDTH="layout:resize-tree-width",r.LAYOUT_RESIZE_MOUSE_DOWN="layout:resize:mouse-down",r.LAYOUT_RESIZE_MOUSE_MOVE="layout:resize:mouse-move",r.LAYOUT_RESIZE_MOUSE_UP="layout:resize-mouse-up",r.GLOBAL_KEYBOARD_DOWN="global:keyboard-down",r.GLOBAL_KEYBOARD_UP="global:keyboard-up",r.GLOBAL_COPIED="global:copied",r.GLOBAL_MOUSE_UP="global:mouse-up",r.GLOBAL_MOUSE_MOVE="global:mouse-move",r.GLOBAL_ACTION_ICON_CLICK="global:action-icon-click",r.GLOBAL_ACTION_ICON_HOVER="global:action-icon-hover",r.GLOBAL_ACTION_ICON_HOVER_OFF="global:action-icon-hover-off",r.GLOBAL_CONTEXT_MENU="global:context-menu",r.GLOBAL_CLICK="global:click",r.GLOBAL_DOUBLE_CLICK="global:double-click",r.GLOBAL_SELECTED="global:selected",r.GLOBAL_HOVER="global:hover",r.GLOBAL_RESET="global:reset",r.GLOBAL_LINK_FIELD_JUMP="global:link-field-jump",r.GLOBAL_SCROLL="global:scroll"})(U||(U={}));var mw=typeof global=="object"&&global&&global.Object===Object&&global,VB=typeof self=="object"&&self&&self.Object===Object&&self,Sn=mw||VB||Function("return this")(),En=Sn.Symbol,Cw=Object.prototype,YB=Cw.hasOwnProperty,XB=Cw.toString,Os=En?En.toStringTag:void 0;function $B(r){var t=YB.call(r,Os),e=r[Os];try{r[Os]=void 0;var n=!0}catch(o){}var i=XB.call(r);return n&&(t?r[Os]=e:delete r[Os]),i}var qB=Object.prototype,KB=qB.toString;function ZB(r){return KB.call(r)}var QB="[object Null]",JB="[object Undefined]",M1=En?En.toStringTag:void 0;function Xn(r){return r==null?r===void 0?JB:QB:M1&&M1 in Object(r)?$B(r):ZB(r)}function kr(r){return r!=null&&typeof r=="object"}var jB="[object Symbol]";function Yo(r){return typeof r=="symbol"||kr(r)&&Xn(r)==jB}function xn(r,t){for(var e=-1,n=r==null?0:r.length,i=Array(n);++e<n;)i[e]=t(r[e],e,r);return i}var Ue=Array.isArray,eD=1/0,O1=En?En.prototype:void 0,I1=O1?O1.toString:void 0;function $f(r){if(typeof r=="string")return r;if(Ue(r))return xn(r,$f)+"";if(Yo(r))return I1?I1.call(r):"";var t=r+"";return t=="0"&&1/r==-eD?"-0":t}var tD=/\s/;function rD(r){for(var t=r.length;t--&&tD.test(r.charAt(t)););return t}var nD=/^\s+/;function iD(r){return r&&r.slice(0,rD(r)+1).replace(nD,"")}function qt(r){var t=typeof r;return r!=null&&(t=="object"||t=="function")}var A1=0/0,oD=/^[-+]0x[0-9a-f]+$/i,aD=/^0b[01]+$/i,sD=/^0o[0-7]+$/i,lD=parseInt;function fi(r){if(typeof r=="number")return r;if(Yo(r))return A1;if(qt(r)){var t=typeof r.valueOf=="function"?r.valueOf():r;r=qt(t)?t+"":t}if(typeof r!="string")return r===0?r:+r;r=iD(r);var e=aD.test(r);return e||sD.test(r)?lD(r.slice(2),e?2:8):oD.test(r)?A1:+r}var N1=1/0,uD=17976931348623157e292;function Ga(r){if(!r)return r===0?r:0;if(r=fi(r),r===N1||r===-N1){var t=r<0?-1:1;return t*uD}return r===r?r:0}function Fi(r){var t=Ga(r),e=t%1;return t===t?e?t-e:t:0}function po(r){return r}var fD="[object AsyncFunction]",dD="[object Function]",hD="[object GeneratorFunction]",cD="[object Proxy]";function Un(r){if(!qt(r))return!1;var t=Xn(r);return t==dD||t==hD||t==fD||t==cD}var nc=Sn["__core-js_shared__"],P1=function(){var r=/[^.]+$/.exec(nc&&nc.keys&&nc.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function vD(r){return!!P1&&P1 in r}var pD=Function.prototype,gD=pD.toString;function ta(r){if(r!=null){try{return gD.call(r)}catch(t){}try{return r+""}catch(t){}}return""}var yD=/[\\^$.*+?()[\]{}|]/g,mD=/^\[object .+?Constructor\]$/,CD=Function.prototype,wD=Object.prototype,xD=CD.toString,_D=wD.hasOwnProperty,ED=RegExp("^"+xD.call(_D).replace(yD,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function SD(r){if(!qt(r)||vD(r))return!1;var t=Un(r)?ED:mD;return t.test(ta(r))}function TD(r,t){return r==null?void 0:r[t]}function ra(r,t){var e=TD(r,t);return SD(e)?e:void 0}var zc=ra(Sn,"WeakMap"),B1=Object.create,bD=function(){function r(){}return function(t){if(!qt(t))return{};if(B1)return B1(t);r.prototype=t;var e=new r;return r.prototype=void 0,e}}();function LD(r,t,e){switch(e.length){case 0:return r.call(t);case 1:return r.call(t,e[0]);case 2:return r.call(t,e[0],e[1]);case 3:return r.call(t,e[0],e[1],e[2])}return r.apply(t,e)}function RD(){}function $v(r,t){var e=-1,n=r.length;for(t||(t=Array(n));++e<n;)t[e]=r[e];return t}var MD=800,OD=16,ID=Date.now;function AD(r){var t=0,e=0;return function(){var n=ID(),i=OD-(n-e);if(e=n,i>0){if(++t>=MD)return arguments[0]}else t=0;return r.apply(void 0,arguments)}}function ND(r){return function(){return r}}var gf=function(){try{var r=ra(Object,"defineProperty");return r({},"",{}),r}catch(t){}}(),PD=gf?function(r,t){return gf(r,"toString",{configurable:!0,enumerable:!1,value:ND(t),writable:!0})}:po,BD=PD,ww=AD(BD);function xw(r,t){for(var e=-1,n=r==null?0:r.length;++e<n&&t(r[e],e,r)!==!1;);return r}function qv(r,t,e,n){for(var i=r.length,o=e+(n?1:-1);n?o--:++o<i;)if(t(r[o],o,r))return o;return-1}function DD(r){return r!==r}function FD(r,t,e){for(var n=e-1,i=r.length;++n<i;)if(r[n]===t)return n;return-1}function Kv(r,t,e){return t===t?FD(r,t,e):qv(r,DD,e)}function Zv(r,t){var e=r==null?0:r.length;return!!e&&Kv(r,t,0)>-1}var kD=9007199254740991,HD=/^(?:0|[1-9]\d*)$/;function qf(r,t){var e=typeof r;return t=t==null?kD:t,!!t&&(e=="number"||e!="symbol"&&HD.test(r))&&r>-1&&r%1==0&&r<t}function Cl(r,t,e){t=="__proto__"&&gf?gf(r,t,{configurable:!0,enumerable:!0,value:e,writable:!0}):r[t]=e}function wl(r,t){return r===t||r!==r&&t!==t}var zD=Object.prototype,GD=zD.hasOwnProperty;function Kf(r,t,e){var n=r[t];(!(GD.call(r,t)&&wl(n,e))||e===void 0&&!(t in r))&&Cl(r,t,e)}function na(r,t,e,n){var i=!e;e||(e={});for(var o=-1,a=t.length;++o<a;){var s=t[o],l=n?n(e[s],r[s],s,e,r):void 0;l===void 0&&(l=r[s]),i?Cl(e,s,l):Kf(e,s,l)}return e}var D1=Math.max;function _w(r,t,e){return t=D1(t===void 0?r.length-1:t,0),function(){for(var n=arguments,i=-1,o=D1(n.length-t,0),a=Array(o);++i<o;)a[i]=n[t+i];i=-1;for(var s=Array(t+1);++i<t;)s[i]=n[i];return s[t]=e(a),LD(r,this,s)}}function go(r,t){return ww(_w(r,t,po),r+"")}var WD=9007199254740991;function Qv(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=WD}function $n(r){return r!=null&&Qv(r.length)&&!Un(r)}function ki(r,t,e){if(!qt(e))return!1;var n=typeof t;return(n=="number"?$n(e)&&qf(t,e.length):n=="string"&&t in e)?wl(e[t],r):!1}function Jv(r){return go(function(t,e){var n=-1,i=e.length,o=i>1?e[i-1]:void 0,a=i>2?e[2]:void 0;for(o=r.length>3&&typeof o=="function"?(i--,o):void 0,a&&ki(e[0],e[1],a)&&(o=i<3?void 0:o,i=1),t=Object(t);++n<i;){var s=e[n];s&&r(t,s,n,o)}return t})}var UD=Object.prototype;function xl(r){var t=r&&r.constructor,e=typeof t=="function"&&t.prototype||UD;return r===e}function Ew(r,t){for(var e=-1,n=Array(r);++e<r;)n[e]=t(e);return n}var VD="[object Arguments]";function F1(r){return kr(r)&&Xn(r)==VD}var Sw=Object.prototype,YD=Sw.hasOwnProperty,XD=Sw.propertyIsEnumerable,qa=F1(function(){return arguments}())?F1:function(r){return kr(r)&&YD.call(r,"callee")&&!XD.call(r,"callee")};function $D(){return!1}var Tw=typeof exports=="object"&&exports&&!exports.nodeType&&exports,k1=Tw&&typeof module=="object"&&module&&!module.nodeType&&module,qD=k1&&k1.exports===Tw,H1=qD?Sn.Buffer:void 0,KD=H1?H1.isBuffer:void 0,ZD=KD||$D,Ka=ZD,QD="[object Arguments]",JD="[object Array]",jD="[object Boolean]",e3="[object Date]",t3="[object Error]",r3="[object Function]",n3="[object Map]",i3="[object Number]",o3="[object Object]",a3="[object RegExp]",s3="[object Set]",l3="[object String]",u3="[object WeakMap]",f3="[object ArrayBuffer]",d3="[object DataView]",h3="[object Float32Array]",c3="[object Float64Array]",v3="[object Int8Array]",p3="[object Int16Array]",g3="[object Int32Array]",y3="[object Uint8Array]",m3="[object Uint8ClampedArray]",C3="[object Uint16Array]",w3="[object Uint32Array]",ct={};ct[h3]=ct[c3]=ct[v3]=ct[p3]=ct[g3]=ct[y3]=ct[m3]=ct[C3]=ct[w3]=!0;ct[QD]=ct[JD]=ct[f3]=ct[jD]=ct[d3]=ct[e3]=ct[t3]=ct[r3]=ct[n3]=ct[i3]=ct[o3]=ct[a3]=ct[s3]=ct[l3]=ct[u3]=!1;function x3(r){return kr(r)&&Qv(r.length)&&!!ct[Xn(r)]}function ia(r){return function(t){return r(t)}}var bw=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Vs=bw&&typeof module=="object"&&module&&!module.nodeType&&module,_3=Vs&&Vs.exports===bw,ic=_3&&mw.process,ho=function(){try{var r=Vs&&Vs.require&&Vs.require("util").types;return r||ic&&ic.binding&&ic.binding("util")}catch(t){}}(),z1=ho&&ho.isTypedArray,E3=z1?ia(z1):x3,Zf=E3,S3=Object.prototype,T3=S3.hasOwnProperty;function Lw(r,t){var e=Ue(r),n=!e&&qa(r),i=!e&&!n&&Ka(r),o=!e&&!n&&!i&&Zf(r),a=e||n||i||o,s=a?Ew(r.length,String):[],l=s.length;for(var u in r)(t||T3.call(r,u))&&!(a&&(u=="length"||i&&(u=="offset"||u=="parent")||o&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||qf(u,l)))&&s.push(u);return s}function Rw(r,t){return function(e){return r(t(e))}}var b3=Rw(Object.keys,Object),L3=Object.prototype,R3=L3.hasOwnProperty;function jv(r){if(!xl(r))return b3(r);var t=[];for(var e in Object(r))R3.call(r,e)&&e!="constructor"&&t.push(e);return t}function Hr(r){return $n(r)?Lw(r):jv(r)}var M3=Object.prototype,O3=M3.hasOwnProperty,I3=Jv(function(r,t){if(xl(t)||$n(t)){na(t,Hr(t),r);return}for(var e in t)O3.call(t,e)&&Kf(r,e,t[e])});function A3(r){var t=[];if(r!=null)for(var e in Object(r))t.push(e);return t}var N3=Object.prototype,P3=N3.hasOwnProperty;function B3(r){if(!qt(r))return A3(r);var t=xl(r),e=[];for(var n in r)n=="constructor"&&(t||!P3.call(r,n))||e.push(n);return e}function is(r){return $n(r)?Lw(r,!0):B3(r)}var D3=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,F3=/^\w*$/;function ep(r,t){if(Ue(r))return!1;var e=typeof r;return e=="number"||e=="symbol"||e=="boolean"||r==null||Yo(r)?!0:F3.test(r)||!D3.test(r)||t!=null&&r in Object(t)}var js=ra(Object,"create");function k3(){this.__data__=js?js(null):{},this.size=0}function H3(r){var t=this.has(r)&&delete this.__data__[r];return this.size-=t?1:0,t}var z3="__lodash_hash_undefined__",G3=Object.prototype,W3=G3.hasOwnProperty;function U3(r){var t=this.__data__;if(js){var e=t[r];return e===z3?void 0:e}return W3.call(t,r)?t[r]:void 0}var V3=Object.prototype,Y3=V3.hasOwnProperty;function X3(r){var t=this.__data__;return js?t[r]!==void 0:Y3.call(t,r)}var $3="__lodash_hash_undefined__";function q3(r,t){var e=this.__data__;return this.size+=this.has(r)?0:1,e[r]=js&&t===void 0?$3:t,this}function Xo(r){var t=-1,e=r==null?0:r.length;for(this.clear();++t<e;){var n=r[t];this.set(n[0],n[1])}}Xo.prototype.clear=k3;Xo.prototype.delete=H3;Xo.prototype.get=U3;Xo.prototype.has=X3;Xo.prototype.set=q3;function K3(){this.__data__=[],this.size=0}function Qf(r,t){for(var e=r.length;e--;)if(wl(r[e][0],t))return e;return-1}var Z3=Array.prototype,Q3=Z3.splice;function J3(r){var t=this.__data__,e=Qf(t,r);if(e<0)return!1;var n=t.length-1;return e==n?t.pop():Q3.call(t,e,1),--this.size,!0}function j3(r){var t=this.__data__,e=Qf(t,r);return e<0?void 0:t[e][1]}function e4(r){return Qf(this.__data__,r)>-1}function t4(r,t){var e=this.__data__,n=Qf(e,r);return n<0?(++this.size,e.push([r,t])):e[n][1]=t,this}function Hi(r){var t=-1,e=r==null?0:r.length;for(this.clear();++t<e;){var n=r[t];this.set(n[0],n[1])}}Hi.prototype.clear=K3;Hi.prototype.delete=J3;Hi.prototype.get=j3;Hi.prototype.has=e4;Hi.prototype.set=t4;var el=ra(Sn,"Map");function r4(){this.size=0,this.__data__={hash:new Xo,map:new(el||Hi),string:new Xo}}function n4(r){var t=typeof r;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?r!=="__proto__":r===null}function Jf(r,t){var e=r.__data__;return n4(t)?e[typeof t=="string"?"string":"hash"]:e.map}function i4(r){var t=Jf(this,r).delete(r);return this.size-=t?1:0,t}function o4(r){return Jf(this,r).get(r)}function a4(r){return Jf(this,r).has(r)}function s4(r,t){var e=Jf(this,r),n=e.size;return e.set(r,t),this.size+=e.size==n?0:1,this}function zi(r){var t=-1,e=r==null?0:r.length;for(this.clear();++t<e;){var n=r[t];this.set(n[0],n[1])}}zi.prototype.clear=r4;zi.prototype.delete=i4;zi.prototype.get=o4;zi.prototype.has=a4;zi.prototype.set=s4;var l4="Expected a function";function _l(r,t){if(typeof r!="function"||t!=null&&typeof t!="function")throw new TypeError(l4);var e=function(){var n=arguments,i=t?t.apply(this,n):n[0],o=e.cache;if(o.has(i))return o.get(i);var a=r.apply(this,n);return e.cache=o.set(i,a)||o,a};return e.cache=new(_l.Cache||zi),e}_l.Cache=zi;var u4=500;function f4(r){var t=_l(r,function(n){return e.size===u4&&e.clear(),n}),e=t.cache;return t}var d4=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,h4=/\\(\\)?/g,c4=f4(function(r){var t=[];return r.charCodeAt(0)===46&&t.push(""),r.replace(d4,function(e,n,i,o){t.push(i?o.replace(h4,"$1"):n||e)}),t});function vi(r){return r==null?"":$f(r)}function os(r,t){return Ue(r)?r:ep(r,t)?[r]:c4(vi(r))}var v4=1/0;function as(r){if(typeof r=="string"||Yo(r))return r;var t=r+"";return t=="0"&&1/r==-v4?"-0":t}function El(r,t){t=os(t,r);for(var e=0,n=t.length;r!=null&&e<n;)r=r[as(t[e++])];return e&&e==n?r:void 0}function ze(r,t,e){var n=r==null?void 0:El(r,t);return n===void 0?e:n}function jf(r,t){for(var e=-1,n=t.length,i=r.length;++e<n;)r[i+e]=t[e];return r}var G1=En?En.isConcatSpreadable:void 0;function p4(r){return Ue(r)||qa(r)||!!(G1&&r&&r[G1])}function yo(r,t,e,n,i){var o=-1,a=r.length;for(e||(e=p4),i||(i=[]);++o<a;){var s=r[o];t>0&&e(s)?t>1?yo(s,t-1,e,n,i):jf(i,s):n||(i[i.length]=s)}return i}function g4(r){var t=r==null?0:r.length;return t?yo(r,1):[]}function Mw(r){return ww(_w(r,void 0,g4),r+"")}var tp=Rw(Object.getPrototypeOf,Object),y4="[object Object]",m4=Function.prototype,C4=Object.prototype,Ow=m4.toString,w4=C4.hasOwnProperty,x4=Ow.call(Object);function ed(r){if(!kr(r)||Xn(r)!=y4)return!1;var t=tp(r);if(t===null)return!0;var e=w4.call(t,"constructor")&&t.constructor;return typeof e=="function"&&e instanceof e&&Ow.call(e)==x4}function rp(r,t,e){var n=-1,i=r.length;t<0&&(t=-t>i?0:i+t),e=e>i?i:e,e<0&&(e+=i),i=t>e?0:e-t>>>0,t>>>=0;for(var o=Array(i);++n<i;)o[n]=r[n+t];return o}function _4(r,t,e){var n=r.length;return e=e===void 0?n:e,!t&&e>=n?r:rp(r,t,e)}var E4="\\ud800-\\udfff",S4="\\u0300-\\u036f",T4="\\ufe20-\\ufe2f",b4="\\u20d0-\\u20ff",L4=S4+T4+b4,R4="\\ufe0e\\ufe0f",M4="\\u200d",O4=RegExp("["+M4+E4+L4+R4+"]");function np(r){return O4.test(r)}function I4(r){return r.split("")}var Iw="\\ud800-\\udfff",A4="\\u0300-\\u036f",N4="\\ufe20-\\ufe2f",P4="\\u20d0-\\u20ff",B4=A4+N4+P4,D4="\\ufe0e\\ufe0f",F4="["+Iw+"]",Gc="["+B4+"]",Wc="\\ud83c[\\udffb-\\udfff]",k4="(?:"+Gc+"|"+Wc+")",Aw="[^"+Iw+"]",Nw="(?:\\ud83c[\\udde6-\\uddff]){2}",Pw="[\\ud800-\\udbff][\\udc00-\\udfff]",H4="\\u200d",Bw=k4+"?",Dw="["+D4+"]?",z4="(?:"+H4+"(?:"+[Aw,Nw,Pw].join("|")+")"+Dw+Bw+")*",G4=Dw+Bw+z4,W4="(?:"+[Aw+Gc+"?",Gc,Nw,Pw,F4].join("|")+")",U4=RegExp(Wc+"(?="+Wc+")|"+W4+G4,"g");function V4(r){return r.match(U4)||[]}function Y4(r){return np(r)?V4(r):I4(r)}function Fw(r,t,e,n){var i=-1,o=r==null?0:r.length;for(n&&o&&(e=r[++i]);++i<o;)e=t(e,r[i],i,r);return e}function kw(r){return function(t){return r==null?void 0:r[t]}}var X4={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},$4=kw(X4),q4=$4,K4=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Z4="\\u0300-\\u036f",Q4="\\ufe20-\\ufe2f",J4="\\u20d0-\\u20ff",j4=Z4+Q4+J4,e5="["+j4+"]",t5=RegExp(e5,"g");function r5(r){return r=vi(r),r&&r.replace(K4,q4).replace(t5,"")}var n5=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function i5(r){return r.match(n5)||[]}var o5=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function a5(r){return o5.test(r)}var Hw="\\ud800-\\udfff",s5="\\u0300-\\u036f",l5="\\ufe20-\\ufe2f",u5="\\u20d0-\\u20ff",f5=s5+l5+u5,zw="\\u2700-\\u27bf",Gw="a-z\\xdf-\\xf6\\xf8-\\xff",d5="\\xac\\xb1\\xd7\\xf7",h5="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",c5="\\u2000-\\u206f",v5=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ww="A-Z\\xc0-\\xd6\\xd8-\\xde",p5="\\ufe0e\\ufe0f",Uw=d5+h5+c5+v5,Vw="['\u2019]",W1="["+Uw+"]",g5="["+f5+"]",Yw="\\d+",y5="["+zw+"]",Xw="["+Gw+"]",$w="[^"+Hw+Uw+Yw+zw+Gw+Ww+"]",m5="\\ud83c[\\udffb-\\udfff]",C5="(?:"+g5+"|"+m5+")",w5="[^"+Hw+"]",qw="(?:\\ud83c[\\udde6-\\uddff]){2}",Kw="[\\ud800-\\udbff][\\udc00-\\udfff]",Ra="["+Ww+"]",x5="\\u200d",U1="(?:"+Xw+"|"+$w+")",_5="(?:"+Ra+"|"+$w+")",V1="(?:"+Vw+"(?:d|ll|m|re|s|t|ve))?",Y1="(?:"+Vw+"(?:D|LL|M|RE|S|T|VE))?",Zw=C5+"?",Qw="["+p5+"]?",E5="(?:"+x5+"(?:"+[w5,qw,Kw].join("|")+")"+Qw+Zw+")*",S5="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",T5="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",b5=Qw+Zw+E5,L5="(?:"+[y5,qw,Kw].join("|")+")"+b5,R5=RegExp([Ra+"?"+Xw+"+"+V1+"(?="+[W1,Ra,"$"].join("|")+")",_5+"+"+Y1+"(?="+[W1,Ra+U1,"$"].join("|")+")",Ra+"?"+U1+"+"+V1,Ra+"+"+Y1,T5,S5,Yw,L5].join("|"),"g");function M5(r){return r.match(R5)||[]}function O5(r,t,e){return r=vi(r),t=e?void 0:t,t===void 0?a5(r)?M5(r):i5(r):r.match(t)||[]}var I5="['\u2019]",A5=RegExp(I5,"g");function N5(r){return function(t){return Fw(O5(r5(t).replace(A5,"")),r,"")}}var P5=Sn.isFinite,B5=Math.min;function D5(r){var t=Math[r];return function(e,n){if(e=fi(e),n=n==null?0:B5(Fi(n),292),n&&P5(e)){var i=(vi(e)+"e").split("e"),o=t(i[0]+"e"+(+i[1]+n));return i=(vi(o)+"e").split("e"),+(i[0]+"e"+(+i[1]-n))}return t(e)}}function Jw(r,t,e){return r===r&&(e!==void 0&&(r=r<=e?r:e),t!==void 0&&(r=r>=t?r:t)),r}function yf(r,t,e){return e===void 0&&(e=t,t=void 0),e!==void 0&&(e=fi(e),e=e===e?e:0),t!==void 0&&(t=fi(t),t=t===t?t:0),Jw(fi(r),t,e)}function F5(){this.__data__=new Hi,this.size=0}function k5(r){var t=this.__data__,e=t.delete(r);return this.size=t.size,e}function H5(r){return this.__data__.get(r)}function z5(r){return this.__data__.has(r)}var G5=200;function W5(r,t){var e=this.__data__;if(e instanceof Hi){var n=e.__data__;if(!el||n.length<G5-1)return n.push([r,t]),this.size=++e.size,this;e=this.__data__=new zi(n)}return e.set(r,t),this.size=e.size,this}function kn(r){var t=this.__data__=new Hi(r);this.size=t.size}kn.prototype.clear=F5;kn.prototype.delete=k5;kn.prototype.get=H5;kn.prototype.has=z5;kn.prototype.set=W5;function U5(r,t){return r&&na(t,Hr(t),r)}function V5(r,t){return r&&na(t,is(t),r)}var jw=typeof exports=="object"&&exports&&!exports.nodeType&&exports,X1=jw&&typeof module=="object"&&module&&!module.nodeType&&module,Y5=X1&&X1.exports===jw,$1=Y5?Sn.Buffer:void 0,q1=$1?$1.allocUnsafe:void 0;function ex(r,t){if(t)return r.slice();var e=r.length,n=q1?q1(e):new r.constructor(e);return r.copy(n),n}function ip(r,t){for(var e=-1,n=r==null?0:r.length,i=0,o=[];++e<n;){var a=r[e];t(a,e,r)&&(o[i++]=a)}return o}function tx(){return[]}var X5=Object.prototype,$5=X5.propertyIsEnumerable,K1=Object.getOwnPropertySymbols,op=K1?function(r){return r==null?[]:(r=Object(r),ip(K1(r),function(t){return $5.call(r,t)}))}:tx;function q5(r,t){return na(r,op(r),t)}var K5=Object.getOwnPropertySymbols,rx=K5?function(r){for(var t=[];r;)jf(t,op(r)),r=tp(r);return t}:tx;function Z5(r,t){return na(r,rx(r),t)}function nx(r,t,e){var n=t(r);return Ue(r)?n:jf(n,e(r))}function Uc(r){return nx(r,Hr,op)}function ap(r){return nx(r,is,rx)}var Vc=ra(Sn,"DataView"),Yc=ra(Sn,"Promise"),Wa=ra(Sn,"Set"),Z1="[object Map]",Q5="[object Object]",Q1="[object Promise]",J1="[object Set]",j1="[object WeakMap]",em="[object DataView]",J5=ta(Vc),j5=ta(el),eF=ta(Yc),tF=ta(Wa),rF=ta(zc),No=Xn;(Vc&&No(new Vc(new ArrayBuffer(1)))!=em||el&&No(new el)!=Z1||Yc&&No(Yc.resolve())!=Q1||Wa&&No(new Wa)!=J1||zc&&No(new zc)!=j1)&&(No=function(r){var t=Xn(r),e=t==Q5?r.constructor:void 0,n=e?ta(e):"";if(n)switch(n){case J5:return em;case j5:return Z1;case eF:return Q1;case tF:return J1;case rF:return j1}return t});var $o=No,nF=Object.prototype,iF=nF.hasOwnProperty;function oF(r){var t=r.length,e=new r.constructor(t);return t&&typeof r[0]=="string"&&iF.call(r,"index")&&(e.index=r.index,e.input=r.input),e}var aF=Sn.Uint8Array,mf=aF;function sp(r){var t=new r.constructor(r.byteLength);return new mf(t).set(new mf(r)),t}function sF(r,t){var e=t?sp(r.buffer):r.buffer;return new r.constructor(e,r.byteOffset,r.byteLength)}var lF=/\w*$/;function uF(r){var t=new r.constructor(r.source,lF.exec(r));return t.lastIndex=r.lastIndex,t}var tm=En?En.prototype:void 0,rm=tm?tm.valueOf:void 0;function fF(r){return rm?Object(rm.call(r)):{}}function ix(r,t){var e=t?sp(r.buffer):r.buffer;return new r.constructor(e,r.byteOffset,r.length)}var dF="[object Boolean]",hF="[object Date]",cF="[object Map]",vF="[object Number]",pF="[object RegExp]",gF="[object Set]",yF="[object String]",mF="[object Symbol]",CF="[object ArrayBuffer]",wF="[object DataView]",xF="[object Float32Array]",_F="[object Float64Array]",EF="[object Int8Array]",SF="[object Int16Array]",TF="[object Int32Array]",bF="[object Uint8Array]",LF="[object Uint8ClampedArray]",RF="[object Uint16Array]",MF="[object Uint32Array]";function OF(r,t,e){var n=r.constructor;switch(t){case CF:return sp(r);case dF:case hF:return new n(+r);case wF:return sF(r,e);case xF:case _F:case EF:case SF:case TF:case bF:case LF:case RF:case MF:return ix(r,e);case cF:return new n;case vF:case yF:return new n(r);case pF:return uF(r);case gF:return new n;case mF:return fF(r)}}function ox(r){return typeof r.constructor=="function"&&!xl(r)?bD(tp(r)):{}}var IF="[object Map]";function AF(r){return kr(r)&&$o(r)==IF}var nm=ho&&ho.isMap,NF=nm?ia(nm):AF,PF="[object Set]";function BF(r){return kr(r)&&$o(r)==PF}var im=ho&&ho.isSet,DF=im?ia(im):BF,FF=1,kF=2,HF=4,ax="[object Arguments]",zF="[object Array]",GF="[object Boolean]",WF="[object Date]",UF="[object Error]",sx="[object Function]",VF="[object GeneratorFunction]",YF="[object Map]",XF="[object Number]",lx="[object Object]",$F="[object RegExp]",qF="[object Set]",KF="[object String]",ZF="[object Symbol]",QF="[object WeakMap]",JF="[object ArrayBuffer]",jF="[object DataView]",e8="[object Float32Array]",t8="[object Float64Array]",r8="[object Int8Array]",n8="[object Int16Array]",i8="[object Int32Array]",o8="[object Uint8Array]",a8="[object Uint8ClampedArray]",s8="[object Uint16Array]",l8="[object Uint32Array]",lt={};lt[ax]=lt[zF]=lt[JF]=lt[jF]=lt[GF]=lt[WF]=lt[e8]=lt[t8]=lt[r8]=lt[n8]=lt[i8]=lt[YF]=lt[XF]=lt[lx]=lt[$F]=lt[qF]=lt[KF]=lt[ZF]=lt[o8]=lt[a8]=lt[s8]=lt[l8]=!0;lt[UF]=lt[sx]=lt[QF]=!1;function Ua(r,t,e,n,i,o){var a,s=t&FF,l=t&kF,u=t&HF;if(e&&(a=i?e(r,n,i,o):e(r)),a!==void 0)return a;if(!qt(r))return r;var d=Ue(r);if(d){if(a=oF(r),!s)return $v(r,a)}else{var h=$o(r),v=h==sx||h==VF;if(Ka(r))return ex(r,s);if(h==lx||h==ax||v&&!i){if(a=l||v?{}:ox(r),!s)return l?Z5(r,V5(a,r)):q5(r,U5(a,r))}else{if(!lt[h])return i?r:{};a=OF(r,h,s)}}o||(o=new kn);var p=o.get(r);if(p)return p;o.set(r,a),DF(r)?r.forEach(function(C){a.add(Ua(C,t,e,C,r,o))}):NF(r)&&r.forEach(function(C,w){a.set(w,Ua(C,t,e,w,r,o))});var g=u?l?ap:Uc:l?is:Hr,m=d?void 0:g(r);return xw(m||r,function(C,w){m&&(w=C,C=r[w]),Kf(a,w,Ua(C,t,e,w,r,o))}),a}var u8=4;function td(r){return Ua(r,u8)}var f8=1,d8=4;function om(r){return Ua(r,f8|d8)}function Hn(r){for(var t=-1,e=r==null?0:r.length,n=0,i=[];++t<e;){var o=r[t];o&&(i[n++]=o)}return i}function lo(){var r=arguments.length;if(!r)return[];for(var t=Array(r-1),e=arguments[0],n=r;n--;)t[n-1]=arguments[n];return jf(Ue(e)?$v(e):[e],yo(t,1))}var h8="__lodash_hash_undefined__";function c8(r){return this.__data__.set(r,h8),this}function v8(r){return this.__data__.has(r)}function qo(r){var t=-1,e=r==null?0:r.length;for(this.__data__=new zi;++t<e;)this.add(r[t])}qo.prototype.add=qo.prototype.push=c8;qo.prototype.has=v8;function ux(r,t){for(var e=-1,n=r==null?0:r.length;++e<n;)if(t(r[e],e,r))return!0;return!1}function tl(r,t){return r.has(t)}var p8=1,g8=2;function fx(r,t,e,n,i,o){var a=e&p8,s=r.length,l=t.length;if(s!=l&&!(a&&l>s))return!1;var u=o.get(r),d=o.get(t);if(u&&d)return u==t&&d==r;var h=-1,v=!0,p=e&g8?new qo:void 0;for(o.set(r,t),o.set(t,r);++h<s;){var g=r[h],m=t[h];if(n)var C=a?n(m,g,h,t,r,o):n(g,m,h,r,t,o);if(C!==void 0){if(C)continue;v=!1;break}if(p){if(!ux(t,function(w,_){if(!tl(p,_)&&(g===w||i(g,w,e,n,o)))return p.push(_)})){v=!1;break}}else if(!(g===m||i(g,m,e,n,o))){v=!1;break}}return o.delete(r),o.delete(t),v}function y8(r){var t=-1,e=Array(r.size);return r.forEach(function(n,i){e[++t]=[i,n]}),e}function lp(r){var t=-1,e=Array(r.size);return r.forEach(function(n){e[++t]=n}),e}var m8=1,C8=2,w8="[object Boolean]",x8="[object Date]",_8="[object Error]",E8="[object Map]",S8="[object Number]",T8="[object RegExp]",b8="[object Set]",L8="[object String]",R8="[object Symbol]",M8="[object ArrayBuffer]",O8="[object DataView]",am=En?En.prototype:void 0,oc=am?am.valueOf:void 0;function I8(r,t,e,n,i,o,a){switch(e){case O8:if(r.byteLength!=t.byteLength||r.byteOffset!=t.byteOffset)return!1;r=r.buffer,t=t.buffer;case M8:return!(r.byteLength!=t.byteLength||!o(new mf(r),new mf(t)));case w8:case x8:case S8:return wl(+r,+t);case _8:return r.name==t.name&&r.message==t.message;case T8:case L8:return r==t+"";case E8:var s=y8;case b8:var l=n&m8;if(s||(s=lp),r.size!=t.size&&!l)return!1;var u=a.get(r);if(u)return u==t;n|=C8,a.set(r,t);var d=fx(s(r),s(t),n,i,o,a);return a.delete(r),d;case R8:if(oc)return oc.call(r)==oc.call(t)}return!1}var A8=1,N8=Object.prototype,P8=N8.hasOwnProperty;function B8(r,t,e,n,i,o){var a=e&A8,s=Uc(r),l=s.length,u=Uc(t),d=u.length;if(l!=d&&!a)return!1;for(var h=l;h--;){var v=s[h];if(!(a?v in t:P8.call(t,v)))return!1}var p=o.get(r),g=o.get(t);if(p&&g)return p==t&&g==r;var m=!0;o.set(r,t),o.set(t,r);for(var C=a;++h<l;){v=s[h];var w=r[v],_=t[v];if(n)var S=a?n(_,w,v,t,r,o):n(w,_,v,r,t,o);if(!(S===void 0?w===_||i(w,_,e,n,o):S)){m=!1;break}C||(C=v=="constructor")}if(m&&!C){var b=r.constructor,T=t.constructor;b!=T&&"constructor"in r&&"constructor"in t&&!(typeof b=="function"&&b instanceof b&&typeof T=="function"&&T instanceof T)&&(m=!1)}return o.delete(r),o.delete(t),m}var D8=1,sm="[object Arguments]",lm="[object Array]",Wu="[object Object]",F8=Object.prototype,um=F8.hasOwnProperty;function k8(r,t,e,n,i,o){var a=Ue(r),s=Ue(t),l=a?lm:$o(r),u=s?lm:$o(t);l=l==sm?Wu:l,u=u==sm?Wu:u;var d=l==Wu,h=u==Wu,v=l==u;if(v&&Ka(r)){if(!Ka(t))return!1;a=!0,d=!1}if(v&&!d)return o||(o=new kn),a||Zf(r)?fx(r,t,e,n,i,o):I8(r,t,l,e,n,i,o);if(!(e&D8)){var p=d&&um.call(r,"__wrapped__"),g=h&&um.call(t,"__wrapped__");if(p||g){var m=p?r.value():r,C=g?t.value():t;return o||(o=new kn),i(m,C,e,n,o)}}return v?(o||(o=new kn),B8(r,t,e,n,i,o)):!1}function rd(r,t,e,n,i){return r===t?!0:r==null||t==null||!kr(r)&&!kr(t)?r!==r&&t!==t:k8(r,t,e,n,rd,i)}var H8=1,z8=2;function G8(r,t,e,n){var i=e.length,o=i,a=!n;if(r==null)return!o;for(r=Object(r);i--;){var s=e[i];if(a&&s[2]?s[1]!==r[s[0]]:!(s[0]in r))return!1}for(;++i<o;){s=e[i];var l=s[0],u=r[l],d=s[1];if(a&&s[2]){if(u===void 0&&!(l in r))return!1}else{var h=new kn;if(n)var v=n(u,d,l,r,t,h);if(!(v===void 0?rd(d,u,H8|z8,n,h):v))return!1}}return!0}function dx(r){return r===r&&!qt(r)}function W8(r){for(var t=Hr(r),e=t.length;e--;){var n=t[e],i=r[n];t[e]=[n,i,dx(i)]}return t}function hx(r,t){return function(e){return e==null?!1:e[r]===t&&(t!==void 0||r in Object(e))}}function U8(r){var t=W8(r);return t.length==1&&t[0][2]?hx(t[0][0],t[0][1]):function(e){return e===r||G8(e,r,t)}}function V8(r,t){return r!=null&&t in Object(r)}function cx(r,t,e){t=os(t,r);for(var n=-1,i=t.length,o=!1;++n<i;){var a=as(t[n]);if(!(o=r!=null&&e(r,a)))break;r=r[a]}return o||++n!=i?o:(i=r==null?0:r.length,!!i&&Qv(i)&&qf(a,i)&&(Ue(r)||qa(r)))}function Za(r,t){return r!=null&&cx(r,t,V8)}var Y8=1,X8=2;function $8(r,t){return ep(r)&&dx(t)?hx(as(r),t):function(e){var n=ze(e,r);return n===void 0&&n===t?Za(e,r):rd(t,n,Y8|X8)}}function up(r){return function(t){return t==null?void 0:t[r]}}function q8(r){return function(t){return El(t,r)}}function K8(r){return ep(r)?up(as(r)):q8(r)}function Er(r){return typeof r=="function"?r:r==null?po:typeof r=="object"?Ue(r)?$8(r[0],r[1]):U8(r):K8(r)}function Z8(r,t,e,n){for(var i=-1,o=r==null?0:r.length;++i<o;){var a=r[i];t(n,a,e(a),r)}return n}function Q8(r){return function(t,e,n){for(var i=-1,o=Object(t),a=n(t),s=a.length;s--;){var l=a[r?s:++i];if(e(o[l],l,o)===!1)break}return t}}var fp=Q8();function vx(r,t){return r&&fp(r,t,Hr)}function J8(r,t){return function(e,n){if(e==null)return e;if(!$n(e))return r(e,n);for(var i=e.length,o=t?i:-1,a=Object(e);(t?o--:++o<i)&&n(a[o],o,a)!==!1;);return e}}var j8=J8(vx),oa=j8;function ek(r,t,e,n){return oa(r,function(i,o,a){t(n,i,e(i),a)}),n}function tk(r,t){return function(e,n){var i=Ue(e)?Z8:ek,o=t?t():{};return i(e,r,Er(n),o)}}var ac=function(){return Sn.Date.now()},rk="Expected a function",nk=Math.max,ik=Math.min;function Cf(r,t,e){var n,i,o,a,s,l,u=0,d=!1,h=!1,v=!0;if(typeof r!="function")throw new TypeError(rk);t=fi(t)||0,qt(e)&&(d=!!e.leading,h="maxWait"in e,o=h?nk(fi(e.maxWait)||0,t):o,v="trailing"in e?!!e.trailing:v);function p(E){var R=n,O=i;return n=i=void 0,u=E,a=r.apply(O,R),a}function g(E){return u=E,s=setTimeout(w,t),d?p(E):a}function m(E){var R=E-l,O=E-u,A=t-R;return h?ik(A,o-O):A}function C(E){var R=E-l,O=E-u;return l===void 0||R>=t||R<0||h&&O>=o}function w(){var E=ac();if(C(E))return _(E);s=setTimeout(w,m(E))}function _(E){return s=void 0,v&&n?p(E):(n=i=void 0,a)}function S(){s!==void 0&&clearTimeout(s),u=0,n=l=i=s=void 0}function b(){return s===void 0?a:_(ac())}function T(){var E=ac(),R=C(E);if(n=arguments,i=this,l=E,R){if(s===void 0)return g(l);if(h)return clearTimeout(s),s=setTimeout(w,t),p(l)}return s===void 0&&(s=setTimeout(w,t)),a}return T.cancel=S,T.flush=b,T}function Xc(r,t,e){(e!==void 0&&!wl(r[t],e)||e===void 0&&!(t in r))&&Cl(r,t,e)}function di(r){return kr(r)&&$n(r)}function $c(r,t){if(!(t==="constructor"&&typeof r[t]=="function")&&t!="__proto__")return r[t]}function ok(r){return na(r,is(r))}function ak(r,t,e,n,i,o,a){var s=$c(r,e),l=$c(t,e),u=a.get(l);if(u){Xc(r,e,u);return}var d=o?o(s,l,e+"",r,t,a):void 0,h=d===void 0;if(h){var v=Ue(l),p=!v&&Ka(l),g=!v&&!p&&Zf(l);d=l,v||p||g?Ue(s)?d=s:di(s)?d=$v(s):p?(h=!1,d=ex(l,!0)):g?(h=!1,d=ix(l,!0)):d=[]:ed(l)||qa(l)?(d=s,qa(s)?d=ok(s):(!qt(s)||Un(s))&&(d=ox(l))):h=!1}h&&(a.set(l,d),i(d,l,n,o,a),a.delete(l)),Xc(r,e,d)}function dp(r,t,e,n,i){r!==t&&fp(t,function(o,a){if(i||(i=new kn),qt(o))ak(r,t,a,e,dp,n,i);else{var s=n?n($c(r,a),o,a+"",r,t,i):void 0;s===void 0&&(s=o),Xc(r,a,s)}},is)}var sk=Jv(function(r,t,e,n){dp(r,t,e,n)}),lk="Expected a function";function uk(r,t,e){if(typeof r!="function")throw new TypeError(lk);return setTimeout(function(){r.apply(void 0,e)},t)}var fk=go(function(r,t,e){return uk(r,fi(t)||0,e)});function hp(r,t,e){for(var n=-1,i=r==null?0:r.length;++n<i;)if(e(t,r[n]))return!0;return!1}var dk=200;function px(r,t,e,n){var i=-1,o=Zv,a=!0,s=r.length,l=[],u=t.length;if(!s)return l;e&&(t=xn(t,ia(e))),n?(o=hp,a=!1):t.length>=dk&&(o=tl,a=!1,t=new qo(t));e:for(;++i<s;){var d=r[i],h=e==null?d:e(d);if(d=n||d!==0?d:0,a&&h===h){for(var v=u;v--;)if(t[v]===h)continue e;l.push(d)}else o(t,h,n)||l.push(d)}return l}var hk=go(function(r,t){return di(r)?px(r,yo(t,1,di,!0)):[]});function It(r){var t=r==null?0:r.length;return t?r[t-1]:void 0}var ck=go(function(r,t){var e=It(t);return di(e)&&(e=void 0),di(r)?px(r,yo(t,1,di,!0),void 0,e):[]});function gx(r){return typeof r=="function"?r:po}function Me(r,t){var e=Ue(r)?xw:oa;return e(r,gx(t))}function vk(r,t,e){r=vi(r),t=$f(t);var n=r.length;e=e===void 0?n:Jw(Fi(e),0,n);var i=e;return e-=t.length,e>=0&&r.slice(e,i)==t}var pk={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},gk=kw(pk),yk=gk,yx=/[&<>"']/g,mk=RegExp(yx.source);function Ck(r){return r=vi(r),r&&mk.test(r)?r.replace(yx,yk):r}function wk(r,t){for(var e=-1,n=r==null?0:r.length;++e<n;)if(!t(r[e],e,r))return!1;return!0}function xk(r,t){var e=!0;return oa(r,function(n,i,o){return e=!!t(n,i,o),e}),e}function cp(r,t,e){var n=Ue(r)?wk:xk;return e&&ki(r,t,e)&&(t=void 0),n(r,Er(t))}function _k(r,t){var e=[];return oa(r,function(n,i,o){t(n,i,o)&&e.push(n)}),e}function Vn(r,t){var e=Ue(r)?ip:_k;return e(r,Er(t))}function mx(r){return function(t,e,n){var i=Object(t);if(!$n(t)){var o=Er(e);t=Hr(t),e=function(s){return o(i[s],s,i)}}var a=r(t,e,n);return a>-1?i[o?t[a]:a]:void 0}}var Ek=Math.max;function rl(r,t,e){var n=r==null?0:r.length;if(!n)return-1;var i=e==null?0:Fi(e);return i<0&&(i=Ek(n+i,0)),qv(r,Er(t),i)}var $t=mx(rl),Sk=Math.max,Tk=Math.min;function bk(r,t,e){var n=r==null?0:r.length;if(!n)return-1;var i=n-1;return e!==void 0&&(i=Fi(e),i=e<0?Sk(n+i,0):Tk(i,n-1)),qv(r,Er(t),i,!0)}var vp=mx(bk);function Sl(r){return r&&r.length?r[0]:void 0}function Cx(r,t){var e=-1,n=$n(r)?Array(r.length):[];return oa(r,function(i,o,a){n[++e]=t(i,o,a)}),n}function De(r,t){var e=Ue(r)?xn:Cx;return e(r,Er(t))}function Tl(r,t){return yo(De(r,t),1)}var Lk=D5("floor");function Rk(r,t){return r==null?r:fp(r,gx(t),is)}var Mk=Object.prototype,Ok=Mk.hasOwnProperty,pp=tk(function(r,t,e){Ok.call(r,e)?r[e].push(t):Cl(r,e,[t])});function wx(r,t){return r>t}var Ik=Object.prototype,Ak=Ik.hasOwnProperty;function Nk(r,t){return r!=null&&Ak.call(r,t)}function fm(r,t){return r!=null&&cx(r,t,Nk)}var Pk=Math.max,Bk=Math.min;function Dk(r,t,e){return r>=Bk(t,e)&&r<Pk(t,e)}function dm(r,t,e){return t=Ga(t),e===void 0?(e=t,t=0):e=Ga(e),r=fi(r),Dk(r,t,e)}var Fk="[object String]";function Pi(r){return typeof r=="string"||!Ue(r)&&kr(r)&&Xn(r)==Fk}function kk(r,t){return xn(t,function(e){return r[e]})}function gp(r){return r==null?[]:kk(r,Hr(r))}var Hk=Math.max;function Dr(r,t,e,n){r=$n(r)?r:gp(r),e=e&&!n?Fi(e):0;var i=r.length;return e<0&&(e=Hk(i+e,0)),Pi(r)?e<=i&&r.indexOf(t,e)>-1:!!i&&Kv(r,t,e)>-1}var zk=Math.max;function yp(r,t,e){var n=r==null?0:r.length;if(!n)return-1;var i=e==null?0:Fi(e);return i<0&&(i=zk(n+i,0)),Kv(r,t,i)}var Gk=Math.min;function Wk(r,t,e){for(var n=e?hp:Zv,i=r[0].length,o=r.length,a=o,s=Array(o),l=1/0,u=[];a--;){var d=r[a];a&&t&&(d=xn(d,ia(t))),l=Gk(d.length,l),s[a]=!e&&(t||i>=120&&d.length>=120)?new qo(a&&d):void 0}d=r[0];var h=-1,v=s[0];e:for(;++h<i&&u.length<l;){var p=d[h],g=t?t(p):p;if(p=e||p!==0?p:0,!(v?tl(v,g):n(u,g,e))){for(a=o;--a;){var m=s[a];if(!(m?tl(m,g):n(r[a],g,e)))continue e}v&&v.push(g),u.push(p)}}return u}function Uk(r){return di(r)?r:[]}var Vk=go(function(r){var t=xn(r,Uk);return t.length&&t[0]===r[0]?Wk(t):[]});function Yk(r,t){return t.length<2?r:El(r,rp(t,0,-1))}var Xk="[object Boolean]";function Ii(r){return r===!0||r===!1||kr(r)&&Xn(r)==Xk}var $k="[object Map]",qk="[object Set]",Kk=Object.prototype,Zk=Kk.hasOwnProperty;function se(r){if(r==null)return!0;if($n(r)&&(Ue(r)||typeof r=="string"||typeof r.splice=="function"||Ka(r)||Zf(r)||qa(r)))return!r.length;var t=$o(r);if(t==$k||t==qk)return!r.size;if(xl(r))return!jv(r).length;for(var e in r)if(Zk.call(r,e))return!1;return!0}function wr(r,t){return rd(r,t)}var Qk="[object Number]";function Br(r){return typeof r=="number"||kr(r)&&Xn(r)==Qk}function Lt(r){return r==null}function xx(r){return r===null}var Jk="[object RegExp]";function jk(r){return kr(r)&&Xn(r)==Jk}var hm=ho&&ho.isRegExp,eH=hm?ia(hm):jk;function _x(r){return r===void 0}var Ex=N5(function(r,t,e){return r+(e?" ":"")+t.toLowerCase()});function tH(r,t){return r<t}function rH(r,t){var e={};return t=Er(t),vx(r,function(n,i,o){Cl(e,t(n,i,o),n)}),e}function mp(r,t,e){for(var n=-1,i=r.length;++n<i;){var o=r[n],a=t(o);if(a!=null&&(s===void 0?a===a&&!Yo(a):e(a,s)))var s=a,l=o}return l}function Ko(r){return r&&r.length?mp(r,po,wx):void 0}function Cp(r,t){return r&&r.length?mp(r,Er(t),wx):void 0}function nH(r,t){for(var e,n=-1,i=r.length;++n<i;){var o=t(r[n]);o!==void 0&&(e=e===void 0?o:e+o)}return e}var bl=Jv(function(r,t,e){dp(r,t,e)});function Sx(r){return r&&r.length?mp(r,po,tH):void 0}function Tx(r,t){return t=os(t,r),r=Yk(r,t),r==null||delete r[as(It(t))]}function iH(r){return ed(r)?void 0:r}var oH=1,aH=2,sH=4,bx=Mw(function(r,t){var e={};if(r==null)return e;var n=!1;t=xn(t,function(o){return o=os(o,r),n||(n=o.length>1),o}),na(r,ap(r),e),n&&(e=Ua(e,oH|aH|sH,iH));for(var i=t.length;i--;)Tx(e,t[i]);return e});function Lx(r,t,e,n){if(!qt(r))return r;t=os(t,r);for(var i=-1,o=t.length,a=o-1,s=r;s!=null&&++i<o;){var l=as(t[i]),u=e;if(l==="__proto__"||l==="constructor"||l==="prototype")return r;if(i!=a){var d=s[l];u=n?n(d,l,s):void 0,u===void 0&&(u=qt(d)?d:qf(t[i+1])?[]:{})}Kf(s,l,u),s=s[l]}return r}function Rx(r,t,e){for(var n=-1,i=t.length,o={};++n<i;){var a=t[n],s=El(r,a);e(s,a)&&Lx(o,os(a,r),s)}return o}function lH(r,t){if(r==null)return{};var e=xn(ap(r),function(n){return[n]});return t=Er(t),Rx(r,e,function(n,i){return t(n,i[0])})}function uH(r,t){var e=r.length;for(r.sort(t);e--;)r[e]=r[e].value;return r}function fH(r,t){if(r!==t){var e=r!==void 0,n=r===null,i=r===r,o=Yo(r),a=t!==void 0,s=t===null,l=t===t,u=Yo(t);if(!s&&!u&&!o&&r>t||o&&a&&l&&!s&&!u||n&&a&&l||!e&&l||!i)return 1;if(!n&&!o&&!u&&r<t||u&&e&&i&&!n&&!o||s&&e&&i||!a&&i||!l)return-1}return 0}function dH(r,t,e){for(var n=-1,i=r.criteria,o=t.criteria,a=i.length,s=e.length;++n<a;){var l=fH(i[n],o[n]);if(l){if(n>=s)return l;var u=e[n];return l*(u=="desc"?-1:1)}}return r.index-t.index}function Mx(r,t,e){t.length?t=xn(t,function(o){return Ue(o)?function(a){return El(a,o.length===1?o[0]:o)}:o}):t=[po];var n=-1;t=xn(t,ia(Er));var i=Cx(r,function(o,a,s){var l=xn(t,function(u){return u(o)});return{criteria:l,index:++n,value:o}});return uH(i,function(o,a){return dH(o,a,e)})}function hH(r,t,e,n){return r==null?[]:(Ue(t)||(t=t==null?[]:[t]),e=n?void 0:e,Ue(e)||(e=e==null?[]:[e]),Mx(r,t,e))}var cH=9007199254740991,vH=Math.floor;function pH(r,t){var e="";if(!r||t<1||t>cH)return e;do t%2&&(e+=r),t=vH(t/2),t&&(r+=r);while(t);return e}var gH=up("length"),Ox="\\ud800-\\udfff",yH="\\u0300-\\u036f",mH="\\ufe20-\\ufe2f",CH="\\u20d0-\\u20ff",wH=yH+mH+CH,xH="\\ufe0e\\ufe0f",_H="["+Ox+"]",qc="["+wH+"]",Kc="\\ud83c[\\udffb-\\udfff]",EH="(?:"+qc+"|"+Kc+")",Ix="[^"+Ox+"]",Ax="(?:\\ud83c[\\udde6-\\uddff]){2}",Nx="[\\ud800-\\udbff][\\udc00-\\udfff]",SH="\\u200d",Px=EH+"?",Bx="["+xH+"]?",TH="(?:"+SH+"(?:"+[Ix,Ax,Nx].join("|")+")"+Bx+Px+")*",bH=Bx+Px+TH,LH="(?:"+[Ix+qc+"?",qc,Ax,Nx,_H].join("|")+")",cm=RegExp(Kc+"(?="+Kc+")|"+LH+bH,"g");function RH(r){for(var t=cm.lastIndex=0;cm.test(r);)++t;return t}function MH(r){return np(r)?RH(r):gH(r)}function OH(r,t){return Rx(r,t,function(e,n){return Za(r,n)})}var IH=Mw(function(r,t){return r==null?{}:OH(r,t)}),AH=Math.ceil,NH=Math.max;function PH(r,t,e,n){for(var i=-1,o=NH(AH((t-r)/(e||1)),0),a=Array(o);o--;)a[n?o:++i]=r,r+=e;return a}function BH(r){return function(t,e,n){return n&&typeof n!="number"&&ki(t,e,n)&&(e=n=void 0),t=Ga(t),e===void 0?(e=t,t=0):e=Ga(e),n=n===void 0?t<e?1:-1:Ga(n),PH(t,e,n,r)}}var Ys=BH();function DH(r,t,e,n,i){return i(r,function(o,a,s){e=n?(n=!1,o):t(e,o,a,s)}),e}function Dx(r,t,e){var n=Ue(r)?Fw:DH,i=arguments.length<3;return n(r,Er(t),e,i,oa)}function FH(r,t,e){return(e?ki(r,t,e):t===void 0)?t=1:t=Fi(t),pH(vi(r),t)}function Zc(r,t,e){return r==null?r:Lx(r,t,e)}var kH="[object Map]",HH="[object Set]";function Aa(r){if(r==null)return 0;if($n(r))return Pi(r)?MH(r):r.length;var t=$o(r);return t==kH||t==HH?r.size:jv(r).length}function zH(r,t,e){var n=r==null?0:r.length;return n?(e&&typeof e!="number"&&ki(r,t,e)?(t=0,e=n):(t=t==null?0:Fi(t),e=e===void 0?n:Fi(e)),rp(r,t,e)):[]}function GH(r,t){var e;return oa(r,function(n,i,o){return e=t(n,i,o),!e}),!!e}function Qc(r,t,e){var n=Ue(r)?ux:GH;return e&&ki(r,t,e)&&(t=void 0),n(r,Er(t))}var Fx=go(function(r,t){if(r==null)return[];var e=t.length;return e>1&&ki(r,t[0],t[1])?t=[]:e>2&&ki(t[0],t[1],t[2])&&(t=[t[0]]),Mx(r,yo(t,1),[])}),WH=4294967295;function UH(r,t,e){return e&&typeof e!="number"&&ki(r,t,e)&&(t=e=void 0),e=e===void 0?WH:e>>>0,e?(r=vi(r),r&&(typeof t=="string"||t!=null&&!eH(t))&&(t=$f(t),!t&&np(r))?_4(Y4(r),0,e):r.split(t,e)):[]}function Zo(r,t){return r&&r.length?nH(r,Er(t)):0}var VH="Expected a function";function kx(r,t,e){var n=!0,i=!0;if(typeof r!="function")throw new TypeError(VH);return qt(e)&&(n="leading"in e?!!e.leading:n,i="trailing"in e?!!e.trailing:i),Cf(r,t,{leading:n,maxWait:t,trailing:i})}function wf(r){return vi(r).toUpperCase()}var YH=1/0,XH=Wa&&1/lp(new Wa([,-0]))[1]==YH?function(r){return new Wa(r)}:RD,$H=200;function Hx(r,t,e){var n=-1,i=Zv,o=r.length,a=!0,s=[],l=s;if(e)a=!1,i=hp;else if(o>=$H){var u=t?null:XH(r);if(u)return lp(u);a=!1,i=tl,l=new qo}else l=t?[]:s;e:for(;++n<o;){var d=r[n],h=t?t(d):d;if(d=e||d!==0?d:0,a&&h===h){for(var v=l.length;v--;)if(l[v]===h)continue e;t&&l.push(h),s.push(d)}else i(l,h,e)||(l!==s&&l.push(h),s.push(d))}return s}var qH=go(function(r){var t=It(r);return di(t)&&(t=void 0),Hx(yo(r,1,di,!0),Er(t))});function to(r){return r&&r.length?Hx(r):[]}function vm(r,t){return r==null?!0:Tx(r,t)}var KH=Math.max;function ZH(r){if(!(r&&r.length))return[];var t=0;return r=ip(r,function(e){if(di(e))return t=KH(e.length,t),!0}),Ew(t,function(e){return xn(r,up(e))})}var wp=go(ZH),QH={\u5C0F\u8BA1:"\u5C0F\u8BA1",\u603B\u8BA1:"\u603B\u8BA1",\u603B\u548C:"\uFF08\u603B\u548C\uFF09",\u9879:"\u9879",\u5DF2\u9009\u62E9:"\u5DF2\u9009\u62E9",\u5E8F\u53F7:"\u5E8F\u53F7",\u5EA6\u91CF:"\u5EA6\u91CF",\u6570\u503C:"\u6570\u503C",\u5171\u8BA1:"\u5171\u8BA1",\u6761:"\u6761",\u8D8B\u52BF:"\u8D8B\u52BF",\u9690\u85CF:"\u9690\u85CF",\u7EC4\u5185\u5347\u5E8F:"\u7EC4\u5185\u5347\u5E8F",\u5347\u5E8F:"\u5347\u5E8F",\u964D\u5E8F:"\u964D\u5E8F",\u7EC4\u5185\u964D\u5E8F:"\u7EC4\u5185\u964D\u5E8F",\u4E0D\u6392\u5E8F:"\u4E0D\u6392\u5E8F","\uFF0C":"\uFF0C"},JH={\u5C0F\u8BA1:"Total",\u603B\u8BA1:"Total",\u603B\u548C:"(SUM)",\u9879:"items",\u5DF2\u9009\u62E9:"selected",\u5E8F\u53F7:"Index",\u5EA6\u91CF:"Measure",\u6570\u503C:"Measure",\u5171\u8BA1:"Total",\u6761:"",\u9690\u85CF:"Hide",\u7EC4\u5185\u5347\u5E8F:"Group ASC",\u7EC4\u5185\u964D\u5E8F:"Group DESC",\u5347\u5E8F:"ASC",\u964D\u5E8F:"DESC",\u4E0D\u6392\u5E8F:"No order","\uFF0C":", "},jH="zh_CN",e6=jH,t6={zh_CN:QH,en_US:JH},kt=function(r,t){return t===void 0&&(t=r),ze(t6,[e6,r],t)},r6=0,n6=3,zx=3,nl=4,i6=5,o6=5,a6=1,s6=1,l6=2,u6=3,f6=4,d6="backGroundGroup",h6="foreGroundGroup",c6="panelGroup",v6="panelScrollGroup",pm="mergedCellsGroup",p6="frozenRowGroup",g6="frozenColGroup",y6="frozenTrailingRowGroup",m6="frozenTrailingColGroup",C6="frozenTopGroup",w6="frozenBottomGroup",Qa="rowResizeAreaGroup",Jc="rowFrozenResizeAreaGroup",xf="frozenSplitLine",gm="rowIndexResizeAreaGroup",jc="cornerResizeAreaGroup",Gx="colResizeAreaGroup",Wx="colFrozenResizeAreaGroup",x6="colScrollGroup",_6="colFrozenGroup",E6="colFrozenTrailingGroup",S6="gridGroup",T6="rowScrollGroup",b6="rowHeaderFrozenGroup",Ux="horizontal-resize-area-",xp="-",Vx=16,L6=.5,sc=50,Ja;(function(r){r.Line="line",r.Bar="bar",r.Bullet="bullet"})(Ja||(Ja={}));var nd=function(r){return r!=null?r:kt("\u5E8F\u53F7")},R6=function(){return kt("\u6307\u6807")},M6="antv-s2",_f="valueRanges",_p={},Yx="#000000",ev="#FFFFFF",O6={data:[],fields:{rows:[],columns:[],values:[],valueInCols:!0},meta:[],sortParams:[],filterParams:[]},bi,Ot;(function(r){r.ROW="row",r.COL="col",r.TRAILING_ROW="trailingRow",r.TRAILING_COL="trailingCol",r.SCROLL="scroll",r.TOP="top",r.BOTTOM="bottom"})(Ot||(Ot={}));var ut;(function(r){r.FROZEN_COL="frozenCol",r.FROZEN_ROW="frozenRow",r.FROZEN_TRAILING_COL="frozenTrailingCol",r.FROZEN_TRAILING_ROW="frozenTrailingRow"})(ut||(ut={}));var ym=(bi={},bi[Ot.ROW]="frozenRowGroup",bi[Ot.COL]="frozenColGroup",bi[Ot.TRAILING_COL]="frozenTrailingColGroup",bi[Ot.TRAILING_ROW]="frozenTrailingRowGroup",bi[Ot.SCROLL]="panelScrollGroup",bi[Ot.TOP]="frozenTopGroup",bi[Ot.BOTTOM]="frozenBottomGroup",bi),gr;(function(r){r.CORNER_CELL_CLICK="cornerCellClick",r.DATA_CELL_CLICK="dataCellClick",r.MERGED_CELLS_CLICK="mergedCellsClick",r.ROW_COLUMN_CLICK="rowColumnClick",r.ROW_TEXT_CLICK="rowTextClick",r.HOVER="hover",r.DATA_CELL_BRUSH_SELECTION="dataCellBrushSelection",r.ROW_CELL_BRUSH_SELECTION="rowCellBrushSelection",r.COL_CELL_BRUSH_SELECTION="colCellBrushSelection",r.COL_ROW_RESIZE="rowColResize",r.DATA_CELL_MULTI_SELECTION="dataCellMultiSelection",r.RANGE_SELECTION="rangeSelection",r.SELECTED_CELL_MOVE="selectedCellMove"})(gr||(gr={}));var ce;(function(r){r.ALL_SELECTED="allSelected",r.SELECTED="selected",r.ROW_CELL_BRUSH_SELECTED="rowCellBrushSelected",r.COL_CELL_BRUSH_SELECTED="colCellBrushSelected",r.DATA_CELL_BRUSH_SELECTED="dataCellBrushSelected",r.UNSELECTED="unselected",r.HOVER="hover",r.HOVER_FOCUS="hoverFocus",r.HIGHLIGHT="highlight",r.SEARCH_RESULT="searchResult",r.PREPARE_SELECT="prepareSelect"})(ce||(ce={}));var ie;(function(r){r.DATA_CELL="dataCell",r.ROW_CELL="rowCell",r.COL_CELL="colCell",r.SERIES_NUMBER_CELL="seriesNumberCell",r.CORNER_CELL="cornerCell",r.MERGED_CELL="mergedCell"})(ie||(ie={}));var tv=800,Qr={textOpacity:"fillOpacity",backgroundOpacity:"fillOpacity",backgroundColor:"fill",borderOpacity:"strokeOpacity",borderColor:"stroke",borderWidth:"lineWidth",opacity:"opacity"},I6={textShape:["textOpacity"],textShapes:["textOpacity"],linkFieldShape:["opacity"],interactiveBgShape:["backgroundColor","backgroundOpacity"],interactiveBorderShape:["borderColor","borderOpacity","borderWidth"]},rv="interactionStateInfo",ar;(function(r){r.CLICK="click",r.UN_DRAGGED="unDragged",r.DRAGGED="dragged"})(ar||(ar={}));var ur;(function(r){r.SHIFT="Shift",r.COPY="c",r.ESC="Escape",r.META="Meta",r.CONTROL="Control",r.ARROW_UP="ArrowUp",r.ARROW_DOWN="ArrowDown",r.ARROW_LEFT="ArrowLeft",r.ARROW_RIGHT="ArrowRight"})(ur||(ur={}));var mm;(function(r){r.ASC="ASC",r.DESC="DESC"})(mm||(mm={}));var Le;(function(r){r.HOVER="hover",r.CLICK="click",r.DATA_CELL_BRUSH_SELECTION="dataCellBrushSelection",r.ROW_CELL_BRUSH_SELECTION="rowCellBrushSelection",r.COL_CELL_BRUSH_SELECTION="colCellBrushSelection",r.MULTI_SELECTION="multiSelection",r.RESIZE="resize"})(Le||(Le={}));var Cm={x:{value:0,scroll:!1},y:{value:0,scroll:!1}},Ef;(function(r){r.CONTENT="content",r.CANVAS="canvas"})(Ef||(Ef={}));var Wt;(function(r){r.SCROLL_UP="scrollUp",r.SCROLL_DOWN="scrollDown"})(Wt||(Wt={}));var Sf;(function(r){r[r.SCROLL_UP=-1]="SCROLL_UP",r[r.SCROLL_DOWN=1]="SCROLL_DOWN"})(Sf||(Sf={}));var A6="RESIZE_START_GUIDE_LINE",N6="RESIZE_END_GUIDE_LINE",P6="RESIZE_MASK",Xx=20,$x=20,sr;(function(r){r.Horizontal="col",r.Vertical="row"})(sr||(sr={}));var mr;(function(r){r.Field="field",r.Cell="cell",r.Tree="tree",r.Series="series"})(mr||(mr={}));var ti;(function(r){r.ALL="all",r.CURRENT="current",r.SELECTED="selected"})(ti||(ti={}));var Tf;(function(r){r.PC="pc",r.MOBILE="mobile"})(Tf||(Tf={}));var B6=1,co;(function(r){r.Adaptive="adaptive",r.ColAdaptive="colAdaptive",r.Compact="compact"})(co||(co={}));var bf=1,wm=120,Is={wordWrap:!0,maxLines:1,textOverflow:"ellipsis"},nv={layoutWidthType:co.Adaptive,seriesNumberCell:Is,cornerCell:Is,rowCell:N(N({},Is),{showTreeLeafNodeAlignDot:!1,widthByField:null,heightByField:null}),colCell:N(N({},Is),{height:30,widthByField:null,heightByField:null}),dataCell:N(N({},Is),{width:96,height:30})},D6={width:600,height:480,debug:!1,hierarchyType:"grid",device:Tf.PC,conditions:{},totals:{},tooltip:{enable:!1,autoAdjustBoundary:"body",operation:{hiddenColumns:!1,sort:!1,menu:{items:[]}}},interaction:{copy:{enable:!0,withFormat:!0,withHeader:!1},linkFields:[],hiddenColumnFields:[],selectedCellsSpotlight:!1,hoverHighlight:!0,hoverFocus:{duration:tv},scrollSpeedRatio:{horizontal:1,vertical:1},autoResetSheetStyle:!0,brushSelection:{dataCell:!0,rowCell:!0,colCell:!0},multiSelection:!0,rangeSelection:!0,scrollbarPosition:Ef.CONTENT,resize:{rowCellVertical:!0,cornerCellHorizontal:!0,colCellHorizontal:!0,colCellVertical:!0,rowResizeType:ti.CURRENT,colResizeType:ti.CURRENT,minCellWidth:Xx,minCellHeight:$x},eventListenerOptions:!1,selectedCellHighlight:!1,overscrollBehavior:"auto"},seriesNumber:{enable:!1},customSVGIcons:[],showDefaultHeaderActionIcon:!1,headerActionIcons:[],style:nv,frozen:{rowHeader:!0,rowCount:0,colCount:0,trailingRowCount:0,trailingColCount:0},hd:!0,cornerText:"",cornerExtraFieldText:"",placeholder:xp};function Lf(r){return Lf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lf(r)}var F6=/^\s+/,k6=/\s+$/;function ge(r,t){if(r=r||"",t=t||{},r instanceof ge)return r;if(!(this instanceof ge))return new ge(r,t);var e=H6(r);this._originalInput=r,this._r=e.r,this._g=e.g,this._b=e.b,this._a=e.a,this._roundA=Math.round(100*this._a)/100,this._format=t.format||e.format,this._gradientType=t.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=e.ok}ge.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(t.r*299+t.g*587+t.b*114)/1e3},getLuminance:function(){var t=this.toRgb(),e,n,i,o,a,s;return e=t.r/255,n=t.g/255,i=t.b/255,e<=.03928?o=e/12.92:o=Math.pow((e+.055)/1.055,2.4),n<=.03928?a=n/12.92:a=Math.pow((n+.055)/1.055,2.4),i<=.03928?s=i/12.92:s=Math.pow((i+.055)/1.055,2.4),.2126*o+.7152*a+.0722*s},setAlpha:function(t){return this._a=qx(t),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var t=_m(this._r,this._g,this._b);return{h:t.h*360,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=_m(this._r,this._g,this._b),e=Math.round(t.h*360),n=Math.round(t.s*100),i=Math.round(t.v*100);return this._a==1?"hsv("+e+", "+n+"%, "+i+"%)":"hsva("+e+", "+n+"%, "+i+"%, "+this._roundA+")"},toHsl:function(){var t=xm(this._r,this._g,this._b);return{h:t.h*360,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=xm(this._r,this._g,this._b),e=Math.round(t.h*360),n=Math.round(t.s*100),i=Math.round(t.l*100);return this._a==1?"hsl("+e+", "+n+"%, "+i+"%)":"hsla("+e+", "+n+"%, "+i+"%, "+this._roundA+")"},toHex:function(t){return Em(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(t){return U6(this._r,this._g,this._b,this._a,t)},toHex8String:function(t){return"#"+this.toHex8(t)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(pt(this._r,255)*100)+"%",g:Math.round(pt(this._g,255)*100)+"%",b:Math.round(pt(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(pt(this._r,255)*100)+"%, "+Math.round(pt(this._g,255)*100)+"%, "+Math.round(pt(this._b,255)*100)+"%)":"rgba("+Math.round(pt(this._r,255)*100)+"%, "+Math.round(pt(this._g,255)*100)+"%, "+Math.round(pt(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:t9[Em(this._r,this._g,this._b,!0)]||!1},toFilter:function(t){var e="#"+Sm(this._r,this._g,this._b,this._a),n=e,i=this._gradientType?"GradientType = 1, ":"";if(t){var o=ge(t);n="#"+Sm(o._r,o._g,o._b,o._a)}return"progid:DXImageTransform.Microsoft.gradient("+i+"startColorstr="+e+",endColorstr="+n+")"},toString:function(t){var e=!!t;t=t||this._format;var n=!1,i=this._a<1&&this._a>=0,o=!e&&i&&(t==="hex"||t==="hex6"||t==="hex3"||t==="hex4"||t==="hex8"||t==="name");return o?t==="name"&&this._a===0?this.toName():this.toRgbString():(t==="rgb"&&(n=this.toRgbString()),t==="prgb"&&(n=this.toPercentageRgbString()),(t==="hex"||t==="hex6")&&(n=this.toHexString()),t==="hex3"&&(n=this.toHexString(!0)),t==="hex4"&&(n=this.toHex8String(!0)),t==="hex8"&&(n=this.toHex8String()),t==="name"&&(n=this.toName()),t==="hsl"&&(n=this.toHslString()),t==="hsv"&&(n=this.toHsvString()),n||this.toHexString())},clone:function(){return ge(this.toString())},_applyModification:function(t,e){var n=t.apply(null,[this].concat([].slice.call(e)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification($6,arguments)},brighten:function(){return this._applyModification(q6,arguments)},darken:function(){return this._applyModification(K6,arguments)},desaturate:function(){return this._applyModification(V6,arguments)},saturate:function(){return this._applyModification(Y6,arguments)},greyscale:function(){return this._applyModification(X6,arguments)},spin:function(){return this._applyModification(Z6,arguments)},_applyCombination:function(t,e){return t.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination(j6,arguments)},complement:function(){return this._applyCombination(Q6,arguments)},monochromatic:function(){return this._applyCombination(e9,arguments)},splitcomplement:function(){return this._applyCombination(J6,arguments)},triad:function(){return this._applyCombination(Tm,[3])},tetrad:function(){return this._applyCombination(Tm,[4])}};ge.fromRatio=function(r,t){if(Lf(r)=="object"){var e={};for(var n in r)r.hasOwnProperty(n)&&(n==="a"?e[n]=r[n]:e[n]=Fs(r[n]));r=e}return ge(r,t)};function H6(r){var t={r:0,g:0,b:0},e=1,n=null,i=null,o=null,a=!1,s=!1;return typeof r=="string"&&(r=o9(r)),Lf(r)=="object"&&(Li(r.r)&&Li(r.g)&&Li(r.b)?(t=z6(r.r,r.g,r.b),a=!0,s=String(r.r).substr(-1)==="%"?"prgb":"rgb"):Li(r.h)&&Li(r.s)&&Li(r.v)?(n=Fs(r.s),i=Fs(r.v),t=W6(r.h,n,i),a=!0,s="hsv"):Li(r.h)&&Li(r.s)&&Li(r.l)&&(n=Fs(r.s),o=Fs(r.l),t=G6(r.h,n,o),a=!0,s="hsl"),r.hasOwnProperty("a")&&(e=r.a)),e=qx(e),{ok:a,format:r.format||s,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:e}}function z6(r,t,e){return{r:pt(r,255)*255,g:pt(t,255)*255,b:pt(e,255)*255}}function xm(r,t,e){r=pt(r,255),t=pt(t,255),e=pt(e,255);var n=Math.max(r,t,e),i=Math.min(r,t,e),o,a,s=(n+i)/2;if(n==i)o=a=0;else{var l=n-i;switch(a=s>.5?l/(2-n-i):l/(n+i),n){case r:o=(t-e)/l+(t<e?6:0);break;case t:o=(e-r)/l+2;break;case e:o=(r-t)/l+4;break}o/=6}return{h:o,s:a,l:s}}function G6(r,t,e){var n,i,o;r=pt(r,360),t=pt(t,100),e=pt(e,100);function a(u,d,h){return h<0&&(h+=1),h>1&&(h-=1),h<1/6?u+(d-u)*6*h:h<1/2?d:h<2/3?u+(d-u)*(2/3-h)*6:u}if(t===0)n=i=o=e;else{var s=e<.5?e*(1+t):e+t-e*t,l=2*e-s;n=a(l,s,r+1/3),i=a(l,s,r),o=a(l,s,r-1/3)}return{r:n*255,g:i*255,b:o*255}}function _m(r,t,e){r=pt(r,255),t=pt(t,255),e=pt(e,255);var n=Math.max(r,t,e),i=Math.min(r,t,e),o,a,s=n,l=n-i;if(a=n===0?0:l/n,n==i)o=0;else{switch(n){case r:o=(t-e)/l+(t<e?6:0);break;case t:o=(e-r)/l+2;break;case e:o=(r-t)/l+4;break}o/=6}return{h:o,s:a,v:s}}function W6(r,t,e){r=pt(r,360)*6,t=pt(t,100),e=pt(e,100);var n=Math.floor(r),i=r-n,o=e*(1-t),a=e*(1-i*t),s=e*(1-(1-i)*t),l=n%6,u=[e,a,o,o,s,e][l],d=[s,e,e,a,o,o][l],h=[o,o,s,e,e,a][l];return{r:u*255,g:d*255,b:h*255}}function Em(r,t,e,n){var i=[Dn(Math.round(r).toString(16)),Dn(Math.round(t).toString(16)),Dn(Math.round(e).toString(16))];return n&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function U6(r,t,e,n,i){var o=[Dn(Math.round(r).toString(16)),Dn(Math.round(t).toString(16)),Dn(Math.round(e).toString(16)),Dn(Kx(n))];return i&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0):o.join("")}function Sm(r,t,e,n){var i=[Dn(Kx(n)),Dn(Math.round(r).toString(16)),Dn(Math.round(t).toString(16)),Dn(Math.round(e).toString(16))];return i.join("")}ge.equals=function(r,t){return!r||!t?!1:ge(r).toRgbString()==ge(t).toRgbString()};ge.random=function(){return ge.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function V6(r,t){t=t===0?0:t||10;var e=ge(r).toHsl();return e.s-=t/100,e.s=id(e.s),ge(e)}function Y6(r,t){t=t===0?0:t||10;var e=ge(r).toHsl();return e.s+=t/100,e.s=id(e.s),ge(e)}function X6(r){return ge(r).desaturate(100)}function $6(r,t){t=t===0?0:t||10;var e=ge(r).toHsl();return e.l+=t/100,e.l=id(e.l),ge(e)}function q6(r,t){t=t===0?0:t||10;var e=ge(r).toRgb();return e.r=Math.max(0,Math.min(255,e.r-Math.round(255*-(t/100)))),e.g=Math.max(0,Math.min(255,e.g-Math.round(255*-(t/100)))),e.b=Math.max(0,Math.min(255,e.b-Math.round(255*-(t/100)))),ge(e)}function K6(r,t){t=t===0?0:t||10;var e=ge(r).toHsl();return e.l-=t/100,e.l=id(e.l),ge(e)}function Z6(r,t){var e=ge(r).toHsl(),n=(e.h+t)%360;return e.h=n<0?360+n:n,ge(e)}function Q6(r){var t=ge(r).toHsl();return t.h=(t.h+180)%360,ge(t)}function Tm(r,t){if(isNaN(t)||t<=0)throw new Error("Argument to polyad must be a positive number");for(var e=ge(r).toHsl(),n=[ge(r)],i=360/t,o=1;o<t;o++)n.push(ge({h:(e.h+o*i)%360,s:e.s,l:e.l}));return n}function J6(r){var t=ge(r).toHsl(),e=t.h;return[ge(r),ge({h:(e+72)%360,s:t.s,l:t.l}),ge({h:(e+216)%360,s:t.s,l:t.l})]}function j6(r,t,e){t=t||6,e=e||30;var n=ge(r).toHsl(),i=360/e,o=[ge(r)];for(n.h=(n.h-(i*t>>1)+720)%360;--t;)n.h=(n.h+i)%360,o.push(ge(n));return o}function e9(r,t){t=t||6;for(var e=ge(r).toHsv(),n=e.h,i=e.s,o=e.v,a=[],s=1/t;t--;)a.push(ge({h:n,s:i,v:o})),o=(o+s)%1;return a}ge.mix=function(r,t,e){e=e===0?0:e||50;var n=ge(r).toRgb(),i=ge(t).toRgb(),o=e/100,a={r:(i.r-n.r)*o+n.r,g:(i.g-n.g)*o+n.g,b:(i.b-n.b)*o+n.b,a:(i.a-n.a)*o+n.a};return ge(a)};ge.readability=function(r,t){var e=ge(r),n=ge(t);return(Math.max(e.getLuminance(),n.getLuminance())+.05)/(Math.min(e.getLuminance(),n.getLuminance())+.05)};ge.isReadable=function(r,t,e){var n=ge.readability(r,t),i,o;switch(o=!1,i=a9(e),i.level+i.size){case"AAsmall":case"AAAlarge":o=n>=4.5;break;case"AAlarge":o=n>=3;break;case"AAAsmall":o=n>=7;break}return o};ge.mostReadable=function(r,t,e){var n=null,i=0,o,a,s,l;e=e||{},a=e.includeFallbackColors,s=e.level,l=e.size;for(var u=0;u<t.length;u++)o=ge.readability(r,t[u]),o>i&&(i=o,n=ge(t[u]));return ge.isReadable(r,n,{level:s,size:l})||!a?n:(e.includeFallbackColors=!1,ge.mostReadable(r,["#fff","#000"],e))};var iv=ge.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},t9=ge.hexNames=r9(iv);function r9(r){var t={};for(var e in r)r.hasOwnProperty(e)&&(t[r[e]]=e);return t}function qx(r){return r=parseFloat(r),(isNaN(r)||r<0||r>1)&&(r=1),r}function pt(r,t){n9(r)&&(r="100%");var e=i9(r);return r=Math.min(t,Math.max(0,parseFloat(r))),e&&(r=parseInt(r*t,10)/100),Math.abs(r-t)<1e-6?1:r%t/parseFloat(t)}function id(r){return Math.min(1,Math.max(0,r))}function Kr(r){return parseInt(r,16)}function n9(r){return typeof r=="string"&&r.indexOf(".")!=-1&&parseFloat(r)===1}function i9(r){return typeof r=="string"&&r.indexOf("%")!=-1}function Dn(r){return r.length==1?"0"+r:""+r}function Fs(r){return r<=1&&(r=r*100+"%"),r}function Kx(r){return Math.round(parseFloat(r)*255).toString(16)}function bm(r){return Kr(r)/255}var An=function(){var r="[-\\+]?\\d+%?",t="[-\\+]?\\d*\\.\\d+%?",e="(?:"+t+")|(?:"+r+")",n="[\\s|\\(]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")\\s*\\)?",i="[\\s|\\(]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")\\s*\\)?";return{CSS_UNIT:new RegExp(e),rgb:new RegExp("rgb"+n),rgba:new RegExp("rgba"+i),hsl:new RegExp("hsl"+n),hsla:new RegExp("hsla"+i),hsv:new RegExp("hsv"+n),hsva:new RegExp("hsva"+i),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function Li(r){return!!An.CSS_UNIT.exec(r)}function o9(r){r=r.replace(F6,"").replace(k6,"").toLowerCase();var t=!1;if(iv[r])r=iv[r],t=!0;else if(r=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var e;return(e=An.rgb.exec(r))?{r:e[1],g:e[2],b:e[3]}:(e=An.rgba.exec(r))?{r:e[1],g:e[2],b:e[3],a:e[4]}:(e=An.hsl.exec(r))?{h:e[1],s:e[2],l:e[3]}:(e=An.hsla.exec(r))?{h:e[1],s:e[2],l:e[3],a:e[4]}:(e=An.hsv.exec(r))?{h:e[1],s:e[2],v:e[3]}:(e=An.hsva.exec(r))?{h:e[1],s:e[2],v:e[3],a:e[4]}:(e=An.hex8.exec(r))?{r:Kr(e[1]),g:Kr(e[2]),b:Kr(e[3]),a:bm(e[4]),format:t?"name":"hex8"}:(e=An.hex6.exec(r))?{r:Kr(e[1]),g:Kr(e[2]),b:Kr(e[3]),format:t?"name":"hex"}:(e=An.hex4.exec(r))?{r:Kr(e[1]+""+e[1]),g:Kr(e[2]+""+e[2]),b:Kr(e[3]+""+e[3]),a:bm(e[4]+""+e[4]),format:t?"name":"hex8"}:(e=An.hex3.exec(r))?{r:Kr(e[1]+""+e[1]),g:Kr(e[2]+""+e[2]),b:Kr(e[3]+""+e[3]),format:t?"name":"hex"}:!1}function a9(r){var t,e;return r=r||{level:"AA",size:"small"},t=(r.level||"AA").toUpperCase(),e=(r.size||"small").toLowerCase(),t!=="AA"&&t!=="AAA"&&(t="AA"),e!=="small"&&e!=="large"&&(e="small"),{level:t,size:e}}var s9="#FFFFFF",l9="#000000",u9=[95,85,75,30,15,0,15,30,45,60,80],f9=15,Zx=function(r){return ge(r).getLuminance()<=.5},d9=[{fontColorIndex:0,bgColorIndex:3},{fontColorIndex:13,bgColorIndex:8},{fontColorIndex:14,bgColorIndex:1}],h9=function(r){for(var t=[],e=0;e<11;e++){var n=u9[e];t.push(wf(n===0?r:ge.mix(r,e<5?s9:l9,n).toHexString()))}return t},Ep=function(r){r===void 0&&(r={});var t=Array.from(Array(f9)).fill(ev),e=r.basicColorRelations,n=e===void 0?[]:e,i=r.brandColor,o=h9(i);return n.forEach(function(a){t[a.basicColorIndex]=o[a.standardColorIndex]}),d9.forEach(function(a){var s=a.fontColorIndex,l=a.bgColorIndex;t[s]=Zx(t[l])?ev:Yx}),N(N({},r),{basicColors:t})},c9={brandColor:"#3471F9",semanticColors:{red:"#FF4D4F",green:"#29A294",yellow:"#FAAD14"},others:{highlight:"#87B5FF",results:"#F0F7FF"},basicColorRelations:[{basicColorIndex:1,standardColorIndex:0},{basicColorIndex:2,standardColorIndex:1},{basicColorIndex:3,standardColorIndex:5},{basicColorIndex:4,standardColorIndex:6},{basicColorIndex:5,standardColorIndex:6},{basicColorIndex:6,standardColorIndex:6},{basicColorIndex:7,standardColorIndex:5},{basicColorIndex:9,standardColorIndex:1},{basicColorIndex:10,standardColorIndex:4},{basicColorIndex:11,standardColorIndex:4},{basicColorIndex:12,standardColorIndex:5}]},v9=Ep(c9),p9={brandColor:"#326EF4",semanticColors:{red:"#FF4D4F",green:"#29A294",yellow:"#FAAD14"},others:{highlight:"#87B5FF",results:"#F0F7FF"},basicColorRelations:[{basicColorIndex:1,standardColorIndex:0},{basicColorIndex:2,standardColorIndex:1},{basicColorIndex:3,standardColorIndex:1},{basicColorIndex:4,standardColorIndex:2},{basicColorIndex:5,standardColorIndex:7},{basicColorIndex:6,standardColorIndex:5},{basicColorIndex:7,standardColorIndex:5},{basicColorIndex:9,standardColorIndex:1},{basicColorIndex:10,standardColorIndex:2},{basicColorIndex:11,standardColorIndex:5},{basicColorIndex:12,standardColorIndex:5}]},g9=Ep(p9),y9={brandColor:"#9DA7B6",semanticColors:{red:"#FF4D4F",green:"#29A294",yellow:"#FAAD14"},others:{highlight:"#87B5FF",results:"#F0F7FF"},basicColorRelations:[{basicColorIndex:1,standardColorIndex:0},{basicColorIndex:2,standardColorIndex:1},{basicColorIndex:3,standardColorIndex:1},{basicColorIndex:4,standardColorIndex:2},{basicColorIndex:5,standardColorIndex:7},{basicColorIndex:6,standardColorIndex:8},{basicColorIndex:7,standardColorIndex:5},{basicColorIndex:9,standardColorIndex:1},{basicColorIndex:10,standardColorIndex:2},{basicColorIndex:11,standardColorIndex:3},{basicColorIndex:12,standardColorIndex:3}]},m9=Ep(y9),C9={brandColor:"#255dff",semanticColors:{red:"#FF4D4F",green:"#29A294",yellow:"#FAAD14"},basicColors:["#ffffff","#151a27","#213f94","#133aad","#213f94","#255dff","#4b91ff","#4b91ff","#191919","#1e2436","#0647b1","#7899ff","#7899ff","#f0f0f0","#dcdcdc"],basicColorRelations:[]},w9={default:g9,colorful:v9,gray:m9,dark:C9},In="Roboto, PingFangSC, Microsoft YaHei, Arial, sans-serif",x9=12,_9="antv-s2-core-vars",E9={default:"light",colorful:"light",gray:"light",dark:"dark"},S9="".concat(M6,"-tooltip"),Sp="".concat(S9,"-container"),T9="".concat(Sp,"-show"),b9="".concat(Sp,"-hide"),Lm={x:15,y:10},L9=function(){return{key:"hiddenColumns",label:kt("\u9690\u85CF"),icon:"EyeOutlined"}},R9=function(){return[{key:"asc",icon:"groupAsc",label:kt("\u7EC4\u5185\u5347\u5E8F")},{key:"desc",icon:"groupDesc",label:kt("\u7EC4\u5185\u964D\u5E8F")},{key:"none",label:kt("\u4E0D\u6392\u5E8F")}]},M9=function(){return[{key:"asc",icon:"groupAsc",label:kt("\u5347\u5E8F")},{key:"desc",icon:"groupDesc",label:kt("\u964D\u5E8F")},{key:"none",label:kt("\u4E0D\u6392\u5E8F")}]},Rm;(function(r){r[r.ALL=0]="ALL",r[r.COL=1]="COL",r[r.ROW=2]="ROW"})(Rm||(Rm={}));var O9=`\r
`,Tp="	",Rf=5e3,ov=1,Xs="root",xr="[&]",av="-",hi;(function(r){r.All="all",r.DetailOnly="detailOnly"})(hi||(hi={}));var I9="Transform Data",A9="Header Layout",N9="Data Cell Render",si=function(){function r(){var t=this;this.debug=!1,this.debugCallback=function(e,n){if(t.debug){var i=performance.now();n();var o=performance.now();console.log(e,"".concat(o-i," ms"))}else n()},this.logger=function(e){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];t.debug&&console.log.apply(console,X([e],F(n),!1))}}return r.getInstance=function(){return r.instance||(r.instance=new r),r.instance},r.prototype.setDebug=function(t){this.debug=t},r}(),P9=`
<svg width="10px" height="10px" viewBox="0 0 10 10" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="\u9875\u9762-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" font-family="Roboto, PingFangSC, BlinkMacSystemFont, Microsoft YaHei, Arial, sans-serif" font-size="12" font-weight="bold">
    <text id="\u2193" fill="#29A294">
        <tspan x="-0.225097656" y="8.5">\u2193</tspan>
    </text>
</g>
</svg>`,B9=`<svg width="10px" height="10px" viewBox="0 0 10 10" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="\u9875\u9762-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" font-family="Roboto, PingFangSC, BlinkMacSystemFont, Microsoft YaHei, Arial, sans-serif" font-size="12" font-weight="bold">
    <text id="\u2191" fill="#FF4D4F">
        <tspan x="-0.225097656" y="8.5">\u2191</tspan>
    </text>
</g>
</svg>
`,D9=`<?xml version="1.0" encoding="UTF-8"?>
<svg width="7px" height="9px" viewBox="0 0 7 9" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <!-- Generator: Sketch 58 (84663) - https://sketch.com -->
    <title>down</title>
    <desc>Created with Sketch.</desc>
    <g id="\u4E00\u671F\u5F00\u53D1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <polygon id="down" fill="#58AE57" transform="translate(3.500000, 4.500000) scale(1, -1) translate(-3.500000, -4.500000) " points="3.5 0 7 9 0 9"></polygon>
    </g>
</svg>`,F9=`<?xml version="1.0" encoding="UTF-8"?>
<svg width="7px" height="9px" viewBox="0 0 7 9" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <!-- Generator: Sketch 58 (84663) - https://sketch.com -->
    <title>up</title>
    <desc>Created with Sketch.</desc>
    <g id="\u4E00\u671F\u5F00\u53D1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <polygon id="up" fill="#F46649" points="3.5 0 7 9 0 9"></polygon>
    </g>
</svg> `,k9=`<svg t="1557124621626" class="icon" style="" viewBox="0 0 1024 1024" version="1.1"
xmlns="http://www.w3.org/2000/svg" p-id="17452"
xmlns:xlink="http://www.w3.org/1999/xlink" width="14" height="14">
<defs>
  <style type="text/css"></style>
</defs>
<path d="M182.272 167.04a8 8 0 0 0-12.544 0L57.728 309.056A8 8 0 0 0 64 321.984h76.032v530.048c0 4.352 3.584 7.936 7.936 7.936h56.064a8 8 0 0 0 7.936-7.936V321.92H288a8 8 0 0 0 6.272-12.992l-112-141.888z m209.728 626.944h176c4.416 0 8 3.584 8 8v56a8 8 0 0 1-8 8h-176A8 8 0 0 1 384 857.984v-56c0-4.416 3.584-8 8-8z m0-424h368c4.416 0 8 3.648 8 8v56a8 8 0 0 1-8 8h-368A8 8 0 0 1 384 433.984v-56c0-4.352 3.584-8 8-8z m528-139.968h-528A8 8 0 0 1 384 222.016v-56c0-4.416 3.584-8 8-8h528c4.416 0 8 3.584 8 8v56a8 8 0 0 1-8 8z m-256 424h-272A8 8 0 0 1 384 646.016v-56c0-4.416 3.584-8 8-8h272c4.416 0 8 3.584 8 8v56a8 8 0 0 1-8 8z" p-id="17453"></path>
</svg>`,H9=`<svg t="1557124685600" class="icon" style="" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" p-id="17561"
  xmlns:xlink="http://www.w3.org/1999/xlink" width="14" height="14">
  <defs>
    <style type="text/css"></style>
  </defs>
  <path d="M182.272 856.96a8 8 0 0 1-12.544 0l-112-141.952A8 8 0 0 1 64 702.08h76.032V172.032c0-4.416 3.584-8 7.936-8h56.064c4.352 0 7.936 3.584 7.936 8v529.984H288c6.72 0 10.496 7.808 6.272 12.992l-112 141.888z m209.728-626.944h176A8 8 0 0 0 576 222.016v-56a8 8 0 0 0-8-8h-176A8 8 0 0 0 384 166.016v56c0 4.416 3.584 8 8 8z m0 424h368a8 8 0 0 0 8-8v-56a8 8 0 0 0-8-8h-368A8 8 0 0 0 384 590.016v56c0 4.416 3.584 8 8 8z m528 139.968h-528a8 8 0 0 0-8 8v56c0 4.416 3.584 8 8 8h528a8 8 0 0 0 8-8v-56a8 8 0 0 0-8-8z m-256-424h-272A8 8 0 0 0 384 377.984v56c0 4.416 3.584 8 8 8h272a8 8 0 0 0 8-8v-56a8 8 0 0 0-8-8z" p-id="17562"></path>
</svg>`,z9=`<svg t="1557124695786" class="icon" style="" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" p-id="17670"
  xmlns:xlink="http://www.w3.org/1999/xlink" width="14" height="14">
  <defs>
    <style type="text/css"></style>
  </defs>
  <path d="M182.272 167.04a8 8 0 0 0-12.544 0L57.728 309.056A8 8 0 0 0 64 321.984h76.032v530.048c0 4.352 3.584 7.936 7.936 7.936h56.064a8 8 0 0 0 7.936-7.936V321.92H288a8 8 0 0 0 6.272-12.992l-112-141.888z m209.728 62.976h304A8 8 0 0 0 704 222.016v-56a8 8 0 0 0-8-8h-304A8 8 0 0 0 384 166.016v56c0 4.416 3.584 8 8 8z m0 424h304a8 8 0 0 0 8-8v-56a8 8 0 0 0-8-8h-304A8 8 0 0 0 384 590.016v56c0 4.416 3.584 8 8 8z m528 139.968h-528a8 8 0 0 0-8 8v56c0 4.416 3.584 8 8 8h528a8 8 0 0 0 8-8v-56a8 8 0 0 0-8-8z m0-424h-528A8 8 0 0 0 384 377.984v56c0 4.416 3.584 8 8 8h528a8 8 0 0 0 8-8v-56a8 8 0 0 0-8-8z" p-id="17671"></path>
</svg>`,G9=`<svg t="1557124710652" class="icon" style="" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" p-id="17779"
  xmlns:xlink="http://www.w3.org/1999/xlink" width="14" height="14">
  <defs>
    <style type="text/css"></style>
  </defs>
  <path d="M182.272 856.96a8 8 0 0 1-12.544 0l-112-141.952A8 8 0 0 1 64 702.08h76.032V172.032c0-4.416 3.584-8 7.936-8h56.064c4.352 0 7.936 3.584 7.936 8v529.984H288c6.72 0 10.496 7.808 6.272 12.992l-112 141.888z m209.728-626.944h304A8 8 0 0 0 704 222.016v-56a8 8 0 0 0-8-8h-304A8 8 0 0 0 384 166.016v56c0 4.416 3.584 8 8 8z m0 424h304a8 8 0 0 0 8-8v-56a8 8 0 0 0-8-8h-304A8 8 0 0 0 384 590.016v56c0 4.416 3.584 8 8 8z m528 139.968h-528a8 8 0 0 0-8 8v56c0 4.416 3.584 8 8 8h528a8 8 0 0 0 8-8v-56a8 8 0 0 0-8-8z m0-424h-528A8 8 0 0 0 384 377.984v56c0 4.416 3.584 8 8 8h528a8 8 0 0 0 8-8v-56a8 8 0 0 0-8-8z" p-id="17780"></path>
</svg>`,W9=`<svg width="16px" height="16px" viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="\u8BBE\u8BA1\u8F93\u51FA" stroke="none" stroke-width="1" fill-opacity="0.25" fill-rule="evenodd">
    <g id="\u8BBE\u8BA1\u8F93\u51FA-\u79FB\u52A8\u7AEF\u6307\u6807\u8BE6\u60C5\u9875-\u9605\u8BFB\u7AEF" transform="translate(-3275.000000, -724.000000)" fill-rule="nonzero">
        <g id="\u7F16\u7EC4-39" transform="translate(3064.500000, 667.000000)">
            <g id="\u7F16\u7EC4-36" transform="translate(80.500000, 44.000000)">
                <g id="\u4E0D\u6392\u5E8F" transform="translate(130.000000, 13.000000)">
                    <path d="M12.0009375,12.40625 C12.0696875,12.40625 12.1259375,12.4625 12.1259375,12.53125 L12.1259375,12.53125 L12.1259375,13.40625 C12.1259375,13.475 12.0696875,13.53125 12.0009375,13.53125 L12.0009375,13.53125 L6.25093747,13.53125 C6.18218747,13.53125 6.12593747,13.475 6.12593747,13.40625 L6.12593747,13.40625 L6.12593747,12.53125 C6.12593747,12.4625 6.18218747,12.40625 6.25093747,12.40625 L6.25093747,12.40625 Z M2.93949997,2.5801875 L2.97437497,2.6109375 L4.72437497,4.828125 C4.78062497,4.89776786 4.74503823,4.99725765 4.66779698,5.02426203 L4.62593747,5.03125 L3.438,5.03089062 L3.43843747,10.9691406 L4.62593747,10.9691406 C4.73062497,10.9691406 4.78999997,11.0910156 4.72437497,11.1722656 L2.97437497,13.3894531 C2.92437497,13.4535156 2.82749997,13.4535156 2.77749997,13.3894531 L1.02749997,11.1722656 C0.961874969,11.0894531 1.02124997,10.9691406 1.12593747,10.9691406 L2.31343747,10.9691406 L2.313,5.03089062 L1.12593747,5.03125 C1.03620533,5.03125 0.979764,4.94285714 1.00679571,4.8654519 L1.02749997,4.828125 L2.77749997,2.6109375 C2.81749997,2.5596875 2.88749997,2.5494375 2.93949997,2.5801875 Z M10.5009375,9.09375 C10.5696875,9.09375 10.6259375,9.15 10.6259375,9.21875 L10.6259375,9.21875 L10.6259375,10.09375 C10.6259375,10.1625 10.5696875,10.21875 10.5009375,10.21875 L10.5009375,10.21875 L6.25093747,10.21875 C6.18218747,10.21875 6.12593747,10.1625 6.12593747,10.09375 L6.12593747,10.09375 L6.12593747,9.21875 C6.12593747,9.15 6.18218747,9.09375 6.25093747,9.09375 L6.25093747,9.09375 Z M14.5009375,5.78125 C14.5696875,5.78125 14.6259375,5.8375 14.6259375,5.90625 L14.6259375,5.90625 L14.6259375,6.78125 C14.6259375,6.85 14.5696875,6.90625 14.5009375,6.90625 L14.5009375,6.90625 L6.25093747,6.90625 C6.18218747,6.90625 6.12593747,6.85 6.12593747,6.78125 L6.12593747,6.78125 L6.12593747,5.90625 C6.12593747,5.8375 6.18218747,5.78125 6.25093747,5.78125 L6.25093747,5.78125 Z M9.00093747,2.46875 C9.06968747,2.46875 9.12593747,2.525 9.12593747,2.59375 L9.12593747,2.59375 L9.12593747,3.46875 C9.12593747,3.5375 9.06968747,3.59375 9.00093747,3.59375 L9.00093747,3.59375 L6.25093747,3.59375 C6.18218747,3.59375 6.12593747,3.5375 6.12593747,3.46875 L6.12593747,3.46875 L6.12593747,2.59375 C6.12593747,2.525 6.18218747,2.46875 6.25093747,2.46875 L6.25093747,2.46875 Z" id="\u5F62\u72B6\u7ED3\u5408"></path>
                </g>
            </g>
        </g>
    </g>q
</g>
</svg>`,U9='<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1590389330617" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="19656" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><defs><style type="text/css"></style></defs><path d="M512 64c-247.4 0-448 200.6-448 448s200.6 448 448 448 448-200.6 448-448-200.6-448-448-448z m0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z" fill="" p-id="19657"></path><path d="M464 336c0 26.5 21.5 48 48 48s48-21.5 48-48-21.5-48-48-48-48 21.5-48 48zM536 448h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-272c0-4.4-3.6-8-8-8z" fill="" p-id="19658"></path></svg>',V9=`<?xml version="1.0" encoding="UTF-8"?>
<svg width="23px" height="12px" viewBox="0 0 23 12" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <title>\u7F16\u7EC4 8\u5907\u4EFD 3</title>
    <g id="----\u9690\u85CF\u5217\u6807\u6CE8\uFF01" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <g id="\u9690\u85CF\u5217\u6807\u6CE8" transform="translate(-275.000000, -824.000000)">
            <rect fill="#FFFFFF" x="0" y="0" width="1333" height="1167"></rect>
            <g id="\u7F16\u7EC4-8\u5907\u4EFD-3" transform="translate(275.000000, 824.000000)">
                <rect id="\u77E9\u5F62" stroke-opacity="0.25" stroke="#000000" fill="#F7F7F7" x="0.5" y="0.5" width="11" height="11"></rect>
                <rect id="\u77E9\u5F62\u5907\u4EFD-9" stroke-opacity="0.25" stroke="#000000" fill="#F7F7F7" x="11.5" y="0.5" width="11" height="11"></rect>
                <g id="7.Icon/arrow/15.down/fill" transform="translate(6.000000, 6.000000) rotate(90.000000) translate(-6.000000, -6.000000) " fill="#000000" fill-rule="nonzero" opacity="0.65">
                    <path d="M7.25020811,6.37218077 L4.91348936,8.20968077 C4.82677061,8.27764952 4.69903624,8.21671202 4.69903624,8.10655577 L4.69903624,4.43272764 C4.69903624,4.32257139 4.82677061,4.26046202 4.91348936,4.32960264 L7.25020811,6.16593077 C7.31700499,6.21866514 7.31700499,6.31944639 7.25020811,6.37218077 Z" id="fill" transform="translate(5.999671, 6.269385) rotate(90.000000) translate(-5.999671, -6.269385) "></path>
                </g>
                <g id="7.Icon/arrow/15.down/fill" transform="translate(17.000000, 6.000000) rotate(270.000000) translate(-17.000000, -6.000000) translate(11.000000, 0.000000)" fill="#000000" fill-rule="nonzero" opacity="0.65">
                    <path d="M7.25020811,6.37218077 L4.91348936,8.20968077 C4.82677061,8.27764952 4.69903624,8.21671202 4.69903624,8.10655577 L4.69903624,4.43272764 C4.69903624,4.32257139 4.82677061,4.26046202 4.91348936,4.32960264 L7.25020811,6.16593077 C7.31700499,6.21866514 7.31700499,6.31944639 7.25020811,6.37218077 Z" id="fill" transform="translate(5.999671, 6.269385) rotate(90.000000) translate(-5.999671, -6.269385) "></path>
                </g>
            </g>
            <line x1="286.5" y1="813" x2="286.5" y2="864.5" id="\u8DEF\u5F84-2\u5907\u4EFD-3" stroke="#000000" opacity="0.25"></line>
        </g>
    </g>
</svg>`,Y9=`<svg t="1557140120188" class="icon" style="" viewBox="0 0 1024 1024" version="1.1"
xmlns="http://www.w3.org/2000/svg" p-id="16909" xmlns:xlink="http://www.w3.org/1999/xlink"
width="200" height="200">
	<defs>
		<style type="text/css">
		</style>
	</defs>
	<path d="M328 544h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"
	p-id="16910">
	</path>
	<path d="M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32z m-40 728H184V184h656v656z"
	p-id="16911">
	</path>
</svg>`,X9=`<svg t="1557140186692" class="icon" style="" viewBox="0 0 1024 1024" version="1.1"
xmlns="http://www.w3.org/2000/svg" p-id="17025" xmlns:xlink="http://www.w3.org/1999/xlink"
width="200" height="200">
	<defs>
		<style type="text/css">
		</style>
	</defs>
	<path d="M328 544h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"
	p-id="17026">
	</path>
	<path d="M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32z m-40 728H184V184h656v656z"
	p-id="17027">
	</path>
</svg>`,$9=`<svg t="1565940955886" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
     p-id="17472" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200">
  <defs>
    <style type="text/css"></style>
  </defs>
  <path
    d="M948 392.992l-403.008 488.99200001Q532 896 512.992 896t-32-14.016L76 392.992q-18.016-20.992-7.008-46.016T108 321.98400001L916 321.98400001q28 0 39.008 24.99199999T948 392.992z"
    p-id="17473" data-spm-anchor-id="a313x.7781069.0.i2" class="selected"></path>
</svg>
`,q9=`<svg t="1565940955886" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
     p-id="17472" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200">
  <defs>
    <style type="text/css"></style>
  </defs>
  <path
    fill-opacity="0.45"
    d="M948 392.992l-403.008 488.99200001Q532 896 512.992 896t-32-14.016L76 392.992q-18.016-20.992-7.008-46.016T108 321.98400001L916 321.98400001q28 0 39.008 24.99199999T948 392.992z"
    p-id="17473" data-spm-anchor-id="a313x.7781069.0.i2" class="selected"></path>
</svg>
`,K9=`<svg t="1565940979768" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
p-id="17620" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200">
<defs>
<style type="text/css"></style>
</defs>
<path
d="M76 631.008l403.008-488.99200001Q492 128 511.008 128t32 14.016L948 631.008q18.016 20.992 7.008 46.016T916 702.01599999L108 702.01599999q-28 0-39.008-24.99199999T76 631.008z"
p-id="17621"></path>
</svg>
`,Z9=`<svg t="1565940979768" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
     p-id="17620" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200">
  <defs>
    <style type="text/css"></style>
  </defs>
  <path
    fill-opacity="0.45"
    d="M76 631.008l403.008-488.99200001Q492 128 511.008 128t32 14.016L948 631.008q18.016 20.992 7.008 46.016T916 702.01599999L108 702.01599999q-28 0-39.008-24.99199999T76 631.008z"
    p-id="17621"></path>
</svg>
`,Q9='<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1596433821690" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="20229" width="16" height="16" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><style type="text/css"></style></defs><path d="M888 792H200V168c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h752c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM305.8 637.7c3.1 3.1 8.1 3.1 11.3 0l138.3-137.6L583 628.5c3.1 3.1 8.2 3.1 11.3 0l275.4-275.3c3.1-3.1 3.1-8.2 0-11.3l-39.6-39.6c-3.1-3.1-8.2-3.1-11.3 0l-230 229.9L461.4 404c-3.1-3.1-8.2-3.1-11.3 0L266.3 586.7c-3.1 3.1-3.1 8.2 0 11.3l39.5 39.7z" p-id="20230"></path></svg>',J9=`<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1608030723688" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="21482" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16"><defs><style type="text/css"></style></defs><path d="M547.648 696a32 32 0 0 1 31.488 26.24l0.512 5.76v151.68l145.216-144.512a32 32 0 0 1 40.832-3.648l4.416 3.712a32 32 0 0 1 3.584 40.832l-3.712 4.48-203.072 202.24a32 32 0 0 1-40.768 3.648l-4.416-3.712-202.24-202.24a32 32 0 0 1 40.832-48.96l4.416 3.712 150.912 150.912v-158.144a32 32 0 0 1 32-32z m194.56-529.28l4.928 3.072 233.792 180.224a32 32 0 0 1 1.728 49.28l-4.864 3.52-409.792 245.568a32 32 0 0 1-27.328 2.624l-5.184-2.432-422.4-245.568a32 32 0 0 1-7.552-49.28l4.544-4.032 242.816-180.288a32 32 0 0 1 42.432 47.552l-4.288 3.84-203.84 151.296 364.16 211.648 353.28-211.712-196.608-151.552a32 32 0 0 1-8.896-40l3.136-4.864a32 32 0 0 1 40-8.96zM547.712 28.672a32 32 0 0 1 31.488 26.24l0.512 5.76v396.992a32 32 0 0 1-63.488 5.76l-0.512-5.76V60.736a32 32 0 0 1 32-32z" p-id="21483" fill="currentColor"></path></svg>
`,j9='<svg viewBox="64 64 896 896" focusable="false" data-icon="eye" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z"></path></svg>',Mm=Object.freeze({__proto__:null,ArrowDown:P9,ArrowUp:B9,CellDown:D9,CellUp:F9,DrillDownIcon:J9,ExpandColIcon:V9,EyeOutlined:j9,GlobalAsc:k9,GlobalDesc:H9,GroupAsc:z9,GroupDesc:G9,GroupNone:W9,InfoCircle:U9,Minus:Y9,Plus:X9,SortDown:q9,SortDownSelected:$9,SortUp:Z9,SortUpSelected:K9,Trend:Q9}),Qx={},Jx=function(r,t){Qx[Ex(r)]=t},e7=function(r){return Qx[Ex(r)]};Hr(Mm).forEach(function(r){var t=ze(Mm,r);Jx(r,t)});var jx=function(r){oe(t,r);function t(e,n){var i=r.call(this,n)||this;return i.imgType=e,i}return t}(lw),ja=function(r){oe(t,r);function t(e,n){var i=r.call(this,e)||this;return i.appendInfo=n,i}return t}(wt),Om="<svg",Im="data:image/svg+xml",Am={},bp=function(r){oe(t,r);function t(e){var n=r.call(this,{name:e.name})||this;return n.isOnlineLink=function(i){return/^(?:https?:)?(?:\/\/)/.test(i)},n.cfg=e,n.render(),n}return t.prototype.getCfg=function(){return this.cfg},t.prototype.getImage=function(e,n,i){var o=this;return new Promise(function(a,s){var l=e7(e);if(!!l){var u=new Image;u.onload=function(){Am[n]=u,a(u)},u.onerror=s,l&&(l.includes(Im)||o.isOnlineLink(l))?(u.src=l,u.crossOrigin="anonymous"):(i&&(l=l.replace(/fill=[\'\"]#?\w+[\'\"]/g,""),l=l.replace(/fill>/g,">")),l=l.replace(Om,"".concat(Om,' fill="').concat(i,'"')),u.src="".concat(Im,";utf-8,").concat(encodeURIComponent(l)))}})},t.prototype.render=function(){var e=this.cfg,n=e.name,i=e.fill,o=td(this.cfg),a=new jx(t.type,{style:bx(o,"fill")});this.iconImageShape=a,this.setImageAttrs({name:n,fill:i})},t.prototype.setImageAttrs=function(e){var n=this,i=e.name,o=e.fill,a=this.iconImageShape;i=i||this.cfg.name,o=o||this.cfg.fill;var s="".concat(i,"-").concat(o),l=Am[s];l?(a.attr("img",l),this.appendChild(a)):this.getImage(i,s,o).then(function(u){if(n.destroyed){si.getInstance().logger("GuiIcon ".concat(i," destroyed."));return}a.attr("img",u),n.appendChild(a)}).catch(function(u){if(u instanceof TypeError){console.warn("GuiIcon ".concat(i," destroyed:"),u);return}console.error("GuiIcon ".concat(i," load failed:"),u)})},t.type="__GUI_ICON__",t}(ft),ot;(function(r){r.TOP="TOP",r.BOTTOM="BOTTOM",r.LEFT="LEFT",r.RIGHT="RIGHT"})(ot||(ot={}));var _t;(function(r){r.BORDER_BOX="borderBox",r.PADDING_BOX="paddingBox",r.CONTENT_BOX="contentBox"})(_t||(_t={}));var Na;(function(r){r.SUM="SUM",r.MIN="MIN",r.MAX="MAX",r.AVG="AVG"})(Na||(Na={}));var Cr;(function(r){r.Row="row",r.Col="col",r.Series="series"})(Cr||(Cr={}));var Vt;(function(r){r.PLAIN="text/plain",r.HTML="text/html"})(Vt||(Vt={}));var t7=function(){function r(){this.store=new Map}return r.prototype.set=function(t,e){return this.store.set(t,e)},r.prototype.get=function(t,e){var n,i=this.store.get(t);return(n=i)!==null&&n!==void 0?n:e},r.prototype.clear=function(){this.store.clear()},r.prototype.size=function(){return this.store.size},r}();function Tt(r){return r===Tf.MOBILE?!0:/(?:iPhone|iPad|SymbianOS|Windows Phone|iPod|iOS|Android)/i.test(navigator.userAgent)}function e_(){return/windows/i.test(navigator.userAgent)}var r7=`:root {
  --antv-s2-background: #000;
  --antv-s2-tooltip-background: rgba(43, 43, 43, 0.95);
  --antv-s2-tooltip-operator-background: rgba(43, 43, 43, 0.95);
}
`,n7=r7,i7=function(r,t){t===void 0&&(t="");var e=document.getElementById(r);return e||(e=document.createElement("style"),e.id=r,document.head.appendChild(e)),e.innerHTML=t,e},o7=function(r){var t=r||"default";return w9[t]},a7=function(r){i7(_9,r==="dark"?n7:"")},s7=function(r){var t,e,n,i,o,a=(r==null?void 0:r.palette)||o7(r==null?void 0:r.name),s=a.basicColors,l=a.semanticColors,u=a.others,d=(t=r==null?void 0:r.spreadsheet)===null||t===void 0?void 0:t.isTableMode(),h=e_()?"bold":700,v=function(){var p,g;return{bolderText:{fontFamily:In,fontSize:12,fontWeight:h,fill:s[13],opacity:1,textAlign:"right",textBaseline:"middle",linkTextFill:s[6]},text:{fontFamily:In,fontSize:12,fontWeight:"normal",fill:s[13],opacity:1,textAlign:"right",textBaseline:"middle",linkTextFill:s[6]},cell:{crossBackgroundColor:s[1],backgroundColor:s[8],backgroundColorOpacity:1,horizontalBorderColor:s[9],horizontalBorderColorOpacity:1,verticalBorderColor:s[9],verticalBorderColorOpacity:1,horizontalBorderWidth:1,verticalBorderWidth:1,padding:{top:8,right:8,bottom:8,left:8},interactionState:{hover:{backgroundColor:s[2],backgroundOpacity:.6},hoverFocus:{backgroundColor:s[2],backgroundOpacity:.6,borderColor:s[14],borderWidth:1,borderOpacity:1},selected:{backgroundColor:s[2],backgroundOpacity:.6},unselected:{backgroundOpacity:.3,textOpacity:.3,opacity:.3},searchResult:{backgroundColor:(p=u==null?void 0:u.results)!==null&&p!==void 0?p:s[2],backgroundOpacity:1},highlight:{backgroundColor:(g=u==null?void 0:u.highlight)!==null&&g!==void 0?g:s[6],backgroundOpacity:1},prepareSelect:{borderColor:s[14],borderOpacity:1,borderWidth:1}}},miniChart:{line:{point:{size:2.2,fill:s[6],opacity:1},linkLine:{size:1.5,fill:s[6],opacity:.6}},bar:{intervalPadding:4,fill:s[6],opacity:1},bullet:{progressBar:{widthPercent:.6,height:10,innerHeight:6},comparativeMeasure:{width:1,height:12,fill:s[13],opacity:.25},rangeColors:{good:l==null?void 0:l.green,satisfactory:l.yellow,bad:l.red},backgroundColor:"#E9E9E9"},interval:{height:x9,fill:s[7]}},icon:{fill:s[13],size:10,margin:{right:4,left:4}}}};return{cornerCell:{text:{fontFamily:In,fontSize:12,fontWeight:h,fill:s[0],opacity:1,textAlign:d?"center":"left",textBaseline:"middle"},bolderText:{fontFamily:In,fontSize:12,fontWeight:h,fill:s[0],opacity:1,textAlign:d?"center":"right",textBaseline:"middle"},cell:{backgroundColor:s[3],backgroundColorOpacity:1,horizontalBorderColor:s[10],horizontalBorderColorOpacity:1,verticalBorderColor:s[10],verticalBorderColorOpacity:1,horizontalBorderWidth:1,verticalBorderWidth:1,borderDash:[],padding:{top:4,right:8,bottom:4,left:8}},icon:{fill:s[0],size:10,margin:{right:4,left:4}}},rowCell:{seriesText:{fontFamily:In,fontSize:12,fontWeight:"normal",fill:s[14],linkTextFill:s[6],opacity:1,textBaseline:"middle",textAlign:"center"},measureText:{fontFamily:In,fontSize:12,fontWeight:"normal",fill:s[14],linkTextFill:s[6],opacity:1,textAlign:d?"center":"left",textBaseline:"middle"},bolderText:{fontFamily:In,fontSize:12,fontWeight:h,fill:s[14],linkTextFill:s[6],opacity:1,textAlign:d?"center":"left",textBaseline:"middle"},text:{fontFamily:In,fontSize:12,fontWeight:"normal",fill:s[14],linkTextFill:s[6],opacity:1,textBaseline:"middle",textAlign:d?"center":"left"},cell:{backgroundColor:s[1],backgroundColorOpacity:1,horizontalBorderColor:s[9],horizontalBorderColorOpacity:1,verticalBorderColor:s[9],verticalBorderColorOpacity:1,horizontalBorderWidth:1,verticalBorderWidth:1,borderDash:[],padding:{top:4,right:8,bottom:4,left:8},interactionState:{hover:{backgroundColor:s[2],backgroundOpacity:.6},selected:{backgroundColor:s[2],backgroundOpacity:.6},unselected:{backgroundOpacity:.3,textOpacity:.3,opacity:.3},prepareSelect:{borderColor:s[14],borderOpacity:1,borderWidth:1},searchResult:{backgroundColor:(e=u==null?void 0:u.results)!==null&&e!==void 0?e:s[2],backgroundOpacity:1},highlight:{backgroundColor:(n=u==null?void 0:u.highlight)!==null&&n!==void 0?n:s[6],backgroundOpacity:1}}},icon:{fill:s[14],size:10,margin:{right:4,left:4}},seriesNumberWidth:80},colCell:{measureText:{fontFamily:In,fontSize:12,fontWeight:"normal",fill:s[0],opacity:1,textAlign:"right",textBaseline:"middle"},bolderText:{fontFamily:In,fontSize:12,fontWeight:h,fill:s[0],opacity:1,textAlign:"center",textBaseline:"middle"},text:{fontFamily:In,fontSize:12,fontWeight:"normal",fill:s[0],opacity:1,textAlign:"center",textBaseline:"middle"},cell:{backgroundColor:s[3],backgroundColorOpacity:1,horizontalBorderColor:s[10],horizontalBorderColorOpacity:1,verticalBorderColor:s[10],verticalBorderColorOpacity:1,horizontalBorderWidth:1,verticalBorderWidth:1,borderDash:[],padding:{top:4,right:8,bottom:4,left:8},interactionState:{hover:{backgroundColor:s[4],backgroundOpacity:.6},selected:{backgroundColor:s[4],backgroundOpacity:.6},unselected:{backgroundOpacity:.3,textOpacity:.3,opacity:.3},prepareSelect:{borderColor:s[14],borderOpacity:1,borderWidth:1},searchResult:{backgroundColor:(i=u==null?void 0:u.results)!==null&&i!==void 0?i:s[2],backgroundOpacity:1},highlight:{backgroundColor:(o=u==null?void 0:u.highlight)!==null&&o!==void 0?o:s[6],backgroundOpacity:1}}},icon:{fill:s[0],size:10,margin:{top:6,right:4,bottom:6,left:4}}},dataCell:v(),mergedCell:v(),resizeArea:{size:3,background:s[7],backgroundOpacity:0,guideLineColor:s[7],guideLineDisableColor:"rgba(0,0,0,0.25)",guideLineDash:[3,3],interactionState:{hover:{backgroundColor:s[7],backgroundOpacity:1}}},scrollBar:{trackColor:"rgba(0,0,0,0.01)",thumbHoverColor:"rgba(0,0,0,0.25)",thumbColor:"rgba(0,0,0,0.15)",thumbHorizontalMinSize:32,thumbVerticalMinSize:32,size:Tt()?3:6,hoverSize:Tt()?4:8,lineCap:"round"},splitLine:{horizontalBorderColor:s[12],horizontalBorderColorOpacity:.2,horizontalBorderWidth:2,verticalBorderColor:s[11],verticalBorderColorOpacity:.25,verticalBorderWidth:2,showShadow:!0,shadowWidth:8,shadowColors:{left:"rgba(0,0,0,0.1)",right:"rgba(0,0,0,0)"},borderDash:[]},prepareSelectMask:{backgroundColor:s[5],backgroundOpacity:.3},background:{color:s[8],opacity:1}}},Ft=function(){function r(t){this.x=0,this.y=0,this.width=0,this.height=0,this.colIndex=-1,this.level=0,this.isLeaf=!1,this.children=[],this.padding=0;var e=t.id,n=t.field,i=t.value,o=t.parent,a=t.level,s=t.rowIndex,l=t.isTotals,u=t.isGrandTotals,d=t.isSubTotals,h=t.isCollapsed,v=t.isTotalRoot,p=t.hierarchy,g=t.isPivotMode,m=t.seriesNumberWidth,C=t.spreadsheet,w=t.query,_=t.belongsCell,S=t.inCollapseNode,b=t.isTotalMeasure,T=t.isLeaf,E=t.extra;this.id=e,this.field=n,this.value=i,this.parent=o,this.level=a,this.rowIndex=s,this.isTotals=l,this.isCollapsed=h,this.hierarchy=p,this.isPivotMode=g,this.seriesNumberWidth=m,this.spreadsheet=C,this.query=w,this.inCollapseNode=S,this.isTotalMeasure=b,this.isLeaf=T,this.isGrandTotals=u,this.isSubTotals=d,this.belongsCell=_,this.isTotalRoot=v,this.extra=E}return r.getFieldPath=function(t,e){if(t&&!t.isTotals||t&&e){for(var n=t.parent,i=[t.field];n&&n.id!==Xs;)i.push(n.field),n=n.parent;return i.reverse()}return[]},r.getAllLeaveNodes=function(t){var e=[];if(t.isLeaf)return[t];for(var n=X([],F(t.children||[]),!1),i=n.shift();i;)i.isLeaf?e.push(i):n.unshift.apply(n,X([],F(i.children),!1)),i=n.shift();return e},r.getAllChildrenNodes=function(t){var e=[];if(t.isLeaf)return[t];for(var n=X([],F(t.children||[]),!1),i=n.shift();i;)e.push(i),n.unshift.apply(n,X([],F(i.children),!1)),i=n.shift();return e},r.getBranchNodes=function(t){if(t&&!t.isTotals){for(var e=t.parent,n=[t];e&&e.id!==Xs;)n.push(e),e=e.parent;return n.reverse()}return[]},r.blankNode=function(){return new r({id:"",field:"",value:""})},r.rootNode=function(){return new r({id:Xs,field:"",value:""})},r.prototype.getHeadLeafChild=function(){for(var t=this;!se(t==null?void 0:t.children);)t=Sl(t==null?void 0:t.children);return t},r.prototype.getTotalHeightForTreeHierarchy=function(){return this.height===0||se(this.children)?this.height:this.children.reduce(function(t,e){return t+e.getTotalHeightForTreeHierarchy()},this.height)},r.prototype.isSeriesNumberNode=function(){return this.field===nn},r}(),t_=function(){function r(){this.width=0,this.height=0,this.maxLevel=-1,this.sampleNodesForAllLevels=[],this.sampleNodeForLastLevel=null,this.allNodesWithoutRoot=[],this.indexNode=[]}return r.prototype.getLeaves=function(){return this.allNodesWithoutRoot.filter(function(t){return t.isLeaf})},r.prototype.getNodes=function(t){return t!==void 0?this.allNodesWithoutRoot.filter(function(e){return e.level===t}):this.allNodesWithoutRoot},r.prototype.getNodesLessThanLevel=function(t){return this.allNodesWithoutRoot.filter(function(e){return e.level<=t})},r.prototype.pushNode=function(t,e){e===void 0&&(e=-1),e===-1?this.allNodesWithoutRoot.push(t):this.allNodesWithoutRoot.splice(e,0,t)},r.prototype.pushIndexNode=function(t){this.indexNode.push(t)},r.prototype.getIndexNodes=function(){return this.indexNode},r}(),es=function(){function r(t){var e=t.label,n=t.isSubTotals,i=t.isGrandTotals,o=t.isTotalRoot,a=o===void 0?!1:o;this.label=e,this.isSubTotals=n,this.isGrandTotals=i,this.isTotalRoot=a}return r}(),l7=function(r){var t,e=r.isFirstField,n=r.currentField,i=r.fieldValues,o=r.spreadsheet,a=r.lastField,s=o.getTotalsConfig(e?n:a),l,u;e?s!=null&&s.showGrandTotals&&(l=s.reverseGrandTotalsLayout?"unshift":"push",u=new es({label:s.grandTotalsLabel,isSubTotals:!1,isGrandTotals:!0,isTotalRoot:!0})):(s==null?void 0:s.showSubTotals)&&(Aa(i)>1||ze(s,"showSubTotals.always")!==!1)&&n!==Ae&&(l=s.reverseSubTotalsLayout?"unshift":"push",u=new es({label:s.subTotalsLabel,isSubTotals:!0,isGrandTotals:!1,isTotalRoot:!0})),l&&((t=i[l])===null||t===void 0||t.call(i,u))};function sv(r,t){for(var e={},n=r;n&&n.field;)(!n.isTotalRoot||t)&&n.value!==ml&&(e[n.field]=n.value),n=n.parent;return e}var ju=function(r){var t,e,n,i,o=r.spreadsheet,a=r.level,s=r.fields,l=o.options,u=o.dataSet,d=u.moreThanOneValue(),h=(e=(t=o.dataCfg.fields)===null||t===void 0?void 0:t.valueInCols)!==null&&e!==void 0?e:!0,v=((i=(n=l==null?void 0:l.style)===null||n===void 0?void 0:n.colCell)===null||i===void 0?void 0:i.hideValue)&&h&&!d&&Dr(s,Ae),p=v?2:1;return a===s.length-p},r_=function(r,t,e,n){return r.options.layoutArrange?r.options.layoutArrange(r,e,n,t):t},Lp=function(r,t,e,n){var i,o,a,s,l=(i=r==null?void 0:r.facet)===null||i===void 0?void 0:i.getHiddenColumnsInfo(e);if(l&&((s=(a=(o=r==null?void 0:r.dataSet)===null||o===void 0?void 0:o.fields)===null||a===void 0?void 0:a.columns)===null||s===void 0?void 0:s.find(function(w){return w===(e==null?void 0:e.field)})))return!1;var u=!0,d=function(w,_,S){_===void 0&&(_=-1),S===void 0&&(S=-1),_===-1?(t.children.push(w),n.pushNode(w)):(t.children.splice(_,0,w),n.pushNode(w,S))};if(r.options.layoutHierarchy){var h=r.options.layoutHierarchy(r,e);if(h){var v=Ii(h==null?void 0:h.delete)?h==null?void 0:h.delete:!1;u=!v;var p=h.push,g=h.unshift,m=t.children.length,C=n.getNodes().length;se(g)||(Me(g,function(w){d(w)}),m=t.children.length,C=n.getNodes().length),se(p)||Me(p,function(w){d(w)}),v||d(e,m,C)}else d(e)}else d(e);return u},lv=function(r,t,e){var n,i;!((n=r.options)===null||n===void 0)&&n.layoutCoordinate&&((t==null?void 0:t.isLeaf)||(e==null?void 0:e.isLeaf))&&((i=r.options)===null||i===void 0||i.layoutCoordinate(r,t,e))},n_=function(){function r(t){this.label=t}return r}(),u7=function(r,t,e){return r.sort(function(n,i){e&&(n=e(n),i=e(i));var o=t.indexOf(n),a=t.indexOf(i);return o===-1&&a===-1?0:o===-1?1:a===-1?-1:o-a})},Rp=function(r){return r===void 0&&(r=[]),r.filter(function(t){return t!==Di&&t!==Xv})},f7=function(r,t){var e;return(e=r==null?void 0:r.filter(function(n){return!(t!=null&&t.includes(n))}))===null||e===void 0?void 0:e.concat(t)};function d7(r,t){var e=r.isRowGrandTotal,n=r.isRowSubTotal,i=r.isColGrandTotal,o=r.isColSubTotal,a=t||{},s=a.row,l=a.col,u=s||{},d=u.calcGrandTotals,h=d===void 0?{}:d,v=u.calcSubTotals,p=v===void 0?{}:v,g=l||{},m=g.calcGrandTotals,C=m===void 0?{}:m,w=g.calcSubTotals,_=w===void 0?{}:w,S=function(b,T){if((b.aggregation||b.calcFunc)&&T)return{aggregation:b.aggregation,calcFunc:b.calcFunc}};return S(C,i)||S(_,o)||S(h,e)||S(p,n)}var i_=function(r){var t=r.addTotalMeasureInTotal,e=r.parentNode,n=r.currentField,i=r.fields,o=r.hierarchy,a=r.spreadsheet,s=i.indexOf(n),l=a.dataSet,u=l.fields.values,d=u===void 0?[]:u,h=[],v={},p=a.getTotalsConfig(n),g=e.isGrandTotals?p.grandTotalsGroupDimensions||[]:p.subTotalsGroupDimensions||[],m=l.isEmpty()?[]:g;if(m!=null&&m.includes(n)){v=sv(e);var C=l.getDimensionValues(n,v);h.push.apply(h,X([],F((C||[]).map(function(_){return new es({label:_,isSubTotals:e.isSubTotals,isGrandTotals:e.isGrandTotals,isTotalRoot:!1})})),!1)),se(h)&&n&&h.push(ml)}else if(t&&n===Ae)v=sv(e),h.push.apply(h,X([],F(d.map(function(_){return new n_(_)})),!1));else if(ju({spreadsheet:a,level:s,fields:i})){e.isLeaf=!0,o.pushIndexNode(e),e.rowIndex=o.getIndexNodes().length-1;return}else{i_(N(N({},r),{currentField:i[s+1]}));return}var w=Rp(h);Mp(N(N({},r),{fieldValues:w,level:s,parentNode:e,query:v}))},h7=function(r){var t=r.parentNode,e=r.currentField,n=r.fields,i=r.spreadsheet,o=i.dataSet,a=o.fields.values,s=a===void 0?[]:a,l=n.indexOf(e),u=[],d={};d=sv(t,!0);var h=o.getDimensionValues(e,d),v=r_(i,h,t,e);u.push.apply(u,X([],F(v||[]),!1)),se(u)&&e&&(e===Ae?u.push.apply(u,X([],F(s),!1)):u.push(ml)),l7({currentField:e,lastField:n[l-1],isFirstField:l===0,fieldValues:u,spreadsheet:i});var p=Rp(u);Mp(N(N({},r),{fieldValues:p,level:l,parentNode:t,query:d}))},o_=function(r){r.parentNode.isTotals?i_(r):h7(r)},il=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return r.map(function(e){return _x(e)?UB:xx(e)?WB:String(e)}).join(xr)},Mp=function(r){var t,e,n,i,o,a,s,l,u,d,h=r.currentField,v=r.fields,p=r.fieldValues,g=r.hierarchy,m=r.parentNode,C=r.level,w=r.query,_=r.addMeasureInTotalQuery,S=r.addTotalMeasureInTotal,b=r.spreadsheet,T=b.isTableMode();try{for(var E=Qt(p.entries()),R=E.next();!R.done;R=E.next()){var O=F(R.value,2),A=O[0],P=O[1],D=P instanceof es,k=P instanceof n_,z=void 0,V=void 0,Z=!1,Q=!1,Y=!1,te=!1,ae=h;if(D){var pe=P;Q=pe.isGrandTotals,Y=pe.isSubTotals,te=pe.isTotalRoot,z=kt(P.label),te?V=w:V=N(N({},w),(n={},n[h]=z,n)),_&&(V[Ae]=(s=b==null?void 0:b.dataSet)===null||s===void 0?void 0:s.fields.values[0]),Z=ju({spreadsheet:b,level:C,fields:v})}else k?(z=kt(P.label),V=N(N({},w),(i={},i[Ae]=z,i)),ae=Ae,Q=m.isGrandTotals,Y=m.isSubTotals,Z=ju({spreadsheet:b,level:C,fields:v})):T?(z=P,ae=v[A],V=N(N({},w),(o={},o[ae]=z,o)),Z=!0):(z=P,V=z===ml?N({},w):N(N({},w),(a={},a[h]=z,a)),Z=ju({spreadsheet:b,level:C,fields:v}));var Ee=T?ae:z,me=il(m.id,Ee);if(!me)return;var Ze=!1,Ge=new Ft({id:me,value:z,level:C,field:ae,parent:m,isTotals:D||k,isGrandTotals:Q,isSubTotals:Y,isTotalMeasure:k,isCollapsed:Ze,isTotalRoot:te,hierarchy:g,query:V,spreadsheet:b,isLeaf:Z||Ze}),Ye=Lp(b,m,Ge,g),Fe=(l=b==null?void 0:b.facet)===null||l===void 0?void 0:l.getHiddenColumnsInfo(Ge);C>g.maxLevel&&!Q&&!m.isGrandTotals&&!m.isSubTotals&&!Ge.isSubTotals&&(g.sampleNodesForAllLevels.push(Ge),g.maxLevel=C,g.sampleNodeForLastLevel=Fe?((u=Fe==null?void 0:Fe.displaySiblingNode)===null||u===void 0?void 0:u.next)||((d=Fe==null?void 0:Fe.displaySiblingNode)===null||d===void 0?void 0:d.prev):Ge);var nr=Z||Ze||!Ye;nr?(Ge.isLeaf=!0,g.pushIndexNode(Ge),Ge.rowIndex=g.getIndexNodes().length-1):o_({addTotalMeasureInTotal:S,addMeasureInTotalQuery:_,parentNode:Ge,currentField:v[C+1],fields:v,hierarchy:g,spreadsheet:b})}}catch(At){t={error:At}}finally{try{R&&!R.done&&(e=E.return)&&e.call(E)}finally{if(t)throw t.error}}},c7=function(r){var t,e=r.spreadsheet,n=r.rootNode,i=r.fields,o=r.hierarchy,a=e.dataSet.fields.columns,s=a===void 0?[]:a,l=(t=e.options.seriesNumber)!==null&&t!==void 0?t:{},u=l.enable,d=l.text,h=nd(d),v=s.map(function(p){return p===nn?h:e.dataSet.getFieldName(p)});u&&!i.includes(nn)&&(i.unshift(nn),v.unshift(h)),Mp({spreadsheet:e,currentField:i[0],fields:i,fieldValues:v,hierarchy:o,parentNode:n,level:0,query:{},addMeasureInTotalQuery:!1,addTotalMeasureInTotal:!1})},Pa=function(r){return Number.parseFloat((fi(r)||0).toPrecision(Vx))},v7=function(r){try{return JSON.parse(r)}catch(t){return null}},ol=function(r,t,e){if(e===void 0&&(e=0),!Object.values(r).find(function(a){return a>0}))return r;var n=N({},r);n.colCount>=t&&(n.colCount=t);var i=t-n.colCount;n.trailingColCount>i&&(n.trailingColCount=i),n.rowCount>=e&&(n.rowCount=e);var o=e-n.rowCount;return n.trailingRowCount>o&&(n.trailingRowCount=o),n},p7=function(r){oe(t,r);function t(e,n){var i=r.call(this,e)||this;return i.appendInfo=n,i}return t}(Wv);function uo(r,t){return r==null?void 0:r.appendChild(new wt({style:t}))}function g7(r,t){return r==null?void 0:r.appendChild(new Gv({style:t}))}function y7(r,t){return r==null?void 0:r.appendChild(new uw({style:t}))}function a_(r,t){return r==null?void 0:r.appendChild(new sw({style:t}))}function m7(r){var t=r.group,e=r.textShape,n=r.style,i=r.appendInfo;return e&&t&&t.contains(e)&&t.removeChild(e),t==null?void 0:t.appendChild(new p7({style:N({fontVariant:"normal",fontStyle:"normal",lineWidth:1},n)},i||{}))}function Xt(r,t){return r==null?void 0:r.appendChild(new Ia({style:N({zIndex:100},t)}))}function mn(r,t,e){if(!se(r)){var n=Ue(r)?r:[r];n.forEach(function(i){var o;(o=i==null?void 0:i.style)===null||o===void 0||o.setProperty(t,e)})}}function Ll(r,t){var e=new bp(t);return r==null||r.appendChild(e),e}function s_(r){var t=r.group,e=r.iconCfg,n=r.isCollapsed,i=r.onClick,o=Ll(t,N(N({},e),{name:n?"Plus":"Minus",cursor:"pointer"}));return Un(i)&&o.addEventListener("click",i),o}var C7=function(r,t){return t===void 0&&(t="right"),r.map(function(e){return typeof e=="string"?{name:e,position:t}:e})},w7=function(r){return r===void 0&&(r=[]),r.map(function(t){return N(N({},t),{icons:C7(t.icons)})})},x7=function(r,t,e){if(!r)return!1;var n=r.icons,i=r.displayCondition,o=r.belongsCell;return se(n)||o!==e?!1:n.some(function(a){var s,l,u;return(u=(l=(s=a.displayCondition)===null||s===void 0?void 0:s.call(a,t,a.name))!==null&&l!==void 0?l:i==null?void 0:i(t,a.name))!==null&&u!==void 0?u:!0})},Op=function(r,t,e){r===void 0&&(r=[]);var n=w7(r),i=$t(n,function(a){return x7(a,t,e)});if(!!i){var o=i.icons.filter(function(a){var s,l,u,d;return(d=(l=(s=a.displayCondition)===null||s===void 0?void 0:s.call(a,t,a.name))!==null&&l!==void 0?l:(u=i.displayCondition)===null||u===void 0?void 0:u.call(i,t,a.name))!==null&&d!==void 0?d:!0});return N(N({},i),{icons:o})}},$s=function(r,t){if(r===void 0&&(r=[]),se(r))return 0;var e=t.margin,n=t.size;return r.reduce(function(i,o){var a=o.position;return i+n+(a==="left"?e.right:e.left)},0)},l_=function(r,t){r===void 0&&(r=[]);var e=bl({left:[],right:[]},pp(r,"position"));return t&&(t.position==="left"?e.left.push(t):e.right.unshift(t)),e},u_=function(r,t){var e=r.value,n=r.field;return wr(n,Ae)?{formattedValue:t||e,value:e}:{formattedValue:e,value:e}},al=function(r,t){var e=r.y,n=r.height;switch(t){case"top":return e;case"middle":return e+n/2;default:return e+n}},Rl=function(r,t,e,n){var i=(e-r)/2;switch(n){case"top":return t+i;case"middle":return t-r/2;default:return t-i-r}},ss=function(r){var t=r.bbox,e=r.textWidth,n=r.textAlign,i=r.groupedIcons,o=r.iconStyle,a=t.x,s=t.width,l=$s(i.left,o),u=$s(i.right,o),d,h,v;switch(n){case"left":h=a,d=a+l,v=d+e+(u&&o.margin.left);break;case"right":d=a+s-u,h=d-e-l,v=a+s-u+(u&&o.margin.left);break;default:var p=l+e+u;h=a+s/2-p/2,d=h+l+e/2,v=h+l+e+(u&&o.margin.left);break}return{textX:d,leftIconX:h,rightIconX:v}},_7=function(r,t,e,n){if(n===_t.BORDER_BOX)return r;var i=r.x,o=r.y,a=r.width,s=r.height,l=e.padding,u=e.horizontalBorderWidth,d=u===void 0?0:u,h=e.verticalBorderWidth,v=h===void 0?0:h;return t.forEach(function(p){var g=[ot.BOTTOM,ot.TOP].includes(p)?d:v;switch(p){case ot.TOP:o+=g,s-=g;break;case ot.BOTTOM:s-=g;break;case ot.LEFT:i+=g,a-=g;break;default:a-=g;break}}),n===_t.CONTENT_BOX&&(i+=l==null?void 0:l.left,o+=l==null?void 0:l.top,a-=(l==null?void 0:l.left)+(l==null?void 0:l.right),s-=(l==null?void 0:l.top)+(l==null?void 0:l.bottom)),{x:i,y:o,width:a,height:s}},uv=function(r,t,e){var n=t||{},i=n.x,o=n.y,a=n.width,s=n.height,l=e||{},u=l.horizontalBorderWidth,d=u===void 0?0:u,h=l.horizontalBorderColorOpacity,v=l.horizontalBorderColor,p=l.verticalBorderWidth,g=p===void 0?0:p,m=l.verticalBorderColor,C=l.verticalBorderColorOpacity,w=l.borderDash,_=se(w)?"":w,S=[ot.TOP,ot.BOTTOM].includes(r)?{lineWidth:d,stroke:v,strokeOpacity:h,lineDash:_}:{lineWidth:g,stroke:m,strokeOpacity:C,lineDash:_},b=0,T=0,E=0,R=0;if(r===ot.TOP||r===ot.BOTTOM){var O=o;r===ot.TOP?O=o+d/2:O=o+s-d/2,T=O,R=O,b=i,E=i+a}if(r===ot.LEFT||r===ot.RIGHT){var A=i;r===ot.LEFT?A=i+g/2:A=i+a-g/2,b=A,E=A,T=o,R=o+s}return{position:{x1:b,x2:E,y1:T,y2:R},style:S}},Ip=function(r){var t;return(t=r==null?void 0:r.position)!==null&&t!==void 0?t:"right"},E7=function(r,t){r===void 0&&(r=0),t===void 0&&(t=0),r=Pa(r),t=Pa(t);var e=r>=0,n=t>=0&&r<=0,i=e?r:t,o=n?0:i,a=t-r;return function(s){var l=e?0:1,u=n?yf(Math.abs(0-r)/a,0,1):l,d=yf((s-o)/a,-1,1);return{zeroScale:u,scale:d}}},f_=function(r,t){var e,n,i=r.data,o=r.encode,a=r.type,s=t.getMeta(),l=s.x,u=s.y,d=s.height,h=s.width,v=t.getStyle(ie.DATA_CELL),p=v.cell,g=v.miniChart,m=[],C=De(i,function(me){return m.push(me==null?void 0:me[o.y]),{x:me[o.x],y:me[o.y]}}),w=Ko(m)||0,_=Sx(m)||0,S=w-_,b=p.padding,T=b.left,E=T===void 0?0:T,R=b.right,O=R===void 0?0:R,A=b.top,P=A===void 0?0:A,D=b.bottom,k=D===void 0?0:D,z=l+E,V=l+h-O,Z=u+P,Q=u+d-k,Y=Q-Z,te=(e=g==null?void 0:g.bar)===null||e===void 0?void 0:e.intervalPadding,ae=a===Ja.Bar?(V-z-(m.length-1)*te)/m.length+te:(n=(V-z)/(m.length-1))!==null&&n!==void 0?n:0,pe=[],Ee=De(C,function(me,Ze){var Ge=z+Ze*ae,Ye;if(S!==0?Ye=Q-((me==null?void 0:me.y)-_)/S*Y:Ye=_>0?Z:Q,a===Ja.Bar){var Fe=void 0,nr=void 0;_<0&&w>0&&S!==0?(Fe=Q-(0-_)/S*Y,nr=Math.abs(Ye-Fe),(me==null?void 0:me.y)<0&&(Ye=Fe)):(Fe=_<0?Z:Q,S=Ko([Math.abs(w),Math.abs(_)]),nr=S===0?Y:Math.abs((me==null?void 0:me.y)-0)/S*Y,Ye=Fe);var At=ae-te;pe.push([At,nr])}return[Ge,Ye]});return{points:Ee,box:pe}},S7=function(r,t){if(!(se(r==null?void 0:r.data)||se(t))){var e=t.getStyle(ie.DATA_CELL),n=e.miniChart,i=n==null?void 0:n.line,o=i.point,a=i.linkLine,s=f_(r,t).points;y7(t,{points:s,stroke:a==null?void 0:a.fill,lineWidth:a==null?void 0:a.size,opacity:a==null?void 0:a.opacity});for(var l=0;l<s.length;l++)a_(t,{cx:s[l][0],cy:s[l][1],r:o.size,fill:o.fill,fillOpacity:o==null?void 0:o.opacity})}},T7=function(r,t){if(!(se(r==null?void 0:r.data)||se(t)))for(var e=t.getStyle(ie.DATA_CELL),n=e.miniChart,i=n.bar,o=f_(r,t),a=o.points,s=o.box,l=0;l<a.length;l++)uo(t,{x:a[l][0],y:a[l][1],width:s[l][0],height:s[l][1],fill:i.fill,fillOpacity:i.opacity})},b7=function(r,t,e){var n=Number(t)-Number(r);return Number.isNaN(n)||Number(r)<0?e.bad:n<=.1?e.good:n>.1&&n<=.2?e.satisfactory:e.bad},L7=function(r,t){var e,n;t===void 0&&(t={min:0,max:0});var i=Number(r);if(Number.isNaN(i))return r;var o=(e=t==null?void 0:t.min)!==null&&e!==void 0?e:t,a=(n=t==null?void 0:t.max)!==null&&n!==void 0?n:t,s=new Intl.NumberFormat("en-US",{minimumFractionDigits:o,maximumFractionDigits:a,useGrouping:!1,style:"percent"});return s.format(i)},R7=function(r){var t,e,n,i,o,a;if(!se(r)){var s=r.getBBoxByType(_t.PADDING_BOX),l=s.x,u=s.y,d=s.height,h=s.width,v=r.findFieldCondition((t=r.cellConditions)===null||t===void 0?void 0:t.interval);if(v!=null&&v.mapping){var p=r.mappingValue(v);if(!p)return;var g=p.isCompare?p:r.valueRangeByField,m=Pa(g.minValue),C=Pa(g.maxValue),w=Lt(p==null?void 0:p.fieldValue)?Pa(r.getMeta().fieldValue):Pa(p==null?void 0:p.fieldValue);if(w<m||w>C)return;var _=r.getStyle(),S=(n=(e=_==null?void 0:_.miniChart)===null||e===void 0?void 0:e.interval)===null||n===void 0?void 0:n.height,b=(o=(i=_==null?void 0:_.miniChart)===null||i===void 0?void 0:i.interval)===null||o===void 0?void 0:o.fill,T=E7(m,C),E=T(w),R=E.zeroScale,O=E.scale,A=(a=p.fill)!==null&&a!==void 0?a:b;return uo(r,{x:l+h*R,y:u+d/2-S/2,width:h*O,height:S,fill:A})}}},M7=function(r,t){var e=t.getStyle(ie.DATA_CELL),n=t.getMeta(),i=n.x,o=n.y,a=n.height,s=n.width;if(se(r)){t.renderTextShape(N(N({},e.text),{x:i+s-e.cell.padding.right,y:o+a/2,text:""}));return}var l=e.miniChart.bullet,u=l.progressBar,d=l.comparativeMeasure,h=l.rangeColors,v=l.backgroundColor,p=r.measure,g=r.target,m=Math.max(Number(p),0),C=Math.max(Number(g),0),w=L7(p,2),_=(u==null?void 0:u.widthPercent)>1?(u==null?void 0:u.widthPercent)/100:u==null?void 0:u.widthPercent,S=e.cell.padding,b=s-S.left-S.right,T=_*b,E=b-T,R=i+s-S.right-T,O=o+a/2-u.height/2;uo(t,{x:R,y:O,width:T,height:u.height,fill:v});var A=Math.max(Math.min(T*m,T),0);uo(t,{x:R,y:O+(u.height-u.innerHeight)/2,width:A,height:u.innerHeight,fill:b7(m,C,h)});var P=R+T*C;Xt(t,{x1:P,y1:o+(a-d.height)/2,x2:P,y2:o+(a-d.height)/2+d.height,stroke:d==null?void 0:d.fill,lineWidth:d.width,opacity:d==null?void 0:d.opacity});var D=E-S.right;t.renderTextShape(N(N({},e.text),{x:R-S.right,y:o+a/2,text:w,wordWrapWidth:D}))},O7=function(r,t){switch(t==null?void 0:t.type){case Ja.Line:S7(t,r);break;case Ja.Bar:T7(t,r);break;default:M7(t,r);break}},I7=function(r,t){var e=t!=null?t:xp,n=Lt(r)||r===""||r===ml;return n?e:"".concat(r)},A7=function(r,t,e,n){n===void 0&&(n="left");var i=t.right,o=i===void 0?0:i,a=t.left,s=a===void 0?0:a,l=e||0;return n==="left"?r+o/2+l:n==="right"?r-o/2-l:r+s/2+l},N7=function(r){var t,e,n=r.getMeta().isTotals,i=(e=(t=r).isMeasureField)===null||e===void 0?void 0:e.call(t),o=r.getStyle(r.cellType||ie.DATA_CELL),a;return i?a=o==null?void 0:o.measureText:n?a=o==null?void 0:o.bolderText:a=o==null?void 0:o.text,{cellStyle:o,textStyle:a}},P7=function(r){var t,e=r.rowIndex,n=r.colIndex,i=r.meta,o=r.data,a=r.textStyle,s=r.textCondition,l=(t=s==null?void 0:s.mapping)===null||t===void 0?void 0:t.call(s,o,{rowIndex:e,colIndex:n,meta:i});return N(N({},a),l)},d_=function(r,t){return Un(t)?t(r):t},B7=function(r,t,e){for(var n=r.x,i=r.y,o=r.width,a=r.height,s=a/Aa(t),l=[],u,d,h,v=0,p=De(e,function(w){return w>1?w/100:w}),g=0;g<Aa(t);g++){d=i+s*g;var m=[];u=n,v=0;for(var C=0;C<Aa(t[g]);C++)h=se(p)?o/Aa(t[0]):o*p[C],u=A7(n,{left:0,right:0},v,"left"),v+=h,m.push({x:u,y:d,width:h,height:s});l.push(m)}return l},D7=function(r,t,e){var n,i,o,a,s,l,u,d;e===void 0&&(e=!0);var h=r.getBBoxByType(_t.CONTENT_BOX),v=h.x,p=h.y,g=h.height,m=h.width,C=r.getMeta(),w=t||C.fieldValue,_=w.values,S=C.spreadsheet.options,b=(i=(n=S==null?void 0:S.conditions)===null||n===void 0?void 0:n.text)===null||i===void 0?void 0:i[0],T=(a=(o=S==null?void 0:S.conditions)===null||o===void 0?void 0:o.icon)===null||a===void 0?void 0:a[0];if(!Ue(_)){O7(r,_);return}var E=(u=(l=(s=S.style)===null||s===void 0?void 0:s.dataCell)===null||l===void 0?void 0:l.valuesCfg)===null||u===void 0?void 0:u.widthPercent,R=0;if(w!=null&&w.label){var O=r.getStyle(ie.DATA_CELL),A=O.bolderText;R=g/(_.length+1),r.renderTextShape(N(N({},A),{x:v,y:p+R/2,text:w.label,maxLines:1,wordWrapWidth:m,wordWrap:!0,textOverflow:"ellipsis"}),{shallowRender:!0})}for(var P=N7(r),D=P.cellStyle,k=P.textStyle,z=D==null?void 0:D.icon,V=T&&T.mapping&&{name:"",size:z==null?void 0:z.size,margin:z==null?void 0:z.margin,position:Ip(T)},Z,Q=B7({x:v,y:p+R,height:g-R,width:m},_,E),Y=0;Y<_.length;Y++)for(var te=td(_[Y]),ae=0;ae<te.length;ae++){Z=te[ae];var pe=e?P7({rowIndex:Y,colIndex:ae,meta:C,data:Z,textStyle:k,textCondition:b}):k,Ee=Q[Y][ae].width-z.size-((V==null?void 0:V.position)==="left"?z.margin.right:z.margin.left),me={left:[],right:[]};V&&me[V.position].push(V),r.renderTextShape(N(N({},pe),{x:0,y:0,maxLines:1,text:Z,wordWrapWidth:Ee}),{shallowRender:!0});var Ze=r.getActualTextWidth(),Ge=ss({bbox:Q[Y][ae],textAlign:pe.textAlign,textWidth:Ze,iconStyle:z,groupedIcons:me}),Ye=Ge.textX,Fe=Ge.leftIconX,nr=Ge.rightIconX,At=al(Q[Y][ae],pe.textBaseline);if(r.updateTextPosition({x:Ye,y:At}),T&&e){var Sr=(d=T==null?void 0:T.mapping)===null||d===void 0?void 0:d.call(T,Z,{rowIndex:Y,colIndex:ae,meta:r==null?void 0:r.getMeta()}),dr=(V==null?void 0:V.position)==="left"?Fe:nr,Tn=Rl(z.size,At,pe.fontSize,pe.textBaseline);if(Sr){var Kn=Ll(r,{x:dr,y:Tn,name:Sr.icon,width:z==null?void 0:z.size,height:z==null?void 0:z.size,fill:Sr.fill});r.addConditionIconShape(Kn)}}}},lc=function(r,t){return t===void 0&&(t=1),(r==null?void 0:r.width)*t},Uu,h_=function(r,t){return t===void 0&&(t=Tp),{type:Vt.PLAIN,content:De(r,function(e){return e.join(t)}).join(O9)}},c_=function(r){function t(i,o){return i.map(function(a){return"<".concat(o,">").concat(Ck(a),"</").concat(o,">")}).join("")}function e(i,o){return i.map(function(a){return"<".concat(o,">").concat(t(a,"td"),"</").concat(o,">")}).join("")}var n=e(r,"tr");return{type:Vt.HTML,content:'<meta charset="utf-8"><table><tbody>'.concat(n,"</tbody></table>")}},Vu=(Uu={},Uu[Vt.PLAIN]=h_,Uu[Vt.HTML]=c_,Uu);function ef(r,t,e){return t===void 0&&(t=!1),t?e.getFieldFormatter(r):function(n){return n}}var Bo=function(r){var t,e,n,i,o,a,s=r.rowMatrix,l=r.colMatrix,u=r.dataMatrix,d=r.cornerMatrix,h=(e=(t=s==null?void 0:s[0])===null||t===void 0?void 0:t.length)!==null&&e!==void 0?e:0,v=(n=l==null?void 0:l.length)!==null&&n!==void 0?n:0,p=(o=(i=u[0])===null||i===void 0?void 0:i.length)!==null&&o!==void 0?o:0,g=(a=u.length)!==null&&a!==void 0?a:0,m=h+p,C=v+g,w=Array.from(Array(C),function(){return new Array(m)});return w=De(w,function(_,S){return De(_,function(b,T){var E,R;if(T>=0&&T<h&&S>=0&&S<v)return(R=(E=d==null?void 0:d[S])===null||E===void 0?void 0:E[T])!==null&&R!==void 0?R:"";if(T>=h&&T<=m&&S>=0&&S<v)return l[S][T-h];if(T>=0&&T<h&&S>=v&&S<C)return s==null?void 0:s[S-v][T];if(T>=h&&T<=m&&S>=v&&S<C)return u[S-v][T-h]})}),w};function fv(r){var t;return(t=Ko(De(r,function(e){return e.length})))!==null&&t!==void 0?t:0}function F7(r){var t=fv(r);return De(r,function(e){var n=t-e.length;return n?X(X([],F(e),!1),F(new Array(n).fill("")),!1):e})}var k7=function(r){var t,e;return typeof r=="object"?{formatHeader:(t=r.formatHeader)!==null&&t!==void 0?t:!1,formatData:(e=r.formatData)!==null&&e!==void 0?e:!1}:{formatHeader:r!=null?r:!1,formatData:r!=null?r:!1}};function H7(r){var t;if(!r)return Vu;var e=r(Vu);return t={},t[Vt.PLAIN]=e[Vt.PLAIN]||Vu[Vt.PLAIN],t[Vt.HTML]=e[Vt.HTML]||Vu[Vt.HTML],t}function z7(r){var t,e,n=r.spreadsheet.options.interaction,i=r.config,o=i.formatOptions,a=o===void 0?!1:o,s=i.separator,l=s===void 0?Tp:s,u=i.selectedCells,d=u===void 0?[]:u,h=i.customTransformer,v=i.isAsyncExport,p=v===void 0?!1:v,g=r.isExport,m=n.copy,C=g?k7(a):{formatData:(t=m==null?void 0:m.withFormat)!==null&&t!==void 0?t:!1,formatHeader:(e=m==null?void 0:m.withFormat)!==null&&e!==void 0?e:!1},w=C.formatData,_=C.formatHeader,S=H7(g?h:m==null?void 0:m.customTransformer);return{separator:l,selectedCells:d,transformers:S,formatData:w,formatHeader:_,isAsyncExport:p}}var G7=function(r){var t=[],e=function(n){var i,o,a,s;if(n.id!==Xs){var l=(a=(o=(i=n.spreadsheet)===null||i===void 0?void 0:i.dataSet)===null||o===void 0?void 0:o.getFieldFormatter)===null||a===void 0?void 0:a.call(o,n.field),u=(s=l==null?void 0:l(n.value))!==null&&s!==void 0?s:n.value;if(t.unshift(u),n!=null&&n.parent)return e(n.parent)}};return e(r),t};function Nm(r,t){return!r||!t?!1:String(r).toLowerCase()===String(t).toLowerCase()}var v_=function(r){return/\n/.test(r)?'"'.concat(r.replace(/\r\n?/g,`
`).replace(/"/g,"'"),'"'):r};function W7(r){var t=new Set;return Me(r,function(e){var n=e.getMeta().level;t.has(n)||t.add(n)}),t}var p_=function(r,t,e){return e===void 0&&(e=!0),De(r,function(n){return e?t.dataSet.getFieldName(n):n})},g_=function(r,t){var e=r.split(xr);return t?e.slice(e.length-t):(e.shift(),e)},y_=function(r,t){return r()?t==null?void 0:t.value:t==null?void 0:t.field},Ap=function(r){return r.filter(function(t){var e=t.type;return e===ie.COL_CELL})},Np=function(r){return r.filter(function(t){var e=t.type;return e===ie.ROW_CELL})},m_=function(){function r(t){var e=this;this.matrixHtmlTransformer=function(s){return e.config.transformers[Vt.HTML](s)};var n=t.spreadsheet,i=t.isExport,o=i===void 0?!1:i,a=t.config;this.spreadsheet=n,this.config=z7({config:a,spreadsheet:n,isExport:o})}return r.prototype.getHeaderNodeMatrix=function(t){var e=this.config.formatHeader;return p_(g_(t.id),t.spreadsheet,e)},r.prototype.matrixPlainTextTransformer=function(t,e){return this.config.transformers[Vt.PLAIN](t,e)},r.prototype.matrixTransformer=function(t,e){return e===void 0&&(e=Tp),[this.matrixPlainTextTransformer(t,e),this.matrixHtmlTransformer(t)]},r}(),C_=function(r){oe(t,r);function t(e){var n=r.call(this,e)||this;return n.leafRowNodes=[],n.leafColNodes=[],n.compatibleHideMeasureColumn=function(){var i,o,a,s,l,u=((s=(a=(o=n.spreadsheet.options)===null||o===void 0?void 0:o.style)===null||a===void 0?void 0:a.colCell)===null||s===void 0?void 0:s.hideValue)&&n.spreadsheet.isValueInCols();return u?(i={},i[Ae]=(l=n.spreadsheet.dataCfg.fields.values)===null||l===void 0?void 0:l[0],i):{}},n.getDataMatrixByHeaderNode=function(){var i=n.compatibleHideMeasureColumn();return De(n.leafRowNodes,function(o){return n.leafColNodes.map(function(a){return n.getDataCellValue({rowNode:o,colNode:a,config:{measureQuery:i,isPivotMode:n.spreadsheet.isPivotMode,dataSet:n.spreadsheet.dataSet}})})})},n.getDataMatrixByHeaderNodeRIC=function(){var i=[],o=0,a=n.compatibleHideMeasureColumn();return new Promise(function(s,l){try{var u=function(d){for(var h=n.leafRowNodes.length,v=h>=Rf?Rf:h;(d.timeRemaining()>0||d.didTimeout)&&o<=h-1&&v>0;)for(var p=o;p<h&&v>0;p++){for(var g=[],m=n.leafRowNodes[p],C=0;C<n.leafColNodes.length;C++){var w=n.leafColNodes[C],_=n.getDataCellValue({rowNode:m,colNode:w,config:{isPivotMode:n.spreadsheet.isPivotMode,dataSet:n.spreadsheet.dataSet,measureQuery:a}});g.push(_)}o=p,i.push(g),v--}o===h-1?s(i):requestIdleCallback(u)};requestIdleCallback(u)}catch(d){l(d)}})},n.getDataCellValue=function(i){var o,a=i.rowNode,s=i.colNode,l=i.config,u=l.isPivotMode,d=l.dataSet,h=l.measureQuery,v=d.getCellData({query:N(N(N({},a.query),s.query),h),rowNode:a,isTotals:a.isTotals||a.isTotalMeasure||s.isTotals||s.isTotalMeasure}),p=n.spreadsheet.isValueInCols()?s:a,g=(o=y_(u,p))!==null&&o!==void 0?o:"",m=n.spreadsheet.dataCfg.fields.values;g=m!=null&&m.includes(g)?g:m==null?void 0:m[0];var C=ef(g!=null?g:s.field,n.config.formatData,d),w=v==null?void 0:v[Bi],_=ed(w==null?void 0:w.values),S=_?"":w;return C(S!=null?S:"")},n.getCustomRowCornerMatrix=function(i){var o=fv(i!=null?i:[]),a=n.spreadsheet.facet.getCornerNodes(),s=Fx(a,function(l){return l.cornerType===Cr.Col?0:1});return n.spreadsheet.isHierarchyTreeType()?De(s,function(l){var u=new Array(o).fill("");return u[o-1]=l.value,u}):Object.values(pp(s,"y")).map(function(l){var u=new Array(o-l.length).fill(""),d=l.map(function(h){return h.value});return X(X([],F(u),!1),F(d),!1)})},n.getCornerMatrix=function(i){if(n.spreadsheet.isCustomRowFields())return n.getCustomRowCornerMatrix(i);var o=n.spreadsheet.dataCfg.fields,a=o.columns,s=a===void 0?[]:a,l=o.rows,u=l===void 0?[]:l,d=X(X([],F(s),!1),[""],!1),h=n.spreadsheet.isHierarchyTreeType()?fv(i!=null?i:[]):u.length,v=zH(u,0,h);return De(d,function(p,g){return De(v,function(m,C){return g===d.length-1?n.spreadsheet.dataSet.getFieldName(m):C===h-1?n.spreadsheet.dataSet.getFieldName(p):""})})},n.getDataMatrixByDataCell=function(i){var o=n.spreadsheet.options.interaction.copy,a=n.compatibleHideMeasureColumn(),s=De(i,function(d){return De(d,function(h){var v=F(x_(h,n.spreadsheet),2),p=v[0],g=v[1],m=n.getDataCellValue({rowNode:p,colNode:g,config:{isPivotMode:n.spreadsheet.isPivotMode,dataSet:n.spreadsheet.dataSet,measureQuery:a}});return v_(m)})});if(!(o!=null&&o.withHeader))return n.matrixTransformer(s,n.config.separator);var l=n.getRowMatrix(),u=n.getColMatrix();return n.matrixTransformer(Bo({rowMatrix:l,colMatrix:u,dataMatrix:s}),n.config.separator)},n.getAsyncAllPivotCopyData=function(){return jt(n,void 0,void 0,function(){var i,o,a,s,l;return er(this,function(u){switch(u.label){case 0:return i=this.getRowMatrix(),o=this.getColMatrix(),a=this.getCornerMatrix(i),s=[],this.config.isAsyncExport?[4,this.getDataMatrixByHeaderNodeRIC()]:[3,2];case 1:return s=u.sent(),[3,4];case 2:return[4,Promise.resolve(this.getDataMatrixByHeaderNode())];case 3:s=u.sent(),u.label=4;case 4:return l=this.matrixTransformer(Bo({rowMatrix:i,colMatrix:o,dataMatrix:s,cornerMatrix:a}),this.config.separator),[2,l]}})})},n.getPivotAllCopyData=function(){var i=n.getRowMatrix(),o=n.getColMatrix(),a=n.getCornerMatrix(i),s=n.getDataMatrixByHeaderNode(),l=n.matrixTransformer(Bo({rowMatrix:i,colMatrix:o,dataMatrix:s,cornerMatrix:a}),n.config.separator);return l},n.leafRowNodes=n.getLeafRowNodes(),n.leafColNodes=n.getLeafColNodes(),n}return t.prototype.getHeaderNodeMatrix=function(e){return this.config.formatHeader?G7(e):r.prototype.getHeaderNodeMatrix.call(this,e)},t.prototype.getLeafRowNodes=function(){var e=this.spreadsheet.facet.getRowLeafNodes(),n=Np(this.config.selectedCells),i=this.spreadsheet.isHierarchyTreeType();return se(n)?e:this.getSelectedNode(n,e,i)},t.prototype.getLeafColNodes=function(){var e=this.spreadsheet.facet.getColLeafNodes(),n=Ap(this.config.selectedCells);return se(n)?e:this.getSelectedNode(n,e)},t.prototype.getSelectedNode=function(e,n,i){return i===void 0&&(i=!1),e.reduce(function(o,a){var s=n.filter(function(l){return i?l.id===a.id:l.id.startsWith(a.id)});return o.push.apply(o,X([],F(s),!1)),o},[])},t.prototype.getColMatrix=function(){var e=this;return wp.apply(void 0,X([],F(De(this.leafColNodes,function(n){return e.getHeaderNodeMatrix(n)})),!1))},t.prototype.getRowMatrix=function(){var e=this,n=De(this.leafRowNodes,function(i){return e.getHeaderNodeMatrix(i)});return F7(n)},t.prototype.getPivotCopyData=function(){var e=this.spreadsheet.options.interaction.copy,n=this.getDataMatrixByHeaderNode();if(!(e!=null&&e.withHeader))return this.matrixTransformer(n,this.config.separator);var i=this.getRowMatrix(),o=this.getColMatrix();return this.matrixTransformer(Bo({rowMatrix:i,colMatrix:o,dataMatrix:n}),this.config.separator)},t}(m_);function U7(r,t){var e=new C_({spreadsheet:r,config:{selectedCells:t}});return e.getPivotCopyData()}var V7=function(r){var t=r.spreadsheet,e=r.selectedCells,n=r.headerSelectedCells,i=new C_({spreadsheet:t,config:{selectedCells:n,formatOptions:!0}});return i.getDataMatrixByDataCell(e)};function Y7(r,t){return Vn(r,function(e){var n=e.getMeta(),i=n.level===t,o=n.isTotals&&se(n.children);return i||o})}function X7(r,t,e){return De(r,function(n){var i=n.getMeta(),o=i.id,a=i.value,s=i.isTotals,l=i.level,u=i.spreadsheet,d=o;return s&&l!==t&&(d=o+xr+FH(a,t-l)),p_(g_(d,e.size),u)})}function $7(r){var t,e=W7(r),n=(t=Ko(Array.from(e)))!==null&&t!==void 0?t:0,i=Y7(r,n),o=r[0].cellType===ie.COL_CELL,a=X7(i,n,e),s=o?wp.apply(void 0,X([],F(a),!1)):a;return[h_(s),c_(s)]}var w_=function(r){oe(t,r);function t(e){var n=r.call(this,e)||this;return n.getValueFromMeta=function(i){var o,a=F(x_(i,n.spreadsheet),2),s=a[1],l=y_(n.spreadsheet.isPivotMode,s),u=n.isSeriesNumberField(l)?i.rowIndex+1:(o=n.displayData[i.rowIndex])===null||o===void 0?void 0:o[l],d=ef(l,n.config.formatData,n.spreadsheet.dataSet);return d(u)},n.displayData=n.getSelectedDisplayData(),n.columnNodes=n.getSelectedColNodes(),n}return t.prototype.getHeaderNodeMatrix=function(e){return r.prototype.getHeaderNodeMatrix.call(this,e)},t.prototype.getSelectedColNodes=function(){var e=Ap(this.config.selectedCells),n=this.spreadsheet.facet.getColLeafNodes();return e.length===0?n:De(e,function(i){return n[i.colIndex]})},t.prototype.getSelectedDisplayData=function(){var e=Np(this.config.selectedCells),n=this.spreadsheet.dataSet.getDisplayDataSet();return e.length===0?n:De(e,function(i){return n[i.rowIndex]})},t.prototype.getDataMatrix=function(){var e=this,n=this.spreadsheet.options.seriesNumber;return this.displayData.map(function(i,o){return e.columnNodes.map(function(a){var s=a==null?void 0:a.field;if(nn===s&&(n==null?void 0:n.enable))return(o+1).toString();var l=ef(s,e.config.formatData,e.spreadsheet.dataSet),u=i==null?void 0:i[s];return l(u)})})},t.prototype.getDataMatrixRIC=function(){var e=this,n=this.spreadsheet.options.seriesNumber,i=[],o=0;return new Promise(function(a,s){try{var l=function(u){for(var d=e.displayData.length,h=d>=Rf?Rf:d;(u.timeRemaining()>0||u.didTimeout)&&o<=d-1&&h>0;)for(var v=o;v<d&&h>0;v++){for(var p=e.displayData[v],g=[],m=0;m<e.columnNodes.length;m++){var C=e.columnNodes[m],w=C.field;if(nn===w&&(n==null?void 0:n.enable)){g.push((v+1).toString());continue}var _=ef(w,e.config.formatData,e.spreadsheet.dataSet),S=p[w],b=_(S);g.push(b)}o=v,i.push(g),h--}o===d-1?a(i):requestIdleCallback(l)};requestIdleCallback(l)}catch(u){s(u)}})},t.prototype.isSeriesNumberField=function(e){var n=this.spreadsheet.options.seriesNumber;return nn===e&&(n==null?void 0:n.enable)},t.prototype.getColMatrix=function(){var e=this;return wp.apply(void 0,X([],F(this.columnNodes.map(function(n){var i=e.getHeaderNodeMatrix(n);return e.isSeriesNumberField(n.field)?[nd()]:i})),!1))},t.prototype.getDataMatrixByDataCell=function(e){var n=this,i=this.spreadsheet.options.interaction.copy,o=De(e,function(s){return De(s,function(l){return v_(n.getValueFromMeta(l))})});if(!(i!=null&&i.withHeader))return this.matrixTransformer(o,this.config.separator);var a=this.getColMatrix();return this.matrixTransformer(Bo({colMatrix:a,dataMatrix:o}),this.config.separator)},t.prototype.processSelectedTable=function(e){e===void 0&&(e=!1);var n=this.getDataMatrix();if(!e)return this.matrixTransformer(n,this.config.separator);var i=this.getColMatrix();return this.matrixTransformer(Bo({colMatrix:i,dataMatrix:n}),this.config.separator)},t.prototype.asyncProcessSelectedTable=function(e){return e===void 0&&(e=!1),jt(this,void 0,void 0,function(){var n,i,o;return er(this,function(a){switch(a.label){case 0:return this.config.isAsyncExport?[4,this.getDataMatrixRIC()]:[3,2];case 1:return i=a.sent(),[3,4];case 2:return[4,Promise.resolve(this.getDataMatrix())];case 3:i=a.sent(),a.label=4;case 4:return n=i,e?(o=this.getColMatrix(),[2,this.matrixTransformer(Bo({colMatrix:o,dataMatrix:n}),this.config.separator)]):[2,this.matrixTransformer(n,this.config.separator)]}})})},t}(m_),q7=function(r,t){var e=new w_({spreadsheet:r,config:{selectedCells:t}});return e.processSelectedTable()},K7=function(r){var t=r.spreadsheet,e=r.selectedCells,n=r.headerSelectedCells,i=new w_({spreadsheet:t,config:{selectedCells:n,formatOptions:!0}});return i.getDataMatrixByDataCell(e)},x_=function(r,t){var e=r.rowIndex,n=r.colIndex,i=t.facet;return[i.getRowNodeByIndex(e),i.getColNodeByIndex(n)]},Z7=function(r){if(!(r!=null&&r.length))return[];var t=F([{row:1/0,col:1/0},{row:0,col:0}],2),e=t[0],n=t[1];r.forEach(function(l){var u=l.rowIndex,d=l.colIndex;e.col=Math.min(d,e.col),e.row=Math.min(u,e.row),n.col=Math.max(d,n.col),n.row=Math.max(u,n.row)});var i=F([n.row-e.row+1,n.col-e.col+1],2),o=i[0],a=i[1],s=new Array(o).fill("").map(function(){return new Array(a).fill("")});return r.forEach(function(l){var u=l.rowIndex,d=l.colIndex,h=F([u-e.row,d-e.col],2),v=h[0],p=h[1];s[v][p]=l}),s},uc=function(r,t){return r.isPivotMode()?U7(r,t):q7(r,t)};function Q7(r){return se(r)?!1:cp(r,function(t){return t.cellType===ie.ROW_CELL||t.cellType===ie.COL_CELL})}function J7(r,t,e,n){return n.isPivotMode()?V7({spreadsheet:n,selectedCells:r,headerSelectedCells:lo(t,e)}):K7({spreadsheet:n,selectedCells:r,headerSelectedCells:t})}function j7(r,t){var e,n=Ap(t),i=Np(t);if(r.interaction.getCurrentStateName()===ce.ALL_SELECTED)e=uc(r,[]);else if(n.length)e=uc(r,n);else if(i.length)e=uc(r,i);else{if(!t.length)return[{type:Vt.PLAIN,content:""},{type:Vt.HTML,content:""}];var o=Z7(t),a=o[0].map(function(l){var u;return N(N({},l),{id:(l==null?void 0:l.colId)||It((u=l==null?void 0:l.id)===null||u===void 0?void 0:u.split(av))||"",type:ie.COL_CELL})}),s=o.map(function(l){var u,d,h;return N(N({},l[0]),{id:((u=l[0])===null||u===void 0?void 0:u.rowId)||Sl((h=(d=l[0])===null||d===void 0?void 0:d.id)===null||h===void 0?void 0:h.split(av))||"",type:ie.ROW_CELL})});e=J7(o,a,s,r)}return e}var ez=function(r){var t,e=r.interaction,n=e.getState().cells||[],i=(t=e.getInteractedCells())!==null&&t!==void 0?t:[],o=Q7(i),a=o?$7(i):j7(r,n);return a&&rz(a),a},__=function(r){return new Promise(function(t,e){var n;Array.isArray(r)?n=ze(r.filter(function(a){return a.type===Vt.PLAIN}),"[0].content",""):n=r.content||"";var i=document.createElement("textarea");i.value=n,document.body.appendChild(i),i.focus({preventScroll:!0}),i.select();var o=document.execCommand("copy");document.body.removeChild(i),o?t():e()})},tz=function(r){return navigator.clipboard.write([new ClipboardItem(lo(r).reduce(function(t,e){var n,i=e.type,o=e.content,a=o.replace(/\x00/g,"");return N(N({},t),(n={},n[i]=new Blob([a],{type:i}),n))},{}))]).catch(function(){return __(r)})},rz=function(r,t){t===void 0&&(t=!1);var e;return typeof r=="string"?e={content:r,type:Vt.PLAIN}:e=r,!navigator.clipboard||!window.ClipboardItem||t?__(e):tz(e)},E_=function(r){return!r||!("appendInfo"in r)?{}:r.appendInfo},Pp=function(r,t,e){var n,i=r.split(xr);if(e)n=[r];else{n=[il(i[0],i[1])];for(var o=2;o<i.length;o+=1)n.push(il(n[o-2],i[o]))}var a=Vn(t,function(s){var l;return n.includes((l=s.getMeta())===null||l===void 0?void 0:l.id)});return a},nz=function(r,t,e){if(r){var n=Pp(r,t);Me(n,function(i){i.updateByState(e)})}},iz=function(r,t){return typeof r=="function"?r(t):r.some(function(e){return e===t.field||e===t.id||e===t.valueField})},od=function(r){oe(t,r);function t(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=r.call(this,{})||this;return a.textShapes=[],a.conditionIconShapes=[],a.stateShapes=new Map,a.meta=e,a.spreadsheet=n,a.theme=n.theme,a.conditions=a.spreadsheet.options.conditions,a.groupedIcons={left:[],right:[]},a.handleRestOptions.apply(a,X([],F(i),!1)),a.shouldInit()&&a.initCell(),a}return t.prototype.handleRestOptions=function(){},t.prototype.getMeta=function(){return this.meta},t.prototype.setMeta=function(e){this.meta=e},t.prototype.getIconStyle=function(){var e;return(e=this.theme[this.cellType])===null||e===void 0?void 0:e.icon},t.prototype.isShallowRender=function(){return!1},t.prototype.getCellTextWordWrapStyle=function(e){var n,i,o=((i=(n=this.spreadsheet.options)===null||n===void 0?void 0:n.style)===null||i===void 0?void 0:i[e||this.cellType])||{},a=o.wordWrap,s=o.maxLines,l=o.textOverflow;return{wordWrap:a,maxLines:s,textOverflow:l}},t.prototype.getActualText=function(){return this.actualText},t.prototype.getActualTextWidth=function(){var e;return((e=this.textShape)===null||e===void 0?void 0:e.getComputedTextLength())||0},t.prototype.getActualTextHeight=function(){return this.getMultiLineActualTextHeight()},t.prototype.getMultiLineActualTexts=function(){var e,n;return((n=(e=this.textShape)===null||e===void 0?void 0:e.parsedStyle.metrics)===null||n===void 0?void 0:n.lines)||[]},t.prototype.getMultiLineActualTextWidth=function(){return Zo(this.getTextLineBoundingRects(),"width")||0},t.prototype.getMultiLineActualTextHeight=function(){return Zo(this.getTextLineBoundingRects(),"height")||0},t.prototype.getOriginalText=function(){return this.originalText},t.prototype.isTextOverflowing=function(){var e;return(e=this.textShape)===null||e===void 0?void 0:e.isOverflowing()},t.prototype.isMultiLineText=function(){return this.getTextLineBoundingRects().length>1},t.prototype.getEmptyPlaceholder=function(){var e=this.spreadsheet.options.placeholder;return d_(this,e)},t.prototype.getTextLineBoundingRects=function(){var e;return((e=this.textShape)===null||e===void 0?void 0:e.getLineBoundingRects())||[]},t.prototype.getFieldValue=function(){return this.getFormattedFieldValue().formattedValue},t.prototype.shouldInit=function(){var e=this.meta,n=e.width,i=e.height;return n>0&&i>0},t.prototype.getStyle=function(e){return ze(this.theme,e||this.cellType)},t.prototype.getLinkFieldShape=function(){return this.linkFieldShape},t.prototype.getBackgroundShape=function(){return this.backgroundShape},t.prototype.getStateShapes=function(){return this.stateShapes},t.prototype.getResizeAreaStyle=function(){return this.getStyle("resizeArea")},t.prototype.shouldDrawResizeAreaByType=function(e,n){var i=this.spreadsheet.options.interaction.resize;return Ii(i)?i:Un(i==null?void 0:i.visible)?i==null?void 0:i.visible(n):i==null?void 0:i[e]},t.prototype.getBBoxByType=function(e){e===void 0&&(e=_t.BORDER_BOX);var n={x:this.meta.x,y:this.meta.y,height:this.meta.height,width:this.meta.width},i=this.getStyle()||this.theme.dataCell;return _7(n,this.getBorderPositions(),i==null?void 0:i.cell,e)},t.prototype.drawBorders=function(){var e=this;this.getBorderPositions().forEach(function(n){var i,o=uv(n,e.getBBoxByType(),(i=e.getStyle())===null||i===void 0?void 0:i.cell),a=o.position,s=o.style;Xt(e,N(N({},a),s))})},t.prototype.drawInteractiveBorderShape=function(){this.stateShapes.set("interactiveBorderShape",uo(this,N(N({},this.getBBoxByType(_t.PADDING_BOX)),{visibility:"hidden",pointerEvents:"none"})))},t.prototype.drawInteractiveBgShape=function(){this.stateShapes.set("interactiveBgShape",uo(this,N(N({},this.getBBoxByType()),{visibility:"hidden",pointerEvents:"none"})))},t.prototype.drawBackgroundShape=function(){var e=this.getBackgroundColor(),n=e.backgroundColor,i=e.backgroundColorOpacity;this.backgroundShape=uo(this,N(N({},this.getBBoxByType()),{fill:n,fillOpacity:i}))},t.prototype.renderTextShape=function(e,n){var i=I7(e.text,this.getEmptyPlaceholder()),o=(n==null?void 0:n.shallowRender)||this.isShallowRender();if(this.textShape=m7({group:this,textShape:o?void 0:this.textShape,style:N(N({},e),{text:i})}),this.addTextShape(this.textShape),o)return this.textShape;var a=this.getMultiLineActualTexts().join("");return this.actualText=a,this.originalText=i,this.textShape},t.prototype.updateTextPosition=function(e){var n,i,o,a,s=this.getTextPosition();(n=this.textShape)===null||n===void 0||n.attr("x",(i=e==null?void 0:e.x)!==null&&i!==void 0?i:s==null?void 0:s.x),(o=this.textShape)===null||o===void 0||o.attr("y",(a=e==null?void 0:e.y)!==null&&a!==void 0?a:s==null?void 0:s.y)},t.prototype.drawTextShape=function(){var e=Math.max(this.getMaxTextWidth(),0),n=this.getTextStyle();this.renderTextShape(N(N({},n),{x:0,y:0,text:this.getFieldValue(),wordWrapWidth:e})),!this.isShallowRender()&&this.updateTextPosition()},t.prototype.drawLinkFieldShape=function(e,n){if(!!e){var i=this.spreadsheet.options.device;if(!Tt(i)){var o=this.getTextStyle(),a=this.getTextPosition(),s=this.getActualTextWidth(),l=a.x;o.textAlign==="center"?l-=s/2:o.textAlign==="right"&&(l-=s);var u=this.textShape.getBBox().bottom;this.linkFieldShape=Xt(this,{x1:l,y1:u+1,x2:l+s,y2:u+1,stroke:n,lineWidth:1})}this.textShape.style.fill=n,this.textShape.style.cursor="pointer",this.textShape.appendInfo={isLinkFieldText:!0,cellData:this.meta}}},t.prototype.getLinkFieldStyle=function(){return this.getTextStyle().linkTextFill},t.prototype.drawLinkField=function(e){var n=this.spreadsheet.options.interaction.linkFields,i=n===void 0?[]:n,o=this.getLinkFieldStyle(),a=iz(i,e);this.drawLinkFieldShape(a,o)},t.prototype.updateByState=function(e,n){var i=this;this.spreadsheet.interaction.setInteractedCells(n);var o=ze(this.theme,"".concat(this.cellType,".cell.interactionState.").concat(e));Me(o,function(a,s){var l=Hr(lH(I6,function(u){return Dr(u,s)}));l.forEach(function(u){var d=i.stateShapes.has(u),h=d?i.stateShapes.get(u):i[u],v=Ue(h)?h:[h];if(d&&v.forEach(function(g){g.setAttribute("visibility","visible")}),u==="interactiveBorderShape"&&s==="borderWidth"&&Br(a)){var p=i.getInteractiveBorderShapeStyle(a);Me(p,function(g,m){mn(v,m,g)})}mn(v,Qr[s],a)})})},t.prototype.getInteractiveBorderShapeStyle=function(e){var n=this.getBBoxByType(_t.PADDING_BOX),i=n.x,o=n.y,a=n.height,s=n.width,l=e/2;return{x:i+l,y:o+l,width:s-e,height:a-e}},t.prototype.hideInteractionShape=function(){this.stateShapes.forEach(function(e){mn(e,Qr.backgroundOpacity,0),mn(e,Qr.backgroundColor,"transparent"),mn(e,Qr.borderOpacity,0),mn(e,Qr.borderWidth,1),mn(e,Qr.borderColor,"transparent")})},t.prototype.clearUnselectedState=function(){mn(this.backgroundShape,Qr.backgroundOpacity,1),mn(this.textShapes,Qr.textOpacity,1),mn(this.linkFieldShape,Qr.opacity,1)},t.prototype.getTextShape=function(){return this.textShape},t.prototype.getTextShapes=function(){return this.textShapes||[this.textShape]},t.prototype.addTextShape=function(e){!e||this.textShapes.push(e)},t.prototype.getConditionIconShape=function(){return this.conditionIconShape},t.prototype.getConditionIconShapes=function(){return this.conditionIconShapes||[this.conditionIconShape]},t.prototype.addConditionIconShape=function(e){!e||this.conditionIconShapes.push(e)},t.prototype.resetTextAndConditionIconShapes=function(){this.textShapes=[],this.conditionIconShapes=[]},Object.defineProperty(t.prototype,"cellConditions",{get:function(){return this.conditions},enumerable:!1,configurable:!0}),t.prototype.drawConditionIconShapes=function(){var e=this.getIconConditionResult();if(e){var n=this.getIconPosition(),i=this.getStyle().icon.size;this.conditionIconShape=Ll(this,N(N({},n),{name:e==null?void 0:e.name,width:i,height:i,fill:e==null?void 0:e.fill})),this.addConditionIconShape(this.conditionIconShape)}},t.prototype.getTextConditionMappingResult=function(){var e,n=this.findFieldCondition((e=this.conditions)===null||e===void 0?void 0:e.text);return n!=null&&n.mapping?this.mappingValue(n):null},t.prototype.getContainConditionMappingResultTextStyle=function(e){var n=this.getDefaultTextFill(e.fill),i=this.getTextConditionMappingResult();return N(N(N({},e),i),{fill:(i==null?void 0:i.fill)||n})},t.prototype.getDefaultTextFill=function(e){var n=this.getBackgroundColor(),i=n.backgroundColor,o=n.intelligentReverseTextColor;return Zx(i)&&e===Yx&&o&&(e=ev),e||""},t.prototype.getBackgroundConditionFill=function(){var e,n=this.findFieldCondition((e=this.conditions)===null||e===void 0?void 0:e.background);if(n!=null&&n.mapping){var i=this.mappingValue(n);if(i)return{backgroundColor:i.fill,intelligentReverseTextColor:i.intelligentReverseTextColor||!1}}return{intelligentReverseTextColor:!1}},t.prototype.getIconConditionResult=function(){var e,n=this.findFieldCondition((e=this.conditions)===null||e===void 0?void 0:e.icon);if(n!=null&&n.mapping){var i=this.mappingValue(n);if(i&&i.icon)return{name:i.icon,position:Ip(n),fill:i.fill,isConditionIcon:!0}}},t.prototype.getActionAndConditionIconWidth=function(e){var n=this.groupedIcons,i=n.left,o=n.right,a=this.getStyle().icon;return e?$s(this.groupedIcons[e],a):$s(i,a)+$s(o,a)},t.prototype.getCrossBackgroundColor=function(e){var n=this.getStyle().cell,i=n.crossBackgroundColor,o=n.backgroundColorOpacity;return i&&e%2===0?{backgroundColorOpacity:o,backgroundColor:i}:{backgroundColorOpacity:o,backgroundColor:this.getStyle().cell.backgroundColor}},t}(ft),zn=function(){function r(t,e){this.raw=t,this.extraField=e}return r.getCellData=function(t,e){return new r(t,e)},r.getCellDataList=function(t,e){return e.map(function(n){return r.getCellData(t,n)})},r.getFieldValue=function(t,e){return e===void 0&&(e=""),t instanceof r?e?t.getValueByField(e):t[Hc]:t==null?void 0:t[e]},Object.defineProperty(r.prototype,Hc,{get:function(){return this.raw},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,Ae,{get:function(){return this.extraField},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,Bi,{get:function(){return this.raw[this.extraField]},enumerable:!1,configurable:!0}),r.prototype.getValueByField=function(t){return t===Bi||t===Ae?this[t]:this.raw[t]},r}(),Do=function(r,t){var e=t.getMeta().id;return r.some(function(n){return wr(n.id,e)})},Ml=function(r,t){return"".concat(r).concat(av).concat(t)},oz=function(r){var t=r.interaction.getSelectedCellHighlight(),e=t.currentRow,n=t.currentCol,i=t.rowHeader,o=t.colHeader;return e||n||i||o},Bp=function(r){return r.type===ie.DATA_CELL},az=function(r,t){Me(r,function(e){Bp(e)&&e.rowIndex===t.getMeta().rowIndex&&t.updateByState(ce.SELECTED)})},sz=function(r,t){Me(r,function(e){Bp(e)&&e.colIndex===t.getMeta().colIndex&&t.updateByState(ce.SELECTED)})},lz=function(r,t){Me(r,function(e){Bp(e)&&e.rowIndex===t.getMeta().rowIndex&&e.colIndex===t.getMeta().colIndex&&t.updateByState(ce.SELECTED)})},uz=function(r,t,e){var n,i=e.interaction.getSelectedCellHighlight(),o=i.rowHeader,a=i.colHeader,s=i.currentRow,l=i.currentCol,u=t.cellType===ie.ROW_CELL,d=e.isTableMode()&&((n=e.options.seriesNumber)===null||n===void 0?void 0:n.enable)&&o&&u;(s||d)&&az(r,t),l&&sz(r,t),(o||a)&&lz(r,t)},Qo=function(r){oe(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(t.prototype,"cellType",{get:function(){return ie.DATA_CELL},enumerable:!1,configurable:!0}),t.prototype.isMultiData=function(){var e=this.getFieldValue();return qt(e)},t.prototype.isChartData=function(){var e=this.getFieldValue();return ed(e==null?void 0:e.values)},t.prototype.getRenderChartData=function(){var e=this.meta.fieldValue;return e==null?void 0:e.values},t.prototype.getRenderChartOptions=function(){var e=this.getRenderChartData(),n=this.getBBoxByType(_t.CONTENT_BOX),i=this.spreadsheet.getThemeName();return N(N({autoFit:!0,theme:{type:E9[i]}},n),e)},t.prototype.getBorderPositions=function(){return[ot.BOTTOM,ot.RIGHT]},Object.defineProperty(t.prototype,"valueRangeByField",{get:function(){return this.spreadsheet.dataSet.getValueRangeByField(this.meta.valueField)},enumerable:!1,configurable:!0}),t.prototype.handleByStateName=function(e,n){Do(e,this)&&this.updateByState(n)},t.prototype.handleSearchResult=function(e){if(!!Do(e,this)){var n=$t(e,function(i){return i==null?void 0:i.isTarget});n.id===this.getMeta().id?this.updateByState(ce.HIGHLIGHT):this.updateByState(ce.SEARCH_RESULT)}},t.prototype.handleSelect=function(e){var n,i,o=(n=e==null?void 0:e[0])===null||n===void 0?void 0:n.type;switch(o){case ie.COL_CELL:this.changeRowColSelectState("colIndex");break;case ie.ROW_CELL:this.changeRowColSelectState("rowIndex");break;case ie.DATA_CELL:oz(this.spreadsheet)?uz(e,this,this.spreadsheet):Do(e,this)?this.updateByState(ce.SELECTED):!((i=this.spreadsheet.options.interaction)===null||i===void 0)&&i.selectedCellsSpotlight&&this.updateByState(ce.UNSELECTED);break}},t.prototype.isDisableHover=function(e){return e.type!==ie.DATA_CELL},t.prototype.handleHover=function(e){var n=Sl(e);if(this.isDisableHover(n)){this.hideInteractionShape();return}var i=this.spreadsheet.interaction.getHoverHighlight(),o=i.currentRow,a=i.currentCol;if(o||a){var s=this.meta.colIndex,l=this.meta.rowIndex;a&&s===(n==null?void 0:n.colIndex)||o&&l===(n==null?void 0:n.rowIndex)?this.updateByState(ce.HOVER):this.hideInteractionShape()}var u=this.getMeta(),d=u.id,h=u.rowIndex,v=u.colIndex;wr(n.id,d)&&wr(n.rowIndex,h)&&wr(n.colIndex,v)&&this.updateByState(ce.HOVER_FOCUS)},t.prototype.update=function(){var e=this.spreadsheet.interaction.getCurrentStateName(),n=this.spreadsheet.interaction.getCells();if(e===ce.ALL_SELECTED){this.updateByState(ce.SELECTED);return}if(!(se(n)||!e))switch(e){case ce.SELECTED:case ce.DATA_CELL_BRUSH_SELECTED:this.handleSelect(n);break;case ce.HOVER_FOCUS:case ce.HOVER:this.handleHover(n);break;case ce.SEARCH_RESULT:this.handleSearchResult(n);break;default:this.handleByStateName(n,e);break}},t.prototype.setMeta=function(e){r.prototype.setMeta.call(this,e),this.initCell()},t.prototype.drawTextShape=function(){r.prototype.drawTextShape.call(this),this.isShallowRender()||this.drawLinkField(this.meta)},t.prototype.initCell=function(){this.resetTextAndConditionIconShapes(),this.generateIconConfig(),this.drawBackgroundShape(),this.drawInteractiveBgShape(),this.shouldHideRowSubtotalData()||this.drawConditionIntervalShape(),this.shouldHideRowSubtotalData()||(this.drawTextShape(),this.drawConditionIconShapes()),this.drawBorders(),this.drawInteractiveBorderShape(),this.update()},t.prototype.generateIconConfig=function(){var e,n=this.findFieldCondition((e=this.conditions)===null||e===void 0?void 0:e.icon),i=n&&n.mapping&&{name:"",position:Ip(n)};this.groupedIcons=l_([],i)},t.prototype.getTextStyle=function(){var e=this.getCellTextWordWrapStyle(),n=this.meta.isTotals,i=this.theme.dataCell,o=n?i==null?void 0:i.bolderText:i==null?void 0:i.text;return this.getContainConditionMappingResultTextStyle(N(N({},e),o))},t.prototype.drawConditionIntervalShape=function(){this.conditionIntervalShape=R7(this)},t.prototype.shouldHideRowSubtotalData=function(){var e,n,i=this.meta,o=i.rowId,a=i.rowIndex,s=this.spreadsheet.store.get("drillDownIdPathMap");if(s!=null&&s.has(o))return!1;var l=((e=this.spreadsheet.options.totals)!==null&&e!==void 0?e:{}).row,u=l===void 0?{}:l,d=(n=this.spreadsheet.facet)===null||n===void 0?void 0:n.getRowLeafNodeByIndex(a),h=!(d!=null&&d.isGrandTotals)&&(d==null?void 0:d.isTotals);return this.spreadsheet.isHierarchyTreeType()&&!u.showSubTotals&&h},t.prototype.getFormattedFieldValue=function(){var e;if(this.shouldHideRowSubtotalData())return{value:null,formattedValue:xp};var n=this.meta,i=n.rowId,o=n.valueField,a=n.fieldValue,s=n.data,l=n.id,u=(e=this.spreadsheet.dataSet.displayFormattedValueMap)===null||e===void 0?void 0:e.get(l),d=this.spreadsheet.dataSet.getFieldMeta(i),h=d?i:o,v=this.spreadsheet.dataSet.getFieldFormatter(h),p=u!=null?u:v(a,s,this.meta);return{value:a,formattedValue:p}},t.prototype.getMaxTextWidth=function(){var e=this.getBBoxByType(_t.CONTENT_BOX).width;return e-this.getActionAndConditionIconWidth()},t.prototype.getTextPosition=function(){var e=this.getBBoxByType(_t.CONTENT_BOX),n=this.getTextStyle(),i=this.getIconStyle(),o=ss({bbox:e,iconStyle:i,textWidth:this.getActualTextWidth(),textAlign:n.textAlign,groupedIcons:this.groupedIcons}),a=o.textX,s=o.leftIconX,l=o.rightIconX,u=al(e,n.textBaseline),d=Rl(i.size,u,n.fontSize,n.textBaseline);return this.iconPosition={x:se(this.groupedIcons.left)?l:s,y:d},{x:a,y:u}},t.prototype.getIconPosition=function(){return this.iconPosition},t.prototype.getBackgroundColor=function(){var e=this.getCrossBackgroundColor(this.meta.rowIndex),n=e.backgroundColor,i=e.backgroundColorOpacity;return this.shouldHideRowSubtotalData()?{backgroundColor:n,backgroundColorOpacity:i,intelligentReverseTextColor:!1}:bl({backgroundColor:n,backgroundColorOpacity:i},this.getBackgroundConditionFill())},t.prototype.changeRowColSelectState=function(e){var n,i=this.spreadsheet.interaction,o=ze(this.meta,e),a=i.getState(),s=a.nodes,l=s===void 0?[]:s,u=a.cells,d=u===void 0?[]:u,h=!1;if(this.spreadsheet.isTableMode()&&l.length){var v=l[0].hierarchy.getLeaves();h=v.some(function(p,g){return l.some(function(m){return m===p})?g===o:!1})}else h=X(X([],F(l),!1),F(d),!1).some(function(p){return ze(p,e)===o});h?this.updateByState(ce.SELECTED):!((n=this.spreadsheet.options.interaction)===null||n===void 0)&&n.selectedCellsSpotlight?this.updateByState(ce.UNSELECTED):this.hideInteractionShape()},t.prototype.drawBorders=function(){},t.prototype.findFieldCondition=function(e){var n=this;return e===void 0&&(e=[]),vp(e,function(i){return i.field instanceof RegExp?i.field.test(n.meta.valueField):i.field===n.meta.valueField})},t.prototype.mappingValue=function(e){var n=this.meta.fieldValue,i=this.spreadsheet.isTableMode()?this.spreadsheet.dataSet.getCellData({query:{rowIndex:this.meta.rowIndex}}):zn.getFieldValue(this.meta.data);return e.mapping(n,i,this)},t.prototype.updateByState=function(e){if(r.prototype.updateByState.call(this,e,this),e===ce.UNSELECTED){var n=ze(this.theme,"".concat(this.cellType,".cell.interactionState.").concat(e));n&&this.toggleConditionIntervalShapeOpacity(n.opacity)}},t.prototype.clearUnselectedState=function(){r.prototype.clearUnselectedState.call(this),this.toggleConditionIntervalShapeOpacity(1)},t.prototype.toggleConditionIntervalShapeOpacity=function(e){mn(this.conditionIntervalShape,Qr.backgroundOpacity,e),mn(this.conditionIconShapes,Qr.opacity,e)},t}(od),Dp=function(r){oe(t,r);function t(e,n,i){return r.call(this,i,e,n)||this}return Object.defineProperty(t.prototype,"cellType",{get:function(){return ie.MERGED_CELL},enumerable:!1,configurable:!0}),t.prototype.handleRestOptions=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var i=F(e,1),o=i[0];this.cells=o},t.prototype.update=function(){},t.prototype.initCell=function(){this.resetTextAndConditionIconShapes(),this.drawBackgroundShape(),this.drawTextShape(),this.drawBorders()},t.prototype.drawBackgroundShape=function(){var e=cz(this.cells),n=this.theme.dataCell.cell;this.backgroundShape=g7(this,{points:e,fill:n.backgroundColor})},t.prototype.drawTextShape=function(){if(!se(this.meta)){if(this.isMultiData())return D7(this);r.prototype.drawTextShape.call(this)}},t.prototype.drawBorders=function(){var e=this,n=vz(this.cells),i=n.right,o=n.bottom,a=n.bottomRightCornerCell;i.forEach(function(s){var l,u=uv(ot.RIGHT,s.getBBoxByType(),(l=s.getStyle())===null||l===void 0?void 0:l.cell),d=u.position,h=u.style;Xt(e,N(N({},d),h))}),o.forEach(function(s){var l,u=uv(ot.BOTTOM,s.getBBoxByType(),(l=s.getStyle())===null||l===void 0?void 0:l.cell),d=u.position,h=u.style;Xt(e,N(N({},d),h))}),a.forEach(function(s){var l,u=s.getBBoxByType(),d=u.x,h=u.y,v=u.width,p=u.height,g=(l=s.getStyle())===null||l===void 0?void 0:l.cell,m=g.horizontalBorderWidth,C=m===void 0?0:m,w=g.verticalBorderWidth,_=w===void 0?0:w,S=g.verticalBorderColor,b=d+v-_/2,T=b,E=h+p-C,R=h+p;Xt(e,{x1:b,x2:T,y1:E,y2:R,lineWidth:_,stroke:S,strokeOpacity:_})})},t}(Qo),fz=function(r,t,e,n){var i=[r,t],o=[r+e,t],a=[r+e,t+n],s=[r,t+n];return[[i,o],[o,a],[a,s],[s,i]]},dz=function(r){var t=[];return Me(r,function(e){var n=[e[1],e[0]];JSON.stringify(r).includes(JSON.stringify(n))||t.push(e)}),t},hz=function(r,t){return $t(t,function(e){return wr(e[0],r[1])})},cz=function(r){var t=[];r.forEach(function(a){var s=a.getMeta(),l=s.x,u=s.y,d=s.width,h=s.height;t=t.concat(fz(l,u,d,h))}),t=dz(t);for(var e=[],n=t[0],i=n,o=[];!wr(n,o);)e=e.concat(i),o=hz(i,t),i=o;return e},vz=function(r){var t=[],e=[],n=[];return r.forEach(function(i){var o=F(i.position||[],2),a=o[0],s=o[1];$t(r,function(l){var u,d;return((u=l.position)===null||u===void 0?void 0:u[0])===a+1&&((d=l.position)===null||d===void 0?void 0:d[1])===s})||e.push(i),$t(r,function(l){var u,d;return((u=l.position)===null||u===void 0?void 0:u[1])===s+1&&((d=l.position)===null||d===void 0?void 0:d[0])===a})||t.push(i)}),t.forEach(function(i){var o=F(i.position||[],2),a=o[0],s=o[1],l=$t(r,function(u){var d,h;return((d=u.position)===null||d===void 0?void 0:d[0])===a-1&&((h=u.position)===null||h===void 0?void 0:h[1])===s});l&&!Dr(t,l)&&n.push(l)}),{bottom:e,right:t,bottomRightCornerCell:n}},pz=function(r,t){var e=[],n;return Me(r,function(i){var o,a,s,l=(o=t==null?void 0:t.facet)===null||o===void 0?void 0:o.getCellMeta(i.rowIndex,i.colIndex);if(l){var u=(s=(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.dataCell)===null||s===void 0?void 0:s.call(a,l);n=i!=null&&i.showText?l:n,e.push(u)}}),{cells:e,cellsMeta:n}},gz=function(r,t){var e=[],n=[],i;return Me(r,function(o){var a=$t(t,function(s){var l,u=(l=s==null?void 0:s.getMeta)===null||l===void 0?void 0:l.call(s);if((u==null?void 0:u.colIndex)===(o==null?void 0:o.colIndex)&&(u==null?void 0:u.rowIndex)===(o==null?void 0:o.rowIndex))return s});a?(e.push(a),i=o!=null&&o.showText?a==null?void 0:a.getMeta():i):n.push(o)}),{cells:e,invisibleCellInfo:n,cellsMeta:i}},S_=function(r,t,e){var n;e===void 0&&(e=[]);var i=gz(e,r),o=i.cellsMeta,a=i.cells,s=i.invisibleCellInfo,l=o,u=a,d=(s==null?void 0:s.length)>0&&s.length<e.length;if(d){var h=pz(s,t),v=h.cells,p=h.cellsMeta;l=l||p,u=a.concat(v)}return!se(a)&&!l&&(l=(n=u[0])===null||n===void 0?void 0:n.getMeta()),{cells:u,viewMeta:l}},yz=function(r){var t=r.interaction,e=t.getActiveCells(),n=[];return Me(e,function(i,o){var a=i.getMeta(),s=o===0?{showText:!0}:{};n.push(N(N({},s),{colIndex:a==null?void 0:a.colIndex,rowIndex:a==null?void 0:a.rowIndex}))}),n},T_=function(r,t,e){return r.options.mergedCell?r.options.mergedCell(r,t,e):new Dp(r,t,e)},mz=function(r,t,e){var n,i=t||yz(r);if((i==null?void 0:i.length)<=1){console.error("then merged cells must be more than one");return}var o=r.facet.getDataCells(),a=S_(o,r,i),s=a.cells,l=a.viewMeta;if(!se(s)){var u=((n=r.options)===null||n===void 0?void 0:n.mergedCellsInfo)||[];u.push(i),r.setOptions({mergedCellsInfo:u});var d=e?void 0:l;r.facet.panelScrollGroup.addMergeCell(T_(r,s,d))}},Cz=function(r,t){var e=De(r.cells,function(n){return{colIndex:n.getMeta().colIndex,rowIndex:n.getMeta().rowIndex}});return Vn(t,function(n){var i=n.map(function(o){return o.showText?{colIndex:o.colIndex,rowIndex:o.rowIndex}:o});return!wr(i,e)})},wz=function(r,t){var e,n,i;if(!t||t.cellType!==ie.MERGED_CELL){console.error("unmergeCell: the ".concat(t," is not a MergedCell"));return}var o=Cz(t,((e=r.options)===null||e===void 0?void 0:e.mergedCellsInfo)||[]);(o==null?void 0:o.length)!==((i=(n=r.options)===null||n===void 0?void 0:n.mergedCellsInfo)===null||i===void 0?void 0:i.length)&&(r.setOptions({mergedCellsInfo:o}),t.remove())},xz=function(r){return De(r,function(t){return{cells:t.cells,viewMeta:t.getMeta()}})},Pm=function(r,t){return ck(r,t,function(e,n){return wr(e.viewMeta.id,n.viewMeta.id)})},_z=function(r,t){var e,n=(e=r.options)===null||e===void 0?void 0:e.mergedCellsInfo;if(!se(n)){var i=r.facet.getDataCells();if(!se(i)){var o=[];n.forEach(function(d){var h=S_(i,r,d);h.cells.length>0&&o.push(h)});var a=t.children,s=xz(a),l=Pm(s,o),u=Pm(o,s);Me(l,function(d){var h=$t(a,function(v){return wr(v.getMeta().id,d.viewMeta.id)});h==null||h.remove()}),Me(u,function(d){var h=d.cells,v=d.viewMeta;t.appendChild(T_(r,h,v))})}}},ni;(function(r){r[r.Start=0]="Start",r[r.Center=1]="Center",r[r.End=2]="End"})(ni||(ni={}));var Fp=function(r){return["left","top"].includes(r)?ni.Start:["center","middle"].includes(r)?ni.Center:ni.End},kp=function(r,t,e){var n=e.align,i=e.size,o=e.padding,a=i.textSize,s=i.iconStartSize,l=s===void 0?0:s,u=i.iconEndSize,d=u===void 0?0:u,h=o.betweenTextAndEndIcon,v=h===void 0?0:h;v=d?v:0;var p=a+l+d,g={start:t.start-o.start,size:t.size+o.start+o.end},m=g.start+g.size,C=t.start+t.size,w=r.start+r.size;function _(O){switch(n){case ni.Start:return{iconStart:O.start,textStart:O.start+l,iconEnd:O.start+l+a+v};case ni.Center:var A=O.start+O.size/2-p/2;return{iconStart:A,textStart:A+l+a/2,iconEnd:A+l+a+v};default:var P=O.start+O.size;return{iconStart:P-d-a-l,textStart:P-d,iconEnd:P-d+v}}}if(g.start>=r.start&&m<=w)return _(t);if(g.start<r.start&&m<=w){var S={start:r.start+(n!==ni.End?o.start:0),size:t.size-(r.start-t.start)-(n!==ni.End?o.start:0)};return S.size<p&&(S.size=p,S.start=C-p),_(S)}if(g.start>=r.start&&m>w){var b={start:t.start,size:t.size-(C-w)-(n!==ni.Start?o.end:0)};return b.size<p&&(b.size=p,b.start=t.start),_(b)}var T={start:r.start+o.start,size:r.size-o.start-o.end};if(T.size<p){var E=t.start+t.size/2-p/2,R=E+p;E>T.start||(R>T.start+T.size?T.start=E:T.start-=p-T.size),T.size=p}return _(T)},sl=function(r,t){return t>0&&r<t},ll=function(r,t,e){return t>0&&r>=e-t},ad=function(r,t,e){return e>0&&r<t+e},Ol=function(r,t,e){return e>0&&r>=t+1-e},b_=function(r){var t=r.scrollX,e=r.scrollY,n=r.widths,i=r.heights,o=r.viewport,a=r.rowRemainWidth,s=rl(n,function(v,p){var g=t-(Lt(a)?0:a)+o.x;return g>=v&&g<n[p+1]},0);s=Math.max(s,0);var l=rl(n,function(v,p){var g=o.width+t+o.x;return g>=v&&g<n[p+1]},s);l=Math.min(l===-1?1/0:l,n.length-2);var u=i.getIndexRange(e+o.y,o.height+e+o.y),d=u.start,h=u.end;return[s,l,d,h]},Ez=function(r,t,e){var n=2,i=Math.abs(r/t),o=i<=1/n?0:r,a=i>n?0:t;return[o*e.horizontal,a*e.vertical]},Pn=function(r,t,e){if(r){var n=F(r.getPosition(),2),i=n[0],o=n[1];r.translate(t-i,e-o)}},Mf=function(r,t){if(r){var e=F(r.getPosition(),1),n=e[0];r.translate(t-n,0)}},Sz=function(r,t,e,n){var i=t.colCount,o=i===void 0?0:i,a=t.rowCount,s=a===void 0?0:a,l=t.trailingColCount,u=l===void 0?0:l,d=t.trailingRowCount,h=d===void 0?0:d,v=r.colIndex,p=r.rowIndex;return ad(p,n.start,s)?Ot.ROW:Ol(p,n.end,h)?Ot.TRAILING_ROW:sl(v,o)?Ot.COL:ll(v,u,e)?Ot.TRAILING_COL:Ot.SCROLL},Tz=function(r,t,e){for(var n,i=r.colCount,o=i===void 0?0:i,a=r.rowCount,s=a===void 0?0:a,l=r.trailingColCount,u=l===void 0?0:l,d=r.trailingRowCount,h=d===void 0?0:d,v=(n={},n[Ot.TOP]=[],n[Ot.BOTTOM]=[],n),p=0;p<o;p++){for(var g=e.start;g<e.start+s;g++)v[Ot.TOP].push({x:p,y:g});if(h>0)for(var g=0;g<h;g++){var m=e.end-g;v[Ot.BOTTOM].push({x:p,y:m})}}for(var p=0;p<u;p++){for(var C=t-1-p,g=e.start;g<e.start+s;g++)v[Ot.TOP].push({x:C,y:g});if(h>0)for(var g=0;g<h;g++){var m=e.end-g;v[Ot.BOTTOM].push({x:C,y:m})}}return v},bz=function(r,t,e,n){var i=t.colCount,o=i===void 0?0:i,a=t.rowCount,s=a===void 0?0:a,l=t.trailingColCount,u=l===void 0?0:l,d=t.trailingRowCount,h=d===void 0?0:d,v=X([],F(r),!1);sl(v[0],o)&&(v[0]=o),ll(v[1],u,e)&&(v[1]=e-u-1),ad(v[2],n.start,s)&&(v[2]=n.start+s),Ol(v[3],n.end,h)&&(v[3]=n.end-h);var p=X([],F(v),!1);p[2]=n.start,p[3]=n.start+s-1;var g=X([],F(v),!1);g[0]=0,g[1]=o-1;var m=X([],F(v),!1);m[2]=n.end+1-h,m[3]=n.end;var C=X([],F(v),!1);return C[0]=e-u,C[1]=e-1,{center:v,frozenRow:p,frozenCol:g,frozenTrailingCol:C,frozenTrailingRow:m}},Lz=function(r,t){var e=r,n=0,i=e.getTotalLength()-1;if(t){var o=t.current,a=o===void 0?ov:o,s=t.pageSize;n=Math.max((a-1)*s,0),i=Math.min(a*s-1,e.getTotalLength()-1)}return{start:n,end:i}},Of=function(r,t,e){var n=function(i){return i.isLeaf?1:i.children?i.children.reduce(function(o,a){return o+=n(a),o},0):0};return t&&(t=r.slice(0,t).reduce(function(i,o){return i+=n(o),i},0)),e&&(e=r.slice(r.length-e).reduce(function(i,o){return i+=n(o),i},0)),{colCount:t,trailingColCount:e}},Rz=function(r){var t=[],e=function(n){n.forEach(function(i){typeof i=="string"||!i.children?t.push(i):e(i.children)})};return e(r),t},Il=function(r){r===void 0&&(r=[]);var t=Rz(r);return t.map(function(e){return typeof e=="string"?e:e.field})},L_=function(r){var t=r.children[0];return t?t.isLeaf?t:L_(t):r},Mz=function(r){return se(r.rows)&&se(r.columns)&&se(r.values)},R_=function(r,t){var e,n=r.pagination,i=r.frozen,o=r.hierarchyType,a=r.seriesNumber,s=n&&n.pageSize,l=!1,u=t==null?void 0:t[0];if(!s&&!(a!=null&&a.enable)&&(i==null?void 0:i.firstRow)){var d=o==="tree";l=d||((e=u==null?void 0:u.children)===null||e===void 0?void 0:e.length)===0}var h=l&&!!u;return{rowCount:h?1:0,colCount:0,trailingColCount:0,trailingRowCount:0,firstRow:l,rowHeight:h?u.height:0}},sd=function(r){oe(t,r);function t(e){var n=r.call(this)||this;return n.isHeaderCellInViewport=function(i){var o=i.cellPosition,a=i.cellSize,s=i.viewportPosition,l=i.viewportSize;return o+a>=s&&s+l>=o},n.headerConfig=e,n}return t.prototype.getHeaderConfig=function(){return this.headerConfig||{}},t.prototype.clearResizeAreaGroup=function(e){var n=this.parentNode,i=n==null?void 0:n.getElementById(e);i==null||i.removeChildren()},t.prototype.render=function(e){this.clearResizeAreaGroup(e),this.clear(),this.layout(),this.offset(),this.clip()},t.prototype.onScrollXY=function(e,n,i){this.headerConfig.scrollX=e,this.headerConfig.scrollY=n,this.render(i)},t.prototype.onRowScrollX=function(e,n){this.headerConfig.scrollX=e,this.render(n)},t.prototype.clear=function(){r.prototype.removeChildren.call(this)},t}(ft),M_=function(r){oe(t,r);function t(e){var n=r.call(this,e)||this;return n.initScrollGroup(),n}return t.prototype.getCellInstance=function(e){var n=this.getHeaderConfig(),i=this.getHeaderConfig().spreadsheet,o=i.options.colCell;return(o==null?void 0:o(e,i,n))||new hl(e,i,n)},t.prototype.initScrollGroup=function(){this.scrollGroup=this.appendChild(new ft({name:x6,style:{zIndex:zx}}))},t.prototype.onColScroll=function(e,n){this.headerConfig.scrollX!==e&&(this.headerConfig.scrollX=e,this.render(n))},t.prototype.clip=function(){var e=this.getHeaderConfig(),n=e.height,i=e.width,o=e.spreadsheet,a=e.position,s=o.isFrozenRowHeader();this.scrollGroup.style.clipPath=new wt({style:{x:s?a.x:0,y:s?a.y:0,width:s?i:a.x+i,height:n}})},t.prototype.clear=function(){var e;(e=this.scrollGroup)===null||e===void 0||e.removeChildren()},t.prototype.getCellGroup=function(e){return this.scrollGroup},t.prototype.isColCellInRect=function(e){var n=this.getHeaderConfig(),i=n.spreadsheet,o=n.cornerWidth,a=n.width,s=n.scrollX,l=s===void 0?0:s;return a+l>e.x&&l-(i.isFrozenRowHeader()?0:o)<e.x+e.width},t.prototype.layout=function(){var e=this,n=this.getHeaderConfig(),i=n.nodes,o=n.spreadsheet;Me(i,function(a){if(e.isColCellInRect(a)){var s=e.getCellGroup(a);a.isFrozen=s!==e.scrollGroup;var l=e.getCellInstance(a);a.belongsCell=l,s==null||s.appendChild(l),o.emit(U.COL_CELL_RENDER,l),o.emit(U.LAYOUT_CELL_RENDER,l)}})},t.prototype.offset=function(){var e=this.getHeaderConfig(),n=e.position,i=e.scrollX,o=i===void 0?0:i;Mf(this.scrollGroup,n.x-o)},t}(sd),ul=function(r){var t=r.type,e=r.theme,n=r.width,i=r.height,o=_r(r,["type","theme","width","height"]),a=t===sr.Horizontal?e.size:void 0,s=t===sr.Vertical?e.size:void 0;return{style:{fill:e.background,fillOpacity:e.backgroundOpacity,cursor:"".concat(t,"-resize"),width:a,height:s},appendInfo:N(N({},o),{isResizeArea:!0,type:t,width:n,height:i,size:e.size})}},Ho=function(r,t){var e;if(!!(!((e=r.facet)===null||e===void 0)&&e.foregroundGroup)){var n=r.facet.foregroundGroup.getElementById(t);return n||r.facet.foregroundGroup.appendChild(new ft({id:t,style:{zIndex:i6}}))}},Al=function(r,t,e){var n=e!=null?e:{},i=n.scrollX,o=i===void 0?0:i,a=n.scrollY,s=a===void 0?0:a,l=!(r.x-o>t.x+t.width||r.x+r.width-o<t.x),u=!(r.y-s>t.y+t.height||r.y+r.height-s<t.y);return l&&u};function If(r){return r===void 0&&(r=[]),r.filter(function(t){return t!==Ae})}function fl(r){return r===Ju}function Po(r,t,e){return r===void 0&&(r={}),t===void 0&&(t=[]),e===void 0&&(e=Di),t.reduce(function(n,i){var o=r[i];return i in r?n.push(String(o)):n.push(e),n},[])}function O_(r,t){var e=t.filter(function(n){return n in r});return se(e)&&e.push(Xv),e}function Bm(r,t,e){r===void 0&&(r={}),t===void 0&&(t=[]);var n=[];function i(o,a,s){return a.reduce(function(l,u){var d=o[u];return u in o?l.push(String(d)):u===Ae&&s?l.push(s):l.push(Di),l},[])}return e?e.forEach(function(o){n.push(i(r,t,o))}):n.push(i(r,t)),n}function Oz(r,t,e){var n;t===void 0&&(t=[]);var i=t.slice(0,t.indexOf(r)+1);return(n=e.map(function(o){return i.map(function(a){return o.getValueByField(a)}).join("".concat(xr))}))===null||n===void 0?void 0:n.filter(Boolean)}function Af(r,t){return r.concat(t).filter(function(e){return e!==Ae}).join(xr)}function Nf(r){var t=r.rowDimensionValues,e=r.colDimensionValues,n=r.isFirstCreate,i=r.onFirstCreate,o=r.rowFields,a=r.colFields,s=r.rowPivotMeta,l=r.colPivotMeta,u=r.prefix,d=u===void 0?"":u,h=function(g,m,C,w){for(var _=C,S=[],b=0;b<m.length;b++){var T=m[b];if(n&&_&&!(_!=null&&_.has(T))){var E=m.slice(0,b+1).map(function(k){return String(k)}),R=E.join(xr),O=T===Di,A=void 0;O?A=0:_.has(Di)?A=_.size:A=_.size+1,_.set(T,{id:R,dimensions:E,value:T,level:A,children:new Map}),i==null||i({dimension:g==null?void 0:g[b],dimensionPath:R,careRepeated:w})}var P=_==null?void 0:_.get(T);if(S.push(fl(T)?T:P==null?void 0:P.level),P){var D=g==null?void 0:g[b+1];n&&P.childField!==D&&(P.childField=D),_=P==null?void 0:P.children}}return S},v=h(o,t,s,!1),p=h(a,e,l,!0);return X(X([d],F(v),!1),F(p),!1)}function Iz(r){var t=r.rows,e=r.columns,n=r.values,i=r.valueInCols,o=r.data,a=o===void 0?[]:o,s=r.indexesData,l=s===void 0?{}:s,u=r.sortedDimensionValues,d=r.rowPivotMeta,h=r.colPivotMeta,v=r.getExistValuesByDataItem,p=[],g=new Set(Vk(t,e)),m=function(w){var _=w.dimension,S=w.dimensionPath,b=w.careRepeated,T=b===void 0?!0:b;T&&g.has(_)||(u[_]||(u[_]=[])).push(S)},C=Af(t,e);return a.forEach(function(w){var _,S,b,T;if(!(!w||se(w))){var E=v?v(w,n):O_(w,n),R=Bm(w,t,i?null:E),O=Bm(w,e,i?E:null);try{for(var A=Qt(R),P=A.next();!P.done;P=A.next()){var D=P.value;try{for(var k=(b=void 0,Qt(O)),z=k.next();!z.done;z=k.next()){var V=z.value,Z=Nf({rowDimensionValues:D,colDimensionValues:V,rowPivotMeta:d,colPivotMeta:h,rowFields:t,colFields:e,isFirstCreate:!0,onFirstCreate:m,prefix:C});p.push(Z),Zc(l,Z,w)}}catch(Q){b={error:Q}}finally{try{z&&!z.done&&(T=k.return)&&T.call(k)}finally{if(b)throw b.error}}}}catch(Q){_={error:Q}}finally{try{P&&!P.done&&(S=A.return)&&S.call(A)}finally{if(_)throw _.error}}}}),{paths:p,indexesData:l,rowPivotMeta:d,colPivotMeta:h,sortedDimensionValues:u}}function Dm(r,t){if(!(!r||!t)){var e=t.split(xr),n=It(e),i=r;Me(e,function(o,a){var s=i.get(o);return s?(o===n?(s.children=new Map,s.childField=void 0):i=s.children,!0):a===0&&o===Xs})}}function Az(r,t,e){var n=function(a){var s=$t(r,function(l){var u=l.field;return u===a});return ze(s,"name",a)},i=t||e,o={field:Ae,name:i,formatter:function(a){return n(a)}};return o}function Nz(r,t){return{isRowGrandTotal:r.isGrandTotals,isRowSubTotal:r.isSubTotals,isColGrandTotal:t.isGrandTotals,isColSubTotal:t.isSubTotals}}function Pz(r){for(var t=null,e=0;e<r.length;e++){var n=r[e];if(fl(n))t=e;else if(!xx(t)&&t<e)return!0}return!1}function I_(r){var t=r.pivotMeta,e=r.dimensionValues,n=r.fieldIdx,i=r.queryType,o=r.fields,a=r.sortedDimensionValues,s={children:t},l=[s];function u(v,p){var g,m=Tl(v,function(_){var S,b,T=[];try{for(var E=Qt(_.children.values()),R=E.next();!R.done;R=E.next()){var O=R.value;O.value!==Xv&&(i===hi.All?!0:O.value!==Di)&&T.push(O)}}catch(A){S={error:A}}finally{try{R&&!R.done&&(b=E.return)&&b.call(E)}finally{if(S)throw S.error}}return T});if(v.length>1){var C=(g=a[p])!==null&&g!==void 0?g:[],w=new Map(C.map(function(_,S){return[_,S]}));return m.sort(function(_,S){var b,T;return((b=w.get(_.id))!==null&&b!==void 0?b:0)-((T=w.get(S.id))!==null&&T!==void 0?T:0)}),m}return m}for(var d=function(v){var p=e[v],g=o[v];fl(p)?l=u(l,g):l=l.map(function(m){return m.children.get(p)}).filter(Boolean)},h=0;h<=n;h++)d(h);return l}function Fm(r){var t=r.dimensionValues,e=r.pivotMeta,n=r.fields,i=r.sortedDimensionValues,o=r.queryType,a=o===void 0?hi.All:o;if(!Pz(t))return[t];var s=I_({pivotMeta:e,dimensionValues:t,fieldIdx:t.length-1,queryType:a,fields:n,sortedDimensionValues:i});return s.map(function(l){return l.dimensions})}function Bz(r){var t=r.rowFields,e=r.rowDimensionValues,n=r.rowPivotMeta,i=r.colFields,o=r.colDimensionValues,a=r.colPivotMeta,s=r.queryType,l=r.sortedDimensionValues,u=Fm({dimensionValues:e,pivotMeta:n,fields:t,sortedDimensionValues:l,queryType:s}),d=Fm({dimensionValues:o,pivotMeta:a,fields:i,sortedDimensionValues:l,queryType:s});return{rowQueries:u,colQueries:d}}function Dz(r,t){return r?Ue(r)?Tl(r,function(e){if(!Ue(e))return Hn([e]);var n=t===hi.DetailOnly?1:0;return Hn(e.slice(n))}):Hn([r]):[]}/*!
 *  decimal.js v10.4.3
 *  An arbitrary-precision Decimal type for JavaScript.
 *  https://github.com/MikeMcl/decimal.js
 *  Copyright (c) 2022 Michael Mclaughlin <M8ch88l@gmail.com>
 *  MIT Licence
 */var Ba=9e15,mo=1e9,dv="0123456789abcdef",Pf="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",Bf="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",hv={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-Ba,maxE:Ba,crypto:!1},A_,Ai,Te=!0,ld="[DecimalError] ",vo=ld+"Invalid argument: ",N_=ld+"Precision limit exceeded",P_=ld+"crypto unavailable",B_="[object Decimal]",fr=Math.floor,Dt=Math.pow,Fz=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,kz=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,Hz=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,D_=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Gn=1e7,we=7,zz=9007199254740991,Gz=Pf.length-1,cv=Bf.length-1,re={toStringTag:B_};re.absoluteValue=re.abs=function(){var r=new this.constructor(this);return r.s<0&&(r.s=1),ye(r)};re.ceil=function(){return ye(new this.constructor(this),this.e+1,2)};re.clampedTo=re.clamp=function(r,t){var e,n=this,i=n.constructor;if(r=new i(r),t=new i(t),!r.s||!t.s)return new i(NaN);if(r.gt(t))throw Error(vo+t);return e=n.cmp(r),e<0?r:n.cmp(t)>0?t:new i(n)};re.comparedTo=re.cmp=function(r){var t,e,n,i,o=this,a=o.d,s=(r=new o.constructor(r)).d,l=o.s,u=r.s;if(!a||!s)return!l||!u?NaN:l!==u?l:a===s?0:!a^l<0?1:-1;if(!a[0]||!s[0])return a[0]?l:s[0]?-u:0;if(l!==u)return l;if(o.e!==r.e)return o.e>r.e^l<0?1:-1;for(n=a.length,i=s.length,t=0,e=n<i?n:i;t<e;++t)if(a[t]!==s[t])return a[t]>s[t]^l<0?1:-1;return n===i?0:n>i^l<0?1:-1};re.cosine=re.cos=function(){var r,t,e=this,n=e.constructor;return e.d?e.d[0]?(r=n.precision,t=n.rounding,n.precision=r+Math.max(e.e,e.sd())+we,n.rounding=1,e=Wz(n,G_(n,e)),n.precision=r,n.rounding=t,ye(Ai==2||Ai==3?e.neg():e,r,t,!0)):new n(1):new n(NaN)};re.cubeRoot=re.cbrt=function(){var r,t,e,n,i,o,a,s,l,u,d=this,h=d.constructor;if(!d.isFinite()||d.isZero())return new h(d);for(Te=!1,o=d.s*Dt(d.s*d,1/3),!o||Math.abs(o)==1/0?(e=Jt(d.d),r=d.e,(o=(r-e.length+1)%3)&&(e+=o==1||o==-2?"0":"00"),o=Dt(e,1/3),r=fr((r+1)/3)-(r%3==(r<0?-1:2)),o==1/0?e="5e"+r:(e=o.toExponential(),e=e.slice(0,e.indexOf("e")+1)+r),n=new h(e),n.s=d.s):n=new h(o.toString()),a=(r=h.precision)+3;;)if(s=n,l=s.times(s).times(s),u=l.plus(d),n=at(u.plus(d).times(s),u.plus(l),a+2,1),Jt(s.d).slice(0,a)===(e=Jt(n.d)).slice(0,a))if(e=e.slice(a-3,a+1),e=="9999"||!i&&e=="4999"){if(!i&&(ye(s,r+1,0),s.times(s).times(s).eq(d))){n=s;break}a+=4,i=1}else{(!+e||!+e.slice(1)&&e.charAt(0)=="5")&&(ye(n,r+1,1),t=!n.times(n).times(n).eq(d));break}return Te=!0,ye(n,r,h.rounding,t)};re.decimalPlaces=re.dp=function(){var r,t=this.d,e=NaN;if(t){if(r=t.length-1,e=(r-fr(this.e/we))*we,r=t[r],r)for(;r%10==0;r/=10)e--;e<0&&(e=0)}return e};re.dividedBy=re.div=function(r){return at(this,new this.constructor(r))};re.dividedToIntegerBy=re.divToInt=function(r){var t=this,e=t.constructor;return ye(at(t,new e(r),0,1,1),e.precision,e.rounding)};re.equals=re.eq=function(r){return this.cmp(r)===0};re.floor=function(){return ye(new this.constructor(this),this.e+1,3)};re.greaterThan=re.gt=function(r){return this.cmp(r)>0};re.greaterThanOrEqualTo=re.gte=function(r){var t=this.cmp(r);return t==1||t===0};re.hyperbolicCosine=re.cosh=function(){var r,t,e,n,i,o=this,a=o.constructor,s=new a(1);if(!o.isFinite())return new a(o.s?1/0:NaN);if(o.isZero())return s;e=a.precision,n=a.rounding,a.precision=e+Math.max(o.e,o.sd())+4,a.rounding=1,i=o.d.length,i<32?(r=Math.ceil(i/3),t=(1/fd(4,r)).toString()):(r=16,t="2.3283064365386962890625e-10"),o=ts(a,1,o.times(t),new a(1),!0);for(var l,u=r,d=new a(8);u--;)l=o.times(o),o=s.minus(l.times(d.minus(l.times(d))));return ye(o,a.precision=e,a.rounding=n,!0)};re.hyperbolicSine=re.sinh=function(){var r,t,e,n,i=this,o=i.constructor;if(!i.isFinite()||i.isZero())return new o(i);if(t=o.precision,e=o.rounding,o.precision=t+Math.max(i.e,i.sd())+4,o.rounding=1,n=i.d.length,n<3)i=ts(o,2,i,i,!0);else{r=1.4*Math.sqrt(n),r=r>16?16:r|0,i=i.times(1/fd(5,r)),i=ts(o,2,i,i,!0);for(var a,s=new o(5),l=new o(16),u=new o(20);r--;)a=i.times(i),i=i.times(s.plus(a.times(l.times(a).plus(u))))}return o.precision=t,o.rounding=e,ye(i,t,e,!0)};re.hyperbolicTangent=re.tanh=function(){var r,t,e=this,n=e.constructor;return e.isFinite()?e.isZero()?new n(e):(r=n.precision,t=n.rounding,n.precision=r+7,n.rounding=1,at(e.sinh(),e.cosh(),n.precision=r,n.rounding=t)):new n(e.s)};re.inverseCosine=re.acos=function(){var r,t=this,e=t.constructor,n=t.abs().cmp(1),i=e.precision,o=e.rounding;return n!==-1?n===0?t.isNeg()?Fn(e,i,o):new e(0):new e(NaN):t.isZero()?Fn(e,i+4,o).times(.5):(e.precision=i+6,e.rounding=1,t=t.asin(),r=Fn(e,i+4,o).times(.5),e.precision=i,e.rounding=o,r.minus(t))};re.inverseHyperbolicCosine=re.acosh=function(){var r,t,e=this,n=e.constructor;return e.lte(1)?new n(e.eq(1)?0:NaN):e.isFinite()?(r=n.precision,t=n.rounding,n.precision=r+Math.max(Math.abs(e.e),e.sd())+4,n.rounding=1,Te=!1,e=e.times(e).minus(1).sqrt().plus(e),Te=!0,n.precision=r,n.rounding=t,e.ln()):new n(e)};re.inverseHyperbolicSine=re.asinh=function(){var r,t,e=this,n=e.constructor;return!e.isFinite()||e.isZero()?new n(e):(r=n.precision,t=n.rounding,n.precision=r+2*Math.max(Math.abs(e.e),e.sd())+6,n.rounding=1,Te=!1,e=e.times(e).plus(1).sqrt().plus(e),Te=!0,n.precision=r,n.rounding=t,e.ln())};re.inverseHyperbolicTangent=re.atanh=function(){var r,t,e,n,i=this,o=i.constructor;return i.isFinite()?i.e>=0?new o(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(r=o.precision,t=o.rounding,n=i.sd(),Math.max(n,r)<2*-i.e-1?ye(new o(i),r,t,!0):(o.precision=e=n-i.e,i=at(i.plus(1),new o(1).minus(i),e+r,1),o.precision=r+4,o.rounding=1,i=i.ln(),o.precision=r,o.rounding=t,i.times(.5))):new o(NaN)};re.inverseSine=re.asin=function(){var r,t,e,n,i=this,o=i.constructor;return i.isZero()?new o(i):(t=i.abs().cmp(1),e=o.precision,n=o.rounding,t!==-1?t===0?(r=Fn(o,e+4,n).times(.5),r.s=i.s,r):new o(NaN):(o.precision=e+6,o.rounding=1,i=i.div(new o(1).minus(i.times(i)).sqrt().plus(1)).atan(),o.precision=e,o.rounding=n,i.times(2)))};re.inverseTangent=re.atan=function(){var r,t,e,n,i,o,a,s,l,u=this,d=u.constructor,h=d.precision,v=d.rounding;if(u.isFinite()){if(u.isZero())return new d(u);if(u.abs().eq(1)&&h+4<=cv)return a=Fn(d,h+4,v).times(.25),a.s=u.s,a}else{if(!u.s)return new d(NaN);if(h+4<=cv)return a=Fn(d,h+4,v).times(.5),a.s=u.s,a}for(d.precision=s=h+10,d.rounding=1,e=Math.min(28,s/we+2|0),r=e;r;--r)u=u.div(u.times(u).plus(1).sqrt().plus(1));for(Te=!1,t=Math.ceil(s/we),n=1,l=u.times(u),a=new d(u),i=u;r!==-1;)if(i=i.times(l),o=a.minus(i.div(n+=2)),i=i.times(l),a=o.plus(i.div(n+=2)),a.d[t]!==void 0)for(r=t;a.d[r]===o.d[r]&&r--;);return e&&(a=a.times(2<<e-1)),Te=!0,ye(a,d.precision=h,d.rounding=v,!0)};re.isFinite=function(){return!!this.d};re.isInteger=re.isInt=function(){return!!this.d&&fr(this.e/we)>this.d.length-2};re.isNaN=function(){return!this.s};re.isNegative=re.isNeg=function(){return this.s<0};re.isPositive=re.isPos=function(){return this.s>0};re.isZero=function(){return!!this.d&&this.d[0]===0};re.lessThan=re.lt=function(r){return this.cmp(r)<0};re.lessThanOrEqualTo=re.lte=function(r){return this.cmp(r)<1};re.logarithm=re.log=function(r){var t,e,n,i,o,a,s,l,u=this,d=u.constructor,h=d.precision,v=d.rounding,p=5;if(r==null)r=new d(10),t=!0;else{if(r=new d(r),e=r.d,r.s<0||!e||!e[0]||r.eq(1))return new d(NaN);t=r.eq(10)}if(e=u.d,u.s<0||!e||!e[0]||u.eq(1))return new d(e&&!e[0]?-1/0:u.s!=1?NaN:e?0:1/0);if(t)if(e.length>1)o=!0;else{for(i=e[0];i%10===0;)i/=10;o=i!==1}if(Te=!1,s=h+p,a=no(u,s),n=t?Df(d,s+10):no(r,s),l=at(a,n,s,1),dl(l.d,i=h,v))do if(s+=10,a=no(u,s),n=t?Df(d,s+10):no(r,s),l=at(a,n,s,1),!o){+Jt(l.d).slice(i+1,i+15)+1==1e14&&(l=ye(l,h+1,0));break}while(dl(l.d,i+=10,v));return Te=!0,ye(l,h,v)};re.minus=re.sub=function(r){var t,e,n,i,o,a,s,l,u,d,h,v,p=this,g=p.constructor;if(r=new g(r),!p.d||!r.d)return!p.s||!r.s?r=new g(NaN):p.d?r.s=-r.s:r=new g(r.d||p.s!==r.s?p:NaN),r;if(p.s!=r.s)return r.s=-r.s,p.plus(r);if(u=p.d,v=r.d,s=g.precision,l=g.rounding,!u[0]||!v[0]){if(v[0])r.s=-r.s;else if(u[0])r=new g(p);else return new g(l===3?-0:0);return Te?ye(r,s,l):r}if(e=fr(r.e/we),d=fr(p.e/we),u=u.slice(),o=d-e,o){for(h=o<0,h?(t=u,o=-o,a=v.length):(t=v,e=d,a=u.length),n=Math.max(Math.ceil(s/we),a)+2,o>n&&(o=n,t.length=1),t.reverse(),n=o;n--;)t.push(0);t.reverse()}else{for(n=u.length,a=v.length,h=n<a,h&&(a=n),n=0;n<a;n++)if(u[n]!=v[n]){h=u[n]<v[n];break}o=0}for(h&&(t=u,u=v,v=t,r.s=-r.s),a=u.length,n=v.length-a;n>0;--n)u[a++]=0;for(n=v.length;n>o;){if(u[--n]<v[n]){for(i=n;i&&u[--i]===0;)u[i]=Gn-1;--u[i],u[n]+=Gn}u[n]-=v[n]}for(;u[--a]===0;)u.pop();for(;u[0]===0;u.shift())--e;return u[0]?(r.d=u,r.e=ud(u,e),Te?ye(r,s,l):r):new g(l===3?-0:0)};re.modulo=re.mod=function(r){var t,e=this,n=e.constructor;return r=new n(r),!e.d||!r.s||r.d&&!r.d[0]?new n(NaN):!r.d||e.d&&!e.d[0]?ye(new n(e),n.precision,n.rounding):(Te=!1,n.modulo==9?(t=at(e,r.abs(),0,3,1),t.s*=r.s):t=at(e,r,0,n.modulo,1),t=t.times(r),Te=!0,e.minus(t))};re.naturalExponential=re.exp=function(){return vv(this)};re.naturalLogarithm=re.ln=function(){return no(this)};re.negated=re.neg=function(){var r=new this.constructor(this);return r.s=-r.s,ye(r)};re.plus=re.add=function(r){var t,e,n,i,o,a,s,l,u,d,h=this,v=h.constructor;if(r=new v(r),!h.d||!r.d)return!h.s||!r.s?r=new v(NaN):h.d||(r=new v(r.d||h.s===r.s?h:NaN)),r;if(h.s!=r.s)return r.s=-r.s,h.minus(r);if(u=h.d,d=r.d,s=v.precision,l=v.rounding,!u[0]||!d[0])return d[0]||(r=new v(h)),Te?ye(r,s,l):r;if(o=fr(h.e/we),n=fr(r.e/we),u=u.slice(),i=o-n,i){for(i<0?(e=u,i=-i,a=d.length):(e=d,n=o,a=u.length),o=Math.ceil(s/we),a=o>a?o+1:a+1,i>a&&(i=a,e.length=1),e.reverse();i--;)e.push(0);e.reverse()}for(a=u.length,i=d.length,a-i<0&&(i=a,e=d,d=u,u=e),t=0;i;)t=(u[--i]=u[i]+d[i]+t)/Gn|0,u[i]%=Gn;for(t&&(u.unshift(t),++n),a=u.length;u[--a]==0;)u.pop();return r.d=u,r.e=ud(u,n),Te?ye(r,s,l):r};re.precision=re.sd=function(r){var t,e=this;if(r!==void 0&&r!==!!r&&r!==1&&r!==0)throw Error(vo+r);return e.d?(t=F_(e.d),r&&e.e+1>t&&(t=e.e+1)):t=NaN,t};re.round=function(){var r=this,t=r.constructor;return ye(new t(r),r.e+1,t.rounding)};re.sine=re.sin=function(){var r,t,e=this,n=e.constructor;return e.isFinite()?e.isZero()?new n(e):(r=n.precision,t=n.rounding,n.precision=r+Math.max(e.e,e.sd())+we,n.rounding=1,e=Vz(n,G_(n,e)),n.precision=r,n.rounding=t,ye(Ai>2?e.neg():e,r,t,!0)):new n(NaN)};re.squareRoot=re.sqrt=function(){var r,t,e,n,i,o,a=this,s=a.d,l=a.e,u=a.s,d=a.constructor;if(u!==1||!s||!s[0])return new d(!u||u<0&&(!s||s[0])?NaN:s?a:1/0);for(Te=!1,u=Math.sqrt(+a),u==0||u==1/0?(t=Jt(s),(t.length+l)%2==0&&(t+="0"),u=Math.sqrt(t),l=fr((l+1)/2)-(l<0||l%2),u==1/0?t="5e"+l:(t=u.toExponential(),t=t.slice(0,t.indexOf("e")+1)+l),n=new d(t)):n=new d(u.toString()),e=(l=d.precision)+3;;)if(o=n,n=o.plus(at(a,o,e+2,1)).times(.5),Jt(o.d).slice(0,e)===(t=Jt(n.d)).slice(0,e))if(t=t.slice(e-3,e+1),t=="9999"||!i&&t=="4999"){if(!i&&(ye(o,l+1,0),o.times(o).eq(a))){n=o;break}e+=4,i=1}else{(!+t||!+t.slice(1)&&t.charAt(0)=="5")&&(ye(n,l+1,1),r=!n.times(n).eq(a));break}return Te=!0,ye(n,l,d.rounding,r)};re.tangent=re.tan=function(){var r,t,e=this,n=e.constructor;return e.isFinite()?e.isZero()?new n(e):(r=n.precision,t=n.rounding,n.precision=r+10,n.rounding=1,e=e.sin(),e.s=1,e=at(e,new n(1).minus(e.times(e)).sqrt(),r+10,0),n.precision=r,n.rounding=t,ye(Ai==2||Ai==4?e.neg():e,r,t,!0)):new n(NaN)};re.times=re.mul=function(r){var t,e,n,i,o,a,s,l,u,d=this,h=d.constructor,v=d.d,p=(r=new h(r)).d;if(r.s*=d.s,!v||!v[0]||!p||!p[0])return new h(!r.s||v&&!v[0]&&!p||p&&!p[0]&&!v?NaN:!v||!p?r.s/0:r.s*0);for(e=fr(d.e/we)+fr(r.e/we),l=v.length,u=p.length,l<u&&(o=v,v=p,p=o,a=l,l=u,u=a),o=[],a=l+u,n=a;n--;)o.push(0);for(n=u;--n>=0;){for(t=0,i=l+n;i>n;)s=o[i]+p[n]*v[i-n-1]+t,o[i--]=s%Gn|0,t=s/Gn|0;o[i]=(o[i]+t)%Gn|0}for(;!o[--a];)o.pop();return t?++e:o.shift(),r.d=o,r.e=ud(o,e),Te?ye(r,h.precision,h.rounding):r};re.toBinary=function(r,t){return Hp(this,2,r,t)};re.toDecimalPlaces=re.toDP=function(r,t){var e=this,n=e.constructor;return e=new n(e),r===void 0?e:(zr(r,0,mo),t===void 0?t=n.rounding:zr(t,0,8),ye(e,r+e.e+1,t))};re.toExponential=function(r,t){var e,n=this,i=n.constructor;return r===void 0?e=pi(n,!0):(zr(r,0,mo),t===void 0?t=i.rounding:zr(t,0,8),n=ye(new i(n),r+1,t),e=pi(n,!0,r+1)),n.isNeg()&&!n.isZero()?"-"+e:e};re.toFixed=function(r,t){var e,n,i=this,o=i.constructor;return r===void 0?e=pi(i):(zr(r,0,mo),t===void 0?t=o.rounding:zr(t,0,8),n=ye(new o(i),r+i.e+1,t),e=pi(n,!1,r+n.e+1)),i.isNeg()&&!i.isZero()?"-"+e:e};re.toFraction=function(r){var t,e,n,i,o,a,s,l,u,d,h,v,p=this,g=p.d,m=p.constructor;if(!g)return new m(p);if(u=e=new m(1),n=l=new m(0),t=new m(n),o=t.e=F_(g)-p.e-1,a=o%we,t.d[0]=Dt(10,a<0?we+a:a),r==null)r=o>0?t:u;else{if(s=new m(r),!s.isInt()||s.lt(u))throw Error(vo+s);r=s.gt(t)?o>0?t:u:s}for(Te=!1,s=new m(Jt(g)),d=m.precision,m.precision=o=g.length*we*2;h=at(s,t,0,1,1),i=e.plus(h.times(n)),i.cmp(r)!=1;)e=n,n=i,i=u,u=l.plus(h.times(i)),l=i,i=t,t=s.minus(h.times(i)),s=i;return i=at(r.minus(e),n,0,1,1),l=l.plus(i.times(u)),e=e.plus(i.times(n)),l.s=u.s=p.s,v=at(u,n,o,1).minus(p).abs().cmp(at(l,e,o,1).minus(p).abs())<1?[u,n]:[l,e],m.precision=d,Te=!0,v};re.toHexadecimal=re.toHex=function(r,t){return Hp(this,16,r,t)};re.toNearest=function(r,t){var e=this,n=e.constructor;if(e=new n(e),r==null){if(!e.d)return e;r=new n(1),t=n.rounding}else{if(r=new n(r),t===void 0?t=n.rounding:zr(t,0,8),!e.d)return r.s?e:r;if(!r.d)return r.s&&(r.s=e.s),r}return r.d[0]?(Te=!1,e=at(e,r,0,t,1).times(r),Te=!0,ye(e)):(r.s=e.s,e=r),e};re.toNumber=function(){return+this};re.toOctal=function(r,t){return Hp(this,8,r,t)};re.toPower=re.pow=function(r){var t,e,n,i,o,a,s=this,l=s.constructor,u=+(r=new l(r));if(!s.d||!r.d||!s.d[0]||!r.d[0])return new l(Dt(+s,u));if(s=new l(s),s.eq(1))return s;if(n=l.precision,o=l.rounding,r.eq(1))return ye(s,n,o);if(t=fr(r.e/we),t>=r.d.length-1&&(e=u<0?-u:u)<=zz)return i=k_(l,s,e,n),r.s<0?new l(1).div(i):ye(i,n,o);if(a=s.s,a<0){if(t<r.d.length-1)return new l(NaN);if((r.d[t]&1)==0&&(a=1),s.e==0&&s.d[0]==1&&s.d.length==1)return s.s=a,s}return e=Dt(+s,u),t=e==0||!isFinite(e)?fr(u*(Math.log("0."+Jt(s.d))/Math.LN10+s.e+1)):new l(e+"").e,t>l.maxE+1||t<l.minE-1?new l(t>0?a/0:0):(Te=!1,l.rounding=s.s=1,e=Math.min(12,(t+"").length),i=vv(r.times(no(s,n+e)),n),i.d&&(i=ye(i,n+5,1),dl(i.d,n,o)&&(t=n+10,i=ye(vv(r.times(no(s,t+e)),t),t+5,1),+Jt(i.d).slice(n+1,n+15)+1==1e14&&(i=ye(i,n+1,0)))),i.s=a,Te=!0,l.rounding=o,ye(i,n,o))};re.toPrecision=function(r,t){var e,n=this,i=n.constructor;return r===void 0?e=pi(n,n.e<=i.toExpNeg||n.e>=i.toExpPos):(zr(r,1,mo),t===void 0?t=i.rounding:zr(t,0,8),n=ye(new i(n),r,t),e=pi(n,r<=n.e||n.e<=i.toExpNeg,r)),n.isNeg()&&!n.isZero()?"-"+e:e};re.toSignificantDigits=re.toSD=function(r,t){var e=this,n=e.constructor;return r===void 0?(r=n.precision,t=n.rounding):(zr(r,1,mo),t===void 0?t=n.rounding:zr(t,0,8)),ye(new n(e),r,t)};re.toString=function(){var r=this,t=r.constructor,e=pi(r,r.e<=t.toExpNeg||r.e>=t.toExpPos);return r.isNeg()&&!r.isZero()?"-"+e:e};re.truncated=re.trunc=function(){return ye(new this.constructor(this),this.e+1,1)};re.valueOf=re.toJSON=function(){var r=this,t=r.constructor,e=pi(r,r.e<=t.toExpNeg||r.e>=t.toExpPos);return r.isNeg()?"-"+e:e};function Jt(r){var t,e,n,i=r.length-1,o="",a=r[0];if(i>0){for(o+=a,t=1;t<i;t++)n=r[t]+"",e=we-n.length,e&&(o+=eo(e)),o+=n;a=r[t],n=a+"",e=we-n.length,e&&(o+=eo(e))}else if(a===0)return"0";for(;a%10===0;)a/=10;return o+a}function zr(r,t,e){if(r!==~~r||r<t||r>e)throw Error(vo+r)}function dl(r,t,e,n){var i,o,a,s;for(o=r[0];o>=10;o/=10)--t;return--t<0?(t+=we,i=0):(i=Math.ceil((t+1)/we),t%=we),o=Dt(10,we-t),s=r[i]%o|0,n==null?t<3?(t==0?s=s/100|0:t==1&&(s=s/10|0),a=e<4&&s==99999||e>3&&s==49999||s==5e4||s==0):a=(e<4&&s+1==o||e>3&&s+1==o/2)&&(r[i+1]/o/100|0)==Dt(10,t-2)-1||(s==o/2||s==0)&&(r[i+1]/o/100|0)==0:t<4?(t==0?s=s/1e3|0:t==1?s=s/100|0:t==2&&(s=s/10|0),a=(n||e<4)&&s==9999||!n&&e>3&&s==4999):a=((n||e<4)&&s+1==o||!n&&e>3&&s+1==o/2)&&(r[i+1]/o/1e3|0)==Dt(10,t-3)-1,a}function tf(r,t,e){for(var n,i=[0],o,a=0,s=r.length;a<s;){for(o=i.length;o--;)i[o]*=t;for(i[0]+=dv.indexOf(r.charAt(a++)),n=0;n<i.length;n++)i[n]>e-1&&(i[n+1]===void 0&&(i[n+1]=0),i[n+1]+=i[n]/e|0,i[n]%=e)}return i.reverse()}function Wz(r,t){var e,n,i;if(t.isZero())return t;n=t.d.length,n<32?(e=Math.ceil(n/3),i=(1/fd(4,e)).toString()):(e=16,i="2.3283064365386962890625e-10"),r.precision+=e,t=ts(r,1,t.times(i),new r(1));for(var o=e;o--;){var a=t.times(t);t=a.times(a).minus(a).times(8).plus(1)}return r.precision-=e,t}var at=function(){function r(n,i,o){var a,s=0,l=n.length;for(n=n.slice();l--;)a=n[l]*i+s,n[l]=a%o|0,s=a/o|0;return s&&n.unshift(s),n}function t(n,i,o,a){var s,l;if(o!=a)l=o>a?1:-1;else for(s=l=0;s<o;s++)if(n[s]!=i[s]){l=n[s]>i[s]?1:-1;break}return l}function e(n,i,o,a){for(var s=0;o--;)n[o]-=s,s=n[o]<i[o]?1:0,n[o]=s*a+n[o]-i[o];for(;!n[0]&&n.length>1;)n.shift()}return function(n,i,o,a,s,l){var u,d,h,v,p,g,m,C,w,_,S,b,T,E,R,O,A,P,D,k,z=n.constructor,V=n.s==i.s?1:-1,Z=n.d,Q=i.d;if(!Z||!Z[0]||!Q||!Q[0])return new z(!n.s||!i.s||(Z?Q&&Z[0]==Q[0]:!Q)?NaN:Z&&Z[0]==0||!Q?V*0:V/0);for(l?(p=1,d=n.e-i.e):(l=Gn,p=we,d=fr(n.e/p)-fr(i.e/p)),D=Q.length,A=Z.length,w=new z(V),_=w.d=[],h=0;Q[h]==(Z[h]||0);h++);if(Q[h]>(Z[h]||0)&&d--,o==null?(E=o=z.precision,a=z.rounding):s?E=o+(n.e-i.e)+1:E=o,E<0)_.push(1),g=!0;else{if(E=E/p+2|0,h=0,D==1){for(v=0,Q=Q[0],E++;(h<A||v)&&E--;h++)R=v*l+(Z[h]||0),_[h]=R/Q|0,v=R%Q|0;g=v||h<A}else{for(v=l/(Q[0]+1)|0,v>1&&(Q=r(Q,v,l),Z=r(Z,v,l),D=Q.length,A=Z.length),O=D,S=Z.slice(0,D),b=S.length;b<D;)S[b++]=0;k=Q.slice(),k.unshift(0),P=Q[0],Q[1]>=l/2&&++P;do v=0,u=t(Q,S,D,b),u<0?(T=S[0],D!=b&&(T=T*l+(S[1]||0)),v=T/P|0,v>1?(v>=l&&(v=l-1),m=r(Q,v,l),C=m.length,b=S.length,u=t(m,S,C,b),u==1&&(v--,e(m,D<C?k:Q,C,l))):(v==0&&(u=v=1),m=Q.slice()),C=m.length,C<b&&m.unshift(0),e(S,m,b,l),u==-1&&(b=S.length,u=t(Q,S,D,b),u<1&&(v++,e(S,D<b?k:Q,b,l))),b=S.length):u===0&&(v++,S=[0]),_[h++]=v,u&&S[0]?S[b++]=Z[O]||0:(S=[Z[O]],b=1);while((O++<A||S[0]!==void 0)&&E--);g=S[0]!==void 0}_[0]||_.shift()}if(p==1)w.e=d,A_=g;else{for(h=1,v=_[0];v>=10;v/=10)h++;w.e=h+d*p-1,ye(w,s?o+w.e+1:o,a,g)}return w}}();function ye(r,t,e,n){var i,o,a,s,l,u,d,h,v,p=r.constructor;e:if(t!=null){if(h=r.d,!h)return r;for(i=1,s=h[0];s>=10;s/=10)i++;if(o=t-i,o<0)o+=we,a=t,d=h[v=0],l=d/Dt(10,i-a-1)%10|0;else if(v=Math.ceil((o+1)/we),s=h.length,v>=s)if(n){for(;s++<=v;)h.push(0);d=l=0,i=1,o%=we,a=o-we+1}else break e;else{for(d=s=h[v],i=1;s>=10;s/=10)i++;o%=we,a=o-we+i,l=a<0?0:d/Dt(10,i-a-1)%10|0}if(n=n||t<0||h[v+1]!==void 0||(a<0?d:d%Dt(10,i-a-1)),u=e<4?(l||n)&&(e==0||e==(r.s<0?3:2)):l>5||l==5&&(e==4||n||e==6&&(o>0?a>0?d/Dt(10,i-a):0:h[v-1])%10&1||e==(r.s<0?8:7)),t<1||!h[0])return h.length=0,u?(t-=r.e+1,h[0]=Dt(10,(we-t%we)%we),r.e=-t||0):h[0]=r.e=0,r;if(o==0?(h.length=v,s=1,v--):(h.length=v+1,s=Dt(10,we-o),h[v]=a>0?(d/Dt(10,i-a)%Dt(10,a)|0)*s:0),u)for(;;)if(v==0){for(o=1,a=h[0];a>=10;a/=10)o++;for(a=h[0]+=s,s=1;a>=10;a/=10)s++;o!=s&&(r.e++,h[0]==Gn&&(h[0]=1));break}else{if(h[v]+=s,h[v]!=Gn)break;h[v--]=0,s=1}for(o=h.length;h[--o]===0;)h.pop()}return Te&&(r.e>p.maxE?(r.d=null,r.e=NaN):r.e<p.minE&&(r.e=0,r.d=[0])),r}function pi(r,t,e){if(!r.isFinite())return z_(r);var n,i=r.e,o=Jt(r.d),a=o.length;return t?(e&&(n=e-a)>0?o=o.charAt(0)+"."+o.slice(1)+eo(n):a>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(r.e<0?"e":"e+")+r.e):i<0?(o="0."+eo(-i-1)+o,e&&(n=e-a)>0&&(o+=eo(n))):i>=a?(o+=eo(i+1-a),e&&(n=e-i-1)>0&&(o=o+"."+eo(n))):((n=i+1)<a&&(o=o.slice(0,n)+"."+o.slice(n)),e&&(n=e-a)>0&&(i+1===a&&(o+="."),o+=eo(n))),o}function ud(r,t){var e=r[0];for(t*=we;e>=10;e/=10)t++;return t}function Df(r,t,e){if(t>Gz)throw Te=!0,e&&(r.precision=e),Error(N_);return ye(new r(Pf),t,1,!0)}function Fn(r,t,e){if(t>cv)throw Error(N_);return ye(new r(Bf),t,e,!0)}function F_(r){var t=r.length-1,e=t*we+1;if(t=r[t],t){for(;t%10==0;t/=10)e--;for(t=r[0];t>=10;t/=10)e++}return e}function eo(r){for(var t="";r--;)t+="0";return t}function k_(r,t,e,n){var i,o=new r(1),a=Math.ceil(n/we+4);for(Te=!1;;){if(e%2&&(o=o.times(t),Hm(o.d,a)&&(i=!0)),e=fr(e/2),e===0){e=o.d.length-1,i&&o.d[e]===0&&++o.d[e];break}t=t.times(t),Hm(t.d,a)}return Te=!0,o}function km(r){return r.d[r.d.length-1]&1}function H_(r,t,e){for(var n,i=new r(t[0]),o=0;++o<t.length;)if(n=new r(t[o]),n.s)i[e](n)&&(i=n);else{i=n;break}return i}function vv(r,t){var e,n,i,o,a,s,l,u=0,d=0,h=0,v=r.constructor,p=v.rounding,g=v.precision;if(!r.d||!r.d[0]||r.e>17)return new v(r.d?r.d[0]?r.s<0?0:1/0:1:r.s?r.s<0?0:r:0/0);for(t==null?(Te=!1,l=g):l=t,s=new v(.03125);r.e>-2;)r=r.times(s),h+=5;for(n=Math.log(Dt(2,h))/Math.LN10*2+5|0,l+=n,e=o=a=new v(1),v.precision=l;;){if(o=ye(o.times(r),l,1),e=e.times(++d),s=a.plus(at(o,e,l,1)),Jt(s.d).slice(0,l)===Jt(a.d).slice(0,l)){for(i=h;i--;)a=ye(a.times(a),l,1);if(t==null)if(u<3&&dl(a.d,l-n,p,u))v.precision=l+=10,e=o=s=new v(1),d=0,u++;else return ye(a,v.precision=g,p,Te=!0);else return v.precision=g,a}a=s}}function no(r,t){var e,n,i,o,a,s,l,u,d,h,v,p=1,g=10,m=r,C=m.d,w=m.constructor,_=w.rounding,S=w.precision;if(m.s<0||!C||!C[0]||!m.e&&C[0]==1&&C.length==1)return new w(C&&!C[0]?-1/0:m.s!=1?NaN:C?0:m);if(t==null?(Te=!1,d=S):d=t,w.precision=d+=g,e=Jt(C),n=e.charAt(0),Math.abs(o=m.e)<15e14){for(;n<7&&n!=1||n==1&&e.charAt(1)>3;)m=m.times(r),e=Jt(m.d),n=e.charAt(0),p++;o=m.e,n>1?(m=new w("0."+e),o++):m=new w(n+"."+e.slice(1))}else return u=Df(w,d+2,S).times(o+""),m=no(new w(n+"."+e.slice(1)),d-g).plus(u),w.precision=S,t==null?ye(m,S,_,Te=!0):m;for(h=m,l=a=m=at(m.minus(1),m.plus(1),d,1),v=ye(m.times(m),d,1),i=3;;){if(a=ye(a.times(v),d,1),u=l.plus(at(a,new w(i),d,1)),Jt(u.d).slice(0,d)===Jt(l.d).slice(0,d))if(l=l.times(2),o!==0&&(l=l.plus(Df(w,d+2,S).times(o+""))),l=at(l,new w(p),d,1),t==null)if(dl(l.d,d-g,_,s))w.precision=d+=g,u=a=m=at(h.minus(1),h.plus(1),d,1),v=ye(m.times(m),d,1),i=s=1;else return ye(l,w.precision=S,_,Te=!0);else return w.precision=S,l;l=u,i+=2}}function z_(r){return String(r.s*r.s/0)}function pv(r,t){var e,n,i;for((e=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(e<0&&(e=n),e+=+t.slice(n+1),t=t.substring(0,n)):e<0&&(e=t.length),n=0;t.charCodeAt(n)===48;n++);for(i=t.length;t.charCodeAt(i-1)===48;--i);if(t=t.slice(n,i),t){if(i-=n,r.e=e=e-n-1,r.d=[],n=(e+1)%we,e<0&&(n+=we),n<i){for(n&&r.d.push(+t.slice(0,n)),i-=we;n<i;)r.d.push(+t.slice(n,n+=we));t=t.slice(n),n=we-t.length}else n-=i;for(;n--;)t+="0";r.d.push(+t),Te&&(r.e>r.constructor.maxE?(r.d=null,r.e=NaN):r.e<r.constructor.minE&&(r.e=0,r.d=[0]))}else r.e=0,r.d=[0];return r}function Uz(r,t){var e,n,i,o,a,s,l,u,d;if(t.indexOf("_")>-1){if(t=t.replace(/(\d)_(?=\d)/g,"$1"),D_.test(t))return pv(r,t)}else if(t==="Infinity"||t==="NaN")return+t||(r.s=NaN),r.e=NaN,r.d=null,r;if(kz.test(t))e=16,t=t.toLowerCase();else if(Fz.test(t))e=2;else if(Hz.test(t))e=8;else throw Error(vo+t);for(o=t.search(/p/i),o>0?(l=+t.slice(o+1),t=t.substring(2,o)):t=t.slice(2),o=t.indexOf("."),a=o>=0,n=r.constructor,a&&(t=t.replace(".",""),s=t.length,o=s-o,i=k_(n,new n(e),o,o*2)),u=tf(t,e,Gn),d=u.length-1,o=d;u[o]===0;--o)u.pop();return o<0?new n(r.s*0):(r.e=ud(u,d),r.d=u,Te=!1,a&&(r=at(r,i,s*4)),l&&(r=r.times(Math.abs(l)<54?Dt(2,l):Yn.pow(2,l))),Te=!0,r)}function Vz(r,t){var e,n=t.d.length;if(n<3)return t.isZero()?t:ts(r,2,t,t);e=1.4*Math.sqrt(n),e=e>16?16:e|0,t=t.times(1/fd(5,e)),t=ts(r,2,t,t);for(var i,o=new r(5),a=new r(16),s=new r(20);e--;)i=t.times(t),t=t.times(o.plus(i.times(a.times(i).minus(s))));return t}function ts(r,t,e,n,i){var o,a,s,l,u=r.precision,d=Math.ceil(u/we);for(Te=!1,l=e.times(e),s=new r(n);;){if(a=at(s.times(l),new r(t++*t++),u,1),s=i?n.plus(a):n.minus(a),n=at(a.times(l),new r(t++*t++),u,1),a=s.plus(n),a.d[d]!==void 0){for(o=d;a.d[o]===s.d[o]&&o--;);if(o==-1)break}o=s,s=n,n=a,a=o}return Te=!0,a.d.length=d+1,a}function fd(r,t){for(var e=r;--t;)e*=r;return e}function G_(r,t){var e,n=t.s<0,i=Fn(r,r.precision,1),o=i.times(.5);if(t=t.abs(),t.lte(o))return Ai=n?4:1,t;if(e=t.divToInt(i),e.isZero())Ai=n?3:2;else{if(t=t.minus(e.times(i)),t.lte(o))return Ai=km(e)?n?2:3:n?4:1,t;Ai=km(e)?n?1:4:n?3:2}return t.minus(i).abs()}function Hp(r,t,e,n){var i,o,a,s,l,u,d,h,v,p=r.constructor,g=e!==void 0;if(g?(zr(e,1,mo),n===void 0?n=p.rounding:zr(n,0,8)):(e=p.precision,n=p.rounding),!r.isFinite())d=z_(r);else{for(d=pi(r),a=d.indexOf("."),g?(i=2,t==16?e=e*4-3:t==8&&(e=e*3-2)):i=t,a>=0&&(d=d.replace(".",""),v=new p(1),v.e=d.length-a,v.d=tf(pi(v),10,i),v.e=v.d.length),h=tf(d,10,i),o=l=h.length;h[--l]==0;)h.pop();if(!h[0])d=g?"0p+0":"0";else{if(a<0?o--:(r=new p(r),r.d=h,r.e=o,r=at(r,v,e,n,0,i),h=r.d,o=r.e,u=A_),a=h[e],s=i/2,u=u||h[e+1]!==void 0,u=n<4?(a!==void 0||u)&&(n===0||n===(r.s<0?3:2)):a>s||a===s&&(n===4||u||n===6&&h[e-1]&1||n===(r.s<0?8:7)),h.length=e,u)for(;++h[--e]>i-1;)h[e]=0,e||(++o,h.unshift(1));for(l=h.length;!h[l-1];--l);for(a=0,d="";a<l;a++)d+=dv.charAt(h[a]);if(g){if(l>1)if(t==16||t==8){for(a=t==16?4:3,--l;l%a;l++)d+="0";for(h=tf(d,i,t),l=h.length;!h[l-1];--l);for(a=1,d="1.";a<l;a++)d+=dv.charAt(h[a])}else d=d.charAt(0)+"."+d.slice(1);d=d+(o<0?"p":"p+")+o}else if(o<0){for(;++o;)d="0"+d;d="0."+d}else if(++o>l)for(o-=l;o--;)d+="0";else o<l&&(d=d.slice(0,o)+"."+d.slice(o))}d=(t==16?"0x":t==2?"0b":t==8?"0o":"")+d}return r.s<0?"-"+d:d}function Hm(r,t){if(r.length>t)return r.length=t,!0}function Yz(r){return new this(r).abs()}function Xz(r){return new this(r).acos()}function $z(r){return new this(r).acosh()}function qz(r,t){return new this(r).plus(t)}function Kz(r){return new this(r).asin()}function Zz(r){return new this(r).asinh()}function Qz(r){return new this(r).atan()}function Jz(r){return new this(r).atanh()}function jz(r,t){r=new this(r),t=new this(t);var e,n=this.precision,i=this.rounding,o=n+4;return!r.s||!t.s?e=new this(NaN):!r.d&&!t.d?(e=Fn(this,o,1).times(t.s>0?.25:.75),e.s=r.s):!t.d||r.isZero()?(e=t.s<0?Fn(this,n,i):new this(0),e.s=r.s):!r.d||t.isZero()?(e=Fn(this,o,1).times(.5),e.s=r.s):t.s<0?(this.precision=o,this.rounding=1,e=this.atan(at(r,t,o,1)),t=Fn(this,o,1),this.precision=n,this.rounding=i,e=r.s<0?e.minus(t):e.plus(t)):e=this.atan(at(r,t,o,1)),e}function eG(r){return new this(r).cbrt()}function tG(r){return ye(r=new this(r),r.e+1,2)}function rG(r,t,e){return new this(r).clamp(t,e)}function nG(r){if(!r||typeof r!="object")throw Error(ld+"Object expected");var t,e,n,i=r.defaults===!0,o=["precision",1,mo,"rounding",0,8,"toExpNeg",-Ba,0,"toExpPos",0,Ba,"maxE",0,Ba,"minE",-Ba,0,"modulo",0,9];for(t=0;t<o.length;t+=3)if(e=o[t],i&&(this[e]=hv[e]),(n=r[e])!==void 0)if(fr(n)===n&&n>=o[t+1]&&n<=o[t+2])this[e]=n;else throw Error(vo+e+": "+n);if(e="crypto",i&&(this[e]=hv[e]),(n=r[e])!==void 0)if(n===!0||n===!1||n===0||n===1)if(n)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[e]=!0;else throw Error(P_);else this[e]=!1;else throw Error(vo+e+": "+n);return this}function iG(r){return new this(r).cos()}function oG(r){return new this(r).cosh()}function W_(r){var t,e,n;function i(o){var a,s,l,u=this;if(!(u instanceof i))return new i(o);if(u.constructor=i,zm(o)){u.s=o.s,Te?!o.d||o.e>i.maxE?(u.e=NaN,u.d=null):o.e<i.minE?(u.e=0,u.d=[0]):(u.e=o.e,u.d=o.d.slice()):(u.e=o.e,u.d=o.d?o.d.slice():o.d);return}if(l=typeof o,l==="number"){if(o===0){u.s=1/o<0?-1:1,u.e=0,u.d=[0];return}if(o<0?(o=-o,u.s=-1):u.s=1,o===~~o&&o<1e7){for(a=0,s=o;s>=10;s/=10)a++;Te?a>i.maxE?(u.e=NaN,u.d=null):a<i.minE?(u.e=0,u.d=[0]):(u.e=a,u.d=[o]):(u.e=a,u.d=[o]);return}else if(o*0!==0){o||(u.s=NaN),u.e=NaN,u.d=null;return}return pv(u,o.toString())}else if(l!=="string")throw Error(vo+o);return(s=o.charCodeAt(0))===45?(o=o.slice(1),u.s=-1):(s===43&&(o=o.slice(1)),u.s=1),D_.test(o)?pv(u,o):Uz(u,o)}if(i.prototype=re,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.EUCLID=9,i.config=i.set=nG,i.clone=W_,i.isDecimal=zm,i.abs=Yz,i.acos=Xz,i.acosh=$z,i.add=qz,i.asin=Kz,i.asinh=Zz,i.atan=Qz,i.atanh=Jz,i.atan2=jz,i.cbrt=eG,i.ceil=tG,i.clamp=rG,i.cos=iG,i.cosh=oG,i.div=aG,i.exp=sG,i.floor=lG,i.hypot=uG,i.ln=fG,i.log=dG,i.log10=cG,i.log2=hG,i.max=vG,i.min=pG,i.mod=gG,i.mul=yG,i.pow=mG,i.random=CG,i.round=wG,i.sign=xG,i.sin=_G,i.sinh=EG,i.sqrt=SG,i.sub=TG,i.sum=bG,i.tan=LG,i.tanh=RG,i.trunc=MG,r===void 0&&(r={}),r&&r.defaults!==!0)for(n=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],t=0;t<n.length;)r.hasOwnProperty(e=n[t++])||(r[e]=this[e]);return i.config(r),i}function aG(r,t){return new this(r).div(t)}function sG(r){return new this(r).exp()}function lG(r){return ye(r=new this(r),r.e+1,3)}function uG(){var r,t,e=new this(0);for(Te=!1,r=0;r<arguments.length;)if(t=new this(arguments[r++]),t.d)e.d&&(e=e.plus(t.times(t)));else{if(t.s)return Te=!0,new this(1/0);e=t}return Te=!0,e.sqrt()}function zm(r){return r instanceof Yn||r&&r.toStringTag===B_||!1}function fG(r){return new this(r).ln()}function dG(r,t){return new this(r).log(t)}function hG(r){return new this(r).log(2)}function cG(r){return new this(r).log(10)}function vG(){return H_(this,arguments,"lt")}function pG(){return H_(this,arguments,"gt")}function gG(r,t){return new this(r).mod(t)}function yG(r,t){return new this(r).mul(t)}function mG(r,t){return new this(r).pow(t)}function CG(r){var t,e,n,i,o=0,a=new this(1),s=[];if(r===void 0?r=this.precision:zr(r,1,mo),n=Math.ceil(r/we),this.crypto)if(crypto.getRandomValues)for(t=crypto.getRandomValues(new Uint32Array(n));o<n;)i=t[o],i>=429e7?t[o]=crypto.getRandomValues(new Uint32Array(1))[0]:s[o++]=i%1e7;else if(crypto.randomBytes){for(t=crypto.randomBytes(n*=4);o<n;)i=t[o]+(t[o+1]<<8)+(t[o+2]<<16)+((t[o+3]&127)<<24),i>=214e7?crypto.randomBytes(4).copy(t,o):(s.push(i%1e7),o+=4);o=n/4}else throw Error(P_);else for(;o<n;)s[o++]=Math.random()*1e7|0;for(n=s[--o],r%=we,n&&r&&(i=Dt(10,we-r),s[o]=(n/i|0)*i);s[o]===0;o--)s.pop();if(o<0)e=0,s=[0];else{for(e=-1;s[0]===0;e-=we)s.shift();for(n=1,i=s[0];i>=10;i/=10)n++;n<we&&(e-=we-n)}return a.e=e,a.d=s,a}function wG(r){return ye(r=new this(r),r.e+1,this.rounding)}function xG(r){return r=new this(r),r.d?r.d[0]?r.s:0*r.s:r.s||NaN}function _G(r){return new this(r).sin()}function EG(r){return new this(r).sinh()}function SG(r){return new this(r).sqrt()}function TG(r,t){return new this(r).sub(t)}function bG(){var r=0,t=arguments,e=new this(t[r]);for(Te=!1;e.s&&++r<t.length;)e=e.plus(t[r]);return Te=!0,ye(e,this.precision,this.rounding)}function LG(r){return new this(r).tan()}function RG(r){return new this(r).tanh()}function MG(r){return ye(r=new this(r),r.e+1,1)}re[Symbol.for("nodejs.util.inspect.custom")]=re.toString;re[Symbol.toStringTag]="Decimal";var Yn=re.constructor=W_(hv);Pf=new Yn(Pf);Bf=new Yn(Bf);var ba,zp=function(r){return typeof r=="number"?Number.isNaN(r):r&&typeof r=="string"?Number.isNaN(Number(r)):!0},Gm=function(r){return!zp(r)},Gp=function(r,t,e){return e===void 0&&(e=!1),r!=null&&r.length?r.reduce(function(n,i){var o=zn.getFieldValue(i,t),a=zp(o);if(e&&a)return n;var s=a?0:o;return n.push(new Yn(s)),n},[]):[]},U_=function(r,t){var e=Gp(r,t);return e.length?Yn.sum.apply(Yn,X([],F(e),!1)).toNumber():0},Wm=function(r,t,e){var n=Gp(t,e,!0);if(!!(n!=null&&n.length))return Yn[r].apply(Yn,X([],F(n),!1)).toNumber()},OG=function(r,t){var e=Gp(r,t);return e!=null&&e.length?Yn.sum.apply(Yn,X([],F(e),!1)).dividedBy(e.length).toNumber():0},IG=(ba={},ba[Na.SUM]=U_,ba[Na.MIN]=function(r,t){return Wm("min",r,t)},ba[Na.MAX]=function(r,t){return Wm("max",r,t)},ba[Na.AVG]=OG,ba),ls=function(r){return wf(r)==="ASC"},Wp=function(r){return wf(r)==="DESC"},Um=function(r,t,e){var n=ls(t)?1:-1,i=["-",void 0];return r==null?void 0:r.sort(function(o,a){var s=o,l=a;if(e){if(s=o.getValueByField(e),l=a.getValueByField(e),Gm(s)&&Gm(l))return(Number(s)-Number(l))*n;if(s&&(i==null?void 0:i.includes(s==null?void 0:s.toString())))return-n;if(Number(s)&&(i==null?void 0:i.includes(l==null?void 0:l.toString())))return n}return!Lt(s)&&!Lt(l)?s.toString().localeCompare(l.toString(),"zh")*n:s?n:-n})},V_=function(r,t,e){return e?f7(t,to(r)):X([],F(new Set(X(X([],F(r),!1),F(t),!1))),!1)},Y_=function(r){var t=r.sortByValues,e=t===void 0?[]:t,n=r.originValues,i=n===void 0?[]:n,o=i.filter(function(u){return e.find(function(d){return vk(u,d)})}),a=o.map(function(u){var d=u.split(xr);if(d.length>1){var h=d.slice(0,d.length-1).join(xr);return[h,d[d.length-1]]}return d}),s=Array.from(new Set(a.map(function(u){return u[0]})));a.sort(function(u,d){var h=u.slice(0,u.length-1),v=d.slice(0,d.length-1);if(h.join()!==v.join()){var p=s.indexOf(h[0]),g=s.indexOf(v[0]);return p-g}var m=e.indexOf(u[u.length-1]),C=e.indexOf(d[d.length-1]);return m-C});var l=a.map(function(u){return u.join(xr)});return u7(i,l)},AG=function(r){var t=r.originValues,e=t===void 0?[]:t,n=r.measureValues,i=r.sortParam,o=r.dataSet,a=i,s=a.sortFunc,l=a.sortFieldId,u=a.sortMethod,d=s==null?void 0:s(N({data:n},i));return d!=null&&d.length?(o.fields.rows.indexOf(l)>0||o.fields.columns.indexOf(l)>0)&&!Dr(d[0],xr)?Y_({sortByValues:d,originValues:e}):V_(d,e,ls(u)):e},NG=function(r){var t=r.sortParam,e=r.measureValues,n=r.originValues,i=r.dataSet,o=t,a=o.sortByMeasure,s=o.query,l=o.sortFieldId,u=o.sortMethod,d=i.fields,h=d.rows,v=h===void 0?[]:h,p=d.columns,g=p===void 0?[]:p,m=v==null?void 0:v.includes(l),C;if(a){var w=Um(e,u,a===Di?s==null?void 0:s[Ae]:a),_=m?v:Il(g);C=Oz(l,_,w)}else C=Um(e,u);return V_(C,n,ls(u))},PG=function(r){var t=r.sortParam,e=r.originValues,n=e===void 0?[]:e,i=r.measureValues,o=r.dataSet,a=t,s=a.sortFunc,l=a.sortMethod,u=a.sortBy,d=n,h={originValues:n,measureValues:i,sortParam:t,dataSet:o};return s?d=AG(h):u?d=Y_({sortByValues:u,originValues:n}):(ls(l)||Wp(l))&&(d=NG(h)),d},BG=function(r,t,e){var n,i={},o=Dr(r,xr);if(o)for(var a=UH(r,xr),s=!((n=t==null?void 0:t.rows)===null||n===void 0)&&n.includes(e)?t.rows:Il(t.columns),l=0;l<=yp(s,e);l++)i[s[l]]=a[l];else i[e]=r;return i},DG=function(r){var t=r.dataSet,e=r.sortParam,n=r.originValues,i=t.fields,o=e,a=o.sortByMeasure,s=o.query,l=o.sortFieldId;if(a!==Di){var u=t.getCellMultiData({query:s,queryType:hi.DetailOnly});return u}var d=t.getCellMultiData({query:s,queryType:hi.All}),h=Il(i.columns),v=Dr(i.rows,l),p=If(v?i.rows:h),g=If(v?h:i.rows),m=p[p.indexOf(l)+1],C=Hr(s),w=g.filter(function(S){return!C.includes(S)}),_=d.filter(function(S){var b=new Set(Hr(S[Hc]));if(!b.has(l)||b.has(m))return!1;var T=w.every(function(E){return!b.has(E)});return T});return se(_)?Hn(De(n,function(S){var b=BG(S,i,l);return t.getTotalValue(N(N({},s),b))})):_},FG=function(r){var t=r.dataSet,e=r.sortParam,n=r.originValues,i=r.isSortByMeasure,o;return i?o=DG(r):o=n,PG({sortParam:e,originValues:n,measureValues:o,dataSet:t})},X_=function(r,t){if(r!=null&&r.sortMethod){if(ls(r==null?void 0:r.sortMethod))return"groupAsc";if(Wp(r==null?void 0:r.sortMethod))return"groupDesc"}if(t)return"SortDown"},Vm=function(r){var t,e,n=r.pivotMeta,i=r.dimensions,o=r.sortedDimensionValues,a=r.sortFieldId,s={children:n},l=[s];try{for(var u=Qt(i),d=u.next();!d.done;d=u.next()){var h=d.value;if(h!==a)l=Tl(l,function(v){return X([],F(v.children.values()),!1)});else{l.forEach(function(v){var p=X([],F(v.children.values()),!1),g=Fx(p,function(m){return yp(o,m.id)}).map(function(m){return[m.value,m]});v.children=new Map(g)});break}}}catch(v){t={error:v}}finally{try{d&&!d.done&&(e=u.return)&&e.call(u)}finally{if(t)throw t.error}}return s.children},dd=function(r){oe(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getHeaderConfig=function(){return this.headerConfig||{}},t.prototype.isShallowRender=function(){return this.headerConfig.shallowRender},t.prototype.shouldInit=function(){return r.prototype.shouldInit.call(this)&&!this.isShallowRender()},t.prototype.handleRestOptions=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var i=F(e,1),o=i[0];this.headerConfig=N({},o);var a=this.meta,s=a.value,l=a.query,u=this.spreadsheet.dataCfg.sortParams||[],d=this.isSortCell(),h=$t(X([],F(u),!1).reverse(),function(p){return d&&(p==null?void 0:p.sortByMeasure)===s&&wr(ze(p,"query"),l)}),v=X_(h,d);this.headerConfig.sortParam=N(N(N({},this.headerConfig.sortParam),h||{query:l}),{type:v})},t.prototype.initCell=function(){this.resetTextAndConditionIconShapes(),this.actionIcons=[],this.hasDefaultHiddenIcon=!1,this.generateIconConfig()},t.prototype.generateIconConfig=function(){var e,n;this.conditionIconMappingResult=this.getIconConditionResult();var i=this.getHeaderConfig().sortParam;this.showSortIcon()?this.actionIconConfig={icons:[{name:ze(i,"type","none"),position:"right"}],belongsCell:this.cellType,isSortIcon:!0}:this.actionIconConfig=Op(this.spreadsheet.options.headerActionIcons,this.meta,this.cellType),this.groupedIcons=l_((n=(e=this.actionIconConfig)===null||e===void 0?void 0:e.icons)!==null&&n!==void 0?n:[],this.conditionIconMappingResult)},t.prototype.getFormattedFieldValue=function(){var e=this.meta,n=e.isTotalRoot,i=e.isGrandTotals,o=e.value,a=this.spreadsheet.dataSet.getFieldFormatter(this.meta.field),s=!0;this.spreadsheet.isTableMode()?s=!1:this.spreadsheet.isHierarchyTreeType()?s=!(i&&n):s=!n;var l=s&&a?a(o,void 0,this.meta):o;return{formattedValue:l,value:o}},t.prototype.showSortIcon=function(){var e=this.spreadsheet,n=e.options,i=e.dataCfg,o=se(i.fields.values);if(n.showDefaultHeaderActionIcon&&!o){var a=this.getHeaderConfig().sortParam,s=this.meta.query;return s&&wr(a==null?void 0:a.query,s)&&(a==null?void 0:a.type)&&(a==null?void 0:a.type)!=="none"}return!1},t.prototype.getActionIconStyle=function(e){var n=this.getStyle().icon,i=this.getTextConditionMappingResult(),o=(i==null?void 0:i.fill)||this.getTextStyle().fill;return{width:n==null?void 0:n.size,height:n==null?void 0:n.size,fill:(e==null?void 0:e.fill)||(n==null?void 0:n.fill)||o,cursor:"pointer"}},t.prototype.hasDefaultHideActionIcon=function(){return this.hasDefaultHiddenIcon},t.prototype.addActionIcon=function(e){var n=this,i=e.x,o=e.y,a=e.name,s=e.defaultHide,l=e.onClick,u=e.onHover,d=e.isSortIcon,h=new bp(N(N({},this.getActionIconStyle(e)),{name:a,x:i,y:o}));h.setAttribute("visibility",s?"hidden":"visible"),h.addEventListener("mouseover",function(v){n.spreadsheet.emit(U.GLOBAL_ACTION_ICON_HOVER,v),u==null||u({hovering:!0,name:a,meta:n.meta,event:v})}),h.addEventListener("mouseleave",function(v){n.spreadsheet.emit(U.GLOBAL_ACTION_ICON_HOVER_OFF,v),u==null||u({hovering:!1,name:a,meta:n.meta,event:v})}),h.addEventListener("click",function(v){if(n.spreadsheet.emit(U.GLOBAL_ACTION_ICON_CLICK,v),d){n.spreadsheet.handleGroupSort(v,n.meta);return}l==null||l({name:a,meta:n.meta,event:v})}),this.actionIcons.push(h),this.appendChild(h)},t.prototype.drawActionAndConditionIcons=function(){var e=this;se(this.groupedIcons.left)&&se(this.groupedIcons.right)||!this.leftIconPosition||!this.rightIconPosition||Me(this.groupedIcons,function(n,i){var o=e.getStyle().icon,a=o.size,s=o.margin,l=s.right,u=i==="left"?e.leftIconPosition:e.rightIconPosition;Me(n,function(d,h){var v,p,g,m=u.x+(a+l)*h,C=u.y;if(d.isConditionIcon){e.conditionIconShape=Ll(e,{x:m,y:C,name:d.name,width:a,height:a,fill:d.fill}),e.addConditionIconShape(e.conditionIconShape);return}var w=e.actionIconConfig,_=w.onClick,S=w.onHover,b=w.defaultHide,T=w.isSortIcon,E=(v=d.defaultHide)!==null&&v!==void 0?v:b,R=typeof E=="function"?E(e.meta,d.name):E;R&&(e.hasDefaultHiddenIcon=!0),e.addActionIcon({name:d.name,fill:d.fill,x:m,y:C,defaultHide:R,onClick:(p=d.onClick)!==null&&p!==void 0?p:_,onHover:(g=d.onHover)!==null&&g!==void 0?g:S,isSortIcon:T})})})},t.prototype.isSortCell=function(){var e,n,i,o=(n=(e=this.spreadsheet)===null||e===void 0?void 0:e.isValueInCols)===null||n===void 0?void 0:n.call(e),a=this.meta.level===((i=this.meta.hierarchy)===null||i===void 0?void 0:i.maxLevel);return o?a&&this.cellType===ie.COL_CELL:a&&this.cellType===ie.ROW_CELL},t.prototype.handleByStateName=function(e,n){Do(e,this)&&this.updateByState(n)},t.prototype.handleSearchResult=function(e){if(!!Do(e,this)){var n=$t(e,function(i){return i==null?void 0:i.isTarget});n.id===this.getMeta().id?this.updateByState(ce.HIGHLIGHT):this.updateByState(ce.SEARCH_RESULT)}},t.prototype.handleHover=function(e){var n;Do(e,this)&&(this.updateByState(ce.HOVER),this.hasDefaultHideActionIcon()&&this.toggleActionIcon((n=e==null?void 0:e[0])===null||n===void 0?void 0:n.id))},t.prototype.handleSelect=function(e,n){n===void 0&&(n=[]),Do(e,this)&&this.updateByState(ce.SELECTED);var i=De(n,"id");Dr(i,this.meta.id)&&this.updateByState(ce.SELECTED)},t.prototype.getTextStyle=function(){var e=this.getCellTextWordWrapStyle(),n=this.getStyle(),i=n.text,o=n.bolderText,a=n.measureText,s;return this.isMeasureField()?s=a||i:this.isBolderText()?s=o:s=i,this.getContainConditionMappingResultTextStyle(N(N({},e),s))},t.prototype.getBackgroundColor=function(){var e,n=((e=this.getStyle())===null||e===void 0?void 0:e.cell)||{},i=n.backgroundColor,o=n.backgroundColorOpacity;return bl({backgroundColor:i,backgroundColorOpacity:o},this.getBackgroundConditionFill())},t.prototype.toggleActionIcon=function(e){if(this.getMeta().id===e){var n=[];Me(this.actionIcons,function(i){i.parsedStyle.visibility!=="visible"&&(i.setAttribute("visibility","visible"),n.push(i))}),this.spreadsheet.store.set("visibleActionIcons",n)}},t.prototype.getIconPosition=function(){return this.leftIconPosition||this.rightIconPosition},t.prototype.update=function(){var e=this.spreadsheet.interaction,n=e==null?void 0:e.getState(),i=e==null?void 0:e.getCells([ie.CORNER_CELL,ie.COL_CELL,ie.ROW_CELL,ie.SERIES_NUMBER_CELL]);if(!!Sl(i))switch(n==null?void 0:n.stateName){case ce.SELECTED:case ce.ROW_CELL_BRUSH_SELECTED:case ce.COL_CELL_BRUSH_SELECTED:this.handleSelect(i,n==null?void 0:n.nodes);break;case ce.HOVER_FOCUS:case ce.HOVER:this.handleHover(i);break;case ce.SEARCH_RESULT:this.handleSearchResult(i);break;default:this.handleByStateName(i,n==null?void 0:n.stateName);break}},t.prototype.updateByState=function(e){r.prototype.updateByState.call(this,e,this)},t.prototype.hideInteractionShape=function(){r.prototype.hideInteractionShape.call(this)},t.prototype.isMeasureField=function(){return[Ae,GB].includes(this.meta.field)},t.prototype.mappingValue=function(e){var n=this.getMeta().value;return e.mapping(n,this.meta,this)},t.prototype.findFieldCondition=function(e){var n=this;return e===void 0&&(e=[]),vp(e,function(i){return i.field instanceof RegExp?i.field.test(n.meta.field):i.field===n.meta.field})},t.prototype.getTreeIcon=function(){return this.treeIcon},t.prototype.getActionIcons=function(){return this.actionIcons||[]},t}(od),$_=function(r){oe(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(t.prototype,"cellType",{get:function(){return ie.CORNER_CELL},enumerable:!1,configurable:!0}),t.prototype.isBolderText=function(){var e=this.meta.cornerType;return e===Cr.Col},t.prototype.getBorderPositions=function(){return[ot.TOP,ot.LEFT]},t.prototype.initCell=function(){r.prototype.initCell.call(this),this.resetTextAndConditionIconShapes(),this.drawBackgroundShape(),this.drawTextShape(),this.drawTreeIcon(),this.drawActionAndConditionIcons(),this.drawBorders(),this.drawResizeArea(),this.update()},t.prototype.drawTreeIcon=function(){var e=this,n;if(!!this.showTreeIcon()){var i=((n=this.spreadsheet.options.style)===null||n===void 0?void 0:n.rowCell).collapseFields,o=i===void 0?{}:i,a=this.getStyle().icon.size,s=a===void 0?0:a,l=this.getTextStyle().fill,u=this.getBBoxByType(_t.CONTENT_BOX),d=this.spreadsheet.facet.getRowNodes(0),h=gp(o).filter(Boolean).length===d.length||d.every(function(p){return p.isCollapsed}),v=h;this.treeIcon=s_({group:this,iconCfg:{x:u.x,y:this.getIconPosition().y,width:s,height:s,fill:l},isCollapsed:v,onClick:function(){e.spreadsheet.facet.resetScrollY(),e.spreadsheet.emit(U.ROW_CELL_ALL_COLLAPSED__PRIVATE,v)}})}},t.prototype.isLastRowCornerCell=function(){var e=this.meta,n=e.cornerType,i=e.field,o=this.spreadsheet.dataSet.fields.rows;return n===Cr.Row&&(this.spreadsheet.isHierarchyTreeType()||It(o)===i)},t.prototype.getResizeAreaEffect=function(){var e=this.meta.cornerType;return e===Cr.Series?mr.Series:this.isLastRowCornerCell()&&this.spreadsheet.isHierarchyTreeType()?mr.Tree:mr.Field},t.prototype.drawResizeArea=function(){if(!!this.shouldDrawResizeAreaByType("cornerCellHorizontal",this)){var e=this.getResizeAreaStyle(),n=Ho(this.spreadsheet,jc);if(!!n){var i=this.getHeaderConfig(),o=i.position,a=i.scrollX,s=a===void 0?0:a,l=i.scrollY,u=l===void 0?0:l,d=i.width,h=i.height,v=this.getBBoxByType(),p=v.x,g=v.y,m=v.width,C=v.height,w=this.meta.cornerType,_={x:p+m-e.size,y:g,width:e.size,height:C},S={x:0,y:0,width:d,height:h};if(!(w===Cr.Col||!Al(_,S,{scrollX:s,scrollY:u}))){var b=o.x+p-s,T=o.y+(this.isLastRowCornerCell()?0:g),E=ul({theme:e,type:sr.Horizontal,effect:this.getResizeAreaEffect(),offsetX:b,offsetY:T,width:m,height:C,meta:this.meta});n.appendChild(new ja({style:N(N({},E.style),{x:b+m-e.size,y:T,height:this.isLastRowCornerCell()?h:C})},E.appendInfo))}}}},t.prototype.showTreeIcon=function(){return this.spreadsheet.isHierarchyTreeType()&&this.meta.cornerType===Cr.Row},t.prototype.getTreeIconWidth=function(){var e=this.getStyle().icon,n=e.size,i=e.margin;return this.showTreeIcon()?n+i.right:0},t.prototype.getMaxTextWidth=function(){var e=this.getBBoxByType(_t.CONTENT_BOX).width;return e-this.getTreeIconWidth()-this.getActionAndConditionIconWidth()},t.prototype.getTextPosition=function(){var e=this.getBBoxByType(_t.CONTENT_BOX),n=e.x,i=e.y,o=e.height,a=e.width,s=this.getTextStyle(),l=ss({bbox:{x:n+this.getTreeIconWidth(),y:i,width:a-this.getTreeIconWidth(),height:o},textAlign:s.textAlign,textWidth:this.getActualTextWidth(),groupedIcons:this.groupedIcons,iconStyle:this.getIconStyle()}),u=l.textX,d=l.leftIconX,h=l.rightIconX,v=al(e,s.textBaseline),p=this.getStyle().icon.size,g=p===void 0?0:p,m=Rl(g,v,s.fontSize,s.textBaseline);return this.leftIconPosition={x:d,y:m},this.rightIconPosition={x:h,y:m},{x:u,y:v}},t.prototype.getFormattedFieldValue=function(){return u_(this.meta,this.spreadsheet.dataSet.getFieldName(this.meta.field))},t}(dd),kG=function(r){oe(t,r);function t(e){return r.call(this,e)||this}return t.prototype.getCellInstance=function(e){var n=this.getHeaderConfig(),i=n.spreadsheet,o=i.options.cornerCell;return(o==null?void 0:o(e,i,n))||new $_(e,i,n)},t.getCornerHeader=function(e){var n=e.panelBBox,i=e.cornerBBox,o=e.seriesNumberWidth,a=e.layoutResult,s=e.spreadsheet,l=n.width,u=n.height,d=i.originalWidth,h=i.originalHeight,v=i.width,p=i.height,g=this.getCornerNodes({position:{x:i.x,y:i.y},width:d,height:h,layoutResult:a,seriesNumberWidth:o,spreadsheet:s});return new t({nodes:g,position:{x:i.x,y:i.y},width:v,height:p,originalHeight:h,originalWidth:d,viewportWidth:l,viewportHeight:u,seriesNumberWidth:o,spreadsheet:s})},t.getTreeCornerText=function(e){var n=e.spreadsheet,i=n.dataSet.fields.rows,o=i===void 0?[]:i,a=n.options.cornerText;if(a)return a;var s=n.store.get("drillDownFieldInLevel",[]),l=s.map(function(d){return d.drillField}),u=o.filter(function(d){return!Dr(l,d)}).map(function(d){return n.dataSet.getFieldName(d)}).join("/");return u||R6()},t.getCornerNodes=function(e){var n,i,o,a,s,l,u=e.position,d=e.width,h=e.layoutResult,v=e.seriesNumberWidth,p=e.spreadsheet,g=h.rowsHierarchy,m=h.colsHierarchy,C=((n=p==null?void 0:p.dataSet)===null||n===void 0?void 0:n.fields)||{},w=C.rows,_=w===void 0?[]:w,S=C.columns,b=S===void 0?[]:S,T=p.options.style.colCell,E=[],R=m==null?void 0:m.sampleNodeForLastLevel;if(v){var O=new Ft({id:"",field:"",value:nd((i=p.options.seriesNumber)===null||i===void 0?void 0:i.text)});O.x=u==null?void 0:u.x,O.y=(o=R==null?void 0:R.y)!==null&&o!==void 0?o:0,O.width=v,O.height=(a=R==null?void 0:R.height)!==null&&a!==void 0?a:T==null?void 0:T.height,O.isPivotMode=!0,O.spreadsheet=p,O.cornerType=Cr.Series,E.push(O)}if(p.isHierarchyTreeType()){var A=this.getTreeCornerText(e),P=new Ft({id:A,field:"",value:A});P.x=u.x+v,P.y=(s=R==null?void 0:R.y)!==null&&s!==void 0?s:0,P.width=d-v,P.height=(l=R==null?void 0:R.height)!==null&&l!==void 0?l:T==null?void 0:T.height,P.seriesNumberWidth=v,P.isPivotMode=!0,P.spreadsheet=p,P.cornerType=Cr.Row,E.push(P)}else{var D=g.sampleNodesForAllLevels||[],k=p.isCustomRowFields();D.forEach(function(Z){var Q,Y,te=k?Z.field:_[Z.level],ae=p.dataSet.getFieldName(te),pe=new Ft({id:te,field:te,value:ae});pe.x=Z.x+v,pe.y=(Q=R==null?void 0:R.y)!==null&&Q!==void 0?Q:0,pe.width=Z.width,pe.height=(Y=R==null?void 0:R.height)!==null&&Y!==void 0?Y:T==null?void 0:T.height,pe.isPivotMode=!0,pe.cornerType=Cr.Row,pe.spreadsheet=p,E.push(pe)})}var z=m.sampleNodesForAllLevels||[],V=p.isCustomColumnFields();return z.forEach(function(Z){if(Z.level<m.maxLevel){var Q=V?Z.field:b[Z.level],Y=p.dataSet.getFieldName(Q),te=new Ft({id:Q,field:Q,value:Y});te.x=u.x,te.y=Z.y,te.width=d,te.height=Z.height,te.isPivotMode=!0,te.cornerType=Cr.Col,te.spreadsheet=p,E.push(te)}}),E},t.prototype.onCorScroll=function(e,n){this.headerConfig.scrollX=e,this.render(n)},t.prototype.destroy=function(){r.prototype.destroy.call(this)},t.prototype.layout=function(){this.renderCells()},t.prototype.renderCells=function(){var e=this,n,i=this.getHeaderConfig(),o=i.nodes,a=i.spreadsheet,s=(n=a.options)===null||n===void 0?void 0:n.cornerHeader;if(s){s(this,a,this.headerConfig);return}o.forEach(function(l){var u=e.getCellInstance(l);e.appendChild(u),a.emit(U.CORNER_CELL_RENDER,u),a.emit(U.LAYOUT_CELL_RENDER,u)})},t.prototype.offset=function(){var e=this.getHeaderConfig().scrollX,n=e===void 0?0:e;Mf(this,-n)},t.prototype.clip=function(){var e=this.getHeaderConfig(),n=e.width,i=e.height;this.style.clipPath=new wt({style:{x:0,y:0,width:n,height:i}})},t.prototype.getNodes=function(){return this.headerConfig.nodes||[]},t}(sd);function Ke(r,t){return t===void 0&&(t=2),Lk(r,t)}var _n=function(r){oe(t,r);function t(e){var n=r.call(this)||this;return n.cfg=e,n.render(),n}return t.prototype.layout=function(){this.addCornerBottomBorder(),this.addCornerRightBorder(),this.addSplitLineShadow()},t.prototype.render=function(){this.removeChildren(),this.layout()},t.getHorizontalBorderWidth=function(e){var n,i=((n=e.theme)===null||n===void 0?void 0:n.splitLine).horizontalBorderWidth;return i},t.getVerticalBorderWidth=function(e){var n,i=e.theme,o=i.splitLine,a=i.cornerCell,s=i.colCell,l=i.dataCell;return e.isPivotMode()?o==null?void 0:o.verticalBorderWidth:Math.max(l.cell.verticalBorderWidth,!((n=e.options.seriesNumber)===null||n===void 0)&&n.enable?a.cell.verticalBorderWidth:s.cell.verticalBorderWidth)},t.prototype.onBorderScroll=function(e){this.cfg.scrollX=e;var n=this.cfg.position;Pn(this,n.x-e,0),this.render()},t.prototype.onChangeShadowVisibility=function(e,n){this.cfg.showViewportLeftShadow=e>0,this.cfg.showViewportRightShadow=Ke(e)<Ke(n),this.render()},t.prototype.addCornerRightBorder=function(){var e,n,i=this.cfg,o=i.cornerWidth,a=i.cornerHeight,s=i.viewportHeight,l=i.position,u=i.spreadsheet,d=(e=u.theme)===null||e===void 0?void 0:e.splitLine,h=d.verticalBorderColor,v=d.verticalBorderColorOpacity,p=d.horizontalBorderWidth,g=t.getVerticalBorderWidth(u),m=l.x+o+g/2;if(u.isPivotMode()){var C=l.y+a+p+s;Xt(this,{x1:m,y1:l.y,x2:m,y2:C,stroke:h,lineWidth:g,opacity:v});return}var w=!((n=u.options.seriesNumber)===null||n===void 0)&&n.enable?u.theme.cornerCell.cell:u.theme.colCell.cell,_=w.verticalBorderColor,S=w.verticalBorderColorOpacity;Xt(this,{x1:m,y1:l.y,x2:m,y2:l.y+a,stroke:_,lineWidth:g,opacity:S});var b=u.theme.dataCell.cell,T=b.verticalBorderColor,E=b.verticalBorderColorOpacity;Xt(this,{x1:m,y1:l.y+a+p,x2:m,y2:l.y+a+p+s,stroke:T,lineWidth:g,opacity:E})},t.prototype.addCornerBottomBorder=function(){var e,n=this.cfg,i=n.cornerWidth,o=n.cornerHeight,a=n.viewportWidth,s=n.position,l=n.scrollX,u=l===void 0?0:l,d=n.spreadsheet,h=(e=d.theme)===null||e===void 0?void 0:e.splitLine,v=h.horizontalBorderColor,p=h.horizontalBorderWidth,g=h.horizontalBorderColorOpacity,m=s.x,C=m+i+t.getVerticalBorderWidth(d)+a+(d.isFrozenRowHeader()?0:u),w=s.y+o+p/2;Xt(this,{x1:m,y1:w,x2:C,y2:w,stroke:v,lineWidth:p,opacity:g})},t.prototype.addSplitLineShadow=function(){var e,n=this.cfg,i=n.spreadsheet,o=(e=i.theme)===null||e===void 0?void 0:e.splitLine;!i.isPivotMode()||!(o!=null&&o.showShadow)||!i.isFrozenRowHeader()||(this.addSplitLineLeftShadow(),this.addSplitLineRightShadow())},t.prototype.addSplitLineLeftShadow=function(){var e;if(!!this.cfg.showViewportLeftShadow){var n=this.cfg,i=n.cornerWidth,o=n.cornerHeight,a=n.viewportHeight,s=n.position,l=n.spreadsheet,u=(e=l.theme)===null||e===void 0?void 0:e.splitLine,d=u.shadowColors,h=u.shadowWidth,v=u.horizontalBorderWidth,p=s.x+i+t.getVerticalBorderWidth(l),g=s.y;this.appendChild(new wt({style:{x:p,y:g,width:h,height:o+v+a,fill:"l (0) 0:".concat(d==null?void 0:d.left," 1:").concat(d==null?void 0:d.right)}}))}},t.prototype.addSplitLineRightShadow=function(){var e;if(!!this.cfg.showViewportRightShadow){var n=this.cfg,i=n.cornerWidth,o=n.cornerHeight,a=n.viewportHeight,s=n.viewportWidth,l=n.position,u=n.spreadsheet,d=(e=u.theme)===null||e===void 0?void 0:e.splitLine,h=d.shadowColors,v=d.shadowWidth,p=d.horizontalBorderWidth,g=l.x+i+t.getVerticalBorderWidth(u)+s-v,m=l.y;this.appendChild(new wt({style:{x:g,y:m,width:v,height:o+p+a,fill:"l (0) 0:".concat(h==null?void 0:h.right," 1:").concat(h==null?void 0:h.left)}}))}},t}(ft),HG=function(r){oe(t,r);function t(e){var n=r.call(this,e)||this;return n.initGroups(),n}return t.prototype.initGroups=function(){this.scrollGroup=this.appendChild(new ft({name:T6,style:{zIndex:zx}})),this.frozenRowGroup=this.appendChild(new ft({name:b6,style:{zIndex:nl}}))},t.prototype.getCellInstance=function(e){var n=this.getHeaderConfig(),i=n.spreadsheet,o=i.options.rowCell;return(o==null?void 0:o(e,i,n))||new hd(e,i,n)},t.prototype.isRowCellInRect=function(e){var n=this.getHeaderConfig(),i=n.width,o=n.viewportHeight,a=n.position,s=n.scrollY,l=s===void 0?0:s,u=n.scrollX,d=u===void 0?0:u;return this.isFrozenRow(e)?!0:o+l>e.y&&l<e.y+e.height&&i-a.x+d>e.x&&d-a.x<e.x+e.width},t.prototype.isFrozenRow=function(e){var n=this.headerConfig.spreadsheet,i=n.facet,o=R_(n.options,i.getRowNodes()).rowCount,a=o===void 0?0:o;return a>0&&e.rowIndex>=0&&e.rowIndex<a},t.prototype.getCellGroup=function(e){return this.isFrozenRow(e)?this.frozenRowGroup:this.scrollGroup},t.prototype.layout=function(){var e=this,n=this.getHeaderConfig(),i=n.nodes,o=n.spreadsheet;Me(i,function(a){if(e.isRowCellInRect(a)&&a.height!==0){var s=e.getCellGroup(a);a.isFrozen=s!==e.scrollGroup;var l=e.getCellInstance(a);a.belongsCell=l,s.appendChild(l),o.emit(U.ROW_CELL_RENDER,l),o.emit(U.LAYOUT_CELL_RENDER,l)}})},t.prototype.offset=function(){var e=this.getHeaderConfig(),n=e.scrollX,i=n===void 0?0:n,o=e.scrollY,a=o===void 0?0:o,s=e.position,l=s.x-i;Pn(this.scrollGroup,l,s.y-a),Pn(this.frozenRowGroup,l,s.y)},t.prototype.clip=function(){var e=this.getHeaderConfig(),n=e.width,i=e.viewportHeight,o=e.position,a=e.spreadsheet,s=a.facet.frozenGroupInfo[ut.FROZEN_ROW].height;this.scrollGroup.style.clipPath=new wt({style:{x:a.facet.cornerBBox.x,y:o.y+s,width:n,height:i}}),this.frozenRowGroup.style.clipPath=new wt({style:{x:a.facet.cornerBBox.x,y:o.y,width:n,height:s}})},t.prototype.clear=function(){var e,n;(e=this.scrollGroup)===null||e===void 0||e.removeChildren(),(n=this.frozenRowGroup)===null||n===void 0||n.removeChildren()},t}(sd),Up=function(r){oe(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(t.prototype,"cellType",{get:function(){return ie.ROW_CELL},enumerable:!1,configurable:!0}),t.prototype.getBorderPositions=function(){return[ot.LEFT,ot.BOTTOM]},t.prototype.initCell=function(){this.drawBackgroundShape(),this.drawInteractiveBgShape(),this.drawInteractiveBorderShape(),this.drawBorders(),this.drawTextShape(),this.update()},t.prototype.getBackgroundColor=function(){var e=this.getCrossBackgroundColor(this.meta.rowIndex),n=e.backgroundColor,i=e.backgroundColorOpacity;return{backgroundColor:n,backgroundColorOpacity:i,intelligentReverseTextColor:!1}},t.prototype.getTextStyle=function(){var e,n=this.getCellTextWordWrapStyle(ie.SERIES_NUMBER_CELL),i=(e=this.getStyle())===null||e===void 0?void 0:e.seriesText;return N(N({},n),i)},t.prototype.getFormattedFieldValue=function(){var e,n=this.meta,i=n.value,o=n.field,a=this.spreadsheet.dataSet.getFieldFormatter(o),s=(e=a==null?void 0:a(i,void 0,this.meta))!==null&&e!==void 0?e:i;return{value:i,formattedValue:s}},t.prototype.getMaxTextWidth=function(){var e=this.getBBoxByType(_t.CONTENT_BOX).width;return e},t.prototype.getTextPosition=function(){var e,n,i=this.headerConfig,o=i.scrollY,a=i.viewportHeight,s=this.getTextStyle(),l=this.getStyle().cell,u={start:o,size:a},d=this.getBBoxByType(_t.CONTENT_BOX),h=kp(u,{start:d.y,size:d.height},{align:Fp(s.textBaseline),size:{textSize:s.fontSize},padding:{start:(e=l==null?void 0:l.padding)===null||e===void 0?void 0:e.top,end:(n=l==null?void 0:l.padding)===null||n===void 0?void 0:n.bottom}}).textStart,v=ss({bbox:d,textAlign:s.textAlign,textWidth:this.getActualTextWidth(),iconStyle:this.getIconStyle(),groupedIcons:this.groupedIcons}).textX;return{x:v,y:h}},t.prototype.isBolderText=function(){return!1},t.prototype.findFieldCondition=function(){},t.prototype.mappingValue=function(){},t.prototype.getIconPosition=function(){return{x:0,y:0}},t}(dd),zG=function(r,t,e){var n=e.isHierarchyTreeType(),i=r.getNodes(0);return i.map(function(o,a){var s="".concat(a+1),l=new Ft({id:s,field:"",rowIndex:a,value:s});return l.x=o.x,l.y=o.y,l.width=t,l.height=n?o.getTotalHeightForTreeHierarchy():o.height,l.isLeaf=!0,l.spreadsheet=e,l})},GG=function(r){oe(t,r);function t(e){return r.call(this,e)||this}return t.prototype.getCellInstance=function(e){var n=this.getHeaderConfig(),i=n.spreadsheet,o=i.options.seriesNumberCell;return(o==null?void 0:o(e,i,n))||new Up(e,i,n)},t.getSeriesNumberHeader=function(e){var n,i,o=e.panelBBox,a=e.seriesNumberWidth,s=e.rowsHierarchy,l=e.spreadsheet,u=e.cornerWidth,d=o.height,h=o.viewportHeight,v=(i=(n=l.options)===null||n===void 0?void 0:n.layoutSeriesNumberNodes)!==null&&i!==void 0?i:zG;return new t({width:u,height:d,viewportWidth:u,viewportHeight:h,position:{x:0,y:o.y},nodes:v(s,a,l),spreadsheet:l})},t.prototype.clip=function(){var e=this.getHeaderConfig(),n=e.width,i=e.height,o=e.viewportHeight,a=e.position,s=e.spreadsheet;this.style.clipPath=new wt({style:{x:s.facet.cornerBBox.x,y:a.y,width:n,height:i+o}})},t.prototype.layout=function(){var e=this,n=this.getHeaderConfig(),i=n.nodes,o=n.scrollY,a=o===void 0?0:o,s=n.viewportHeight,l=n.spreadsheet;Me(i,function(u){var d=u.y,h=u.height,v=e.isHeaderCellInViewport({cellPosition:d,cellSize:h,viewportPosition:a,viewportSize:s});if(!!v){var p=e.getCellInstance(u);u.belongsCell=p,e.appendChild(p),l.emit(U.SERIES_NUMBER_CELL_RENDER,p),l.emit(U.LAYOUT_CELL_RENDER,p)}})},t.prototype.offset=function(){var e=this.getHeaderConfig(),n=e.scrollY,i=n===void 0?0:n,o=e.scrollX,a=o===void 0?0:o,s=e.position;Pn(this,s.x-a,s.y-i)},t.prototype.getNodes=function(){var e=this.getHeaderConfig().nodes;return e||[]},t}(sd),q_=function(r){var t=r.includes(xr)?"id":"field";return t},gv=function(r,t){t===void 0&&(t=[]);var e=r.facet.getInitColLeafNodes();return Hn(t.map(function(n){var i=q_(n);return e.find(function(o){return o[i]===n})}))},WG=function(r,t){if(t===void 0&&(t=[]),se(t))return{prev:null,next:null};var e=r.facet.getInitColLeafNodes(),n=gv(r,t).map(function(l){return l==null?void 0:l.colIndex}),i=Math.max.apply(Math,X([],F(n),!1)),o=Math.min.apply(Math,X([],F(n),!1)),a=e.find(function(l){return l.colIndex===i+1}),s=e.find(function(l){return l.colIndex===o-1});return{prev:s||null,next:a||null}},UG=function(r,t){if(se(t))return[];var e=Number.NEGATIVE_INFINITY;return r.reduce(function(n,i,o){if(!t.includes(i))return n;if(o===e+1){var a=It(n);a==null||a.push(i)}else{var s=[i];n.push(s)}return e=o,n},[])},Ym=function(r,t,e){return t===void 0&&(t=[]),e===void 0&&(e=!1),jt(void 0,void 0,void 0,function(){var n,i,o,a,s,l,u,d,h;return er(this,function(v){switch(v.label){case 0:return n=function(p,g){return p===void 0&&(p=[]),g===void 0&&(g=[]),jt(void 0,void 0,void 0,function(){return er(this,function(m){switch(m.label){case 0:return r.setOptions({interaction:{hiddenColumnFields:p}}),r.interaction.reset(),r.store.set("hiddenColumnsDetail",g),[4,r.render({reloadData:!1,reBuildHiddenColumnsDetail:!1})];case 1:return m.sent(),[2]}})})},se(t)&&e?[4,n()]:[3,2];case 1:return v.sent(),[2];case 2:return i=r.store.get("hiddenColumnsDetail",[]),o=r.options.interaction.hiddenColumnFields,a=o===void 0?[]:o,wr(t,a)&&!e?[2]:(s=to(X(X([],F(t),!1),F(a),!1)),l=gv(r,s).every(function(p,g,m){var C=m[g+1];return!C||Math.abs(p.colIndex-C.colIndex)===1}),u=WG(r,l?s:t),d={hideColumnNodes:gv(r,t),displaySiblingNode:u},h=X(X([],F(i),!1),[d],!1),r.emit(U.COL_CELL_HIDDEN,d,h),[4,n(s,h)]);case 3:return v.sent(),[2]}})})},VG=function(r){var t=r.dataCfg.fields.columns,e=t===void 0?[]:t;return r.isTableMode()&&!r.isCustomColumnFields()?e:r.facet.getInitColLeafNodes().map(function(n){var i=n.id;return i})},Vp=function(r,t,e){return t===void 0&&(t=[]),e===void 0&&(e=!1),jt(void 0,void 0,void 0,function(){var n,i,o;return er(this,function(a){switch(a.label){case 0:return se(t)&&e?[4,Ym(r,t,!0)]:[3,2];case 1:a.sent(),a.label=2;case 2:return n=VG(r),i=Il(n),o=UG(i,t),[4,Promise.all(o.map(function(s){return jt(void 0,void 0,void 0,function(){return er(this,function(l){switch(l.label){case 0:return[4,Ym(r,s,e)];case 1:return l.sent(),[2]}})})}))];case 3:return a.sent(),[2]}})})},YG=function(r,t){var e=r.facet.getColNodes(),n=r.facet.getInitColLeafNodes(),i=q_(t);return ze(It(e),i)===t&&ze(It(n),i)!==t},XG=function(r){return(r==null?void 0:r.next)||(r==null?void 0:r.prev)},$G=function(r){var t=XG(r);return t==null?void 0:t.id},yv=function(r,t){return $G(r)===t},hl=function(r){oe(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(t.prototype,"cellType",{get:function(){return ie.COL_CELL},enumerable:!1,configurable:!0}),t.prototype.getBorderPositions=function(){return[ot.TOP,ot.RIGHT]},t.prototype.initCell=function(){r.prototype.initCell.call(this),this.drawBackgroundShape(),this.drawInteractiveBgShape(),this.drawInteractiveBorderShape(),this.drawTextShape(),this.drawActionAndConditionIcons(),this.drawBorders(),this.drawResizeArea(),this.addExpandColumnIconShapes(),this.update()},t.prototype.getFormattedFieldValue=function(){var e,n=this.meta,i=n.extra,o=n.value,a=n.field,s=this.spreadsheet.dataSet.fields,l=(i==null?void 0:i.isCustomNode)&&((e=s==null?void 0:s.values)===null||e===void 0?void 0:e.includes(a));return l?{formattedValue:o,value:o}:r.prototype.getFormattedFieldValue.call(this)},t.prototype.getMaxTextWidth=function(){var e=this.getBBoxByType(_t.CONTENT_BOX).width;return e-this.getActionAndConditionIconWidth()},t.prototype.isBolderText=function(){var e=this.meta,n=e.isLeaf,i=e.isTotals;return!!(i||!n)},t.prototype.handleViewport=function(){var e=this.getHeaderConfig(),n=e.width,i=e.cornerWidth,o=i===void 0?0:i,a=e.scrollX,s=a===void 0?0:a,l=!this.spreadsheet.isFrozenRowHeader(),u={start:s-(l?o:0),size:n+(l?o:0)};return u},t.prototype.getTextPosition=function(){var e,n,i,o=this.meta.isLeaf,a=this.getTextStyle(),s=this.getBBoxByType(_t.CONTENT_BOX),l=this.getIconStyle(),u=al(s,a.textBaseline),d=Rl(l.size,u,a.fontSize,a.textBaseline);if(o){var h=ss({bbox:s,textWidth:this.getActualTextWidth(),textAlign:a.textAlign,groupedIcons:this.groupedIcons,iconStyle:l}),v=h.textX,p=h.leftIconX,g=h.rightIconX;return this.leftIconPosition={x:p,y:d},this.rightIconPosition={x:g,y:d},{x:v,y:u}}var m=this.handleViewport(),C=this.getStyle(),w=C.cell,_=C.icon,S=this.getTextStyle(),b=S.textAlign,T=S.textBaseline,E=kp(m,{start:s.x,size:s.width},{align:Fp(b),size:{textSize:this.getActualTextWidth(),iconStartSize:this.getActionAndConditionIconWidth("left"),iconEndSize:this.getActionAndConditionIconWidth("right")},padding:{start:(e=w==null?void 0:w.padding)===null||e===void 0?void 0:e.left,end:(n=w==null?void 0:w.padding)===null||n===void 0?void 0:n.right,betweenTextAndEndIcon:(i=_==null?void 0:_.margin)===null||i===void 0?void 0:i.left}}),R=E.textStart,O=E.iconStart,A=E.iconEnd,P=al(s,T);return this.leftIconPosition={x:O,y:d},this.rightIconPosition={x:A,y:d},{x:R,y:P}},t.prototype.getColResizeArea=function(){return Ho(this.spreadsheet,Gx)},t.prototype.getHorizontalResizeAreaName=function(){return"".concat(Ux).concat(this.meta.field)},t.prototype.isCrossColumnLeafNode=function(){var e,n=this.spreadsheet.facet.getLayoutResult().colsHierarchy,i=this.meta,o=i.level,a=i.isLeaf;return((e=n==null?void 0:n.sampleNodeForLastLevel)===null||e===void 0?void 0:e.level)!==o&&a},t.prototype.drawHorizontalResizeArea=function(){var e,n,i=((n=(e=this.spreadsheet.options.style)===null||e===void 0?void 0:e.colCell)===null||n===void 0?void 0:n.height)===0;if(!(i||!this.shouldDrawResizeAreaByType("colCellVertical",this))){var o=this.meta,a=o.y,s=o.height,l=this.getResizeAreaStyle(),u=this.getColResizeArea();if(!(!u||this.isCrossColumnLeafNode())){var d=this.getHorizontalResizeAreaName(),h=u==null?void 0:u.find(function(g){return g.name===d});if(!h){var v=this.getResizeAreaWidth(),p=ul({theme:l,type:sr.Vertical,effect:mr.Field,offsetX:0,offsetY:a,width:v,height:s,meta:this.meta});u.appendChild(new ja({name:d,style:N(N({},p.style),{x:0,y:a+s-l.size,width:v})},p.appendInfo))}}}},t.prototype.getResizeAreaWidth=function(){var e=this.getHeaderConfig(),n=e.cornerWidth,i=n===void 0?0:n,o=e.viewportWidth;return _n.getVerticalBorderWidth(this.spreadsheet)+i+o},t.prototype.shouldAddVerticalResizeArea=function(){var e=this.meta,n=e.x,i=e.y,o=e.width,a=e.height,s=this.getHeaderConfig(),l=s.scrollX,u=s.scrollY,d=s.cornerWidth,h=d===void 0?0:d,v=s.height,p=s.width,g=!this.spreadsheet.isFrozenRowHeader(),m=this.getResizeAreaStyle(),C={x:n+o-m.size,y:i,width:m.size,height:a},w={x:g?-h:0,y:0,width:g?h+p:p,height:v};return Al(C,w,{scrollX:l,scrollY:u})},t.prototype.getVerticalResizeAreaOffset=function(){var e=this.meta,n=e.x,i=e.y,o=this.getHeaderConfig(),a=o.scrollX,s=a===void 0?0:a,l=o.position;return{x:(l==null?void 0:l.x)+n-s,y:(l==null?void 0:l.y)+i}},t.prototype.drawVerticalResizeArea=function(){if(!(!this.meta.isLeaf||!this.shouldDrawResizeAreaByType("colCellHorizontal",this))){var e=this.meta,n=e.width,i=e.height,o=this.getResizeAreaStyle(),a=this.getColResizeArea();if(!(!a||!this.shouldAddVerticalResizeArea())){var s=this.getVerticalResizeAreaOffset(),l=s.x,u=s.y,d=ul({theme:o,type:sr.Horizontal,effect:mr.Cell,offsetX:l,offsetY:u,width:n,height:i,meta:this.meta});a.appendChild(new ja({style:N(N({},d.style),{x:l+n-o.size,y:u,height:i})},d.appendInfo))}}},t.prototype.drawResizeArea=function(){this.drawHorizontalResizeArea(),this.drawVerticalResizeArea()},t.prototype.hasHiddenColumnCell=function(){var e=this,n,i=this.spreadsheet.options,o=i.interaction,a=i.tooltip,s=this.spreadsheet.store.get("hiddenColumnsDetail",[]);return se(s)||se(o==null?void 0:o.hiddenColumnFields)||!(!((n=a==null?void 0:a.operation)===null||n===void 0)&&n.hiddenColumns)?!1:!!s.find(function(l){return yv(l==null?void 0:l.displaySiblingNode,e.meta.id)})},t.prototype.getExpandIconTheme=function(){var e=this.getStyle();return e.icon},t.prototype.addExpandColumnSplitLine=function(){var e=this.getBBoxByType(),n=e.x,i=e.y,o=e.width,a=e.height,s=this.theme.splitLine,l=s.horizontalBorderColor,u=s.horizontalBorderColorOpacity,d=this.isLastColumn()?n+o:n;Xt(this,{x1:d,y1:i,x2:d,y2:i+a,stroke:l,lineWidth:bf,strokeOpacity:u})},t.prototype.addExpandColumnIconShapes=function(){!this.hasHiddenColumnCell()||(this.addExpandColumnSplitLine(),this.addExpandColumnIcons())},t.prototype.addExpandColumnIcons=function(){var e=this.isLastColumn();this.addExpandColumnIcon(e),this.isAllDisplaySiblingNodeHidden()&&e&&this.addExpandColumnIcon(!1)},t.prototype.addExpandColumnIcon=function(e){var n=this,i=this.getExpandColumnIconConfig(e),o=Ll(this,N(N({},i),{name:"ExpandColIcon",cursor:"pointer"}));o.addEventListener("click",function(){n.spreadsheet.emit(U.COL_CELL_EXPANDED,n.meta)})},t.prototype.getExpandColumnIconConfig=function(e){var n=this.getExpandIconTheme().size,i=n===void 0?0:n,o=this.getBBoxByType(),a=o.x,s=o.y,l=o.width,u=o.height,d=a-i,h=e?d+l:d,v=s+u/2-i/2;return{x:h,y:v,width:i*2,height:i}},t.prototype.isLastColumn=function(){return YG(this.spreadsheet,this.meta.id)},t.prototype.isAllDisplaySiblingNodeHidden=function(){var e=this.meta.id,n=this.spreadsheet.store.get("hiddenColumnsDetail",[]),i=n.find(function(a){var s,l=a.displaySiblingNode;return((s=l==null?void 0:l.next)===null||s===void 0?void 0:s.id)===e}),o=n.find(function(a){var s,l=a.displaySiblingNode;return((s=l==null?void 0:l.prev)===null||s===void 0?void 0:s.id)===e});return o&&i},t}(dd),Ff=function(r){oe(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.handleRestOptions=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var i=F(e,1),o=i[0];this.headerConfig=N({},o);var a=this.meta.field,s=this.spreadsheet.dataCfg.sortParams,l=$t(s,function(d){return(d==null?void 0:d.sortFieldId)===a}),u=X_(l,!0);this.headerConfig.sortParam=N(N(N({},this.headerConfig.sortParam),l||{}),{type:u})},t.prototype.getFormattedFieldValue=function(){return u_(this.meta,this.spreadsheet.dataSet.getFieldName(this.meta.field))},t.prototype.shouldAddVerticalResizeArea=function(){if(this.getMeta().isFrozen)return!0;var e=this.getHeaderConfig(),n=e.scrollX,i=e.scrollY,o=e.width,a=e.height,s=e.spreadsheet,l=this.getBBoxByType(),u=l.x,d=l.y,h=l.width,v=l.height,p=this.getResizeAreaStyle(),g={x:u+h-p.size,y:d,width:p.size,height:v},m=s.facet.frozenGroupInfo,C=m[ut.FROZEN_COL].width,w=m[ut.FROZEN_TRAILING_COL].width,_={x:C,y:0,width:o-C-w,height:a};return Al(g,_,{scrollX:n,scrollY:i})},t.prototype.getVerticalResizeAreaOffset=function(){var e=this.meta,n=e.x,i=e.y,o=this.getHeaderConfig(),a=o.scrollX,s=a===void 0?0:a,l=o.position;return this.getMeta().isFrozen?{x:(l==null?void 0:l.x)+n,y:(l==null?void 0:l.y)+i}:{x:(l==null?void 0:l.x)+n-s,y:(l==null?void 0:l.y)+i}},t.prototype.getColResizeArea=function(){return this.getMeta().isFrozen?Ho(this.spreadsheet,Wx):r.prototype.getColResizeArea.call(this)},t.prototype.isSortCell=function(){return!0},t.prototype.showSortIcon=function(){return this.spreadsheet.options.showDefaultHeaderActionIcon},t.prototype.getTextStyle=function(){var e,n=this.getCellTextWordWrapStyle(),i=(e=this.getStyle())===null||e===void 0?void 0:e.bolderText;return N(N({},n),i)},t.prototype.getHorizontalResizeAreaName=function(){return"".concat(Ux).concat(this.meta.id)},t.prototype.drawBackgroundShape=function(){var e=this.getStyle().cell||{},n=e.backgroundColor,i=e.backgroundColorOpacity;this.backgroundShape=uo(this,N(N({},this.getBBoxByType()),{fill:n,fillOpacity:i}))},t.prototype.handleViewport=function(){var e=r.prototype.handleViewport.call(this);return this.getMeta().isFrozen&&(e.start=0),e},t}(hl),Xm=function(r){oe(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getStyle=function(e){var n;return e?ze(this.theme,e):(n=this.theme)===null||n===void 0?void 0:n.cornerCell},t.prototype.showSortIcon=function(){return!1},t}(Ff),kf=function(r){oe(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getLinkFieldStyle=function(){return this.theme.rowCell.text.linkTextFill},t.prototype.drawBorders=function(){!this.meta.isFrozenCorner||od.prototype.drawBorders.call(this)},t.prototype.shouldDrawResizeArea=function(){var e="".concat(this.meta.rowIndex),n=Ho(this.spreadsheet,Qa),i=Ho(this.spreadsheet,Jc);return!(n!=null&&n.getElementById(e))&&!(i!=null&&i.getElementById(e))},t.prototype.drawResizeArea=function(){if(!!this.shouldDrawResizeArea()){var e=this.getBBoxByType(),n=e.y,i=e.height,o=this.meta.rowIndex,a=this.getResizeAreaStyle(),s=this.spreadsheet.options.frozen,l=s.rowCount,u=l===void 0?0:l,d=s.trailingRowCount,h=d===void 0?0:d,v=this.spreadsheet.facet.getCellRange(),p=ad(o,v.start,u),g=Ol(o,v.end,h),m=p||g,C=m?Jc:Qa,w=Ho(this.spreadsheet,C);if(!!w){var _=this.spreadsheet.facet.columnHeader.getHeaderConfig(),S=_.height,b=_.viewportWidth,T=this.spreadsheet.facet.getScrollOffset().scrollY,E=this.spreadsheet.facet.getPaginationScrollY(),R=n+S+_n.getHorizontalBorderWidth(this.spreadsheet),O=this.spreadsheet.facet.frozenGroupInfo,A=O[ut.FROZEN_ROW].height,P=O[ut.FROZEN_TRAILING_ROW].height,D={x:0,y:n+i-a.size,width:b,height:a.size},k={x:0,y:A,width:b,height:this.spreadsheet.facet.panelBBox.height-A-P};if(!(!m&&!Al(D,k,{scrollX:0,scrollY:T}))){m||(R-=T+E);var z=b+_n.getVerticalBorderWidth(this.spreadsheet),V=ul({theme:a,type:sr.Vertical,effect:mr.Cell,offsetX:0,offsetY:R,width:z,height:i,meta:this.meta});w.appendChild(new ja({style:N(N({},V.style),{x:0,y:R+i-a.size,width:z})},V.appendInfo))}}}},t.prototype.isDisableHover=function(e){return(e==null?void 0:e.type)===ie.COL_CELL},t}(Qo),Yp=function(r){oe(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(t.prototype,"cellType",{get:function(){return ie.DATA_CELL},enumerable:!1,configurable:!0}),t.prototype.getTextStyle=function(){var e=this.getCellTextWordWrapStyle(ie.SERIES_NUMBER_CELL),n=this.theme.rowCell.seriesText;return N(N({},e),n)},t}(kf),qG=function(r){var t=0,e=r.children;return e==null||e.forEach(function(n){t+=n.height||0}),t},hd=function(r){oe(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(t.prototype,"cellType",{get:function(){return ie.ROW_CELL},enumerable:!1,configurable:!0}),t.prototype.getBorderPositions=function(){return[ot.BOTTOM,ot.LEFT]},t.prototype.initCell=function(){r.prototype.initCell.call(this),this.drawBackgroundShape(),this.drawInteractiveBgShape(),this.drawInteractiveBorderShape(),this.drawTextShape(),this.drawActionAndConditionIcons(),this.drawTreeIcon(),this.drawTreeLeafNodeAlignDot(),this.drawBorders(),this.drawResizeAreaInLeaf(),this.update()},t.prototype.getBackgroundColor=function(){var e=this.getCrossBackgroundColor(this.meta.rowIndex),n=e.backgroundColor,i=e.backgroundColorOpacity;return bl({backgroundColor:n,backgroundColorOpacity:i},this.getBackgroundConditionFill())},t.prototype.showTreeIcon=function(){return this.spreadsheet.isHierarchyTreeType()&&!this.meta.isLeaf},t.prototype.showTreeLeafNodeAlignDot=function(){var e,n;return((n=(e=this.spreadsheet.options.style)===null||e===void 0?void 0:e.rowCell)===null||n===void 0?void 0:n.showTreeLeafNodeAlignDot)&&this.spreadsheet.isHierarchyTreeType()},t.prototype.getParentTreeIconCfg=function(){var e;if(!(!this.showTreeLeafNodeAlignDot()||!this.spreadsheet.isHierarchyTreeType()||!this.meta.isLeaf)){var n=((e=this.meta.parent)===null||e===void 0?void 0:e.belongsCell).getTreeIcon();return n==null?void 0:n.style}},t.prototype.onTreeIconClick=function(){var e=this.meta,n=e.isCollapsed,i=e.hierarchy;if(!Tt()){if(!n){var o=this.spreadsheet.facet.getScrollOffset().scrollY,a=this.spreadsheet.facet.panelBBox.viewportHeight||0,s=qG(this.meta),l=i.height-s;if(o>0&&o+a>l){var u=l-a;this.spreadsheet.facet.setScrollOffset({scrollY:u>0?u:0})}}this.emitCollapseEvent()}},t.prototype.emitCollapseEvent=function(){this.spreadsheet.emit(U.ROW_CELL_COLLAPSED__PRIVATE,{isCollapsed:!this.meta.isCollapsed,node:this.meta})},t.prototype.drawTreeIcon=function(){var e=this;if(!!this.showTreeIcon()){var n=this.meta.isCollapsed,i=this.getBBoxByType(_t.CONTENT_BOX).x,o=this.getTextStyle().fill,a=this.getStyle().icon.size,s=this.getContentIndent(),l=i+s,u=this.getIconPosition().y;this.treeIcon=s_({group:this,iconCfg:{x:l,y:u,width:a,height:a,fill:o},isCollapsed:n,onClick:function(){e.onTreeIconClick()}}),Tt()&&this.addEventListener("click",function(){e.emitCollapseEvent()})}},t.prototype.drawTreeLeafNodeAlignDot=function(){var e=this.getParentTreeIconCfg();if(!!e){var n=this.getStyle().icon,i=n.size,o=n.margin,a=e.x+i+o.right,s=this.getTextPosition().y,l=this.getTextStyle(),u=l.fill,d=l.fontSize,h=i/5;this.treeLeafNodeAlignDot=a_(this,{cx:a+i/2,cy:s+(d-h)/2,r:h,fill:u,fillOpacity:.3})}},t.prototype.isBolderText=function(){var e=this.meta,n=e.isLeaf,i=e.isTotals,o=e.level;return!n&&o===0||i},t.prototype.drawTextShape=function(){r.prototype.drawTextShape.call(this),this.isShallowRender()||this.drawLinkField(this.meta)},t.prototype.drawResizeAreaInLeaf=function(){var e;if(!(!this.meta.isLeaf||!this.shouldDrawResizeAreaByType("rowCellVertical",this))){var n=this.getBBoxByType(),i=n.x,o=n.y,a=n.width,s=n.height,l=this.getResizeAreaStyle(),u=Ho(this.spreadsheet,Qa);if(!!u){var d=this.getHeaderConfig(),h=d.position,v=d.width,p=d.viewportHeight,g=d.scrollX,m=g===void 0?0:g,C=d.scrollY,w=C===void 0?0:C,_=d.spreadsheet,S={x:i,y:o+s-l.size,width:a,height:l.size},b=this.getMeta().isFrozen,T=(e=_.facet.frozenGroupInfo[ut.FROZEN_ROW])===null||e===void 0?void 0:e.height,E={x:0,y:T,width:v,height:p};if(!(!b&&!Al(S,E,{scrollX:m,scrollY:w}))){var R=h.x+i-m,O=h.y+o-(b?0:w),A=this.spreadsheet.isFrozenRowHeader()?v-h.x-(i-m):a,P=ul({theme:l,type:sr.Vertical,effect:mr.Cell,offsetX:R,offsetY:O,width:a,height:s,meta:this.meta});u.appendChild(new ja({style:N(N({},P.style),{x:R,y:O+s-l.size,width:A})},P.appendInfo))}}}},t.prototype.getContentIndent=function(){if(!this.spreadsheet.isHierarchyTreeType())return 0;for(var e=this.getStyle(),n=e.icon,i=e.cell,o=n.size+n.margin.right,a=this.meta.parent,s=0;a;)a.height!==0&&(s+=o),a=a.parent;return this.showTreeLeafNodeAlignDot()&&(s+=this.isTreeLevel()?0:i.padding.right+n.margin.right),s},t.prototype.getTextIndent=function(){var e=this.getStyle().icon,n=e.size,i=e.margin,o=this.getContentIndent(),a=this.showTreeIcon()||this.isTreeLevel()&&this.showTreeLeafNodeAlignDot()?n+i.right:0;return o+a},t.prototype.isTreeLevel=function(){return $t(ze(this.meta,"parent.children"),function(e){return!e.isLeaf})},t.prototype.getMaxTextWidth=function(){var e=this.getBBoxByType(_t.CONTENT_BOX).width;return e-this.getTextIndent()-this.getActionAndConditionIconWidth()},t.prototype.getTextArea=function(){var e=this.getBBoxByType(_t.CONTENT_BOX),n=this.getTextIndent();return N(N({},e),{x:e.x+n,width:e.width-n})},t.prototype.handleViewport=function(){var e,n=this.getHeaderConfig(),i=n.scrollY,o=n.viewportHeight,a=(e=this.spreadsheet.facet)===null||e===void 0?void 0:e.frozenGroupInfo[ut.FROZEN_ROW].height,s={start:this.getMeta().isFrozen?0:i+a,size:o-a};return s},t.prototype.getTextPosition=function(){var e=this.getTextArea(),n=this.getTextStyle(),i=this.getStyle(),o=i.cell,a=i.icon,s=this.handleViewport(),l=kp(s,{start:e.y,size:e.height},{align:Fp(n.textBaseline),size:{textSize:n.fontSize},padding:{start:o.padding.top,end:o.padding.bottom}}).textStart,u=ss({bbox:e,textWidth:this.getActualTextWidth(),textAlign:n.textAlign,groupedIcons:this.groupedIcons,iconStyle:a}),d=u.textX,h=u.leftIconX,v=u.rightIconX,p=Rl(a==null?void 0:a.size,l,n.fontSize,n.textBaseline);return this.leftIconPosition={x:h,y:p},this.rightIconPosition={x:v,y:p},{x:d,y:l}},t}(dd),Hf=function(r){return[ur.META,ur.CONTROL].includes(r.key)},K_=function(r){return r.ctrlKey||r.metaKey},ci=function(r){var t=r.getMeta(),e=t||{},n=e.id,i=e.colIndex,o=e.rowIndex,a=e.rowQuery;return{id:n,colIndex:i,rowIndex:o,rowQuery:a,type:r instanceof Yp?ie.ROW_CELL:r.cellType}},KG=function(r,t){var e=r.interaction;e.changeState({stateName:ce.SELECTED,cells:t}),r.emit(U.GLOBAL_SELECTED,e.getActiveCells())};function mv(r,t){var e=Math.min(r.rowIndex,t.rowIndex),n=Math.max(r.rowIndex,t.rowIndex),i=Math.min(r.colIndex,t.colIndex),o=Math.max(r.colIndex,t.colIndex);return{start:{rowIndex:e,colIndex:i},end:{rowIndex:n,colIndex:o}}}function ZG(r,t){var e,n=t.facet,i=t.options;if(t.isTableMode()){if(!(!((e=i.seriesNumber)===null||e===void 0)&&e.enable))return[];var o=n.getColLeafNodes()[0].id,a=Ml(String(r.rowIndex),o),s=[],l=n.getCellById(a);return l&&l instanceof Yp&&s.push(l),s}return Pp(r.rowId,n.getRowCells(),t.isHierarchyTreeType())}var Xp=function(r,t){var e=r.spreadsheet.facet,n=r.getSelectedCellHighlight(),i=n.colHeader,o=n.rowHeader;i&&r.updateCells(e.getColCells()),o&&r.updateCells(e.getRowCells()),t()},Z_=function(r){var t,e=r.store.get("visibleActionIcons"),n=r.interaction.getInteractedCells(),i=r.interaction.getState().cells;if(se(n)&&se(i)&&se(e))return!1;if(Me(e,function(a){a.setAttribute("visibility","hidden")}),r.store.set("visibleActionIcons",[]),Me(n,function(a){a.hideInteractionShape()}),r.interaction.resetState(),!((t=r.options.interaction)===null||t===void 0)&&t.selectedCellsSpotlight){var o=r.interaction.getUnSelectedDataCells()||[];Me(o,function(a){a.clearUnselectedState()})}return!0},QG=function(r,t){var e=t==null?void 0:t.stateName;r.interaction.isEqualStateName(e)||(Z_(r),r.hideTooltip(),r.store.set(rv,t))},JG=function(r,t,e){var n,i,o=e.facet,a=o.panelBBox.width,s=o==null?void 0:o.frozenGroupInfo,l=(n=s==null?void 0:s.frozenCol.width)!==null&&n!==void 0?n:0,u=(i=s==null?void 0:s.frozenTrailingCol.width)!==null&&i!==void 0?i:0,d=o.getColLeafNodes()[r];return t===Wt.SCROLL_UP?d.x-l:d.x+d.width-(a-u)},jG=function(r,t,e){var n,i,o=e.facet,a=o.viewCellHeights.getCellOffsetY,s=o.panelBBox.height,l=a(r+1);if(Lt(l))return 0;var u=o==null?void 0:o.frozenGroupInfo,d=(n=u==null?void 0:u.frozenRow.height)!==null&&n!==void 0?n:0,h=(i=u==null?void 0:u.frozenTrailingRow.height)!==null&&i!==void 0?i:0;return t===Wt.SCROLL_UP?a(r)-d:l-(s-h)},Mi=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];var e=function(i,o){if(Ue(i)&&Ue(o))return o},n=X(X([],F(r),!1),[e],!1);return sk.apply(void 0,X([{}],F(n),!1))},eW=function(r){var t=["rows","columns","values"],e=t.reduce(function(n,i){var o=r[i],a=to(o);return wr(a,o)||console.warn("fields.".concat(i,":[").concat(o,"] should be unique")),n[i]=a,n},{});return N(N({},r),e)},fc=function(){for(var r,t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Mi.apply(void 0,X([O6],F(t),!1));n.fields=eW(n.fields);var i=(r=n.fields.rows)===null||r===void 0?void 0:r.some(function(a){return!Pi(a)}),o=se(n.fields.values);return(i||o)&&(n.fields.valueInCols=!1),n},$m=function(r){var t,e,n=Mi(D6,r);return((t=n.style)===null||t===void 0?void 0:t.layoutWidthType)===co.Compact&&((e=n.style)===null||e===void 0?void 0:e.dataCell.maxLines)<=1&&(n.style.dataCell.wordWrap=!1),n},tW=function(r){var t=r.spreadsheet,e=r.position,n=r.tooltipContainer,i=r.autoAdjustBoundary,o=t.getCanvasElement(),a=e.x+Lm.x,s=e.y+Lm.y;if(!i||!o)return{x:a,y:s};var l=i==="body",u=t.facet.panelBBox,d=u.maxX,h=u.maxY,v=t.options,p=v.width,g=v.height,m=o.getBoundingClientRect(),C=m.top,w=m.left,_=n.getBoundingClientRect(),S=_.width,b=_.height,T=document.body.getBoundingClientRect(),E=T.width,R=T.height,O=l?E:Math.min(p,d)+w,A=l?R:Math.min(g,h)+C;return a+S>=O&&(a=O-S),s+b>=A&&(s=A-b),{x:a,y:s}},Cv=function(r){return N(N({},r==null?void 0:r.colQuery),r==null?void 0:r.rowQuery)},Yu=function(r,t){var e;if(!!r){var n=t.style,i=t.className,o=i===void 0?[]:i,a=t.visible;if(n&&Object.assign(r.style,n),o.length){var s=o.filter(Boolean);(e=r.classList).add.apply(e,X([],F(s),!1))}r.classList.toggle(T9,a),r.classList.toggle(b9,!a)}},rW=function(r){var t=Br(r)&&Number.isNaN(r),e=r==="";return Lt(r)||t||e?"-":r},$p=function(r,t){var e,n=(e=r==null?void 0:r.dataSet)===null||e===void 0?void 0:e.getFieldFormatter(t);return function(i,o){return rW(n(i,o))}},wv=function(r,t){var e,n=t.data,i=t.field,o=t.valueField,a=t.useCompleteDataForFormatter,s=a===void 0?!0:a,l=t.targetCell,u=(r==null?void 0:r.dataSet.getCustomRowFieldName(l))||((e=r==null?void 0:r.dataSet)===null||e===void 0?void 0:e.getFieldName(i)),d=$p(r,i),h=zn.getFieldValue(n,i),v=qt(h)?null:h,p=d(o||v,s?n:void 0);return{name:u,value:p}},qm=function(r,t,e){var n=Vn(lo([],t),function(i){return i!==Ae&&zn.getFieldValue(e,i)});return De(n,function(i){return wv(r,{data:e,field:i,useCompleteDataForFormatter:!1})})},nW=function(r,t,e){var n,i,o,a,s=(e||{}).isTotals,l=[],u=[];if(t){var d=(i=(n=r==null?void 0:r.dataSet)===null||n===void 0?void 0:n.fields)===null||i===void 0?void 0:i.columns,h=(a=(o=r==null?void 0:r.dataSet)===null||o===void 0?void 0:o.fields)===null||a===void 0?void 0:a.rows;l=qm(r,Il(d||[]),t),u=qm(r,h,t)}return se(l)&&se(u)&&s&&(l=[{value:kt("\u603B\u8BA1")}]),{cols:l,rows:u}},iW=function(r,t,e,n){if(!t)return[];var i=e.isTotals,o=t[Ae],a=[];return i?a.push(wv(r,{data:t,field:o,targetCell:n,valueField:t[Bi]})):a.push(wv(r,{data:t,field:o,targetCell:n})),a},oW=function(r,t,e){var n;if(e)return kt("\u603B\u8BA1");var i=(n=r==null?void 0:r.dataSet)===null||n===void 0?void 0:n.getFieldName(t);return i&&i!=="undefined"?i:""},Km=function(r,t,e){e===void 0&&(e=!0);var n=[];return Me(t,function(i,o){Me(r,function(a){!e&&a.colIndex!==-1?n.push([o,a.colIndex]):e&&a.rowIndex!==-1&&n.push([a.rowIndex,o])})}),n},aW=function(r){var t,e=r.facet.getRowLeafNodes(),n=r.facet.getColLeafNodes(),i=r.interaction.getState(),o=i.nodes,a=o===void 0?[]:o,s=i.cells,l=s===void 0?[]:s,u=(t=l==null?void 0:l[0])===null||t===void 0?void 0:t.type,d=r.isHierarchyTreeType()?a:a.filter(function(h){return h==null?void 0:h.isLeaf});return u===ie.COL_CELL?Km(d,e,!1):u===ie.ROW_CELL?Km(d,n):[]},sW=function(r,t,e){var n=r.facet,i=function(s){if(!s)return!1;var l=t==null?void 0:t.getMeta(),u=l==null?void 0:l.isTotals,d=(t==null?void 0:t.cellType)===ie.COL_CELL,h=(t==null?void 0:t.cellType)===ie.ROW_CELL;if(!d&&!h)return!1;var v=n.getColNodeByIndex(s.colIndex),p=n.getRowNodeByIndex(s.rowIndex),g=d?p==null?void 0:p.isTotals:v==null?void 0:v.isTotals;return!u&&(s==null?void 0:s.isTotals)||u&&g};if(e){var o=aW(r);return Hn(De(o,function(s){var l=F(s,2),u=l[0],d=l[1],h=n.getCellMeta(u,d);if(!i(h))return(h==null?void 0:h.data)||Cv(h)}))}var a=r.interaction.getCells();return a.filter(function(s){var l=n.getCellMeta(s.rowIndex,s.colIndex);return!i(l)}).map(function(s){var l=n.getCellMeta(s.rowIndex,s.colIndex);return(l==null?void 0:l.data)||Cv(l)})},lW=function(r){var t=pp(r,"name");return Object.keys(t).map(function(e){var n=t[e],i=Tl(n,function(s){return s.selectedData}),o=n.filter(function(s){return Br(s.value)}),a=se(o)?null:Zo(o,"value");return{name:e,selectedData:i,value:a}})},uW=function(r){var t=r.spreadsheet,e=r.targetCell,n=r.options,i=n===void 0?{}:n,o=[],a={},s=t.isTableMode();if(s&&(i==null?void 0:i.onlyShowCellText)){var l=e==null?void 0:e.getMeta(),u=l!=null&&l.field?t.dataSet.getCellMultiData({query:{field:l.field}}):[t.dataSet.getRowData(l)];return[{selectedData:u,name:"",value:""}]}var d=sW(t,e,i.onlyShowCellText);return Me(d,function(h){var v,p=h==null?void 0:h[Ae];a[p]?(v=a[p])===null||v===void 0||v.push(h):a[p]=[h]}),rH(a,function(h,v){var p,g=t.isCustomHeaderFields()?t==null?void 0:t.dataSet.getCustomRowFieldName(e):oW(t,v,i==null?void 0:i.isTotals),m="",C="";if(cp(h,function(T){return zp(ze(T,Bi))})){var w=t.options.placeholder,_=d_(a,w);m=_,C=_}else{var S=$p(t,v),b=U_(h,Bi);C=b,m=(p=S==null?void 0:S(b,h))!==null&&p!==void 0?p:parseFloat(b.toPrecision(Vx))}o.push({selectedData:h,name:g||"",value:m,originValue:C})}),t.isCustomHeaderFields()?lW(o):o},fW=function(r){var t=r.spreadsheet,e=r.cellInfos,n=e===void 0?[]:e,i=r.options,o=i===void 0?{}:i,a=r.targetCell,s=null,l=[],u=null,d=null,h=t.dataSet.getCustomFieldDescription(a),v=n[0]||{};if(!(o!=null&&o.hideSummary))l=uW({spreadsheet:t,options:o,targetCell:a});else if(o.onlyShowCellText){var p=zn.getFieldValue(v,"value"),g=zn.getFieldValue(v,"valueField"),m=$p(t,g),C=m(p),w=o.enableFormat?t.dataSet.getFieldName(p)||C:t.dataSet.getFieldName(g);s=w||""}else u=nW(t,v,o),d=iW(t,v,o,a);var _=v||{},S=_.interpretation,b=_.infos,T=_.tips;return{name:s,summaries:l,interpretation:S,infos:b,tips:T,headInfo:u,details:d,description:h}},dW=function(r){return De(r,function(t){var e=t.getMeta();return I3({},e.query||{},IH(e,["colIndex","rowIndex"]))})},qp=function(r){if(!r.interaction.isSelectedState())return[];var t=r.dataCfg.fields.valueInCols;return r.interaction.getCells().reduce(function(e,n){var i=r.facet.getCellMeta(n==null?void 0:n.rowIndex,n==null?void 0:n.colIndex),o=Cv(i);if(se(i)||se(o))return[];var a=N(N({},o),{colIndex:t?i==null?void 0:i.colIndex:null,rowIndex:t?null:i==null?void 0:i.rowIndex}),s=e.find(function(l){return wr(a,l)});return s||e.push(a),e},[])},hW=function(r,t){r===void 0&&(r={});var e=function(s){return Mi(r,s)},n=r.colCell,i=r.rowCell,o=r.dataCell,a=r.cornerCell;return t===ie.COL_CELL?e(n):t===ie.ROW_CELL?e(i):t===ie.DATA_CELL?e(o):t===ie.CORNER_CELL?e(a):N({},r)},Kp=function(r,t){var e;if(!t||!r)return null;var n=r.options,i=r.interaction,o=(e=r.getCellType)===null||e===void 0?void 0:e.call(r,t==null?void 0:t.target),a=i.getInteractedCells()[0];return hW(n.tooltip,o||(a==null?void 0:a.cellType))},Q_=function(r,t){var e,n=t.defaultMenus,i=n===void 0?[]:n,o=t.cell,a=function(l){return l===void 0&&(l=[]),l.filter(function(u){var d;return Un(u.visible)?u.visible(o):(d=u.visible)!==null&&d!==void 0?d:!0}).map(function(u){return u.children&&(u.children=a(u.children)),u})},s=a((e=r==null?void 0:r.menu)===null||e===void 0?void 0:e.items);return{menu:N(N({},r==null?void 0:r.menu),{items:Hn(X(X([],F(i),!1),F(s),!1))})}},cW=function(r,t){for(var e=!1,n=t;n&&n!==document.body;){if(r===n){e=!0;break}n=n.parentElement}return e},vW="s2-offscreen-canvas",pW=function(){var r;(r=document.getElementById(vW))===null||r===void 0||r.remove()},gW=function(r){r.store.set(_f,_p)},yW=function(r,t){var e=r.store.get(_f,_p);r.store.set(_f,N(N({},e),t))},mW=function(r,t){var e=r.store.get(_f,_p);return e[t]},J_=function(){function r(t){var e=this;this.displayFormattedValueMap=new Map,this.getField=function(n){var i=Pi(n)?n:n==null?void 0:n.field;return i||n},this.getFieldMeta=_l(function(n,i){var o=e.getField(n);return $t(e.meta||i,{field:o})}),this.getCustomFieldDescription=function(n){var i,o;if(!!n){var a=(i=n.getMeta)===null||i===void 0?void 0:i.call(n);if(!(a!=null&&a.isTotals)){if(n.cellType===ie.DATA_CELL){var s=$t(a==null?void 0:a.spreadsheet.dataCfg.meta,{field:(a==null?void 0:a.field)||(a==null?void 0:a.value)||(a==null?void 0:a.valueField)});return e.getFieldDescription(s==null?void 0:s.field)}return((o=a==null?void 0:a.extra)===null||o===void 0?void 0:o.description)||e.getFieldDescription(a==null?void 0:a.field)}}},this.spreadsheet=t}return r.prototype.getFieldName=function(t,e){var n,i,o=this.getField(t),a=(i=(n=this.spreadsheet)===null||n===void 0?void 0:n.facet)===null||i===void 0?void 0:i.getHeaderNodes().find(function(l){var u;return l.field===o&&((u=l==null?void 0:l.extra)===null||u===void 0?void 0:u.isCustomNode)}),s=(a==null?void 0:a.value)||(Pi(t)?t:t==null?void 0:t.title)||t;return ze(this.getFieldMeta(o,this.meta),"name",e!=null?e:s)},r.prototype.getCustomRowFieldName=function(t){var e;if(!!t){var n=(e=t.getMeta)===null||e===void 0?void 0:e.call(t);if(t.cellType===ie.DATA_CELL){var i=this.spreadsheet.facet.getRowNodeByIndex(n==null?void 0:n.rowIndex);return(i==null?void 0:i.value)||this.getFieldName(i==null?void 0:i.field)}return(n==null?void 0:n.value)||this.getFieldName(n==null?void 0:n.field)}},r.prototype.getFieldFormatter=function(t){var e=this.getField(t);return ze(this.getFieldMeta(e,this.meta),"formatter",po)},r.prototype.getFieldDescription=function(t){var e=this.getField(t);return ze(this.getFieldMeta(e,this.meta),"description")},r.prototype.setDataCfg=function(t){var e,n,i;(i=(n=(e=this.getFieldMeta)===null||e===void 0?void 0:e.cache)===null||n===void 0?void 0:n.clear)===null||i===void 0||i.call(n);var o=this.processDataCfg(t),a=o.fields,s=o.meta,l=o.data,u=o.sortParams,d=o.filterParams;this.fields=a,this.meta=s,this.originData=l,this.sortParams=u,this.filterParams=d,this.displayData=this.originData,this.indexesData={}},r.prototype.processMeta=function(t,e){var n,i;t===void 0&&(t=[]);var o=X(X([],F(t),!1),[Az(t,(i=(n=this.spreadsheet)===null||n===void 0?void 0:n.options)===null||i===void 0?void 0:i.cornerExtraFieldText,e)],!1);return o},r.prototype.getDisplayDataSet=function(){return this.displayData||[]},r.prototype.isEmpty=function(){return se(this.getDisplayDataSet())},r.prototype.getEmptyViewIndexes=function(){return[]},r.prototype.getValueRangeByField=function(t){var e,n=mW(this.spreadsheet,t);if(n)return n;var i=Hn(De(this.originData,function(a){var s=a[t];return Lt(s)?null:Number.parseFloat(s)})),o={maxValue:Ko(i),minValue:Sx(i)};return yW(this.spreadsheet,(e={},e[t]=o,e)),o},r.prototype.moreThanOneValue=function(){var t,e;return((e=(t=this.fields)===null||t===void 0?void 0:t.values)===null||e===void 0?void 0:e.length)>1},r}(),xv=function(r){oe(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.handleDimensionValuesSort=function(){Me(e.sortParams,function(n){var i=n.sortFieldId,o=n.sortByMeasure;if(!!i){var a=X([],F(e.sortedDimensionValues[i]||[]),!1),s=FG({dataSet:e,sortParam:n,originValues:a,isSortByMeasure:!se(o)});e.sortedDimensionValues[i]=s,e.handlePivotMetaSort(i,s)}})},e.getTotalStatus=function(n){var i=e.fields,o=i.columns,a=i.rows,s=function(l,u){if(u){var d=$t(l,function(h){return!fm(n,h)});return!!(d&&d!==Sl(l))}return cp(l,function(h){return!fm(n,h)})};return{isRowGrandTotal:s(If(a)),isRowSubTotal:s(a,!0),isColGrandTotal:s(If(o)),isColSubTotal:s(o,!0)}},e}return t.prototype.getExistValuesByDataItem=function(e,n){return O_(e,n)},t.prototype.setDataCfg=function(e){r.prototype.setDataCfg.call(this,e);var n=this.fields.rows;this.sortedDimensionValues={},this.rowPivotMeta=new Map,this.colPivotMeta=new Map,this.dimensionValuesCache=new Map,this.transformIndexesData(this.originData,n),this.handleDimensionValuesSort()},t.prototype.transformIndexesData=function(e,n){var i=this,o=this.fields,a=o.columns,s=o.values,l=o.valueInCols,u;return si.getInstance().debugCallback(I9,function(){u=Iz({rows:n,columns:a,values:s,valueInCols:l,data:e,indexesData:i.indexesData,sortedDimensionValues:i.sortedDimensionValues,rowPivotMeta:i.rowPivotMeta,colPivotMeta:i.colPivotMeta,getExistValuesByDataItem:i.getExistValuesByDataItem}),i.indexesData=u.indexesData,i.rowPivotMeta=u.rowPivotMeta,i.colPivotMeta=u.colPivotMeta,i.sortedDimensionValues=u.sortedDimensionValues}),u},t.prototype.transformDrillDownData=function(e,n,i){var o=this,a,s=Ft.getFieldPath(i,!0),l=X(X([],F(s),!1),[e],!1),u=this.spreadsheet.store,d=i==null?void 0:i.id,h=(a=u.get("drillDownIdPathMap"))!==null&&a!==void 0?a:new Map;h.has(d)&&(Me(h.get(d),function(p){vm(o.indexesData,p)}),Dm(this.rowPivotMeta,d));var v=this.transformIndexesData(n,l).paths;h.set(d,v),u.set("drillDownIdPathMap",h)},t.prototype.clearDrillDownData=function(e){var n=this,i=this.spreadsheet.store,o=i.get("drillDownIdPathMap");if(!o)return!1;var a=i.get("drillDownDataCache",[]);if(e){var s=o.get(e);s&&Me(s,function(p){vm(n.indexesData,p)}),Dm(this.rowPivotMeta,e),o.delete(e);var l=Vn(a,function(p){return o.has(p==null?void 0:p.rowId)});i.set("drillDownDataCache",l);var u=l.map(function(p){return p==null?void 0:p.drillLevel}),d=i.get("drillDownFieldInLevel",[]),h=d.filter(function(p){return Dr(u,p==null?void 0:p.drillLevel)});i.set("drillDownFieldInLevel",h)}else{o.clear();var v=this.spreadsheet.store.get("originalDataCfg");se(v)||this.spreadsheet.setDataCfg(v),this.spreadsheet.store.set("drillItemsNum",-1),this.spreadsheet.store.set("drillDownDataCache",[]),this.spreadsheet.store.set("drillDownFieldInLevel",[])}return i.set("drillDownIdPathMap",o),!0},t.prototype.handlePivotMetaSort=function(e,n){var i=this.fields,o=i.rows,a=i.columns;Dr(o,e)?this.rowPivotMeta=Vm({pivotMeta:this.rowPivotMeta,dimensions:o,sortFieldId:e,sortedDimensionValues:n}):Dr(a,e)&&(this.colPivotMeta=Vm({pivotMeta:this.colPivotMeta,dimensions:a,sortFieldId:e,sortedDimensionValues:n}))},t.prototype.processDataCfg=function(e){var n=e.data,i=e.meta,o=i===void 0?[]:i,a=e.fields,s=e.sortParams,l=s===void 0?[]:s,u=a.columns,d=u===void 0?[]:u,h=a.rows,v=h===void 0?[]:h,p=a.values,g=a.valueInCols,m=a.customValueOrder,C=d,w=v;g?C=this.isCustomMeasuresPosition(m)?this.handleCustomMeasuresOrder(m,C):to(X(X([],F(d),!1),[Ae],!1)):w=this.isCustomMeasuresPosition(m)?this.handleCustomMeasuresOrder(m,w):to(X(X([],F(v),!1),[Ae],!1));var _=this.processMeta(o,kt("\u6570\u503C"));return{data:n,meta:_,fields:N(N({},a),{rows:w,columns:C,values:p}),sortParams:l}},t.prototype.getFieldsAndPivotMetaByField=function(e){var n=this.fields||{},i=n.rows,o=i===void 0?[]:i,a=n.columns,s=a===void 0?[]:a;return o.includes(e)?{dimensions:o,pivotMeta:this.rowPivotMeta}:s.includes(e)?{dimensions:s,pivotMeta:this.colPivotMeta}:{}},t.prototype.getDimensionValues=function(e,n){var i;n===void 0&&(n={});var o=this.getFieldsAndPivotMetaByField(e),a=o.pivotMeta,s=o.dimensions;if(!a||!s)return[];var l=se(n);if(this.dimensionValuesCache.has(e)&&l)return(i=this.dimensionValuesCache.get(e))!==null&&i!==void 0?i:[];var u=Po(n,s,Ju),d=I_({pivotMeta:a,dimensionValues:u,fields:s,fieldIdx:yp(s,e),queryType:hi.DetailOnly,sortedDimensionValues:this.sortedDimensionValues}),h=to(d.map(function(v){return v.value}));return l&&this.dimensionValuesCache.set(e,h),h},t.prototype.getTotalValue=function(e,n){var i,o,a=Qc(n),s=a?n:this.getTotalStatus(e),l=d7(s,(o=this.spreadsheet.options)===null||o===void 0?void 0:o.totals)||{},u=l.aggregation,d=l.calcFunc,h=IG[u];if(h||d){var v=this.getCellMultiData({query:e,queryType:hi.DetailOnly}),p=null;return d?p=d(e,v):h&&(p=h(v,Bi)),zn.getCellData(N(N({},bx(e,[Ae])),(i={},i[e[Ae]]=p,i)),e[Ae])}},t.prototype.getCellData=function(e){var n,i,o,a=e||{},s=a.query,l=s===void 0?{}:s,u=a.rowNode,d=a.isTotals,h=d===void 0?!1:d,v=a.totalStatus,p=this.fields,g=p.rows,m=p.columns,C=g,w=(n=this.spreadsheet)===null||n===void 0?void 0:n.store.get("drillDownIdPathMap"),_=Array.from((i=w==null?void 0:w.keys())!==null&&i!==void 0?i:[]).some(function(R){return u==null?void 0:u.id.startsWith(R)});u&&_&&(C=(o=Ft.getFieldPath(u,_))!==null&&o!==void 0?o:g);var S=Po(l,C),b=Po(l,m),T=Nf({rowDimensionValues:S,colDimensionValues:b,rowPivotMeta:this.rowPivotMeta,colPivotMeta:this.colPivotMeta,rowFields:C,colFields:m,prefix:Af(C,m)}),E=ze(this.indexesData,T);if(E)return zn.getCellData(E,l[Ae]);if(h)return this.getTotalValue(l,v)},t.prototype.getQueryExtraFields=function(e){var n=this.fields.values,i=n===void 0?[]:n,o=e[Ae];return o?Dr(i,o)?[o]:[]:i},t.prototype.getCellMultiData=function(e){var n,i,o,a,s=e||{},l=s.query,u=l===void 0?{}:l,d=s.queryType,h=d===void 0?hi.All:d,v=s.drillDownFields,p=v===void 0?[]:v;se(u)&&console.warn("query: ".concat(u,` shouldn't be empty, you can get all data from dataCfg if you're intended.
 you should use { EXTRA_FIELD: xxx} as least if you want query all specific value data`));var g=this.fields,m=g.rows,C=g.columns,w=se(p)?m:m.concat(p),_=Po(u,w,Ju),S=Po(u,C,Ju),b=Bz({rowDimensionValues:_,colDimensionValues:S,rowPivotMeta:this.rowPivotMeta,colPivotMeta:this.colPivotMeta,rowFields:w,colFields:C,sortedDimensionValues:this.sortedDimensionValues,queryType:h}),T=b.rowQueries,E=b.colQueries,R=Af(w,C),O=[];try{for(var A=Qt(T),P=A.next();!P.done;P=A.next()){var D=P.value;try{for(var k=(o=void 0,Qt(E)),z=k.next();!z.done;z=k.next()){for(var V=z.value,Z=Nf({rowDimensionValues:D,colDimensionValues:V,rowPivotMeta:this.rowPivotMeta,colPivotMeta:this.colPivotMeta,rowFields:w,colFields:C,prefix:R}),Q=!1,Y=this.indexesData,te=function(me){var Ze=Z[me];Q?fl(Ze)?Y=Dz(Y,h):Y=Hn(De(Y,function(Ge){return Ge==null?void 0:Ge[Ze]})):fl(Ze)?(Q=!0,Y=Hn([Y]),me--):Y=Y==null?void 0:Y[Ze],ae=me},ae,pe=0;pe<Z.length;pe++)te(pe),pe=ae;Ue(Y)?O.push.apply(O,X([],F(Y),!1)):Y&&O.push(Y)}}catch(me){o={error:me}}finally{try{z&&!z.done&&(a=k.return)&&a.call(k)}finally{if(o)throw o.error}}}}catch(me){n={error:me}}finally{try{P&&!P.done&&(i=A.return)&&i.call(A)}finally{if(n)throw n.error}}var Ee=this.getQueryExtraFields(u);return Tl(to(O),function(me){return me?zn.getCellDataList(me,Ee):[]})},t.prototype.getFieldFormatter=function(e,n){return e===Di?this.getFieldFormatterForTotalValue(n):r.prototype.getFieldFormatter.call(this,e)},t.prototype.getFieldFormatterForTotalValue=function(e){var n="";return!this.spreadsheet.isValueInCols()&&e&&(n=ze(e.rowQuery,Ae)),n=n!=null?n:ze(this.fields.values,0),r.prototype.getFieldFormatter.call(this,n)},t.prototype.handleCustomMeasuresOrder=function(e,n){var i=to(X([],F(n),!1));return n.length>=e?(i.splice(e,0,Ae),i):X(X([],F(i),!1),[Ae],!1)},t.prototype.isCustomMeasuresPosition=function(e){return Br(e)},t.prototype.getRowData=function(e){return this.getCellMultiData({query:e.rowQuery})},t}(J_),CW=function(r){oe(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.getCellData=function(e){var n=(e||{}).query,i=n===void 0?{}:n,o=this.fields,a=o.columns,s=o.rows,l=Po(i,s),u=Po(i,a),d=Nf({rowDimensionValues:l,colDimensionValues:u,rowPivotMeta:this.rowPivotMeta,colPivotMeta:this.colPivotMeta,rowFields:s,colFields:a,prefix:Af(s,a)}),h=ze(this.indexesData,d);if(h)return zn.getCellData(h,i[Ae])},t.prototype.processDataCfg=function(e){var n=r.prototype.processDataCfg.call(this,e),i=this.processMeta(e.meta,kt("\u6307\u6807"));return N(N({},n),{meta:i,fields:N(N({},n.fields),{rows:[Ae],valueInCols:!1})})},t}(xv),wW=function(r){oe(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.processDataCfg=function(e){var n=!this.spreadsheet.isCustomRowFields(),i=e.fields.rows||[],o=n?X([],F(i),!1):X(X([],F(i),!1),[Ae],!1),a=this.processMeta(e.meta,kt("\u6570\u503C"));return N(N({},e),{meta:a,fields:N(N({},e.fields),{rows:o,valueInCols:n})})},t}(CW),xW=function(r){oe(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.handleDimensionValueFilter=function(){Me(e.filterParams,function(n){var i=n.filterKey,o=n.filteredValues,a=n.customFilter,s=new Set(o),l=function(d){return!s.has(d[i])},u=Vn(e.displayData,function(d){return a?a(d)&&l(d):l(d)});e.displayData=e.getDisplayData(u)})},e.handleDimensionValuesSort=function(){Me(e.sortParams,function(n){var i=n.sortFieldId,o=n.sortBy,a=n.sortFunc,s=n.sortMethod,l=n.query;if(!!i){var u=e.displayData,d=[];if(l){var h=[];u.forEach(function(m){for(var C=Object.keys(l),w=!0,_=0;_<C.length;_++){var S=C[_];if(m[S]!==l[S]){w=!1,d.push(m);break}}w&&h.push(m)}),u=h}var v=u;if(a)v=a(N(N({},n),{data:u}));else if(o&&!Un(o)){var p=X([],F(o),!1).reverse();v=u.sort(function(m,C){var w=p.indexOf(m[i]),_=p.indexOf(C[i]);return _-w})}else if(ls(s)||Wp(s)){var g=Un(o)?o:null;v=hH(u,[g||i],[s==null?void 0:s.toLocaleLowerCase()])}d.length&&(v=X(X([],F(v),!1),F(d),!1)),e.displayData=e.getDisplayData(v)}})},e}return t.prototype.processDataCfg=function(e){return e},t.prototype.setDataCfg=function(e){r.prototype.setDataCfg.call(this,e),this.handleDimensionValueFilter(),this.handleDimensionValuesSort()},t.prototype.getStartFrozenRows=function(e){var n=(this.spreadsheet.options.frozen||{}).rowCount;return n?e.slice(0,n):[]},t.prototype.getEndFrozenRows=function(e){var n=(this.spreadsheet.options.frozen||{}).trailingRowCount;return n?e.slice(-n):[]},t.prototype.getDisplayData=function(e){var n=this.getStartFrozenRows(e),i=this.getEndFrozenRows(e),o=e.slice(n.length||0,-i.length||void 0);return X(X(X([],F(n),!1),F(o),!1),F(i),!1)},t.prototype.getDimensionValues=function(){return[]},t.prototype.getCellData=function(e){var n=e===void 0?{}:e,i=n.query,o=i===void 0?{}:i;if(!(this.displayData.length===0&&o.rowIndex===0)){var a=this.displayData[o.rowIndex];return!Za(o,"field")||!qt(a)?a:a[o.field]}},t.prototype.getCellMultiData=function(e){var n=e===void 0?{}:e,i=n.query,o=i===void 0?{}:i;if(!o)return this.displayData;var a=this.displayData[o.rowIndex]?[this.displayData[o.rowIndex]]:this.displayData;return Za(o,"field")?a.map(function(s){return s[o.field]}):a},t.prototype.getRowData=function(e){return this.getCellData({query:{rowIndex:e.rowIndex}})},t}(J_);function Zp(r){return function(){return r}}function _W(r,t){return function(e){return r+e*t}}function EW(r,t,e){return r=Math.pow(r,e),t=Math.pow(t,e)-r,e=1/e,function(n){return Math.pow(r+n*t,e)}}function SW(r){return(r=+r)==1?j_:function(t,e){return e-t?EW(t,e,r):Zp(isNaN(t)?e:t)}}function j_(r,t){var e=t-r;return e?_W(r,e):Zp(isNaN(r)?t:r)}var Zm=function r(t){var e=SW(t);function n(i,o){var a=e((i=wc(i)).r,(o=wc(o)).r),s=e(i.g,o.g),l=e(i.b,o.b),u=j_(i.opacity,o.opacity);return function(d){return i.r=a(d),i.g=s(d),i.b=l(d),i.opacity=u(d),i+""}}return n.gamma=r,n}(1);function eE(r,t){t||(t=[]);var e=r?Math.min(t.length,r.length):0,n=t.slice(),i;return function(o){for(i=0;i<e;++i)n[i]=r[i]*(1-o)+t[i]*o;return n}}function tE(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}function TW(r,t){return(tE(t)?eE:rE)(r,t)}function rE(r,t){var e=t?t.length:0,n=r?Math.min(e,r.length):0,i=new Array(n),o=new Array(e),a;for(a=0;a<n;++a)i[a]=nE(r[a],t[a]);for(;a<e;++a)o[a]=t[a];return function(s){for(a=0;a<n;++a)o[a]=i[a](s);return o}}function bW(r,t){var e=new Date;return r=+r,t=+t,function(n){return e.setTime(r*(1-n)+t*n),e}}function _v(r,t){return r=+r,t=+t,function(e){return r*(1-e)+t*e}}function LW(r,t){var e={},n={},i;(r===null||typeof r!="object")&&(r={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in r?e[i]=nE(r[i],t[i]):n[i]=t[i];return function(o){for(i in e)n[i]=e[i](o);return n}}var Ev=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,dc=new RegExp(Ev.source,"g");function RW(r){return function(){return r}}function MW(r){return function(t){return r(t)+""}}function OW(r,t){var e=Ev.lastIndex=dc.lastIndex=0,n,i,o,a=-1,s=[],l=[];for(r=r+"",t=t+"";(n=Ev.exec(r))&&(i=dc.exec(t));)(o=i.index)>e&&(o=t.slice(e,o),s[a]?s[a]+=o:s[++a]=o),(n=n[0])===(i=i[0])?s[a]?s[a]+=i:s[++a]=i:(s[++a]=null,l.push({i:a,x:_v(n,i)})),e=dc.lastIndex;return e<t.length&&(o=t.slice(e),s[a]?s[a]+=o:s[++a]=o),s.length<2?l[0]?MW(l[0].x):RW(t):(t=l.length,function(u){for(var d=0,h;d<t;++d)s[(h=l[d]).i]=h.x(u);return s.join("")})}function nE(r,t){var e=typeof t,n;return t==null||e==="boolean"?Zp(t):(e==="number"?_v:e==="string"?(n=Ya(t))?(t=n,Zm):OW:t instanceof Ya?Zm:t instanceof Date?bW:tE(t)?eE:Array.isArray(t)?rE:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?LW:_v)(r,t)}var rs=0,ks=0,As=0,iE=1e3,zf,Hs,Gf=0,Jo=0,cd=0,cl=typeof performance=="object"&&performance.now?performance:Date,oE=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(r){setTimeout(r,17)};function aE(){return Jo||(oE(IW),Jo=cl.now()+cd)}function IW(){Jo=0}function Sv(){this._call=this._time=this._next=null}Sv.prototype=sE.prototype={constructor:Sv,restart:function(r,t,e){if(typeof r!="function")throw new TypeError("callback is not a function");e=(e==null?aE():+e)+(t==null?0:+t),!this._next&&Hs!==this&&(Hs?Hs._next=this:zf=this,Hs=this),this._call=r,this._time=e,Tv()},stop:function(){this._call&&(this._call=null,this._time=1/0,Tv())}};function sE(r,t,e){var n=new Sv;return n.restart(r,t,e),n}function AW(){aE(),++rs;for(var r=zf,t;r;)(t=Jo-r._time)>=0&&r._call.call(null,t),r=r._next;--rs}function Qm(){Jo=(Gf=cl.now())+cd,rs=ks=0;try{AW()}finally{rs=0,PW(),Jo=0}}function NW(){var r=cl.now(),t=r-Gf;t>iE&&(cd-=t,Gf=r)}function PW(){for(var r,t=zf,e,n=1/0;t;)t._call?(n>t._time&&(n=t._time),r=t,t=t._next):(e=t._next,t._next=null,t=r?r._next=e:zf=e);Hs=r,Tv(n)}function Tv(r){if(!rs){ks&&(ks=clearTimeout(ks));var t=r-Jo;t>24?(r<1/0&&(ks=setTimeout(Qm,r-cl.now()-cd)),As&&(As=clearInterval(As))):(As||(Gf=cl.now(),As=setInterval(NW,iE)),rs=1,oE(Qm))}}var lE=function(r){oe(t,r);function t(e){var n=this,i=e.name,o=e.s2,a=_r(e,["name","s2"]);return n=r.call(this,{name:i,style:a})||this,n.gridInfo={cols:[],rows:[]},n.updateGrid=function(s,l){var u,d;l===void 0&&(l=S6),!n.gridGroup||!n.getElementById(l)?n.gridGroup=n.appendChild(new ft({id:l,style:{zIndex:l6}})):n.gridGroup.removeChildren();var h=(u=It(s.cols))!==null&&u!==void 0?u:0,v=(d=It(s.rows))!==null&&d!==void 0?d:0,p=n.s2.theme,g=p.dataCell.cell,m=g==null?void 0:g.verticalBorderWidth;n.gridInfo=s;var C=m/2;n.gridInfo.cols.forEach(function(S){Xt(n.gridGroup,{x1:S-C,x2:S-C,y1:0,y2:v,stroke:g.verticalBorderColor,strokeOpacity:g.verticalBorderColorOpacity,lineWidth:m})});var w=g==null?void 0:g.horizontalBorderWidth,_=w/2;n.gridInfo.rows.forEach(function(S){Xt(n.gridGroup,{x1:0,x2:h,y1:S-_,y2:S-_,stroke:g.horizontalBorderColor,strokeOpacity:g.horizontalBorderColorOpacity,lineWidth:w})})},n.s2=o,n}return t}(ft),BW=function(r){oe(t,r);function t(e){var n=r.call(this,e)||this;return n.initMergedCellsGroup(),n}return t.prototype.getMergedCellsGroup=function(){return this.mergedCellsGroup},t.prototype.initMergedCellsGroup=function(){this.mergedCellsGroup&&this.getElementById(pm)||(this.mergedCellsGroup=this.appendChild(new ft({id:pm,style:{zIndex:u6}})))},t.prototype.updateMergedCells=function(){this.initMergedCellsGroup(),_z(this.s2,this.mergedCellsGroup)},t.prototype.addMergeCell=function(e){var n;(n=this.mergedCellsGroup)===null||n===void 0||n.appendChild(e),this.s2.emit(U.MERGED_CELLS_RENDER,e),this.s2.emit(U.LAYOUT_CELL_RENDER,e)},t.prototype.update=function(e){this.updateGrid(e),this.updateMergedCells()},t}(lE),zo;(function(r){r.ScrollChange="scroll-change",r.ScrollEnd="scroll-end"})(zo||(zo={}));var hc=function(r){oe(t,r);function t(e){var n=r.call(this)||this;n.eventHandlers=[],n.scrollFrameId=null,n.getCoordinatesName=function(){var p=n.isHorizontal?"x1":"y1",g=n.isHorizontal?"x2":"y2";return{from:p,to:g}},n.getCoordinatesWithBBoxExtraPadding=function(){var p=n.theme,g=p.lineCap,m=g===void 0?"butt":g,C=p.size,w=C===void 0?0:C;if(m==="butt")return{start:n.thumbOffset,end:n.thumbOffset+n.thumbLen};var _=n.isHorizontal?0:w/2,S=n.isHorizontal?w:w/2;return{start:n.thumbOffset+_,end:n.thumbOffset+n.thumbLen-S}},n.current=function(){var p=n.thumbLen/n.trackLen,g=n.thumbOffset/n.trackLen;return g/(1-p)},n.updateThumbLen=function(p){if(n.thumbLen!==p){n.thumbLen=p;var g=n.getCoordinatesName();n.thumbShape.attr(g.to,n.thumbOffset+p),n.emitScrollChange(n.thumbOffset/(n.trackLen-n.thumbLen)*n.scrollTargetMaxOffset,!1)}},n.updateThumbOffset=function(p,g){var m;g===void 0&&(g=!0);var C=n.validateRange(p),w=n.thumbOffset===C&&C!==0;if(!w){n.thumbOffset=C;var _=n.getCoordinatesName(),S=_.from,b=_.to,T=n.getCoordinatesWithBBoxExtraPadding(),E=T.start,R=T.end;n.thumbShape.attr((m={},m[S]=E,m[b]=R,m)),g&&n.emitScrollChange(C/(n.trackLen-n.thumbLen)*n.scrollTargetMaxOffset,!1)}},n.onlyUpdateThumbOffset=function(p){n.updateThumbOffset(p,!1)},n.emitScrollChange=function(p,g){g===void 0&&(g=!0),cancelAnimationFrame(n.scrollFrameId),n.scrollFrameId=requestAnimationFrame(function(){n.dispatchEvent(new Ut(zo.ScrollChange,{offset:p,updateThumbOffset:g}))})},n.bindEventListener=function(p,g,m){return p==null||p.addEventListener(g,m,!1),{remove:function(){p==null||p.removeEventListener(g,m,!1)}}},n.addEvent=function(p,g,m){p.addEventListener(g,m),n.eventHandlers.push({target:p,type:g,handler:m})},n.initScrollBar=function(){n.scrollBarGroup=n.createScrollBarGroup(),n.scrollBarGroup.setPosition(n.position.x,n.position.y),n.bindEvents()},n.createScrollBarGroup=function(){var p=n.appendChild(new ft({className:n.isHorizontal?"horizontalBar":"verticalBar"}));return n.trackShape=n.createTrackShape(p),n.thumbShape=n.createThumbShape(p),p},n.createTrackShape=function(p){var g=n.theme,m=g.lineCap,C=m===void 0?"round":m,w=g.trackColor,_=g.size,S=_===void 0?0:_,b={lineWidth:S,stroke:w,lineCap:C};return n.isHorizontal?p.appendChild(new Ia({style:N(N({},b),{x1:0,y1:S/2,x2:n.trackLen,y2:S/2})})):p.appendChild(new Ia({style:N(N({},b),{x1:S/2,y1:0,x2:S/2,y2:n.trackLen})}))},n.createThumbShape=function(p){var g=n.theme,m=g.size,C=m===void 0?0:m,w=g.lineCap,_=w===void 0?"round":w,S=g.thumbColor,b={lineWidth:C,stroke:S,lineCap:_,cursor:"default"},T=n.getCoordinatesWithBBoxExtraPadding(),E=T.start,R=T.end;return n.isHorizontal?p.appendChild(new Ia({style:N(N({},b),{x1:E,y1:C/2,x2:R,y2:C/2})})):p.appendChild(new Ia({style:N(N({},b),{x1:C/2,y1:E,x2:C/2,y2:R})}))},n.bindEvents=function(){n.addEventListener(Xe.POINTER_DOWN,n.onStartEvent),n.addEventListener(Xe.POINTER_UP,n.onPointerUp),n.trackShape.addEventListener("click",n.onTrackClick),n.thumbShape.addEventListener(Xe.POINTER_OVER,n.onTrackPointerOver),n.thumbShape.addEventListener(Xe.POINTER_OUT,n.onTrackPointerOut)},n.onStartEvent=function(p){p.preventDefault();var g=p.clientX,m=p.clientY;n.startPos=n.isHorizontal?g:m,n.bindLaterEvent()},n.bindLaterEvent=function(){var p=n.ownerDocument.defaultView,g=document.body,m=[n.bindEventListener(g,Xe.POINTER_MOVE,n.onPointerMove),n.bindEventListener(g,Xe.POINTER_UP,n.onPointerUp),n.bindEventListener(g,Xe.POINTER_LEAVE,n.onPointerUp)];n.addEvent(p,Xe.POINTER_UP,n.onPointerUp),n.clearEvents=function(){m.forEach(function(C){C==null||C.remove()}),Me(n.eventHandlers,function(C){var w;(w=C.target)===null||w===void 0||w.removeEventListener(C.type,C.handler)}),n.eventHandlers.length=0}},n.onTrackClick=function(p){var g=n.isHorizontal?p.x-n.position.x-n.thumbLen/2:p.y-n.position.y-n.thumbLen/2,m=n.validateRange(g);n.updateThumbOffset(m)},n.onPointerMove=function(p){p.preventDefault();var g=p.clientX,m=p.clientY,C=n.isHorizontal?g:m,w=C-n.startPos;n.startPos=C,n.updateThumbOffset(n.thumbOffset+w)},n.onPointerUp=function(p){var g;n.dispatchEvent(new Ut(zo.ScrollEnd,{})),p.preventDefault(),(g=n.clearEvents)===null||g===void 0||g.call(n)},n.onTrackPointerOver=function(){var p=n.theme,g=p.thumbHoverColor,m=p.hoverSize;n.thumbShape.attr("stroke",g),n.thumbShape.attr("lineWidth",m)},n.onTrackPointerOut=function(){var p=n.theme,g=p.thumbColor,m=p.size;n.thumbShape.attr("stroke",g),n.thumbShape.attr("lineWidth",m)},n.validateRange=function(p){var g=p;return p+n.thumbLen>n.trackLen?g=n.trackLen-n.thumbLen:p+n.thumbLen<n.thumbLen&&(g=0),g};var i=e.isHorizontal,o=i===void 0?!1:i,a=e.trackLen,s=e.thumbLen,l=e.position,u=e.thumbOffset,d=u===void 0?0:u,h=e.theme,v=e.scrollTargetMaxOffset;return n.isHorizontal=o,n.thumbOffset=d,n.trackLen=a,n.thumbLen=s,n.position=l,n.theme=h,n.scrollTargetMaxOffset=v,n.initScrollBar(),n}return t}(ft),uE=function(r,t,e){if(e<=0)return{start:0,end:0};var n=rl(r,function(o,a){var s=t;return s>=o&&s<r[a+1]},0);n=Math.max(n,0);var i=e===t?n:rl(r,function(o,a){var s=e;return s>o&&s<=r[a+1]},n);return i=Math.min(i===-1?1/0:i,r.length-2),{start:n,end:i}},DW=function(r,t){var e=t.width,n=t.originalWidth,i=Math.min(n-e,r);return i<0?0:i},Jm=function(r,t,e){var n=Math.min(t-e,r);return n<0?0:n},zs=function(r,t){if(r===void 0&&(r=[]),se(r))return[];var e=[];return r.forEach(function(n){if(n instanceof t&&e.push(n),n instanceof ft){var i=n.children;i.forEach(function(o){o instanceof t&&e.push(o)})}}),e},fE=function(r,t,e){return e.slice(r,t+1).map(function(n){return n.x+n.width})},vd=function(r,t,e){for(var n=[],i=r;i<t+1;i++)n.push(e.getCellOffsetY(i+1));return n},FW=function(r,t,e,n){var i=vd(r,t,n),o=n.getCellOffsetY(r);return i.map(function(a){return a-o+e})},jm=function(r,t,e){var n=F(e,4),i=n[0],o=n[1],a=n[2],s=n[3];return r>=i&&r<=o&&t>=a&&t<=s},eC=function(r){for(var t=F(r,4),e=t[0],n=t[1],i=t[2],o=t[3],a=[],s=e;s<=n;s+=1)for(var l=i;l<=o;l+=1)a.push([s,l]);return a},kW=function(r,t){var e=[],n=[];if(se(r))return se(t)?{add:e,remove:n}:{add:eC(t),remove:n};if(se(t))return{add:e,remove:eC(r)};for(var i=F(r,4),o=i[0],a=i[1],s=i[2],l=i[3],u=F(t,4),d=u[0],h=u[1],v=u[2],p=u[3],g=o;g<=a;g++)for(var m=s;m<=l;m++)jm(g,m,t)||n.push([g,m]);for(var g=d;g<=h;g+=1)for(var m=v;m<=p;m+=1)jm(g,m,r)||e.push([g,m]);return{add:e,remove:n}},HW=function(r,t){var e=[],n=[];return Object.keys(t).forEach(function(i){var o=kW((r==null?void 0:r[i])||[],t[i]),a=o.add,s=o.remove;e.push.apply(e,X([],F(a),!1)),n.push.apply(n,X([],F(s),!1))}),{add:e,remove:n}},dE=function(){function r(t,e){e===void 0&&(e=!1),this.x=0,this.y=0,this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.width=0,this.height=0,this.originalWidth=0,this.originalHeight=0,this.viewportHeight=0,this.viewportWidth=0,this.facet=t,this.spreadsheet=t.spreadsheet,this.layoutResult=t.getLayoutResult(),e&&this.calculateBBox()}return r}(),hE=function(r){oe(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.calculateBBox=function(){var e=this.getCornerBBoxWidth(),n=this.getCornerBBoxHeight();this.width=e,this.height=n,this.maxX=e,this.maxY=n},t.prototype.getCornerBBoxOriginalHeight=function(){var e=this.layoutResult.colsHierarchy,n=this.spreadsheet.options.style.colCell;return e.sampleNodeForLastLevel?Ke(e.height):n==null?void 0:n.height},t.prototype.getCornerBBoxHeight=function(){return this.originalHeight=this.getCornerBBoxOriginalHeight(),this.originalHeight},t.prototype.getCornerBBoxWidth=function(){var e=this.layoutResult.rowsHierarchy;return this.originalWidth=Ke(e.width+this.facet.getSeriesNumberWidth()),this.spreadsheet.isFrozenRowHeader()?this.adjustCornerBBoxWidth():this.originalWidth},t.prototype.adjustCornerBBoxWidth=function(){var e=this.layoutResult.colsHierarchy,n=this.spreadsheet.options,i=n.width,o=n.frozen,a=o==null?void 0:o.rowHeader,s=Ii(a)?L6:yf(a,0,1),l=i*s,u=e==null?void 0:e.width,d=i-this.originalWidth;if(this.originalWidth<=l||u<=d)return this.originalWidth;var h=0,v=i-l;return u<=v?h=this.originalWidth-(u-d):h=l,Ke(h)},t}(dE),zW=function(r){oe(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.calculateBBox=function(){this.originalWidth=this.facet.getRealWidth(),this.originalHeight=this.facet.getRealHeight();var e=this.facet.cornerBBox,n={x:Ke(e.maxX),y:Ke(e.maxY)};this.x=n.x+_n.getVerticalBorderWidth(this.spreadsheet),this.y=n.y+_n.getHorizontalBorderWidth(this.spreadsheet),this.minX=this.x,this.minY=this.y;var i=this.spreadsheet.theme.scrollBar.size,o=this.spreadsheet.options,a=o.width,s=o.height,l=Math.max(0,a-this.x),u=Math.max(0,s-this.y-i);if(this.width=l,this.height=u,this.viewportHeight=Math.abs(Ke(Math.min(u,this.originalHeight))),this.viewportWidth=Math.abs(Ke(Math.min(l,this.originalWidth))),this.maxX=this.x+this.viewportWidth,this.maxY=this.y+this.viewportHeight,!!this.spreadsheet.enableFrozenHeaders()){var d=this.spreadsheet.options.frozen,h=d.trailingColCount,v=h===void 0?0:h,p=d.trailingRowCount,g=p===void 0?0:p;v>0&&(this.viewportWidth=this.width,this.maxX=this.x+this.width),g>0&&(this.viewportHeight=this.height,this.maxY=this.y+this.height)}},t}(dE),GW="*",cE=function(){function r(){this._events={}}return r.prototype.on=function(t,e,n){return this._events[t]||(this._events[t]=[]),this._events[t].push({callback:e,once:!!n}),this},r.prototype.once=function(t,e){return this.on(t,e,!0)},r.prototype.emit=function(t){for(var e=this,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var o=this._events[t]||[],a=this._events[GW]||[],s=function(l){for(var u=l.length,d=0;d<u;d++)if(!!l[d]){var h=l[d],v=h.callback,p=h.once;p&&(l.splice(d,1),l.length===0&&delete e._events[t],u--,d--),v.apply(e,n)}};s(o),s(a)},r.prototype.off=function(t,e){if(!t)this._events={};else if(!e)delete this._events[t];else{for(var n=this._events[t]||[],i=n.length,o=0;o<i;o++)n[o].callback===e&&(n.splice(o,1),i--,o--);n.length===0&&delete this._events[t]}return this},r.prototype.getEvents=function(){return this._events},r}();function WW(r){return r*r*r}var Ns=function(){var r;return(r=performance==null?void 0:performance.now())!==null&&r!==void 0?r:Date.now()},UW=800,VW=100,YW=function(r){oe(t,r);function t(e){var n=r.call(this)||this;return n.bindPointerDown=function(i){window.cancelAnimationFrame(n.raf),n.panning=!0,n.preX=i.x,n.preY=i.y,n.speedX=0,n.speedY=0,n.lastMoveMS=Ns()},n.bindPointerMove=function(i){if(n.panning){var o=Ns(),a=o-n.lastMoveMS,s=n.preX-i.x,l=n.preY-i.y;n.speedX=s/a,n.speedY=l/a,n.preX=i.x,n.preY=i.y,n.lastMoveMS=o,n.emit("wheel",N(N({},i.clone()),{x:i.x,y:i.y,deltaX:s,deltaY:l}))}},n.bindPointerUp=function(i){n.panning=!1;var o=Ns();if(!(!n.speedX||!n.speedY||o-n.lastMoveMS>=VW)){var a=function(){var s=Ns();n.raf=window.requestAnimationFrame(function(){var l=Ns(),u=(l-o)/UW;if(u<1){var d=WW(1-u),h=l-s;n.emit("wheel",N(N({},i.clone()),{x:i.x,y:i.y,deltaX:n.speedX*d*h,deltaY:n.speedY*d*h})),a()}})};a()}},n.canvas=e,n.panning=!1,n.init(),n}return t.prototype.init=function(){this.canvas.addEventListener(Xe.POINTER_DOWN,this.bindPointerDown),this.canvas.addEventListener(Xe.POINTER_MOVE,this.bindPointerMove),this.canvas.addEventListener(Xe.POINTER_UP,this.bindPointerUp)},t.prototype.destroy=function(){this.canvas.removeEventListener(Xe.POINTER_DOWN,this.bindPointerDown),this.canvas.removeEventListener(Xe.POINTER_MOVE,this.bindPointerMove),this.canvas.removeEventListener(Xe.POINTER_UP,this.bindPointerUp)},t}(cE),XW=function(){function r(t){var e=this;this.scrollFrameId=null,this.getLayoutResult=function(){return N(N({},e.layoutResult),{cornerNodes:e.getCornerNodes(),seriesNumberNodes:e.getSeriesNumberNodes()})},this.hideScrollBar=function(){var n,i,o;(n=e.hRowScrollBar)===null||n===void 0||n.setAttribute("visibility","hidden"),(i=e.hScrollBar)===null||i===void 0||i.setAttribute("visibility","hidden"),(o=e.vScrollBar)===null||o===void 0||o.setAttribute("visibility","hidden")},this.delayHideScrollBar=Cf(this.hideScrollBar,1e3),this.delayHideScrollbarOnMobile=function(){Tt()&&e.delayHideScrollBar()},this.showVerticalScrollBar=function(){var n;(n=e.vScrollBar)===null||n===void 0||n.setAttribute("visibility","visible")},this.showHorizontalScrollBar=function(){var n,i;(n=e.hRowScrollBar)===null||n===void 0||n.setAttribute("visibility","visible"),(i=e.hScrollBar)===null||i===void 0||i.setAttribute("visibility","visible")},this.onContainerWheelForMobileCompatibility=function(){var n=e.spreadsheet.getCanvasElement(),i,o;n.addEventListener("touchstart",function(a){i=a.touches[0].clientY}),n.addEventListener("touchend",function(a){o=a.changedTouches[0].clientY,o<i?e.scrollDirection=Wt.SCROLL_UP:o>i&&(e.scrollDirection=Wt.SCROLL_DOWN)})},this.onContainerWheel=function(){Tt()?e.onContainerWheelForMobile():e.onContainerWheelForPc()},this.getMobileWheelDeltaY=function(n){return e.scrollDirection===Wt.SCROLL_UP?Math.max(0,n):e.scrollDirection===Wt.SCROLL_DOWN?Math.min(0,n):n},this.onContainerWheelForPc=function(){var n=e.spreadsheet.getCanvasElement();n==null||n.addEventListener("wheel",e.onWheel)},this.onContainerWheelForMobile=function(){e.mobileWheel=new YW(e.spreadsheet.container),e.mobileWheel.on("wheel",function(n){e.spreadsheet.hideTooltip();var i=n.originalEvent,o=n.deltaX,a=n.deltaY,s=n.x,l=n.y,u=e.getMobileWheelDeltaY(a);e.onWheel(N(N({},i),{deltaX:o,deltaY:u,offsetX:s,offsetY:l}))}),e.onContainerWheelForMobileCompatibility()},this.bindEvents=function(){e.onContainerWheel(),e.emitPaginationEvent()},this.setScrollOffset=function(n){Object.keys(n).forEach(function(i){var o=ze(n,i);_x(o)||e.spreadsheet.store.set(i,Ke(o))})},this.getScrollOffset=function(){var n=e.spreadsheet.store;return{scrollX:n.get("scrollX",0),scrollY:n.get("scrollY",0),rowHeaderScrollX:n.get("rowHeaderScrollX",0)}},this.resetScrollX=function(){e.setScrollOffset({scrollX:0})},this.resetRowScrollX=function(){e.setScrollOffset({rowHeaderScrollX:0})},this.resetScrollY=function(){e.setScrollOffset({scrollY:0})},this.resetScrollOffset=function(){e.setScrollOffset({scrollX:0,scrollY:0,rowHeaderScrollX:0})},this.emitPaginationEvent=function(){var n=e.spreadsheet.options.pagination;if(n){var i=n.current,o=i===void 0?ov:i,a=n.pageSize,s=e.viewCellHeights.getTotalLength(),l=Ke((s-1)/a)+1;e.spreadsheet.emit(U.LAYOUT_PAGINATION,{pageSize:a,pageCount:l,total:s,current:o})}},this.unbindEvents=function(){var n,i=e.spreadsheet.getCanvasElement();i==null||i.removeEventListener("wheel",e.onWheel),(n=e.mobileWheel)===null||n===void 0||n.destroy()},this.calculateCellWidthHeight=function(){var n=e.layoutResult.colLeafNodes,i=Dx(n,function(o,a){var s=It(o)||0;return o.push(s+a.width),o},[0]);e.viewCellWidths=i,e.viewCellHeights=e.getViewCellHeights()},this.getRealScrollX=function(n,i){return i===void 0&&(i=0),e.spreadsheet.isFrozenRowHeader()?i:n},this.calculatePanelBBox=function(){e.panelBBox=new zW(e,!0)},this.getRealWidth=function(){return It(e.viewCellWidths)||0},this.getRealHeight=function(){var n=e.spreadsheet.options.pagination,i=e.viewCellHeights;if(n){var o=e.getCellRange(),a=o.start,s=o.end;return i.getCellOffsetY(s+1)-i.getCellOffsetY(a)}return i.getTotalHeight()},this.scrollWithAnimation=function(n,i,o){var a,s,l,u;n===void 0&&(n={}),i===void 0&&(i=200);var d=e.getAdjustedScrollOffset({scrollX:((a=n.offsetX)===null||a===void 0?void 0:a.value)||0,scrollY:((s=n.offsetY)===null||s===void 0?void 0:s.value)||0,rowHeaderScrollX:((l=n.rowHeaderOffsetX)===null||l===void 0?void 0:l.value)||0}),h=d.scrollX,v=d.scrollY,p=d.rowHeaderScrollX;(u=e.timer)===null||u===void 0||u.stop();var g=e.getScrollOffset(),m=[h!=null?h:g.scrollX,v!=null?v:g.scrollY,p!=null?p:g.rowHeaderScrollX],C=TW(Object.values(g),m);e.timer=sE(function(w){try{var _=Math.min(w/i,1),S=F(C(_),3),b=S[0],T=S[1],E=S[2];e.setScrollOffset({rowHeaderScrollX:E,scrollX:b,scrollY:T}),e.startScroll(),w>i&&(e.timer.stop(),o==null||o())}catch(R){console.error(R),e.timer.stop()}})},this.scrollImmediately=function(n){var i,o,a;n===void 0&&(n={});var s=e.getAdjustedScrollOffset({scrollX:((i=n.offsetX)===null||i===void 0?void 0:i.value)||0,scrollY:((o=n.offsetY)===null||o===void 0?void 0:o.value)||0,rowHeaderScrollX:((a=n.rowHeaderOffsetX)===null||a===void 0?void 0:a.value)||0}),l=s.scrollX,u=s.scrollY,d=s.rowHeaderScrollX;e.setScrollOffset({scrollX:l,scrollY:u,rowHeaderScrollX:d}),e.startScroll()},this.startScroll=function(n){var i,o,a;n===void 0&&(n=!1);var s=e.getScrollOffset(),l=s.rowHeaderScrollX,u=s.scrollX,d=s.scrollY;(i=e.hRowScrollBar)===null||i===void 0||i.onlyUpdateThumbOffset(e.getScrollBarOffset(l,e.hRowScrollBar)),(o=e.hScrollBar)===null||o===void 0||o.onlyUpdateThumbOffset(e.getScrollBarOffset(u,e.hScrollBar)),(a=e.vScrollBar)===null||a===void 0||a.onlyUpdateThumbOffset(e.getScrollBarOffset(d,e.vScrollBar)),e.dynamicRenderCell(n)},this.getRendererHeight=function(){var n=e.getCellRange(),i=n.start,o=n.end;return e.viewCellHeights.getCellOffsetY(o+1)-e.viewCellHeights.getCellOffsetY(i)},this.getAdjustedScrollOffset=function(n){var i=n.scrollX,o=n.scrollY,a=n.rowHeaderScrollX;return{scrollX:Jm(i,e.layoutResult.colsHierarchy.width,e.panelBBox.width),scrollY:Jm(o,e.getRendererHeight(),e.panelBBox.height),rowHeaderScrollX:DW(a,e.cornerBBox)}},this.renderRowScrollBar=function(n){if(e.spreadsheet.isFrozenRowHeader()&&e.cornerBBox.width<e.cornerBBox.originalWidth){var i=e.cornerBBox.originalWidth-e.cornerBBox.width,o=e.getScrollbarPosition().maxY,a=e.spreadsheet.theme,s=a.splitLine,l=a.scrollBar,u=Math.max(e.cornerBBox.width*e.cornerBBox.width/e.cornerBBox.originalWidth,l==null?void 0:l.thumbHorizontalMinSize),d=u-(s==null?void 0:s.verticalBorderWidth);e.hRowScrollBar=new hc({isHorizontal:!0,trackLen:e.cornerBBox.width,thumbLen:d,position:{x:e.cornerBBox.minX+e.scrollBarSize/2,y:o},thumbOffset:n*(e.cornerBBox.width-u)/i,theme:e.scrollBarTheme,scrollTargetMaxOffset:i}),e.hRowScrollBar.addEventListener(zo.ScrollChange,function(h){var v,p,g=h.offset,m=e.getValidScrollBarOffset(g,i),C=Ke(m);e.setScrollOffset({rowHeaderScrollX:C}),(v=e.rowHeader)===null||v===void 0||v.onRowScrollX(C,Qa),(p=e.seriesNumberHeader)===null||p===void 0||p.onRowScrollX(C,gm),e.cornerHeader.onRowScrollX(C,jc);var w=e.getScrollBarOffset(C,e.hRowScrollBar),_=e.getScrollOffset(),S=_.scrollX,b=_.scrollY,T={scrollX:S,scrollY:b,rowHeaderScrollX:w};e.hRowScrollBar.updateThumbOffset(w,!1),e.spreadsheet.emit(U.ROW_CELL_SCROLL,T),e.spreadsheet.emit(U.GLOBAL_SCROLL,T)}),e.foregroundGroup.appendChild(e.hRowScrollBar)}},this.getValidScrollBarOffset=function(n,i){return yf(n,0,i)},this.renderHScrollBar=function(n,i,o){if(Ke(n)<Ke(i)){var a=e.scrollBarSize/2,s=e.getScrollbarPosition().maxY,l=!e.spreadsheet.isFrozenRowHeader(),u=n+(l?Math.min(e.cornerBBox.width,e.getCanvasSize().width):0),d={x:e.panelBBox.minX+(l?-e.cornerBBox.width+a:a),y:s},h=i+(l?e.cornerBBox.width:0),v=e.spreadsheet.theme.scrollBar,p=h-u,g=Math.max(u/h*u,v==null?void 0:v.thumbHorizontalMinSize);e.hScrollBar=new hc({isHorizontal:!0,trackLen:u,thumbLen:g,position:d,thumbOffset:o*(u-g)/p,theme:e.scrollBarTheme,scrollTargetMaxOffset:p}),e.hScrollBar.addEventListener(zo.ScrollChange,function(m){var C=m.offset,w=m.updateThumbOffset,_=e.getValidScrollBarOffset(C,p);w&&e.hScrollBar.updateThumbOffset(e.getScrollBarOffset(_,e.hScrollBar),!1),e.setScrollOffset({scrollX:_}),e.dynamicRenderCell()}),e.foregroundGroup.appendChild(e.hScrollBar)}},this.getScrollbarPosition=function(){var n=e.panelBBox,i=n.maxX,o=n.maxY,a=e.getCanvasSize(),s=a.width,l=a.height,u=e.spreadsheet.options.interaction.scrollbarPosition===Ef.CONTENT;return{maxX:(u?i:s)-e.scrollBarSize,maxY:u?o:l-e.scrollBarSize}},this.renderVScrollBar=function(n,i,o){if(n<i){var a=e.spreadsheet.theme.scrollBar,s=Math.max(n/i*n,a==null?void 0:a.thumbVerticalMinSize),l=i-n,u=e.getScrollbarPosition().maxX;e.vScrollBar=new hc({isHorizontal:!1,trackLen:n,thumbLen:s,thumbOffset:o*(n-s)/l,position:{x:u,y:e.panelBBox.minY},theme:e.scrollBarTheme,scrollTargetMaxOffset:l}),e.vScrollBar.addEventListener(zo.ScrollChange,function(d){var h=d.offset,v=d.updateThumbOffset,p=e.getValidScrollBarOffset(h,l);v&&e.vScrollBar.updateThumbOffset(e.getScrollBarOffset(p,e.vScrollBar),!1),e.setScrollOffset({scrollY:p}),e.dynamicRenderCell()}),e.foregroundGroup.appendChild(e.vScrollBar)}},this.getScrollBarOffset=function(n,i){var o=i.trackLen,a=i.thumbLen,s=i.scrollTargetMaxOffset;return n*(o-a)/s},this.isScrollOverThePanelArea=function(n){var i=n.offsetX,o=n.offsetY;return i>e.panelBBox.minX&&i<e.panelBBox.maxX&&o>e.panelBBox.minY&&o<e.panelBBox.maxY},this.isScrollOverTheCornerArea=function(n){var i=n.offsetX,o=n.offsetY;return i>e.cornerBBox.minX&&i<e.cornerBBox.maxX&&o>e.cornerBBox.minY&&o<e.cornerBBox.maxY+e.panelBBox.height},this.updateHorizontalRowScrollOffset=function(n){var i,o=n.offset,a=n.offsetX,s=n.offsetY;e.isScrollOverTheCornerArea({offsetX:a,offsetY:s})&&((i=e.hRowScrollBar)===null||i===void 0||i.emitScrollChange(o))},this.updateHorizontalScrollOffset=function(n){var i,o=n.offset,a=n.offsetX,s=n.offsetY;(!e.hRowScrollBar||e.isScrollOverThePanelArea({offsetX:a,offsetY:s}))&&((i=e.hScrollBar)===null||i===void 0||i.emitScrollChange(o))},this.isScrollToLeft=function(n){var i=n.deltaX,o=n.offsetX,a=n.offsetY;if(!e.hScrollBar&&!e.hRowScrollBar)return!0;var s=!e.hRowScrollBar||e.isScrollOverThePanelArea({offsetY:a,offsetX:o})||e.hRowScrollBar.thumbOffset<=0,l=!e.hScrollBar||e.hScrollBar.thumbOffset<=0;return i<=0&&l&&s},this.isScrollToRight=function(n){var i,o,a,s,l,u,d=n.deltaX,h=n.offsetX,v=n.offsetY;if(!e.hScrollBar&&!e.hRowScrollBar)return!0;var p=e.spreadsheet.isFrozenRowHeader()?(i=e.panelBBox)===null||i===void 0?void 0:i.width:(o=e.panelBBox)===null||o===void 0?void 0:o.maxX,g=!e.hRowScrollBar||e.isScrollOverThePanelArea({offsetY:v,offsetX:h})||((a=e.hRowScrollBar)===null||a===void 0?void 0:a.thumbOffset)+((s=e.hRowScrollBar)===null||s===void 0?void 0:s.thumbLen)>=e.cornerBBox.width,m=e.hRowScrollBar&&e.isScrollOverTheCornerArea({offsetX:h,offsetY:v})||((l=e.hScrollBar)===null||l===void 0?void 0:l.thumbOffset)+((u=e.hScrollBar)===null||u===void 0?void 0:u.thumbLen)>=p;return d>=0&&m&&g},this.isScrollToTop=function(n){var i;return e.vScrollBar?n<=0&&((i=e.vScrollBar)===null||i===void 0?void 0:i.thumbOffset)<=0:!0},this.isScrollToBottom=function(n){var i,o,a;return e.vScrollBar?n>=0&&((i=e.vScrollBar)===null||i===void 0?void 0:i.thumbOffset)+((o=e.vScrollBar)===null||o===void 0?void 0:o.thumbLen)>=((a=e.panelBBox)===null||a===void 0?void 0:a.height):!0},this.isVerticalScrollOverTheViewport=function(n){return!e.isScrollToTop(n)&&!e.isScrollToBottom(n)},this.isHorizontalScrollOverTheViewport=function(n){return!e.isScrollToLeft(n)&&!e.isScrollToRight(n)},this.isScrollOverTheViewport=function(n){var i=n.deltaY,o=n.deltaX,a=n.offsetY,s=a<=e.cornerBBox.maxY;return s?!1:i!==0?e.isVerticalScrollOverTheViewport(i):o!==0?e.isHorizontalScrollOverTheViewport(n):!1},this.cancelScrollFrame=function(){return Tt()&&e.scrollFrameId?!1:(cancelAnimationFrame(e.scrollFrameId),!0)},this.clearScrollFrameIdOnMobile=function(){Tt()&&(e.scrollFrameId=null)},this.stopScrollChainingIfNeeded=function(n){var i=e.spreadsheet.options.interaction;(i==null?void 0:i.overscrollBehavior)!=="auto"&&(e.cancelScrollFrame(),e.stopScrollChaining(n))},this.stopScrollChaining=function(n){var i,o;n!=null&&n.cancelable&&((i=n==null?void 0:n.preventDefault)===null||i===void 0||i.call(n));var a=n==null?void 0:n.originalEvent;a!=null&&a.cancelable&&((o=a==null?void 0:a.preventDefault)===null||o===void 0||o.call(a))},this.onWheel=function(n){var i=e.spreadsheet.options.interaction,o=n.deltaX,a=n.deltaY,s=n.offsetX,l=n.offsetY,u=n.shiftKey;u&&e_()&&(s=s-o+a,o=a,l-=a,a=0);var d=F(Ez(o,a,i==null?void 0:i.scrollSpeedRatio),2),h=d[0],v=d[1];if(e.spreadsheet.hideTooltip(),e.spreadsheet.interaction.clearHoverTimer(),!e.isScrollOverTheViewport({deltaX:h,deltaY:v,offsetX:s,offsetY:l})){e.stopScrollChainingIfNeeded(n);return}e.stopScrollChaining(n),e.spreadsheet.interaction.addIntercepts([Le.HOVER]),e.cancelScrollFrame()&&(e.scrollFrameId=requestAnimationFrame(function(){var p,g=e.getScrollOffset(),m=g.scrollX,C=g.scrollY,w=g.rowHeaderScrollX;h!==0&&(e.showHorizontalScrollBar(),e.updateHorizontalRowScrollOffset({offsetX:s,offsetY:l,offset:h+w}),e.updateHorizontalScrollOffset({offsetX:s,offsetY:l,offset:h+m})),v!==0&&(e.showVerticalScrollBar(),(p=e.vScrollBar)===null||p===void 0||p.emitScrollChange(v+C)),e.delayHideScrollbarOnMobile(),e.clearScrollFrameIdOnMobile()}))},this.realDataCellRender=function(n,i){var o=e.calculateXYIndexes(n,i);si.getInstance().logger("realDataCellRender:",e.preCellIndexes,o);var a=HW(e.preCellIndexes,o),s=a.add,l=a.remove;si.getInstance().debugCallback(N9,function(){Me(s,function(d){var h,v,p=F(d,2),g=p[0],m=p[1],C=e.getCellMeta(m,g);if(C){var w=(v=(h=e.spreadsheet.options).dataCell)===null||v===void 0?void 0:v.call(h,C);if(!w)return;w.position=[m,g],w.name="".concat(g,"-").concat(m),e.addDataCell(w)}});var u=zs(e.panelGroup.children,Qo);Me(l,function(d){var h=F(d,2),v=h[0],p=h[1],g=$t(u,function(m){return m.name==="".concat(v,"-").concat(p)});g==null||g.remove()}),si.getInstance().logger("Render Cell Panel: ".concat(u==null?void 0:u.length,", Add: ").concat(s==null?void 0:s.length,", Remove: ").concat(l==null?void 0:l.length))}),e.preCellIndexes=o,e.spreadsheet.emit(U.LAYOUT_AFTER_REAL_DATA_CELL_RENDER,{add:s,remove:l,spreadsheet:e.spreadsheet})},this.getGridInfo=function(){var n=F(e.preCellIndexes.center,4),i=n[0],o=n[1],a=n[2],s=n[3],l=fE(i,o,e.layoutResult.colLeafNodes),u=vd(a,s,e.viewCellHeights);return{cols:l,rows:u}},this.onAfterScroll=Cf(function(){var n=e.spreadsheet,i=n.interaction,o=n.container;if(!i.isSelectedState()&&(i.removeIntercepts([Le.HOVER]),i.getHoverAfterScroll())){var a=i.eventController.canvasMousemoveEvent;if(a){var s=a.x,l=a.y,u=o.document.elementFromPointSync(s,l);u&&o.emit(Xe.POINTER_MOVE,N(N({},a),{shape:u,target:u,timestamp:performance.now()}))}}},300),this.getCellChildrenNodes=function(n){var i,o=(i=n==null?void 0:n.getMeta)===null||i===void 0?void 0:i.call(n),a=(n==null?void 0:n.cellType)===ie.ROW_CELL,s=e.spreadsheet.isHierarchyTreeType();return s&&a?Ft.getAllLeaveNodes(o).filter(function(l){return l.rowIndex===o.rowIndex}):Ft.getAllChildrenNodes(o)},this.spreadsheet=t,this.init()}return Object.defineProperty(r.prototype,"scrollBarTheme",{get:function(){return this.spreadsheet.theme.scrollBar},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"scrollBarSize",{get:function(){var t;return(t=this.scrollBarTheme)===null||t===void 0?void 0:t.size},enumerable:!1,configurable:!0}),r.prototype.initGroups=function(){var t=this.spreadsheet.container;this.backgroundGroup=t.appendChild(new ft({name:d6,style:{zIndex:r6}})),this.initPanelGroups(),this.foregroundGroup=t.appendChild(new ft({name:h6,style:{zIndex:n6}}))},r.prototype.initPanelGroups=function(){var t=this.spreadsheet.container;this.panelGroup=t.appendChild(new ft({name:c6,style:{zIndex:a6}})),this.panelScrollGroup=new BW({name:v6,zIndex:s6,s2:this.spreadsheet}),this.panelGroup.appendChild(this.panelScrollGroup)},r.prototype.getCellCustomSize=function(t,e){return Un(e)?e==null?void 0:e(t):e},r.prototype.getRowCellDraggedWidth=function(t){var e,n,i,o=this.spreadsheet.options.style.rowCell;return(n=(e=o==null?void 0:o.widthByField)===null||e===void 0?void 0:e[t==null?void 0:t.id])!==null&&n!==void 0?n:(i=o==null?void 0:o.widthByField)===null||i===void 0?void 0:i[t==null?void 0:t.field]},r.prototype.getRowCellDraggedHeight=function(t){var e,n,i,o=this.spreadsheet.options.style.rowCell;return(n=(e=o==null?void 0:o.heightByField)===null||e===void 0?void 0:e[t==null?void 0:t.id])!==null&&n!==void 0?n:(i=o==null?void 0:o.heightByField)===null||i===void 0?void 0:i[t==null?void 0:t.field]},r.prototype.isCustomRowCellHeight=function(t){var e,n=this.spreadsheet.options.style.dataCell,i=(e=nv.dataCell)===null||e===void 0?void 0:e.height;return Br(this.getCustomRowCellHeight(t))||(n==null?void 0:n.height)!==i},r.prototype.getCustomRowCellHeight=function(t){var e,n=this.spreadsheet.options.style.rowCell;return(e=this.getRowCellDraggedHeight(t))!==null&&e!==void 0?e:this.getCellCustomSize(t,n==null?void 0:n.height)},r.prototype.getRowCellHeight=function(t){var e,n=this.spreadsheet.options.style.dataCell;return(e=this.getCustomRowCellHeight(t))!==null&&e!==void 0?e:n==null?void 0:n.height},r.prototype.getColCellDraggedWidth=function(t){var e,n,i,o=this.spreadsheet.options.style.colCell;return(n=(e=o==null?void 0:o.widthByField)===null||e===void 0?void 0:e[t==null?void 0:t.id])!==null&&n!==void 0?n:(i=o==null?void 0:o.widthByField)===null||i===void 0?void 0:i[t==null?void 0:t.field]},r.prototype.getColCellDraggedHeight=function(t){var e,n,i,o=this.spreadsheet.options.style.colCell;return(n=(e=o==null?void 0:o.heightByField)===null||e===void 0?void 0:e[t==null?void 0:t.id])!==null&&n!==void 0?n:(i=o==null?void 0:o.heightByField)===null||i===void 0?void 0:i[t==null?void 0:t.field]},r.prototype.getColNodeHeight=function(t,e){var n,i;if(!t)return 0;var o=this.spreadsheet.options.style.colCell,a=(n=this.getColCellDraggedHeight(t))!==null&&n!==void 0?n:this.getCellCustomSize(t,o==null?void 0:o.height);if(Br(a)&&a!==((i=nv.colCell)===null||i===void 0?void 0:i.height))return a;var s=this.spreadsheet.isTableMode()?Ff:hl,l=new s(t,this.spreadsheet,{shallowRender:!0}),u=this.getDefaultColNodeHeight(t,e);return this.getCellAdaptiveHeight(l,u)},r.prototype.getDefaultColNodeHeight=function(t,e){var n,i,o,a;if(!t)return 0;var s=this.spreadsheet.options.style.colCell,l=((i=(n=e==null?void 0:e.sampleNodesForAllLevels)===null||n===void 0?void 0:n.find(function(d){return d.level===t.level}))===null||i===void 0?void 0:i.height)||0,u=(a=(o=this.getColCellDraggedHeight(t))!==null&&o!==void 0?o:this.getCellCustomSize(t,s==null?void 0:s.height))!==null&&a!==void 0?a:0;return Math.max(u,l)},r.prototype.getCellAdaptiveHeight=function(t,e){if(e===void 0&&(e=0),!t)return e;var n=t.getStyle().cell.padding;t.drawTextShape();var i=t.getTextShape().parsedStyle,o=t.getActualTextHeight(),a=o+n.top+n.bottom;return(i==null?void 0:i.maxLines)>1&&o>=e?a:e},r.prototype.updateColsHierarchySampleMaxHeightNodes=function(t){var e=this,n=t.sampleNodesForAllLevels.map(function(i){var o=Cp(t.getNodes(i.level).filter(function(a){return!a.isTotals}),function(a){return e.getColNodeHeight(a,t)});return o});t.sampleNodesForAllLevels=Hn(n),t.sampleNodesForAllLevels.forEach(function(i){var o;if(i.height=e.getColNodeHeight(i,t),i.level===0)i.y=0;else{var a=(o=t.sampleNodesForAllLevels[i.level-1])!==null&&o!==void 0?o:{y:0,height:0};i.y=a.y+a.height}t.height+=i.height})},r.prototype.render=function(){Mz(this.spreadsheet.dataCfg.fields)||(this.adjustScrollOffset(),this.renderHeaders(),this.renderScrollBars(),this.renderBackground(),this.dynamicRenderCell(!0))},r.prototype.adjustScrollOffset=function(){var t=this.getAdjustedScrollOffset(this.getScrollOffset());this.setScrollOffset(t)},r.prototype.getSeriesNumberWidth=function(){var t,e,n=this.spreadsheet.options.seriesNumber;return n!=null&&n.enable&&(e=(t=this.spreadsheet.theme.rowCell)===null||t===void 0?void 0:t.seriesNumberWidth)!==null&&e!==void 0?e:0},r.prototype.getCanvasSize=function(){var t=this.spreadsheet.options,e=t.width,n=e===void 0?0:e,i=t.height,o=i===void 0?0:i;return{width:n,height:o}},r.prototype.getContentHeight=function(){var t=this.layoutResult,e=t.rowsHierarchy,n=t.colsHierarchy;return e.height+n.height},r.prototype.updateScrollOffset=function(t){var e,n,i,o,a,s;if(((e=t.rowHeaderOffsetX)===null||e===void 0?void 0:e.value)!==void 0){!((n=t.rowHeaderOffsetX)===null||n===void 0)&&n.animate?this.scrollWithAnimation(t):this.scrollImmediately(t);return}if(((i=t.offsetX)===null||i===void 0?void 0:i.value)!==void 0){!((o=t.offsetX)===null||o===void 0)&&o.animate?this.scrollWithAnimation(t):this.scrollImmediately(t);return}((a=t.offsetY)===null||a===void 0?void 0:a.value)!==void 0&&(!((s=t.offsetY)===null||s===void 0)&&s.animate?this.scrollWithAnimation(t):this.scrollImmediately(t))},r.prototype.getPaginationScrollY=function(){var t=this.spreadsheet.options.pagination;if(t){var e=t.current,n=e===void 0?ov:e,i=t.pageSize,o=this.viewCellHeights,a=Math.max((n-1)*i,0);return o.getCellOffsetY(a)}return 0},r.prototype.destroy=function(){this.unbindEvents(),this.clearAllGroup(),this.preCellIndexes=null,cancelAnimationFrame(this.scrollFrameId)},r.prototype.calculateCornerBBox=function(){this.cornerBBox=new hE(this,!0)},r.prototype.getCellRange=function(){var t=this.spreadsheet.options.pagination;return Lz(this.viewCellHeights,t)},r.prototype.clearAllGroup=function(){for(var t=this.panelGroup.children,e=t===void 0?[]:t,n=e.length-1;n>=0;n--){var i=e[n];i instanceof ft?i.removeChildren():e[n].remove()}this.foregroundGroup.removeChildren(),this.backgroundGroup.removeChildren()},r.prototype.translateRelatedGroups=function(t,e,n){var i,o,a,s,l,u;Pn(this.panelScrollGroup,this.panelBBox.x-t,this.panelBBox.y-e),(i=this.rowHeader)===null||i===void 0||i.onScrollXY(this.getRealScrollX(t,n),e,Qa),(o=this.seriesNumberHeader)===null||o===void 0||o.onScrollXY(this.getRealScrollX(t,n),e,gm),(a=this.cornerHeader)===null||a===void 0||a.onCorScroll(this.getRealScrollX(t,n),jc),(s=this.centerFrame)===null||s===void 0||s.onChangeShadowVisibility(t,this.getRealWidth()-this.panelBBox.width),(l=this.centerFrame)===null||l===void 0||l.onBorderScroll(this.getCenterFrameScrollX(t)),(u=this.columnHeader)===null||u===void 0||u.onColScroll(t,Gx)},r.prototype.getCenterFrameScrollX=function(t){return this.getRealScrollX(t)},r.prototype.init=function(){var t=this;this.initGroups(),si.getInstance().debugCallback(A9,function(){t.layoutResult=t.doLayout(),t.saveInitColumnLeafNodes(t.layoutResult.colLeafNodes),t.spreadsheet.emit(U.LAYOUT_AFTER_HEADER_LAYOUT,t.layoutResult)}),this.calculateCellWidthHeight(),this.calculateCornerBBox(),this.calculatePanelBBox(),this.bindEvents()},r.prototype.renderBackground=function(){var t=this.getCanvasSize(),e=t.width,n=t.height,i=this.spreadsheet.theme.background,o=i.color,a=i.opacity;this.backgroundGroup.appendChild(new wt({style:{fill:o,opacity:a,x:0,y:0,width:e,height:n}}))},r.prototype.renderScrollBars=function(){var t=this.getScrollOffset(),e=t.scrollX,n=t.scrollY,i=t.rowHeaderScrollX,o=this.panelBBox,a=o.width,s=o.height,l=this.layoutResult.colsHierarchy.width,u=this.getRealHeight();this.renderRowScrollBar(i),this.renderHScrollBar(a,l,e),this.renderVScrollBar(s,u,n)},r.prototype.renderHeaders=function(){var t=this.getSeriesNumberWidth();this.rowHeader=this.getRowHeader(),this.columnHeader=this.getColHeader(),t>0&&!this.seriesNumberHeader&&(this.seriesNumberHeader=this.getSeriesNumberHeader()),this.cornerHeader=this.getCornerHeader(),this.centerFrame=this.getCenterFrame(),this.seriesNumberHeader&&this.foregroundGroup.appendChild(this.seriesNumberHeader),this.rowHeader&&this.foregroundGroup.appendChild(this.rowHeader),this.foregroundGroup.appendChild(this.columnHeader),this.foregroundGroup.appendChild(this.cornerHeader),this.foregroundGroup.appendChild(this.centerFrame)},r.prototype.getRowHeaderCfg=function(){var t=this.panelBBox,e=t.y,n=t.viewportHeight,i=t.viewportWidth,o=t.height,a=this.getSeriesNumberWidth();return{width:this.cornerBBox.width,height:o,viewportWidth:i,viewportHeight:n,position:{x:a,y:e},nodes:this.layoutResult.rowNodes,spreadsheet:this.spreadsheet}},r.prototype.getRowHeader=function(){return this.rowHeader?this.rowHeader:new HG(this.getRowHeaderCfg())},r.prototype.getColHeader=function(){if(!this.columnHeader){var t=this.panelBBox,e=t.x,n=t.width,i=t.viewportHeight,o=t.viewportWidth;return new M_({width:n,cornerWidth:this.cornerBBox.width,height:this.cornerBBox.height,viewportWidth:o,viewportHeight:i,position:{x:e,y:0},nodes:this.layoutResult.colNodes,sortParam:this.spreadsheet.store.get("sortParam"),spreadsheet:this.spreadsheet})}return this.columnHeader},r.prototype.getCornerHeader=function(){return this.cornerHeader||kG.getCornerHeader({panelBBox:this.panelBBox,cornerBBox:this.cornerBBox,seriesNumberWidth:this.getSeriesNumberWidth(),layoutResult:this.layoutResult,spreadsheet:this.spreadsheet})},r.prototype.getSeriesNumberHeader=function(){return this.seriesNumberHeader||GG.getSeriesNumberHeader({spreadsheet:this.spreadsheet,panelBBox:this.panelBBox,cornerWidth:this.cornerBBox.width,seriesNumberWidth:this.getSeriesNumberWidth(),rowsHierarchy:this.layoutResult.rowsHierarchy})},r.prototype.getCenterFrame=function(){var t;if(!this.centerFrame){var e=this.panelBBox,n=e.viewportWidth,i=e.viewportHeight,o=this.cornerBBox.width,a=this.cornerBBox.height,s=(t=this.spreadsheet.options)===null||t===void 0?void 0:t.frame,l={position:{x:this.cornerBBox.x,y:this.cornerBBox.y},cornerWidth:o,cornerHeight:a,viewportWidth:n,viewportHeight:i,showViewportLeftShadow:!1,showViewportRightShadow:!1,spreadsheet:this.spreadsheet};return s?s(l):new _n(l)}return this.centerFrame},r.prototype.updatePanelScrollGroup=function(){this.gridInfo=this.getGridInfo(),this.panelScrollGroup.update(this.gridInfo)},r.prototype.dynamicRenderCell=function(t){var e=this.getScrollOffset(),n=e.scrollX,i=e.scrollY,o=e.rowHeaderScrollX,a=i+this.getPaginationScrollY();this.spreadsheet.hideTooltip(),this.spreadsheet.interaction.clearHoverTimer(),this.realDataCellRender(n,a),this.updatePanelScrollGroup(),this.translateRelatedGroups(n,a,o),this.clip(n,a),t||this.emitScrollEvent({scrollX:n,scrollY:a,rowHeaderScrollX:o}),this.onAfterScroll()},r.prototype.emitScrollEvent=function(t){this.spreadsheet.emit(U.GLOBAL_SCROLL,t)},r.prototype.saveInitColumnLeafNodes=function(t){t===void 0&&(t=[]);var e=this.spreadsheet,n=e.store,i=e.options,o=i.interaction.hiddenColumnFields,a=o===void 0?[]:o,s=t.length+a.length,l=this.getInitColLeafNodes();s!==(l==null?void 0:l.length)&&n.set("initColLeafNodes",t)},r.prototype.getHiddenColumnsInfo=function(t){var e=this.spreadsheet.store.get("hiddenColumnsDetail",[]);if(!se(e))return e.find(function(n){var i;return(i=n==null?void 0:n.hideColumnNodes)===null||i===void 0?void 0:i.some(function(o){return o.id===t.id})})},r.prototype.updateCustomFieldsSampleNodes=function(t){if(!!this.spreadsheet.isCustomColumnFields()){var e=t.getNodes().filter(function(n){var i;return(i=t.sampleNodeForLastLevel)===null||i===void 0?void 0:i.id.includes(n.id)});t.sampleNodesForAllLevels=e,t.height=Zo(e,"height")}},r.prototype.adjustRowLeafNodesWidth=function(t){!this.spreadsheet.isCustomRowFields()||this.adjustLeafNodesSize("width")(t)},r.prototype.adjustColLeafNodesHeight=function(t){!this.spreadsheet.isCustomColumnFields()||this.adjustLeafNodesSize("height")(t)},r.prototype.adjustLeafNodesSize=function(t){return function(e){var n=e.leafNodes,i=e.hierarchy,o=i.sampleNodeForLastLevel,a=i.sampleNodesForAllLevels;n.forEach(function(s){if(!(s.level>(o==null?void 0:o.level))){var l=Zo(a,function(u){return u.level<s.level?0:u[t]});s[t]=l}})}},r.prototype.getHeaderNodes=function(t){var e=lo(this.getCornerNodes(),this.getSeriesNumberNodes(),this.getRowNodes(),this.getColNodes());return t?e.filter(function(n){return t.includes(n.id)}):e},r.prototype.getCornerNodes=function(){var t;return((t=this.cornerHeader)===null||t===void 0?void 0:t.getNodes())||[]},r.prototype.getSeriesNumberNodes=function(){var t;return((t=this.seriesNumberHeader)===null||t===void 0?void 0:t.getNodes())||[]},r.prototype.getColNodes=function(t){var e=this.layoutResult.colNodes,n=e===void 0?[]:e;return Lt(t)?n:n.filter(function(i){return i.level===t})},r.prototype.getTopLevelColNodes=function(){return this.getColNodes(0)},r.prototype.getColNodeById=function(t){return this.getColNodes().find(function(e){return e.id===t})},r.prototype.getColNodeByIndex=function(t){return this.getColNodes().find(function(e){return e.colIndex===t})},r.prototype.getColLeafNodeByIndex=function(t){return this.getColLeafNodes().find(function(e){return e.colIndex===t})},r.prototype.getColNodesByField=function(t){return this.getColNodes().filter(function(e){return e.field===t})},r.prototype.getColLeafNodes=function(){var t;return((t=this.layoutResult)===null||t===void 0?void 0:t.colLeafNodes)||[]},r.prototype.getColTotalsNodes=function(t){return this.getColNodes(t).filter(function(e){return e.isTotals})},r.prototype.getColSubTotalsNodes=function(t){return this.getColTotalsNodes(t).filter(function(e){return e.isSubTotals})},r.prototype.getColGrandTotalsNodes=function(t){return this.getColTotalsNodes(t).filter(function(e){return e.isGrandTotals})},r.prototype.getRowNodes=function(t){var e=this.layoutResult.rowNodes,n=e===void 0?[]:e;return Lt(t)?n:n.filter(function(i){return i.level===t})},r.prototype.getRowNodeById=function(t){return this.getRowNodes().find(function(e){return e.id===t})},r.prototype.getRowNodeByIndex=function(t){return this.getRowNodes().find(function(e){return e.rowIndex===t})},r.prototype.getRowLeafNodeByIndex=function(t){return this.getRowLeafNodes().find(function(e){return e.rowIndex===t})},r.prototype.getRowNodesByField=function(t){return this.getRowNodes().filter(function(e){return e.field===t})},r.prototype.getRowLeafNodes=function(){var t;return((t=this.layoutResult)===null||t===void 0?void 0:t.rowLeafNodes)||[]},r.prototype.getRowTotalsNodes=function(t){return this.getRowNodes(t).filter(function(e){return e.isTotals})},r.prototype.getRowSubTotalsNodes=function(t){return this.getRowTotalsNodes(t).filter(function(e){return e.isSubTotals})},r.prototype.getRowGrandTotalsNodes=function(t){return this.getRowTotalsNodes(t).filter(function(e){return e.isGrandTotals})},r.prototype.getDataCells=function(){var t;return zs((t=this.panelGroup)===null||t===void 0?void 0:t.children,Qo)},r.prototype.getRowCells=function(){var t,e=((t=this.getRowHeader())===null||t===void 0?void 0:t.children)||[];return zs(e,hd).filter(function(n){return n.cellType===ie.ROW_CELL})},r.prototype.getRowLeafCells=function(){return this.getRowCells().filter(function(t){return t.getMeta().isLeaf})},r.prototype.getColCells=function(){var t,e=((t=this.getColHeader())===null||t===void 0?void 0:t.children)||[];return zs(e,hl).filter(function(n){return n.cellType===ie.COL_CELL})},r.prototype.getColLeafCells=function(){return this.getColCells().filter(function(t){return t.getMeta().isLeaf})},r.prototype.getMergedCells=function(){return Vn(this.panelScrollGroup.getMergedCellsGroup().children,function(t){return t instanceof Dp})},r.prototype.getCornerCells=function(){return Vn(this.getCornerHeader().children,function(t){return t instanceof $_})},r.prototype.getHeaderCells=function(t){var e=lo(this.getCornerCells(),this.getSeriesNumberCells(),this.getRowCells(),this.getColCells());return t?e.filter(function(n){return t.includes(n.getMeta().id)}):e},r.prototype.getCellById=function(t){return this.getCells().find(function(e){return e.getMeta().id===t})},r.prototype.getCellsByField=function(t){return this.getCells().filter(function(e){return e.getMeta().field===t})},r.prototype.getCells=function(t){var e=lo(this.getHeaderCells(),this.getDataCells());return t?e.filter(function(n){return t.includes(n.getMeta().id)}):e},r.prototype.getInitColLeafNodes=function(){return this.spreadsheet.store.get("initColLeafNodes",[])},r.prototype.clearInitColLeafNodes=function(){this.spreadsheet.store.set("initColLeafNodes",void 0)},r}(),$W=function(r){oe(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t}(lE),vE=function(r){oe(t,r);function t(){var e,n=r!==null&&r.apply(this,arguments)||this;return n.frozenGroupInfo=(e={},e[ut.FROZEN_COL]={width:0,x:0,range:[]},e[ut.FROZEN_TRAILING_COL]={width:0,x:0,range:[]},e[ut.FROZEN_ROW]={height:0,y:0,range:[]},e[ut.FROZEN_TRAILING_ROW]={height:0,y:0,range:[]},e),n.panelScrollGroupIndexes=[0,0,0,0],n.addDataCell=function(i){var o=n.getFrozenOptions(),a=o.rowCount,s=a===void 0?0:a,l=o.colCount,u=l===void 0?0:l,d=o.trailingRowCount,h=d===void 0?0:d,v=o.trailingColCount,p=v===void 0?0:v,g=n.getColNodes().length,m=n.getCellRange(),C=n.getRealFrozenColumns(u,p),w=C.colCount,_=C.trailingColCount,S=Sz(i.getMeta(),{rowCount:s,trailingRowCount:h,colCount:w,trailingColCount:_},g,m),b=ym[S];if(b){var T=n[b];T.appendChild(i)}setTimeout(function(){n.spreadsheet.emit(U.DATA_CELL_RENDER,i),n.spreadsheet.emit(U.LAYOUT_CELL_RENDER,i)},100)},n.addFrozenCell=function(i,o,a){var s,l,u=n.getCellMeta(o,i);if(u){u.isFrozenCorner=!0;var d=(l=(s=n.spreadsheet.options).dataCell)===null||l===void 0?void 0:l.call(s,u);a.appendChild(d)}},n.translateFrozenGroups=function(){var i=n.getScrollOffset(),o=i.scrollY,a=i.scrollX,s=n.getPaginationScrollY(),l=n.panelBBox,u=l.x,d=l.y;Pn(n.frozenTopGroup,u,d-s),Pn(n.frozenBottomGroup,u,d),Pn(n.frozenRowGroup,u-a,d-s),Pn(n.frozenTrailingRowGroup,u-a,d),Pn(n.frozenColGroup,u,d-o-s),Pn(n.frozenTrailingColGroup,u,d-o-s)},n.renderFrozenGroupSplitLine=function(i,o){var a,s=n.panelBBox,l=s.width,u=s.height,d=s.viewportWidth,h=s.viewportHeight,v=s.x,p=s.y,g=n.getTopLevelColNodes(),m=n.getCellRange(),C=n.getFrozenOptions(),w=C.rowCount,_=w===void 0?0:w,S=C.colCount,b=S===void 0?0:S,T=C.trailingColCount,E=T===void 0?0:T,R=C.trailingRowCount,O=R===void 0?0:R,A=Math.floor(o-n.getPaginationScrollY()),P=Math.max(0,It(n.viewCellWidths)-d),D=Math.max(0,n.viewCellHeights.getCellOffsetY(m.end+1)-n.viewCellHeights.getCellOffsetY(m.start)-h);(a=n.foregroundGroup.getElementById(xf))===null||a===void 0||a.remove();var k=n.spreadsheet.theme.splitLine,z=n.foregroundGroup.appendChild(new ft({id:xf,style:{zIndex:nl}})),V={lineWidth:bf,stroke:k==null?void 0:k.verticalBorderColor,opacity:k==null?void 0:k.verticalBorderColorOpacity},Z={lineWidth:bf,stroke:k==null?void 0:k.horizontalBorderColor,opacity:k==null?void 0:k.horizontalBorderColorOpacity},Q=_n.getVerticalBorderWidth(n.spreadsheet);if(b>0){var Y=g.reduce(function(Ee,me,Ze){return Ze<b?Ee+me.width:Ee},0),te=(O>0?u:h)+p;Xt(z,N(N({},V),{x1:Y+v,x2:Y+v,y1:0,y2:te})),(k==null?void 0:k.showShadow)&&i>0&&z.appendChild(new wt({style:{x:Y+v,y:0,width:k==null?void 0:k.shadowWidth,height:te,fill:n.getShadowFill(0)}}))}if(_>0){var ae=p+n.getTotalHeightForRange(m.start,m.start+_-1),pe=E>0?l:d;Xt(z,N(N({},Z),{x1:0,x2:pe+Q,y1:ae,y2:ae})),(k==null?void 0:k.showShadow)&&A>0&&z.appendChild(new wt({style:{x:0,y:ae,width:pe+Q,height:k==null?void 0:k.shadowWidth,fill:n.getShadowFill(90)}}))}if(E>0){var Y=g[g.length-E].x,te=(O?u:h)+p;Xt(z,N(N({},V),{x1:Y+v,x2:Y+v,y1:0,y2:te})),(k==null?void 0:k.showShadow)&&Ke(i)<Ke(P)&&z.appendChild(new wt({style:{x:Y+v-k.shadowWidth,y:0,width:k.shadowWidth,height:te,fill:n.getShadowFill(180)}}))}if(O>0){var ae=n.panelBBox.maxY-n.getTotalHeightForRange(m.end-O+1,m.end),pe=E>0?l:d;Xt(z,N(N({},Z),{x1:0,x2:pe+Q,y1:ae,y2:ae})),(k==null?void 0:k.showShadow)&&A<Ke(D)&&z.appendChild(new wt({style:{x:0,y:ae-k.shadowWidth,width:pe+Q,height:k.shadowWidth,fill:n.getShadowFill(270)}}))}},n.renderFrozenPanelCornerGroup=function(){var i=n.getTopLevelColNodes(),o=n.getCellRange(),a=n.getFrozenOptions(),s=a.rowCount,l=s===void 0?0:s,u=a.colCount,d=u===void 0?0:u,h=a.trailingRowCount,v=h===void 0?0:h,p=a.trailingColCount,g=p===void 0?0:p,m=Of(i,d,g),C=m.colCount,w=m.trailingColCount,_=Tz({rowCount:l,colCount:C,trailingRowCount:v,trailingColCount:w},n.getColLeafNodes().length,o);Object.keys(_).forEach(function(S){var b=_[S],T=n[ym[S]];T&&b.forEach(function(E){n.addFrozenCell(E.x,E.y,T)})})},n.getRealFrozenColumns=function(i,o){if(i||o){var a=n.getTopLevelColNodes();return Of(a,i,o)}return{colCount:i,trailingColCount:o}},n.getTotalHeightForRange=function(i,o){if(i<0||o<0)return 0;if(n.rowOffsets)return n.rowOffsets[o+1]-n.rowOffsets[i];for(var a=0,s=i;s<o+1;s++){var l=n.getDefaultCellHeight();a+=l}return a},n.getShadowFill=function(i){var o,a,s=n.spreadsheet.theme.splitLine;return"l (".concat(i,") 0:").concat((o=s==null?void 0:s.shadowColors)===null||o===void 0?void 0:o.left," 1:").concat((a=s==null?void 0:s.shadowColors)===null||a===void 0?void 0:a.right)},n}return t.prototype.initPanelGroups=function(){var e,n=this;r.prototype.initPanelGroups.call(this),e=F([p6,g6,y6,m6,C6,w6].map(function(i){var o=new $W({name:i,zIndex:f6,s2:n.spreadsheet});return n.panelGroup.appendChild(o),o}),6),this.frozenRowGroup=e[0],this.frozenColGroup=e[1],this.frozenTrailingRowGroup=e[2],this.frozenTrailingColGroup=e[3],this.frozenTopGroup=e[4],this.frozenBottomGroup=e[5]},t.prototype.getFrozenOptions=function(){var e=this.getColLeafNodes().length,n=this.getCellRange();return ol(this.spreadsheet.options.frozen,e,n.end-n.start+1)},t.prototype.calculateFrozenGroupInfo=function(){var e=this.getFrozenOptions(),n=e.colCount,i=n===void 0?0:n,o=e.rowCount,a=o===void 0?0:o,s=e.trailingColCount,l=s===void 0?0:s,u=e.trailingRowCount,d=u===void 0?0:u,h=this.getTopLevelColNodes(),v=this.viewCellHeights,p=this.getCellRange(),g=this.frozenGroupInfo,m=g.frozenCol,C=g.frozenTrailingCol,w=g.frozenRow,_=g.frozenTrailingRow;i>0&&(m.width=h[i-1].x+h[i-1].width,m.x=0,m.range=[0,i-1]),a>0&&(w.height=v.getCellOffsetY(p.start+a)-v.getCellOffsetY(p.start),w.y=0,w.range=[p.start,p.start+a-1]),l>0&&(C.width=h[h.length-1].x-h[h.length-l].x+h[h.length-1].width,C.x=this.panelBBox.width-C.width,C.range=[h.length-l,h.length-1]),d>0&&(_.height=v.getCellOffsetY(p.end+1)-v.getCellOffsetY(p.end+1-d),_.y=this.panelBBox.height-_.height,_.range=[p.end-d+1,p.end])},t.prototype.getFinalViewport=function(){var e=this.panelBBox,n=e.viewportHeight,i=e.viewportWidth,o=this.getFrozenOptions(),a=o.colCount,s=a===void 0?0:a,l=o.rowCount,u=l===void 0?0:l,d=o.trailingColCount,h=d===void 0?0:d,v=o.trailingRowCount,p=v===void 0?0:v,g={width:i,height:n,x:0,y:0};if(s>0||h>0){var m=this.frozenGroupInfo,C=m.frozenTrailingCol,w=m.frozenCol;g.width-=C.width+w.width,g.x+=w.width}if(u>0||p>0){var _=this.frozenGroupInfo,S=_.frozenRow,b=_.frozenTrailingRow;g.height<S.height+b.height?(g.height=0,g.y=0):(g.height-=S.height+b.height,g.y+=S.height)}return g},t.prototype.calculateXYIndexes=function(e,n){var i,o,a=this.getColLeafNodes().length,s=this.getCellRange(),l=this.getFrozenOptions(),u=l.colCount,d=u===void 0?0:u,h=l.rowCount,v=h===void 0?0:h,p=l.trailingColCount,g=p===void 0?0:p,m=l.trailingRowCount,C=m===void 0?0:m,w=this.getFinalViewport(),_=this.spreadsheet.isTableMode()&&((o=(i=this.spreadsheet.dataSet)===null||i===void 0?void 0:i.isEmpty)===null||o===void 0?void 0:o.call(i))?this.spreadsheet.dataSet.getEmptyViewIndexes():b_({scrollX:e,scrollY:n,widths:this.viewCellWidths,heights:this.viewCellHeights,viewport:w,rowRemainWidth:this.getRealScrollX(this.cornerBBox.width)});this.panelScrollGroupIndexes=_;var S=this.getRealFrozenColumns(d,g),b=S.colCount,T=S.trailingColCount;return bz(_,{colCount:b,trailingColCount:T,rowCount:v,trailingRowCount:C},a,s)},t.prototype.updateFrozenGroupGrid=function(){var e=this;[ut.FROZEN_COL,ut.FROZEN_ROW,ut.FROZEN_TRAILING_COL,ut.FROZEN_TRAILING_ROW].forEach(function(n){if(!!e.frozenGroupInfo[n].range){var i=[],o=[];if(n.toLowerCase().includes("row")){var a=F(e.frozenGroupInfo[n].range||[],2),s=a[0],l=a[1];if(i=e.gridInfo.cols,o=vd(s,l,e.viewCellHeights),n===ut.FROZEN_TRAILING_ROW){var u=e.frozenGroupInfo[ut.FROZEN_TRAILING_ROW].y;o=FW(s,l,u,e.viewCellHeights)}}else{var d=F(e.frozenGroupInfo[n].range||[],2),h=d[0],v=d[1],p=e.getTopLevelColNodes();i=fE(h,v,p),o=e.gridInfo.rows}e["".concat(n,"Group")].updateGrid({cols:i,rows:o},"".concat(n,"Group"))}})},t.prototype.updatePanelScrollGroup=function(){r.prototype.updatePanelScrollGroup.call(this),this.updateFrozenGroupGrid()},t.prototype.translateRelatedGroups=function(e,n,i){r.prototype.translateRelatedGroups.call(this,e,n,i),this.translateFrozenGroups(),this.updateRowResizeArea(),this.renderFrozenGroupSplitLine(e,n)},t.prototype.updateRowResizeArea=function(){},t.prototype.render=function(){this.calculateFrozenGroupInfo(),this.renderFrozenPanelCornerGroup(),r.prototype.render.call(this)},t.prototype.getCenterFrameScrollX=function(e){return this.getFrozenOptions().colCount>0?0:r.prototype.getCenterFrameScrollX.call(this,e)},t.prototype.getDefaultCellHeight=function(){var e;return(e=this.getRowCellHeight(null))!==null&&e!==void 0?e:0},t.prototype.clip=function(){var e=this,n=e.frozenGroupInfo,i=e.spreadsheet,o=i.isFrozenRowHeader(),a=n[ut.FROZEN_COL].width,s=n[ut.FROZEN_TRAILING_COL].width,l=n[ut.FROZEN_ROW].height,u=n[ut.FROZEN_TRAILING_ROW].height,d=(o?this.panelBBox.x:0)+a,h=this.panelBBox.y+l,v=this.panelBBox.width-a-s+(o?0:this.panelBBox.x),p=this.panelBBox.height-l-u;this.panelScrollGroup.style.clipPath=new wt({style:{x:d,y:h,width:v,height:p}}),this.frozenColGroup.style.clipPath=new wt({style:{x:this.panelBBox.x,y:h,width:a,height:p}}),this.frozenTrailingColGroup.style.clipPath=new wt({style:{x:this.panelBBox.x+this.panelBBox.width-s,y:h,width:s,height:p}}),this.frozenRowGroup.style.clipPath=new wt({style:{x:d,y:this.panelBBox.y,width:v,height:l}}),this.frozenTrailingRowGroup.style.clipPath=new wt({style:{x:d,y:this.panelBBox.y+this.panelBBox.height-u,width:v,height:u}})},t}(XW),pE=function(r){var t,e=r.tree,n=e===void 0?[]:e,i=r.level,o=r.parentNode,a=r.hierarchy,s=r.spreadsheet,l=r.isRowHeader,u=(t=s.options.style)===null||t===void 0?void 0:t.rowCell,d=u.collapseFields,h=u.collapseAll,v=s.store.get("hiddenColumnsDetail")||[];n.forEach(function(p){var g,m,C=p.field,w=p.title,_=p.collapsed,S=p.children,b=_r(p,["field","title","collapsed","children"]),T=v.some(function(Z){var Q=Z.hideColumnNodes;return Q.find(function(Y){return Y.field===C})});if(!T){var E=(g={},g[Ae]=C,g),R=il(o.id,C),O=_!=null?_:!1,A=(m=d==null?void 0:d[R])!==null&&m!==void 0?m:d==null?void 0:d[C],P=A!=null?A:h||O,D=s.isHierarchyTreeType()&&l&&P,k=se(S),z=new Ft({id:R,field:C,value:w,level:i,parent:o,isTotals:!1,isCollapsed:D,hierarchy:a,query:E,spreadsheet:s,isLeaf:k,extra:N(N({},b),{isCustomNode:!0})});i>a.maxLevel&&!z.isSeriesNumberNode()&&(a.maxLevel=i,a.sampleNodesForAllLevels.push(z),a.sampleNodeForLastLevel=z,a.maxLevel=i);var V=Lp(s,o,z,a);!se(S)&&!D&&V&&pE({spreadsheet:s,parentNode:z,level:i+1,hierarchy:a,tree:S||[],isRowHeader:l})}})},qW=function(r,t,e){var n=r.getTotalsConfig(t);if(n!=null&&n.showGrandTotals){var i=n.reverseGrandTotalsLayout?"unshift":"push";e[i](new es({label:n.grandTotalsLabel,isGrandTotals:!0,isSubTotals:!1,isTotalRoot:!1}))}},gE=function(r){var t,e,n,i,o,a,s,l,u,d,h=r.spreadsheet,v=r.parentNode,p=r.currentField,g=r.level,m=r.hierarchy,C=r.pivotMeta,w=v.query,_=v.id,S=((a=(o=(i=h.dataCfg)===null||i===void 0?void 0:i.fields)===null||o===void 0?void 0:o.rows)===null||a===void 0?void 0:a.length)<=g,b=Rp(Array.from(C.keys())),T=r_(h,b,v,p),E=h.store.get("drillItemsNum");S&&E>0&&(T=T.slice(0,E)),g===0&&qW(h,p,T);try{for(var R=Qt(T),O=R.next();!O.done;O=R.next()){var A=O.value,P=A instanceof es,D=P?null:C.get(A),k=void 0,z=w,V=!1,Z=!1;if(P){var Q=A;V=Q.isGrandTotals,Z=Q.isSubTotals,k=kt(A.label),z=w}else k=A,z=N(N({},w),(n={},n[p]=k,n));var Y=il(_,k),te=(s=h.options.style)===null||s===void 0?void 0:s.rowCell,ae=te.collapseFields,pe=te.collapseAll,Ee=te.expandDepth,me=(l=ae==null?void 0:ae[Y])!==null&&l!==void 0?l:ae==null?void 0:ae[p],Ze=Br(Ee)?g>Ee:null,Ge=(u=me!=null?me:Ze)!==null&&u!==void 0?u:pe,Ye=new Ft({id:Y,value:k,level:g,parent:v,field:p,isTotals:P,isGrandTotals:V,isSubTotals:Z,isCollapsed:Ge,hierarchy:m,query:z,spreadsheet:h});g>m.maxLevel&&(m.maxLevel=g);var Fe=!(!((d=D==null?void 0:D.children)===null||d===void 0)&&d.size);(Fe||P)&&(Ye.isLeaf=!0),Fe||(Ye.isTotals=!0);var nr=Lp(h,v,Ye,m);!Fe&&!Ge&&!P&&nr&&gE({level:g+1,currentField:D.childField,pivotMeta:D.children,parentNode:Ye,hierarchy:m,spreadsheet:h})}}catch(At){t={error:At}}finally{try{O&&!O.done&&(e=R.return)&&e.call(R)}finally{if(t)throw t.error}}},Qp=function(r){var t=r.rootNode,e=r.hierarchy,n=r.fields,i=r.spreadsheet,o=r.isRowHeader,a=Vn(n,function(s){return s!==Ae});pE({spreadsheet:i,tree:a,level:0,parentNode:t,hierarchy:e,isRowHeader:o})},yE=function(r){var t=r.isValueInCols,e=r.moreThanOneValue,n=r.rootNode,i=r.hierarchy,o=r.fields,a=r.isRowHeader,s=r.isCustomTreeFields,l=r.spreadsheet,u,d;a?(u=!t&&e,d=!t&&!e):(u=t&&e,d=t&&!e),s?Qp(r):o_({spreadsheet:l,addTotalMeasureInTotal:u,addMeasureInTotalQuery:d,parentNode:n,currentField:o[0],fields:o,hierarchy:i})},KW=function(r){var t=r.spreadsheet,e=r.rootNode,n=r.hierarchy,i=r.isCustomTreeFields,o=t.dataSet.fields.rows;t.isHierarchyTreeType()&&!i?gE({level:0,currentField:o==null?void 0:o[0],pivotMeta:t.dataSet.rowPivotMeta,parentNode:e,hierarchy:n,spreadsheet:t}):Qp(r)},ZW=function(r){var t=r.spreadsheet;t.isHierarchyTreeType()?KW(r):yE(r)},QW=function(r){var t,e=r.isCustomTreeFields,n=r.spreadsheet,i=(t=n.options.seriesNumber)!==null&&t!==void 0?t:{},o=i.enable,a=i.text;if(e){var s={field:nn,title:nd(a)},l=o?X([s],F(r.fields),!1):r.fields.filter(function(u){return(u==null?void 0:u.field)!==nn});Qp(N(N({},r),{fields:l}));return}c7(r)},JW=function(r){var t=r.spreadsheet,e=t.isPivotMode();e?yE(r):QW(r)},bv=function(r){var t=r.isRowHeader,e=r.spreadsheet,n=e.dataSet.fields,i=n.rows,o=i===void 0?[]:i,a=n.columns,s=a===void 0?[]:a,l=e.isValueInCols(),u=e.dataSet.moreThanOneValue(),d=Ft.rootNode(),h=new t_,v=t?o:s,p=e.isCustomHeaderFields(t?"rows":"columns"),g={isValueInCols:l,moreThanOneValue:u,rootNode:d,hierarchy:h,spreadsheet:e,fields:v,isRowHeader:t,isCustomTreeFields:p};t?ZW(g):JW(g);var m=function(){return t&&e.isHierarchyTreeType()?h.getNodes():h.getLeaves()};return{hierarchy:h,leafNodes:m()}},jW=function(r){oe(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.renderFrozenGroupSplitLine=function(n,i){var o;if((o=e.foregroundGroup.getElementById(xf))===null||o===void 0||o.remove(),e.enableFrozenFirstRow()){var a=Ke(i-e.getPaginationScrollY()),s=e.foregroundGroup.appendChild(new ft({id:xf,style:{zIndex:nl}})),l=e.spreadsheet.theme.splitLine,u={lineWidth:bf,stroke:l==null?void 0:l.horizontalBorderColor,opacity:l==null?void 0:l.horizontalBorderColorOpacity},d=e.getCellRange(),h=e.panelBBox.y+e.getTotalHeightForRange(d.start,d.start),v=e.cornerBBox.width+_n.getVerticalBorderWidth(e.spreadsheet)+e.panelBBox.viewportWidth;Xt(s,N(N({},u),{x1:0,x2:v,y1:h,y2:h})),l.showShadow&&a>0&&s.appendChild(new wt({style:{x:0,y:h,width:v,height:l==null?void 0:l.shadowWidth,fill:e.getShadowFill(90)}}))}},e}return Object.defineProperty(t.prototype,"rowCellTheme",{get:function(){return this.spreadsheet.theme.rowCell.cell},enumerable:!1,configurable:!0}),t.prototype.doLayout=function(){var e=this.buildAllHeaderHierarchy(),n=e.rowLeafNodes,i=e.colLeafNodes,o=e.rowsHierarchy,a=e.colsHierarchy;return this.calculateHeaderNodesCoordinate({rowLeafNodes:n,rowsHierarchy:o,colLeafNodes:i,colsHierarchy:a}),{colNodes:a.getNodes(),colsHierarchy:a,rowNodes:o.getNodes(),rowsHierarchy:o,rowLeafNodes:n,colLeafNodes:i}},t.prototype.buildAllHeaderHierarchy=function(){var e=bv({isRowHeader:!0,spreadsheet:this.spreadsheet}),n=e.leafNodes,i=e.hierarchy,o=bv({isRowHeader:!1,spreadsheet:this.spreadsheet}),a=o.leafNodes,s=o.hierarchy;return{rowLeafNodes:n,colLeafNodes:a,rowsHierarchy:i,colsHierarchy:s}},t.prototype.getCellMeta=function(e,n){var i,o,a,s,l,u,d;e===void 0&&(e=0),n===void 0&&(n=0);var h=this.spreadsheet,v=h.options,p=h.dataSet,g=this.getLayoutResult(),m=g.rowLeafNodes,C=g.colLeafNodes,w=m[e],_=C[n];if(!w||!_)return null;var S=w.query,b=_.query,T=w.isTotals||w.isTotalMeasure||_.isTotals||_.isTotalMeasure,E=Nz(w,_),R=(s=(a=(o=v.style)===null||o===void 0?void 0:o.colCell)===null||a===void 0?void 0:a.hideValue)!==null&&s!==void 0?s:!1,O=R?(i={},i[Ae]=(l=p.fields.values)===null||l===void 0?void 0:l[0],i):{},A=bl({},S,b,O),P=p.getCellData({query:A,rowNode:w,isTotals:T,totalStatus:E}),D=A[Ae],k=ze(P,Bi,null),z={spreadsheet:this.spreadsheet,x:_.x,y:w.y,width:_.width,height:w.height,data:P,rowIndex:e,colIndex:n,isTotals:T,valueField:D,fieldValue:k,rowQuery:S,colQuery:b,rowId:w.id,colId:_.id,id:Ml(w.id,_.id)};return(d=(u=v.layoutCellMeta)===null||u===void 0?void 0:u.call(v,z))!==null&&d!==void 0?d:z},t.prototype.getPreLevelSampleNode=function(e,n){return n.getNodes(e.level-1).find(function(i){return!i.isTotals})},t.prototype.calculateHeaderNodesCoordinate=function(e){this.calculateRowNodesCoordinate(e),this.calculateColNodesCoordinate(e)},t.prototype.calculateColNodesCoordinate=function(e){var n=this,i,o=e.rowLeafNodes,a=e.colLeafNodes,s=e.rowsHierarchy,l=e.colsHierarchy;this.updateColsHierarchySampleMaxHeightNodes(l);var u=Ft.blankNode(),d=0,h=l.getNodes();h.forEach(function(v){var p;if(v.isLeaf&&(v.colIndex=d,d+=1,v.x=u.x+u.width,v.width=n.calculateColLeafNodesWidth(v,a,o,s.width),l.width+=v.width,u=v),v.level===0)v.y=0;else{var g=n.getPreLevelSampleNode(v,l);v.y=(p=(g==null?void 0:g.y)+(g==null?void 0:g.height))!==null&&p!==void 0?p:0}var m=n.getColNodeHeight(v,l);v.height=v.isGrandTotals&&!v.isTotalMeasure&&v.isLeaf?l.height:m,lv(n.spreadsheet,null,v)}),this.updateCustomFieldsSampleNodes(l),this.adjustColLeafNodesHeight({leafNodes:a,hierarchy:l}),this.autoCalculateColNodeWidthAndX(a),se((i=this.spreadsheet.options.totals)===null||i===void 0?void 0:i.col)||(this.adjustTotalNodesCoordinate({hierarchy:l,isRowHeader:!1,isSubTotal:!0}),this.adjustTotalNodesCoordinate({hierarchy:l,isRowHeader:!1,isSubTotal:!1}))},t.prototype.getMultipleMap=function(e,n,i){for(var o=e.maxLevel,a=this.spreadsheet.dataSet,s=this.spreadsheet.options.totals,l=a.moreThanOneValue(),u=a.fields,d=u.rows,h=u.columns,v=n?d:h,p=n?s.row:s.col,g=i?(p==null?void 0:p.subTotalsGroupDimensions)||[]:(p==null?void 0:p.grandTotalsGroupDimensions)||[],m=a.isEmpty()?[]:g,C=Array.from({length:o+1},function(){return 1}),w=o;w>0;w--){var _=v[w],S=_===Ae&&l;m.includes(_)||S||(C[w-1]+=C[w],C[w]=0)}return C},t.prototype.adjustTotalNodesCoordinate=function(e){var n=e.hierarchy,i=e.isRowHeader,o=e.isSubTotal,a=this.getMultipleMap(n,i,o),s=Vn(n.getNodes(),function(u){return o?u.isSubTotals:u.isGrandTotals}),l=i?"width":"height";Me(s,function(u){var d,h=a[u.level];if(!h&&o)for(var v=1;h<1;)h=a[u.level-v]-v,v++;for(var p=0,g=function(C){p+=ze((d=n.sampleNodesForAllLevels)===null||d===void 0?void 0:d.find(function(w){return w.level===u.level+C}),[l],0)},m=0;m<h;m++)g(m);u[l]=p})},t.prototype.autoCalculateColNodeWidthAndX=function(e){for(var n,i,o=null,a=0,s=e.slice(0);a<s.length;){var l=s[a++],u=l==null?void 0:l.parent;if(o!==u&&u){s.push(u);var d=(n=u.children)===null||n===void 0?void 0:n.find(function(p){return p.width}),h=(i=d==null?void 0:d.x)!==null&&i!==void 0?i:0,v=Zo(u.children,"width");u.x=h,u.width=v,o=u}}},t.prototype.calculateColLeafNodesWidth=function(e,n,i,o){var a=this.spreadsheet.options.style.colCell,s=this.getColCellDraggedWidth(e);if(Br(s))return s;var l=this.getCellCustomSize(e,a==null?void 0:a.width);return Br(l)?l:this.spreadsheet.getLayoutWidthType()===co.Compact?this.getCompactGridColNodeWidth(e,i):this.spreadsheet.isHierarchyTreeType()?this.getAdaptTreeColWidth(e,n,i):this.getAdaptGridColWidth(n,o)},t.prototype.getRowNodeHeight=function(e){if(!e)return 0;var n=this.getRowCellHeight(e);if(this.isCustomRowCellHeight(e))return n||0;var i=new hd(e,this.spreadsheet,{shallowRender:!0});return this.getCellAdaptiveHeight(i,n)},t.prototype.getExpectedCellIconWidth=function(e,n,i){var o,a,s,l=0;if(n)l=1;else{var u=De(this.spreadsheet.options.headerActionIcons,function(h){return N(N({},h),{displayCondition:function(){return!0}})}),d=Op(u,null,e);l=(o=d==null?void 0:d.icons.length)!==null&&o!==void 0?o:0}return l?l*(i.size+((a=i.margin)===null||a===void 0?void 0:a.left))+((s=i.margin)===null||s===void 0?void 0:s.right):0},t.prototype.calculateRowNodesCoordinate=function(e){var n=this,i,o,a,s,l,u=e.rowsHierarchy,d=e.rowLeafNodes,h=e.colLeafNodes,v=this.spreadsheet.isHierarchyTreeType(),p=u.sampleNodesForAllLevels||[];v?u.width=this.getTreeRowHeaderWidth():p.forEach(function(A){var P;A.width=n.calculateGridRowNodesWidth(A,h),u.width+=A.width;var D=(P=p[A.level-1])!==null&&P!==void 0?P:{x:0,width:0};A.x=(D==null?void 0:D.x)+(D==null?void 0:D.width)});for(var g=Ft.blankNode(),m=u.getNodes(),C=0;C<m.length;C++){var w=m[C],_=v||!v&&w.isLeaf;if(_){var S=((i=g==null?void 0:g.rowIndex)!==null&&i!==void 0?i:-1)+1,b=Ft.getBranchNodes(w).map(function(A){return n.getRowNodeHeight(A)}),T=this.getRowNodeHeight(w),E=this.isCustomRowCellHeight(w)?T:(o=Ko(b))!==null&&o!==void 0?o:T;(a=w.rowIndex)!==null&&a!==void 0||(w.rowIndex=S),(s=w.colIndex)!==null&&s!==void 0||(w.colIndex=C),w.y=g.y+g.height,w.height=E,g=w,u.height+=w.height}if(v||w.level===0)w.x=0;else{var R=p[w.level-1];w.x=(R==null?void 0:R.x)+(R==null?void 0:R.width)}if(v)w.width=this.getTreeRowHeaderWidth();else{var O=p[w.level];w.width=O==null?void 0:O.width}lv(this.spreadsheet,w,null)}v||(this.adjustRowLeafNodesWidth({leafNodes:d,hierarchy:u}),this.autoCalculateRowNodeHeightAndY(d),se((l=this.spreadsheet.options.totals)===null||l===void 0?void 0:l.row)||(this.adjustTotalNodesCoordinate({hierarchy:u,isRowHeader:!0,isSubTotal:!1}),this.adjustTotalNodesCoordinate({hierarchy:u,isRowHeader:!0,isSubTotal:!0})))},t.prototype.autoCalculateRowNodeHeightAndY=function(e){for(var n=null,i=0,o=e.slice(0);i<o.length;){var a=o[i++],s=a==null?void 0:a.parent;n!==s&&s&&(o.push(s),s.y=s.children[0].y,s.height=Zo(s.children,"height"),n=s)}},t.prototype.calculateGridRowNodesWidth=function(e,n){var i=this.spreadsheet.options.style.rowCell,o=this.getRowCellDraggedWidth(e);if(Br(o))return o;var a=this.getCellCustomSize(e,i==null?void 0:i.width);return Br(a)?a:this.spreadsheet.getLayoutWidthType()!==co.Adaptive?this.getCompactGridRowNodeWidth(e):this.getAdaptGridColWidth(n)},t.prototype.getAdaptTreeColWidth=function(e,n,i){var o=this.getCanvasSize().width,a=o-this.getSeriesNumberWidth()-_n.getVerticalBorderWidth(this.spreadsheet),s=Math.min(a/2,this.getTreeRowHeaderWidth()),l=Math.max(1,n.length),u=this.spreadsheet.options.style.dataCell;return Math.max(lc(u,this.getColLabelLength(e,i)),Ke((a-s)/l))},t.prototype.getColLabelLength=function(e,n){var i=v7(e==null?void 0:e.value);if(Ue(i))return i.length;for(var o=1,a=0;a<sc;a++){var s=n[a];if(!s)return o;for(var l=this.spreadsheet.dataSet.getCellData({query:N(N({},e.query),s.query),rowNode:s,isTotals:e.isTotals||e.isTotalMeasure||s.isTotals||s.isTotalMeasure}),u=Hr(l),d=0;d<u.length;d++){var h=ze(l,u[d]),v=Aa(ze(h==null?void 0:h.values,"0"));v>o&&(o=v)}}return o},t.prototype.getAdaptGridColWidth=function(e,n){var i=this.spreadsheet.dataSet.fields.rows,o=i===void 0?[]:i,a=this.spreadsheet.options.style.dataCell,s=o.length,l=e.length,u=this.getCanvasSize().width,d=u-this.getSeriesNumberWidth()-_n.getVerticalBorderWidth(this.spreadsheet),h=Math.max(1,s+l);return n?Math.max(lc(a),Ke((d-n)/l)):Math.max(lc(a),Ke(d/h))},t.prototype.getTreeRowHeaderWidth=function(){var e=this,n,i,o,a,s=this.spreadsheet.options.style.rowCell,l=this.spreadsheet.dataSet.fields.rows,u=l===void 0?[]:l,d=this.getCellCustomSize(null,s==null?void 0:s.width);if(Br(d))return d;var h=u.map(function(w){return e.spreadsheet.dataSet.getFieldName(w)}).join("/"),v=this.spreadsheet.theme.cornerCell,p=v.bolderText,g=v.icon,m=this.spreadsheet.measureTextWidth(h,p)+g.size*2+((n=g.margin)===null||n===void 0?void 0:n.left)+((i=g.margin)===null||i===void 0?void 0:i.right)+((o=this.rowCellTheme.padding)===null||o===void 0?void 0:o.left)+((a=this.rowCellTheme.padding)===null||a===void 0?void 0:a.right)+1,C=Math.max(d!=null?d:wm,m);return Number.isNaN(C)?wm:C},t.prototype.getCompactGridRowNodeWidth=function(e){var n=this,i,o=this.spreadsheet.theme.rowCell,a=o.bolderText,s=o.icon,l=o.cell,u=this.spreadsheet.theme.cornerCell,d=u.bolderText,h=u.icon,v=u.cell,p=e.field,g=e.isLeaf,m=this.getExpectedCellIconWidth(ie.ROW_CELL,!this.spreadsheet.isValueInCols()&&g&&this.spreadsheet.options.showDefaultHeaderActionIcon,s),C=(i=this.spreadsheet.dataSet.getDimensionValues(p))===null||i===void 0?void 0:i.slice(0,sc).map(function(E){var R,O;return(O=(R=n.spreadsheet.dataSet.getFieldFormatter(p))===null||R===void 0?void 0:R(E))!==null&&O!==void 0?O:E}),w=Cp(C,function(E){return"".concat(E).length}),_=this.spreadsheet.measureTextWidth(w,a)+m+l.padding.left+l.padding.right+l.verticalBorderWidth,S=this.spreadsheet.dataSet.getFieldName(p),b=this.getExpectedCellIconWidth(ie.CORNER_CELL,!1,h),T=this.spreadsheet.measureTextWidth(S,d)+b+v.padding.left+v.padding.right;return si.getInstance().logger("Max Label In Row:",p,_>T?w:S),Math.max(_,T)},t.prototype.getCompactGridColNodeWidth=function(e,n){for(var i,o,a,s=this.spreadsheet.theme.colCell,l=s.bolderText,u=s.cell,d=s.icon,h=this.spreadsheet.theme.dataCell.text,v=this.spreadsheet.dataSet.getFieldFormatter(e.field),p=(i=v==null?void 0:v(e.value))!==null&&i!==void 0?i:e.value,g=this.getExpectedCellIconWidth(ie.COL_CELL,this.spreadsheet.isValueInCols()&&this.spreadsheet.options.showDefaultHeaderActionIcon,d),m=this.spreadsheet.measureTextWidth(p,l)+g,C="",w=0,_=0;_<sc;_++){var S=n[_];if(S){var b=this.spreadsheet.dataSet.getCellData({query:N(N({},e.query),S.query),rowNode:S,isTotals:e.isTotals||e.isTotalMeasure||S.isTotals||S.isTotalMeasure});if(b){var T=b==null?void 0:b[Bi],E=(a=(o=this.spreadsheet.dataSet.getFieldFormatter(b[Ae]))===null||o===void 0?void 0:o(T))!==null&&a!==void 0?a:T,R="".concat(E),O=this.spreadsheet.measureTextWidth(R,h);O>w&&(C=R,w=O)}}}var A=m>w,P=A?p:C,D=A?g:0;si.getInstance().logger("Max Label In Col:",e.field,P,w);var k=this.spreadsheet.measureTextWidth(P,N(N({},l),{fontSize:Math.max(h.fontSize,l.fontSize)}));return k+u.padding.left+u.padding.right+u.verticalBorderWidth*2+D},t.prototype.getViewCellHeights=function(){var e=this.getRowLeafNodes(),n=Dx(e,function(i,o){var a=It(i)||0;return i.push(a+o.height),i},[0]);return{getTotalHeight:function(){return It(n)||0},getCellOffsetY:function(i){return n[i]||0},getTotalLength:function(){return n.length-1},getIndexRange:function(i,o){return uE(n,i,o)}}},t.prototype.getSeriesNumberCells=function(){var e;return Vn((e=this.getSeriesNumberHeader())===null||e===void 0?void 0:e.children,function(n){return n instanceof Up})},t.prototype.updateFrozenGroupGrid=function(){var e=this;[ut.FROZEN_ROW].forEach(function(n){if(!!e.frozenGroupInfo[n].range){var i=[],o=[];if(n.toLowerCase().includes("row")){var a=F(e.frozenGroupInfo[n].range||[],2),s=a[0],l=a[1];i=e.gridInfo.cols,o=vd(s,l,e.viewCellHeights)}e["".concat(n,"Group")].updateGrid({cols:i,rows:o},"".concat(n,"Group"))}})},t.prototype.getFrozenOptions=function(){return R_(this.spreadsheet.options,this.layoutResult.rowNodes)},t.prototype.enableFrozenFirstRow=function(){return!!this.getFrozenOptions().rowCount},t}(vE),eU=function(r,t,e,n){var i,o,a=n==null?void 0:n.size,s=n==null?void 0:n.margin,l=0;return r.options.showDefaultHeaderActionIcon?l=1:l=(o=(i=Op(r.options.headerActionIcons,t,e))===null||i===void 0?void 0:i.icons.length)!==null&&o!==void 0?o:0,l*(a+s.left)+(l>0?s.right:0)},tU=function(r,t,e){var n,i,o,a,s=((i=(n=e.icon)===null||n===void 0?void 0:n.margin)===null||i===void 0?void 0:i.left)||0,l=((a=(o=e.icon)===null||o===void 0?void 0:o.margin)===null||a===void 0?void 0:a.right)||0,u=r.store.get("hiddenColumnsDetail",[]),d=!1,h=!1;u.forEach(function(p){var g,m,C,w;((m=(g=p==null?void 0:p.displaySiblingNode)===null||g===void 0?void 0:g.prev)===null||m===void 0?void 0:m.field)===t&&(d=!0),((w=(C=p==null?void 0:p.displaySiblingNode)===null||C===void 0?void 0:C.next)===null||w===void 0?void 0:w.field)===t&&(h=!0)});var v=ze(e,"icon.size");return{left:h?v+l:0,right:d?v+s:0}},rU=function(r,t,e){var n,i,o=ze(e,"cell.padding"),a=(i=(n=e==null?void 0:e.cell)===null||n===void 0?void 0:n.horizontalBorderWidth)!==null&&i!==void 0?i:1,s=tU(r,t.field,e),l=eU(r,t,ie.COL_CELL,e==null?void 0:e.icon);return o.left+o.right+l+s.left+s.right+a},nU=function(r){oe(t,r);function t(e){var n=r.call(this,e)||this;return n.getScrollGroupClipBBox=function(){var i=n.getHeaderConfig(),o=i.width,a=i.height,s=i.spreadsheet,l=i.position,u=s.facet.frozenGroupInfo,d=u[ut.FROZEN_COL].width,h=u[ut.FROZEN_TRAILING_COL].width,v=o-d-h;return{x:l.x+d,y:l.y,width:v,height:a}},n.initFrozenColGroups(),n}return t.prototype.getCellInstance=function(e){var n=this.getHeaderConfig(),i=n.spreadsheet,o=i.options,a=o.seriesNumberCell,s=o.colCell,l=[e,i,n];return e.field===nn?(a==null?void 0:a.apply(void 0,X([],F(l),!1)))||new(Xm.bind.apply(Xm,X([void 0],F(l),!1))):(s==null?void 0:s.apply(void 0,X([],F(l),!1)))||new(Ff.bind.apply(Ff,X([void 0],F(l),!1)))},t.prototype.initFrozenColGroups=function(){var e=this.getHeaderConfig(),n=e.spreadsheet.options.frozen,i=n.colCount,o=n.trailingColCount,a=e.spreadsheet.facet.getColNodes(0),s=Of(a,i,o),l=s.colCount,u=s.trailingColCount;this.finalColCount=l,this.finalTrailingColCount=u,this.topLevelColNodeLength=a.length,l&&(this.frozenColGroup=this.appendChild(new ft({name:_6,style:{zIndex:nl}}))),u&&(this.frozenTrailingColGroup=this.appendChild(new ft({name:E6,style:{zIndex:nl}})))},t.prototype.clear=function(){var e,n,i;r.prototype.clear.call(this),(e=this.frozenTrailingColGroup)===null||e===void 0||e.removeChildren(),(n=this.frozenColGroup)===null||n===void 0||n.removeChildren();var o=this.getHeaderConfig().spreadsheet,a=(i=o.facet)===null||i===void 0?void 0:i.foregroundGroup.getElementById(Wx);a==null||a.removeChildren()},t.prototype.getColFrozenOptionsByNode=function(e){var n=L_(e);return{colLength:this.topLevelColNodeLength,leftLeafNodeColIndex:n.colIndex,colCount:this.finalColCount,trailingColCount:this.finalTrailingColCount}},t.prototype.getCellGroup=function(e){var n=this.getColFrozenOptionsByNode(e),i=n.colLength,o=n.leftLeafNodeColIndex,a=n.colCount,s=n.trailingColCount;return sl(o,a)?this.frozenColGroup:ll(o,s,i)?this.frozenTrailingColGroup:this.scrollGroup},t.prototype.isColCellInRect=function(e){var n=this.getColFrozenOptionsByNode(e),i=n.leftLeafNodeColIndex,o=n.colLength,a=n.colCount,s=n.trailingColCount;return sl(i,a)||ll(i,s,o)?!0:r.prototype.isColCellInRect.call(this,e)},t.prototype.offset=function(){r.prototype.offset.call(this);var e=this.getHeaderConfig().position;Mf(this.frozenColGroup,e.x),Mf(this.frozenTrailingColGroup,e.x)},t.prototype.clip=function(){this.scrollGroup.style.clipPath=new wt({style:this.getScrollGroupClipBBox()})},t}(M_),iU=function(r){oe(t,r);function t(e){var n=r.call(this,e)||this;return n.onSortHandler=function(i){var o=n.spreadsheet,a=i;Array.isArray(i)||(a=[i]);var s=o.dataCfg.sortParams||[];a=a.map(function(u){var d,h,v=N(N({},u),{sortFieldId:(d=u.sortKey)!==null&&d!==void 0?d:u.sortFieldId}),p=(h=s.find(function(g){return g.sortFieldId===v.sortFieldId}))!==null&&h!==void 0?h:{};return N(N({},p),v)});var l=s.filter(function(u){var d=a.find(function(h){return h.sortFieldId===u.sortFieldId});return!d});Zc(o.dataCfg,"sortParams",X(X([],F(l),!1),F(a),!1)),o.setDataCfg(o.dataCfg),o.render(!0),o.emit(U.RANGE_SORTED,o.dataSet.getDisplayDataSet())},n.onFilterHandler=function(i){return jt(n,void 0,void 0,function(){var o,a,s,l;return er(this,function(u){switch(u.label){case 0:return o=this.spreadsheet,a=!i.filteredValues||i.filteredValues.length===0,s=o.dataCfg.filterParams||[],l=s.findIndex(function(d){return d.filterKey===i.filterKey}),l!==-1?a?s.splice(l,1):s[l]=i:s.push(i),Zc(o.dataCfg,"filterParams",s),[4,o.render(!0)];case 1:return u.sent(),o.emit(U.RANGE_FILTERED,o.dataSet.getDisplayDataSet()),[2]}})})},n.spreadsheet.on(U.RANGE_SORT,n.onSortHandler),n.spreadsheet.on(U.RANGE_FILTER,n.onFilterHandler),n}return t.prototype.init=function(){r.prototype.init.call(this),this.initRowOffsets()},t.prototype.getDataCellAdaptiveHeight=function(e){var n={id:String(e==null?void 0:e.rowIndex)},i=this.getRowCellHeight(n);if(this.isCustomRowCellHeight(n))return i||0;var o=new kf(e,this.spreadsheet,{shallowRender:!0}),a=this.getCellHeightByRowIndex(e==null?void 0:e.rowIndex);return this.getCellAdaptiveHeight(o,a)},t.prototype.getCellHeightByRowIndex=function(e){var n;return this.rowOffsets?(n=this.getRowCellHeight({id:String(e)}))!==null&&n!==void 0?n:0:this.getDefaultCellHeight()},t.prototype.presetRowCellHeightIfNeeded=function(e){var n,i=this,o,a=this.spreadsheet.options.style,s=this.getColLeafNodes();if(!(se(s)||((o=a==null?void 0:a.dataCell)===null||o===void 0?void 0:o.maxLines)<=1)){var l=Ko(s.map(function(u){var d=i.getCellMeta(e,u.colIndex);return i.getDataCellAdaptiveHeight(d)}));this.spreadsheet.setOptions({style:{rowCell:{heightByField:(n={},n[e]=l||this.getDefaultCellHeight(),n)}}})}},t.prototype.initRowOffsets=function(){var e=this,n,i,o=this.spreadsheet.options.style,a=(n=o==null?void 0:o.rowCell)===null||n===void 0?void 0:n.heightByField;if(Hr(a).length||((i=o==null?void 0:o.dataCell)===null||i===void 0?void 0:i.maxLines)>1){var s=this.spreadsheet.dataSet.getDisplayDataSet();this.rowOffsets=[0];var l=0;s.forEach(function(u,d){e.presetRowCellHeightIfNeeded(d);var h=e.getCellHeightByRowIndex(d),v=l+h;e.rowOffsets.push(v),l=v})}},t.prototype.destroy=function(){r.prototype.destroy.call(this),this.spreadsheet.off(U.RANGE_SORT,this.onSortHandler),this.spreadsheet.off(U.RANGE_FILTER,this.onFilterHandler)},t.prototype.calculateCornerBBox=function(){var e=this.getLayoutResult().colsHierarchy,n=Ke(e.height);this.cornerBBox=new hE(this),this.cornerBBox.height=n,this.cornerBBox.maxY=n},t.prototype.doLayout=function(){var e=new t_,n=this.buildColHeaderHierarchy(),i=n.colLeafNodes,o=n.colsHierarchy;return this.calculateColNodesCoordinate(i,o),{colNodes:o.getNodes(),colLeafNodes:i,colsHierarchy:o,rowNodes:[],rowsHierarchy:e,rowLeafNodes:[],cornerNodes:[]}},t.prototype.buildColHeaderHierarchy=function(){var e=bv({isRowHeader:!1,spreadsheet:this.spreadsheet});return{colLeafNodes:e.leafNodes,colsHierarchy:e.hierarchy}},t.prototype.getCellMeta=function(e,n){var i,o,a,s;e===void 0&&(e=0),n===void 0&&(n=0);var l=this.spreadsheet,u=l.options,d=l.dataSet,h=this.getColLeafNodes(),v=h[n];if(!v)return null;var p=this.getCellHeightByRowIndex(e),g=this.getCellRange(),m=ol(this.spreadsheet.options.frozen,h.length,g.end-g.start+1).trailingRowCount,C=m===void 0?0:m,w,_=v.x,S=this.viewCellHeights.getCellOffsetY(e);Ol(e,g.end,C)&&(S=this.panelBBox.height-this.getTotalHeightForRange(e,g.end)),((o=u.seriesNumber)===null||o===void 0?void 0:o.enable)&&v.field===nn?w=e+1:w=d.getCellData({query:{field:v.field,rowIndex:e}});var b={spreadsheet:this.spreadsheet,x:_,y:S,width:v.width,height:p,data:(i={},i[v.field]=w,i),rowIndex:e,colIndex:n,isTotals:!1,colId:v.id,rowId:String(e),valueField:v.field,fieldValue:w,id:Ml(String(e),v.id)};return(s=(a=u.layoutCellMeta)===null||a===void 0?void 0:a.call(u,b))!==null&&s!==void 0?s:b},t.prototype.getAdaptiveColWidth=function(e){var n,i=this.spreadsheet.options.style.dataCell,o=this.spreadsheet.options.seriesNumber;if(this.spreadsheet.getLayoutWidthType()!==co.Compact){var a=this.getSeriesNumberWidth(),s=e.length-(o!=null&&o.enable?1:0),l=this.getCanvasSize().width-a-_n.getVerticalBorderWidth(this.spreadsheet);return Math.max(i==null?void 0:i.width,Ke(l/Math.max(1,s)))}return(n=i==null?void 0:i.width)!==null&&n!==void 0?n:0},t.prototype.getContentHeight=function(){var e=this.getViewCellHeights().getTotalHeight,n=this.layoutResult.colsHierarchy;return e()+n.height},t.prototype.calculateColNodesCoordinate=function(e,n){var i,o,a;this.updateColsHierarchySampleMaxHeightNodes(n);for(var s=Ft.blankNode(),l=0,u=n.getNodes(),d=this.getAdaptiveColWidth(e),h=0;h<u.length;h++){var v=u[h];v.isLeaf&&(v.colIndex=l,l+=1,v.x=s.x+s.width,v.width=this.calculateColLeafNodesWidth(v,d),lv(this.spreadsheet,null,v),n.width+=v.width,s=v),v.level===0?v.y=0:v.y=(a=((i=v==null?void 0:v.parent)===null||i===void 0?void 0:i.y)+((o=v==null?void 0:v.parent)===null||o===void 0?void 0:o.height))!==null&&a!==void 0?a:0,v.height=this.getColNodeHeight(v,n)}var p=n.getNodes(0),g=ol(this.spreadsheet.options.frozen,p.length).trailingColCount,m=g===void 0?0:g;s=Ft.blankNode();var C=this.getCanvasSize().width-_n.getVerticalBorderWidth(this.spreadsheet);if(m>0)for(var w=Of(p,0,m).trailingColCount,_=u.filter(function(S){return S.isLeaf}),h=1;h<=w;h++){var v=_[_.length-h];h===1?v.x=C-v.width:v.x=s.x-v.width,s=v}this.updateCustomFieldsSampleNodes(n),this.adjustColLeafNodesHeight({leafNodes:e,hierarchy:n}),this.autoCalculateColNodeWidthAndX(e)},t.prototype.autoCalculateColNodeWidthAndX=function(e){for(var n=null,i=e.slice(0);i.length;){var o=i.shift(),a=o==null?void 0:o.parent;n!==a&&a&&(i.push(a),a.x=a.children[0].x,a.width=a.children.map(function(s){return s.width}).reduce(function(s,l){return s+l},0),n=a)}},t.prototype.calculateColLeafNodesWidth=function(e,n){var i=this.spreadsheet,o=i.dataSet,a=i.options.style.colCell,s=i.getLayoutWidthType(),l=this.getColCellDraggedWidth(e);if(Br(l))return l;var u=this.getCellCustomSize(e,a==null?void 0:a.width);if(Br(u))return u;var d;if(s===co.Compact){var h=o.getDisplayDataSet(),v=o.getFieldFormatter(e.field),p=Cp(h==null?void 0:h.slice(0,50).map(function(T){var E;return"".concat((E=v==null?void 0:v(T[e.field]))!==null&&E!==void 0?E:T[e.field])}),function(T){return i.measureTextWidthRoughly(T)});si.getInstance().logger("Max Label In Col:",e.field,p);var g=i.theme.colCell.bolderText,m=i.theme.dataCell,C=m.text,w=m.cell,_=1,S=i.measureTextWidth(p,C)+w.padding.left+w.padding.right+_,b=i.measureTextWidth(e.value,g)+rU(this.spreadsheet,e,i.theme.colCell);d=Math.max(b,S)}else d=n;return e.field===nn&&(d=this.getSeriesNumberWidth()),d},t.prototype.getViewCellHeights=function(){var e=this,n=this.getDefaultCellHeight();return{getTotalHeight:function(){return e.rowOffsets?It(e.rowOffsets)||0:n*e.spreadsheet.dataSet.getDisplayDataSet().length},getCellOffsetY:function(i){return i<=0?0:e.rowOffsets?e.rowOffsets[i]:i*n},getTotalLength:function(){return e.spreadsheet.dataSet.getDisplayDataSet().length},getIndexRange:function(i,o){if(e.rowOffsets)return uE(e.rowOffsets,i,o);var a=Ke(i/n,0),s=o%n===0?o/n-1:Ke(o/n,0);return{start:Math.max(0,a),end:Math.max(0,s)}}}},t.prototype.updateRowResizeArea=function(){var e=this.spreadsheet.options.interaction.resize,n=Ii(e)?e:e==null?void 0:e.rowCellVertical;if(!!n){var i=this.foregroundGroup.getElementById(Qa),o=this.foregroundGroup.getElementById(Jc);i&&i.removeChildren(),o&&o.removeChildren();var a=zs(this.panelGroup.children,kf);a.forEach(function(s){s.drawResizeArea()})}},t.prototype.getRowHeader=function(){return null},t.prototype.getColHeader=function(){if(!this.columnHeader){var e=this.panelBBox,n=e.x,i=e.width,o=e.viewportHeight,a=e.viewportWidth;return new nU({width:i,height:this.cornerBBox.height,viewportWidth:a,viewportHeight:o,cornerWidth:this.cornerBBox.width,position:{x:n,y:0},nodes:this.getColNodes(),sortParam:this.spreadsheet.store.get("sortParam"),spreadsheet:this.spreadsheet})}return this.columnHeader},t.prototype.getSeriesNumberHeader=function(){return null},t.prototype.getSeriesNumberCells=function(){return this.getDataCells().filter(function(e){return e.getMeta().valueField===nn})},t}(vE);function oU(r,t){var e=t.r;r.arc(e,e,e,0,Math.PI*2,!1)}function aU(r,t){var e=t.rx,n=t.ry,i=e,o=n;if(r.ellipse)r.ellipse(i,o,i,o,0,0,Math.PI*2,!1);else{var a=i>o?i:o,s=i>o?1:i/o,l=i>o?o/i:1;r.save(),r.scale(s,l),r.arc(a,a,a,0,Math.PI*2)}}function sU(r,t){var e=t.x1,n=t.y1,i=t.x2,o=t.y2,a=t.defX,s=a===void 0?0:a,l=t.defY,u=l===void 0?0:l,d=t.markerStart,h=t.markerEnd,v=t.markerStartOffset,p=t.markerEndOffset,g=0,m=0,C=0,w=0,_=0,S,b;d&&Ve(d)&&v&&(S=i-e,b=o-n,_=Math.atan2(b,S),g=Math.cos(_)*(v||0),m=Math.sin(_)*(v||0)),h&&Ve(h)&&p&&(S=e-i,b=n-o,_=Math.atan2(b,S),C=Math.cos(_)*(p||0),w=Math.sin(_)*(p||0)),r.moveTo(e-s+g,n-u+m),r.lineTo(i-s+C,o-u+w)}function lU(r,t){var e=t.defX,n=e===void 0?0:e,i=t.defY,o=i===void 0?0:i,a=t.markerStart,s=t.markerEnd,l=t.markerStartOffset,u=t.markerEndOffset,d=t.path,h=d.absolutePath,v=d.segments,p=0,g=0,m=0,C=0,w=0,_,S;if(a&&Ve(a)&&l){var b=F(a.parentNode.getStartTangent(),2),T=b[0],E=b[1];_=T[0]-E[0],S=T[1]-E[1],w=Math.atan2(S,_),p=Math.cos(w)*(l||0),g=Math.sin(w)*(l||0)}if(s&&Ve(s)&&u){var R=F(s.parentNode.getEndTangent(),2),T=R[0],E=R[1];_=T[0]-E[0],S=T[1]-E[1],w=Math.atan2(S,_),m=Math.cos(w)*(u||0),C=Math.sin(w)*(u||0)}for(var O=0;O<h.length;O++){var A=h[O],P=A[0],D=h[O+1],k=O===0&&(p!==0||g!==0),z=(O===h.length-1||D&&(D[0]==="M"||D[0]==="Z"))&&m!==0&&C!==0;switch(P){case"M":k?(r.moveTo(A[1]-n+p,A[2]-o+g),r.lineTo(A[1]-n,A[2]-o)):r.moveTo(A[1]-n,A[2]-o);break;case"L":z?r.lineTo(A[1]-n+m,A[2]-o+C):r.lineTo(A[1]-n,A[2]-o);break;case"Q":r.quadraticCurveTo(A[1]-n,A[2]-o,A[3]-n,A[4]-o),z&&r.lineTo(A[3]-n+m,A[4]-o+C);break;case"C":r.bezierCurveTo(A[1]-n,A[2]-o,A[3]-n,A[4]-o,A[5]-n,A[6]-o),z&&r.lineTo(A[5]-n+m,A[6]-o+C);break;case"A":{var V=v[O].arcParams,Z=V.cx,Q=V.cy,Y=V.rx,te=V.ry,ae=V.startAngle,pe=V.endAngle,Ee=V.xRotation,me=V.sweepFlag;if(r.ellipse)r.ellipse(Z-n,Q-o,Y,te,Ee,ae,pe,!!(1-me));else{var Ze=Y>te?Y:te,Ge=Y>te?1:Y/te,Ye=Y>te?te/Y:1;r.translate(Z-n,Q-o),r.rotate(Ee),r.scale(Ge,Ye),r.arc(0,0,Ze,ae,pe,!!(1-me)),r.scale(1/Ge,1/Ye),r.rotate(-Ee),r.translate(-(Z-n),-(Q-o))}z&&r.lineTo(A[6]-n+m,A[7]-o+C);break}case"Z":r.closePath();break}}}function uU(r,t){var e=t.defX,n=e===void 0?0:e,i=t.defY,o=i===void 0?0:i,a=t.markerStart,s=t.markerEnd,l=t.markerStartOffset,u=t.markerEndOffset,d=t.points.points,h=d.length,v=d[0][0]-n,p=d[0][1]-o,g=d[h-1][0]-n,m=d[h-1][1]-o,C=0,w=0,_=0,S=0,b=0,T,E;a&&Ve(a)&&l&&(T=d[1][0]-d[0][0],E=d[1][1]-d[0][1],b=Math.atan2(E,T),C=Math.cos(b)*(l||0),w=Math.sin(b)*(l||0)),s&&Ve(s)&&u&&(T=d[h-1][0]-d[0][0],E=d[h-1][1]-d[0][1],b=Math.atan2(E,T),_=Math.cos(b)*(u||0),S=Math.sin(b)*(u||0)),r.moveTo(v+(C||_),p+(w||S));for(var R=1;R<h-1;R++){var O=d[R];r.lineTo(O[0]-n,O[1]-o)}r.lineTo(g,m)}function fU(r,t){var e=t.defX,n=e===void 0?0:e,i=t.defY,o=i===void 0?0:i,a=t.markerStart,s=t.markerEnd,l=t.markerStartOffset,u=t.markerEndOffset,d=t.points.points,h=d.length,v=d[0][0]-n,p=d[0][1]-o,g=d[h-1][0]-n,m=d[h-1][1]-o,C=0,w=0,_=0,S=0,b=0,T,E;a&&Ve(a)&&l&&(T=d[1][0]-d[0][0],E=d[1][1]-d[0][1],b=Math.atan2(E,T),C=Math.cos(b)*(l||0),w=Math.sin(b)*(l||0)),s&&Ve(s)&&u&&(T=d[h-2][0]-d[h-1][0],E=d[h-2][1]-d[h-1][1],b=Math.atan2(E,T),_=Math.cos(b)*(u||0),S=Math.sin(b)*(u||0)),r.moveTo(v+C,p+w);for(var R=1;R<h-1;R++){var O=d[R];r.lineTo(O[0]-n,O[1]-o)}r.lineTo(g+_,m+S)}function dU(r,t){var e=t.radius,n=t.width,i=t.height,o=n,a=i,s=e&&e.some(function(C){return C!==0});if(!s)r.rect(0,0,o,a);else{var l=n>0?1:-1,u=i>0?1:-1,d=l+u===0,h=F(e.map(function(C){return tn(C,0,Math.min(Math.abs(o)/2,Math.abs(a)/2))}),4),v=h[0],p=h[1],g=h[2],m=h[3];r.moveTo(l*v,0),r.lineTo(o-l*p,0),p!==0&&r.arc(o-l*p,u*p,p,-u*Math.PI/2,l>0?0:Math.PI,d),r.lineTo(o,a-u*g),g!==0&&r.arc(o-l*g,a-u*g,g,l>0?0:Math.PI,u>0?Math.PI/2:1.5*Math.PI,d),r.lineTo(l*m,a),m!==0&&r.arc(l*m,a-u*m,m,u>0?Math.PI/2:-Math.PI/2,l>0?Math.PI:0,d),r.lineTo(0,u*v),v!==0&&r.arc(l*v,u*v,v,l>0?Math.PI:0,u>0?Math.PI*1.5:Math.PI/2,d)}}var hU=function(r){oe(t,r);function t(){var e=r.apply(this,X([],F(arguments),!1))||this;return e.name="canvas-path-generator",e}return t.prototype.init=function(){var e,n=(e={},e[$.CIRCLE]=oU,e[$.ELLIPSE]=aU,e[$.RECT]=dU,e[$.LINE]=sU,e[$.POLYLINE]=fU,e[$.POLYGON]=uU,e[$.PATH]=lU,e[$.TEXT]=void 0,e[$.GROUP]=void 0,e[$.IMAGE]=void 0,e[$.HTML]=void 0,e[$.MESH]=void 0,e);this.context.pathGeneratorFactory=n},t.prototype.destroy=function(){delete this.context.pathGeneratorFactory},t}(jo),cU=Ne(),vU=Ne(),pU=Ne(),gU=it(),yU=function(){function r(){var t=this;this.isHit=function(e,n,i,o){var a=t.context.pointInPathPickerFactory[e.nodeName];if(a){var s=ii(gU,i),l=wn(vU,Nn(pU,n[0],n[1],0),s),u=e.getGeometryBounds().halfExtents,d=e.parsedStyle.anchor;if(l[0]+=(d&&d[0]||0)*u[0]*2,l[1]+=(d&&d[1]||0)*u[1]*2,a(e,new Yt(l[0],l[1]),o,t.isPointInPath,t.context,t.runtime))return!0}return!1},this.isPointInPath=function(e,n){var i=t.runtime.offscreenCanvasCreator.getOrCreateContext(t.context.config.offscreenCanvas),o=t.context.pathGeneratorFactory[e.nodeName];return o&&(i.beginPath(),o(i,e.parsedStyle),i.closePath()),i.isPointInPath(n.x,n.y)}}return r.prototype.apply=function(t,e){var n=this,i,o=t.renderingService,a=t.renderingContext;this.context=t,this.runtime=e;var s=(i=a.root)===null||i===void 0?void 0:i.ownerDocument;o.hooks.pick.tapPromise(r.tag,function(l){return jt(n,void 0,void 0,function(){return er(this,function(u){return[2,this.pick(s,l)]})})}),o.hooks.pickSync.tap(r.tag,function(l){return n.pick(s,l)})},r.prototype.pick=function(t,e){var n,i,o=e.topmost,a=e.position,s=a.x,l=a.y,u=Nn(cU,s,l,0),d=t.elementsFromBBox(u[0],u[1],u[0],u[1]),h=[];try{for(var v=Qt(d),p=v.next();!p.done;p=v.next()){var g=p.value,m=g.getWorldTransform(),C=this.isHit(g,u,m,!1);if(C){var w=JC(g);if(w){var _=w.parsedStyle.clipPath,S=this.isHit(_,u,_.getWorldTransform(),!0);if(S){if(o)return e.picked=[g],e;h.push(g)}}else{if(o)return e.picked=[g],e;h.push(g)}}}}catch(b){n={error:b}}finally{try{p&&!p.done&&(i=v.return)&&i.call(v)}finally{if(n)throw n.error}}return e.picked=h,e},r.tag="CanvasPicker",r}();function mU(r,t,e){var n=r.parsedStyle,i=n.r,o=n.fill,a=n.stroke,s=n.lineWidth,l=n.increasedLineWidthForHitTesting,u=n.pointerEvents,d=((s||0)+(l||0))/2,h=Ni(i,i,t.x,t.y),v=F(ea(u,o,a),2),p=v[0],g=v[1];return p&&g||e?h<=i+d:p?h<=i:g?h>=i-d&&h<=i+d:!1}function Xu(r,t,e,n){return r/(e*e)+t/(n*n)}function CU(r,t,e){var n=r.parsedStyle,i=n.rx,o=n.ry,a=n.fill,s=n.stroke,l=n.lineWidth,u=n.increasedLineWidthForHitTesting,d=n.pointerEvents,h=t.x,v=t.y,p=F(ea(d,a,s),2),g=p[0],m=p[1],C=((l||0)+(u||0))/2,w=(h-i)*(h-i),_=(v-o)*(v-o);return g&&m||e?Xu(w,_,i+C,o+C)<=1:g?Xu(w,_,i,o)<=1:m?Xu(w,_,i-C,o-C)>=1&&Xu(w,_,i+C,o+C)<=1:!1}function Fo(r,t,e,n,i,o){return i>=r&&i<=r+e&&o>=t&&o<=t+n}function wU(r,t,e,n,i,o,a){var s=i/2;return Fo(r-s,t-s,e,i,o,a)||Fo(r+e-s,t-s,i,n,o,a)||Fo(r+s,t+n-s,e,i,o,a)||Fo(r-s,t+s,i,n,o,a)}function $u(r,t,e,n,i,o,a,s){var l=(Math.atan2(s-t,a-r)+Math.PI*2)%(Math.PI*2),u={x:r+e*Math.cos(l),y:t+e*Math.sin(l)};return Ni(u.x,u.y,a,s)<=o/2}function io(r,t,e,n,i,o,a){var s=Math.min(r,e),l=Math.max(r,e),u=Math.min(t,n),d=Math.max(t,n),h=i/2;return o>=s-h&&o<=l+h&&a>=u-h&&a<=d+h?VI(r,t,e,n,o,a)<=i/2:!1}function mE(r,t,e,n,i){var o=r.length;if(o<2)return!1;for(var a=0;a<o-1;a++){var s=r[a][0],l=r[a][1],u=r[a+1][0],d=r[a+1][1];if(io(s,l,u,d,t,e,n))return!0}if(i){var h=r[0],v=r[o-1];if(io(h[0],h[1],v[0],v[1],t,e,n))return!0}return!1}var xU=1e-6;function cc(r){return Math.abs(r)<xU?0:r<0?-1:1}function _U(r,t,e){return(e[0]-r[0])*(t[1]-r[1])===(t[0]-r[0])*(e[1]-r[1])&&Math.min(r[0],t[0])<=e[0]&&e[0]<=Math.max(r[0],t[0])&&Math.min(r[1],t[1])<=e[1]&&e[1]<=Math.max(r[1],t[1])}function CE(r,t,e){var n=!1,i=r.length;if(i<=2)return!1;for(var o=0;o<i;o++){var a=r[o],s=r[(o+1)%i];if(_U(a,s,[t,e]))return!0;cc(a[1]-e)>0!=cc(s[1]-e)>0&&cc(t-(e-a[1])*(a[0]-s[0])/(a[1]-s[1])-a[0])<0&&(n=!n)}return n}function tC(r,t,e){for(var n=!1,i=0;i<r.length;i++){var o=r[i];if(n=CE(o,t,e),n)break}return n}function EU(r,t,e){var n=r.parsedStyle,i=n.x1,o=n.y1,a=n.x2,s=n.y2,l=n.lineWidth,u=n.increasedLineWidthForHitTesting,d=n.defX,h=d===void 0?0:d,v=n.defY,p=v===void 0?0:v,g=n.pointerEvents,m=n.fill,C=n.stroke,w=F(ea(g,m,C),2),_=w[1];return!_&&!e||!l?!1:io(i,o,a,s,(l||0)+(u||0),t.x+h,t.y+p)}function SU(r,t,e,n,i){for(var o=!1,a=t/2,s=0;s<r.length;s++){var l=r[s],u=l.currentPoint,d=l.params,h=l.prePoint,v=l.box;if(!(v&&!Fo(v.x-a,v.y-a,v.width+t,v.height+t,e,n)))switch(l.command){case"L":case"Z":if(o=io(h[0],h[1],u[0],u[1],t,e,n),o)return!0;break;case"Q":var p=QI(h[0],h[1],d[1],d[2],d[3],d[4],e,n);if(o=p<=t/2,o)return!0;break;case"C":var g=qy(h[0],h[1],d[1],d[2],d[3],d[4],d[5],d[6],e,n,i);if(o=g<=t/2,o)return!0;break;case"A":l.cubicParams||(l.cubicParams=Iv(h[0],h[1],d[1],d[2],d[3],d[4],d[5],d[6],d[7],void 0));for(var m=l.cubicParams,C=h,w=0;w<m.length;w+=6){var _=qy(C[0],C[1],m[w],m[w+1],m[w+2],m[w+3],m[w+4],m[w+5],e,n,i);if(C=[m[w+4],m[w+5]],o=_<=t/2,o)return!0}break}}return o}function TU(r,t,e,n,i,o){var a=r.parsedStyle,s=a.lineWidth,l=a.increasedLineWidthForHitTesting,u=a.stroke,d=a.fill,h=a.defX,v=h===void 0?0:h,p=a.defY,g=p===void 0?0:p,m=a.path,C=a.pointerEvents,w=m.segments,_=m.hasArc,S=m.polylines,b=m.polygons,T=F(ea(C,(b==null?void 0:b.length)&&d,u),2),E=T[0],R=T[1],O=Ic(r),A=!1;return E||e?(_?A=n(r,t):A=tC(b,t.x+v,t.y+g)||tC(S,t.x+v,t.y+g),A):((R||e)&&(A=SU(w,(s||0)+(l||0),t.x+v,t.y+g,O)),A)}function bU(r,t,e){var n=r.parsedStyle,i=n.stroke,o=n.fill,a=n.lineWidth,s=n.increasedLineWidthForHitTesting,l=n.points,u=n.defX,d=u===void 0?0:u,h=n.defY,v=h===void 0?0:h,p=n.pointerEvents,g=F(ea(p,o,i),2),m=g[0],C=g[1],w=!1;return(C||e)&&(w=mE(l.points,(a||0)+(s||0),t.x+d,t.y+v,!0)),!w&&(m||e)&&(w=CE(l.points,t.x+d,t.y+v)),w}function LU(r,t,e){var n=r.parsedStyle,i=n.lineWidth,o=n.increasedLineWidthForHitTesting,a=n.points,s=n.defX,l=s===void 0?0:s,u=n.defY,d=u===void 0?0:u,h=n.pointerEvents,v=n.fill,p=n.stroke,g=F(ea(h,v,p),2),m=g[1];return!m&&!e||!i?!1:mE(a.points,(i||0)+(o||0),t.x+l,t.y+d,!1)}function RU(r,t,e,n,i){var o=r.parsedStyle,a=o.radius,s=o.fill,l=o.stroke,u=o.lineWidth,d=o.increasedLineWidthForHitTesting,h=o.width,v=o.height,p=o.pointerEvents,g=F(ea(p,s,l),2),m=g[0],C=g[1],w=a&&a.some(function(T){return T!==0}),_=(u||0)+(d||0);if(w){var b=!1;return(C||e)&&(b=MU(0,0,h,v,a.map(function(T){return tn(T,0,Math.min(Math.abs(h)/2,Math.abs(v)/2))}),_,t.x,t.y)),!b&&(m||e)&&(b=n(r,t)),b}else{var S=_/2;if(m&&C||e)return Fo(0-S,0-S,h+S,v+S,t.x,t.y);if(m)return Fo(0,0,h,v,t.x,t.y);if(C)return wU(0,0,h,v,_,t.x,t.y)}return!1}function MU(r,t,e,n,i,o,a,s){var l=F(i,4),u=l[0],d=l[1],h=l[2],v=l[3];return io(r+u,t,r+e-d,t,o,a,s)||io(r+e,t+d,r+e,t+n-h,o,a,s)||io(r+e-h,t+n,r+v,t+n,o,a,s)||io(r,t+n-v,r,t+u,o,a,s)||$u(r+e-d,t+d,d,1.5*Math.PI,2*Math.PI,o,a,s)||$u(r+e-h,t+n-h,h,0,.5*Math.PI,o,a,s)||$u(r+v,t+n-v,v,.5*Math.PI,Math.PI,o,a,s)||$u(r+u,t+u,u,Math.PI,1.5*Math.PI,o,a,s)}function OU(r,t,e,n,i,o){var a=r.parsedStyle,s=a.pointerEvents,l=a.width,u=a.height;if(s==="non-transparent-pixel"){var d=i.config.offscreenCanvas,h=o.offscreenCanvasCreator.getOrCreateCanvas(d),v=o.offscreenCanvasCreator.getOrCreateContext(d,{willReadFrequently:!0});h.width=l,h.height=u,i.defaultStyleRendererFactory[$.IMAGE].render(v,r.parsedStyle,r,void 0,void 0,void 0);var p=v.getImageData(t.x,t.y,1,1).data;return p.every(function(g){return g!==0})}return!0}var IU=function(r){oe(t,r);function t(){var e=r.apply(this,X([],F(arguments),!1))||this;return e.name="canvas-picker",e}return t.prototype.init=function(){var e,n=function(){return!0},i=(e={},e[$.CIRCLE]=mU,e[$.ELLIPSE]=CU,e[$.RECT]=RU,e[$.LINE]=EU,e[$.POLYLINE]=LU,e[$.POLYGON]=bU,e[$.PATH]=TU,e[$.TEXT]=n,e[$.GROUP]=null,e[$.IMAGE]=OU,e[$.HTML]=null,e[$.MESH]=null,e);this.context.pointInPathPickerFactory=i,this.addRenderingPlugin(new yU)},t.prototype.destroy=function(){delete this.context.pointInPathPickerFactory,this.removeAllRenderingPlugins()},t}(jo),AU=function(){function r(t){this.canvasRendererPluginOptions=t,this.removedRBushNodeAABBs=[],this.renderQueue=[],this.restoreStack=[],this.clearFullScreen=!1,this.vpMatrix=it(),this.dprMatrix=it(),this.tmpMat4=it(),this.vec3a=Ne(),this.vec3b=Ne(),this.vec3c=Ne(),this.vec3d=Ne()}return r.prototype.apply=function(t,e){var n=this;this.context=t;var i=t.config,o=t.camera,a=t.renderingService,s=t.renderingContext,l=t.rBushRoot,u=t.pathGeneratorFactory;this.rBush=l,this.pathGeneratorFactory=u;var d=t.contextService,h=s.root.ownerDocument.defaultView,v=function(m){var C=m.target,w=C.rBushNode;w.aabb&&n.removedRBushNodeAABBs.push(w.aabb)},p=function(m){var C=m.target,w=C.rBushNode;w.aabb&&n.removedRBushNodeAABBs.push(w.aabb)};a.hooks.init.tap(r.tag,function(){h.addEventListener(He.UNMOUNTED,v),h.addEventListener(He.CULLED,p);var m=d.getDPR(),C=i.width,w=i.height,_=d.getContext();n.clearRect(_,0,0,C*m,w*m,i.background)}),a.hooks.destroy.tap(r.tag,function(){h.removeEventListener(He.UNMOUNTED,v),h.removeEventListener(He.CULLED,p),n.renderQueue=[],n.removedRBushNodeAABBs=[],n.restoreStack=[]}),a.hooks.beginFrame.tap(r.tag,function(){var m=d.getContext(),C=d.getDPR(),w=i.width,_=i.height,S=n.canvasRendererPluginOptions,b=S.dirtyObjectNumThreshold,T=S.dirtyObjectRatioThreshold,E=a.getStats(),R=E.total,O=E.rendered,A=O/R;n.clearFullScreen=a.disableDirtyRectangleRendering()||O>b&&A>T,m&&(m.resetTransform?m.resetTransform():m.setTransform(1,0,0,1,0,0),n.clearFullScreen&&n.clearRect(m,0,0,w*C,_*C,i.background))});var g=function(m,C){m.isVisible()&&!m.isCulled()&&(n.renderDisplayObject(m,C,n.context,n.restoreStack,e),n.saveDirtyAABB(m));var w=m.sortable.sorted||m.childNodes;w.forEach(function(_){g(_,C)})};a.hooks.endFrame.tap(r.tag,function(){var m=d.getContext(),C=d.getDPR();if(cC(n.dprMatrix,[C,C,1]),lr(n.vpMatrix,n.dprMatrix,o.getOrthoMatrix()),n.clearFullScreen)g(s.root,m);else{var w=n.safeMergeAABB.apply(n,X([n.mergeDirtyAABBs(n.renderQueue)],F(n.removedRBushNodeAABBs.map(function(Ee){var me=Ee.minX,Ze=Ee.minY,Ge=Ee.maxX,Ye=Ee.maxY,Fe=new Mt;return Fe.setMinMax([me,Ze,0],[Ge,Ye,0]),Fe})),!1));if(n.removedRBushNodeAABBs=[],Mt.isEmpty(w)){n.renderQueue=[];return}var _=n.convertAABB2Rect(w),S=_.x,b=_.y,T=_.width,E=_.height,R=wn(n.vec3a,[S,b,0],n.vpMatrix),O=wn(n.vec3b,[S+T,b,0],n.vpMatrix),A=wn(n.vec3c,[S,b+E,0],n.vpMatrix),P=wn(n.vec3d,[S+T,b+E,0],n.vpMatrix),D=Math.min(R[0],O[0],P[0],A[0]),k=Math.min(R[1],O[1],P[1],A[1]),z=Math.max(R[0],O[0],P[0],A[0]),V=Math.max(R[1],O[1],P[1],A[1]),Z=Math.floor(D),Q=Math.floor(k),Y=Math.ceil(z-D),te=Math.ceil(V-k);m.save(),n.clearRect(m,Z,Q,Y,te,i.background),m.beginPath(),m.rect(Z,Q,Y,te),m.clip(),m.setTransform(n.vpMatrix[0],n.vpMatrix[1],n.vpMatrix[4],n.vpMatrix[5],n.vpMatrix[12],n.vpMatrix[13]);var ae=i.renderer.getConfig().enableDirtyRectangleRenderingDebug;ae&&h.dispatchEvent(new Ut(Pr.DIRTY_RECTANGLE,{dirtyRect:{x:Z,y:Q,width:Y,height:te}}));var pe=n.searchDirtyObjects(w);pe.sort(function(Ee,me){return Ee.sortable.renderOrder-me.sortable.renderOrder}).forEach(function(Ee){Ee&&Ee.isVisible()&&!Ee.isCulled()&&n.renderDisplayObject(Ee,m,n.context,n.restoreStack,e)}),m.restore(),n.renderQueue.forEach(function(Ee){n.saveDirtyAABB(Ee)}),n.renderQueue=[]}n.restoreStack.forEach(function(){m.restore()}),n.restoreStack=[]}),a.hooks.render.tap(r.tag,function(m){n.clearFullScreen||n.renderQueue.push(m)})},r.prototype.clearRect=function(t,e,n,i,o,a){t.clearRect(e,n,i,o),a&&(t.fillStyle=a,t.fillRect(e,n,i,o))},r.prototype.renderDisplayObject=function(t,e,n,i,o){var a=t.nodeName,s=i[i.length-1];s&&!(t.compareDocumentPosition(s)&zt.DOCUMENT_POSITION_CONTAINS)&&(e.restore(),i.pop());var l=this.context.styleRendererFactory[a],u=this.pathGeneratorFactory[a],d=t.parsedStyle.clipPath;if(d){this.applyWorldTransform(e,d);var h=this.pathGeneratorFactory[d.nodeName];h&&(e.save(),i.push(t),e.beginPath(),h(e,d.parsedStyle),e.closePath(),e.clip())}l&&(this.applyWorldTransform(e,t),e.save(),this.applyAttributesToContext(e,t)),u&&(e.beginPath(),u(e,t.parsedStyle),t.nodeName!==$.LINE&&t.nodeName!==$.PATH&&t.nodeName!==$.POLYLINE&&e.closePath()),l&&(l.render(e,t.parsedStyle,t,n,this,o),e.restore()),t.renderable.dirty=!1},r.prototype.convertAABB2Rect=function(t){var e=t.getMin(),n=t.getMax(),i=Math.floor(e[0]),o=Math.floor(e[1]),a=Math.ceil(n[0]),s=Math.ceil(n[1]),l=a-i,u=s-o;return{x:i,y:o,width:l,height:u}},r.prototype.mergeDirtyAABBs=function(t){var e=new Mt;return t.forEach(function(n){var i=n.getRenderBounds();e.add(i);var o=n.renderable.dirtyRenderBounds;o&&e.add(o)}),e},r.prototype.searchDirtyObjects=function(t){var e=F(t.getMin(),2),n=e[0],i=e[1],o=F(t.getMax(),2),a=o[0],s=o[1],l=this.rBush.search({minX:n,minY:i,maxX:a,maxY:s});return l.map(function(u){var d=u.displayObject;return d})},r.prototype.saveDirtyAABB=function(t){var e=t.renderable;e.dirtyRenderBounds||(e.dirtyRenderBounds=new Mt);var n=t.getRenderBounds();n&&e.dirtyRenderBounds.update(n.center,n.halfExtents)},r.prototype.applyAttributesToContext=function(t,e){var n=e.parsedStyle,i=n.stroke,o=n.fill,a=n.opacity,s=n.lineDash,l=n.lineDashOffset;s&&t.setLineDash(s),de(l)||(t.lineDashOffset=l),de(a)||(t.globalAlpha*=a),!de(i)&&!Array.isArray(i)&&!i.isNone&&(t.strokeStyle=e.attributes.stroke),!de(o)&&!Array.isArray(o)&&!o.isNone&&(t.fillStyle=e.attributes.fill)},r.prototype.applyWorldTransform=function(t,e,n){var i=0,o=0,a=(e.parsedStyle||{}).anchor,s=a&&a[0]||0,l=a&&a[1]||0;if(s!==0||l!==0){var u=e.geometry.contentBounds,d=u&&u.halfExtents[0]*2||0,h=u&&u.halfExtents[1]*2||0;i=-(s*d),o=-(l*h)}n?(Go(this.tmpMat4,e.getLocalTransform()),this.vec3a[0]=i,this.vec3a[1]=o,this.vec3a[2]=0,oo(this.tmpMat4,this.tmpMat4,this.vec3a),lr(this.tmpMat4,n,this.tmpMat4),lr(this.tmpMat4,this.vpMatrix,this.tmpMat4)):(Go(this.tmpMat4,e.getWorldTransform()),this.vec3a[0]=i,this.vec3a[1]=o,this.vec3a[2]=0,oo(this.tmpMat4,this.tmpMat4,this.vec3a),lr(this.tmpMat4,this.vpMatrix,this.tmpMat4)),t.setTransform(this.tmpMat4[0],this.tmpMat4[1],this.tmpMat4[4],this.tmpMat4[5],this.tmpMat4[12],this.tmpMat4[13])},r.prototype.safeMergeAABB=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=new Mt;return t.forEach(function(i){n.add(i)}),n},r.tag="CanvasRenderer",r}(),Co=function(){function r(t){this.imagePool=t}return r.prototype.render=function(t,e,n,i,o,a){var s=e.fill,l=e.fillRule,u=e.opacity,d=e.fillOpacity,h=e.stroke,v=e.strokeOpacity,p=e.lineWidth,g=e.lineCap,m=e.lineJoin,C=e.shadowType,w=e.shadowColor,_=e.shadowBlur,S=e.filter,b=e.miterLimit,T=!de(s)&&!s.isNone,E=!de(h)&&!h.isNone&&p>0,R=s.alpha===0,O=!!(S&&S.length),A=!de(w)&&_>0,P=n.nodeName,D=C==="inner",k=E&&A&&(P===$.PATH||P===$.LINE||P===$.POLYLINE||R||D);T&&(t.globalAlpha=u*d,k||Wf(n,t,A),this.fill(t,n,s,l,i,o,a),k||this.clearShadowAndFilter(t,O,A)),E&&(t.globalAlpha=u*v,t.lineWidth=p,de(b)||(t.miterLimit=b),de(g)||(t.lineCap=g),de(m)||(t.lineJoin=m),k&&(D&&(t.globalCompositeOperation="source-atop"),Wf(n,t,!0),D&&(this.stroke(t,n,h,i,o,a),t.globalCompositeOperation="source-over",this.clearShadowAndFilter(t,O,!0))),this.stroke(t,n,h,i,o,a))},r.prototype.clearShadowAndFilter=function(t,e,n){if(n&&(t.shadowColor="transparent",t.shadowBlur=0),e){var i=t.filter;!de(i)&&i.indexOf("drop-shadow")>-1&&(t.filter=i.replace(/drop-shadow\([^)]*\)/,"").trim()||"none")}},r.prototype.fill=function(t,e,n,i,o,a,s){var l=this;Array.isArray(n)?n.forEach(function(u){t.fillStyle=l.getColor(u,e,t),i?t.fill(i):t.fill()}):(Qs(n)&&(t.fillStyle=this.getPattern(n,e,t,o,a,s)),i?t.fill(i):t.fill())},r.prototype.stroke=function(t,e,n,i,o,a){var s=this;Array.isArray(n)?n.forEach(function(l){t.strokeStyle=s.getColor(l,e,t),t.stroke()}):(Qs(n)&&(t.strokeStyle=this.getPattern(n,e,t,i,o,a)),t.stroke())},r.prototype.getPattern=function(t,e,n,i,o,a){var s,l;if(t.image.nodeName==="rect"){var u=t.image.parsedStyle,d=u.width,h=u.height;l=i.contextService.getDPR();var v=i.config.offscreenCanvas;s=a.offscreenCanvasCreator.getOrCreateCanvas(v),s.width=d*l,s.height=h*l;var p=a.offscreenCanvasCreator.getOrCreateContext(v),g=[];t.image.forEach(function(C){o.renderDisplayObject(C,p,i,g,a)}),g.forEach(function(){p.restore()})}var m=this.imagePool.getOrCreatePatternSync(t,n,s,l,function(){e.renderable.dirty=!0,i.renderingService.dirtify()});return m},r.prototype.getColor=function(t,e,n){var i;if(t.type===ai.LinearGradient||t.type===ai.RadialGradient){var o=e.getGeometryBounds(),a=o&&o.halfExtents[0]*2||1,s=o&&o.halfExtents[1]*2||1;i=this.imagePool.getOrCreateGradient(N(N({type:t.type},t.value),{width:a,height:s}),n)}return i},r}();function Wf(r,t,e){var n=r.parsedStyle,i=n.filter,o=n.shadowColor,a=n.shadowBlur,s=n.shadowOffsetX,l=n.shadowOffsetY;i&&i.length&&(t.filter=r.style.filter),e&&(t.shadowColor=o.toString(),t.shadowBlur=a||0,t.shadowOffsetX=s||0,t.shadowOffsetY=l||0)}var NU=function(){function r(t){this.imagePool=t}return r.prototype.render=function(t,e,n){var i=e.width,o=e.height,a=e.img,s=e.shadowColor,l=e.shadowBlur,u,d=i,h=o;if(tr(a)?u=this.imagePool.getImageSync(a):(d||(d=a.width),h||(h=a.height),u=a),u){var v=!de(s)&&l>0;Wf(n,t,v);try{t.drawImage(u,0,0,d,h)}catch(p){}}},r}(),PU=function(){function r(){}return r.prototype.render=function(t,e,n,i,o,a){var s=e,l=s.lineWidth,u=s.textAlign,d=s.textBaseline,h=s.lineJoin,v=s.miterLimit,p=s.letterSpacing,g=s.stroke,m=s.fill,C=s.fillOpacity,w=s.strokeOpacity,_=s.opacity,S=s.metrics,b=s.dx,T=s.dy,E=s.shadowColor,R=s.shadowBlur,O=S.font,A=S.lines,P=S.height,D=S.lineHeight,k=S.lineMetrics;t.font=O,t.lineWidth=l,t.textAlign=u==="middle"?"center":u;var z=d;!a.enableCSSParsing&&z==="alphabetic"&&(z="bottom"),t.lineJoin=h,de(v)||(t.miterLimit=v);var V=0;d==="middle"?V=-P/2-D/2:d==="bottom"||d==="alphabetic"||d==="ideographic"?V=-P:(d==="top"||d==="hanging")&&(V=-D);var Z=b||0;V+=T||0,A.length===1&&(z==="bottom"?(z="middle",V-=.5*P):z==="top"&&(z="middle",V+=.5*P)),t.textBaseline=z;var Q=!de(E)&&R>0;Wf(n,t,Q);for(var Y=0;Y<A.length;Y++){var te=l/2+Z;V+=D,!de(g)&&!g.isNone&&l&&this.drawLetterSpacing(t,A[Y],k[Y],u,te,V,p,C,w,_,!0),de(m)||this.drawLetterSpacing(t,A[Y],k[Y],u,te,V,p,C,w,_)}},r.prototype.drawLetterSpacing=function(t,e,n,i,o,a,s,l,u,d,h){if(h===void 0&&(h=!1),s===0){h?this.strokeText(t,e,o,a,u):this.fillText(t,e,o,a,l,d);return}var v=t.textAlign;t.textAlign="left";var p=o;i==="center"||i==="middle"?p=o-n.width/2:(i==="right"||i==="end")&&(p=o-n.width);for(var g=Array.from(e),m=t.measureText(e).width,C=0,w=0;w<g.length;++w){var _=g[w];h?this.strokeText(t,_,p,a,u):this.fillText(t,_,p,a,l,d),C=t.measureText(e.substring(w+1)).width,p+=m-C+s,m=C}t.textAlign=v},r.prototype.fillText=function(t,e,n,i,o,a){var s,l=!de(o)&&o!==1;l&&(s=t.globalAlpha,t.globalAlpha=o*a),t.fillText(e,n,i),l&&(t.globalAlpha=s)},r.prototype.strokeText=function(t,e,n,i,o){var a,s=!de(o)&&o!==1;s&&(a=t.globalAlpha,t.globalAlpha=o),t.strokeText(e,n,i),s&&(t.globalAlpha=a)},r}();(function(r){oe(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t})(Co);(function(r){oe(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t})(Co);(function(r){oe(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t})(Co);(function(r){oe(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t})(Co);(function(r){oe(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t})(Co);(function(r){oe(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t})(Co);(function(r){oe(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t})(Co);var BU=function(r){oe(t,r);function t(e){e===void 0&&(e={});var n=r.call(this)||this;return n.options=e,n.name="canvas-renderer",n}return t.prototype.init=function(){var e,n=N({dirtyObjectNumThreshold:500,dirtyObjectRatioThreshold:.8},this.options),i=this.context.imagePool,o=new Co(i),a=(e={},e[$.CIRCLE]=o,e[$.ELLIPSE]=o,e[$.RECT]=o,e[$.IMAGE]=new NU(i),e[$.TEXT]=new PU,e[$.LINE]=o,e[$.POLYLINE]=o,e[$.POLYGON]=o,e[$.PATH]=o,e[$.GROUP]=void 0,e[$.HTML]=void 0,e[$.MESH]=void 0,e);this.context.defaultStyleRendererFactory=a,this.context.styleRendererFactory=a,this.addRenderingPlugin(new AU(n))},t.prototype.destroy=function(){this.removeAllRenderingPlugins(),delete this.context.defaultStyleRendererFactory,delete this.context.styleRendererFactory},t}(jo),DU=function(){function r(){}return r.prototype.apply=function(t,e){var n=this,i=t.renderingService,o=t.renderingContext,a=t.config;this.context=t;var s=o.root.ownerDocument.defaultView,l=function(E){i.hooks.pointerMove.call(E)},u=function(E){i.hooks.pointerUp.call(E)},d=function(E){i.hooks.pointerDown.call(E)},h=function(E){i.hooks.pointerOver.call(E)},v=function(E){i.hooks.pointerOut.call(E)},p=function(E){i.hooks.pointerCancel.call(E)},g=function(E){i.hooks.pointerWheel.call(E)},m=function(E){i.hooks.click.call(E)},C=function(E){e.globalThis.document.addEventListener("pointermove",l,!0),E.addEventListener("pointerdown",d,!0),E.addEventListener("pointerleave",v,!0),E.addEventListener("pointerover",h,!0),e.globalThis.addEventListener("pointerup",u,!0),e.globalThis.addEventListener("pointercancel",p,!0)},w=function(E){E.addEventListener("touchstart",d,!0),E.addEventListener("touchend",u,!0),E.addEventListener("touchmove",l,!0),E.addEventListener("touchcancel",p,!0)},_=function(E){e.globalThis.document.addEventListener("mousemove",l,!0),E.addEventListener("mousedown",d,!0),E.addEventListener("mouseout",v,!0),E.addEventListener("mouseover",h,!0),e.globalThis.addEventListener("mouseup",u,!0)},S=function(E){e.globalThis.document.removeEventListener("pointermove",l,!0),E.removeEventListener("pointerdown",d,!0),E.removeEventListener("pointerleave",v,!0),E.removeEventListener("pointerover",h,!0),e.globalThis.removeEventListener("pointerup",u,!0)},b=function(E){E.removeEventListener("touchstart",d,!0),E.removeEventListener("touchend",u,!0),E.removeEventListener("touchmove",l,!0),E.removeEventListener("touchcancel",p,!0)},T=function(E){e.globalThis.document.removeEventListener("mousemove",l,!0),E.removeEventListener("mousedown",d,!0),E.removeEventListener("mouseout",v,!0),E.removeEventListener("mouseover",h,!0),e.globalThis.removeEventListener("mouseup",u,!0)};i.hooks.init.tap(r.tag,function(){var E=n.context.contextService.getDomElement();e.globalThis.navigator.msPointerEnabled?(E.style.msContentZooming="none",E.style.msTouchAction="none"):s.supportsPointerEvents&&(E.style.touchAction="none"),s.supportsPointerEvents?C(E):_(E),s.supportsTouchEvents&&w(E),a.useNativeClickEvent&&E.addEventListener("click",m,!0),E.addEventListener("wheel",g,{passive:!0,capture:!0})}),i.hooks.destroy.tap(r.tag,function(){var E=n.context.contextService.getDomElement();e.globalThis.navigator.msPointerEnabled?(E.style.msContentZooming="",E.style.msTouchAction=""):s.supportsPointerEvents&&(E.style.touchAction=""),s.supportsPointerEvents?S(E):T(E),s.supportsTouchEvents&&b(E),a.useNativeClickEvent&&E.removeEventListener("click",m,!0),E.removeEventListener("wheel",g,!0)})},r.tag="DOMInteraction",r}(),FU=function(r){oe(t,r);function t(){var e=r.apply(this,X([],F(arguments),!1))||this;return e.name="dom-interaction",e}return t.prototype.init=function(){this.addRenderingPlugin(new DU)},t.prototype.destroy=function(){this.removeAllRenderingPlugins()},t}(jo),kU="g-canvas-camera",HU=function(){function r(){this.displayObjectHTMLElementMap=new WeakMap}return r.prototype.joinTransformMatrix=function(t){return"matrix(".concat([t[0],t[1],t[4],t[5],t[12],t[13]].join(","),")")},r.prototype.apply=function(t,e){var n=this,i=t.camera,o=t.renderingContext,a=t.renderingService;this.context=t;var s=o.root.ownerDocument.defaultView,l=s.context.eventService.nativeHTMLMap,u=function(m,C){C.style.transform=n.joinTransformMatrix(m.getWorldTransform())},d=function(m){var C=m.target;if(C.nodeName===$.HTML){n.$camera||(n.$camera=n.createCamera(i));var w=n.getOrCreateEl(C);if(n.$camera.appendChild(w),e.enableCSSParsing){var _=C.ownerDocument.documentElement.attributes;Object.keys(_).forEach(function(S){w.style[S]=_[S]})}Object.keys(C.attributes).forEach(function(S){n.updateAttribute(S,C)}),u(C,w),l.set(w,C)}},h=function(m){var C=m.target;if(C.nodeName===$.HTML&&n.$camera){var w=n.getOrCreateEl(C);w&&(w.remove(),l.delete(w))}},v=function(m){var C=m.target;if(C.nodeName===$.HTML){var w=m.attrName;n.updateAttribute(w,C)}},p=function(m){var C=m.target;if(C.nodeName===$.HTML){var w=n.getOrCreateEl(C);u(C,w)}},g=function(){if(n.$camera){var m=n.context.config,C=m.width,w=m.height;n.$camera.style.width="".concat(C||0,"px"),n.$camera.style.height="".concat(w||0,"px")}};a.hooks.init.tap(r.tag,function(){s.addEventListener(Pr.RESIZE,g),s.addEventListener(He.MOUNTED,d),s.addEventListener(He.UNMOUNTED,h),s.addEventListener(He.ATTR_MODIFIED,v),s.addEventListener(He.BOUNDS_CHANGED,p)}),a.hooks.endFrame.tap(r.tag,function(){n.$camera&&o.renderReasons.has(so.CAMERA_CHANGED)&&(n.$camera.style.transform=n.joinTransformMatrix(i.getOrthoMatrix()))}),a.hooks.destroy.tap(r.tag,function(){n.$camera&&n.$camera.remove(),s.removeEventListener(Pr.RESIZE,g),s.removeEventListener(He.MOUNTED,d),s.removeEventListener(He.UNMOUNTED,h),s.removeEventListener(He.ATTR_MODIFIED,v),s.removeEventListener(He.BOUNDS_CHANGED,p)})},r.prototype.createCamera=function(t){var e=this.context.config,n=e.document,i=e.width,o=e.height,a=this.context.contextService.getDomElement(),s=a.parentNode;if(s){var l=kU,u=s.querySelector("#"+l);if(!u){var d=(n||document).createElement("div");u=d,d.id=l,d.style.position="absolute",d.style.left="".concat(a.offsetLeft||0,"px"),d.style.top="".concat(a.offsetTop||0,"px"),d.style.transformOrigin="left top",d.style.transform=this.joinTransformMatrix(t.getOrthoMatrix()),d.style.overflow="hidden",d.style.pointerEvents="none",d.style.width="".concat(i||0,"px"),d.style.height="".concat(o||0,"px"),s.appendChild(d)}return u}return null},r.prototype.getOrCreateEl=function(t){var e=this.context.config.document,n=this.displayObjectHTMLElementMap.get(t);return n||(n=(e||document).createElement("div"),t.parsedStyle.$el=n,this.displayObjectHTMLElementMap.set(t,n),t.id&&(n.id=t.id),t.name&&n.setAttribute("name",t.name),t.className&&(n.className=t.className),n.style.position="absolute",n.style.left="0px",n.style.top="0px",n.style["will-change"]="transform",n.style.transform=this.joinTransformMatrix(t.getWorldTransform())),n},r.prototype.updateAttribute=function(t,e){var n=this.getOrCreateEl(e);switch(t){case"innerHTML":var i=e.parsedStyle.innerHTML;tr(i)?n.innerHTML=i:(n.innerHTML="",n.appendChild(i));break;case"transformOrigin":var o=e.parsedStyle.transformOrigin;n.style["transform-origin"]="".concat(o[0].value," ").concat(o[1].value);break;case"width":if(this.context.enableCSSParsing){var a=e.computedStyleMap().get("width");n.style.width=a.toString()}else{var a=e.parsedStyle.width;n.style.width=Wn(a)?"".concat(a,"px"):a.toString()}break;case"height":if(this.context.enableCSSParsing){var s=e.computedStyleMap().get("height");n.style.height=s.toString()}else{var s=e.parsedStyle.height;n.style.height=Wn(s)?"".concat(s,"px"):s.toString()}break;case"zIndex":var l=e.parsedStyle.zIndex;n.style["z-index"]="".concat(l);break;case"visibility":var u=e.parsedStyle.visibility;n.style.visibility=u;break;case"pointerEvents":var d=e.parsedStyle.pointerEvents;n.style.pointerEvents=d;break;case"opacity":var h=e.parsedStyle.opacity;n.style.opacity="".concat(h);break;case"fill":var v=e.parsedStyle.fill,p="";df(v)?v.isNone?p="transparent":p=e.getAttribute("fill"):Array.isArray(v)?p=e.getAttribute("fill"):Qs(v),n.style.background=p;break;case"stroke":var g=e.parsedStyle.stroke,m="";df(g)?g.isNone?m="transparent":m=e.getAttribute("stroke"):Array.isArray(g)?m=e.getAttribute("stroke"):Qs(g),n.style["border-color"]=m,n.style["border-style"]="solid";break;case"lineWidth":var C=e.parsedStyle.lineWidth;n.style["border-width"]="".concat(C||0,"px");break;case"lineDash":n.style["border-style"]="dashed";break;case"filter":var w=e.style.filter;n.style.filter=w;break;default:t!=="x"&&t!=="y"&&!de(e.style[t])&&e.style[t]!==""&&(n.style[t]=e.style[t])}},r.tag="HTMLRendering",r}(),zU=function(r){oe(t,r);function t(){var e=r.apply(this,X([],F(arguments),!1))||this;return e.name="html-renderer",e}return t.prototype.init=function(){this.addRenderingPlugin(new HU)},t.prototype.destroy=function(){this.removeAllRenderingPlugins()},t}(jo),GU=function(){function r(t){this.canvasConfig=t,this.imageCache={},this.gradientCache={},this.patternCache={}}return r.prototype.getImageSync=function(t,e){return this.imageCache[t]?e&&e(this.imageCache[t]):this.getOrCreateImage(t).then(function(n){e&&e(n)}),this.imageCache[t]},r.prototype.getOrCreateImage=function(t){var e=this;if(this.imageCache[t])return Promise.resolve(this.imageCache[t]);var n=this.canvasConfig.createImage;return new Promise(function(i,o){var a;n?a=n(t):yl&&(a=new window.Image),a&&(a.onload=function(){e.imageCache[t]=a,i(a)},a.onerror=function(s){o(s)},a.crossOrigin="Anonymous",a.src=t)})},r.prototype.getOrCreatePatternSync=function(t,e,n,i,o){var a=this.generatePatternKey(t);if(a&&this.patternCache[a])return this.patternCache[a];var s=t.image,l=t.repetition,u=t.transform,d,h=!1;tr(s)?d=this.getImageSync(s,o):n?(d=n,h=!0):d=s;var v=d&&e.createPattern(d,l);if(v){var p=void 0;u?p=zv(Fv(u),new Gr({})):p=vl(it()),h&&nf(p,p,[1/i,1/i,1]),v.setTransform({a:p[0],b:p[1],c:p[4],d:p[5],e:p[12],f:p[13]})}return a&&v&&(this.patternCache[a]=v),v},r.prototype.getOrCreateGradient=function(t,e){var n=this.generateGradientKey(t),i=t.type,o=t.steps,a=t.width,s=t.height,l=t.angle,u=t.cx,d=t.cy,h=t.size;if(this.gradientCache[n])return this.gradientCache[n];var v=null;if(i===ai.LinearGradient){var p=OA(a,s,l),g=p.x1,m=p.y1,C=p.x2,w=p.y2;v=e.createLinearGradient(g,m,C,w)}else if(i===ai.RadialGradient){var _=IA(a,s,u,d,h),S=_.x,b=_.y,T=_.r;v=e.createRadialGradient(S,b,0,S,b,T)}return v&&(o.forEach(function(E){var R=E.offset,O=E.color;R.unit===le.kPercentage&&(v==null||v.addColorStop(R.value/100,O.toString()))}),this.gradientCache[n]=v),this.gradientCache[n]},r.prototype.generateGradientKey=function(t){var e=t.type,n=t.width,i=t.height,o=t.steps,a=t.angle,s=t.cx,l=t.cy,u=t.size;return"gradient-".concat(e,"-").concat((a==null?void 0:a.toString())||0,"-").concat((s==null?void 0:s.toString())||0,"-").concat((l==null?void 0:l.toString())||0,"-").concat((u==null?void 0:u.toString())||0,"-").concat(n,"-").concat(i,"-").concat(o.map(function(d){var h=d.offset,v=d.color;return"".concat(h).concat(v)}).join("-"))},r.prototype.generatePatternKey=function(t){var e=t.image,n=t.repetition;if(tr(e))return"pattern-".concat(e,"-").concat(n);if(e.nodeName==="rect")return"pattern-".concat(e.entity,"-").concat(n)},r}(),WU=function(){function r(){}return r.prototype.apply=function(t){var e=t.renderingService,n=t.renderingContext,i=t.imagePool,o=n.root.ownerDocument.defaultView,a=function(u,d,h){var v=u.parsedStyle,p=v.width,g=v.height;p&&!g?u.setAttribute("height",h/d*p):!p&&g&&u.setAttribute("width",d/h*g)},s=function(u){var d=u.target,h=d.nodeName,v=d.attributes;if(h===$.IMAGE){var p=v.img,g=v.keepAspectRatio;tr(p)&&i.getImageSync(p,function(m){var C=m.width,w=m.height;g&&a(d,C,w),d.renderable.dirty=!0,e.dirtify()})}},l=function(u){var d=u.target,h=u.attrName,v=u.newValue;d.nodeName===$.IMAGE&&h==="img"&&tr(v)&&i.getOrCreateImage(v).then(function(p){var g=p.width,m=p.height;d.attributes.keepAspectRatio&&a(d,g,m),d.renderable.dirty=!0,e.dirtify()})};e.hooks.init.tap(r.tag,function(){o.addEventListener(He.MOUNTED,s),o.addEventListener(He.ATTR_MODIFIED,l)}),e.hooks.destroy.tap(r.tag,function(){o.removeEventListener(He.MOUNTED,s),o.removeEventListener(He.ATTR_MODIFIED,l)})},r.tag="LoadImage",r}(),UU=function(r){oe(t,r);function t(){var e=r.apply(this,X([],F(arguments),!1))||this;return e.name="image-loader",e}return t.prototype.init=function(){this.context.imagePool=new GU(this.context.config),this.addRenderingPlugin(new WU)},t.prototype.destroy=function(){this.removeAllRenderingPlugins()},t}(jo),VU=function(){function r(t){this.renderingContext=t.renderingContext,this.canvasConfig=t.config}return r.prototype.init=function(){var t=this.canvasConfig,e=t.container,n=t.canvas;if(n)this.$canvas=n,e&&n.parentElement!==e&&e.appendChild(n),this.$container=n.parentElement,this.canvasConfig.container=this.$container;else if(e&&(this.$container=tr(e)?document.getElementById(e):e,this.$container)){var i=document.createElement("canvas");this.$container.appendChild(i),this.$container.style.position||(this.$container.style.position="relative"),this.$canvas=i}this.context=this.$canvas.getContext("2d"),this.resize(this.canvasConfig.width,this.canvasConfig.height)},r.prototype.getContext=function(){return this.context},r.prototype.getDomElement=function(){return this.$canvas},r.prototype.getDPR=function(){return this.dpr},r.prototype.getBoundingClientRect=function(){if(this.$canvas.getBoundingClientRect)return this.$canvas.getBoundingClientRect()},r.prototype.destroy=function(){this.$container&&this.$canvas&&this.$canvas.parentNode&&this.$container.removeChild(this.$canvas)},r.prototype.resize=function(t,e){var n=this.canvasConfig.devicePixelRatio,i=n||yl&&window.devicePixelRatio||1;i=i>=1?Math.ceil(i):1,this.dpr=i,this.$canvas&&(this.$canvas.width=this.dpr*t,this.$canvas.height=this.dpr*e,BN(this.$canvas,t,e)),this.renderingContext.renderReasons.add(so.CAMERA_CHANGED)},r.prototype.applyCursorStyle=function(t){this.$container&&this.$container.style&&(this.$container.style.cursor=t)},r.prototype.toDataURL=function(t){return t===void 0&&(t={}),jt(this,void 0,void 0,function(){var e,n;return er(this,function(i){return e=t.type,n=t.encoderOptions,[2,this.context.canvas.toDataURL(e,n)]})})},r}(),YU=function(r){oe(t,r);function t(){var e=r.apply(this,X([],F(arguments),!1))||this;return e.name="canvas-context-register",e}return t.prototype.init=function(){this.context.ContextService=VU},t.prototype.destroy=function(){delete this.context.ContextService},t}(jo),XU=function(r){oe(t,r);function t(e){var n=r.call(this,e)||this;return n.registerPlugin(new YU),n.registerPlugin(new UU),n.registerPlugin(new hU),n.registerPlugin(new BU),n.registerPlugin(new FU),n.registerPlugin(new IU),n.registerPlugin(new zU),n}return t}(eA),qn=function(){function r(t){var e=this;this.isLinkFieldText=function(n){var i=e.getCellAppendInfo(n);return i==null?void 0:i.isLinkFieldText},this.spreadsheet=t,this.bindEvents()}return r.prototype.getCellAppendInfo=function(t){return E_(t)},r.prototype.reset=function(){},r}(),$U=function(r){oe(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.bindEvents=function(){this.bindDataCellClick()},t.prototype.bindDataCellClick=function(){var e=this;this.spreadsheet.on(U.DATA_CELL_CLICK,function(n){var i;n.stopPropagation();var o=e.spreadsheet.interaction;if(o.clearHoverTimer(),!o.hasIntercepts([Le.CLICK])){if(e.isLinkFieldText(n.target)){e.emitLinkFieldClickEvent(n);return}var a=e.spreadsheet.getCell(n.target),s=a.getMeta();if(!!s){if(o.addIntercepts([Le.HOVER]),o.isSelectedCell(a)){((i=n.originalEvent)===null||i===void 0?void 0:i.detail)===1&&(o.reset(),e.spreadsheet.emit(U.GLOBAL_SELECTED,o.getActiveCells()));return}o.changeState({cells:[ci(a)],stateName:ce.SELECTED,onUpdateCells:Xp}),e.spreadsheet.emit(U.GLOBAL_SELECTED,[a]),e.showTooltip(n,s),o.updateDataCellRelevantHeaderCells(ce.SELECTED,s)}}})},t.prototype.getTooltipOperator=function(e){var n=this.spreadsheet.getCell(e.target),i=Kp(this.spreadsheet,e).operation;return Q_(i,{defaultMenus:[],cell:n})},t.prototype.showTooltip=function(e,n){var i=n.data,o=n.isTotals,a=o===void 0?!1:o,s=n.value,l=n.fieldValue,u=n.field,d=n.valueField,h=i,v=this.spreadsheet.isTableMode(),p=v?N(N({},h),{value:s||l,valueField:u||d}):h,g=[p||N(N({},n.rowQuery),n.colQuery)],m=this.getTooltipOperator(e);this.spreadsheet.showTooltipWithInfo(e,g,{isTotals:a,operator:m,hideSummary:!0,onlyShowCellText:v})},t.prototype.emitLinkFieldClickEvent=function(e){var n=this.getCellAppendInfo(e.target).cellData,i=n,o=i.valueField,a=i.data;this.spreadsheet.emit(U.GLOBAL_LINK_FIELD_JUMP,{cellData:n,field:o,record:Object.assign({rowIndex:n==null?void 0:n.rowIndex},a)})},t}(qn),qU=function(r){oe(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.bindEvents=function(){this.bindDataCellClick()},t.prototype.bindDataCellClick=function(){var e=this;this.spreadsheet.on(U.MERGED_CELLS_CLICK,function(n){n.stopPropagation();var i=e.spreadsheet.interaction;i.hasIntercepts([Le.CLICK])||i.addIntercepts([Le.HOVER])})},t}(qn),KU=function(r){oe(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.isMultiSelection=!1,e.handleRowColClick=function(n){if(n.stopPropagation(),!e.isLinkFieldText(n.target)){var i=e.spreadsheet,o=i.interaction,a=i.options,s=e.spreadsheet.getCell(n.target);if(!(s instanceof Up)){var l=a.interaction.multiSelection,u=!!(l&&e.isMultiSelection),d=o.selectHeaderCell({cell:s,isMultiSelection:u});d&&e.showTooltip(n)}}},e.getHideColumnField=function(n){var i;return!((i=n.extra)===null||i===void 0)&&i.isCustomNode?n.id:e.spreadsheet.isTableMode()?n.field:n.id},e}return t.prototype.bindEvents=function(){this.bindKeyboardDown(),this.bindKeyboardUp(),this.bindColCellClick(),this.bindRowCellClick(),this.bindTableColExpand(),this.bindMouseMove()},t.prototype.reset=function(){this.isMultiSelection=!1,this.spreadsheet.interaction.removeIntercepts([Le.CLICK])},t.prototype.bindKeyboardDown=function(){var e=this;this.spreadsheet.on(U.GLOBAL_KEYBOARD_DOWN,function(n){Hf(n)&&(e.isMultiSelection=!0)})},t.prototype.bindKeyboardUp=function(){var e=this;this.spreadsheet.on(U.GLOBAL_KEYBOARD_UP,function(n){Hf(n)&&e.reset()})},t.prototype.bindMouseMove=function(){var e=this;this.spreadsheet.on(U.GLOBAL_MOUSE_MOVE,function(n){e.isMultiSelection&&!K_(n)&&e.reset()})},t.prototype.bindRowCellClick=function(){var e=this;this.spreadsheet.on(U.ROW_CELL_CLICK,function(n){e.handleRowColClick(n)})},t.prototype.bindColCellClick=function(){var e=this;this.spreadsheet.on(U.COL_CELL_CLICK,function(n){e.handleRowColClick(n)})},t.prototype.showTooltip=function(e){var n=Kp(this.spreadsheet,e),i=n.operation,o=n.enable;if(!!o){var a=this.spreadsheet.interaction,s=a.isSelectedState()?dW(a.getActiveCells()):[],l=this.getTooltipOperator(e,i);this.spreadsheet.showTooltipWithInfo(e,s,{onlyShowCellText:!0,operator:l})}},t.prototype.getTooltipOperator=function(e,n){var i=this,o=this.spreadsheet.getCell(e.target),a=o.getMeta(),s=o.cellType===ie.COL_CELL,l=this.spreadsheet.facet.getColLeafNodes().length===1,u=L9(),d=s&&!l&&a.isLeaf&&n.hiddenColumns,h=N(N({},u),{onClick:function(){i.hideSelectedColumns()}}),v=d?[h]:[];return Q_(n,{defaultMenus:v,cell:o})},t.prototype.bindTableColExpand=function(){var e=this;this.spreadsheet.on(U.COL_CELL_EXPANDED,function(n){e.handleExpandIconClick(n)})},t.prototype.hideSelectedColumns=function(){return jt(this,void 0,void 0,function(){var e,n,i;return er(this,function(o){switch(o.label){case 0:return e=this.spreadsheet.interaction,n=e.getActiveCells().map(function(a){return a.getMeta()}),i=n.map(this.getHideColumnField),[4,Vp(this.spreadsheet,i,!0)];case 1:return o.sent(),[2]}})})},t.prototype.handleExpandIconClick=function(e){var n=this.spreadsheet.store.get("hiddenColumnsDetail",[]),i=(vp(n,function(d){var h=d.displaySiblingNode;return yv(h,e.id)})||{}).hideColumnNodes,o=i===void 0?[]:i,a=this.spreadsheet.options.interaction.hiddenColumnFields,s=o.map(this.getHideColumnField),l=hk(a,s),u=n.filter(function(d){var h=d.displaySiblingNode;return!yv(h,e.id)});this.spreadsheet.setOptions({interaction:{hiddenColumnFields:l}}),this.spreadsheet.store.set("hiddenColumnsDetail",u),this.spreadsheet.interaction.reset(),this.spreadsheet.render(!1)},t}(qn),ZU=function(r){oe(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.getRowData=function(n){var i,o=n.getHeadLeafChild(),a=e.spreadsheet.dataSet.getCellMultiData({query:o==null?void 0:o.query})[0],s=zn.getFieldValue(a);return N(N({},s),{rowIndex:(i=n.rowIndex)!==null&&i!==void 0?i:o==null?void 0:o.rowIndex})},e}return t.prototype.bindEvents=function(){this.bindRowCellClick()},t.prototype.bindRowCellClick=function(){var e=this;this.spreadsheet.on(U.ROW_CELL_CLICK,function(n){if(!e.spreadsheet.interaction.hasIntercepts([Le.CLICK])&&!!e.isLinkFieldText(n.target)){var i=e.getCellAppendInfo(n.target).cellData,o=i.field,a=e.getRowData(i);e.spreadsheet.emit(U.GLOBAL_LINK_FIELD_JUMP,{field:o,cellData:i,record:a})}})},t}(qn),QU=function(r){oe(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.bindEvents=function(){this.bindCornerCellClick()},t.prototype.bindCornerCellClick=function(){var e=this;this.spreadsheet.on(U.CORNER_CELL_CLICK,function(n){var i=e.spreadsheet.getCell(n.target);if(!!i){var o=i.getMeta();switch(o==null?void 0:o.cornerType){case Cr.Row:e.onRowCornerClick(o==null?void 0:o.field,n);break;case Cr.Col:e.onColCornerClick(o==null?void 0:o.field,n);break;case Cr.Series:e.onSeriesCornerClick(o==null?void 0:o.field,n);break}}})},t.prototype.onRowCornerClick=function(e,n){var i=this.getSelectedRowNodes(e);this.selectCells(i,n)},t.prototype.onColCornerClick=function(e,n){var i=this.getSelectedColNodes(e);this.selectCells(i,n)},t.prototype.onSeriesCornerClick=function(e,n){var i=this.spreadsheet.facet.getSeriesNumberNodes();this.selectCells(i,n)},t.prototype.getSelectedRowNodes=function(e){var n=this.spreadsheet.facet;if(this.spreadsheet.isHierarchyTreeType())return n.getRowNodes();if(!this.spreadsheet.isCustomRowFields())return n.getRowNodesByField(e);var i=n.getRowNodesByField(e)[0];return n.getRowNodes(i==null?void 0:i.level)},t.prototype.getSelectedColNodes=function(e){var n=this.spreadsheet.facet;if(!this.spreadsheet.isCustomColumnFields())return n.getColNodesByField(e);var i=n.getColNodesByField(e)[0];return n.getColNodes(i==null?void 0:i.level)},t.prototype.getCellMetas=function(e,n){return e.map(function(i){return{id:i.id,colIndex:-1,rowIndex:-1,type:n}})},t.prototype.selectCells=function(e,n){var i,o=this.spreadsheet.interaction,a=(i=e[0])===null||i===void 0?void 0:i.belongsCell,s=this.getCellMetas(e,a==null?void 0:a.cellType);if(a&&o.isSelectedCell(a)){o.reset(),this.spreadsheet.emit(U.GLOBAL_SELECTED,o.getActiveCells());return}se(e)||se(s)||(o.addIntercepts([Le.HOVER]),o.changeState({cells:s,stateName:ce.SELECTED}),o.highlightNodes(e),this.showTooltip(n),this.spreadsheet.emit(U.GLOBAL_SELECTED,o.getActiveCells()))},t.prototype.showTooltip=function(e){var n=this.spreadsheet.interaction.getActiveCells();this.spreadsheet.showTooltipWithInfo(e,[],{data:{summaries:[{selectedData:n,name:"",value:null}]}})},t}(qn),JU=function(r){oe(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.bindEvents=function(){this.bindDataCellHover(),this.bindHeaderCellHover()},t.prototype.changeStateToHoverFocus=function(e,n){var i=this,o;if(!!e){var a=e.getMeta(),s=this.spreadsheet.interaction,l=this.spreadsheet.options.interaction,u=l.hoverFocus;s.clearHoverTimer();var d=function(){if(!s.hasIntercepts([Le.HOVER])){s.changeState({cells:[ci(e)],stateName:ce.HOVER_FOCUS});var p=i.spreadsheet.isTableMode(),g={isTotals:a.isTotals,hideSummary:!0,onlyShowCellText:p};l!=null&&l.hoverHighlight&&s.updateDataCellRelevantHeaderCells(ce.HOVER,a);var m=i.getCellData(a,p);i.spreadsheet.showTooltipWithInfo(n,m,g)}},h=Ii(u)?tv:(o=u==null?void 0:u.duration)!==null&&o!==void 0?o:tv;if(h===0)d();else{var v=window.setTimeout(function(){return d()},h);s.setHoverTimer(v)}}},t.prototype.handleHeaderHover=function(e){var n=this.spreadsheet.getCell(e.target);if(!se(n)){var i=this.spreadsheet.interaction;i.clearHoverTimer(),!i.isActiveCell(n)&&(i.changeState({cells:[ci(n)],stateName:ce.HOVER}),n.update(),this.showEllipsisTooltip(e,n))}},t.prototype.showEllipsisTooltip=function(e,n){if(!n||!n.isTextOverflowing()){this.spreadsheet.hideTooltip();return}var i=n.getMeta(),o={isTotals:i.isTotals,hideSummary:!0,onlyShowCellText:!0,enableFormat:!0},a=this.getCellData(i,o.onlyShowCellText);this.spreadsheet.showTooltipWithInfo(e,a,o)},t.prototype.getCellData=function(e,n){e===void 0&&(e={});var i=e.data,o=e.query,a=e.value,s=e.field,l=e.fieldValue,u=e.valueField,d=e.rowQuery,h=e.colQuery,v=i,p=n?[N(N({},o),{value:a||l,valueField:s||u})]:[v||N(N({},d),h)];return p},t.prototype.bindDataCellHover=function(){var e=this;this.spreadsheet.on(U.DATA_CELL_HOVER,function(n){var i=e.spreadsheet.getCell(n.target);if(!se(i)){var o=e.spreadsheet,a=o.interaction,s=o.options,l=s.interaction,u=i==null?void 0:i.getMeta();a.isActiveCell(i)||(a.changeState({cells:[ci(i)],stateName:ce.HOVER}),l!=null&&l.hoverHighlight&&a.updateDataCellRelevantHeaderCells(ce.HOVER,u),l!=null&&l.hoverFocus&&e.changeStateToHoverFocus(i,n))}})},t.prototype.bindHeaderCellHover=function(){var e=this;[U.ROW_CELL_HOVER,U.COL_CELL_HOVER,U.CORNER_CELL_HOVER].forEach(function(n){e.spreadsheet.on(n,function(i){e.handleHeaderHover(i)})})},t}(qn),Jp=function(r){oe(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.displayedCells=[],e.brushRangeCells=[],e.brushSelectionStage=ar.UN_DRAGGED,e.brushSelectionMinimumMoveDistance=5,e.scrollAnimationComplete=!0,e.mouseMoveDistanceFromCanvas=0,e.setMoveDistanceFromCanvas=function(n,i,o){var a=0;if(i&&(a=n.x),o){var s=n.y;i?a=Math.max(s,a):a=s}e.mouseMoveDistanceFromCanvas=Math.abs(a)},e.formatBrushPointForScroll=function(n,i){var o,a,s,l;i===void 0&&(i=!1);var u=n.x,d=n.y,h=e.spreadsheet.facet,v=i?h.cornerBBox:h.panelBBox,p=v.minX,g=v.maxX,m=h.panelBBox,C=m.minY,w=m.maxY,_=((o=e.endBrushPoint)===null||o===void 0?void 0:o.x)+u,S=((a=e.endBrushPoint)===null||a===void 0?void 0:a.y)+d,b=!0,T=!0,E=(l=(s=h.vScrollBar)===null||s===void 0?void 0:s.getBBox())===null||l===void 0?void 0:l.width,R=2;return _>g?_=g-E-R:_<p?_=p+R:b=!1,S>w?S=w-R:S<=C?S=C+R:T=!1,{x:{value:_,needScroll:b},y:{value:S,needScroll:T}}},e.autoScrollIntervalId=null,e.rectanglesIntersect=function(n,i){return n.maxX>i.minX&&n.minX<i.maxX&&n.minY<i.maxY&&n.maxY>i.minY},e.autoScrollConfig=om(Cm),e.validateYIndex=function(n){var i,o,a=e.spreadsheet.facet,s=a.frozenGroupInfo,l=0,u=(i=s==null?void 0:s.frozenRow)===null||i===void 0?void 0:i.range;if(u!=null&&u[1]&&(l=u[1]+1),n<l)return null;var d=a.getCellRange().end,h=(o=s==null?void 0:s.frozenTrailingRow)===null||o===void 0?void 0:o.range;return h!=null&&h[0]&&(d=h[0]-1),n>d?null:n},e.validateXIndex=function(n){var i,o,a=e.spreadsheet.facet,s=a.frozenGroupInfo,l=0,u=(i=s==null?void 0:s.frozenCol)===null||i===void 0?void 0:i.range;if(u!=null&&u[1]&&(l=u[1]+1),n<l)return null;var d=a.getColLeafNodes().length-1,h=(o=s==null?void 0:s.frozenTrailingCol)===null||o===void 0?void 0:o.range;return h!=null&&h[0]&&(d=h[0]-1),n>d?null:n},e.adjustNextColIndexWithFrozen=function(n,i){var o=e.spreadsheet,a=o.facet,s=o.dataSet,l=o.options,u=s.getDisplayDataSet().length,d=a.getColLeafNodes().length,h=ol(l.frozen,d,u),v=h.trailingColCount,p=h.colCount,g=a.panelScrollGroupIndexes;return v>0&&i===Wt.SCROLL_DOWN&&ll(n,v,d)?g[1]:p>0&&i===Wt.SCROLL_UP&&sl(n,p)?g[0]:n},e.adjustNextRowIndexWithFrozen=function(n,i){var o=e.spreadsheet,a=o.facet,s=o.dataSet,l=o.options,u=s.getDisplayDataSet().length,d=a.getColLeafNodes().length,h=a.getCellRange(),v=ol(l.frozen,d,u),p=v.trailingRowCount,g=v.rowCount,m=a.panelScrollGroupIndexes;return p>0&&i===Wt.SCROLL_DOWN&&Ol(n,h.end,p)?m[3]:g>0&&i===Wt.SCROLL_UP&&ad(n,h.start,g)?m[2]:n},e.getWillScrollRowIndexDiff=function(n){return n===Wt.SCROLL_DOWN?Sf.SCROLL_DOWN:Sf.SCROLL_UP},e.getDefaultWillScrollToRowIndex=function(n){var i=e.adjustNextRowIndexWithFrozen(e.endBrushPoint.rowIndex,n),o=i+e.getWillScrollRowIndexDiff(n);return e.validateYIndex(o)},e.getWillScrollToRowIndex=function(n){return e.getDefaultWillScrollToRowIndex(n)},e.getNextScrollDelta=function(n){var i=e.spreadsheet.facet.getScrollOffset(),o=i.scrollX,a=o===void 0?0:o,s=i.scrollY,l=s===void 0?0:s,u=0,d=0;if(n.y.scroll){var h=n.y.value>0?Wt.SCROLL_DOWN:Wt.SCROLL_UP,v=e.getWillScrollToRowIndex(h);if(Lt(v))d=0;else{var p=jG(v,h,e.spreadsheet)-l,g=Lt(p)||Number.isNaN(p);d=g?0:p}}if(n.x.scroll){var h=n.x.value>0?Wt.SCROLL_DOWN:Wt.SCROLL_UP,m=e.adjustNextColIndexWithFrozen(e.endBrushPoint.colIndex,h),C=e.validateXIndex(m+(n.x.value>0?1:-1));u=Lt(C)?0:JG(C,h,e.spreadsheet)-a}return{x:u,y:d}},e.onScrollAnimationComplete=function(){e.scrollAnimationComplete=!0,e.brushSelectionStage!==ar.UN_DRAGGED&&e.renderPrepareSelected(e.endBrushPoint)},e.autoScroll=function(n){if(n===void 0&&(n=!1),!(e.brushSelectionStage===ar.UN_DRAGGED||!e.scrollAnimationComplete)){var i=e.autoScrollConfig,o=e.spreadsheet.facet.getScrollOffset(),a=n?"rowHeaderOffsetX":"offsetX",s={rowHeaderOffsetX:{value:o.rowHeaderScrollX,animate:!0},offsetX:{value:o.scrollX,animate:!0},offsetY:{value:o.scrollY,animate:!0}},l=e.getNextScrollDelta(i),u=l.x,d=l.y;if(d===0&&u===0){e.clearAutoScroll();return}if(i.y.scroll&&(s.offsetY.value+=d),i.x.scroll){var h=s[a];h.value+=u,h.value<0&&(h.value=0)}e.scrollAnimationComplete=!1;var v=i.x.scroll?1:3,p=Math.max(16,300-e.mouseMoveDistanceFromCanvas*v);e.spreadsheet.facet.scrollWithAnimation(s,p,e.onScrollAnimationComplete)}},e.handleScroll=kx(function(n,i,o){if(o===void 0&&(o=!1),e.brushSelectionStage!==ar.UN_DRAGGED){var a=e.formatBrushPointForScroll({x:n,y:i},o),s=a.x,l=s.value,u=s.needScroll,d=a.y,h=d.value,v=d.needScroll,p=e.autoScrollConfig;v&&(p.y.value=i,p.y.scroll=!0),u&&(p.x.value=n,p.x.scroll=!0),e.setMoveDistanceFromCanvas({x:n,y:i},u,v),e.renderPrepareSelected({x:l,y:h}),(v||u)&&(e.clearAutoScroll(),e.autoScroll(o),e.autoScrollIntervalId=setInterval(function(){e.autoScroll(o)},16))}},30),e.clearAutoScroll=function(){e.autoScrollIntervalId&&(clearInterval(e.autoScrollIntervalId),e.autoScrollIntervalId=null,e.resetScrollDelta())},e.onUpdateCells=function(n,i){return i()},e.showPrepareSelectedCells=function(){e.brushRangeCells=e.getBrushRangeCells(),e.spreadsheet.interaction.changeState({cells:De(e.brushRangeCells,function(n){return ci(n)}),stateName:ce.PREPARE_SELECT,force:!0,onUpdateCells:e.onUpdateCells})},e.renderPrepareSelected=function(n){var i=n.x,o=n.y,a=e.spreadsheet.container.document.elementsFromPointSync(i,o),s=a.map(function(p){return e.spreadsheet.getCell(p)}).find(Boolean),l=s instanceof Qo||s instanceof hd||s instanceof hl;if(!(!s||!l)){var u=s.getMeta(),d=u.rowIndex,h=u.colIndex;e.endBrushPoint={x:i,y:o,rowIndex:d,colIndex:h};var v=e.spreadsheet.interaction;v.addIntercepts([Le.HOVER]),v.clearStyleIndependent(),e.isValidBrushSelection()&&(e.showPrepareSelectedCells(),e.updatePrepareSelectMask())}},e}return t.prototype.bindEvents=function(){this.bindMouseDown(),this.bindMouseMove(),this.bindMouseUp()},t.prototype.getPrepareSelectMaskTheme=function(){var e;return(e=this.spreadsheet.theme)===null||e===void 0?void 0:e.prepareSelectMask},t.prototype.initPrepareSelectMaskShape=function(){var e,n=this.spreadsheet.facet.foregroundGroup;if(!!n){(e=this.prepareSelectMaskShape)===null||e===void 0||e.remove();var i=this.getPrepareSelectMaskTheme();this.prepareSelectMaskShape=n.appendChild(new wt({style:{width:0,height:0,x:0,y:0,fill:i==null?void 0:i.backgroundColor,fillOpacity:i==null?void 0:i.backgroundOpacity,zIndex:o6,visibility:"hidden",pointerEvents:"none"}}))}},t.prototype.setBrushSelectionStage=function(e){this.brushSelectionStage=e},t.prototype.isPointInCanvas=function(e){var n=this.spreadsheet.facet.getCanvasSize(),i=n.height,o=n.width,a=this.spreadsheet.facet.panelBBox,s=a.minX,l=a.minY;return(e==null?void 0:e.x)>s&&(e==null?void 0:e.x)<o&&(e==null?void 0:e.y)>l&&(e==null?void 0:e.y)<i},t.prototype.resetDrag=function(){this.hidePrepareSelectMaskShape(),this.setBrushSelectionStage(ar.UN_DRAGGED)},t.prototype.isValidBrushSelection=function(){var e=this.getBrushRange(),n=e.start,i=e.end,o=i.x-n.x>this.brushSelectionMinimumMoveDistance||i.y-n.y>this.brushSelectionMinimumMoveDistance;return o},t.prototype.setDisplayedCells=function(){this.displayedCells=this.spreadsheet.facet.getDataCells()},t.prototype.updatePrepareSelectMask=function(){var e=this.getBrushRange(),n=this.getPrepareSelectMaskPosition(e),i=n.x,o=n.y;this.prepareSelectMaskShape.attr({x:i,y:o,width:e.width,height:e.height}),this.prepareSelectMaskShape.setAttribute("visibility","visible")},t.prototype.hidePrepareSelectMaskShape=function(){var e;(e=this.prepareSelectMaskShape)===null||e===void 0||e.setAttribute("visibility","hidden")},t.prototype.resetScrollDelta=function(){this.autoScrollConfig=om(Cm)},t.prototype.getBrushPoint=function(e){var n=this.spreadsheet.facet.getScrollOffset(),i=n.scrollY,o=n.scrollX,a={x:e==null?void 0:e.x,y:e==null?void 0:e.y},s=this.spreadsheet.getCell(e.target),l=s.getMeta(),u=l.colIndex,d=l.rowIndex;return N(N({},a),{rowIndex:d,colIndex:u,scrollY:i,scrollX:o})},t.prototype.getBrushRange=function(){var e,n,i,o,a,s,l,u,d=this.spreadsheet.facet.getScrollOffset(),h=d.scrollX,v=h===void 0?0:h,p=d.scrollY,g=p===void 0?0:p,m=Math.min(this.startBrushPoint.rowIndex,(e=this.endBrushPoint)===null||e===void 0?void 0:e.rowIndex),C=Math.max(this.startBrushPoint.rowIndex,(n=this.endBrushPoint)===null||n===void 0?void 0:n.rowIndex),w=Math.min(this.startBrushPoint.colIndex,(i=this.endBrushPoint)===null||i===void 0?void 0:i.colIndex),_=Math.max(this.startBrushPoint.colIndex,(o=this.endBrushPoint)===null||o===void 0?void 0:o.colIndex),S=this.startBrushPoint.x+this.startBrushPoint.scrollX-v,b=this.startBrushPoint.y+this.startBrushPoint.scrollY-g,T=Math.min(S,(a=this.endBrushPoint)===null||a===void 0?void 0:a.x),E=Math.max(S,(s=this.endBrushPoint)===null||s===void 0?void 0:s.x),R=Math.min(b,(l=this.endBrushPoint)===null||l===void 0?void 0:l.y),O=Math.max(b,(u=this.endBrushPoint)===null||u===void 0?void 0:u.y);return{start:{rowIndex:m,colIndex:w,x:T,y:R},end:{rowIndex:C,colIndex:_,x:E,y:O},width:E-T,height:O-R}},t.prototype.getBrushRangeCells=function(){var e=this;return this.setDisplayedCells(),this.displayedCells.filter(function(n){var i=n.getMeta();return e.isInBrushRange(i)})},t.prototype.mouseDown=function(e){this.spreadsheet.interaction.hasIntercepts([Le.CLICK])||(this.setBrushSelectionStage(ar.CLICK),this.initPrepareSelectMaskShape(),this.setDisplayedCells(),this.startBrushPoint=this.getBrushPoint(e))},t.prototype.addBrushIntercepts=function(){this.spreadsheet.interaction.addIntercepts([Le.DATA_CELL_BRUSH_SELECTION])},t.prototype.bindMouseUp=function(e){var n=this;e===void 0&&(e=!1),this.spreadsheet.on(U.GLOBAL_MOUSE_UP,function(i){if(n.brushSelectionStage!==ar.DRAGGED){n.resetDrag();return}if(e&&n.clearAutoScroll(),n.isValidBrushSelection()){n.addBrushIntercepts(),n.updateSelectedCells();var o=qp(n.spreadsheet);n.spreadsheet.showTooltipWithInfo(i,o)}n.spreadsheet.interaction.getCurrentStateName()===ce.PREPARE_SELECT&&n.spreadsheet.interaction.reset(),n.resetDrag()}),this.spreadsheet.on(U.GLOBAL_CONTEXT_MENU,function(){n.brushSelectionStage!==ar.UN_DRAGGED&&(n.spreadsheet.interaction.removeIntercepts([Le.HOVER]),n.resetDrag())})},t.prototype.autoBrushScroll=function(e,n){var i,o;if(n===void 0&&(n=!1),this.clearAutoScroll(),!this.isPointInCanvas(e)){var a=(e==null?void 0:e.x)-((i=this.endBrushPoint)===null||i===void 0?void 0:i.x),s=(e==null?void 0:e.y)-((o=this.endBrushPoint)===null||o===void 0?void 0:o.y);return this.handleScroll(a,s,n),!0}return!1},t.prototype.emitBrushSelectionEvent=function(e,n){this.spreadsheet.emit(e,n),this.spreadsheet.emit(U.GLOBAL_SELECTED,n),se(n)&&this.spreadsheet.interaction.removeIntercepts([Le.HOVER])},t.prototype.getVisibleBrushRangeCells=function(e){return this.brushRangeCells.find(function(n){var i=n.getMeta();return(i==null?void 0:i.id)===e})},t.prototype.isInBrushRange=function(e){return!1},t.prototype.bindMouseDown=function(){},t.prototype.bindMouseMove=function(){},t.prototype.updateSelectedCells=function(){},t.prototype.getPrepareSelectMaskPosition=function(e){return{x:e.start.x,y:e.start.y}},t}(qn),jU=function(r){oe(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.displayedCells=[],e.brushRangeCells=[],e.onUpdateCells=function(n){return n.updateCells(e.spreadsheet.facet.getColCells())},e}return t.prototype.bindEvents=function(){this.bindMouseDown(),this.bindMouseMove(),this.bindMouseUp()},t.prototype.bindMouseDown=function(){var e=this;this.spreadsheet.on(U.COL_CELL_MOUSE_DOWN,function(n){!e.spreadsheet.interaction.getBrushSelection().colCell||r.prototype.mouseDown.call(e,n)})},t.prototype.isPointInCanvas=function(e){var n=this.spreadsheet.facet.getCanvasSize().width,i=this.spreadsheet.facet.cornerBBox,o=i.width,a=i.minY,s=i.maxY;return e.x>=o&&e.x<=n&&e.y>=a&&e.y<=s},t.prototype.bindMouseMove=function(){var e=this;this.spreadsheet.on(U.COL_CELL_MOUSE_MOVE,function(n){var i;if(e.brushSelectionStage!==ar.UN_DRAGGED){e.setBrushSelectionStage(ar.DRAGGED);var o=(i=e.spreadsheet.interaction.eventController)===null||i===void 0?void 0:i.getViewportPoint(n);!e.isPointInCanvas(o)||e.renderPrepareSelected(o)}})},t.prototype.setDisplayedCells=function(){this.displayedCells=this.spreadsheet.facet.getColCells()},t.prototype.isInBrushRange=function(e){var n=this.getBrushRange(),i=n.start,o=n.end,a=this.spreadsheet.facet.getScrollOffset().scrollX,s=a===void 0?0:a,l=this.spreadsheet.facet.cornerBBox,u=e.x,d=u===void 0?0:u,h=e.y,v=h===void 0?0:h,p=e.width,g=p===void 0?0:p,m=e.height,C=m===void 0?0:m;return this.rectanglesIntersect({minX:i.x-l.width+s,minY:i.y,maxX:o.x-l.width+s,maxY:o.y},{minX:d,maxX:d+g,minY:v,maxY:v+C})},t.prototype.updateSelectedCells=function(){var e=this.spreadsheet,n=e.interaction,i=e.facet;n.changeState({cells:De(this.brushRangeCells,ci),onUpdateCells:function(o){o.updateCells(i.getColCells())},stateName:ce.COL_CELL_BRUSH_SELECTED}),this.spreadsheet.emit(U.COL_CELL_BRUSH_SELECTION,this.brushRangeCells),this.spreadsheet.emit(U.GLOBAL_SELECTED,this.brushRangeCells),se(this.brushRangeCells)&&n.removeIntercepts([Le.HOVER])},t.prototype.addBrushIntercepts=function(){this.spreadsheet.interaction.addIntercepts([Le.COL_CELL_BRUSH_SELECTION])},t}(Jp),eV=function(r){oe(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.displayedCells=[],e.brushRangeCells=[],e.getSelectedCellMetas=function(n){var i=e.spreadsheet.facet,o=[],a=i.getRowLeafNodes(),s=i.getColLeafNodes(),l=Ys(n.start.rowIndex,n.end.rowIndex+1),u=Ys(n.start.colIndex,n.end.colIndex+1);return l.forEach(function(d){u.forEach(function(h){var v=String(s[h].id),p=se(a)?String(d):String(a[d].id);o.push({colIndex:h,rowIndex:d,id:Ml(p,v),type:ie.DATA_CELL,rowId:p,colId:v,spreadsheet:e.spreadsheet})})}),o},e}return t.prototype.bindMouseDown=function(){var e=this;this.spreadsheet.on(U.DATA_CELL_MOUSE_DOWN,function(n){!e.spreadsheet.interaction.getBrushSelection().dataCell||(r.prototype.mouseDown.call(e,n),e.resetScrollDelta())})},t.prototype.bindMouseMove=function(){var e=this;this.spreadsheet.on(U.GLOBAL_MOUSE_MOVE,function(n){if(e.brushSelectionStage!==ar.UN_DRAGGED){e.setBrushSelectionStage(ar.DRAGGED);var i=e.spreadsheet.interaction.eventController.getViewportPoint(n);e.autoBrushScroll(i)||e.renderPrepareSelected(i)}})},t.prototype.isInBrushRange=function(e){var n=this.getBrushRange(),i=n.start,o=n.end,a=e.rowIndex,s=e.colIndex;return a>=i.rowIndex&&a<=o.rowIndex&&s>=i.colIndex&&s<=o.colIndex},t.prototype.updateSelectedCells=function(){var e=this.getBrushRange(),n=this.getSelectedCellMetas(e);this.spreadsheet.interaction.changeState({cells:n,stateName:ce.DATA_CELL_BRUSH_SELECTED,onUpdateCells:Xp});var i=this.getScrollBrushRangeCells(n);this.emitBrushSelectionEvent(U.DATA_CELL_BRUSH_SELECTION,i)},t.prototype.getScrollBrushRangeCells=function(e){var n=this;return e.map(function(i){var o=n.getVisibleBrushRangeCells(i.id);if(o)return o;var a=n.spreadsheet.facet.getCellMeta(i.rowIndex,i.colIndex);return n.spreadsheet.options.dataCell(a)})},t.prototype.bindMouseUp=function(){r.prototype.bindMouseUp.call(this,!0)},t.prototype.getPrepareSelectMaskPosition=function(e){var n=this.spreadsheet.facet.panelBBox,i=n.minX,o=n.minY,a=Math.max(e.start.x,i),s=Math.max(e.start.y,o);return{x:a,y:s}},t}(Jp),tV=function(r){oe(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.displayedCells=[],e.brushRangeCells=[],e.isInBrushRange=function(n){var i=e.getBrushRange(),o=i.start,a=i.end,s=e.spreadsheet.facet.getScrollOffset(),l=s.scrollY,u=s.rowHeaderScrollX,d=e.spreadsheet.facet.cornerBBox,h=n.x,v=h===void 0?0:h,p=n.y,g=p===void 0?0:p,m=n.width,C=m===void 0?0:m,w=n.height,_=w===void 0?0:w;return e.rectanglesIntersect({minX:o.x+u,minY:o.y-d.height+l,maxX:a.x+u,maxY:a.y-d.height+l},{minX:v,maxX:v+C,minY:g,maxY:g+_})},e.onUpdateCells=function(n){return n.updateCells(e.spreadsheet.facet.getRowCells())},e.getSelectedRowNodes=function(){return e.spreadsheet.facet.getRowNodes().filter(e.isInBrushRange)},e.getVisibleRowLeafCellByScrollDirection=function(n){var i=e.spreadsheet.facet.getRowCells();return n===Wt.SCROLL_DOWN?It(i):i.find(function(o){var a=o.getMeta();return a.isLeaf})},e.getWillScrollToRowIndex=function(n){var i,o;if(!Lt(e.endBrushPoint.rowIndex))return e.getDefaultWillScrollToRowIndex(n);var a=e.getVisibleRowLeafCellByScrollDirection(n),s=(o=(i=a==null?void 0:a.getMeta())===null||i===void 0?void 0:i.rowIndex)!==null&&o!==void 0?o:0,l=s+e.getWillScrollRowIndexDiff(n);return e.validateYIndex(l)},e}return t.prototype.bindMouseDown=function(){var e=this;this.spreadsheet.on(U.ROW_CELL_MOUSE_DOWN,function(n){!e.spreadsheet.interaction.getBrushSelection().rowCell||r.prototype.mouseDown.call(e,n)})},t.prototype.isPointInCanvas=function(e){var n=this.spreadsheet.facet.getCanvasSize().height,i=this.spreadsheet.facet.cornerBBox,o=i.minX,a=i.height,s=i.maxX;return e.x>=o&&e.x<=s&&e.y>=a&&e.y<=n},t.prototype.bindMouseMove=function(){var e=this;this.spreadsheet.on(U.GLOBAL_MOUSE_MOVE,function(n){if(e.brushSelectionStage!==ar.UN_DRAGGED){e.setBrushSelectionStage(ar.DRAGGED);var i=e.spreadsheet.interaction.eventController.getViewportPoint(n);e.autoBrushScroll(i,!0)||e.renderPrepareSelected(i)}})},t.prototype.setDisplayedCells=function(){this.displayedCells=this.spreadsheet.facet.getRowCells()},t.prototype.updateSelectedCells=function(){var e=this.getSelectedRowNodes(),n=this.getScrollBrushRangeCells(e),i=De(n,ci);this.spreadsheet.interaction.changeState({cells:i,stateName:ce.ROW_CELL_BRUSH_SELECTED,onUpdateCells:this.onUpdateCells}),this.emitBrushSelectionEvent(U.ROW_CELL_BRUSH_SELECTION,n)},t.prototype.addBrushIntercepts=function(){this.spreadsheet.interaction.addIntercepts([Le.ROW_CELL_BRUSH_SELECTION])},t.prototype.getScrollBrushRangeCells=function(e){var n=this;return e.map(function(i){var o=n.getVisibleBrushRangeCells(i.id);return o||n.spreadsheet.facet.rowHeader.getCellInstance(i)})},t.prototype.getPrepareSelectMaskPosition=function(e){var n=this.spreadsheet.facet.panelBBox.minY,i=e.start.x,o=Math.max(e.start.y,n);return{x:i,y:o}},t}(Jp),rV=function(r){oe(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.isMultiSelection=!1,e}return t.prototype.bindEvents=function(){this.bindKeyboardDown(),this.bindDataCellClick(),this.bindKeyboardUp(),this.bindMouseMove()},t.prototype.reset=function(){this.isMultiSelection=!1,this.spreadsheet.interaction.removeIntercepts([Le.CLICK])},t.prototype.bindKeyboardDown=function(){var e=this;this.spreadsheet.on(U.GLOBAL_KEYBOARD_DOWN,function(n){Hf(n)&&(e.isMultiSelection=!0,e.spreadsheet.interaction.addIntercepts([Le.CLICK]))})},t.prototype.bindKeyboardUp=function(){var e=this;this.spreadsheet.on(U.GLOBAL_KEYBOARD_UP,function(n){Hf(n)&&e.reset()})},t.prototype.bindMouseMove=function(){var e=this;this.spreadsheet.on(U.GLOBAL_MOUSE_MOVE,function(n){e.isMultiSelection&&!K_(n)&&e.reset()})},t.prototype.getSelectedCells=function(e){var n=e.getMeta().id,i=this.spreadsheet.interaction,o=i.getCells([ie.DATA_CELL]),a=[];return i.getCurrentStateName()!==ce.SELECTED&&(o=[]),o.find(function(s){return s.id===n})?a=o.filter(function(s){return s.id!==n}):a=X(X([],F(o),!1),[ci(e)],!1),a},t.prototype.bindDataCellClick=function(){var e=this;this.spreadsheet.on(U.DATA_CELL_CLICK,function(n){n.stopPropagation();var i=e.spreadsheet.getCell(n.target),o=i.getMeta(),a=e.spreadsheet.interaction;if(e.isMultiSelection&&o){var s=e.getSelectedCells(i);if(se(s)){a.clearState(),e.spreadsheet.hideTooltip(),e.spreadsheet.emit(U.GLOBAL_SELECTED,a.getActiveCells());return}a.addIntercepts([Le.CLICK,Le.HOVER]),e.spreadsheet.hideTooltip(),a.changeState({cells:s,stateName:ce.SELECTED,onUpdateCells:Xp}),e.spreadsheet.emit(U.GLOBAL_SELECTED,a.getActiveCells()),e.spreadsheet.showTooltipWithInfo(n,qp(e.spreadsheet))}})},t}(qn),nV=function(){function r(t){var e=this;this.canvasEventHandlers=[],this.s2EventHandlers=[],this.domEventListeners=[],this.isCanvasEffect=!1,this.isGuiIconShape=function(n){return n instanceof jx&&n.imgType===bp.type},this.isConditionIconShape=function(n,i){return i.getConditionIconShapes().some(function(o){var a;return(o==null?void 0:o.name)===((a=n==null?void 0:n.attributes)===null||a===void 0?void 0:a.name)})},this.onCanvasMousedown=function(n){if(e.target=n.target,e.spreadsheet.interaction.clearHoverTimer(),e.isResizeArea(n)){e.spreadsheet.emit(U.LAYOUT_RESIZE_MOUSE_DOWN,n);var i=function(a){if(!e.spreadsheet.getCanvasElement())return!1;e.spreadsheet.getCanvasElement()!==a.target&&e.spreadsheet.emit(U.LAYOUT_RESIZE_MOUSE_MOVE,a)};window.addEventListener(Xe.POINTER_MOVE,i),window.addEventListener(Xe.POINTER_UP,function(){window.removeEventListener(Xe.POINTER_MOVE,i)},{once:!0});return}var o=e.spreadsheet.getCellType(n.target);switch(o){case ie.DATA_CELL:e.spreadsheet.emit(U.DATA_CELL_MOUSE_DOWN,n);break;case ie.ROW_CELL:e.spreadsheet.emit(U.ROW_CELL_MOUSE_DOWN,n);break;case ie.COL_CELL:e.spreadsheet.emit(U.COL_CELL_MOUSE_DOWN,n);break;case ie.CORNER_CELL:e.spreadsheet.emit(U.CORNER_CELL_MOUSE_DOWN,n);break;case ie.MERGED_CELL:e.spreadsheet.emit(U.MERGED_CELLS_MOUSE_DOWN,n);break}},this.onCanvasMousemove=function(n){if(e.canvasMousemoveEvent=n,e.isResizeArea(n)){e.activeResizeArea(n),e.spreadsheet.emit(U.LAYOUT_RESIZE_MOUSE_MOVE,n.nativeEvent);return}e.resetResizeArea();var i=e.spreadsheet.getCell(n.target);if(i){var o=i.cellType;switch(o){case ie.DATA_CELL:e.spreadsheet.emit(U.DATA_CELL_MOUSE_MOVE,n);break;case ie.ROW_CELL:e.spreadsheet.emit(U.ROW_CELL_MOUSE_MOVE,n);break;case ie.COL_CELL:e.spreadsheet.emit(U.COL_CELL_MOUSE_MOVE,n);break;case ie.CORNER_CELL:e.spreadsheet.emit(U.CORNER_CELL_MOUSE_MOVE,n);break;case ie.MERGED_CELL:e.spreadsheet.emit(U.MERGED_CELLS_MOUSE_MOVE,n);break}if(!e.hasBrushSelectionIntercepts())switch(e.spreadsheet.emit(U.GLOBAL_HOVER,n),o){case ie.DATA_CELL:e.spreadsheet.emit(U.DATA_CELL_HOVER,n);break;case ie.ROW_CELL:e.spreadsheet.emit(U.ROW_CELL_HOVER,n);break;case ie.COL_CELL:e.spreadsheet.emit(U.COL_CELL_HOVER,n);break;case ie.CORNER_CELL:e.spreadsheet.emit(U.CORNER_CELL_HOVER,n);break;case ie.MERGED_CELL:e.spreadsheet.emit(U.MERGED_CELLS_HOVER,n);break}}},this.onCanvasMouseup=function(n){if(e.isResizeArea(n)){e.spreadsheet.emit(U.LAYOUT_RESIZE_MOUSE_UP,n);return}var i=e.spreadsheet.getCell(n.target);if(i){var o=i.cellType;if(e.target===n.target){if(e.isGuiIconShape(n.target)&&!e.isConditionIconShape(n.target,i))return;switch(o){case ie.DATA_CELL:e.spreadsheet.emit(U.DATA_CELL_CLICK,n);break;case ie.ROW_CELL:e.spreadsheet.emit(U.ROW_CELL_CLICK,n);break;case ie.COL_CELL:e.spreadsheet.emit(U.COL_CELL_CLICK,n);break;case ie.CORNER_CELL:e.spreadsheet.emit(U.CORNER_CELL_CLICK,n);break;case ie.MERGED_CELL:e.spreadsheet.emit(U.MERGED_CELLS_CLICK,n);break}}switch(o){case ie.DATA_CELL:e.spreadsheet.emit(U.DATA_CELL_MOUSE_UP,n);break;case ie.ROW_CELL:e.spreadsheet.emit(U.ROW_CELL_MOUSE_UP,n);break;case ie.COL_CELL:e.spreadsheet.emit(U.COL_CELL_MOUSE_UP,n);break;case ie.CORNER_CELL:e.spreadsheet.emit(U.CORNER_CELL_MOUSE_UP,n);break;case ie.MERGED_CELL:e.spreadsheet.emit(U.MERGED_CELLS_MOUSE_UP,n);break}}},this.onCanvasClick=function(n){e.spreadsheet.emit(U.GLOBAL_CLICK,n),Tt()&&e.onCanvasMouseup(n),n.detail===2&&e.onCanvasDoubleClick(n)},this.onCanvasDoubleClick=function(n){var i=e.spreadsheet;if(e.isResizeArea(n)){i.emit(U.LAYOUT_RESIZE_MOUSE_UP,n);return}i.emit(U.GLOBAL_DOUBLE_CLICK,n);var o=i.getCell(n.target);if(o){var a=o.cellType;if(e.target===n.target)switch(a){case ie.DATA_CELL:i.emit(U.DATA_CELL_DOUBLE_CLICK,n);break;case ie.ROW_CELL:i.emit(U.ROW_CELL_DOUBLE_CLICK,n);break;case ie.COL_CELL:i.emit(U.COL_CELL_DOUBLE_CLICK,n);break;case ie.CORNER_CELL:i.emit(U.CORNER_CELL_DOUBLE_CLICK,n);break;case ie.MERGED_CELL:i.emit(U.MERGED_CELLS_DOUBLE_CLICK,n);break}}},this.onCanvasMouseout=function(n){if(!(!e.isAutoResetSheetStyle||e.isMouseOnTheCanvasContainer(n))){var i=e.spreadsheet.interaction;!i.isSelectedState()&&!(i.intercepts.size>0)&&i.reset()}},this.onCanvasContextMenu=function(n){var i=e.spreadsheet;if(e.isResizeArea(n)){i.emit(U.LAYOUT_RESIZE_MOUSE_UP,n);return}i.emit(U.GLOBAL_CONTEXT_MENU,n);var o=e.spreadsheet.getCellType(n.target);switch(o){case ie.DATA_CELL:e.spreadsheet.emit(U.DATA_CELL_CONTEXT_MENU,n);break;case ie.ROW_CELL:e.spreadsheet.emit(U.ROW_CELL_CONTEXT_MENU,n);break;case ie.COL_CELL:e.spreadsheet.emit(U.COL_CELL_CONTEXT_MENU,n);break;case ie.CORNER_CELL:e.spreadsheet.emit(U.CORNER_CELL_CONTEXT_MENU,n);break;case ie.MERGED_CELL:e.spreadsheet.emit(U.MERGED_CELLS_CONTEXT_MENU,n);break}},this.spreadsheet=t,this.bindEvents()}return Object.defineProperty(r.prototype,"canvasContainer",{get:function(){return this.spreadsheet.container},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isAutoResetSheetStyle",{get:function(){var t;return(t=this.spreadsheet.options.interaction)===null||t===void 0?void 0:t.autoResetSheetStyle},enumerable:!1,configurable:!0}),r.prototype.bindEvents=function(){var t=this;this.clearAllEvents(),this.addCanvasEvent(Xe.CLICK,this.onCanvasClick),this.addCanvasEvent(Xe.MOUSE_DOWN,this.onCanvasMousedown),this.addCanvasEvent(Xe.TOUCH_START,function(e){t.target=e.target}),this.addCanvasEvent(Xe.POINTER_MOVE,this.onCanvasMousemove),this.addCanvasEvent(Xe.MOUSE_OUT,this.onCanvasMouseout),this.addCanvasEvent(Xe.POINTER_UP,this.onCanvasMouseup),this.addCanvasEvent(Xe.RIGHT_DOWN,this.onCanvasContextMenu),this.addS2Event(U.GLOBAL_ACTION_ICON_CLICK,function(){t.spreadsheet.interaction.addIntercepts([Le.HOVER]),t.spreadsheet.interaction.clearState()}),this.addDomEventListener(window,Xe.CLICK,function(e){t.resetSheetStyle(e),t.isCanvasEffect=t.isMouseOnTheCanvasContainer(e)}),this.addDomEventListener(window,Xe.KEY_DOWN,function(e){t.onKeyboardCopy(e),t.onKeyboardEsc(e),t.spreadsheet.emit(U.GLOBAL_KEYBOARD_DOWN,e)}),this.addDomEventListener(window,Xe.KEY_UP,function(e){t.spreadsheet.emit(U.GLOBAL_KEYBOARD_UP,e)}),this.addDomEventListener(window,Xe.POINTER_UP,function(e){t.spreadsheet.emit(U.GLOBAL_MOUSE_UP,e)}),this.addDomEventListener(window,Xe.POINTER_MOVE,function(e){t.spreadsheet.emit(U.GLOBAL_MOUSE_MOVE,e)})},r.prototype.onKeyboardCopy=function(t){var e=this.spreadsheet.options.interaction.copy;if(this.isCanvasEffect&&(e==null?void 0:e.enable)&&Nm(t.key,ur.COPY)&&(t.metaKey||t.ctrlKey)){var n=ez(this.spreadsheet);Lt(n)||this.spreadsheet.emit(U.GLOBAL_COPIED,n)}},r.prototype.onKeyboardEsc=function(t){this.isCanvasEffect&&Nm(t.key,ur.ESC)&&this.resetSheetStyle(t)},r.prototype.resetSheetStyle=function(t){var e,n;if(!(!this.isAutoResetSheetStyle||!this.spreadsheet)){var i=this.spreadsheet.interaction;if(!((e=i==null?void 0:i.hasIntercepts)===null||e===void 0)&&e.call(i,[Le.DATA_CELL_BRUSH_SELECTION,Le.COL_CELL_BRUSH_SELECTION,Le.ROW_CELL_BRUSH_SELECTION])){(n=i==null?void 0:i.removeIntercepts)===null||n===void 0||n.call(i,[Le.DATA_CELL_BRUSH_SELECTION,Le.ROW_CELL_BRUSH_SELECTION,Le.COL_CELL_BRUSH_SELECTION]);return}this.isMouseOnTheTooltip(t)||this.isMouseOnTheCanvasContainer(t)||(i.reset(),this.spreadsheet.emit(U.GLOBAL_RESET,t),this.spreadsheet.emit(U.GLOBAL_SELECTED,i.getActiveCells()))}},r.prototype.isMouseEvent=function(t){return Za(t,"clientX")&&Za(t,"clientY")},r.prototype.isMatchElement=function(t){var e=this.spreadsheet.getCanvasElement(),n=t.target;return n===e||n instanceof Gr||n instanceof kc},r.prototype.isMatchPoint=function(t){var e=this.spreadsheet.getCanvasElement(),n=this.getContainerRect(),i=n.width,o=n.height,a=e.getBoundingClientRect()||{},s=a.x,l=a.y,u=t.clientX,d=t.clientY;return u<=s+i&&u>=s&&d<=l+o&&d>=l},r.prototype.isMouseOnTheCanvasContainer=function(t){if(this.isMouseEvent(t)){var e=this.spreadsheet.getCanvasElement();return e?this.isMatchElement(t)&&this.isMatchPoint(t):!1}return!1},r.prototype.getContainerRect=function(){var t,e=this.spreadsheet,n=e.facet,i=e.options,o=(n==null?void 0:n.hRowScrollBar)||(n==null?void 0:n.hScrollBar),a=(n==null?void 0:n.panelBBox)||{},s=a.maxX,l=a.maxY,u=i.width,d=u===void 0?0:u,h=i.height,v=h===void 0?0:h,p=((t=o==null?void 0:o.theme)===null||t===void 0?void 0:t.size)||0;return{width:Math.min(d,s),height:Math.min(v,l+p)}},r.prototype.isMouseOnTheTooltip=function(t){var e,n,i,o,a=this.spreadsheet.tooltip;if(!(a!=null&&a.visible))return!1;var s=((i=(n=(e=this.spreadsheet.tooltip)===null||e===void 0?void 0:e.container)===null||n===void 0?void 0:n.getBoundingClientRect)===null||i===void 0?void 0:i.call(n))||{},l=s.x,u=s.y,d=s.width,h=s.height;return t.target instanceof Node?cW((o=this.spreadsheet.tooltip)===null||o===void 0?void 0:o.container,t.target):this.isMouseEvent(t)?t.clientX>=l&&t.clientX<=l+d&&t.clientY>=u&&t.clientY<=u+h:!1},r.prototype.isResizeArea=function(t){var e=E_(t.target);return e==null?void 0:e.isResizeArea},r.prototype.activeResizeArea=function(t){var e,n,i,o=ze(t.target,"attrs.appendInfo");if(!(o!=null&&o.isResizeMask)){this.resetResizeArea();var a=t.target;this.spreadsheet.store.set("activeResizeArea",a),a.attr(Qr.backgroundOpacity,(i=(n=(e=this.spreadsheet.theme.resizeArea)===null||e===void 0?void 0:e.interactionState)===null||n===void 0?void 0:n.hover)===null||i===void 0?void 0:i.backgroundOpacity)}},r.prototype.resetResizeArea=function(){var t,e=this.spreadsheet.store.get("activeResizeArea");se(e)||e.attr(Qr.backgroundOpacity,(t=this.spreadsheet.theme.resizeArea)===null||t===void 0?void 0:t.backgroundOpacity),this.spreadsheet.store.set("activeResizeArea",e)},r.prototype.hasBrushSelectionIntercepts=function(){return this.spreadsheet.interaction.hasIntercepts([Le.HOVER,Le.DATA_CELL_BRUSH_SELECTION,Le.ROW_CELL_BRUSH_SELECTION,Le.COL_CELL_BRUSH_SELECTION])},r.prototype.clear=function(){this.unbindEvents()},r.prototype.unbindEvents=function(){this.clearAllEvents()},r.prototype.addCanvasEvent=function(t,e){var n;(n=this.canvasContainer)===null||n===void 0||n.on(t,e),this.canvasEventHandlers.push({type:t,handler:e})},r.prototype.addS2Event=function(t,e){this.spreadsheet.on(t,e),this.s2EventHandlers.push({type:t,handler:e})},r.prototype.addDomEventListener=function(t,e,n){if(t.addEventListener){var i=this.spreadsheet.options.interaction.eventListenerOptions;t.addEventListener(e,n,i),this.domEventListeners.push({target:t,type:e,handler:n,options:i})}else console.error("Please make sure ".concat(t," has addEventListener function"))},r.prototype.clearAllEvents=function(){var t=this;Me(this.canvasEventHandlers,function(e){var n,i=e.type,o=e.handler;(n=t.canvasContainer)===null||n===void 0||n.removeEventListener(i,o)}),Me(this.s2EventHandlers,function(e){var n=e.type,i=e.handler;t.spreadsheet.off(n,i)}),Me(this.domEventListeners,function(e){e.target.removeEventListener(e.type,e.handler,e.options)}),this.canvasEventHandlers=[],this.s2EventHandlers=[],this.domEventListeners=[]},r.prototype.getViewportPoint=function(t){var e=this.spreadsheet.getCanvasConfig();return e.supportsCSSTransform&&!Lt(t.offsetX)&&!Lt(t.offsetY)?{x:t.offsetX,y:t.offsetY}:this.spreadsheet.container.client2Viewport({x:t.clientX,y:t.clientY})},r}(),iV=function(r){oe(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.isRangeSelection=!1,e.handleColClick=function(n){n.stopPropagation();var i=e.spreadsheet,o=i.interaction,a=i.facet,s=e.spreadsheet.getCell(n.target),l=s==null?void 0:s.getMeta();if(!Lt(l==null?void 0:l.x)){o.addIntercepts([Le.HOVER]);var u=[ci(s)],d=e.spreadsheet.store.get("lastClickedCell");if(e.isRangeSelection&&d&&d.cellType===s.cellType&&d.getMeta().level===l.level){var h=a.getLayoutResult(),v=h.rowsHierarchy,p=h.colsHierarchy,g=F([v.maxLevel,p.maxLevel],2),m=g[0],C=g[1],w=mv(d.getMeta(),l),_=w.start,S=w.end;s instanceof Qo?u=e.handleSeriesNumberRowSelected(_.rowIndex,S.rowIndex,s):(s==null?void 0:s.cellType)===ie.ROW_CELL&&l.level===m?u=e.handleRowSelected(_.rowIndex,S.rowIndex,s):(s==null?void 0:s.cellType)===ie.COL_CELL&&l.level===C&&(u=e.handleColSelected(_.colIndex,S.colIndex,s)),o.changeState({cells:u,stateName:ce.SELECTED})}else se(o.getCells())&&o.removeIntercepts([Le.HOVER]),e.spreadsheet.store.set("lastClickedCell",s);var b=u.map(function(T){var E=T.id;return E});o.updateCells(a.getHeaderCells(b)),e.spreadsheet.emit(U.GLOBAL_SELECTED,o.getActiveCells())}},e}return t.prototype.bindEvents=function(){this.bindKeyboardDown(),this.bindDataCellClick(),this.bindColCellClick(),this.bindKeyboardUp(),this.bindMouseMove()},t.prototype.reset=function(){this.isRangeSelection=!1,this.spreadsheet.interaction.removeIntercepts([Le.CLICK])},t.prototype.bindKeyboardDown=function(){var e=this;this.spreadsheet.on(U.GLOBAL_KEYBOARD_DOWN,function(n){n.key===ur.SHIFT&&(e.isRangeSelection=!0,e.spreadsheet.interaction.addIntercepts([Le.CLICK]))})},t.prototype.bindKeyboardUp=function(){var e=this;this.spreadsheet.on(U.GLOBAL_KEYBOARD_UP,function(n){n.key===ur.SHIFT&&e.reset()})},t.prototype.bindMouseMove=function(){var e=this;this.spreadsheet.on(U.GLOBAL_MOUSE_MOVE,function(n){e.isRangeSelection&&!n.shiftKey&&e.reset()})},t.prototype.bindColCellClick=function(){var e=this;this.spreadsheet.isTableMode()&&this.spreadsheet.on(U.ROW_CELL_CLICK,function(n){e.handleColClick(n)}),this.spreadsheet.on(U.COL_CELL_CLICK,function(n){e.handleColClick(n)})},t.prototype.bindDataCellClick=function(){var e=this;this.spreadsheet.on(U.DATA_CELL_CLICK,function(n){n.stopPropagation();var i=e.spreadsheet.getCell(n.target),o=i.getMeta(),a=e.spreadsheet.interaction;if(!!o){var s=e.spreadsheet.store.get("lastClickedCell"),l=e.isRangeSelection&&(s==null?void 0:s.cellType)===i.cellType;if(!l){e.spreadsheet.store.set("lastClickedCell",i);return}var u=mv(s.getMeta(),i.getMeta()),d=u.start,h=u.end,v=Ys(d.colIndex,h.colIndex+1).flatMap(function(p){var g=e.spreadsheet.facet.getColLeafNodes()[p].id;return Ys(d.rowIndex,h.rowIndex+1).map(function(m){var C=e.spreadsheet.facet.getSeriesNumberWidth()||e.spreadsheet.isTableMode()?String(m):e.spreadsheet.facet.getRowLeafNodes()[m].id;return{id:"".concat(C,"-").concat(g),colIndex:p,rowIndex:m,type:i.cellType}})});a.addIntercepts([Le.CLICK,Le.HOVER]),a.changeState({cells:v,stateName:ce.SELECTED}),e.spreadsheet.showTooltipWithInfo(n,qp(e.spreadsheet)),e.spreadsheet.emit(U.GLOBAL_SELECTED,a.getActiveCells())}})},t.prototype.handleSeriesNumberRowSelected=function(e,n,i){var o=this.spreadsheet.facet.getColLeafNodes()[0].id;return Ys(e,n+1).map(function(a){var s=String(a);return{id:"".concat(s,"-").concat(o),colIndex:0,rowIndex:a,type:i.cellType}})},t.prototype.handleRowSelected=function(e,n,i){return this.spreadsheet.facet.getRowNodes().filter(function(o){var a=o.rowIndex;return dm(a,e,n+1)}).map(function(o){return{id:o.id,colIndex:o.colIndex,rowIndex:o.rowIndex,type:i.cellType}})},t.prototype.handleColSelected=function(e,n,i){return this.spreadsheet.facet.getColLeafNodes().filter(function(o){var a=o.colIndex;return dm(a,e,n+1)}).map(function(o){return{id:o.id,colIndex:o.colIndex,rowIndex:o.rowIndex,type:i.cellType}})},t}(qn),oV=function(r){oe(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.resizeStartPosition={},e}return t.prototype.bindEvents=function(){this.bindMouseDown(),this.bindMouseMove(),this.bindMouseUp()},t.prototype.initResizeGroup=function(){if(!this.resizeReferenceGroup){this.resizeReferenceGroup=this.spreadsheet.facet.foregroundGroup.appendChild(new ft);var e=this.spreadsheet.options,n=e.width,i=e.height,o=this.getResizeAreaTheme(),a=o.guideLineColor,s=o.guideLineDash,l=o.size,u={path:"",lineDash:s,stroke:a,lineWidth:l};this.resizeReferenceGroup.appendChild(new Fc({id:A6,style:u})),this.resizeReferenceGroup.appendChild(new Fc({id:N6,style:u})),this.resizeReferenceGroup.appendChild(new ja({id:P6,style:{x:0,y:0,width:n,height:i,fill:"transparent"}},{isResizeArea:!0,isResizeMask:!0}))}},t.prototype.getResizeAreaTheme=function(){return this.spreadsheet.theme.resizeArea},t.prototype.setResizeTarget=function(e){this.resizeTarget=e},t.prototype.getGuideLineWidthAndHeight=function(){var e=this.spreadsheet.options,n=e.width,i=e.height,o=this.spreadsheet.facet.panelBBox,a=o.maxY,s=o.maxX,l=Math.min(s,n),u=Math.min(a,i);return{width:l,height:u}},t.prototype.getResizeShapes=function(){var e;return((e=this.resizeReferenceGroup)===null||e===void 0?void 0:e.children)||[]},t.prototype.setResizeMaskCursor=function(e){var n=F(this.getResizeShapes(),3),i=n[2];i==null||i.attr("cursor",e)},t.prototype.updateResizeGuideLinePosition=function(e,n){var i=this.getResizeShapes();if(!se(i)){var o=F(i,2),a=o[0],s=o[1],l=n.type,u=n.offsetX,d=n.offsetY,h=n.width,v=n.height,p=n.size,g=this.getGuideLineWidthAndHeight(),m=g.width,C=g.height;this.cursorType="".concat(l,"-resize"),this.setResizeMaskCursor(this.cursorType);var w=p/2;if(l===sr.Horizontal){a.attr("path",[["M",u+w,d],["L",u+w,C]]),s.attr("path",[["M",u+h-w,d],["L",u+h-w,C]]),this.resizeStartPosition.offsetX=e.offsetX,this.resizeStartPosition.clientX=e.clientX;return}a.attr("path",[["M",u,d+w],["L",m,d+w]]),s.attr("path",[["M",u,d+v-w],["L",m,d+v-w]]),this.resizeStartPosition.offsetY=e.offsetY,this.resizeStartPosition.clientY=e.clientY}},t.prototype.bindMouseDown=function(){var e=this;this.spreadsheet.on(U.LAYOUT_RESIZE_MOUSE_DOWN,function(n){var i=n.target,o=e.getCellAppendInfo(n.target);e.spreadsheet.store.set("resized",!1),o!=null&&o.isResizeArea&&(e.spreadsheet.hideTooltip(),e.spreadsheet.interaction.addIntercepts([Le.RESIZE]),e.setResizeTarget(i),e.showResizeGroup(),e.updateResizeGuideLinePosition(n,o))})},t.prototype.bindMouseMove=function(){this.spreadsheet.on(U.LAYOUT_RESIZE_MOUSE_MOVE,kx(this.resizeMouseMove.bind(this),33))},t.prototype.getResizeGuideLinePosition=function(){var e,n=F(((e=this.resizeReferenceGroup)===null||e===void 0?void 0:e.children)||[],2),i=n[0],o=n[1],a=(i==null?void 0:i.attr("path"))||[],s=(o==null?void 0:o.attr("path"))||[],l=F(a[0]||[],3),u=l[1],d=u===void 0?0:u,h=l[2],v=h===void 0?0:h,p=F(s[0]||[],3),g=p[1],m=g===void 0?0:g,C=p[2],w=C===void 0?0:C;return{start:{x:+d,y:+v},end:{x:+m,y:+w}}},t.prototype.getDisAllowResizeInfo=function(){var e,n=this.getResizeInfo(),i=this.spreadsheet.options.interaction.resize,o=n.width,a=n.height,s=n.resizedWidth,l=s===void 0?0:s,u=n.resizedHeight,d=u===void 0?0:u,h=(e=i==null?void 0:i.disable)===null||e===void 0?void 0:e.call(i,n),v=h?o:l,p=h?a:d;return{displayWidth:v,displayHeight:p,isDisabled:h}},t.prototype.getResizeCellField=function(e){var n,i,o,a,s,l=e.type===sr.Vertical,u=l?!this.isEffectRowOf(ti.ALL):!this.isEffectColOf(ti.ALL);return this.spreadsheet.isTableMode()?l?((n=e==null?void 0:e.meta)===null||n===void 0?void 0:n.rowId)||String((i=e==null?void 0:e.meta)===null||i===void 0?void 0:i.rowIndex):(o=e==null?void 0:e.meta)===null||o===void 0?void 0:o.field:u?(a=e==null?void 0:e.meta)===null||a===void 0?void 0:a.id:(s=e==null?void 0:e.meta)===null||s===void 0?void 0:s.field},t.prototype.isEffectRowOf=function(e){var n,i;return((i=(n=this.spreadsheet.options.interaction)===null||n===void 0?void 0:n.resize)===null||i===void 0?void 0:i.rowResizeType)===e},t.prototype.isEffectColOf=function(e){var n,i;return((i=(n=this.spreadsheet.options.interaction)===null||n===void 0?void 0:n.resize)===null||i===void 0?void 0:i.colResizeType)===e},t.prototype.getCellStyleByField=function(e){var n,i=this,o=this.spreadsheet.interaction,a=this.getResizeInfo(),s=a.type===sr.Vertical,l=s?o.getActiveRowCells():o.getActiveColCells(),u=o.isSelectedState()&&l.length>1;return!this.isEffectRowOf(ti.SELECTED)||!this.isEffectColOf(ti.SELECTED)||!u?(n={},n[this.getResizeCellField(a)]=e,n):l.reduce(function(d,h){return Ft.getAllLeaveNodes(h.getMeta()).forEach(function(v){var p=N(N({},a),{meta:v});d[i.getResizeCellField(p)]=e}),d},{})},t.prototype.getResizeWidthDetail=function(){var e,n=this.getResizeInfo(),i=this.getDisAllowResizeInfo().displayWidth;switch(n.effect){case mr.Field:return{eventType:U.LAYOUT_RESIZE_ROW_WIDTH,style:{rowCell:{widthByField:(e={},e[n.meta.field]=i,e)}}};case mr.Tree:return{eventType:U.LAYOUT_RESIZE_TREE_WIDTH,style:{rowCell:{width:i}}};case mr.Cell:return{eventType:U.LAYOUT_RESIZE_COL_WIDTH,style:{colCell:{width:this.isEffectColOf(ti.ALL)?i:null,widthByField:this.getCellStyleByField(i)}}};case mr.Series:return{eventType:U.LAYOUT_RESIZE_SERIES_WIDTH,seriesNumberWidth:i};default:return null}},t.prototype.getResizeHeightDetail=function(){var e=this.getResizeInfo(),n=this.getDisAllowResizeInfo().displayHeight;switch(e.effect){case mr.Field:return{eventType:U.LAYOUT_RESIZE_COL_HEIGHT,style:{colCell:{heightByField:this.getHeightByField(e,n)}}};case mr.Cell:return{eventType:U.LAYOUT_RESIZE_ROW_HEIGHT,style:{rowCell:{height:this.isEffectRowOf(ti.ALL)?n:null,heightByField:this.getCellStyleByField(n)}}};default:return null}},t.prototype.getHeightByField=function(e,n){var i;return this.spreadsheet.isCustomColumnFields()||this.spreadsheet.isTableMode()?this.spreadsheet.facet.getColNodes().filter(function(o){var a,s;return o.level===((a=e.meta)===null||a===void 0?void 0:a.level)&&o.height===((s=e.meta)===null||s===void 0?void 0:s.height)}).reduce(function(o,a){return o[a.field]=n,o},{}):(i={},i[e.meta.field]=n,i)},t.prototype.getResizeDetail=function(){var e=this.getResizeInfo();return e.type===sr.Horizontal?this.getResizeWidthDetail():this.getResizeHeightDetail()},t.prototype.showResizeGroup=function(){var e;this.initResizeGroup(),(e=this.resizeReferenceGroup)===null||e===void 0||e.setAttribute("visibility","visible")},t.prototype.hideResizeGroup=function(){var e;(e=this.resizeReferenceGroup)===null||e===void 0||e.setAttribute("visibility","hidden")},t.prototype.bindMouseUp=function(){var e=this;this.spreadsheet.on(U.GLOBAL_MOUSE_UP,function(){var n;e.cursorType="default",e.setResizeMaskCursor(e.cursorType),!(!e.resizeReferenceGroup||se((n=e.resizeReferenceGroup)===null||n===void 0?void 0:n.children))&&(e.hideResizeGroup(),e.renderResizedResult())})},t.prototype.resizeMouseMove=function(e){var n,i;if(((n=this.resizeReferenceGroup)===null||n===void 0?void 0:n.parsedStyle.visibility)==="visible"){var o=this.getResizeInfo(),a=((i=this.resizeReferenceGroup)===null||i===void 0?void 0:i.children)||[];if(!se(a)){var s=F(a,2),l=s[1],u=F(td(l.attr("path")),2),d=u[0],h=u[1];o.type===sr.Horizontal?this.updateHorizontalResizingEndGuideLinePosition(e.offsetX,o,{start:d,end:h}):this.updateVerticalResizingEndGuideLinePosition(e.offsetY,o,{start:d,end:h}),this.updateResizeGuideLineTheme(l),l.attr("path",[d,h])}}},t.prototype.updateResizeGuideLineTheme=function(e){var n=this.getResizeAreaTheme(),i=n.guideLineColor,o=n.guideLineDisableColor,a=this.getDisAllowResizeInfo().isDisabled;e.attr("stroke",a?o:i),this.setResizeMaskCursor(a?"no-drop":this.cursorType)},t.prototype.updateHorizontalResizingEndGuideLinePosition=function(e,n,i){var o,a,s=(((o=this.spreadsheet.options.interaction)===null||o===void 0?void 0:o.resize)||{}).minCellWidth,l=s===void 0?Xx:s,u=e-this.resizeStartPosition.offsetX;n.width+u<l&&(u=-(n.width-l));var d=n.offsetX+n.width+u,h=n.size/2;i.start[1]=d-h,i.end[1]=d-h,(a=this.resizeTarget)===null||a===void 0||a.attr({x:d-n.size})},t.prototype.updateVerticalResizingEndGuideLinePosition=function(e,n,i){var o,a,s=(((o=this.spreadsheet.options.interaction)===null||o===void 0?void 0:o.resize)||{}).minCellHeight,l=s===void 0?$x:s,u=e-this.resizeStartPosition.offsetY;n.height+u<l&&(u=-(n.height-l));var d=n.offsetY+n.height+u,h=n.size/2;i.start[2]=d-h,i.end[2]=d-h,(a=this.resizeTarget)===null||a===void 0||a.attr({y:d-n.size})},t.prototype.renderResizedResult=function(){var e=this.getResizeInfo(),n=this.getResizeDetail()||{},i=n.style,o=n.seriesNumberWidth,a=n.eventType,s={info:e,style:i};this.spreadsheet.emit(U.LAYOUT_RESIZE,s),this.spreadsheet.emit(a,s),i&&this.spreadsheet.setOptions({style:i}),o&&this.spreadsheet.setTheme({rowCell:{seriesNumberWidth:o}}),this.spreadsheet.store.set("resized",!0),this.render()},t.prototype.getResizeInfo=function(){var e=this.getCellAppendInfo(this.resizeTarget),n=this.getResizeGuideLinePosition(),i=n.start,o=n.end,a=Ke(o.x-i.x+(e.type===sr.Horizontal?e.size:0)),s=Ke(o.y-i.y+(e.type===sr.Vertical?e.size:0));return N(N({},e),{resizedWidth:a,resizedHeight:s})},t.prototype.render=function(){this.resizeStartPosition={},this.resizeTarget=null,this.resizeReferenceGroup=null,this.spreadsheet.render(!1)},t}(qn),aV=[ur.ARROW_LEFT,ur.ARROW_RIGHT,ur.ARROW_UP,ur.ARROW_DOWN],sV=function(r){oe(t,r);function t(e){return r.call(this,e)||this}return t.prototype.isCanvasEffect=function(){return this.spreadsheet.interaction.eventController.isCanvasEffect},t.prototype.bindEvents=function(){var e=this;this.spreadsheet.on(U.GLOBAL_KEYBOARD_DOWN,function(n){if(!!e.isCanvasEffect()){var i=n.shiftKey,o=n.metaKey,a=aV.includes(n.key),s=!1,l=!1,u=!1;a&&(o&&i?(s=!1,l=!0,u=!1):o?(s=!0,l=!0,u=!0):i?(s=!1,l=!1,u=!1):(s=!0,l=!1,u=!0),e.handleMove({event:n,changeStartCell:s,isJumpMode:l,isSingleSelection:u}))}}),this.spreadsheet.on(U.DATA_CELL_CLICK,function(n){var i=e.spreadsheet.getCell(n.target),o=i==null?void 0:i.getMeta();o&&(e.startCell=e.getCellMetaByViewMeta(o),e.endCell=e.startCell)})},t.prototype.getCellMetaByViewMeta=function(e){return{rowIndex:e.rowIndex,colIndex:e.colIndex,id:e.id,type:ie.DATA_CELL}},t.prototype.handleMove=function(e){var n=e.event,i=e.changeStartCell,o=e.isJumpMode,a=e.isSingleSelection,s=this,l=s.spreadsheet,u=s.startCell,d=s.endCell,h=i?u:d,v=this.getMoveInfo(n.key,h,o);if(!!v){var p=F([v.row,v.col],2),g=p[0],m=p[1];this.scrollToActiveCell(l,g,m);var C=this.generateCellMeta(l,g,m),w=a?[C]:this.getRangeCells(l,u,C);KG(l,w),i&&(this.startCell=C),this.endCell=C,this.spreadsheet.emit(U.DATA_CELL_SELECT_MOVE,w)}},t.prototype.generateCellMeta=function(e,n,i){var o=e.isTableMode,a=e.facet,s=a.getRowLeafNodes(),l=a.getColLeafNodes(),u=o()?String(n):s[n].id,d=l[i].id;return{rowIndex:n,colIndex:i,id:Ml(u,d),type:ie.DATA_CELL}},t.prototype.getRangeCells=function(e,n,i){for(var o=mv(n,i),a=o.start,s=a.rowIndex,l=a.colIndex,u=o.end,d=u.rowIndex,h=u.colIndex,v=[],p=s;p<=d;p++)for(var g=l;g<=h;g++)v.push(this.generateCellMeta(e,p,g));return v},t.prototype.getMoveInfo=function(e,n,i){var o=this.spreadsheet,a=o.options.frozen,s=a.rowCount,l=s===void 0?0:s,u=a.trailingRowCount,d=u===void 0?0:u,h=a.colCount,v=h===void 0?0:h,p=a.trailingColCount,g=p===void 0?0:p,m=o.facet.getRowLeafNodes(),C=o.facet.getColLeafNodes(),w=F([0+v,C.length-g-1],2),_=w[0],S=w[1],b=F([0+l,(o.isTableMode()?o.dataSet.getDisplayDataSet().length:m.length)-d-1],2),T=b[0],E=b[1];if(!!n)switch(e){case ur.ARROW_RIGHT:return n.colIndex+1>S?void 0:{row:n.rowIndex,col:i?S:n.colIndex+1};case ur.ARROW_LEFT:return n.colIndex-1<_?void 0:{row:n.rowIndex,col:i?_:n.colIndex-1};case ur.ARROW_UP:return n.rowIndex-1<T?void 0:{row:i?T:n.rowIndex-1,col:n.colIndex};case ur.ARROW_DOWN:return n.rowIndex+1>E?void 0:{row:i?E:n.rowIndex+1,col:n.colIndex}}},t.prototype.calculateOffset=function(e,n,i){var o=e.options.frozen,a=o.rowCount,s=a===void 0?0:a,l=o.trailingRowCount,u=l===void 0?0:l,d=e.facet,h=d.frozenColGroup,v=d.frozenTrailingColGroup,p=d.frozenRowGroup,g=d.frozenTrailingRowGroup,m=d.getColLeafNodes(),C=d.getScrollOffset(),w=C.scrollX,_=C.scrollY,S=d.panelBBox,b=S.viewportHeight,T=S.viewportWidth,E=ze(e,"theme.splitLine"),R=h?Ke(h.getBBox().width-E.verticalBorderWidth/2):0,O=v?Ke(v.getBBox().width):0,A=p?Ke(p.getBBox().height-E.horizontalBorderWidth/2):0,P=g?Ke(g.getBBox().height):0,D=b_({scrollX:w,scrollY:_,widths:d.viewCellWidths,heights:d.viewCellHeights,viewport:{width:T-R-O,height:b-A-P,x:R,y:A},rowRemainWidth:d.getRealScrollX(d.cornerBBox.width)}),k=-1,z=-1,V=m.find(function(Q){return Q.colIndex===i});if(i<=D[0]?k=(V==null?void 0:V.x)-R:i>=D[1]&&i<m.length-u&&(k=(V==null?void 0:V.x)+(V==null?void 0:V.width)-T+O),n<=D[2])z=d.viewCellHeights.getCellOffsetY(n-s);else if(n>=D[3]){var Z=d.viewCellHeights.getCellOffsetY(n+1);z=Z+P-b}return{offsetX:k,offsetY:z}},t.prototype.scrollToActiveCell=function(e,n,i){var o=this.calculateOffset(e,n,i),a=o.offsetX,s=o.offsetY,l=e.facet,u=e.facet.getScrollOffset(),d=u.scrollX,h=u.scrollY;l.scrollWithAnimation({offsetX:{value:a>-1?a:d},offsetY:{value:s>-1?s:h}})},t}(qn),lV=function(){function r(t){var e=this;this.interactions=new Map,this.intercepts=new Set,this.hoverTimer=null,this.defaultState={cells:[],force:!1},this.onTriggerInteractionsResetEffect=function(){e.interactions.forEach(function(n){n.reset()})},this.selectAll=function(){e.changeState({stateName:ce.ALL_SELECTED})},this.selectHeaderCell=function(n){var i;n===void 0&&(n={});var o=n.cell;if(!se(o)){var a=(i=o==null?void 0:o.getMeta)===null||i===void 0?void 0:i.call(o);if(!(!a||Lt(a==null?void 0:a.x))){e.addIntercepts([Le.HOVER]);var s=e.spreadsheet.isHierarchyTreeType(),l=(o==null?void 0:o.cellType)===ie.COL_CELL,u=e.getState(),d=e.isSelectedCell(o),h=(n==null?void 0:n.isMultiSelection)&&e.isSelectedState(),v=d?[]:e.spreadsheet.facet.getCellChildrenNodes(o),p=d?[]:[ci(o)];if(h&&(p=lo((u==null?void 0:u.cells)||[],p),v=lo((u==null?void 0:u.nodes)||[],v),d&&(p=p.filter(function(C){var w=C.id;return w!==a.id}),v=v.filter(function(C){return!(C!=null&&C.id.includes(a.id))}))),se(p)){e.reset(),e.spreadsheet.emit(U.GLOBAL_SELECTED,e.getActiveCells());return}if(!(qH(p,"type").length>1)){var g=se(v)?[o.getMeta()]:v;e.changeState({cells:p,nodes:g,stateName:ce.SELECTED});var m=p.map(function(C){var w=C.id;return w});return e.updateCells(e.spreadsheet.facet.getHeaderCells(m)),(!s||l)&&e.highlightNodes(v),e.spreadsheet.emit(U.GLOBAL_SELECTED,e.getActiveCells()),!0}}}},this.highlightNodes=function(n){n===void 0&&(n=[]),n.forEach(function(i){var o;(o=i==null?void 0:i.belongsCell)===null||o===void 0||o.updateByState(ce.SELECTED,i.belongsCell)})},this.mergeCells=function(n,i){mz(e.spreadsheet,n,i)},this.unmergeCell=function(n){wz(e.spreadsheet,n)},this.spreadsheet=t,this.registerEventController(),this.registerInteractions(),window.addEventListener("visibilitychange",this.onTriggerInteractionsResetEffect)}return r.prototype.destroy=function(){this.interactions.clear(),this.intercepts.clear(),this.eventController.clear(),this.clearHoverTimer(),this.resetState(),window.removeEventListener("visibilitychange",this.onTriggerInteractionsResetEffect)},r.prototype.reset=function(){this.clearState(),this.clearHoverTimer(),this.intercepts.clear(),this.spreadsheet.hideTooltip()},r.prototype.setState=function(t){QG(this.spreadsheet,t)},r.prototype.getState=function(){return this.spreadsheet.store.get(rv)||this.defaultState},r.prototype.setInteractedCells=function(t){var e=this.getInteractedCells().concat([t]),n=this.getState();n.interactedCells=e,this.setState(n)},r.prototype.getInteractedCells=function(){var t=this.getState();return(t==null?void 0:t.interactedCells)||[]},r.prototype.resetState=function(){this.spreadsheet.store.set(rv,this.defaultState)},r.prototype.getCurrentStateName=function(){return this.getState().stateName},r.prototype.isEqualStateName=function(t){return this.getCurrentStateName()===t},r.prototype.isStateOf=function(t){var e=this.getState();return(e==null?void 0:e.stateName)===t},r.prototype.isSelectedState=function(){var t=this;return[ce.SELECTED,ce.ROW_CELL_BRUSH_SELECTED,ce.COL_CELL_BRUSH_SELECTED,ce.DATA_CELL_BRUSH_SELECTED].some(function(e){return t.isStateOf(e)})},r.prototype.isAllSelectedState=function(){return this.isStateOf(ce.ALL_SELECTED)},r.prototype.isHoverFocusState=function(){return this.isStateOf(ce.HOVER_FOCUS)},r.prototype.isHoverState=function(){return this.isStateOf(ce.HOVER)},r.prototype.isActiveCell=function(t){return!!this.getCells().find(function(e){return t.getMeta().id===e.id})},r.prototype.isSelectedCell=function(t){return this.isSelectedState()&&this.isActiveCell(t)},r.prototype.getCells=function(t){var e=this.getState(),n=(e==null?void 0:e.cells)||[];return Lt(t)?n:n.filter(function(i){return t.includes(i.type)})},r.prototype.getActiveCells=function(){var t,e=this.getCells().map(function(i){return i.id}),n=(t=this.spreadsheet.facet)===null||t===void 0?void 0:t.getCells();return De(e,function(i){return $t(n,function(o){var a;return((a=o==null?void 0:o.getMeta())===null||a===void 0?void 0:a.id)===i})}).filter(Boolean)},r.prototype.getActiveDataCells=function(){return this.getActiveCells().filter(function(t){return t.cellType===ie.DATA_CELL})},r.prototype.getActiveRowCells=function(){return this.getActiveCells().filter(function(t){return t.cellType===ie.ROW_CELL})},r.prototype.getActiveColCells=function(){return this.getActiveCells().filter(function(t){return t.cellType===ie.COL_CELL})},r.prototype.clearStyleIndependent=function(){!this.isSelectedState()&&!this.isHoverState()&&!this.isAllSelectedState()||this.spreadsheet.facet.getDataCells().forEach(function(t){t.hideInteractionShape()})},r.prototype.getUnSelectedDataCells=function(){var t=this;return this.spreadsheet.facet.getDataCells().filter(function(e){return!t.isActiveCell(e)})},r.prototype.hideColumns=function(t,e){return t===void 0&&(t=[]),e===void 0&&(e=!0),jt(this,void 0,void 0,function(){return er(this,function(n){switch(n.label){case 0:return[4,Vp(this.spreadsheet,t,e)];case 1:return n.sent(),[2]}})})},r.prototype.getBrushSelectionInfo=function(t){var e,n,i;return Ii(t)?{dataCellBrushSelection:t,rowCellBrushSelection:t,colCellBrushSelection:t}:{dataCellBrushSelection:(e=t==null?void 0:t.dataCell)!==null&&e!==void 0?e:!1,rowCellBrushSelection:(n=t==null?void 0:t.rowCell)!==null&&n!==void 0?n:!1,colCellBrushSelection:(i=t==null?void 0:t.colCell)!==null&&i!==void 0?i:!1}},r.prototype.getDefaultInteractions=function(){var t=this.spreadsheet.options.interaction,e=t.resize,n=t.brushSelection,i=t.multiSelection,o=t.rangeSelection,a=t.selectedCellMove,s=this.getBrushSelectionInfo(n),l=s.dataCellBrushSelection,u=s.rowCellBrushSelection,d=s.colCellBrushSelection;return[{key:gr.CORNER_CELL_CLICK,interaction:QU},{key:gr.DATA_CELL_CLICK,interaction:$U},{key:gr.ROW_COLUMN_CLICK,interaction:KU},{key:gr.ROW_TEXT_CLICK,interaction:ZU},{key:gr.MERGED_CELLS_CLICK,interaction:qU},{key:gr.HOVER,interaction:JU,enable:!Tt()},{key:gr.DATA_CELL_BRUSH_SELECTION,interaction:eV,enable:!Tt()&&l},{key:gr.ROW_CELL_BRUSH_SELECTION,interaction:tV,enable:!Tt()&&u},{key:gr.COL_CELL_BRUSH_SELECTION,interaction:jU,enable:!Tt()&&d},{key:gr.COL_ROW_RESIZE,interaction:oV,enable:!Tt()&&e},{key:gr.DATA_CELL_MULTI_SELECTION,interaction:rV,enable:!Tt()&&i},{key:gr.RANGE_SELECTION,interaction:iV,enable:!Tt()&&o},{key:gr.SELECTED_CELL_MOVE,interaction:sV,enable:!Tt()&&a}]},r.prototype.registerInteractions=function(){var t=this,e=this.spreadsheet.options.interaction.customInteractions;this.interactions.clear();var n=this.getDefaultInteractions();n.forEach(function(i){var o=i.key,a=i.interaction,s=i.enable;s!==!1&&t.interactions.set(o,new a(t.spreadsheet))}),se(e)||Me(e,function(i){var o=i.interaction;t.interactions.set(i.key,new o(t.spreadsheet))})},r.prototype.registerEventController=function(){this.eventController=new nV(this.spreadsheet)},r.prototype.draw=function(){this.spreadsheet.container.render()},r.prototype.clearState=function(){Z_(this.spreadsheet)&&this.draw()},r.prototype.changeState=function(t){var e=this,n=this.spreadsheet.interaction,i=t.cells,o=i===void 0?[]:i,a=t.force,s=t.stateName,l=t.onUpdateCells;if(se(o)&&s===ce.SELECTED){a&&n.changeState({cells:[],stateName:ce.UNSELECTED});return}this.getCurrentStateName()===ce.ALL_SELECTED&&this.clearStyleIndependent(),this.clearState(),this.setState(t);var u=function(){e.updatePanelGroupAllDataCells()};l?l(this,u):u(),this.draw()},r.prototype.updatePanelGroupAllDataCells=function(){this.updateCells(this.spreadsheet.facet.getDataCells())},r.prototype.updateCells=function(t){t===void 0&&(t=[]),t.forEach(function(e){e.update()})},r.prototype.addIntercepts=function(t){var e=this;t===void 0&&(t=[]),t.forEach(function(n){e.intercepts.add(n)})},r.prototype.hasIntercepts=function(t){var e=this;return t===void 0&&(t=[]),t.some(function(n){return e.intercepts.has(n)})},r.prototype.removeIntercepts=function(t){var e=this;t===void 0&&(t=[]),t.forEach(function(n){e.intercepts.delete(n)})},r.prototype.clearHoverTimer=function(){clearTimeout(this.hoverTimer)},r.prototype.setHoverTimer=function(t){this.hoverTimer=t},r.prototype.getHoverTimer=function(){return this.hoverTimer},r.prototype.getSelectedCellHighlight=function(){var t,e=this.spreadsheet.options.interaction.selectedCellHighlight;if(Ii(e))return{rowHeader:e,colHeader:e,currentRow:e,currentCol:e};var n=(t=e)!==null&&t!==void 0?t:{},i=n.rowHeader,o=i===void 0?!1:i,a=n.colHeader,s=a===void 0?!1:a,l=n.currentRow,u=l===void 0?!1:l,d=n.currentCol,h=d===void 0?!1:d;return{rowHeader:o,colHeader:s,currentRow:u,currentCol:h}},r.prototype.getHoverAfterScroll=function(){return this.spreadsheet.options.interaction.hoverAfterScroll},r.prototype.getHoverHighlight=function(){var t=this.spreadsheet.options.interaction.hoverHighlight;if(Ii(t))return{rowHeader:t,colHeader:t,currentRow:t,currentCol:t};var e=t!=null?t:{},n=e.rowHeader,i=n===void 0?!1:n,o=e.colHeader,a=o===void 0?!1:o,s=e.currentRow,l=s===void 0?!1:s,u=e.currentCol,d=u===void 0?!1:u;return{rowHeader:i,colHeader:a,currentRow:l,currentCol:d}},r.prototype.getBrushSelection=function(){var t=this.spreadsheet.options.interaction.brushSelection;if(Ii(t))return{dataCell:t,rowCell:t,colCell:t};var e=t!=null?t:{},n=e.dataCell,i=n===void 0?!1:n,o=e.rowCell,a=o===void 0?!1:o,s=e.colCell,l=s===void 0?!1:s;return{dataCell:i,rowCell:a,colCell:l}},r.prototype.updateDataCellRelevantHeaderCells=function(t,e){this.updateDataCellRelevantColCells(t,e),this.updateDataCellRelevantRowCells(t,e)},r.prototype.updateDataCellRelevantRowCells=function(t,e){var n=e.rowId,i=this.spreadsheet,o=i.facet,a=i.interaction,s=t===ce.HOVER,l=(s?a.getHoverHighlight():a.getSelectedCellHighlight()).rowHeader;if(l&&n){var u=s?Pp(n,o.getRowCells(),this.spreadsheet.isHierarchyTreeType()):ZG(e,this.spreadsheet),d=o.getSeriesNumberCells().filter(function(v){return u.find(function(p){return p.getMeta().y===v.getMeta().y})}),h=X(X([],F(d),!1),F(u),!1);Me(h,function(v){v.updateByState(t)})}},r.prototype.updateDataCellRelevantColCells=function(t,e){var n=e.colId,i=this.spreadsheet,o=i.facet,a=i.interaction,s=(t===ce.HOVER?a.getHoverHighlight():a.getSelectedCellHighlight()).colHeader;s&&n&&nz(n,o.getColCells(),t)},r}(),uV=function(){function r(t){var e=this;this.viewport=window,this.isDevicePixelRatioChange=!1,this.init=function(){e.initDevicePixelRatioListener(),e.initDeviceZoomListener()},this.destroy=function(){e.removeDevicePixelRatioListener(),e.removeDeviceZoomListener()},this.removeDevicePixelRatioListener=function(){var n;!((n=e.devicePixelRatioMedia)===null||n===void 0)&&n.removeEventListener?e.devicePixelRatioMedia.removeEventListener("change",e.renderByDevicePixelRatioChanged):e.devicePixelRatioMedia.removeListener(e.renderByDevicePixelRatioChanged)},this.initDeviceZoomListener=function(){var n,i;Tt()||(i=(n=e.viewport)===null||n===void 0?void 0:n.visualViewport)===null||i===void 0||i.addEventListener("resize",e.renderByZoomScaleWithoutResizeEffect)},this.removeDeviceZoomListener=function(){var n,i;Tt()||(i=(n=e.viewport)===null||n===void 0?void 0:n.visualViewport)===null||i===void 0||i.removeEventListener("resize",e.renderByZoomScaleWithoutResizeEffect)},this.renderByZoomScaleWithoutResizeEffect=function(n){e.isDevicePixelRatioChange=!1,e.renderByZoomScale(n)},this.renderByDevicePixelRatioChanged=function(){e.isDevicePixelRatioChange=!0,e.renderByDevicePixelRatio()},this.renderByDevicePixelRatio=function(n){n===void 0&&(n=window.devicePixelRatio);var i=e.spreadsheet,o=i.container,a=i.options,s=a.width,l=a.height,u=e.spreadsheet.getCanvasElement(),d=o.getConfig().devicePixelRatio;if(!(d===n||!u)){var h=Math.max(n,d,B6);o.getConfig().devicePixelRatio=h,o.resize(s,l),e.spreadsheet.render(!1)}},this.renderByZoomScale=Cf(function(n){var i,o=Math.ceil((i=n.target)===null||i===void 0?void 0:i.scale);o>=1&&!e.isDevicePixelRatioChange&&e.renderByDevicePixelRatio(o)},350),this.spreadsheet=t}return r.prototype.initDevicePixelRatioListener=function(){var t;this.devicePixelRatioMedia=window.matchMedia("(resolution: ".concat(window.devicePixelRatio,"dppx)")),!((t=this.devicePixelRatioMedia)===null||t===void 0)&&t.addEventListener?this.devicePixelRatioMedia.addEventListener("change",this.renderByDevicePixelRatioChanged):this.devicePixelRatioMedia.addListener(this.renderByDevicePixelRatioChanged)},r}(),Lv=function(){function r(t){this.visible=!1,this.position={x:0,y:0},this.spreadsheet=t}return r.prototype.show=function(t){var e,n,i,o=t.position,a=t.content,s=t.event,l=this.spreadsheet.options.tooltip||{},u=l.autoAdjustBoundary,d=l.adjustPosition;this.visible=!0,this.options=t;var h=this.getContainer();this.renderContent(a);var v=tW({spreadsheet:this.spreadsheet,position:o,tooltipContainer:h,autoAdjustBoundary:u}),p=v.x,g=v.y;this.position=(e=d==null?void 0:d({position:{x:p,y:g},event:s}))!==null&&e!==void 0?e:{x:p,y:g},Yu(h,{style:{left:"".concat((n=this.position)===null||n===void 0?void 0:n.x,"px"),top:"".concat((i=this.position)===null||i===void 0?void 0:i.y,"px"),pointerEvents:"all"},visible:!0})},r.prototype.hide=function(){this.visible=!1,this.container&&(Yu(this.container,{style:{pointerEvents:"none"},visible:!1}),this.resetPosition())},r.prototype.destroy=function(){var t,e;this.visible=!1,this.container&&(this.resetPosition(),(e=(t=this.container).remove)===null||e===void 0||e.call(t),this.container=null)},r.prototype.renderContent=function(t){var e,n,i,o;if(!!this.container){this.clearContent();var a=(this.spreadsheet.options.tooltip||{}).content,s=t!=null?t:a;if(!Lt(s)){if(typeof s=="string"){this.container.innerHTML=s,(n=(e=this.options).onMounted)===null||n===void 0||n.call(e);return}s instanceof Element&&(this.container.appendChild(s),(o=(i=this.options).onMounted)===null||o===void 0||o.call(i))}}},r.prototype.clearContent=function(){!this.container||(this.container.innerHTML="")},r.prototype.disablePointerEvent=function(){!this.container||this.container.style.pointerEvents!=="none"&&Yu(this.container,{style:{pointerEvents:"none"}})},r.prototype.resetPosition=function(){this.position={x:0,y:0}},r.prototype.getContainer=function(){var t;if(!this.container){var e=this.spreadsheet.options.tooltip,n=((t=e==null?void 0:e.getContainer)===null||t===void 0?void 0:t.call(e))||document.body,i=document.createElement("div");return Yu(i,{style:e==null?void 0:e.style,className:[Sp].concat(e==null?void 0:e.className)}),n.appendChild(i),this.container=i,this.container}return this.container},r}();K.enableCSSParsing=!1;var wE=function(r){oe(t,r);function t(e,n,i){var o=r.call(this)||this;return o.store=new t7,o.destroyed=!1,o.measureText=_l(function(a,s){var l;if(a===void 0&&(a=""),!s)return null;var u=(l=o.getCanvasElement())===null||l===void 0?void 0:l.getContext("2d"),d=s,h=d.fontSize,v=d.fontFamily,p=d.fontWeight,g=d.fontStyle,m=d.fontVariant;return u.font=[g,m,p,"".concat(h,"px"),v].join(" ").trim(),u.measureText(String(a))},function(a,s){return X([a],F(gp(s)),!1).join("")}),o.measureTextWidth=function(a,s){a===void 0&&(a="");var l=o.measureText(a,s);return(l==null?void 0:l.width)||0},o.measureTextHeight=function(a,s){a===void 0&&(a="");var l=o.measureText(a,s);return l?l.actualBoundingBoxAscent+l.actualBoundingBoxDescent:0},o.measureTextWidthRoughly=function(a,s){var l,u;s===void 0&&(s={});var d=o.measureTextWidth("a",s),h=o.measureTextWidth("\u8682",s),v=0;if(!a)return v;try{for(var p=Qt(a),g=p.next();!g.done;g=p.next()){var m=g.value,C=m.charCodeAt(0);v+=C>=0&&C<=255?d:h}}catch(w){l={error:w}}finally{try{g&&!g.done&&(u=p.return)&&u.call(p)}finally{if(l)throw l.error}}return v},o.dataCfg=fc(n),o.options=$m(i),o.dataSet=o.getDataSet(),o.setDebug(),o.initTooltip(),o.initContainer(e),o.bindEvents(),o.initInteraction(),o.initTheme(),o.initHdAdapter(),o.registerIcons(),o.setOverscrollBehavior(),o.mountSheetInstance(),o}return t.prototype.isCustomHeaderFields=function(e){var n=this.dataCfg.fields;return e?Qc(n==null?void 0:n[e],function(i){return!Pi(i)}):Qc(X(X([],F(n==null?void 0:n.rows),!1),F(n==null?void 0:n.columns),!1),function(i){return!Pi(i)})},t.prototype.isCustomColumnFields=function(){return this.isCustomHeaderFields("columns")},t.prototype.setOverscrollBehavior=function(){var e=this.options.interaction.overscrollBehavior,n=window.getComputedStyle(document.body).getPropertyValue("overscroll-behavior"),i=n&&n!=="auto";i?this.store.set("initOverscrollBehavior",n):e&&(document.body.style.overscrollBehavior=e)},t.prototype.restoreOverscrollBehavior=function(){document.body.style.overscrollBehavior=this.store.get("initOverscrollBehavior")||""},t.prototype.setDebug=function(){si.getInstance().setDebug(this.options.debug)},t.prototype.initTheme=function(){this.setThemeCfg({name:"default"})},t.prototype.getMountContainer=function(e){var n=Pi(e)?document.querySelector(e):e;if(!n)throw new Error("Target mount container is not a DOM element");return n},t.prototype.initHdAdapter=function(){this.options.hd&&(this.hdAdapter=new uV(this),this.hdAdapter.init())},t.prototype.initInteraction=function(){var e,n;(n=(e=this.interaction)===null||e===void 0?void 0:e.destroy)===null||n===void 0||n.call(e),this.interaction=new lV(this)},t.prototype.initTooltip=function(){var e,n,i,o;(n=(e=this.tooltip)===null||e===void 0?void 0:e.destroy)===null||n===void 0||n.call(e),this.tooltip=this.renderTooltip(),this.tooltip instanceof Lv||console.warn("[Custom Tooltip]: ".concat((o=(i=this.tooltip)===null||i===void 0?void 0:i.constructor)===null||o===void 0?void 0:o.toString()," should be extends from BaseTooltip"))},t.prototype.renderTooltip=function(){var e,n;return((n=(e=this.options.tooltip)===null||e===void 0?void 0:e.render)===null||n===void 0?void 0:n.call(e,this))||new Lv(this)},t.prototype.showTooltip=function(e){var n=this,i=e.content,o=e.event,a=this.getCell(o==null?void 0:o.target),s=Un(i)?i(a,e):i;return new Promise(function(l){var u,d,h=N(N({},e),{content:s,onMounted:l});Tt()?fk(function(){var v,p;(p=(v=n.tooltip).show)===null||p===void 0||p.call(v,h)},50):(d=(u=n.tooltip).show)===null||d===void 0||d.call(u,h)})},t.prototype.showTooltipWithInfo=function(e,n,i){var o,a=Kp(this,e),s=a.enable,l=a.content;if(!!s){var u=this.getCell(e==null?void 0:e.target),d=(o=i==null?void 0:i.data)!==null&&o!==void 0?o:fW({spreadsheet:this,cellInfos:n,targetCell:u,options:N({enableFormat:!0},i)});return this.showTooltip({data:d,position:{x:e.clientX,y:e.clientY},options:i,event:e,content:l})}},t.prototype.hideTooltip=function(){var e,n;(n=(e=this.tooltip).hide)===null||n===void 0||n.call(e)},t.prototype.destroyTooltip=function(){var e,n;(n=(e=this.tooltip).destroy)===null||n===void 0||n.call(e)},t.prototype.registerIcons=function(){var e=this.options.customSVGIcons;se(e)||Me(e,function(n){Jx(n.name,n.svg)})},t.prototype.setDataCfg=function(e,n){this.store.set("originalDataCfg",e),n?this.dataCfg=fc(e):this.dataCfg=fc(this.dataCfg,e),gW(this)},t.prototype.setOptions=function(e,n){var i;this.hideTooltip(),n?this.options=$m(e):this.options=Mi(this.options,e),(n||((i=e==null?void 0:e.tooltip)===null||i===void 0?void 0:i.render))&&this.initTooltip(),this.resetHiddenColumnsDetailInfoIfNeeded(),this.registerIcons()},t.prototype.resetDataCfg=function(){this.setDataCfg(null,!0)},t.prototype.resetOptions=function(){this.setOptions(null,!0)},t.prototype.resetHiddenColumnsDetailInfoIfNeeded=function(){var e;se((e=this.options.interaction)===null||e===void 0?void 0:e.hiddenColumnFields)||this.store.set("hiddenColumnsDetail",[])},t.prototype.doRender=function(e){return jt(this,void 0,void 0,function(){var n,i,o,a,s,l,u;return er(this,function(d){switch(d.label){case 0:return!this.getCanvasElement()||!window.document.body.contains(this.getCanvasElement())?[2]:(n=e||{},i=n.reloadData,o=i===void 0?!0:i,a=n.reBuildDataSet,s=a===void 0?!1:a,l=n.reBuildHiddenColumnsDetail,u=l===void 0?!0:l,this.emit(U.LAYOUT_BEFORE_RENDER),s&&(this.dataSet=this.getDataSet()),o&&(this.clearDrillDownData("",!0),this.dataSet.setDataCfg(this.dataCfg)),this.buildFacet(),u?[4,this.initHiddenColumnsDetail()]:[3,2]);case 1:d.sent(),d.label=2;case 2:return this.emit(U.LAYOUT_AFTER_RENDER),[2]}})})},t.prototype.render=function(e){return jt(this,void 0,void 0,function(){var n;return er(this,function(i){switch(i.label){case 0:return this.destroyed?[2]:(n=typeof e=="boolean"?{reloadData:e}:e,[4,this.container.ready]);case 1:return i.sent(),[4,this.doRender(n)];case 2:return i.sent(),[2]}})})},t.prototype.mountSheetInstance=function(){var e=this.getCanvasElement();e&&(e.__s2_instance__=this)},t.prototype.unmountSheetInstance=function(){var e=this.getCanvasElement();e&&delete e.__s2_instance__},t.prototype.destroy=function(){var e,n,i,o,a;this.destroyed||(this.destroyed=!0,this.restoreOverscrollBehavior(),this.emit(U.LAYOUT_DESTROY),(e=this.facet)===null||e===void 0||e.destroy(),(n=this.hdAdapter)===null||n===void 0||n.destroy(),(i=this.interaction)===null||i===void 0||i.destroy(),(o=this.store)===null||o===void 0||o.clear(),this.destroyTooltip(),this.clearCanvasEvent(),this.unmountSheetInstance(),(a=this.container)===null||a===void 0||a.destroy(),pW())},t.prototype.setThemeName=function(e){this.themeName=e},t.prototype.setThemeCfg=function(e){e===void 0&&(e={});var n=(e==null?void 0:e.theme)||{},i=s7(N(N({},e),{spreadsheet:this}));this.theme=Mi(i,n),this.setThemeName(e==null?void 0:e.name),a7(e==null?void 0:e.name)},t.prototype.setTheme=function(e){this.theme=Mi(this.theme,e)},t.prototype.getTheme=function(){return this.theme},t.prototype.getThemeName=function(){return this.themeName},t.prototype.updatePagination=function(e){this.options=Mi(this.options,{pagination:e}),this.facet.resetScrollOffset()},t.prototype.getContentHeight=function(){return this.facet.getContentHeight()},t.prototype.changeSheetSize=function(e,n){e===void 0&&(e=this.options.width),n===void 0&&(n=this.options.height);var i=this.getCanvasElement(),o=this.container.getConfig(),a=o.width,s=o.height,l=e!==a||n!==s;!l||!i||(this.options=Mi(this.options,{width:e,height:n}),this.container.resize(e,n))},t.prototype.on=function(e,n){return r.prototype.on.call(this,e,n)},t.prototype.emit=function(e){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];r.prototype.emit.apply(this,X([e],F(n),!1))},t.prototype.getCanvas=function(){return this.container},t.prototype.getCanvasConfig=function(){return this.getCanvas().getConfig()},t.prototype.getCanvasElement=function(){return this.getCanvas().getContextService().getDomElement()},t.prototype.getLayoutWidthType=function(){var e;return(e=this.options.style)===null||e===void 0?void 0:e.layoutWidthType},t.prototype.updateScrollOffset=function(e){var n={offsetX:{value:void 0,animate:!1},offsetY:{value:void 0,animate:!1},rowHeaderOffsetX:{value:void 0,animate:!1}};this.facet.updateScrollOffset(Mi(n,e))},t.prototype.isCellType=function(e){return e instanceof od},t.prototype.getCell=function(e){for(var n=e;n&&!(n instanceof kc);){if(this.isCellType(n))return n;n=n==null?void 0:n.parentNode}return null},t.prototype.getCellType=function(e){var n=this.getCell(e);return n==null?void 0:n.cellType},t.prototype.getTotalsConfig=function(e){var n=this.options.totals,i=this.dataSet.fields.rows,o=ze(n,Dr(i,e)?"row":"col",{}),a=o.showSubTotals&&Dr(o.subTotalsDimensions,e)?o.showSubTotals:!1;return N(N({grandTotalsLabel:kt("\u603B\u8BA1"),subTotalsLabel:kt("\u5C0F\u8BA1"),grandTotalsGroupDimensions:[],subTotalsGroupDimensions:[]},o),{showSubTotals:a})},t.prototype.initContainer=function(e){var n=this.options,i=n.width,o=n.height,a=n.transformCanvasConfig,s=new XU,l=a==null?void 0:a(s,this);this.container=new kc(N({container:this.getMountContainer(e),width:i,height:o,renderer:s},l)),this.updateContainerStyle()},t.prototype.updateContainerStyle=function(){var e=this.getCanvasElement();e&&(e.style.display="block")},t.prototype.initHiddenColumnsDetail=function(){return jt(this,void 0,void 0,function(){var e,n;return er(this,function(i){switch(i.label){case 0:return e=this.options.interaction.hiddenColumnFields,n=this.store.get("hiddenColumnsDetail"),se(e)&&se(n)?[2]:[4,Vp(this,e,!0)];case 1:return i.sent(),[2]}})})},t.prototype.clearCanvasEvent=function(){var e=this,n=this.getEvents();Rk(n,function(i,o){e.off(o)})},t.prototype.updateSortMethodMap=function(e,n,i){var o;i===void 0&&(i=!1);var a=i?null:this.store.get("sortMethodMap");this.store.set("sortMethodMap",N(N({},a),(o={},o[e]=n,o)))},t.prototype.getMenuDefaultSelectedKeys=function(e){var n=this.store.get("sortMethodMap"),i=ze(n,e);return i?[i]:[]},t.prototype.handleGroupSort=function(e,n){var i=this;e.stopPropagation(),this.interaction.addIntercepts([Le.HOVER]);var o=this.getMenuDefaultSelectedKeys(n==null?void 0:n.id),a=this.isTableMode()?M9():R9(),s={menu:{defaultSelectedKeys:o,items:a,onClick:function(l){var u=l.key;i.groupSortByMethod(u,n),i.emit(U.RANGE_SORTED,e)}}};this.showTooltipWithInfo(e,[],{operator:s,onlyShowOperator:!0,forceRender:!0})},t}(cE),fV=function(r){oe(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.isCustomRowFields=function(){return this.isCustomHeaderFields("rows")},t.prototype.getDataSet=function(){var e=this.options.dataSet;return e?e(this):this.isCustomRowFields()?new wW(this):new xv(this)},t.prototype.enableFrozenHeaders=function(){return!1},t.prototype.getContentHeight=function(){return this.facet.getContentHeight()},t.prototype.isPivotMode=function(){return!0},t.prototype.isTableMode=function(){return!1},t.prototype.isHierarchyTreeType=function(){return this.options.hierarchyType==="tree"},t.prototype.isFrozenRowHeader=function(){var e,n;return!!(!((n=(e=this.options)===null||e===void 0?void 0:e.frozen)===null||n===void 0)&&n.rowHeader)},t.prototype.isValueInCols=function(){var e,n;return(n=(e=this.dataSet)===null||e===void 0?void 0:e.fields)===null||n===void 0?void 0:n.valueInCols},t.prototype.clearDrillDownData=function(e,n){if(this.dataSet instanceof xv){var i=this.dataSet.clearDrillDownData(e);i&&!n&&(this.interaction.reset(),this.render(!1))}},t.prototype.buildFacet=function(){var e=this,n,i,o,a,s,l,u=function(d){return new Qo(d,e)};(n=(l=this.options).dataCell)!==null&&n!==void 0||(l.dataCell=u),(i=this.facet)===null||i===void 0||i.destroy(),this.facet=(s=(a=(o=this.options).facet)===null||a===void 0?void 0:a.call(o,this))!==null&&s!==void 0?s:new jW(this),this.facet.render()},t.prototype.bindEvents=function(){this.off(U.ROW_CELL_COLLAPSED__PRIVATE),this.off(U.ROW_CELL_ALL_COLLAPSED__PRIVATE),this.on(U.ROW_CELL_COLLAPSED__PRIVATE,this.handleRowCellCollapsed),this.on(U.ROW_CELL_ALL_COLLAPSED__PRIVATE,this.handleRowCellToggleCollapseAll)},t.prototype.handleRowCellCollapsed=function(e){var n,i,o=e.isCollapsed,a=e.node,s=((i=this.options.style)===null||i===void 0?void 0:i.rowCell).collapseFields,l=N(N({},s),(n={},n[a.id]=o,n));this.setOptions({style:{rowCell:{collapseFields:l}}}),this.render(!1),this.emit(U.ROW_CELL_COLLAPSED,{isCollapsed:o,collapseFields:l,node:a})},t.prototype.handleRowCellToggleCollapseAll=function(e){var n=!e;this.setOptions({style:{rowCell:{collapseAll:n,collapseFields:null,expandDepth:null}}}),this.render(!1),this.emit(U.ROW_CELL_ALL_COLLAPSED,n)},t.prototype.groupSortByMethod=function(e,n){var i,o=this.dataCfg.fields,a=o.rows,s=o.columns,l=this.options.style.colCell.hideValue,u=this.isValueInCols()?It(a):It(s),d=n.query,h=n.value,v=td(d),p=h;l&&this.isValueInCols()&&(p=this.dataSet.fields.values[0],v[Ae]=p);var g=Pi(u)?u:u.field,m={sortFieldId:g,sortMethod:e,sortByMeasure:p,query:v},C=(i=this.dataCfg.sortParams)===null||i===void 0?void 0:i.filter(function(_){return(_==null?void 0:_.sortFieldId)!==u});this.updateSortMethodMap(n.id,e,!0);var w=X(X([],F(C),!1),[m],!1);this.emit(U.RANGE_SORT,w),this.setDataCfg(N(N({},this.dataCfg),{sortParams:w})),this.render()},t}(wE);(function(r){oe(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.groupSortByMethod=function(n,i){var o=i.field,a={sortFieldId:o,sortMethod:n};e.updateSortMethodMap(i.id,n),e.emit(U.RANGE_SORT,[a])},e}return t.prototype.isCustomRowFields=function(){return!1},t.prototype.getDataSet=function(){var e=this.options.dataSet;return e?e(this):new xW(this)},t.prototype.enableFrozenHeaders=function(){var e=this.options.frozen,n=e.rowCount,i=n===void 0?0:n,o=e.trailingRowCount,a=o===void 0?0:o,s=e.colCount,l=s===void 0?0:s,u=e.trailingColCount,d=u===void 0?0:u;return i>0||a>0||l>0||d>0},t.prototype.isPivotMode=function(){return!1},t.prototype.isTableMode=function(){return!0},t.prototype.isHierarchyTreeType=function(){return!1},t.prototype.isFrozenRowHeader=function(){return!1},t.prototype.clearDrillDownData=function(){},t.prototype.isValueInCols=function(){return!1},t.prototype.bindEvents=function(){},t.prototype.buildFacet=function(){var e=this,n,i,o,a,s,l,u=function(d){var h;return((h=e.options.seriesNumber)===null||h===void 0?void 0:h.enable)&&d.colIndex===0?new Yp(d,e):new kf(d,e)};(n=(l=this.options).dataCell)!==null&&n!==void 0||(l.dataCell=u),(i=this.facet)===null||i===void 0||i.destroy(),this.facet=(s=(a=(o=this.options).facet)===null||a===void 0?void 0:a.call(o,this))!==null&&s!==void 0?s:new iU(this),this.facet.render()},t.prototype.destroy=function(){r.prototype.destroy.call(this),this.off(U.RANGE_SORT),this.off(U.RANGE_FILTER)},t})(wE);var rC={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(r,t){(function(){var e,n="4.17.21",i=200,o="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",a="Expected a function",s="Invalid `variable` option passed into `_.template`",l="__lodash_hash_undefined__",u=500,d="__lodash_placeholder__",h=1,v=2,p=4,g=1,m=2,C=1,w=2,_=4,S=8,b=16,T=32,E=64,R=128,O=256,A=512,P=30,D="...",k=800,z=16,V=1,Z=2,Q=3,Y=1/0,te=9007199254740991,ae=17976931348623157e292,pe=0/0,Ee=4294967295,me=Ee-1,Ze=Ee>>>1,Ge=[["ary",R],["bind",C],["bindKey",w],["curry",S],["curryRight",b],["flip",A],["partial",T],["partialRight",E],["rearg",O]],Ye="[object Arguments]",Fe="[object Array]",nr="[object AsyncFunction]",At="[object Boolean]",Sr="[object Date]",dr="[object DOMException]",Tn="[object Error]",Kn="[object Function]",aa="[object GeneratorFunction]",Tr="[object Map]",Gi="[object Number]",sa="[object Null]",on="[object Object]",us="[object Promise]",Nl="[object Proxy]",Zn="[object RegExp]",br="[object Set]",Wr="[object String]",an="[object Symbol]",pd="[object Undefined]",wo="[object WeakMap]",gd="[object WeakSet]",xo="[object ArrayBuffer]",la="[object DataView]",yd="[object Float32Array]",md="[object Float64Array]",Cd="[object Int8Array]",wd="[object Int16Array]",xd="[object Int32Array]",_d="[object Uint8Array]",Ed="[object Uint8ClampedArray]",Sd="[object Uint16Array]",Td="[object Uint32Array]",xE=/\b__p \+= '';/g,_E=/\b(__p \+=) '' \+/g,EE=/(__e\(.*?\)|\b__t\)) \+\n'';/g,jp=/&(?:amp|lt|gt|quot|#39);/g,e0=/[&<>"']/g,SE=RegExp(jp.source),TE=RegExp(e0.source),bE=/<%-([\s\S]+?)%>/g,LE=/<%([\s\S]+?)%>/g,t0=/<%=([\s\S]+?)%>/g,RE=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ME=/^\w*$/,OE=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,bd=/[\\^$.*+?()[\]{}|]/g,IE=RegExp(bd.source),Ld=/^\s+/,AE=/\s/,NE=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,PE=/\{\n\/\* \[wrapped with (.+)\] \*/,BE=/,? & /,DE=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,FE=/[()=,{}\[\]\/\s]/,kE=/\\(\\)?/g,HE=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,r0=/\w*$/,zE=/^[-+]0x[0-9a-f]+$/i,GE=/^0b[01]+$/i,WE=/^\[object .+?Constructor\]$/,UE=/^0o[0-7]+$/i,VE=/^(?:0|[1-9]\d*)$/,YE=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Pl=/($^)/,XE=/['\n\r\u2028\u2029\\]/g,Bl="\\ud800-\\udfff",$E="\\u0300-\\u036f",qE="\\ufe20-\\ufe2f",KE="\\u20d0-\\u20ff",n0=$E+qE+KE,i0="\\u2700-\\u27bf",o0="a-z\\xdf-\\xf6\\xf8-\\xff",ZE="\\xac\\xb1\\xd7\\xf7",QE="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",JE="\\u2000-\\u206f",jE=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",a0="A-Z\\xc0-\\xd6\\xd8-\\xde",s0="\\ufe0e\\ufe0f",l0=ZE+QE+JE+jE,Rd="['\u2019]",eS="["+Bl+"]",u0="["+l0+"]",Dl="["+n0+"]",f0="\\d+",tS="["+i0+"]",d0="["+o0+"]",h0="[^"+Bl+l0+f0+i0+o0+a0+"]",Md="\\ud83c[\\udffb-\\udfff]",rS="(?:"+Dl+"|"+Md+")",c0="[^"+Bl+"]",Od="(?:\\ud83c[\\udde6-\\uddff]){2}",Id="[\\ud800-\\udbff][\\udc00-\\udfff]",ua="["+a0+"]",v0="\\u200d",p0="(?:"+d0+"|"+h0+")",nS="(?:"+ua+"|"+h0+")",g0="(?:"+Rd+"(?:d|ll|m|re|s|t|ve))?",y0="(?:"+Rd+"(?:D|LL|M|RE|S|T|VE))?",m0=rS+"?",C0="["+s0+"]?",iS="(?:"+v0+"(?:"+[c0,Od,Id].join("|")+")"+C0+m0+")*",oS="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",aS="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",w0=C0+m0+iS,sS="(?:"+[tS,Od,Id].join("|")+")"+w0,lS="(?:"+[c0+Dl+"?",Dl,Od,Id,eS].join("|")+")",uS=RegExp(Rd,"g"),fS=RegExp(Dl,"g"),Ad=RegExp(Md+"(?="+Md+")|"+lS+w0,"g"),dS=RegExp([ua+"?"+d0+"+"+g0+"(?="+[u0,ua,"$"].join("|")+")",nS+"+"+y0+"(?="+[u0,ua+p0,"$"].join("|")+")",ua+"?"+p0+"+"+g0,ua+"+"+y0,aS,oS,f0,sS].join("|"),"g"),hS=RegExp("["+v0+Bl+n0+s0+"]"),cS=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,vS=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],pS=-1,dt={};dt[yd]=dt[md]=dt[Cd]=dt[wd]=dt[xd]=dt[_d]=dt[Ed]=dt[Sd]=dt[Td]=!0,dt[Ye]=dt[Fe]=dt[xo]=dt[At]=dt[la]=dt[Sr]=dt[Tn]=dt[Kn]=dt[Tr]=dt[Gi]=dt[on]=dt[Zn]=dt[br]=dt[Wr]=dt[wo]=!1;var st={};st[Ye]=st[Fe]=st[xo]=st[la]=st[At]=st[Sr]=st[yd]=st[md]=st[Cd]=st[wd]=st[xd]=st[Tr]=st[Gi]=st[on]=st[Zn]=st[br]=st[Wr]=st[an]=st[_d]=st[Ed]=st[Sd]=st[Td]=!0,st[Tn]=st[Kn]=st[wo]=!1;var gS={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},yS={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},mS={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},CS={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},wS=parseFloat,xS=parseInt,x0=typeof Ts=="object"&&Ts&&Ts.Object===Object&&Ts,_S=typeof self=="object"&&self&&self.Object===Object&&self,Kt=x0||_S||Function("return this")(),Nd=t&&!t.nodeType&&t,_o=Nd&&!0&&r&&!r.nodeType&&r,_0=_o&&_o.exports===Nd,Pd=_0&&x0.process,sn=function(){try{var G=_o&&_o.require&&_o.require("util").types;return G||Pd&&Pd.binding&&Pd.binding("util")}catch(J){}}(),E0=sn&&sn.isArrayBuffer,S0=sn&&sn.isDate,T0=sn&&sn.isMap,b0=sn&&sn.isRegExp,L0=sn&&sn.isSet,R0=sn&&sn.isTypedArray;function Ur(G,J,q){switch(q.length){case 0:return G.call(J);case 1:return G.call(J,q[0]);case 2:return G.call(J,q[0],q[1]);case 3:return G.call(J,q[0],q[1],q[2])}return G.apply(J,q)}function ES(G,J,q,he){for(var be=-1,$e=G==null?0:G.length;++be<$e;){var Nt=G[be];J(he,Nt,q(Nt),G)}return he}function ln(G,J){for(var q=-1,he=G==null?0:G.length;++q<he&&J(G[q],q,G)!==!1;);return G}function SS(G,J){for(var q=G==null?0:G.length;q--&&J(G[q],q,G)!==!1;);return G}function M0(G,J){for(var q=-1,he=G==null?0:G.length;++q<he;)if(!J(G[q],q,G))return!1;return!0}function Wi(G,J){for(var q=-1,he=G==null?0:G.length,be=0,$e=[];++q<he;){var Nt=G[q];J(Nt,q,G)&&($e[be++]=Nt)}return $e}function Fl(G,J){var q=G==null?0:G.length;return!!q&&fa(G,J,0)>-1}function Bd(G,J,q){for(var he=-1,be=G==null?0:G.length;++he<be;)if(q(J,G[he]))return!0;return!1}function vt(G,J){for(var q=-1,he=G==null?0:G.length,be=Array(he);++q<he;)be[q]=J(G[q],q,G);return be}function Ui(G,J){for(var q=-1,he=J.length,be=G.length;++q<he;)G[be+q]=J[q];return G}function Dd(G,J,q,he){var be=-1,$e=G==null?0:G.length;for(he&&$e&&(q=G[++be]);++be<$e;)q=J(q,G[be],be,G);return q}function TS(G,J,q,he){var be=G==null?0:G.length;for(he&&be&&(q=G[--be]);be--;)q=J(q,G[be],be,G);return q}function Fd(G,J){for(var q=-1,he=G==null?0:G.length;++q<he;)if(J(G[q],q,G))return!0;return!1}var bS=kd("length");function LS(G){return G.split("")}function RS(G){return G.match(DE)||[]}function O0(G,J,q){var he;return q(G,function(be,$e,Nt){if(J(be,$e,Nt))return he=$e,!1}),he}function kl(G,J,q,he){for(var be=G.length,$e=q+(he?1:-1);he?$e--:++$e<be;)if(J(G[$e],$e,G))return $e;return-1}function fa(G,J,q){return J===J?zS(G,J,q):kl(G,I0,q)}function MS(G,J,q,he){for(var be=q-1,$e=G.length;++be<$e;)if(he(G[be],J))return be;return-1}function I0(G){return G!==G}function A0(G,J){var q=G==null?0:G.length;return q?zd(G,J)/q:pe}function kd(G){return function(J){return J==null?e:J[G]}}function Hd(G){return function(J){return G==null?e:G[J]}}function N0(G,J,q,he,be){return be(G,function($e,Nt,rt){q=he?(he=!1,$e):J(q,$e,Nt,rt)}),q}function OS(G,J){var q=G.length;for(G.sort(J);q--;)G[q]=G[q].value;return G}function zd(G,J){for(var q,he=-1,be=G.length;++he<be;){var $e=J(G[he]);$e!==e&&(q=q===e?$e:q+$e)}return q}function Gd(G,J){for(var q=-1,he=Array(G);++q<G;)he[q]=J(q);return he}function IS(G,J){return vt(J,function(q){return[q,G[q]]})}function P0(G){return G&&G.slice(0,k0(G)+1).replace(Ld,"")}function Vr(G){return function(J){return G(J)}}function Wd(G,J){return vt(J,function(q){return G[q]})}function fs(G,J){return G.has(J)}function B0(G,J){for(var q=-1,he=G.length;++q<he&&fa(J,G[q],0)>-1;);return q}function D0(G,J){for(var q=G.length;q--&&fa(J,G[q],0)>-1;);return q}function AS(G,J){for(var q=G.length,he=0;q--;)G[q]===J&&++he;return he}var NS=Hd(gS),PS=Hd(yS);function BS(G){return"\\"+CS[G]}function DS(G,J){return G==null?e:G[J]}function da(G){return hS.test(G)}function FS(G){return cS.test(G)}function kS(G){for(var J,q=[];!(J=G.next()).done;)q.push(J.value);return q}function Ud(G){var J=-1,q=Array(G.size);return G.forEach(function(he,be){q[++J]=[be,he]}),q}function F0(G,J){return function(q){return G(J(q))}}function Vi(G,J){for(var q=-1,he=G.length,be=0,$e=[];++q<he;){var Nt=G[q];(Nt===J||Nt===d)&&(G[q]=d,$e[be++]=q)}return $e}function Hl(G){var J=-1,q=Array(G.size);return G.forEach(function(he){q[++J]=he}),q}function HS(G){var J=-1,q=Array(G.size);return G.forEach(function(he){q[++J]=[he,he]}),q}function zS(G,J,q){for(var he=q-1,be=G.length;++he<be;)if(G[he]===J)return he;return-1}function GS(G,J,q){for(var he=q+1;he--;)if(G[he]===J)return he;return he}function ha(G){return da(G)?US(G):bS(G)}function bn(G){return da(G)?VS(G):LS(G)}function k0(G){for(var J=G.length;J--&&AE.test(G.charAt(J)););return J}var WS=Hd(mS);function US(G){for(var J=Ad.lastIndex=0;Ad.test(G);)++J;return J}function VS(G){return G.match(Ad)||[]}function YS(G){return G.match(dS)||[]}var XS=function G(J){J=J==null?Kt:ca.defaults(Kt.Object(),J,ca.pick(Kt,vS));var q=J.Array,he=J.Date,be=J.Error,$e=J.Function,Nt=J.Math,rt=J.Object,Vd=J.RegExp,$S=J.String,un=J.TypeError,zl=q.prototype,qS=$e.prototype,va=rt.prototype,Gl=J["__core-js_shared__"],Wl=qS.toString,Je=va.hasOwnProperty,KS=0,H0=function(){var f=/[^.]+$/.exec(Gl&&Gl.keys&&Gl.keys.IE_PROTO||"");return f?"Symbol(src)_1."+f:""}(),Ul=va.toString,ZS=Wl.call(rt),QS=Kt._,JS=Vd("^"+Wl.call(Je).replace(bd,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Vl=_0?J.Buffer:e,Yi=J.Symbol,Yl=J.Uint8Array,z0=Vl?Vl.allocUnsafe:e,Xl=F0(rt.getPrototypeOf,rt),G0=rt.create,W0=va.propertyIsEnumerable,$l=zl.splice,U0=Yi?Yi.isConcatSpreadable:e,ds=Yi?Yi.iterator:e,Eo=Yi?Yi.toStringTag:e,ql=function(){try{var f=Ro(rt,"defineProperty");return f({},"",{}),f}catch(c){}}(),jS=J.clearTimeout!==Kt.clearTimeout&&J.clearTimeout,eT=he&&he.now!==Kt.Date.now&&he.now,tT=J.setTimeout!==Kt.setTimeout&&J.setTimeout,Kl=Nt.ceil,Zl=Nt.floor,Yd=rt.getOwnPropertySymbols,rT=Vl?Vl.isBuffer:e,V0=J.isFinite,nT=zl.join,iT=F0(rt.keys,rt),Pt=Nt.max,ir=Nt.min,oT=he.now,aT=J.parseInt,Y0=Nt.random,sT=zl.reverse,Xd=Ro(J,"DataView"),hs=Ro(J,"Map"),$d=Ro(J,"Promise"),pa=Ro(J,"Set"),cs=Ro(J,"WeakMap"),vs=Ro(rt,"create"),Ql=cs&&new cs,ga={},lT=Mo(Xd),uT=Mo(hs),fT=Mo($d),dT=Mo(pa),hT=Mo(cs),Jl=Yi?Yi.prototype:e,ps=Jl?Jl.valueOf:e,X0=Jl?Jl.toString:e;function M(f){if(xt(f)&&!Re(f)&&!(f instanceof ke)){if(f instanceof fn)return f;if(Je.call(f,"__wrapped__"))return $g(f)}return new fn(f)}var ya=function(){function f(){}return function(c){if(!yt(c))return{};if(G0)return G0(c);f.prototype=c;var y=new f;return f.prototype=e,y}}();function jl(){}function fn(f,c){this.__wrapped__=f,this.__actions__=[],this.__chain__=!!c,this.__index__=0,this.__values__=e}M.templateSettings={escape:bE,evaluate:LE,interpolate:t0,variable:"",imports:{_:M}},M.prototype=jl.prototype,M.prototype.constructor=M,fn.prototype=ya(jl.prototype),fn.prototype.constructor=fn;function ke(f){this.__wrapped__=f,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ee,this.__views__=[]}function cT(){var f=new ke(this.__wrapped__);return f.__actions__=Lr(this.__actions__),f.__dir__=this.__dir__,f.__filtered__=this.__filtered__,f.__iteratees__=Lr(this.__iteratees__),f.__takeCount__=this.__takeCount__,f.__views__=Lr(this.__views__),f}function vT(){if(this.__filtered__){var f=new ke(this);f.__dir__=-1,f.__filtered__=!0}else f=this.clone(),f.__dir__*=-1;return f}function pT(){var f=this.__wrapped__.value(),c=this.__dir__,y=Re(f),x=c<0,L=y?f.length:0,I=Lb(0,L,this.__views__),B=I.start,H=I.end,W=H-B,j=x?H:B-1,ee=this.__iteratees__,ne=ee.length,fe=0,ve=ir(W,this.__takeCount__);if(!y||!x&&L==W&&ve==W)return gg(f,this.__actions__);var xe=[];e:for(;W--&&fe<ve;){j+=c;for(var Ie=-1,_e=f[j];++Ie<ne;){var Be=ee[Ie],We=Be.iteratee,$r=Be.type,vr=We(_e);if($r==Z)_e=vr;else if(!vr){if($r==V)continue e;break e}}xe[fe++]=_e}return xe}ke.prototype=ya(jl.prototype),ke.prototype.constructor=ke;function So(f){var c=-1,y=f==null?0:f.length;for(this.clear();++c<y;){var x=f[c];this.set(x[0],x[1])}}function gT(){this.__data__=vs?vs(null):{},this.size=0}function yT(f){var c=this.has(f)&&delete this.__data__[f];return this.size-=c?1:0,c}function mT(f){var c=this.__data__;if(vs){var y=c[f];return y===l?e:y}return Je.call(c,f)?c[f]:e}function CT(f){var c=this.__data__;return vs?c[f]!==e:Je.call(c,f)}function wT(f,c){var y=this.__data__;return this.size+=this.has(f)?0:1,y[f]=vs&&c===e?l:c,this}So.prototype.clear=gT,So.prototype.delete=yT,So.prototype.get=mT,So.prototype.has=CT,So.prototype.set=wT;function gi(f){var c=-1,y=f==null?0:f.length;for(this.clear();++c<y;){var x=f[c];this.set(x[0],x[1])}}function xT(){this.__data__=[],this.size=0}function _T(f){var c=this.__data__,y=eu(c,f);if(y<0)return!1;var x=c.length-1;return y==x?c.pop():$l.call(c,y,1),--this.size,!0}function ET(f){var c=this.__data__,y=eu(c,f);return y<0?e:c[y][1]}function ST(f){return eu(this.__data__,f)>-1}function TT(f,c){var y=this.__data__,x=eu(y,f);return x<0?(++this.size,y.push([f,c])):y[x][1]=c,this}gi.prototype.clear=xT,gi.prototype.delete=_T,gi.prototype.get=ET,gi.prototype.has=ST,gi.prototype.set=TT;function yi(f){var c=-1,y=f==null?0:f.length;for(this.clear();++c<y;){var x=f[c];this.set(x[0],x[1])}}function bT(){this.size=0,this.__data__={hash:new So,map:new(hs||gi),string:new So}}function LT(f){var c=hu(this,f).delete(f);return this.size-=c?1:0,c}function RT(f){return hu(this,f).get(f)}function MT(f){return hu(this,f).has(f)}function OT(f,c){var y=hu(this,f),x=y.size;return y.set(f,c),this.size+=y.size==x?0:1,this}yi.prototype.clear=bT,yi.prototype.delete=LT,yi.prototype.get=RT,yi.prototype.has=MT,yi.prototype.set=OT;function To(f){var c=-1,y=f==null?0:f.length;for(this.__data__=new yi;++c<y;)this.add(f[c])}function IT(f){return this.__data__.set(f,l),this}function AT(f){return this.__data__.has(f)}To.prototype.add=To.prototype.push=IT,To.prototype.has=AT;function Ln(f){var c=this.__data__=new gi(f);this.size=c.size}function NT(){this.__data__=new gi,this.size=0}function PT(f){var c=this.__data__,y=c.delete(f);return this.size=c.size,y}function BT(f){return this.__data__.get(f)}function DT(f){return this.__data__.has(f)}function FT(f,c){var y=this.__data__;if(y instanceof gi){var x=y.__data__;if(!hs||x.length<i-1)return x.push([f,c]),this.size=++y.size,this;y=this.__data__=new yi(x)}return y.set(f,c),this.size=y.size,this}Ln.prototype.clear=NT,Ln.prototype.delete=PT,Ln.prototype.get=BT,Ln.prototype.has=DT,Ln.prototype.set=FT;function $0(f,c){var y=Re(f),x=!y&&Oo(f),L=!y&&!x&&Zi(f),I=!y&&!x&&!L&&xa(f),B=y||x||L||I,H=B?Gd(f.length,$S):[],W=H.length;for(var j in f)(c||Je.call(f,j))&&!(B&&(j=="length"||L&&(j=="offset"||j=="parent")||I&&(j=="buffer"||j=="byteLength"||j=="byteOffset")||xi(j,W)))&&H.push(j);return H}function q0(f){var c=f.length;return c?f[ih(0,c-1)]:e}function kT(f,c){return cu(Lr(f),bo(c,0,f.length))}function HT(f){return cu(Lr(f))}function qd(f,c,y){(y!==e&&!Rn(f[c],y)||y===e&&!(c in f))&&mi(f,c,y)}function gs(f,c,y){var x=f[c];(!(Je.call(f,c)&&Rn(x,y))||y===e&&!(c in f))&&mi(f,c,y)}function eu(f,c){for(var y=f.length;y--;)if(Rn(f[y][0],c))return y;return-1}function zT(f,c,y,x){return Xi(f,function(L,I,B){c(x,L,y(L),B)}),x}function K0(f,c){return f&&Jn(c,Ht(c),f)}function GT(f,c){return f&&Jn(c,Mr(c),f)}function mi(f,c,y){c=="__proto__"&&ql?ql(f,c,{configurable:!0,enumerable:!0,value:y,writable:!0}):f[c]=y}function Kd(f,c){for(var y=-1,x=c.length,L=q(x),I=f==null;++y<x;)L[y]=I?e:Mh(f,c[y]);return L}function bo(f,c,y){return f===f&&(y!==e&&(f=f<=y?f:y),c!==e&&(f=f>=c?f:c)),f}function dn(f,c,y,x,L,I){var B,H=c&h,W=c&v,j=c&p;if(y&&(B=L?y(f,x,L,I):y(f)),B!==e)return B;if(!yt(f))return f;var ee=Re(f);if(ee){if(B=Mb(f),!H)return Lr(f,B)}else{var ne=or(f),fe=ne==Kn||ne==aa;if(Zi(f))return Cg(f,H);if(ne==on||ne==Ye||fe&&!L){if(B=W||fe?{}:kg(f),!H)return W?mb(f,GT(B,f)):yb(f,K0(B,f))}else{if(!st[ne])return L?f:{};B=Ob(f,ne,H)}}I||(I=new Ln);var ve=I.get(f);if(ve)return ve;I.set(f,B),cy(f)?f.forEach(function(_e){B.add(dn(_e,c,y,_e,f,I))}):dy(f)&&f.forEach(function(_e,Be){B.set(Be,dn(_e,c,y,Be,f,I))});var xe=j?W?ph:vh:W?Mr:Ht,Ie=ee?e:xe(f);return ln(Ie||f,function(_e,Be){Ie&&(Be=_e,_e=f[Be]),gs(B,Be,dn(_e,c,y,Be,f,I))}),B}function WT(f){var c=Ht(f);return function(y){return Z0(y,f,c)}}function Z0(f,c,y){var x=y.length;if(f==null)return!x;for(f=rt(f);x--;){var L=y[x],I=c[L],B=f[L];if(B===e&&!(L in f)||!I(B))return!1}return!0}function Q0(f,c,y){if(typeof f!="function")throw new un(a);return Es(function(){f.apply(e,y)},c)}function ys(f,c,y,x){var L=-1,I=Fl,B=!0,H=f.length,W=[],j=c.length;if(!H)return W;y&&(c=vt(c,Vr(y))),x?(I=Bd,B=!1):c.length>=i&&(I=fs,B=!1,c=new To(c));e:for(;++L<H;){var ee=f[L],ne=y==null?ee:y(ee);if(ee=x||ee!==0?ee:0,B&&ne===ne){for(var fe=j;fe--;)if(c[fe]===ne)continue e;W.push(ee)}else I(c,ne,x)||W.push(ee)}return W}var Xi=Sg(Qn),J0=Sg(Qd,!0);function UT(f,c){var y=!0;return Xi(f,function(x,L,I){return y=!!c(x,L,I),y}),y}function tu(f,c,y){for(var x=-1,L=f.length;++x<L;){var I=f[x],B=c(I);if(B!=null&&(H===e?B===B&&!Xr(B):y(B,H)))var H=B,W=I}return W}function VT(f,c,y,x){var L=f.length;for(y=Oe(y),y<0&&(y=-y>L?0:L+y),x=x===e||x>L?L:Oe(x),x<0&&(x+=L),x=y>x?0:py(x);y<x;)f[y++]=c;return f}function j0(f,c){var y=[];return Xi(f,function(x,L,I){c(x,L,I)&&y.push(x)}),y}function Zt(f,c,y,x,L){var I=-1,B=f.length;for(y||(y=Ab),L||(L=[]);++I<B;){var H=f[I];c>0&&y(H)?c>1?Zt(H,c-1,y,x,L):Ui(L,H):x||(L[L.length]=H)}return L}var Zd=Tg(),eg=Tg(!0);function Qn(f,c){return f&&Zd(f,c,Ht)}function Qd(f,c){return f&&eg(f,c,Ht)}function ru(f,c){return Wi(c,function(y){return _i(f[y])})}function Lo(f,c){c=qi(c,f);for(var y=0,x=c.length;f!=null&&y<x;)f=f[jn(c[y++])];return y&&y==x?f:e}function tg(f,c,y){var x=c(f);return Re(f)?x:Ui(x,y(f))}function hr(f){return f==null?f===e?pd:sa:Eo&&Eo in rt(f)?bb(f):Hb(f)}function Jd(f,c){return f>c}function YT(f,c){return f!=null&&Je.call(f,c)}function XT(f,c){return f!=null&&c in rt(f)}function $T(f,c,y){return f>=ir(c,y)&&f<Pt(c,y)}function jd(f,c,y){for(var x=y?Bd:Fl,L=f[0].length,I=f.length,B=I,H=q(I),W=1/0,j=[];B--;){var ee=f[B];B&&c&&(ee=vt(ee,Vr(c))),W=ir(ee.length,W),H[B]=!y&&(c||L>=120&&ee.length>=120)?new To(B&&ee):e}ee=f[0];var ne=-1,fe=H[0];e:for(;++ne<L&&j.length<W;){var ve=ee[ne],xe=c?c(ve):ve;if(ve=y||ve!==0?ve:0,!(fe?fs(fe,xe):x(j,xe,y))){for(B=I;--B;){var Ie=H[B];if(!(Ie?fs(Ie,xe):x(f[B],xe,y)))continue e}fe&&fe.push(xe),j.push(ve)}}return j}function qT(f,c,y,x){return Qn(f,function(L,I,B){c(x,y(L),I,B)}),x}function ms(f,c,y){c=qi(c,f),f=Wg(f,c);var x=f==null?f:f[jn(cn(c))];return x==null?e:Ur(x,f,y)}function rg(f){return xt(f)&&hr(f)==Ye}function KT(f){return xt(f)&&hr(f)==xo}function ZT(f){return xt(f)&&hr(f)==Sr}function Cs(f,c,y,x,L){return f===c?!0:f==null||c==null||!xt(f)&&!xt(c)?f!==f&&c!==c:QT(f,c,y,x,Cs,L)}function QT(f,c,y,x,L,I){var B=Re(f),H=Re(c),W=B?Fe:or(f),j=H?Fe:or(c);W=W==Ye?on:W,j=j==Ye?on:j;var ee=W==on,ne=j==on,fe=W==j;if(fe&&Zi(f)){if(!Zi(c))return!1;B=!0,ee=!1}if(fe&&!ee)return I||(I=new Ln),B||xa(f)?Bg(f,c,y,x,L,I):Sb(f,c,W,y,x,L,I);if(!(y&g)){var ve=ee&&Je.call(f,"__wrapped__"),xe=ne&&Je.call(c,"__wrapped__");if(ve||xe){var Ie=ve?f.value():f,_e=xe?c.value():c;return I||(I=new Ln),L(Ie,_e,y,x,I)}}return fe?(I||(I=new Ln),Tb(f,c,y,x,L,I)):!1}function JT(f){return xt(f)&&or(f)==Tr}function eh(f,c,y,x){var L=y.length,I=L,B=!x;if(f==null)return!I;for(f=rt(f);L--;){var H=y[L];if(B&&H[2]?H[1]!==f[H[0]]:!(H[0]in f))return!1}for(;++L<I;){H=y[L];var W=H[0],j=f[W],ee=H[1];if(B&&H[2]){if(j===e&&!(W in f))return!1}else{var ne=new Ln;if(x)var fe=x(j,ee,W,f,c,ne);if(!(fe===e?Cs(ee,j,g|m,x,ne):fe))return!1}}return!0}function ng(f){if(!yt(f)||Pb(f))return!1;var c=_i(f)?JS:WE;return c.test(Mo(f))}function jT(f){return xt(f)&&hr(f)==Zn}function eb(f){return xt(f)&&or(f)==br}function tb(f){return xt(f)&&Cu(f.length)&&!!dt[hr(f)]}function ig(f){return typeof f=="function"?f:f==null?Or:typeof f=="object"?Re(f)?sg(f[0],f[1]):ag(f):by(f)}function th(f){if(!_s(f))return iT(f);var c=[];for(var y in rt(f))Je.call(f,y)&&y!="constructor"&&c.push(y);return c}function rb(f){if(!yt(f))return kb(f);var c=_s(f),y=[];for(var x in f)x=="constructor"&&(c||!Je.call(f,x))||y.push(x);return y}function rh(f,c){return f<c}function og(f,c){var y=-1,x=Rr(f)?q(f.length):[];return Xi(f,function(L,I,B){x[++y]=c(L,I,B)}),x}function ag(f){var c=yh(f);return c.length==1&&c[0][2]?zg(c[0][0],c[0][1]):function(y){return y===f||eh(y,f,c)}}function sg(f,c){return Ch(f)&&Hg(c)?zg(jn(f),c):function(y){var x=Mh(y,f);return x===e&&x===c?Oh(y,f):Cs(c,x,g|m)}}function nu(f,c,y,x,L){f!==c&&Zd(c,function(I,B){if(L||(L=new Ln),yt(I))nb(f,c,B,y,nu,x,L);else{var H=x?x(xh(f,B),I,B+"",f,c,L):e;H===e&&(H=I),qd(f,B,H)}},Mr)}function nb(f,c,y,x,L,I,B){var H=xh(f,y),W=xh(c,y),j=B.get(W);if(j){qd(f,y,j);return}var ee=I?I(H,W,y+"",f,c,B):e,ne=ee===e;if(ne){var fe=Re(W),ve=!fe&&Zi(W),xe=!fe&&!ve&&xa(W);ee=W,fe||ve||xe?Re(H)?ee=H:Et(H)?ee=Lr(H):ve?(ne=!1,ee=Cg(W,!0)):xe?(ne=!1,ee=wg(W,!0)):ee=[]:Ss(W)||Oo(W)?(ee=H,Oo(H)?ee=gy(H):(!yt(H)||_i(H))&&(ee=kg(W))):ne=!1}ne&&(B.set(W,ee),L(ee,W,x,I,B),B.delete(W)),qd(f,y,ee)}function lg(f,c){var y=f.length;if(!!y)return c+=c<0?y:0,xi(c,y)?f[c]:e}function ug(f,c,y){c.length?c=vt(c,function(I){return Re(I)?function(B){return Lo(B,I.length===1?I[0]:I)}:I}):c=[Or];var x=-1;c=vt(c,Vr(Ce()));var L=og(f,function(I,B,H){var W=vt(c,function(j){return j(I)});return{criteria:W,index:++x,value:I}});return OS(L,function(I,B){return gb(I,B,y)})}function ib(f,c){return fg(f,c,function(y,x){return Oh(f,x)})}function fg(f,c,y){for(var x=-1,L=c.length,I={};++x<L;){var B=c[x],H=Lo(f,B);y(H,B)&&ws(I,qi(B,f),H)}return I}function ob(f){return function(c){return Lo(c,f)}}function nh(f,c,y,x){var L=x?MS:fa,I=-1,B=c.length,H=f;for(f===c&&(c=Lr(c)),y&&(H=vt(f,Vr(y)));++I<B;)for(var W=0,j=c[I],ee=y?y(j):j;(W=L(H,ee,W,x))>-1;)H!==f&&$l.call(H,W,1),$l.call(f,W,1);return f}function dg(f,c){for(var y=f?c.length:0,x=y-1;y--;){var L=c[y];if(y==x||L!==I){var I=L;xi(L)?$l.call(f,L,1):sh(f,L)}}return f}function ih(f,c){return f+Zl(Y0()*(c-f+1))}function ab(f,c,y,x){for(var L=-1,I=Pt(Kl((c-f)/(y||1)),0),B=q(I);I--;)B[x?I:++L]=f,f+=y;return B}function oh(f,c){var y="";if(!f||c<1||c>te)return y;do c%2&&(y+=f),c=Zl(c/2),c&&(f+=f);while(c);return y}function Pe(f,c){return _h(Gg(f,c,Or),f+"")}function sb(f){return q0(_a(f))}function lb(f,c){var y=_a(f);return cu(y,bo(c,0,y.length))}function ws(f,c,y,x){if(!yt(f))return f;c=qi(c,f);for(var L=-1,I=c.length,B=I-1,H=f;H!=null&&++L<I;){var W=jn(c[L]),j=y;if(W==="__proto__"||W==="constructor"||W==="prototype")return f;if(L!=B){var ee=H[W];j=x?x(ee,W,H):e,j===e&&(j=yt(ee)?ee:xi(c[L+1])?[]:{})}gs(H,W,j),H=H[W]}return f}var hg=Ql?function(f,c){return Ql.set(f,c),f}:Or,ub=ql?function(f,c){return ql(f,"toString",{configurable:!0,enumerable:!1,value:Ah(c),writable:!0})}:Or;function fb(f){return cu(_a(f))}function hn(f,c,y){var x=-1,L=f.length;c<0&&(c=-c>L?0:L+c),y=y>L?L:y,y<0&&(y+=L),L=c>y?0:y-c>>>0,c>>>=0;for(var I=q(L);++x<L;)I[x]=f[x+c];return I}function db(f,c){var y;return Xi(f,function(x,L,I){return y=c(x,L,I),!y}),!!y}function iu(f,c,y){var x=0,L=f==null?x:f.length;if(typeof c=="number"&&c===c&&L<=Ze){for(;x<L;){var I=x+L>>>1,B=f[I];B!==null&&!Xr(B)&&(y?B<=c:B<c)?x=I+1:L=I}return L}return ah(f,c,Or,y)}function ah(f,c,y,x){var L=0,I=f==null?0:f.length;if(I===0)return 0;c=y(c);for(var B=c!==c,H=c===null,W=Xr(c),j=c===e;L<I;){var ee=Zl((L+I)/2),ne=y(f[ee]),fe=ne!==e,ve=ne===null,xe=ne===ne,Ie=Xr(ne);if(B)var _e=x||xe;else j?_e=xe&&(x||fe):H?_e=xe&&fe&&(x||!ve):W?_e=xe&&fe&&!ve&&(x||!Ie):ve||Ie?_e=!1:_e=x?ne<=c:ne<c;_e?L=ee+1:I=ee}return ir(I,me)}function cg(f,c){for(var y=-1,x=f.length,L=0,I=[];++y<x;){var B=f[y],H=c?c(B):B;if(!y||!Rn(H,W)){var W=H;I[L++]=B===0?0:B}}return I}function vg(f){return typeof f=="number"?f:Xr(f)?pe:+f}function Yr(f){if(typeof f=="string")return f;if(Re(f))return vt(f,Yr)+"";if(Xr(f))return X0?X0.call(f):"";var c=f+"";return c=="0"&&1/f==-Y?"-0":c}function $i(f,c,y){var x=-1,L=Fl,I=f.length,B=!0,H=[],W=H;if(y)B=!1,L=Bd;else if(I>=i){var j=c?null:_b(f);if(j)return Hl(j);B=!1,L=fs,W=new To}else W=c?[]:H;e:for(;++x<I;){var ee=f[x],ne=c?c(ee):ee;if(ee=y||ee!==0?ee:0,B&&ne===ne){for(var fe=W.length;fe--;)if(W[fe]===ne)continue e;c&&W.push(ne),H.push(ee)}else L(W,ne,y)||(W!==H&&W.push(ne),H.push(ee))}return H}function sh(f,c){return c=qi(c,f),f=Wg(f,c),f==null||delete f[jn(cn(c))]}function pg(f,c,y,x){return ws(f,c,y(Lo(f,c)),x)}function ou(f,c,y,x){for(var L=f.length,I=x?L:-1;(x?I--:++I<L)&&c(f[I],I,f););return y?hn(f,x?0:I,x?I+1:L):hn(f,x?I+1:0,x?L:I)}function gg(f,c){var y=f;return y instanceof ke&&(y=y.value()),Dd(c,function(x,L){return L.func.apply(L.thisArg,Ui([x],L.args))},y)}function lh(f,c,y){var x=f.length;if(x<2)return x?$i(f[0]):[];for(var L=-1,I=q(x);++L<x;)for(var B=f[L],H=-1;++H<x;)H!=L&&(I[L]=ys(I[L]||B,f[H],c,y));return $i(Zt(I,1),c,y)}function yg(f,c,y){for(var x=-1,L=f.length,I=c.length,B={};++x<L;){var H=x<I?c[x]:e;y(B,f[x],H)}return B}function uh(f){return Et(f)?f:[]}function fh(f){return typeof f=="function"?f:Or}function qi(f,c){return Re(f)?f:Ch(f,c)?[f]:Xg(Qe(f))}var hb=Pe;function Ki(f,c,y){var x=f.length;return y=y===e?x:y,!c&&y>=x?f:hn(f,c,y)}var mg=jS||function(f){return Kt.clearTimeout(f)};function Cg(f,c){if(c)return f.slice();var y=f.length,x=z0?z0(y):new f.constructor(y);return f.copy(x),x}function dh(f){var c=new f.constructor(f.byteLength);return new Yl(c).set(new Yl(f)),c}function cb(f,c){var y=c?dh(f.buffer):f.buffer;return new f.constructor(y,f.byteOffset,f.byteLength)}function vb(f){var c=new f.constructor(f.source,r0.exec(f));return c.lastIndex=f.lastIndex,c}function pb(f){return ps?rt(ps.call(f)):{}}function wg(f,c){var y=c?dh(f.buffer):f.buffer;return new f.constructor(y,f.byteOffset,f.length)}function xg(f,c){if(f!==c){var y=f!==e,x=f===null,L=f===f,I=Xr(f),B=c!==e,H=c===null,W=c===c,j=Xr(c);if(!H&&!j&&!I&&f>c||I&&B&&W&&!H&&!j||x&&B&&W||!y&&W||!L)return 1;if(!x&&!I&&!j&&f<c||j&&y&&L&&!x&&!I||H&&y&&L||!B&&L||!W)return-1}return 0}function gb(f,c,y){for(var x=-1,L=f.criteria,I=c.criteria,B=L.length,H=y.length;++x<B;){var W=xg(L[x],I[x]);if(W){if(x>=H)return W;var j=y[x];return W*(j=="desc"?-1:1)}}return f.index-c.index}function _g(f,c,y,x){for(var L=-1,I=f.length,B=y.length,H=-1,W=c.length,j=Pt(I-B,0),ee=q(W+j),ne=!x;++H<W;)ee[H]=c[H];for(;++L<B;)(ne||L<I)&&(ee[y[L]]=f[L]);for(;j--;)ee[H++]=f[L++];return ee}function Eg(f,c,y,x){for(var L=-1,I=f.length,B=-1,H=y.length,W=-1,j=c.length,ee=Pt(I-H,0),ne=q(ee+j),fe=!x;++L<ee;)ne[L]=f[L];for(var ve=L;++W<j;)ne[ve+W]=c[W];for(;++B<H;)(fe||L<I)&&(ne[ve+y[B]]=f[L++]);return ne}function Lr(f,c){var y=-1,x=f.length;for(c||(c=q(x));++y<x;)c[y]=f[y];return c}function Jn(f,c,y,x){var L=!y;y||(y={});for(var I=-1,B=c.length;++I<B;){var H=c[I],W=x?x(y[H],f[H],H,y,f):e;W===e&&(W=f[H]),L?mi(y,H,W):gs(y,H,W)}return y}function yb(f,c){return Jn(f,mh(f),c)}function mb(f,c){return Jn(f,Dg(f),c)}function au(f,c){return function(y,x){var L=Re(y)?ES:zT,I=c?c():{};return L(y,f,Ce(x,2),I)}}function ma(f){return Pe(function(c,y){var x=-1,L=y.length,I=L>1?y[L-1]:e,B=L>2?y[2]:e;for(I=f.length>3&&typeof I=="function"?(L--,I):e,B&&cr(y[0],y[1],B)&&(I=L<3?e:I,L=1),c=rt(c);++x<L;){var H=y[x];H&&f(c,H,x,I)}return c})}function Sg(f,c){return function(y,x){if(y==null)return y;if(!Rr(y))return f(y,x);for(var L=y.length,I=c?L:-1,B=rt(y);(c?I--:++I<L)&&x(B[I],I,B)!==!1;);return y}}function Tg(f){return function(c,y,x){for(var L=-1,I=rt(c),B=x(c),H=B.length;H--;){var W=B[f?H:++L];if(y(I[W],W,I)===!1)break}return c}}function Cb(f,c,y){var x=c&C,L=xs(f);function I(){var B=this&&this!==Kt&&this instanceof I?L:f;return B.apply(x?y:this,arguments)}return I}function bg(f){return function(c){c=Qe(c);var y=da(c)?bn(c):e,x=y?y[0]:c.charAt(0),L=y?Ki(y,1).join(""):c.slice(1);return x[f]()+L}}function Ca(f){return function(c){return Dd(Sy(Ey(c).replace(uS,"")),f,"")}}function xs(f){return function(){var c=arguments;switch(c.length){case 0:return new f;case 1:return new f(c[0]);case 2:return new f(c[0],c[1]);case 3:return new f(c[0],c[1],c[2]);case 4:return new f(c[0],c[1],c[2],c[3]);case 5:return new f(c[0],c[1],c[2],c[3],c[4]);case 6:return new f(c[0],c[1],c[2],c[3],c[4],c[5]);case 7:return new f(c[0],c[1],c[2],c[3],c[4],c[5],c[6])}var y=ya(f.prototype),x=f.apply(y,c);return yt(x)?x:y}}function wb(f,c,y){var x=xs(f);function L(){for(var I=arguments.length,B=q(I),H=I,W=wa(L);H--;)B[H]=arguments[H];var j=I<3&&B[0]!==W&&B[I-1]!==W?[]:Vi(B,W);if(I-=j.length,I<y)return Ig(f,c,su,L.placeholder,e,B,j,e,e,y-I);var ee=this&&this!==Kt&&this instanceof L?x:f;return Ur(ee,this,B)}return L}function Lg(f){return function(c,y,x){var L=rt(c);if(!Rr(c)){var I=Ce(y,3);c=Ht(c),y=function(H){return I(L[H],H,L)}}var B=f(c,y,x);return B>-1?L[I?c[B]:B]:e}}function Rg(f){return wi(function(c){var y=c.length,x=y,L=fn.prototype.thru;for(f&&c.reverse();x--;){var I=c[x];if(typeof I!="function")throw new un(a);if(L&&!B&&du(I)=="wrapper")var B=new fn([],!0)}for(x=B?x:y;++x<y;){I=c[x];var H=du(I),W=H=="wrapper"?gh(I):e;W&&wh(W[0])&&W[1]==(R|S|T|O)&&!W[4].length&&W[9]==1?B=B[du(W[0])].apply(B,W[3]):B=I.length==1&&wh(I)?B[H]():B.thru(I)}return function(){var j=arguments,ee=j[0];if(B&&j.length==1&&Re(ee))return B.plant(ee).value();for(var ne=0,fe=y?c[ne].apply(this,j):ee;++ne<y;)fe=c[ne].call(this,fe);return fe}})}function su(f,c,y,x,L,I,B,H,W,j){var ee=c&R,ne=c&C,fe=c&w,ve=c&(S|b),xe=c&A,Ie=fe?e:xs(f);function _e(){for(var Be=arguments.length,We=q(Be),$r=Be;$r--;)We[$r]=arguments[$r];if(ve)var vr=wa(_e),qr=AS(We,vr);if(x&&(We=_g(We,x,L,ve)),I&&(We=Eg(We,I,B,ve)),Be-=qr,ve&&Be<j){var St=Vi(We,vr);return Ig(f,c,su,_e.placeholder,y,We,St,H,W,j-Be)}var Mn=ne?y:this,Si=fe?Mn[f]:f;return Be=We.length,H?We=zb(We,H):xe&&Be>1&&We.reverse(),ee&&W<Be&&(We.length=W),this&&this!==Kt&&this instanceof _e&&(Si=Ie||xs(Si)),Si.apply(Mn,We)}return _e}function Mg(f,c){return function(y,x){return qT(y,f,c(x),{})}}function lu(f,c){return function(y,x){var L;if(y===e&&x===e)return c;if(y!==e&&(L=y),x!==e){if(L===e)return x;typeof y=="string"||typeof x=="string"?(y=Yr(y),x=Yr(x)):(y=vg(y),x=vg(x)),L=f(y,x)}return L}}function hh(f){return wi(function(c){return c=vt(c,Vr(Ce())),Pe(function(y){var x=this;return f(c,function(L){return Ur(L,x,y)})})})}function uu(f,c){c=c===e?" ":Yr(c);var y=c.length;if(y<2)return y?oh(c,f):c;var x=oh(c,Kl(f/ha(c)));return da(c)?Ki(bn(x),0,f).join(""):x.slice(0,f)}function xb(f,c,y,x){var L=c&C,I=xs(f);function B(){for(var H=-1,W=arguments.length,j=-1,ee=x.length,ne=q(ee+W),fe=this&&this!==Kt&&this instanceof B?I:f;++j<ee;)ne[j]=x[j];for(;W--;)ne[j++]=arguments[++H];return Ur(fe,L?y:this,ne)}return B}function Og(f){return function(c,y,x){return x&&typeof x!="number"&&cr(c,y,x)&&(y=x=e),c=Ei(c),y===e?(y=c,c=0):y=Ei(y),x=x===e?c<y?1:-1:Ei(x),ab(c,y,x,f)}}function fu(f){return function(c,y){return typeof c=="string"&&typeof y=="string"||(c=vn(c),y=vn(y)),f(c,y)}}function Ig(f,c,y,x,L,I,B,H,W,j){var ee=c&S,ne=ee?B:e,fe=ee?e:B,ve=ee?I:e,xe=ee?e:I;c|=ee?T:E,c&=~(ee?E:T),c&_||(c&=~(C|w));var Ie=[f,c,L,ve,ne,xe,fe,H,W,j],_e=y.apply(e,Ie);return wh(f)&&Ug(_e,Ie),_e.placeholder=x,Vg(_e,f,c)}function ch(f){var c=Nt[f];return function(y,x){if(y=vn(y),x=x==null?0:ir(Oe(x),292),x&&V0(y)){var L=(Qe(y)+"e").split("e"),I=c(L[0]+"e"+(+L[1]+x));return L=(Qe(I)+"e").split("e"),+(L[0]+"e"+(+L[1]-x))}return c(y)}}var _b=pa&&1/Hl(new pa([,-0]))[1]==Y?function(f){return new pa(f)}:Bh;function Ag(f){return function(c){var y=or(c);return y==Tr?Ud(c):y==br?HS(c):IS(c,f(c))}}function Ci(f,c,y,x,L,I,B,H){var W=c&w;if(!W&&typeof f!="function")throw new un(a);var j=x?x.length:0;if(j||(c&=~(T|E),x=L=e),B=B===e?B:Pt(Oe(B),0),H=H===e?H:Oe(H),j-=L?L.length:0,c&E){var ee=x,ne=L;x=L=e}var fe=W?e:gh(f),ve=[f,c,y,x,L,ee,ne,I,B,H];if(fe&&Fb(ve,fe),f=ve[0],c=ve[1],y=ve[2],x=ve[3],L=ve[4],H=ve[9]=ve[9]===e?W?0:f.length:Pt(ve[9]-j,0),!H&&c&(S|b)&&(c&=~(S|b)),!c||c==C)var xe=Cb(f,c,y);else c==S||c==b?xe=wb(f,c,H):(c==T||c==(C|T))&&!L.length?xe=xb(f,c,y,x):xe=su.apply(e,ve);var Ie=fe?hg:Ug;return Vg(Ie(xe,ve),f,c)}function Ng(f,c,y,x){return f===e||Rn(f,va[y])&&!Je.call(x,y)?c:f}function Pg(f,c,y,x,L,I){return yt(f)&&yt(c)&&(I.set(c,f),nu(f,c,e,Pg,I),I.delete(c)),f}function Eb(f){return Ss(f)?e:f}function Bg(f,c,y,x,L,I){var B=y&g,H=f.length,W=c.length;if(H!=W&&!(B&&W>H))return!1;var j=I.get(f),ee=I.get(c);if(j&&ee)return j==c&&ee==f;var ne=-1,fe=!0,ve=y&m?new To:e;for(I.set(f,c),I.set(c,f);++ne<H;){var xe=f[ne],Ie=c[ne];if(x)var _e=B?x(Ie,xe,ne,c,f,I):x(xe,Ie,ne,f,c,I);if(_e!==e){if(_e)continue;fe=!1;break}if(ve){if(!Fd(c,function(Be,We){if(!fs(ve,We)&&(xe===Be||L(xe,Be,y,x,I)))return ve.push(We)})){fe=!1;break}}else if(!(xe===Ie||L(xe,Ie,y,x,I))){fe=!1;break}}return I.delete(f),I.delete(c),fe}function Sb(f,c,y,x,L,I,B){switch(y){case la:if(f.byteLength!=c.byteLength||f.byteOffset!=c.byteOffset)return!1;f=f.buffer,c=c.buffer;case xo:return!(f.byteLength!=c.byteLength||!I(new Yl(f),new Yl(c)));case At:case Sr:case Gi:return Rn(+f,+c);case Tn:return f.name==c.name&&f.message==c.message;case Zn:case Wr:return f==c+"";case Tr:var H=Ud;case br:var W=x&g;if(H||(H=Hl),f.size!=c.size&&!W)return!1;var j=B.get(f);if(j)return j==c;x|=m,B.set(f,c);var ee=Bg(H(f),H(c),x,L,I,B);return B.delete(f),ee;case an:if(ps)return ps.call(f)==ps.call(c)}return!1}function Tb(f,c,y,x,L,I){var B=y&g,H=vh(f),W=H.length,j=vh(c),ee=j.length;if(W!=ee&&!B)return!1;for(var ne=W;ne--;){var fe=H[ne];if(!(B?fe in c:Je.call(c,fe)))return!1}var ve=I.get(f),xe=I.get(c);if(ve&&xe)return ve==c&&xe==f;var Ie=!0;I.set(f,c),I.set(c,f);for(var _e=B;++ne<W;){fe=H[ne];var Be=f[fe],We=c[fe];if(x)var $r=B?x(We,Be,fe,c,f,I):x(Be,We,fe,f,c,I);if(!($r===e?Be===We||L(Be,We,y,x,I):$r)){Ie=!1;break}_e||(_e=fe=="constructor")}if(Ie&&!_e){var vr=f.constructor,qr=c.constructor;vr!=qr&&"constructor"in f&&"constructor"in c&&!(typeof vr=="function"&&vr instanceof vr&&typeof qr=="function"&&qr instanceof qr)&&(Ie=!1)}return I.delete(f),I.delete(c),Ie}function wi(f){return _h(Gg(f,e,Zg),f+"")}function vh(f){return tg(f,Ht,mh)}function ph(f){return tg(f,Mr,Dg)}var gh=Ql?function(f){return Ql.get(f)}:Bh;function du(f){for(var c=f.name+"",y=ga[c],x=Je.call(ga,c)?y.length:0;x--;){var L=y[x],I=L.func;if(I==null||I==f)return L.name}return c}function wa(f){var c=Je.call(M,"placeholder")?M:f;return c.placeholder}function Ce(){var f=M.iteratee||Nh;return f=f===Nh?ig:f,arguments.length?f(arguments[0],arguments[1]):f}function hu(f,c){var y=f.__data__;return Nb(c)?y[typeof c=="string"?"string":"hash"]:y.map}function yh(f){for(var c=Ht(f),y=c.length;y--;){var x=c[y],L=f[x];c[y]=[x,L,Hg(L)]}return c}function Ro(f,c){var y=DS(f,c);return ng(y)?y:e}function bb(f){var c=Je.call(f,Eo),y=f[Eo];try{f[Eo]=e;var x=!0}catch(I){}var L=Ul.call(f);return x&&(c?f[Eo]=y:delete f[Eo]),L}var mh=Yd?function(f){return f==null?[]:(f=rt(f),Wi(Yd(f),function(c){return W0.call(f,c)}))}:Dh,Dg=Yd?function(f){for(var c=[];f;)Ui(c,mh(f)),f=Xl(f);return c}:Dh,or=hr;(Xd&&or(new Xd(new ArrayBuffer(1)))!=la||hs&&or(new hs)!=Tr||$d&&or($d.resolve())!=us||pa&&or(new pa)!=br||cs&&or(new cs)!=wo)&&(or=function(f){var c=hr(f),y=c==on?f.constructor:e,x=y?Mo(y):"";if(x)switch(x){case lT:return la;case uT:return Tr;case fT:return us;case dT:return br;case hT:return wo}return c});function Lb(f,c,y){for(var x=-1,L=y.length;++x<L;){var I=y[x],B=I.size;switch(I.type){case"drop":f+=B;break;case"dropRight":c-=B;break;case"take":c=ir(c,f+B);break;case"takeRight":f=Pt(f,c-B);break}}return{start:f,end:c}}function Rb(f){var c=f.match(PE);return c?c[1].split(BE):[]}function Fg(f,c,y){c=qi(c,f);for(var x=-1,L=c.length,I=!1;++x<L;){var B=jn(c[x]);if(!(I=f!=null&&y(f,B)))break;f=f[B]}return I||++x!=L?I:(L=f==null?0:f.length,!!L&&Cu(L)&&xi(B,L)&&(Re(f)||Oo(f)))}function Mb(f){var c=f.length,y=new f.constructor(c);return c&&typeof f[0]=="string"&&Je.call(f,"index")&&(y.index=f.index,y.input=f.input),y}function kg(f){return typeof f.constructor=="function"&&!_s(f)?ya(Xl(f)):{}}function Ob(f,c,y){var x=f.constructor;switch(c){case xo:return dh(f);case At:case Sr:return new x(+f);case la:return cb(f,y);case yd:case md:case Cd:case wd:case xd:case _d:case Ed:case Sd:case Td:return wg(f,y);case Tr:return new x;case Gi:case Wr:return new x(f);case Zn:return vb(f);case br:return new x;case an:return pb(f)}}function Ib(f,c){var y=c.length;if(!y)return f;var x=y-1;return c[x]=(y>1?"& ":"")+c[x],c=c.join(y>2?", ":" "),f.replace(NE,`{
/* [wrapped with `+c+`] */
`)}function Ab(f){return Re(f)||Oo(f)||!!(U0&&f&&f[U0])}function xi(f,c){var y=typeof f;return c=c==null?te:c,!!c&&(y=="number"||y!="symbol"&&VE.test(f))&&f>-1&&f%1==0&&f<c}function cr(f,c,y){if(!yt(y))return!1;var x=typeof c;return(x=="number"?Rr(y)&&xi(c,y.length):x=="string"&&c in y)?Rn(y[c],f):!1}function Ch(f,c){if(Re(f))return!1;var y=typeof f;return y=="number"||y=="symbol"||y=="boolean"||f==null||Xr(f)?!0:ME.test(f)||!RE.test(f)||c!=null&&f in rt(c)}function Nb(f){var c=typeof f;return c=="string"||c=="number"||c=="symbol"||c=="boolean"?f!=="__proto__":f===null}function wh(f){var c=du(f),y=M[c];if(typeof y!="function"||!(c in ke.prototype))return!1;if(f===y)return!0;var x=gh(y);return!!x&&f===x[0]}function Pb(f){return!!H0&&H0 in f}var Bb=Gl?_i:Fh;function _s(f){var c=f&&f.constructor,y=typeof c=="function"&&c.prototype||va;return f===y}function Hg(f){return f===f&&!yt(f)}function zg(f,c){return function(y){return y==null?!1:y[f]===c&&(c!==e||f in rt(y))}}function Db(f){var c=yu(f,function(x){return y.size===u&&y.clear(),x}),y=c.cache;return c}function Fb(f,c){var y=f[1],x=c[1],L=y|x,I=L<(C|w|R),B=x==R&&y==S||x==R&&y==O&&f[7].length<=c[8]||x==(R|O)&&c[7].length<=c[8]&&y==S;if(!(I||B))return f;x&C&&(f[2]=c[2],L|=y&C?0:_);var H=c[3];if(H){var W=f[3];f[3]=W?_g(W,H,c[4]):H,f[4]=W?Vi(f[3],d):c[4]}return H=c[5],H&&(W=f[5],f[5]=W?Eg(W,H,c[6]):H,f[6]=W?Vi(f[5],d):c[6]),H=c[7],H&&(f[7]=H),x&R&&(f[8]=f[8]==null?c[8]:ir(f[8],c[8])),f[9]==null&&(f[9]=c[9]),f[0]=c[0],f[1]=L,f}function kb(f){var c=[];if(f!=null)for(var y in rt(f))c.push(y);return c}function Hb(f){return Ul.call(f)}function Gg(f,c,y){return c=Pt(c===e?f.length-1:c,0),function(){for(var x=arguments,L=-1,I=Pt(x.length-c,0),B=q(I);++L<I;)B[L]=x[c+L];L=-1;for(var H=q(c+1);++L<c;)H[L]=x[L];return H[c]=y(B),Ur(f,this,H)}}function Wg(f,c){return c.length<2?f:Lo(f,hn(c,0,-1))}function zb(f,c){for(var y=f.length,x=ir(c.length,y),L=Lr(f);x--;){var I=c[x];f[x]=xi(I,y)?L[I]:e}return f}function xh(f,c){if(!(c==="constructor"&&typeof f[c]=="function")&&c!="__proto__")return f[c]}var Ug=Yg(hg),Es=tT||function(f,c){return Kt.setTimeout(f,c)},_h=Yg(ub);function Vg(f,c,y){var x=c+"";return _h(f,Ib(x,Gb(Rb(x),y)))}function Yg(f){var c=0,y=0;return function(){var x=oT(),L=z-(x-y);if(y=x,L>0){if(++c>=k)return arguments[0]}else c=0;return f.apply(e,arguments)}}function cu(f,c){var y=-1,x=f.length,L=x-1;for(c=c===e?x:c;++y<c;){var I=ih(y,L),B=f[I];f[I]=f[y],f[y]=B}return f.length=c,f}var Xg=Db(function(f){var c=[];return f.charCodeAt(0)===46&&c.push(""),f.replace(OE,function(y,x,L,I){c.push(L?I.replace(kE,"$1"):x||y)}),c});function jn(f){if(typeof f=="string"||Xr(f))return f;var c=f+"";return c=="0"&&1/f==-Y?"-0":c}function Mo(f){if(f!=null){try{return Wl.call(f)}catch(c){}try{return f+""}catch(c){}}return""}function Gb(f,c){return ln(Ge,function(y){var x="_."+y[0];c&y[1]&&!Fl(f,x)&&f.push(x)}),f.sort()}function $g(f){if(f instanceof ke)return f.clone();var c=new fn(f.__wrapped__,f.__chain__);return c.__actions__=Lr(f.__actions__),c.__index__=f.__index__,c.__values__=f.__values__,c}function Wb(f,c,y){(y?cr(f,c,y):c===e)?c=1:c=Pt(Oe(c),0);var x=f==null?0:f.length;if(!x||c<1)return[];for(var L=0,I=0,B=q(Kl(x/c));L<x;)B[I++]=hn(f,L,L+=c);return B}function Ub(f){for(var c=-1,y=f==null?0:f.length,x=0,L=[];++c<y;){var I=f[c];I&&(L[x++]=I)}return L}function Vb(){var f=arguments.length;if(!f)return[];for(var c=q(f-1),y=arguments[0],x=f;x--;)c[x-1]=arguments[x];return Ui(Re(y)?Lr(y):[y],Zt(c,1))}var Yb=Pe(function(f,c){return Et(f)?ys(f,Zt(c,1,Et,!0)):[]}),Xb=Pe(function(f,c){var y=cn(c);return Et(y)&&(y=e),Et(f)?ys(f,Zt(c,1,Et,!0),Ce(y,2)):[]}),$b=Pe(function(f,c){var y=cn(c);return Et(y)&&(y=e),Et(f)?ys(f,Zt(c,1,Et,!0),e,y):[]});function qb(f,c,y){var x=f==null?0:f.length;return x?(c=y||c===e?1:Oe(c),hn(f,c<0?0:c,x)):[]}function Kb(f,c,y){var x=f==null?0:f.length;return x?(c=y||c===e?1:Oe(c),c=x-c,hn(f,0,c<0?0:c)):[]}function Zb(f,c){return f&&f.length?ou(f,Ce(c,3),!0,!0):[]}function Qb(f,c){return f&&f.length?ou(f,Ce(c,3),!0):[]}function Jb(f,c,y,x){var L=f==null?0:f.length;return L?(y&&typeof y!="number"&&cr(f,c,y)&&(y=0,x=L),VT(f,c,y,x)):[]}function qg(f,c,y){var x=f==null?0:f.length;if(!x)return-1;var L=y==null?0:Oe(y);return L<0&&(L=Pt(x+L,0)),kl(f,Ce(c,3),L)}function Kg(f,c,y){var x=f==null?0:f.length;if(!x)return-1;var L=x-1;return y!==e&&(L=Oe(y),L=y<0?Pt(x+L,0):ir(L,x-1)),kl(f,Ce(c,3),L,!0)}function Zg(f){var c=f==null?0:f.length;return c?Zt(f,1):[]}function jb(f){var c=f==null?0:f.length;return c?Zt(f,Y):[]}function e2(f,c){var y=f==null?0:f.length;return y?(c=c===e?1:Oe(c),Zt(f,c)):[]}function t2(f){for(var c=-1,y=f==null?0:f.length,x={};++c<y;){var L=f[c];x[L[0]]=L[1]}return x}function Qg(f){return f&&f.length?f[0]:e}function r2(f,c,y){var x=f==null?0:f.length;if(!x)return-1;var L=y==null?0:Oe(y);return L<0&&(L=Pt(x+L,0)),fa(f,c,L)}function n2(f){var c=f==null?0:f.length;return c?hn(f,0,-1):[]}var i2=Pe(function(f){var c=vt(f,uh);return c.length&&c[0]===f[0]?jd(c):[]}),o2=Pe(function(f){var c=cn(f),y=vt(f,uh);return c===cn(y)?c=e:y.pop(),y.length&&y[0]===f[0]?jd(y,Ce(c,2)):[]}),a2=Pe(function(f){var c=cn(f),y=vt(f,uh);return c=typeof c=="function"?c:e,c&&y.pop(),y.length&&y[0]===f[0]?jd(y,e,c):[]});function s2(f,c){return f==null?"":nT.call(f,c)}function cn(f){var c=f==null?0:f.length;return c?f[c-1]:e}function l2(f,c,y){var x=f==null?0:f.length;if(!x)return-1;var L=x;return y!==e&&(L=Oe(y),L=L<0?Pt(x+L,0):ir(L,x-1)),c===c?GS(f,c,L):kl(f,I0,L,!0)}function u2(f,c){return f&&f.length?lg(f,Oe(c)):e}var f2=Pe(Jg);function Jg(f,c){return f&&f.length&&c&&c.length?nh(f,c):f}function d2(f,c,y){return f&&f.length&&c&&c.length?nh(f,c,Ce(y,2)):f}function h2(f,c,y){return f&&f.length&&c&&c.length?nh(f,c,e,y):f}var c2=wi(function(f,c){var y=f==null?0:f.length,x=Kd(f,c);return dg(f,vt(c,function(L){return xi(L,y)?+L:L}).sort(xg)),x});function v2(f,c){var y=[];if(!(f&&f.length))return y;var x=-1,L=[],I=f.length;for(c=Ce(c,3);++x<I;){var B=f[x];c(B,x,f)&&(y.push(B),L.push(x))}return dg(f,L),y}function Eh(f){return f==null?f:sT.call(f)}function p2(f,c,y){var x=f==null?0:f.length;return x?(y&&typeof y!="number"&&cr(f,c,y)?(c=0,y=x):(c=c==null?0:Oe(c),y=y===e?x:Oe(y)),hn(f,c,y)):[]}function g2(f,c){return iu(f,c)}function y2(f,c,y){return ah(f,c,Ce(y,2))}function m2(f,c){var y=f==null?0:f.length;if(y){var x=iu(f,c);if(x<y&&Rn(f[x],c))return x}return-1}function C2(f,c){return iu(f,c,!0)}function w2(f,c,y){return ah(f,c,Ce(y,2),!0)}function x2(f,c){var y=f==null?0:f.length;if(y){var x=iu(f,c,!0)-1;if(Rn(f[x],c))return x}return-1}function _2(f){return f&&f.length?cg(f):[]}function E2(f,c){return f&&f.length?cg(f,Ce(c,2)):[]}function S2(f){var c=f==null?0:f.length;return c?hn(f,1,c):[]}function T2(f,c,y){return f&&f.length?(c=y||c===e?1:Oe(c),hn(f,0,c<0?0:c)):[]}function b2(f,c,y){var x=f==null?0:f.length;return x?(c=y||c===e?1:Oe(c),c=x-c,hn(f,c<0?0:c,x)):[]}function L2(f,c){return f&&f.length?ou(f,Ce(c,3),!1,!0):[]}function R2(f,c){return f&&f.length?ou(f,Ce(c,3)):[]}var M2=Pe(function(f){return $i(Zt(f,1,Et,!0))}),O2=Pe(function(f){var c=cn(f);return Et(c)&&(c=e),$i(Zt(f,1,Et,!0),Ce(c,2))}),I2=Pe(function(f){var c=cn(f);return c=typeof c=="function"?c:e,$i(Zt(f,1,Et,!0),e,c)});function A2(f){return f&&f.length?$i(f):[]}function N2(f,c){return f&&f.length?$i(f,Ce(c,2)):[]}function P2(f,c){return c=typeof c=="function"?c:e,f&&f.length?$i(f,e,c):[]}function Sh(f){if(!(f&&f.length))return[];var c=0;return f=Wi(f,function(y){if(Et(y))return c=Pt(y.length,c),!0}),Gd(c,function(y){return vt(f,kd(y))})}function jg(f,c){if(!(f&&f.length))return[];var y=Sh(f);return c==null?y:vt(y,function(x){return Ur(c,e,x)})}var B2=Pe(function(f,c){return Et(f)?ys(f,c):[]}),D2=Pe(function(f){return lh(Wi(f,Et))}),F2=Pe(function(f){var c=cn(f);return Et(c)&&(c=e),lh(Wi(f,Et),Ce(c,2))}),k2=Pe(function(f){var c=cn(f);return c=typeof c=="function"?c:e,lh(Wi(f,Et),e,c)}),H2=Pe(Sh);function z2(f,c){return yg(f||[],c||[],gs)}function G2(f,c){return yg(f||[],c||[],ws)}var W2=Pe(function(f){var c=f.length,y=c>1?f[c-1]:e;return y=typeof y=="function"?(f.pop(),y):e,jg(f,y)});function ey(f){var c=M(f);return c.__chain__=!0,c}function U2(f,c){return c(f),f}function vu(f,c){return c(f)}var V2=wi(function(f){var c=f.length,y=c?f[0]:0,x=this.__wrapped__,L=function(I){return Kd(I,f)};return c>1||this.__actions__.length||!(x instanceof ke)||!xi(y)?this.thru(L):(x=x.slice(y,+y+(c?1:0)),x.__actions__.push({func:vu,args:[L],thisArg:e}),new fn(x,this.__chain__).thru(function(I){return c&&!I.length&&I.push(e),I}))});function Y2(){return ey(this)}function X2(){return new fn(this.value(),this.__chain__)}function $2(){this.__values__===e&&(this.__values__=vy(this.value()));var f=this.__index__>=this.__values__.length,c=f?e:this.__values__[this.__index__++];return{done:f,value:c}}function q2(){return this}function K2(f){for(var c,y=this;y instanceof jl;){var x=$g(y);x.__index__=0,x.__values__=e,c?L.__wrapped__=x:c=x;var L=x;y=y.__wrapped__}return L.__wrapped__=f,c}function Z2(){var f=this.__wrapped__;if(f instanceof ke){var c=f;return this.__actions__.length&&(c=new ke(this)),c=c.reverse(),c.__actions__.push({func:vu,args:[Eh],thisArg:e}),new fn(c,this.__chain__)}return this.thru(Eh)}function Q2(){return gg(this.__wrapped__,this.__actions__)}var J2=au(function(f,c,y){Je.call(f,y)?++f[y]:mi(f,y,1)});function j2(f,c,y){var x=Re(f)?M0:UT;return y&&cr(f,c,y)&&(c=e),x(f,Ce(c,3))}function eL(f,c){var y=Re(f)?Wi:j0;return y(f,Ce(c,3))}var tL=Lg(qg),rL=Lg(Kg);function nL(f,c){return Zt(pu(f,c),1)}function iL(f,c){return Zt(pu(f,c),Y)}function oL(f,c,y){return y=y===e?1:Oe(y),Zt(pu(f,c),y)}function ty(f,c){var y=Re(f)?ln:Xi;return y(f,Ce(c,3))}function ry(f,c){var y=Re(f)?SS:J0;return y(f,Ce(c,3))}var aL=au(function(f,c,y){Je.call(f,y)?f[y].push(c):mi(f,y,[c])});function sL(f,c,y,x){f=Rr(f)?f:_a(f),y=y&&!x?Oe(y):0;var L=f.length;return y<0&&(y=Pt(L+y,0)),wu(f)?y<=L&&f.indexOf(c,y)>-1:!!L&&fa(f,c,y)>-1}var lL=Pe(function(f,c,y){var x=-1,L=typeof c=="function",I=Rr(f)?q(f.length):[];return Xi(f,function(B){I[++x]=L?Ur(c,B,y):ms(B,c,y)}),I}),uL=au(function(f,c,y){mi(f,y,c)});function pu(f,c){var y=Re(f)?vt:og;return y(f,Ce(c,3))}function fL(f,c,y,x){return f==null?[]:(Re(c)||(c=c==null?[]:[c]),y=x?e:y,Re(y)||(y=y==null?[]:[y]),ug(f,c,y))}var dL=au(function(f,c,y){f[y?0:1].push(c)},function(){return[[],[]]});function hL(f,c,y){var x=Re(f)?Dd:N0,L=arguments.length<3;return x(f,Ce(c,4),y,L,Xi)}function cL(f,c,y){var x=Re(f)?TS:N0,L=arguments.length<3;return x(f,Ce(c,4),y,L,J0)}function vL(f,c){var y=Re(f)?Wi:j0;return y(f,mu(Ce(c,3)))}function pL(f){var c=Re(f)?q0:sb;return c(f)}function gL(f,c,y){(y?cr(f,c,y):c===e)?c=1:c=Oe(c);var x=Re(f)?kT:lb;return x(f,c)}function yL(f){var c=Re(f)?HT:fb;return c(f)}function mL(f){if(f==null)return 0;if(Rr(f))return wu(f)?ha(f):f.length;var c=or(f);return c==Tr||c==br?f.size:th(f).length}function CL(f,c,y){var x=Re(f)?Fd:db;return y&&cr(f,c,y)&&(c=e),x(f,Ce(c,3))}var wL=Pe(function(f,c){if(f==null)return[];var y=c.length;return y>1&&cr(f,c[0],c[1])?c=[]:y>2&&cr(c[0],c[1],c[2])&&(c=[c[0]]),ug(f,Zt(c,1),[])}),gu=eT||function(){return Kt.Date.now()};function xL(f,c){if(typeof c!="function")throw new un(a);return f=Oe(f),function(){if(--f<1)return c.apply(this,arguments)}}function ny(f,c,y){return c=y?e:c,c=f&&c==null?f.length:c,Ci(f,R,e,e,e,e,c)}function iy(f,c){var y;if(typeof c!="function")throw new un(a);return f=Oe(f),function(){return--f>0&&(y=c.apply(this,arguments)),f<=1&&(c=e),y}}var Th=Pe(function(f,c,y){var x=C;if(y.length){var L=Vi(y,wa(Th));x|=T}return Ci(f,x,c,y,L)}),oy=Pe(function(f,c,y){var x=C|w;if(y.length){var L=Vi(y,wa(oy));x|=T}return Ci(c,x,f,y,L)});function ay(f,c,y){c=y?e:c;var x=Ci(f,S,e,e,e,e,e,c);return x.placeholder=ay.placeholder,x}function sy(f,c,y){c=y?e:c;var x=Ci(f,b,e,e,e,e,e,c);return x.placeholder=sy.placeholder,x}function ly(f,c,y){var x,L,I,B,H,W,j=0,ee=!1,ne=!1,fe=!0;if(typeof f!="function")throw new un(a);c=vn(c)||0,yt(y)&&(ee=!!y.leading,ne="maxWait"in y,I=ne?Pt(vn(y.maxWait)||0,c):I,fe="trailing"in y?!!y.trailing:fe);function ve(St){var Mn=x,Si=L;return x=L=e,j=St,B=f.apply(Si,Mn),B}function xe(St){return j=St,H=Es(Be,c),ee?ve(St):B}function Ie(St){var Mn=St-W,Si=St-j,Ly=c-Mn;return ne?ir(Ly,I-Si):Ly}function _e(St){var Mn=St-W,Si=St-j;return W===e||Mn>=c||Mn<0||ne&&Si>=I}function Be(){var St=gu();if(_e(St))return We(St);H=Es(Be,Ie(St))}function We(St){return H=e,fe&&x?ve(St):(x=L=e,B)}function $r(){H!==e&&mg(H),j=0,x=W=L=H=e}function vr(){return H===e?B:We(gu())}function qr(){var St=gu(),Mn=_e(St);if(x=arguments,L=this,W=St,Mn){if(H===e)return xe(W);if(ne)return mg(H),H=Es(Be,c),ve(W)}return H===e&&(H=Es(Be,c)),B}return qr.cancel=$r,qr.flush=vr,qr}var _L=Pe(function(f,c){return Q0(f,1,c)}),EL=Pe(function(f,c,y){return Q0(f,vn(c)||0,y)});function SL(f){return Ci(f,A)}function yu(f,c){if(typeof f!="function"||c!=null&&typeof c!="function")throw new un(a);var y=function(){var x=arguments,L=c?c.apply(this,x):x[0],I=y.cache;if(I.has(L))return I.get(L);var B=f.apply(this,x);return y.cache=I.set(L,B)||I,B};return y.cache=new(yu.Cache||yi),y}yu.Cache=yi;function mu(f){if(typeof f!="function")throw new un(a);return function(){var c=arguments;switch(c.length){case 0:return!f.call(this);case 1:return!f.call(this,c[0]);case 2:return!f.call(this,c[0],c[1]);case 3:return!f.call(this,c[0],c[1],c[2])}return!f.apply(this,c)}}function TL(f){return iy(2,f)}var bL=hb(function(f,c){c=c.length==1&&Re(c[0])?vt(c[0],Vr(Ce())):vt(Zt(c,1),Vr(Ce()));var y=c.length;return Pe(function(x){for(var L=-1,I=ir(x.length,y);++L<I;)x[L]=c[L].call(this,x[L]);return Ur(f,this,x)})}),bh=Pe(function(f,c){var y=Vi(c,wa(bh));return Ci(f,T,e,c,y)}),uy=Pe(function(f,c){var y=Vi(c,wa(uy));return Ci(f,E,e,c,y)}),LL=wi(function(f,c){return Ci(f,O,e,e,e,c)});function RL(f,c){if(typeof f!="function")throw new un(a);return c=c===e?c:Oe(c),Pe(f,c)}function ML(f,c){if(typeof f!="function")throw new un(a);return c=c==null?0:Pt(Oe(c),0),Pe(function(y){var x=y[c],L=Ki(y,0,c);return x&&Ui(L,x),Ur(f,this,L)})}function OL(f,c,y){var x=!0,L=!0;if(typeof f!="function")throw new un(a);return yt(y)&&(x="leading"in y?!!y.leading:x,L="trailing"in y?!!y.trailing:L),ly(f,c,{leading:x,maxWait:c,trailing:L})}function IL(f){return ny(f,1)}function AL(f,c){return bh(fh(c),f)}function NL(){if(!arguments.length)return[];var f=arguments[0];return Re(f)?f:[f]}function PL(f){return dn(f,p)}function BL(f,c){return c=typeof c=="function"?c:e,dn(f,p,c)}function DL(f){return dn(f,h|p)}function FL(f,c){return c=typeof c=="function"?c:e,dn(f,h|p,c)}function kL(f,c){return c==null||Z0(f,c,Ht(c))}function Rn(f,c){return f===c||f!==f&&c!==c}var HL=fu(Jd),zL=fu(function(f,c){return f>=c}),Oo=rg(function(){return arguments}())?rg:function(f){return xt(f)&&Je.call(f,"callee")&&!W0.call(f,"callee")},Re=q.isArray,GL=E0?Vr(E0):KT;function Rr(f){return f!=null&&Cu(f.length)&&!_i(f)}function Et(f){return xt(f)&&Rr(f)}function WL(f){return f===!0||f===!1||xt(f)&&hr(f)==At}var Zi=rT||Fh,UL=S0?Vr(S0):ZT;function VL(f){return xt(f)&&f.nodeType===1&&!Ss(f)}function YL(f){if(f==null)return!0;if(Rr(f)&&(Re(f)||typeof f=="string"||typeof f.splice=="function"||Zi(f)||xa(f)||Oo(f)))return!f.length;var c=or(f);if(c==Tr||c==br)return!f.size;if(_s(f))return!th(f).length;for(var y in f)if(Je.call(f,y))return!1;return!0}function XL(f,c){return Cs(f,c)}function $L(f,c,y){y=typeof y=="function"?y:e;var x=y?y(f,c):e;return x===e?Cs(f,c,e,y):!!x}function Lh(f){if(!xt(f))return!1;var c=hr(f);return c==Tn||c==dr||typeof f.message=="string"&&typeof f.name=="string"&&!Ss(f)}function qL(f){return typeof f=="number"&&V0(f)}function _i(f){if(!yt(f))return!1;var c=hr(f);return c==Kn||c==aa||c==nr||c==Nl}function fy(f){return typeof f=="number"&&f==Oe(f)}function Cu(f){return typeof f=="number"&&f>-1&&f%1==0&&f<=te}function yt(f){var c=typeof f;return f!=null&&(c=="object"||c=="function")}function xt(f){return f!=null&&typeof f=="object"}var dy=T0?Vr(T0):JT;function KL(f,c){return f===c||eh(f,c,yh(c))}function ZL(f,c,y){return y=typeof y=="function"?y:e,eh(f,c,yh(c),y)}function QL(f){return hy(f)&&f!=+f}function JL(f){if(Bb(f))throw new be(o);return ng(f)}function jL(f){return f===null}function eR(f){return f==null}function hy(f){return typeof f=="number"||xt(f)&&hr(f)==Gi}function Ss(f){if(!xt(f)||hr(f)!=on)return!1;var c=Xl(f);if(c===null)return!0;var y=Je.call(c,"constructor")&&c.constructor;return typeof y=="function"&&y instanceof y&&Wl.call(y)==ZS}var Rh=b0?Vr(b0):jT;function tR(f){return fy(f)&&f>=-te&&f<=te}var cy=L0?Vr(L0):eb;function wu(f){return typeof f=="string"||!Re(f)&&xt(f)&&hr(f)==Wr}function Xr(f){return typeof f=="symbol"||xt(f)&&hr(f)==an}var xa=R0?Vr(R0):tb;function rR(f){return f===e}function nR(f){return xt(f)&&or(f)==wo}function iR(f){return xt(f)&&hr(f)==gd}var oR=fu(rh),aR=fu(function(f,c){return f<=c});function vy(f){if(!f)return[];if(Rr(f))return wu(f)?bn(f):Lr(f);if(ds&&f[ds])return kS(f[ds]());var c=or(f),y=c==Tr?Ud:c==br?Hl:_a;return y(f)}function Ei(f){if(!f)return f===0?f:0;if(f=vn(f),f===Y||f===-Y){var c=f<0?-1:1;return c*ae}return f===f?f:0}function Oe(f){var c=Ei(f),y=c%1;return c===c?y?c-y:c:0}function py(f){return f?bo(Oe(f),0,Ee):0}function vn(f){if(typeof f=="number")return f;if(Xr(f))return pe;if(yt(f)){var c=typeof f.valueOf=="function"?f.valueOf():f;f=yt(c)?c+"":c}if(typeof f!="string")return f===0?f:+f;f=P0(f);var y=GE.test(f);return y||UE.test(f)?xS(f.slice(2),y?2:8):zE.test(f)?pe:+f}function gy(f){return Jn(f,Mr(f))}function sR(f){return f?bo(Oe(f),-te,te):f===0?f:0}function Qe(f){return f==null?"":Yr(f)}var lR=ma(function(f,c){if(_s(c)||Rr(c)){Jn(c,Ht(c),f);return}for(var y in c)Je.call(c,y)&&gs(f,y,c[y])}),yy=ma(function(f,c){Jn(c,Mr(c),f)}),xu=ma(function(f,c,y,x){Jn(c,Mr(c),f,x)}),uR=ma(function(f,c,y,x){Jn(c,Ht(c),f,x)}),fR=wi(Kd);function dR(f,c){var y=ya(f);return c==null?y:K0(y,c)}var hR=Pe(function(f,c){f=rt(f);var y=-1,x=c.length,L=x>2?c[2]:e;for(L&&cr(c[0],c[1],L)&&(x=1);++y<x;)for(var I=c[y],B=Mr(I),H=-1,W=B.length;++H<W;){var j=B[H],ee=f[j];(ee===e||Rn(ee,va[j])&&!Je.call(f,j))&&(f[j]=I[j])}return f}),cR=Pe(function(f){return f.push(e,Pg),Ur(my,e,f)});function vR(f,c){return O0(f,Ce(c,3),Qn)}function pR(f,c){return O0(f,Ce(c,3),Qd)}function gR(f,c){return f==null?f:Zd(f,Ce(c,3),Mr)}function yR(f,c){return f==null?f:eg(f,Ce(c,3),Mr)}function mR(f,c){return f&&Qn(f,Ce(c,3))}function CR(f,c){return f&&Qd(f,Ce(c,3))}function wR(f){return f==null?[]:ru(f,Ht(f))}function xR(f){return f==null?[]:ru(f,Mr(f))}function Mh(f,c,y){var x=f==null?e:Lo(f,c);return x===e?y:x}function _R(f,c){return f!=null&&Fg(f,c,YT)}function Oh(f,c){return f!=null&&Fg(f,c,XT)}var ER=Mg(function(f,c,y){c!=null&&typeof c.toString!="function"&&(c=Ul.call(c)),f[c]=y},Ah(Or)),SR=Mg(function(f,c,y){c!=null&&typeof c.toString!="function"&&(c=Ul.call(c)),Je.call(f,c)?f[c].push(y):f[c]=[y]},Ce),TR=Pe(ms);function Ht(f){return Rr(f)?$0(f):th(f)}function Mr(f){return Rr(f)?$0(f,!0):rb(f)}function bR(f,c){var y={};return c=Ce(c,3),Qn(f,function(x,L,I){mi(y,c(x,L,I),x)}),y}function LR(f,c){var y={};return c=Ce(c,3),Qn(f,function(x,L,I){mi(y,L,c(x,L,I))}),y}var RR=ma(function(f,c,y){nu(f,c,y)}),my=ma(function(f,c,y,x){nu(f,c,y,x)}),MR=wi(function(f,c){var y={};if(f==null)return y;var x=!1;c=vt(c,function(I){return I=qi(I,f),x||(x=I.length>1),I}),Jn(f,ph(f),y),x&&(y=dn(y,h|v|p,Eb));for(var L=c.length;L--;)sh(y,c[L]);return y});function OR(f,c){return Cy(f,mu(Ce(c)))}var IR=wi(function(f,c){return f==null?{}:ib(f,c)});function Cy(f,c){if(f==null)return{};var y=vt(ph(f),function(x){return[x]});return c=Ce(c),fg(f,y,function(x,L){return c(x,L[0])})}function AR(f,c,y){c=qi(c,f);var x=-1,L=c.length;for(L||(L=1,f=e);++x<L;){var I=f==null?e:f[jn(c[x])];I===e&&(x=L,I=y),f=_i(I)?I.call(f):I}return f}function NR(f,c,y){return f==null?f:ws(f,c,y)}function PR(f,c,y,x){return x=typeof x=="function"?x:e,f==null?f:ws(f,c,y,x)}var wy=Ag(Ht),xy=Ag(Mr);function BR(f,c,y){var x=Re(f),L=x||Zi(f)||xa(f);if(c=Ce(c,4),y==null){var I=f&&f.constructor;L?y=x?new I:[]:yt(f)?y=_i(I)?ya(Xl(f)):{}:y={}}return(L?ln:Qn)(f,function(B,H,W){return c(y,B,H,W)}),y}function DR(f,c){return f==null?!0:sh(f,c)}function FR(f,c,y){return f==null?f:pg(f,c,fh(y))}function kR(f,c,y,x){return x=typeof x=="function"?x:e,f==null?f:pg(f,c,fh(y),x)}function _a(f){return f==null?[]:Wd(f,Ht(f))}function HR(f){return f==null?[]:Wd(f,Mr(f))}function zR(f,c,y){return y===e&&(y=c,c=e),y!==e&&(y=vn(y),y=y===y?y:0),c!==e&&(c=vn(c),c=c===c?c:0),bo(vn(f),c,y)}function GR(f,c,y){return c=Ei(c),y===e?(y=c,c=0):y=Ei(y),f=vn(f),$T(f,c,y)}function WR(f,c,y){if(y&&typeof y!="boolean"&&cr(f,c,y)&&(c=y=e),y===e&&(typeof c=="boolean"?(y=c,c=e):typeof f=="boolean"&&(y=f,f=e)),f===e&&c===e?(f=0,c=1):(f=Ei(f),c===e?(c=f,f=0):c=Ei(c)),f>c){var x=f;f=c,c=x}if(y||f%1||c%1){var L=Y0();return ir(f+L*(c-f+wS("1e-"+((L+"").length-1))),c)}return ih(f,c)}var UR=Ca(function(f,c,y){return c=c.toLowerCase(),f+(y?_y(c):c)});function _y(f){return Ih(Qe(f).toLowerCase())}function Ey(f){return f=Qe(f),f&&f.replace(YE,NS).replace(fS,"")}function VR(f,c,y){f=Qe(f),c=Yr(c);var x=f.length;y=y===e?x:bo(Oe(y),0,x);var L=y;return y-=c.length,y>=0&&f.slice(y,L)==c}function YR(f){return f=Qe(f),f&&TE.test(f)?f.replace(e0,PS):f}function XR(f){return f=Qe(f),f&&IE.test(f)?f.replace(bd,"\\$&"):f}var $R=Ca(function(f,c,y){return f+(y?"-":"")+c.toLowerCase()}),qR=Ca(function(f,c,y){return f+(y?" ":"")+c.toLowerCase()}),KR=bg("toLowerCase");function ZR(f,c,y){f=Qe(f),c=Oe(c);var x=c?ha(f):0;if(!c||x>=c)return f;var L=(c-x)/2;return uu(Zl(L),y)+f+uu(Kl(L),y)}function QR(f,c,y){f=Qe(f),c=Oe(c);var x=c?ha(f):0;return c&&x<c?f+uu(c-x,y):f}function JR(f,c,y){f=Qe(f),c=Oe(c);var x=c?ha(f):0;return c&&x<c?uu(c-x,y)+f:f}function jR(f,c,y){return y||c==null?c=0:c&&(c=+c),aT(Qe(f).replace(Ld,""),c||0)}function eM(f,c,y){return(y?cr(f,c,y):c===e)?c=1:c=Oe(c),oh(Qe(f),c)}function tM(){var f=arguments,c=Qe(f[0]);return f.length<3?c:c.replace(f[1],f[2])}var rM=Ca(function(f,c,y){return f+(y?"_":"")+c.toLowerCase()});function nM(f,c,y){return y&&typeof y!="number"&&cr(f,c,y)&&(c=y=e),y=y===e?Ee:y>>>0,y?(f=Qe(f),f&&(typeof c=="string"||c!=null&&!Rh(c))&&(c=Yr(c),!c&&da(f))?Ki(bn(f),0,y):f.split(c,y)):[]}var iM=Ca(function(f,c,y){return f+(y?" ":"")+Ih(c)});function oM(f,c,y){return f=Qe(f),y=y==null?0:bo(Oe(y),0,f.length),c=Yr(c),f.slice(y,y+c.length)==c}function aM(f,c,y){var x=M.templateSettings;y&&cr(f,c,y)&&(c=e),f=Qe(f),c=xu({},c,x,Ng);var L=xu({},c.imports,x.imports,Ng),I=Ht(L),B=Wd(L,I),H,W,j=0,ee=c.interpolate||Pl,ne="__p += '",fe=Vd((c.escape||Pl).source+"|"+ee.source+"|"+(ee===t0?HE:Pl).source+"|"+(c.evaluate||Pl).source+"|$","g"),ve="//# sourceURL="+(Je.call(c,"sourceURL")?(c.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++pS+"]")+`
`;f.replace(fe,function(_e,Be,We,$r,vr,qr){return We||(We=$r),ne+=f.slice(j,qr).replace(XE,BS),Be&&(H=!0,ne+=`' +
__e(`+Be+`) +
'`),vr&&(W=!0,ne+=`';
`+vr+`;
__p += '`),We&&(ne+=`' +
((__t = (`+We+`)) == null ? '' : __t) +
'`),j=qr+_e.length,_e}),ne+=`';
`;var xe=Je.call(c,"variable")&&c.variable;if(!xe)ne=`with (obj) {
`+ne+`
}
`;else if(FE.test(xe))throw new be(s);ne=(W?ne.replace(xE,""):ne).replace(_E,"$1").replace(EE,"$1;"),ne="function("+(xe||"obj")+`) {
`+(xe?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(H?", __e = _.escape":"")+(W?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ne+`return __p
}`;var Ie=Ty(function(){return $e(I,ve+"return "+ne).apply(e,B)});if(Ie.source=ne,Lh(Ie))throw Ie;return Ie}function sM(f){return Qe(f).toLowerCase()}function lM(f){return Qe(f).toUpperCase()}function uM(f,c,y){if(f=Qe(f),f&&(y||c===e))return P0(f);if(!f||!(c=Yr(c)))return f;var x=bn(f),L=bn(c),I=B0(x,L),B=D0(x,L)+1;return Ki(x,I,B).join("")}function fM(f,c,y){if(f=Qe(f),f&&(y||c===e))return f.slice(0,k0(f)+1);if(!f||!(c=Yr(c)))return f;var x=bn(f),L=D0(x,bn(c))+1;return Ki(x,0,L).join("")}function dM(f,c,y){if(f=Qe(f),f&&(y||c===e))return f.replace(Ld,"");if(!f||!(c=Yr(c)))return f;var x=bn(f),L=B0(x,bn(c));return Ki(x,L).join("")}function hM(f,c){var y=P,x=D;if(yt(c)){var L="separator"in c?c.separator:L;y="length"in c?Oe(c.length):y,x="omission"in c?Yr(c.omission):x}f=Qe(f);var I=f.length;if(da(f)){var B=bn(f);I=B.length}if(y>=I)return f;var H=y-ha(x);if(H<1)return x;var W=B?Ki(B,0,H).join(""):f.slice(0,H);if(L===e)return W+x;if(B&&(H+=W.length-H),Rh(L)){if(f.slice(H).search(L)){var j,ee=W;for(L.global||(L=Vd(L.source,Qe(r0.exec(L))+"g")),L.lastIndex=0;j=L.exec(ee);)var ne=j.index;W=W.slice(0,ne===e?H:ne)}}else if(f.indexOf(Yr(L),H)!=H){var fe=W.lastIndexOf(L);fe>-1&&(W=W.slice(0,fe))}return W+x}function cM(f){return f=Qe(f),f&&SE.test(f)?f.replace(jp,WS):f}var vM=Ca(function(f,c,y){return f+(y?" ":"")+c.toUpperCase()}),Ih=bg("toUpperCase");function Sy(f,c,y){return f=Qe(f),c=y?e:c,c===e?FS(f)?YS(f):RS(f):f.match(c)||[]}var Ty=Pe(function(f,c){try{return Ur(f,e,c)}catch(y){return Lh(y)?y:new be(y)}}),pM=wi(function(f,c){return ln(c,function(y){y=jn(y),mi(f,y,Th(f[y],f))}),f});function gM(f){var c=f==null?0:f.length,y=Ce();return f=c?vt(f,function(x){if(typeof x[1]!="function")throw new un(a);return[y(x[0]),x[1]]}):[],Pe(function(x){for(var L=-1;++L<c;){var I=f[L];if(Ur(I[0],this,x))return Ur(I[1],this,x)}})}function yM(f){return WT(dn(f,h))}function Ah(f){return function(){return f}}function mM(f,c){return f==null||f!==f?c:f}var CM=Rg(),wM=Rg(!0);function Or(f){return f}function Nh(f){return ig(typeof f=="function"?f:dn(f,h))}function xM(f){return ag(dn(f,h))}function _M(f,c){return sg(f,dn(c,h))}var EM=Pe(function(f,c){return function(y){return ms(y,f,c)}}),SM=Pe(function(f,c){return function(y){return ms(f,y,c)}});function Ph(f,c,y){var x=Ht(c),L=ru(c,x);y==null&&!(yt(c)&&(L.length||!x.length))&&(y=c,c=f,f=this,L=ru(c,Ht(c)));var I=!(yt(y)&&"chain"in y)||!!y.chain,B=_i(f);return ln(L,function(H){var W=c[H];f[H]=W,B&&(f.prototype[H]=function(){var j=this.__chain__;if(I||j){var ee=f(this.__wrapped__),ne=ee.__actions__=Lr(this.__actions__);return ne.push({func:W,args:arguments,thisArg:f}),ee.__chain__=j,ee}return W.apply(f,Ui([this.value()],arguments))})}),f}function TM(){return Kt._===this&&(Kt._=QS),this}function Bh(){}function bM(f){return f=Oe(f),Pe(function(c){return lg(c,f)})}var LM=hh(vt),RM=hh(M0),MM=hh(Fd);function by(f){return Ch(f)?kd(jn(f)):ob(f)}function OM(f){return function(c){return f==null?e:Lo(f,c)}}var IM=Og(),AM=Og(!0);function Dh(){return[]}function Fh(){return!1}function NM(){return{}}function PM(){return""}function BM(){return!0}function DM(f,c){if(f=Oe(f),f<1||f>te)return[];var y=Ee,x=ir(f,Ee);c=Ce(c),f-=Ee;for(var L=Gd(x,c);++y<f;)c(y);return L}function FM(f){return Re(f)?vt(f,jn):Xr(f)?[f]:Lr(Xg(Qe(f)))}function kM(f){var c=++KS;return Qe(f)+c}var HM=lu(function(f,c){return f+c},0),zM=ch("ceil"),GM=lu(function(f,c){return f/c},1),WM=ch("floor");function UM(f){return f&&f.length?tu(f,Or,Jd):e}function VM(f,c){return f&&f.length?tu(f,Ce(c,2),Jd):e}function YM(f){return A0(f,Or)}function XM(f,c){return A0(f,Ce(c,2))}function $M(f){return f&&f.length?tu(f,Or,rh):e}function qM(f,c){return f&&f.length?tu(f,Ce(c,2),rh):e}var KM=lu(function(f,c){return f*c},1),ZM=ch("round"),QM=lu(function(f,c){return f-c},0);function JM(f){return f&&f.length?zd(f,Or):0}function jM(f,c){return f&&f.length?zd(f,Ce(c,2)):0}return M.after=xL,M.ary=ny,M.assign=lR,M.assignIn=yy,M.assignInWith=xu,M.assignWith=uR,M.at=fR,M.before=iy,M.bind=Th,M.bindAll=pM,M.bindKey=oy,M.castArray=NL,M.chain=ey,M.chunk=Wb,M.compact=Ub,M.concat=Vb,M.cond=gM,M.conforms=yM,M.constant=Ah,M.countBy=J2,M.create=dR,M.curry=ay,M.curryRight=sy,M.debounce=ly,M.defaults=hR,M.defaultsDeep=cR,M.defer=_L,M.delay=EL,M.difference=Yb,M.differenceBy=Xb,M.differenceWith=$b,M.drop=qb,M.dropRight=Kb,M.dropRightWhile=Zb,M.dropWhile=Qb,M.fill=Jb,M.filter=eL,M.flatMap=nL,M.flatMapDeep=iL,M.flatMapDepth=oL,M.flatten=Zg,M.flattenDeep=jb,M.flattenDepth=e2,M.flip=SL,M.flow=CM,M.flowRight=wM,M.fromPairs=t2,M.functions=wR,M.functionsIn=xR,M.groupBy=aL,M.initial=n2,M.intersection=i2,M.intersectionBy=o2,M.intersectionWith=a2,M.invert=ER,M.invertBy=SR,M.invokeMap=lL,M.iteratee=Nh,M.keyBy=uL,M.keys=Ht,M.keysIn=Mr,M.map=pu,M.mapKeys=bR,M.mapValues=LR,M.matches=xM,M.matchesProperty=_M,M.memoize=yu,M.merge=RR,M.mergeWith=my,M.method=EM,M.methodOf=SM,M.mixin=Ph,M.negate=mu,M.nthArg=bM,M.omit=MR,M.omitBy=OR,M.once=TL,M.orderBy=fL,M.over=LM,M.overArgs=bL,M.overEvery=RM,M.overSome=MM,M.partial=bh,M.partialRight=uy,M.partition=dL,M.pick=IR,M.pickBy=Cy,M.property=by,M.propertyOf=OM,M.pull=f2,M.pullAll=Jg,M.pullAllBy=d2,M.pullAllWith=h2,M.pullAt=c2,M.range=IM,M.rangeRight=AM,M.rearg=LL,M.reject=vL,M.remove=v2,M.rest=RL,M.reverse=Eh,M.sampleSize=gL,M.set=NR,M.setWith=PR,M.shuffle=yL,M.slice=p2,M.sortBy=wL,M.sortedUniq=_2,M.sortedUniqBy=E2,M.split=nM,M.spread=ML,M.tail=S2,M.take=T2,M.takeRight=b2,M.takeRightWhile=L2,M.takeWhile=R2,M.tap=U2,M.throttle=OL,M.thru=vu,M.toArray=vy,M.toPairs=wy,M.toPairsIn=xy,M.toPath=FM,M.toPlainObject=gy,M.transform=BR,M.unary=IL,M.union=M2,M.unionBy=O2,M.unionWith=I2,M.uniq=A2,M.uniqBy=N2,M.uniqWith=P2,M.unset=DR,M.unzip=Sh,M.unzipWith=jg,M.update=FR,M.updateWith=kR,M.values=_a,M.valuesIn=HR,M.without=B2,M.words=Sy,M.wrap=AL,M.xor=D2,M.xorBy=F2,M.xorWith=k2,M.zip=H2,M.zipObject=z2,M.zipObjectDeep=G2,M.zipWith=W2,M.entries=wy,M.entriesIn=xy,M.extend=yy,M.extendWith=xu,Ph(M,M),M.add=HM,M.attempt=Ty,M.camelCase=UR,M.capitalize=_y,M.ceil=zM,M.clamp=zR,M.clone=PL,M.cloneDeep=DL,M.cloneDeepWith=FL,M.cloneWith=BL,M.conformsTo=kL,M.deburr=Ey,M.defaultTo=mM,M.divide=GM,M.endsWith=VR,M.eq=Rn,M.escape=YR,M.escapeRegExp=XR,M.every=j2,M.find=tL,M.findIndex=qg,M.findKey=vR,M.findLast=rL,M.findLastIndex=Kg,M.findLastKey=pR,M.floor=WM,M.forEach=ty,M.forEachRight=ry,M.forIn=gR,M.forInRight=yR,M.forOwn=mR,M.forOwnRight=CR,M.get=Mh,M.gt=HL,M.gte=zL,M.has=_R,M.hasIn=Oh,M.head=Qg,M.identity=Or,M.includes=sL,M.indexOf=r2,M.inRange=GR,M.invoke=TR,M.isArguments=Oo,M.isArray=Re,M.isArrayBuffer=GL,M.isArrayLike=Rr,M.isArrayLikeObject=Et,M.isBoolean=WL,M.isBuffer=Zi,M.isDate=UL,M.isElement=VL,M.isEmpty=YL,M.isEqual=XL,M.isEqualWith=$L,M.isError=Lh,M.isFinite=qL,M.isFunction=_i,M.isInteger=fy,M.isLength=Cu,M.isMap=dy,M.isMatch=KL,M.isMatchWith=ZL,M.isNaN=QL,M.isNative=JL,M.isNil=eR,M.isNull=jL,M.isNumber=hy,M.isObject=yt,M.isObjectLike=xt,M.isPlainObject=Ss,M.isRegExp=Rh,M.isSafeInteger=tR,M.isSet=cy,M.isString=wu,M.isSymbol=Xr,M.isTypedArray=xa,M.isUndefined=rR,M.isWeakMap=nR,M.isWeakSet=iR,M.join=s2,M.kebabCase=$R,M.last=cn,M.lastIndexOf=l2,M.lowerCase=qR,M.lowerFirst=KR,M.lt=oR,M.lte=aR,M.max=UM,M.maxBy=VM,M.mean=YM,M.meanBy=XM,M.min=$M,M.minBy=qM,M.stubArray=Dh,M.stubFalse=Fh,M.stubObject=NM,M.stubString=PM,M.stubTrue=BM,M.multiply=KM,M.nth=u2,M.noConflict=TM,M.noop=Bh,M.now=gu,M.pad=ZR,M.padEnd=QR,M.padStart=JR,M.parseInt=jR,M.random=WR,M.reduce=hL,M.reduceRight=cL,M.repeat=eM,M.replace=tM,M.result=AR,M.round=ZM,M.runInContext=G,M.sample=pL,M.size=mL,M.snakeCase=rM,M.some=CL,M.sortedIndex=g2,M.sortedIndexBy=y2,M.sortedIndexOf=m2,M.sortedLastIndex=C2,M.sortedLastIndexBy=w2,M.sortedLastIndexOf=x2,M.startCase=iM,M.startsWith=oM,M.subtract=QM,M.sum=JM,M.sumBy=jM,M.template=aM,M.times=DM,M.toFinite=Ei,M.toInteger=Oe,M.toLength=py,M.toLower=sM,M.toNumber=vn,M.toSafeInteger=sR,M.toString=Qe,M.toUpper=lM,M.trim=uM,M.trimEnd=fM,M.trimStart=dM,M.truncate=hM,M.unescape=cM,M.uniqueId=kM,M.upperCase=vM,M.upperFirst=Ih,M.each=ty,M.eachRight=ry,M.first=Qg,Ph(M,function(){var f={};return Qn(M,function(c,y){Je.call(M.prototype,y)||(f[y]=c)}),f}(),{chain:!1}),M.VERSION=n,ln(["bind","bindKey","curry","curryRight","partial","partialRight"],function(f){M[f].placeholder=M}),ln(["drop","take"],function(f,c){ke.prototype[f]=function(y){y=y===e?1:Pt(Oe(y),0);var x=this.__filtered__&&!c?new ke(this):this.clone();return x.__filtered__?x.__takeCount__=ir(y,x.__takeCount__):x.__views__.push({size:ir(y,Ee),type:f+(x.__dir__<0?"Right":"")}),x},ke.prototype[f+"Right"]=function(y){return this.reverse()[f](y).reverse()}}),ln(["filter","map","takeWhile"],function(f,c){var y=c+1,x=y==V||y==Q;ke.prototype[f]=function(L){var I=this.clone();return I.__iteratees__.push({iteratee:Ce(L,3),type:y}),I.__filtered__=I.__filtered__||x,I}}),ln(["head","last"],function(f,c){var y="take"+(c?"Right":"");ke.prototype[f]=function(){return this[y](1).value()[0]}}),ln(["initial","tail"],function(f,c){var y="drop"+(c?"":"Right");ke.prototype[f]=function(){return this.__filtered__?new ke(this):this[y](1)}}),ke.prototype.compact=function(){return this.filter(Or)},ke.prototype.find=function(f){return this.filter(f).head()},ke.prototype.findLast=function(f){return this.reverse().find(f)},ke.prototype.invokeMap=Pe(function(f,c){return typeof f=="function"?new ke(this):this.map(function(y){return ms(y,f,c)})}),ke.prototype.reject=function(f){return this.filter(mu(Ce(f)))},ke.prototype.slice=function(f,c){f=Oe(f);var y=this;return y.__filtered__&&(f>0||c<0)?new ke(y):(f<0?y=y.takeRight(-f):f&&(y=y.drop(f)),c!==e&&(c=Oe(c),y=c<0?y.dropRight(-c):y.take(c-f)),y)},ke.prototype.takeRightWhile=function(f){return this.reverse().takeWhile(f).reverse()},ke.prototype.toArray=function(){return this.take(Ee)},Qn(ke.prototype,function(f,c){var y=/^(?:filter|find|map|reject)|While$/.test(c),x=/^(?:head|last)$/.test(c),L=M[x?"take"+(c=="last"?"Right":""):c],I=x||/^find/.test(c);!L||(M.prototype[c]=function(){var B=this.__wrapped__,H=x?[1]:arguments,W=B instanceof ke,j=H[0],ee=W||Re(B),ne=function(Be){var We=L.apply(M,Ui([Be],H));return x&&fe?We[0]:We};ee&&y&&typeof j=="function"&&j.length!=1&&(W=ee=!1);var fe=this.__chain__,ve=!!this.__actions__.length,xe=I&&!fe,Ie=W&&!ve;if(!I&&ee){B=Ie?B:new ke(this);var _e=f.apply(B,H);return _e.__actions__.push({func:vu,args:[ne],thisArg:e}),new fn(_e,fe)}return xe&&Ie?f.apply(this,H):(_e=this.thru(ne),xe?x?_e.value()[0]:_e.value():_e)})}),ln(["pop","push","shift","sort","splice","unshift"],function(f){var c=zl[f],y=/^(?:push|sort|unshift)$/.test(f)?"tap":"thru",x=/^(?:pop|shift)$/.test(f);M.prototype[f]=function(){var L=arguments;if(x&&!this.__chain__){var I=this.value();return c.apply(Re(I)?I:[],L)}return this[y](function(B){return c.apply(Re(B)?B:[],L)})}}),Qn(ke.prototype,function(f,c){var y=M[c];if(y){var x=y.name+"";Je.call(ga,x)||(ga[x]=[]),ga[x].push({name:c,func:y})}}),ga[su(e,w).name]=[{name:"wrapper",func:e}],ke.prototype.clone=cT,ke.prototype.reverse=vT,ke.prototype.value=pT,M.prototype.at=V2,M.prototype.chain=Y2,M.prototype.commit=X2,M.prototype.next=$2,M.prototype.plant=K2,M.prototype.reverse=Z2,M.prototype.toJSON=M.prototype.valueOf=M.prototype.value=Q2,M.prototype.first=M.prototype.head,ds&&(M.prototype[ds]=q2),M},ca=XS();_o?((_o.exports=ca)._=ca,Nd._=ca):Kt._=ca}).call(Ts)})(rC,rC.exports);const dV={describe:"\u6807\u51C6\u4EA4\u53C9\u8868\u6570\u636E\u3002",fields:{rows:["province","city"],columns:["type","sub_type"],values:["number"],valueInCols:!0},meta:[{field:"number",name:"\u6570\u91CF"},{field:"province",name:"\u7701\u4EFD"},{field:"city",name:"\u57CE\u5E02"},{field:"type",name:"\u65F6\u95F4"},{field:"sub_type",name:"\u5B50\u7C7B\u522B"}],data:[{number:7789,province:"\u6D59\u6C5F\u7701",city:"\u676D\u5DDE\u5E02",type:"\u65F6\u95F4",sub_type:"\u684C\u5B50"},{number:2367,province:"\u6D59\u6C5F\u7701",city:"\u7ECD\u5174\u5E02",type:"\u65F6\u95F4",sub_type:"\u684C\u5B50"},{number:3877,province:"\u6D59\u6C5F\u7701",city:"\u5B81\u6CE2\u5E02",type:"\u65F6\u95F4",sub_type:"\u684C\u5B50"},{number:4342,province:"\u6D59\u6C5F\u7701",city:"\u821F\u5C71\u5E02",type:"\u65F6\u95F4",sub_type:"\u684C\u5B50"},{number:5343,province:"\u6D59\u6C5F\u7701",city:"\u676D\u5DDE\u5E02",type:"\u65F6\u95F4",sub_type:"\u6C99\u53D1"},{number:632,province:"\u6D59\u6C5F\u7701",city:"\u7ECD\u5174\u5E02",type:"\u65F6\u95F4",sub_type:"\u6C99\u53D1"},{number:7234,province:"\u6D59\u6C5F\u7701",city:"\u5B81\u6CE2\u5E02",type:"\u65F6\u95F4",sub_type:"\u6C99\u53D1"},{number:834,province:"\u6D59\u6C5F\u7701",city:"\u821F\u5C71\u5E02",type:"\u65F6\u95F4",sub_type:"\u6C99\u53D1"},{number:945,province:"\u6D59\u6C5F\u7701",city:"\u676D\u5DDE\u5E02",type:"\u65F6\u95F4",sub_type:"\u7B14"},{number:1304,province:"\u6D59\u6C5F\u7701",city:"\u7ECD\u5174\u5E02",type:"\u65F6\u95F4",sub_type:"\u7B14"},{number:1145,province:"\u6D59\u6C5F\u7701",city:"\u5B81\u6CE2\u5E02",type:"\u65F6\u95F4",sub_type:"\u7B14"},{number:1432,province:"\u6D59\u6C5F\u7701",city:"\u821F\u5C71\u5E02",type:"\u65F6\u95F4",sub_type:"\u7B14"},{number:1343,province:"\u6D59\u6C5F\u7701",city:"\u676D\u5DDE\u5E02",type:"\u65F6\u95F4",sub_type:"\u7EB8\u5F20"},{number:1354,province:"\u6D59\u6C5F\u7701",city:"\u7ECD\u5174\u5E02",type:"\u65F6\u95F4",sub_type:"\u7EB8\u5F20"},{number:1523,province:"\u6D59\u6C5F\u7701",city:"\u5B81\u6CE2\u5E02",type:"\u65F6\u95F4",sub_type:"\u7EB8\u5F20"},{number:1634,province:"\u6D59\u6C5F\u7701",city:"\u821F\u5C71\u5E02",type:"\u65F6\u95F4",sub_type:"\u7EB8\u5F20"},{number:1723,province:"\u56DB\u5DDD\u7701",city:"\u6210\u90FD\u5E02",type:"\u65F6\u95F4",sub_type:"\u684C\u5B50"},{number:1822,province:"\u56DB\u5DDD\u7701",city:"\u7EF5\u9633\u5E02",type:"\u65F6\u95F4",sub_type:"\u684C\u5B50"},{number:1943,province:"\u56DB\u5DDD\u7701",city:"\u5357\u5145\u5E02",type:"\u65F6\u95F4",sub_type:"\u684C\u5B50"},{number:2330,province:"\u56DB\u5DDD\u7701",city:"\u4E50\u5C71\u5E02",type:"\u65F6\u95F4",sub_type:"\u684C\u5B50"},{number:2451,province:"\u56DB\u5DDD\u7701",city:"\u6210\u90FD\u5E02",type:"\u65F6\u95F4",sub_type:"\u6C99\u53D1"},{number:2244,province:"\u56DB\u5DDD\u7701",city:"\u7EF5\u9633\u5E02",type:"\u65F6\u95F4",sub_type:"\u6C99\u53D1"},{number:2333,province:"\u56DB\u5DDD\u7701",city:"\u5357\u5145\u5E02",type:"\u65F6\u95F4",sub_type:"\u6C99\u53D1"},{number:2445,province:"\u56DB\u5DDD\u7701",city:"\u4E50\u5C71\u5E02",type:"\u65F6\u95F4",sub_type:"\u6C99\u53D1"},{number:2335,province:"\u56DB\u5DDD\u7701",city:"\u6210\u90FD\u5E02",type:"\u65F6\u95F4",sub_type:"\u7B14"},{number:245,province:"\u56DB\u5DDD\u7701",city:"\u7EF5\u9633\u5E02",type:"\u65F6\u95F4",sub_type:"\u7B14"},{number:2457,province:"\u56DB\u5DDD\u7701",city:"\u5357\u5145\u5E02",type:"\u65F6\u95F4",sub_type:"\u7B14"},{number:2458,province:"\u56DB\u5DDD\u7701",city:"\u4E50\u5C71\u5E02",type:"\u65F6\u95F4",sub_type:"\u7B14"},{number:4004,province:"\u56DB\u5DDD\u7701",city:"\u6210\u90FD\u5E02",type:"\u65F6\u95F4",sub_type:"\u7EB8\u5F20"},{number:3077,province:"\u56DB\u5DDD\u7701",city:"\u7EF5\u9633\u5E02",type:"\u65F6\u95F4",sub_type:"\u7EB8\u5F20"},{number:3551,province:"\u56DB\u5DDD\u7701",city:"\u5357\u5145\u5E02",type:"\u65F6\u95F4",sub_type:"\u7EB8\u5F20"},{number:352,province:"\u56DB\u5DDD\u7701",city:"\u4E50\u5C71\u5E02",type:"\u65F6\u95F4",sub_type:"\u7EB8\u5F20"}],totalData:[{number:[26193],type:"\u65F6\u95F4",sub_type:"\u684C\u5B50"},{number:49709,type:"\u65F6\u95F4"},{number:23516,type:"\u65F6\u95F4",sub_type:"\u6C99\u53D1"},{number:29159,type:"\u65F6\u95F4"},{number:12321,type:"\u65F6\u95F4",sub_type:"\u7B14"},{number:16838,type:"\u65F6\u95F4",sub_type:"\u7EB8\u5F20"},{number:18375,province:"\u6D59\u6C5F\u7701",type:"\u65F6\u95F4",sub_type:"\u684C\u5B50"},{number:14043,province:"\u6D59\u6C5F\u7701",type:"\u65F6\u95F4",sub_type:"\u6C99\u53D1"},{number:4826,province:"\u6D59\u6C5F\u7701",type:"\u65F6\u95F4",sub_type:"\u7B14"},{number:5854,province:"\u6D59\u6C5F\u7701",type:"\u65F6\u95F4",sub_type:"\u7EB8\u5F20"},{number:7818,province:"\u56DB\u5DDD\u7701",type:"\u65F6\u95F4",sub_type:"\u684C\u5B50"},{number:9473,province:"\u56DB\u5DDD\u7701",type:"\u65F6\u95F4",sub_type:"\u6C99\u53D1"},{number:7495,province:"\u56DB\u5DDD\u7701",type:"\u65F6\u95F4",sub_type:"\u7B14"},{number:10984,province:"\u56DB\u5DDD\u7701",type:"\u65F6\u95F4",sub_type:"\u7EB8\u5F20"},{number:13132,province:"\u6D59\u6C5F\u7701",city:"\u676D\u5DDE\u5E02",type:"\u65F6\u95F4"},{number:2288,province:"\u6D59\u6C5F\u7701",city:"\u676D\u5DDE\u5E02",type:"\u65F6\u95F4"},{number:15420,province:"\u6D59\u6C5F\u7701",city:"\u676D\u5DDE\u5E02"},{number:2999,province:"\u6D59\u6C5F\u7701",city:"\u7ECD\u5174\u5E02",type:"\u65F6\u95F4"},{number:2658,province:"\u6D59\u6C5F\u7701",city:"\u7ECD\u5174\u5E02",type:"\u65F6\u95F4"},{number:5657,province:"\u6D59\u6C5F\u7701",city:"\u7ECD\u5174\u5E02"},{number:11111,province:"\u6D59\u6C5F\u7701",city:"\u5B81\u6CE2\u5E02",type:"\u65F6\u95F4"},{number:2668,province:"\u6D59\u6C5F\u7701",city:"\u5B81\u6CE2\u5E02",type:"\u65F6\u95F4"},{number:13779,province:"\u6D59\u6C5F\u7701",city:"\u5B81\u6CE2\u5E02"},{number:5176,province:"\u6D59\u6C5F\u7701",city:"\u821F\u5C71\u5E02",type:"\u65F6\u95F4"},{number:3066,province:"\u6D59\u6C5F\u7701",city:"\u821F\u5C71\u5E02",type:"\u65F6\u95F4"},{number:8242,province:"\u6D59\u6C5F\u7701",city:"\u821F\u5C71\u5E02"},{number:4174,province:"\u56DB\u5DDD\u7701",city:"\u6210\u90FD\u5E02",type:"\u65F6\u95F4"},{number:6339,province:"\u56DB\u5DDD\u7701",city:"\u6210\u90FD\u5E02",type:"\u65F6\u95F4"},{number:10513,province:"\u56DB\u5DDD\u7701",city:"\u6210\u90FD\u5E02"},{number:4066,province:"\u56DB\u5DDD\u7701",city:"\u7EF5\u9633\u5E02",type:"\u65F6\u95F4"},{number:3322,province:"\u56DB\u5DDD\u7701",city:"\u7EF5\u9633\u5E02",type:"\u65F6\u95F4"},{number:7388,province:"\u56DB\u5DDD\u7701",city:"\u7EF5\u9633\u5E02"},{number:4276,province:"\u56DB\u5DDD\u7701",city:"\u5357\u5145\u5E02",type:"\u65F6\u95F4"},{number:6008,province:"\u56DB\u5DDD\u7701",city:"\u5357\u5145\u5E02",type:"\u65F6\u95F4"},{number:10284,province:"\u56DB\u5DDD\u7701",city:"\u5357\u5145\u5E02"},{number:4775,province:"\u56DB\u5DDD\u7701",city:"\u4E50\u5C71\u5E02",type:"\u65F6\u95F4"},{number:2810,province:"\u56DB\u5DDD\u7701",city:"\u4E50\u5C71\u5E02",type:"\u65F6\u95F4"},{number:7585,province:"\u56DB\u5DDD\u7701",city:"\u4E50\u5C71\u5E02"},{number:32418,province:"\u6D59\u6C5F\u7701",type:"\u65F6\u95F4"},{number:10680,province:"\u6D59\u6C5F\u7701",type:"\u65F6\u95F4"},{number:43098,province:"\u6D59\u6C5F\u7701"},{number:17291,province:"\u56DB\u5DDD\u7701",type:"\u65F6\u95F4"},{number:18479,province:"\u56DB\u5DDD\u7701",type:"\u65F6\u95F4"},{number:35770,province:"\u56DB\u5DDD\u7701"},{number:78868}]},hV=rf("div",null,"\u6211\u662F\u81EA\u5B9A\u4E49 tooltip \u5185\u5BB9",-1),cV={__name:"antvS2TooltipContent",props:["meta"],setup(r){return(t,e)=>{var n,i,o;return nC(),iC("div",null,[rf("p",null,"\u5F53\u524D\u503C\uFF1A"+eO((o=(n=r.meta)==null?void 0:n.label)!=null?o:(i=r.meta)==null?void 0:i.fieldValue),1),hV])}}};const vV=rf("div",{style:{width:"100%"}},[rf("div",{id:"antvContainer"})],-1),gV={__name:"antvS2",setup(r){const t=tO("grid"),e=rO({options:[{label:"grid",value:"grid"},{label:"tree",value:"tree"}],s2:null}),n=async s=>{e.s2.setOptions({hierarchyType:s}),await e.s2.render(!1)};class i extends Lv{constructor(l){super(l)}renderContent(){var h;const l=this.spreadsheet.getCell((h=this.options.event)==null?void 0:h.target),u=l==null?void 0:l.getMeta(),d=Ry(cV,{meta:u});sO(d,this.container)}}class o extends Dp{constructor(l,u,d){super(l,u,d)}drawTextShape(){}render(l){l.innerHTML="";const u=document.createElement("div");u.style.width="100%",u.style.height="100%",u.innerHTML="test",l.appendChild(u),createChart(u,this.cells.map(d=>d.data))}}const a=()=>{const s=document.getElementById("antvContainer"),l={width:600,height:480,hierarchyType:"grid",tooltip:{enable:!0,render:u=>new i(u)},mergeCells:{hideData:!0},mergedCellsInfo:[[{colIndex:0,rowIndex:0},{colIndex:1,rowIndex:0},{colIndex:2,rowIndex:0},{colIndex:3,rowIndex:0}]],mergedCell:(u,d,h)=>new o(u,d,h)};e.s2=new fV(s,dV,l),e.s2.render()};return nO(()=>{a(iO(t))}),(s,l)=>{const u=aO;return nC(),iC(oO,null,[Ry(u,{style:{width:"200px"},value:t.value,"onUpdate:value":l[0]||(l[0]=d=>t.value=d),options:e.options,onChange:n,placeholder:"\u5207\u6362\u6A21\u5F0F"},null,8,["value","options"]),vV],64)}}};export{gV as default};
