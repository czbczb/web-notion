!function(){function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,r(i.key),i)}}function n(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function r(t){var e=function(t,e){if("object"!=h(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=h(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==h(e)?e:e+""}function i(t,e,n){return e=a(e),function(t,e){if(e&&("object"===h(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,o()?Reflect.construct(e,n||[],a(t).constructor):e.apply(t,n))}function o(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(o=function(){return!!t})()}function a(t){return a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},a(t)}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}function l(t,e){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},l(t,e)}function u(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */u=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function d(t,e,n,r){var o=e&&e.prototype instanceof C?e:C,a=Object.create(o.prototype),s=new I(r||[]);return i(a,"_invoke",{value:M(t,n,s)}),a}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=d;var p="suspendedStart",v="suspendedYield",g="executing",y="completed",m={};function C(){}function w(){}function x(){}var b={};c(b,a,(function(){return this}));var E=Object.getPrototypeOf,S=E&&E(E(A([])));S&&S!==n&&r.call(S,a)&&(b=S);var T=x.prototype=C.prototype=Object.create(b);function L(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function n(i,o,a,s){var l=f(t[i],t,o);if("throw"!==l.type){var u=l.arg,c=u.value;return c&&"object"==h(c)&&r.call(c,"__await")?e.resolve(c.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(c).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(l.arg)}var o;i(this,"_invoke",{value:function(t,r){function i(){return new e((function(e,i){n(t,r,e,i)}))}return o=o?o.then(i,i):i()}})}function M(e,n,r){var i=p;return function(o,a){if(i===g)throw Error("Generator is already running");if(i===y){if("throw"===o)throw a;return{value:t,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var l=R(s,r);if(l){if(l===m)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===p)throw i=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=g;var u=f(e,n,r);if("normal"===u.type){if(i=r.done?y:v,u.arg===m)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i=y,r.method="throw",r.arg=u.arg)}}}function R(e,n){var r=n.method,i=e.iterator[r];if(i===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,R(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),m;var o=f(i,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,m;var a=o.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,m):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function N(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function I(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function A(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(h(e)+" is not iterable")}return w.prototype=x,i(T,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:w,configurable:!0}),w.displayName=c(x,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,c(t,l,"GeneratorFunction")),t.prototype=Object.create(T),t},e.awrap=function(t){return{__await:t}},L(_.prototype),c(_.prototype,s,(function(){return this})),e.AsyncIterator=_,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new _(d(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},L(T),c(T,l,"Generator"),c(T,a,(function(){return this})),c(T,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=A,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(N),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),N(n),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;N(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:A(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),m}},e}function c(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(u){return void n(u)}s.done?e(l):Promise.resolve(l).then(r,i)}function h(t){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h(t)}System.register(["./antdv-legacy.7bd4694a.js"],(function(e,r){"use strict";var o,a,l,d,f,p,v,g,y,m,C,w,x,b=document.createElement("style");return b.textContent=".antv-s2-tooltip-operator{color:var(--antv-s2-font, rgba(0, 0, 0, .65));background:var(--antv-s2-tooltip-operator-background, #f9f9f9);font-size:12px;line-height:36px;border:0;cursor:pointer}.antv-s2-tooltip-operator .ant-menu-horizontal:not(.ant-menu-dark){background:transparent;line-height:36px}.antv-s2-tooltip-operator .ant-dropdown-trigger,.antv-s2-tooltip-operator-dropdown{padding:0 6px 0 0}.antv-s2-tooltip-operator-menus.ant-menu-vertical.ant-menu{font-size:12px;color:var(--antv-s2-font, rgba(0, 0, 0, .65));border:0;user-select:none;padding:4px;width:100%}.antv-s2-tooltip-operator-menus.ant-menu-vertical.ant-menu .ant-menu-item{height:36px}.antv-s2-tooltip-operator-menus.ant-menu-vertical.ant-menu .ant-menu-submenu>.ant-menu-submenu-title{height:36px;width:100%}.antv-s2-tooltip-operator-menus.ant-menu-vertical.ant-menu .ant-menu-submenu>.ant-menu-submenu-title .ant-menu-submenu-arrow{color:var(--antv-s2-font, rgba(0, 0, 0, .65))}.antv-s2-tooltip-operator-menus.ant-dropdown-menu-vertical .ant-dropdown-menu-item,.antv-s2-tooltip-operator-menus.ant-menu-vertical .ant-dropdown-menu-item,.antv-s2-tooltip-operator-menus.ant-dropdown-menu-vertical .ant-menu-item,.antv-s2-tooltip-operator-menus.ant-menu-vertical .ant-menu-item{font-size:12px;line-height:36px;padding:0 12px;border:0}.antv-s2-tooltip-operator-menus.ant-dropdown-menu-vertical .ant-dropdown-menu-item:not(.ant-menu-item-active),.antv-s2-tooltip-operator-menus.ant-menu-vertical .ant-dropdown-menu-item:not(.ant-menu-item-active),.antv-s2-tooltip-operator-menus.ant-dropdown-menu-vertical .ant-menu-item:not(.ant-menu-item-active),.antv-s2-tooltip-operator-menus.ant-menu-vertical .ant-menu-item:not(.ant-menu-item-active){color:var(--antv-s2-font, rgba(0, 0, 0, .65))}.antv-s2-tooltip-operator-menus.ant-dropdown-menu-vertical .ant-dropdown-menu-submenu .ant-menu-submenu-title,.antv-s2-tooltip-operator-menus.ant-menu-vertical .ant-dropdown-menu-submenu .ant-menu-submenu-title,.antv-s2-tooltip-operator-menus.ant-dropdown-menu-vertical .ant-dropdown-menu-submenu-vertical .ant-menu-submenu-title,.antv-s2-tooltip-operator-menus.ant-menu-vertical .ant-dropdown-menu-submenu-vertical .ant-menu-submenu-title,.antv-s2-tooltip-operator-menus.ant-dropdown-menu-vertical .ant-menu-submenu .ant-menu-submenu-title,.antv-s2-tooltip-operator-menus.ant-menu-vertical .ant-menu-submenu .ant-menu-submenu-title,.antv-s2-tooltip-operator-menus.ant-dropdown-menu-vertical .ant-menu-submenu-vertical .ant-menu-submenu-title,.antv-s2-tooltip-operator-menus.ant-menu-vertical .ant-menu-submenu-vertical .ant-menu-submenu-title{padding:0 0 0 12px;font-size:12px;line-height:36px;margin:0}.antv-s2-tooltip-operator-menus.ant-dropdown-menu-vertical .ant-dropdown-menu-submenu .ant-menu-submenu-title:not(.ant-menu-item-active),.antv-s2-tooltip-operator-menus.ant-menu-vertical .ant-dropdown-menu-submenu .ant-menu-submenu-title:not(.ant-menu-item-active),.antv-s2-tooltip-operator-menus.ant-dropdown-menu-vertical .ant-dropdown-menu-submenu-vertical .ant-menu-submenu-title:not(.ant-menu-item-active),.antv-s2-tooltip-operator-menus.ant-menu-vertical .ant-dropdown-menu-submenu-vertical .ant-menu-submenu-title:not(.ant-menu-item-active),.antv-s2-tooltip-operator-menus.ant-dropdown-menu-vertical .ant-menu-submenu .ant-menu-submenu-title:not(.ant-menu-item-active),.antv-s2-tooltip-operator-menus.ant-menu-vertical .ant-menu-submenu .ant-menu-submenu-title:not(.ant-menu-item-active),.antv-s2-tooltip-operator-menus.ant-dropdown-menu-vertical .ant-menu-submenu-vertical .ant-menu-submenu-title:not(.ant-menu-item-active),.antv-s2-tooltip-operator-menus.ant-menu-vertical .ant-menu-submenu-vertical .ant-menu-submenu-title:not(.ant-menu-item-active){color:var(--antv-s2-font, rgba(0, 0, 0, .65))}.antv-s2-tooltip-operator-menus.ant-dropdown-menu-vertical .ant-dropdown-menu-submenu .ant-menu-submenu-title .ant-dropdown-menu-title-content,.antv-s2-tooltip-operator-menus.ant-menu-vertical .ant-dropdown-menu-submenu .ant-menu-submenu-title .ant-dropdown-menu-title-content,.antv-s2-tooltip-operator-menus.ant-dropdown-menu-vertical .ant-dropdown-menu-submenu-vertical .ant-menu-submenu-title .ant-dropdown-menu-title-content,.antv-s2-tooltip-operator-menus.ant-menu-vertical .ant-dropdown-menu-submenu-vertical .ant-menu-submenu-title .ant-dropdown-menu-title-content,.antv-s2-tooltip-operator-menus.ant-dropdown-menu-vertical .ant-menu-submenu .ant-menu-submenu-title .ant-dropdown-menu-title-content,.antv-s2-tooltip-operator-menus.ant-menu-vertical .ant-menu-submenu .ant-menu-submenu-title .ant-dropdown-menu-title-content,.antv-s2-tooltip-operator-menus.ant-dropdown-menu-vertical .ant-menu-submenu-vertical .ant-menu-submenu-title .ant-dropdown-menu-title-content,.antv-s2-tooltip-operator-menus.ant-menu-vertical .ant-menu-submenu-vertical .ant-menu-submenu-title .ant-dropdown-menu-title-content,.antv-s2-tooltip-operator-menus.ant-dropdown-menu-vertical .ant-dropdown-menu-submenu .ant-menu-submenu-title .ant-menu-title-content,.antv-s2-tooltip-operator-menus.ant-menu-vertical .ant-dropdown-menu-submenu .ant-menu-submenu-title .ant-menu-title-content,.antv-s2-tooltip-operator-menus.ant-dropdown-menu-vertical .ant-dropdown-menu-submenu-vertical .ant-menu-submenu-title .ant-menu-title-content,.antv-s2-tooltip-operator-menus.ant-menu-vertical .ant-dropdown-menu-submenu-vertical .ant-menu-submenu-title .ant-menu-title-content,.antv-s2-tooltip-operator-menus.ant-dropdown-menu-vertical .ant-menu-submenu .ant-menu-submenu-title .ant-menu-title-content,.antv-s2-tooltip-operator-menus.ant-menu-vertical .ant-menu-submenu .ant-menu-submenu-title .ant-menu-title-content,.antv-s2-tooltip-operator-menus.ant-dropdown-menu-vertical .ant-menu-submenu-vertical .ant-menu-submenu-title .ant-menu-title-content,.antv-s2-tooltip-operator-menus.ant-menu-vertical .ant-menu-submenu-vertical .ant-menu-submenu-title .ant-menu-title-content{margin-right:12px}.antv-s2-tooltip-operator-submenu-popup .ant-dropdown-menu-item,.antv-s2-tooltip-operator-submenu-popup .ant-menu-item{font-size:12px;line-height:36px;padding:0 12px}.antv-s2-tooltip-operator-submenu-popup .ant-dropdown-menu-item:not(.ant-menu-item-active),.antv-s2-tooltip-operator-submenu-popup .ant-menu-item:not(.ant-menu-item-active){color:var(--antv-s2-font, rgba(0, 0, 0, .65))}.antv-s2-tooltip-operator-submenu-popup .ant-menu-vertical .ant-menu-item{margin:0;height:36px;line-height:36px;width:100%}.antv-s2-tooltip-operator-submenu-popup .ant-menu-vertical .ant-menu-item:not(:last-child){margin:0}.antv-s2-tooltip-operator-icon{vertical-align:middle}.antv-s2-tooltip-operator-icon svg{width:12px;height:12px;fill:var(--antv-s2-font)}@media only screen and (max-device-width: 480px){.antv-s2-tooltip-operator-menus.ant-menu-vertical.ant-menu{font-size:12px}.antv-s2-tooltip-operator-menus.ant-menu-vertical.ant-menu .ant-menu-item{height:36px}.antv-s2-tooltip-operator-menus.ant-dropdown-menu-vertical .ant-dropdown-menu-item,.antv-s2-tooltip-operator-menus.ant-menu-vertical .ant-dropdown-menu-item,.antv-s2-tooltip-operator-menus.ant-dropdown-menu-vertical .ant-menu-item,.antv-s2-tooltip-operator-menus.ant-menu-vertical .ant-menu-item{line-height:36px}.antv-s2-tooltip-operator-menus.ant-dropdown-menu-vertical .ant-dropdown-menu-submenu .ant-menu-submenu-title,.antv-s2-tooltip-operator-menus.ant-menu-vertical .ant-dropdown-menu-submenu .ant-menu-submenu-title,.antv-s2-tooltip-operator-menus.ant-dropdown-menu-vertical .ant-dropdown-menu-submenu-vertical .ant-menu-submenu-title,.antv-s2-tooltip-operator-menus.ant-menu-vertical .ant-dropdown-menu-submenu-vertical .ant-menu-submenu-title,.antv-s2-tooltip-operator-menus.ant-dropdown-menu-vertical .ant-menu-submenu .ant-menu-submenu-title,.antv-s2-tooltip-operator-menus.ant-menu-vertical .ant-menu-submenu .ant-menu-submenu-title,.antv-s2-tooltip-operator-menus.ant-dropdown-menu-vertical .ant-menu-submenu-vertical .ant-menu-submenu-title,.antv-s2-tooltip-operator-menus.ant-menu-vertical .ant-menu-submenu-vertical .ant-menu-submenu-title{font-size:12px}.antv-s2-tooltip-operator-menus.ant-dropdown-menu-vertical .ant-dropdown-menu-submenu .ant-menu-submenu-title:not(.ant-menu-item-active),.antv-s2-tooltip-operator-menus.ant-menu-vertical .ant-dropdown-menu-submenu .ant-menu-submenu-title:not(.ant-menu-item-active),.antv-s2-tooltip-operator-menus.ant-dropdown-menu-vertical .ant-dropdown-menu-submenu-vertical .ant-menu-submenu-title:not(.ant-menu-item-active),.antv-s2-tooltip-operator-menus.ant-menu-vertical .ant-dropdown-menu-submenu-vertical .ant-menu-submenu-title:not(.ant-menu-item-active),.antv-s2-tooltip-operator-menus.ant-dropdown-menu-vertical .ant-menu-submenu .ant-menu-submenu-title:not(.ant-menu-item-active),.antv-s2-tooltip-operator-menus.ant-menu-vertical .ant-menu-submenu .ant-menu-submenu-title:not(.ant-menu-item-active),.antv-s2-tooltip-operator-menus.ant-dropdown-menu-vertical .ant-menu-submenu-vertical .ant-menu-submenu-title:not(.ant-menu-item-active),.antv-s2-tooltip-operator-menus.ant-menu-vertical .ant-menu-submenu-vertical .ant-menu-submenu-title:not(.ant-menu-item-active){color:var(--antv-s2-font, rgba(0, 0, 0, .65))}.antv-s2-tooltip-operator-submenu-popup .ant-dropdown-menu-item,.antv-s2-tooltip-operator-submenu-popup .ant-menu-item{font-size:12px}.antv-s2-tooltip-operator-submenu-popup .ant-dropdown-menu-item:not(.ant-menu-item-active),.antv-s2-tooltip-operator-submenu-popup .ant-menu-item:not(.ant-menu-item-active){color:var(--antv-s2-font, rgba(0, 0, 0, .65))}.antv-s2-tooltip-operator-icon svg{width:12px;height:12px}}.antv-s2-tooltip-container{position:fixed;user-select:text;min-width:200px;max-width:640px;max-height:100vh;overflow:auto;z-index:1024;display:inline-block;background:var(--antv-s2-tooltip-background, rgba(255, 255, 255, .95));border-radius:4px;box-shadow:0 1px 4px rgba(0,0,0,.2);font-size:12px;font-family:Roboto,PingFang SC,Chinese Quote,BlinkMacSystemFont,Segoe UI,Hiragino Sans GB,Microsoft YaHei,Helvetica Neue,Helvetica,Arial,sans-serif}.antv-s2-tooltip-container-hide{opacity:0;visibility:hidden;pointer-events:none}.antv-s2-tooltip-container-hide *{transition:none}.antv-s2-tooltip-container-show{opacity:1;visibility:visible;pointer-events:all}.antv-s2-tooltip-tips,.antv-s2-tooltip-name{padding:12px;line-height:16px;overflow-wrap:break-word;color:var(--antv-s2-font-85, rgba(0, 0, 0, .85))}.antv-s2-tooltip-description{padding:0 12px 12px;line-height:16px;overflow-wrap:break-word;color:var(--antv-s2-font-45, rgba(0, 0, 0, .45))}.antv-s2-tooltip-tips{padding:4px 12px;color:var(--antv-s2-font-45, rgba(0, 0, 0, .45))}.antv-s2-tooltip-infos{padding:4px 12px;line-height:20px;color:var(--antv-s2-font-45, rgba(0, 0, 0, .45));overflow:hidden;text-overflow:ellipsis;-webkit-line-clamp:2;display:-webkit-box;-webkit-box-orient:vertical;overflow-wrap:break-word;background:#f9f9f9f5;border-radius:0 0 2px 2px;background-color:#f9f9f9}.antv-s2-tooltip-summary{line-height:20px;color:var(--antv-s2-font-65, rgba(0, 0, 0, .65));overflow:hidden;padding:12px}.antv-s2-tooltip-summary-item{display:flex}.antv-s2-tooltip-summary-key{margin-right:20px}.antv-s2-tooltip-summary-val{flex:1;text-align:right;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.antv-s2-tooltip-interpretation{color:rgba(0,0,0,.65);overflow:hidden;padding:12px}.antv-s2-tooltip-interpretation+.antv-s2-tooltip-head-info-list{border-top:1px solid var(--antv-s2-border, #e9e9e9)}.antv-s2-tooltip-interpretation .antv-s2-tooltip-interpretation-head{margin-bottom:12px}.antv-s2-tooltip-interpretation .antv-s2-tooltip-interpretation-head .antv-s2-tooltip-interpretation-icon{width:14px;height:14px}.antv-s2-tooltip-interpretation .antv-s2-tooltip-interpretation-head .antv-s2-tooltip-interpretation-name{color:var(--antv-s2-font, #000)}.antv-s2-tooltip-head-info-list{color:var(--antv-s2-font-65, #a2a2a2);padding:12px 12px 4px;line-height:24px;word-break:break-word}.antv-s2-tooltip-bold,.antv-s2-tooltip-selected{font-weight:700}.antv-s2-tooltip-selected{margin-right:5px}.antv-s2-tooltip-highlight{color:var(--antv-s2-font-85, rgba(0, 0, 0, .85))}.antv-s2-tooltip-detail-list{padding:2px 12px 8px}.antv-s2-tooltip-detail-list .antv-s2-tooltip-detail-item{color:var(--antv-s2-font-65, rgba(0, 0, 0, .65));overflow:hidden;margin:4px 0;display:flex;justify-content:space-around;align-items:center}.antv-s2-tooltip-detail-list .antv-s2-tooltip-detail-item-key{margin-right:20px}.antv-s2-tooltip-detail-list .antv-s2-tooltip-detail-item-val{flex:1;text-align:right;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.ant-dropdown-menu-item.operation-item{font-size:12px}.antv-s2-spin.ant-spin-nested-loading,.antv-s2-spin>.ant-spin-container{height:100%}.antv-s2-wrapper{padding:0;margin:0;display:flex;flex-direction:column;height:100%}.antv-s2-container{overflow:auto;flex:1 1 auto}.antv-s2-container canvas{display:block}.antv-s2-pagination{display:flex;align-items:center;z-index:1024}.antv-s2-pagination-count{margin-left:12px;text-overflow:ellipsis;white-space:nowrap;max-width:64px}.antv-s2-drill-down[data-v-8dd920ec]{width:260px;min-height:20px;position:relative;color:var(--antv-s2-font-70, #fff)}.antv-s2-drill-down-header[data-v-8dd920ec]{display:flex;height:32px;font-size:14px;padding:0 16px;margin-top:16px}.antv-s2-drill-down-header button[data-v-8dd920ec]{position:absolute;right:0;top:-4px;font-size:12px;color:#1890ff;letter-spacing:-.2px;line-height:20px}.antv-s2-drill-down-search[data-v-8dd920ec]{height:24px;width:228px!important;margin:0 16px;border:1px solid rgba(0,0,0,.15);border-radius:2px}.antv-s2-drill-down-search input[data-v-8dd920ec],.antv-s2-drill-down-search span[data-v-8dd920ec]{font-size:12px}.antv-s2-drill-down-search[data-v-8dd920ec],.antv-s2-drill-down-search .ant-input[data-v-8dd920ec]::placeholder{background-color:var(--antv-s2-block-background, #fff)}.antv-s2-drill-down-extra[data-v-8dd920ec]{margin:4px 16px}.antv-s2-drill-down-menu[data-v-8dd920ec]{max-height:314px;overflow:hidden auto}.antv-s2-drill-down-menu.ant-menu[data-v-8dd920ec]{background:var(--antv-s2-tooltip-background, #fff)}.antv-s2-drill-down-menu.ant-menu:not(.ant-menu-horizontal) .ant-menu-item-selected[data-v-8dd920ec]{background-color:var(--antv-s2-block-background, #e6f7ff)}.antv-s2-drill-down-menu-item[data-v-8dd920ec]{height:32px!important;line-height:32px!important;font-size:12px;opacity:.65}.antv-s2-drill-down-menu-item span[data-v-8dd920ec]:last-child{line-height:32px}.antv-s2-drill-down-menu-item svg[data-v-8dd920ec]{margin-right:8px}.antv-s2-drill-down-empty[data-v-8dd920ec]{padding:12px;font-size:12px}\n",document.head.appendChild(b),{setters:[function(t){o=t.P,a=t.o,l=t.k,d=t.q,f=t.t,p=t.r,v=t.b,g=t.aa,y=t.u,m=t.j,C=t.F,w=t.av,x=t.aw}],execute:function(){var b=function(t,e){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},b(t,e)};function E(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}b(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var S=function(){return S=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},S.apply(this,arguments)};function T(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function L(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{l(r.next(t))}catch(e){o(e)}}function s(t){try{l(r.throw(t))}catch(e){o(e)}}function l(t){t.done?i(t.value):function(t){return t instanceof n?t:new n((function(e){e(t)}))}(t.value).then(a,s)}l((r=r.apply(t,e||[])).next())}))}function _(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(l){s=[6,l],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}}function M(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function R(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function O(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}function N(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}"function"==typeof SuppressedError&&SuppressedError;var I={exports:{}};!function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}function i(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function o(t,e,r,o,a){if("function"!=typeof r)throw new TypeError("The listener must be a function");var s=new i(r,o||t,a),l=n?n+e:e;return t._events[l]?t._events[l].fn?t._events[l]=[t._events[l],s]:t._events[l].push(s):(t._events[l]=s,t._eventsCount++),t}function a(t,e){0==--t._eventsCount?t._events=new r:delete t._events[e]}function s(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),s.prototype.eventNames=function(){var t,r,i=[];if(0===this._eventsCount)return i;for(r in t=this._events)e.call(t,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(t)):i},s.prototype.listeners=function(t){var e=n?n+t:t,r=this._events[e];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,o=r.length,a=new Array(o);i<o;i++)a[i]=r[i].fn;return a},s.prototype.listenerCount=function(t){var e=n?n+t:t,r=this._events[e];return r?r.fn?1:r.length:0},s.prototype.emit=function(t,e,r,i,o,a){var s=n?n+t:t;if(!this._events[s])return!1;var l,u,c=this._events[s],h=arguments.length;if(c.fn){switch(c.once&&this.removeListener(t,c.fn,void 0,!0),h){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,e),!0;case 3:return c.fn.call(c.context,e,r),!0;case 4:return c.fn.call(c.context,e,r,i),!0;case 5:return c.fn.call(c.context,e,r,i,o),!0;case 6:return c.fn.call(c.context,e,r,i,o,a),!0}for(u=1,l=new Array(h-1);u<h;u++)l[u-1]=arguments[u];c.fn.apply(c.context,l)}else{var d,f=c.length;for(u=0;u<f;u++)switch(c[u].once&&this.removeListener(t,c[u].fn,void 0,!0),h){case 1:c[u].fn.call(c[u].context);break;case 2:c[u].fn.call(c[u].context,e);break;case 3:c[u].fn.call(c[u].context,e,r);break;case 4:c[u].fn.call(c[u].context,e,r,i);break;default:if(!l)for(d=1,l=new Array(h-1);d<h;d++)l[d-1]=arguments[d];c[u].fn.apply(c[u].context,l)}}return!0},s.prototype.on=function(t,e,n){return o(this,t,e,n,!1)},s.prototype.once=function(t,e,n){return o(this,t,e,n,!0)},s.prototype.removeListener=function(t,e,r,i){var o=n?n+t:t;if(!this._events[o])return this;if(!e)return a(this,o),this;var s=this._events[o];if(s.fn)s.fn!==e||i&&!s.once||r&&s.context!==r||a(this,o);else{for(var l=0,u=[],c=s.length;l<c;l++)(s[l].fn!==e||i&&!s[l].once||r&&s[l].context!==r)&&u.push(s[l]);u.length?this._events[o]=1===u.length?u[0]:u:a(this,o)}return this},s.prototype.removeAllListeners=function(t){var e;return t?(e=n?n+t:t,this._events[e]&&a(this,e)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,t.exports=s}(I);var A=N(I.exports),P=1e-6,k="undefined"!=typeof Float32Array?Float32Array:Array;function B(){var t=new k(9);return k!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function D(){var t=new k(16);return k!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function F(t){var e=new k(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function H(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function z(t,e,n,r,i,o,a,s,l,u,c,h,d,f,p,v,g){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=o,t[5]=a,t[6]=s,t[7]=l,t[8]=u,t[9]=c,t[10]=h,t[11]=d,t[12]=f,t[13]=p,t[14]=v,t[15]=g,t}function G(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function W(t,e){if(t===e){var n=e[1],r=e[2],i=e[3],o=e[6],a=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=o,t[11]=e[14],t[12]=i,t[13]=a,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function V(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],l=e[6],u=e[7],c=e[8],h=e[9],d=e[10],f=e[11],p=e[12],v=e[13],g=e[14],y=e[15],m=n*s-r*a,C=n*l-i*a,w=n*u-o*a,x=r*l-i*s,b=r*u-o*s,E=i*u-o*l,S=c*v-h*p,T=c*g-d*p,L=c*y-f*p,_=h*g-d*v,M=h*y-f*v,R=d*y-f*g,O=m*R-C*M+w*_+x*L-b*T+E*S;return O?(O=1/O,t[0]=(s*R-l*M+u*_)*O,t[1]=(i*M-r*R-o*_)*O,t[2]=(v*E-g*b+y*x)*O,t[3]=(d*b-h*E-f*x)*O,t[4]=(l*L-a*R-u*T)*O,t[5]=(n*R-i*L+o*T)*O,t[6]=(g*w-p*E-y*C)*O,t[7]=(c*E-d*w+f*C)*O,t[8]=(a*M-s*L+u*S)*O,t[9]=(r*L-n*M-o*S)*O,t[10]=(p*b-v*w+y*m)*O,t[11]=(h*w-c*b-f*m)*O,t[12]=(s*T-a*_-l*S)*O,t[13]=(n*_-r*T+i*S)*O,t[14]=(v*C-p*x-g*m)*O,t[15]=(c*x-h*C+d*m)*O,t):null}function U(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],l=t[7],u=t[8],c=t[9],h=t[10],d=t[11],f=t[12],p=t[13],v=t[14],g=t[15];return(e*a-n*o)*(h*g-d*v)-(e*s-r*o)*(c*g-d*p)+(e*l-i*o)*(c*v-h*p)+(n*s-r*a)*(u*g-d*f)-(n*l-i*a)*(u*v-h*f)+(r*l-i*s)*(u*p-c*f)}function j(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],l=e[5],u=e[6],c=e[7],h=e[8],d=e[9],f=e[10],p=e[11],v=e[12],g=e[13],y=e[14],m=e[15],C=n[0],w=n[1],x=n[2],b=n[3];return t[0]=C*r+w*s+x*h+b*v,t[1]=C*i+w*l+x*d+b*g,t[2]=C*o+w*u+x*f+b*y,t[3]=C*a+w*c+x*p+b*m,C=n[4],w=n[5],x=n[6],b=n[7],t[4]=C*r+w*s+x*h+b*v,t[5]=C*i+w*l+x*d+b*g,t[6]=C*o+w*u+x*f+b*y,t[7]=C*a+w*c+x*p+b*m,C=n[8],w=n[9],x=n[10],b=n[11],t[8]=C*r+w*s+x*h+b*v,t[9]=C*i+w*l+x*d+b*g,t[10]=C*o+w*u+x*f+b*y,t[11]=C*a+w*c+x*p+b*m,C=n[12],w=n[13],x=n[14],b=n[15],t[12]=C*r+w*s+x*h+b*v,t[13]=C*i+w*l+x*d+b*g,t[14]=C*o+w*u+x*f+b*y,t[15]=C*a+w*c+x*p+b*m,t}function Y(t,e,n){var r,i,o,a,s,l,u,c,h,d,f,p,v=n[0],g=n[1],y=n[2];return e===t?(t[12]=e[0]*v+e[4]*g+e[8]*y+e[12],t[13]=e[1]*v+e[5]*g+e[9]*y+e[13],t[14]=e[2]*v+e[6]*g+e[10]*y+e[14],t[15]=e[3]*v+e[7]*g+e[11]*y+e[15]):(r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],l=e[5],u=e[6],c=e[7],h=e[8],d=e[9],f=e[10],p=e[11],t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=l,t[6]=u,t[7]=c,t[8]=h,t[9]=d,t[10]=f,t[11]=p,t[12]=r*v+s*g+h*y+e[12],t[13]=i*v+l*g+d*y+e[13],t[14]=o*v+u*g+f*y+e[14],t[15]=a*v+c*g+p*y+e[15]),t}function X(t,e,n){var r=n[0],i=n[1],o=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function q(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[4],a=e[5],s=e[6],l=e[7],u=e[8],c=e[9],h=e[10],d=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*i+u*r,t[5]=a*i+c*r,t[6]=s*i+h*r,t[7]=l*i+d*r,t[8]=u*i-o*r,t[9]=c*i-a*r,t[10]=h*i-s*r,t[11]=d*i-l*r,t}function K(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],a=e[1],s=e[2],l=e[3],u=e[8],c=e[9],h=e[10],d=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i-u*r,t[1]=a*i-c*r,t[2]=s*i-h*r,t[3]=l*i-d*r,t[8]=o*r+u*i,t[9]=a*r+c*i,t[10]=s*r+h*i,t[11]=l*r+d*i,t}function Z(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function $(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Q(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=r+r,l=i+i,u=o+o,c=r*s,h=r*l,d=r*u,f=i*l,p=i*u,v=o*u,g=a*s,y=a*l,m=a*u;return t[0]=1-(f+v),t[1]=h+m,t[2]=d-y,t[3]=0,t[4]=h-m,t[5]=1-(c+v),t[6]=p+g,t[7]=0,t[8]=d+y,t[9]=p-g,t[10]=1-(c+f),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function J(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function tt(t,e){var n=e[0],r=e[1],i=e[2],o=e[4],a=e[5],s=e[6],l=e[8],u=e[9],c=e[10];return t[0]=Math.hypot(n,r,i),t[1]=Math.hypot(o,a,s),t[2]=Math.hypot(l,u,c),t}function et(t,e){var n=new k(3);tt(n,e);var r=1/n[0],i=1/n[1],o=1/n[2],a=e[0]*r,s=e[1]*i,l=e[2]*o,u=e[4]*r,c=e[5]*i,h=e[6]*o,d=e[8]*r,f=e[9]*i,p=e[10]*o,v=a+c+p,g=0;return v>0?(g=2*Math.sqrt(v+1),t[3]=.25*g,t[0]=(h-f)/g,t[1]=(d-l)/g,t[2]=(s-u)/g):a>c&&a>p?(g=2*Math.sqrt(1+a-c-p),t[3]=(h-f)/g,t[0]=.25*g,t[1]=(s+u)/g,t[2]=(d+l)/g):c>p?(g=2*Math.sqrt(1+c-a-p),t[3]=(d-l)/g,t[0]=(s+u)/g,t[1]=.25*g,t[2]=(h+f)/g):(g=2*Math.sqrt(1+p-a-c),t[3]=(s-u)/g,t[0]=(d+l)/g,t[1]=(h+f)/g,t[2]=.25*g),t}function nt(t,e,n,r,i){var o=e[0],a=e[1],s=e[2],l=e[3],u=o+o,c=a+a,h=s+s,d=o*u,f=o*c,p=o*h,v=a*c,g=a*h,y=s*h,m=l*u,C=l*c,w=l*h,x=r[0],b=r[1],E=r[2],S=i[0],T=i[1],L=i[2],_=(1-(v+y))*x,M=(f+w)*x,R=(p-C)*x,O=(f-w)*b,N=(1-(d+y))*b,I=(g+m)*b,A=(p+C)*E,P=(g-m)*E,k=(1-(d+v))*E;return t[0]=_,t[1]=M,t[2]=R,t[3]=0,t[4]=O,t[5]=N,t[6]=I,t[7]=0,t[8]=A,t[9]=P,t[10]=k,t[11]=0,t[12]=n[0]+S-(_*S+O*T+A*L),t[13]=n[1]+T-(M*S+N*T+P*L),t[14]=n[2]+L-(R*S+I*T+k*L),t[15]=1,t}function rt(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n+n,s=r+r,l=i+i,u=n*a,c=r*a,h=r*s,d=i*a,f=i*s,p=i*l,v=o*a,g=o*s,y=o*l;return t[0]=1-h-p,t[1]=c+y,t[2]=d-g,t[3]=0,t[4]=c-y,t[5]=1-u-p,t[6]=f+v,t[7]=0,t[8]=d+g,t[9]=f-v,t[10]=1-u-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function it(t,e,n,r,i){var o,a=1/Math.tan(e/2);return t[0]=a/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(o=1/(r-i),t[10]=(i+r)*o,t[14]=2*i*r*o):(t[10]=-1,t[14]=-2*r),t}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var ot=it;function at(t,e,n,r,i,o,a){var s=1/(e-n),l=1/(r-i),u=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(e+n)*s,t[13]=(i+r)*l,t[14]=(a+o)*u,t[15]=1,t}var st=at;function lt(t,e,n,r,i,o,a){var s=1/(e-n),l=1/(r-i),u=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=u,t[11]=0,t[12]=(e+n)*s,t[13]=(i+r)*l,t[14]=o*u,t[15]=1,t}function ut(t,e,n,r){var i,o,a,s,l,u,c,h,d,f,p=e[0],v=e[1],g=e[2],y=r[0],m=r[1],C=r[2],w=n[0],x=n[1],b=n[2];return Math.abs(p-w)<P&&Math.abs(v-x)<P&&Math.abs(g-b)<P?G(t):(c=p-w,h=v-x,d=g-b,i=m*(d*=f=1/Math.hypot(c,h,d))-C*(h*=f),o=C*(c*=f)-y*d,a=y*h-m*c,(f=Math.hypot(i,o,a))?(i*=f=1/f,o*=f,a*=f):(i=0,o=0,a=0),s=h*a-d*o,l=d*i-c*a,u=c*o-h*i,(f=Math.hypot(s,l,u))?(s*=f=1/f,l*=f,u*=f):(s=0,l=0,u=0),t[0]=i,t[1]=s,t[2]=c,t[3]=0,t[4]=o,t[5]=l,t[6]=h,t[7]=0,t[8]=a,t[9]=u,t[10]=d,t[11]=0,t[12]=-(i*p+o*v+a*g),t[13]=-(s*p+l*v+u*g),t[14]=-(c*p+h*v+d*g),t[15]=1,t)}function ct(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}var ht=j,dt=ct,ft=Object.freeze({__proto__:null,add:function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t},adjoint:function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],l=e[6],u=e[7],c=e[8],h=e[9],d=e[10],f=e[11],p=e[12],v=e[13],g=e[14],y=e[15];return t[0]=s*(d*y-f*g)-h*(l*y-u*g)+v*(l*f-u*d),t[1]=-(r*(d*y-f*g)-h*(i*y-o*g)+v*(i*f-o*d)),t[2]=r*(l*y-u*g)-s*(i*y-o*g)+v*(i*u-o*l),t[3]=-(r*(l*f-u*d)-s*(i*f-o*d)+h*(i*u-o*l)),t[4]=-(a*(d*y-f*g)-c*(l*y-u*g)+p*(l*f-u*d)),t[5]=n*(d*y-f*g)-c*(i*y-o*g)+p*(i*f-o*d),t[6]=-(n*(l*y-u*g)-a*(i*y-o*g)+p*(i*u-o*l)),t[7]=n*(l*f-u*d)-a*(i*f-o*d)+c*(i*u-o*l),t[8]=a*(h*y-f*v)-c*(s*y-u*v)+p*(s*f-u*h),t[9]=-(n*(h*y-f*v)-c*(r*y-o*v)+p*(r*f-o*h)),t[10]=n*(s*y-u*v)-a*(r*y-o*v)+p*(r*u-o*s),t[11]=-(n*(s*f-u*h)-a*(r*f-o*h)+c*(r*u-o*s)),t[12]=-(a*(h*g-d*v)-c*(s*g-l*v)+p*(s*d-l*h)),t[13]=n*(h*g-d*v)-c*(r*g-i*v)+p*(r*d-i*h),t[14]=-(n*(s*g-l*v)-a*(r*g-i*v)+p*(r*l-i*s)),t[15]=n*(s*d-l*h)-a*(r*d-i*h)+c*(r*l-i*s),t},clone:F,copy:H,create:D,determinant:U,equals:function(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=t[6],u=t[7],c=t[8],h=t[9],d=t[10],f=t[11],p=t[12],v=t[13],g=t[14],y=t[15],m=e[0],C=e[1],w=e[2],x=e[3],b=e[4],E=e[5],S=e[6],T=e[7],L=e[8],_=e[9],M=e[10],R=e[11],O=e[12],N=e[13],I=e[14],A=e[15];return Math.abs(n-m)<=P*Math.max(1,Math.abs(n),Math.abs(m))&&Math.abs(r-C)<=P*Math.max(1,Math.abs(r),Math.abs(C))&&Math.abs(i-w)<=P*Math.max(1,Math.abs(i),Math.abs(w))&&Math.abs(o-x)<=P*Math.max(1,Math.abs(o),Math.abs(x))&&Math.abs(a-b)<=P*Math.max(1,Math.abs(a),Math.abs(b))&&Math.abs(s-E)<=P*Math.max(1,Math.abs(s),Math.abs(E))&&Math.abs(l-S)<=P*Math.max(1,Math.abs(l),Math.abs(S))&&Math.abs(u-T)<=P*Math.max(1,Math.abs(u),Math.abs(T))&&Math.abs(c-L)<=P*Math.max(1,Math.abs(c),Math.abs(L))&&Math.abs(h-_)<=P*Math.max(1,Math.abs(h),Math.abs(_))&&Math.abs(d-M)<=P*Math.max(1,Math.abs(d),Math.abs(M))&&Math.abs(f-R)<=P*Math.max(1,Math.abs(f),Math.abs(R))&&Math.abs(p-O)<=P*Math.max(1,Math.abs(p),Math.abs(O))&&Math.abs(v-N)<=P*Math.max(1,Math.abs(v),Math.abs(N))&&Math.abs(g-I)<=P*Math.max(1,Math.abs(g),Math.abs(I))&&Math.abs(y-A)<=P*Math.max(1,Math.abs(y),Math.abs(A))},exactEquals:function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]},frob:function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])},fromQuat:rt,fromQuat2:function(t,e){var n=new k(3),r=-e[0],i=-e[1],o=-e[2],a=e[3],s=e[4],l=e[5],u=e[6],c=e[7],h=r*r+i*i+o*o+a*a;return h>0?(n[0]=2*(s*a+c*r+l*o-u*i)/h,n[1]=2*(l*a+c*i+u*r-s*o)/h,n[2]=2*(u*a+c*o+s*i-l*r)/h):(n[0]=2*(s*a+c*r+l*o-u*i),n[1]=2*(l*a+c*i+u*r-s*o),n[2]=2*(u*a+c*o+s*i-l*r)),Q(t,e,n),t},fromRotation:function(t,e,n){var r,i,o,a=n[0],s=n[1],l=n[2],u=Math.hypot(a,s,l);return u<P?null:(a*=u=1/u,s*=u,l*=u,r=Math.sin(e),o=1-(i=Math.cos(e)),t[0]=a*a*o+i,t[1]=s*a*o+l*r,t[2]=l*a*o-s*r,t[3]=0,t[4]=a*s*o-l*r,t[5]=s*s*o+i,t[6]=l*s*o+a*r,t[7]=0,t[8]=a*l*o+s*r,t[9]=s*l*o-a*r,t[10]=l*l*o+i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},fromRotationTranslation:Q,fromRotationTranslationScale:function(t,e,n,r){var i=e[0],o=e[1],a=e[2],s=e[3],l=i+i,u=o+o,c=a+a,h=i*l,d=i*u,f=i*c,p=o*u,v=o*c,g=a*c,y=s*l,m=s*u,C=s*c,w=r[0],x=r[1],b=r[2];return t[0]=(1-(p+g))*w,t[1]=(d+C)*w,t[2]=(f-m)*w,t[3]=0,t[4]=(d-C)*x,t[5]=(1-(h+g))*x,t[6]=(v+y)*x,t[7]=0,t[8]=(f+m)*b,t[9]=(v-y)*b,t[10]=(1-(h+p))*b,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t},fromRotationTranslationScaleOrigin:nt,fromScaling:$,fromTranslation:Z,fromValues:function(t,e,n,r,i,o,a,s,l,u,c,h,d,f,p,v){var g=new k(16);return g[0]=t,g[1]=e,g[2]=n,g[3]=r,g[4]=i,g[5]=o,g[6]=a,g[7]=s,g[8]=l,g[9]=u,g[10]=c,g[11]=h,g[12]=d,g[13]=f,g[14]=p,g[15]=v,g},fromXRotation:function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},fromYRotation:function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},fromZRotation:function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},frustum:function(t,e,n,r,i,o,a){var s=1/(n-e),l=1/(i-r),u=1/(o-a);return t[0]=2*o*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*l,t[6]=0,t[7]=0,t[8]=(n+e)*s,t[9]=(i+r)*l,t[10]=(a+o)*u,t[11]=-1,t[12]=0,t[13]=0,t[14]=a*o*2*u,t[15]=0,t},getRotation:et,getScaling:tt,getTranslation:J,identity:G,invert:V,lookAt:ut,mul:ht,multiply:j,multiplyScalar:function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t},multiplyScalarAndAdd:function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t[9]=e[9]+n[9]*r,t[10]=e[10]+n[10]*r,t[11]=e[11]+n[11]*r,t[12]=e[12]+n[12]*r,t[13]=e[13]+n[13]*r,t[14]=e[14]+n[14]*r,t[15]=e[15]+n[15]*r,t},ortho:st,orthoNO:at,orthoZO:lt,perspective:ot,perspectiveFromFieldOfView:function(t,e,n,r){var i=Math.tan(e.upDegrees*Math.PI/180),o=Math.tan(e.downDegrees*Math.PI/180),a=Math.tan(e.leftDegrees*Math.PI/180),s=Math.tan(e.rightDegrees*Math.PI/180),l=2/(a+s),u=2/(i+o);return t[0]=l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=u,t[6]=0,t[7]=0,t[8]=-(a-s)*l*.5,t[9]=(i-o)*u*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t},perspectiveNO:it,perspectiveZO:function(t,e,n,r,i){var o,a=1/Math.tan(e/2);return t[0]=a/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(o=1/(r-i),t[10]=i*o,t[14]=i*r*o):(t[10]=-1,t[14]=-r),t},rotate:function(t,e,n,r){var i,o,a,s,l,u,c,h,d,f,p,v,g,y,m,C,w,x,b,E,S,T,L,_,M=r[0],R=r[1],O=r[2],N=Math.hypot(M,R,O);return N<P?null:(M*=N=1/N,R*=N,O*=N,i=Math.sin(n),a=1-(o=Math.cos(n)),s=e[0],l=e[1],u=e[2],c=e[3],h=e[4],d=e[5],f=e[6],p=e[7],v=e[8],g=e[9],y=e[10],m=e[11],C=M*M*a+o,w=R*M*a+O*i,x=O*M*a-R*i,b=M*R*a-O*i,E=R*R*a+o,S=O*R*a+M*i,T=M*O*a+R*i,L=R*O*a-M*i,_=O*O*a+o,t[0]=s*C+h*w+v*x,t[1]=l*C+d*w+g*x,t[2]=u*C+f*w+y*x,t[3]=c*C+p*w+m*x,t[4]=s*b+h*E+v*S,t[5]=l*b+d*E+g*S,t[6]=u*b+f*E+y*S,t[7]=c*b+p*E+m*S,t[8]=s*T+h*L+v*_,t[9]=l*T+d*L+g*_,t[10]=u*T+f*L+y*_,t[11]=c*T+p*L+m*_,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)},rotateX:q,rotateY:K,rotateZ:function(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],a=e[1],s=e[2],l=e[3],u=e[4],c=e[5],h=e[6],d=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i+u*r,t[1]=a*i+c*r,t[2]=s*i+h*r,t[3]=l*i+d*r,t[4]=u*i-o*r,t[5]=c*i-a*r,t[6]=h*i-s*r,t[7]=d*i-l*r,t},scale:X,set:z,str:function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},sub:dt,subtract:ct,targetTo:function(t,e,n,r){var i=e[0],o=e[1],a=e[2],s=r[0],l=r[1],u=r[2],c=i-n[0],h=o-n[1],d=a-n[2],f=c*c+h*h+d*d;f>0&&(c*=f=1/Math.sqrt(f),h*=f,d*=f);var p=l*d-u*h,v=u*c-s*d,g=s*h-l*c;return(f=p*p+v*v+g*g)>0&&(p*=f=1/Math.sqrt(f),v*=f,g*=f),t[0]=p,t[1]=v,t[2]=g,t[3]=0,t[4]=h*g-d*v,t[5]=d*p-c*g,t[6]=c*v-h*p,t[7]=0,t[8]=c,t[9]=h,t[10]=d,t[11]=0,t[12]=i,t[13]=o,t[14]=a,t[15]=1,t},translate:Y,transpose:W});function pt(){var t=new k(3);return k!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function vt(t){var e=new k(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function gt(t){var e=t[0],n=t[1],r=t[2];return Math.hypot(e,n,r)}function yt(t,e,n){var r=new k(3);return r[0]=t,r[1]=e,r[2]=n,r}function mt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function Ct(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t}function wt(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function xt(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function bt(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function Et(t,e){var n=e[0],r=e[1],i=e[2],o=n*n+r*r+i*i;return o>0&&(o=1/Math.sqrt(o)),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o,t}function St(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Tt(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[0],s=n[1],l=n[2];return t[0]=i*l-o*s,t[1]=o*a-r*l,t[2]=r*s-i*a,t}function Lt(t,e,n,r){var i=e[0],o=e[1],a=e[2];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t[2]=a+r*(n[2]-a),t}function _t(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[3]*r+n[7]*i+n[11]*o+n[15];return a=a||1,t[0]=(n[0]*r+n[4]*i+n[8]*o+n[12])/a,t[1]=(n[1]*r+n[5]*i+n[9]*o+n[13])/a,t[2]=(n[2]*r+n[6]*i+n[10]*o+n[14])/a,t}function Mt(t,e){var n=t[0],r=t[1],i=t[2],o=e[0],a=e[1],s=e[2];return Math.abs(n-o)<=P*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(r-a)<=P*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(i-s)<=P*Math.max(1,Math.abs(i),Math.abs(s))}var Rt=function(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return Math.hypot(n,r,i)},Ot=gt;function Nt(){var t=new k(4);return k!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function It(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*a,t[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*a,t[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*a,t[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*a,t}function At(){var t=new k(4);return k!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function Pt(t,e,n){n*=.5;var r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t}function kt(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=n[0],l=n[1],u=n[2],c=n[3];return t[0]=r*c+a*s+i*u-o*l,t[1]=i*c+a*l+o*s-r*u,t[2]=o*c+a*u+r*l-i*s,t[3]=a*c-r*s-i*l-o*u,t}function Bt(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n*n+r*r+i*i+o*o,s=a?1/a:0;return t[0]=-n*s,t[1]=-r*s,t[2]=-i*s,t[3]=o*s,t}function Dt(t,e,n,r){var i=.5*Math.PI/180;e*=i,n*=i,r*=i;var o=Math.sin(e),a=Math.cos(e),s=Math.sin(n),l=Math.cos(n),u=Math.sin(r),c=Math.cos(r);return t[0]=o*l*c-a*s*u,t[1]=a*s*c+o*l*u,t[2]=a*l*u-o*s*c,t[3]=a*l*c+o*s*u,t}pt(),function(){var t=Nt()}();var Ft=function(t,e,n,r){var i=new k(4);return i[0]=t,i[1]=e,i[2]=n,i[3]=r,i},Ht=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},zt=kt,Gt=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n*n+r*r+i*i+o*o;return a>0&&(a=1/Math.sqrt(a)),t[0]=n*a,t[1]=r*a,t[2]=i*a,t[3]=o*a,t};pt(),yt(1,0,0),yt(0,1,0),At(),At(),B(),function(){var t,e=(t=new k(2),k!=Float32Array&&(t[0]=0,t[1]=0),t)}();var Wt=function(t){return null==t},Vt={}.toString,Ut=function(t,e){return Vt.call(t)==="[object "+e+"]"},jt=function(t){return Array.isArray?Array.isArray(t):Ut(t,"Array")},Yt=function(t){var e=h(t);return null!==t&&"object"===e||"function"===e},Xt=function(t){if(jt(t))return t.reduce((function(t,e){return Math.max(t,e)}),t[0])},qt=function(t){if(jt(t))return t.reduce((function(t,e){return Math.min(t,e)}),t[0])},Kt=function(t){return Ut(t,"String")},Zt=function(t,e,n){return t<e?e:t>n?n:t},$t=function(t){return Ut(t,"Number")},Qt=1e-5;function Jt(t,e,n){return void 0===n&&(n=Qt),Math.abs(t-e)<n}var te=function(t,e){return(t%e+e)%e},ee=function(t){return Ut(t,"Boolean")},ne=function(t){return void 0===t},re={x1:0,y1:0,x2:0,y2:0,x:0,y:0,qx:null,qy:null};function ie(t,e,n){if(t[n].length>7){t[n].shift();for(var r=t[n],i=n;r.length;)e[n]="A",t.splice(i+=1,0,["C"].concat(r.splice(0,6)));t.splice(n,1)}}var oe={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0};function ae(t){return Array.isArray(t)&&t.every((function(t){var e=t[0].toLowerCase();return oe[e]===t.length-1&&"achlmqstvz".includes(e)}))}function se(t){return ae(t)&&t.every((function(t){var e=t[0];return e===e.toUpperCase()}))}function le(t){return se(t)&&t.every((function(t){var e=t[0];return"ACLMQZ".includes(e)}))}function ue(t){for(var e=t.pathValue[t.segmentStart],n=e.toLowerCase(),r=t.data;r.length>=oe[n]&&("m"===n&&r.length>2?(t.segments.push([e].concat(r.splice(0,2))),n="l",e="m"===e?"l":"L"):t.segments.push([e].concat(r.splice(0,oe[n]))),oe[n]););}function ce(t){var e=t.index,n=t.pathValue,r=n.charCodeAt(e);return 48===r?(t.param=0,void(t.index+=1)):49===r?(t.param=1,void(t.index+=1)):void(t.err='[path-util]: invalid Arc flag "'+n[e]+'", expecting 0 or 1 at index '+e)}function he(t){return t>=48&&t<=57||43===t||45===t||46===t}function de(t){return t>=48&&t<=57}function fe(t){var e,n=t.max,r=t.pathValue,i=t.index,o=i,a=!1,s=!1,l=!1,u=!1;if(o>=n)t.err="[path-util]: Invalid path value at index "+o+', "pathValue" is missing param';else if(43!==(e=r.charCodeAt(o))&&45!==e||(o+=1,e=r.charCodeAt(o)),de(e)||46===e){if(46!==e){if(a=48===e,o+=1,e=r.charCodeAt(o),a&&o<n&&e&&de(e))return void(t.err="[path-util]: Invalid path value at index "+i+', "'+r[i]+'" illegal number');for(;o<n&&de(r.charCodeAt(o));)o+=1,s=!0;e=r.charCodeAt(o)}if(46===e){for(u=!0,o+=1;de(r.charCodeAt(o));)o+=1,l=!0;e=r.charCodeAt(o)}if(101===e||69===e){if(u&&!s&&!l)return void(t.err="[path-util]: Invalid path value at index "+o+', "'+r[o]+'" invalid float exponent');if(o+=1,43!==(e=r.charCodeAt(o))&&45!==e||(o+=1),!(o<n&&de(r.charCodeAt(o))))return void(t.err="[path-util]: Invalid path value at index "+o+', "'+r[o]+'" invalid integer exponent');for(;o<n&&de(r.charCodeAt(o));)o+=1}t.index=o,t.param=+t.pathValue.slice(i,o)}else t.err="[path-util]: Invalid path value at index "+o+', "'+r[o]+'" is not a number'}function pe(t){for(var e,n=t.pathValue,r=t.max;t.index<r&&(10===(e=n.charCodeAt(t.index))||13===e||8232===e||8233===e||32===e||9===e||11===e||12===e||160===e||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(e));)t.index+=1}function ve(t){var e=t.max,n=t.pathValue,r=t.index,i=n.charCodeAt(r),o=oe[n[r].toLowerCase()];if(t.segmentStart=r,function(t){switch(32|t){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:return!0;default:return!1}}(i))if(t.index+=1,pe(t),t.data=[],o){for(;;){for(var a=o;a>0;a-=1){if(97!=(32|i)||3!==a&&4!==a?fe(t):ce(t),t.err.length)return;t.data.push(t.param),pe(t),t.index<e&&44===n.charCodeAt(t.index)&&(t.index+=1,pe(t))}if(t.index>=t.max)break;if(!he(n.charCodeAt(t.index)))break}ue(t)}else ue(t);else t.err='[path-util]: Invalid path value "'+n[r]+'" is not a path command'}var ge=function(t){this.pathValue=t,this.segments=[],this.max=t.length,this.index=0,this.param=0,this.segmentStart=0,this.data=[],this.err=""};function ye(t){if(se(t))return[].concat(t);var e=function(t){if(ae(t))return[].concat(t);var e=new ge(t);for(pe(e);e.index<e.max&&!e.err.length;)ve(e);return e.err?e.err:e.segments}(t),n=0,r=0,i=0,o=0;return e.map((function(t){var e,a=t.slice(1).map(Number),s=t[0],l=s.toUpperCase();if("M"===s)return n=a[0],r=a[1],i=n,o=r,["M",n,r];if(s!==l)switch(l){case"A":e=[l,a[0],a[1],a[2],a[3],a[4],a[5]+n,a[6]+r];break;case"V":e=[l,a[0]+r];break;case"H":e=[l,a[0]+n];break;default:var u=a.map((function(t,e){return t+(e%2?r:n)}));e=[l].concat(u)}else e=[l].concat(a);var c=e.length;switch(l){case"Z":n=i,r=o;break;case"H":n=e[1];break;case"V":r=e[1];break;default:n=e[c-2],r=e[c-1],"M"===l&&(i=n,o=r)}return e}))}function me(t,e){var n=t[0],r=e.x1,i=e.y1,o=e.x2,a=e.y2,s=t.slice(1).map(Number),l=t;if("TQ".includes(n)||(e.qx=null,e.qy=null),"H"===n)l=["L",t[1],i];else if("V"===n)l=["L",r,t[1]];else if("S"===n){var u=2*r-o,c=2*i-a;e.x1=u,e.y1=c,l=["C",u,c].concat(s)}else if("T"===n){var h=2*r-e.qx,d=2*i-e.qy;e.qx=h,e.qy=d,l=["Q",h,d].concat(s)}else if("Q"===n){var f=s[0],p=s[1];e.qx=f,e.qy=p}return l}function Ce(t){if(le(t))return[].concat(t);for(var e=ye(t),n=S({},re),r=0;r<e.length;r+=1){e[r]=me(e[r],n);var i=e[r],o=i.length;n.x1=+i[o-2],n.y1=+i[o-1],n.x2=+i[o-4]||n.x1,n.y2=+i[o-3]||n.y1}return e}function we(t,e,n){return{x:t*Math.cos(n)-e*Math.sin(n),y:t*Math.sin(n)+e*Math.cos(n)}}function xe(t,e,n,r,i,o,a,s,l,u){var c,h,d,f,p,v=t,g=e,y=n,m=r,C=s,w=l,x=120*Math.PI/180,b=Math.PI/180*(+i||0),E=[];if(u)h=u[0],d=u[1],f=u[2],p=u[3];else{v=(c=we(v,g,-b)).x,g=c.y;var S=(v-(C=(c=we(C,w,-b)).x))/2,T=(g-(w=c.y))/2,L=S*S/(y*y)+T*T/(m*m);L>1&&(y*=L=Math.sqrt(L),m*=L);var _=y*y,M=m*m,R=(o===a?-1:1)*Math.sqrt(Math.abs((_*M-_*T*T-M*S*S)/(_*T*T+M*S*S)));f=R*y*T/m+(v+C)/2,p=R*-m*S/y+(g+w)/2,h=Math.asin(((g-p)/m*Math.pow(10,9)|0)/Math.pow(10,9)),d=Math.asin(((w-p)/m*Math.pow(10,9)|0)/Math.pow(10,9)),h=v<f?Math.PI-h:h,d=C<f?Math.PI-d:d,h<0&&(h=2*Math.PI+h),d<0&&(d=2*Math.PI+d),a&&h>d&&(h-=2*Math.PI),!a&&d>h&&(d-=2*Math.PI)}var O=d-h;if(Math.abs(O)>x){var N=d,I=C,A=w;d=h+x*(a&&d>h?1:-1),E=xe(C=f+y*Math.cos(d),w=p+m*Math.sin(d),y,m,i,0,a,I,A,[d,N,f,p])}O=d-h;var P=Math.cos(h),k=Math.sin(h),B=Math.cos(d),D=Math.sin(d),F=Math.tan(O/4),H=4/3*y*F,z=4/3*m*F,G=[v,g],W=[v+H*k,g-z*P],V=[C+H*D,w-z*B],U=[C,w];if(W[0]=2*G[0]-W[0],W[1]=2*G[1]-W[1],u)return W.concat(V,U,E);for(var j=[],Y=0,X=(E=W.concat(V,U,E)).length;Y<X;Y+=1)j[Y]=Y%2?we(E[Y-1],E[Y],b).y:we(E[Y],E[Y+1],b).x;return j}function be(t,e,n){var r=t[0],i=t[1];return[r+(e[0]-r)*n,i+(e[1]-i)*n]}var Ee=function(t,e,n,r){return O(O([],be([t,e],[n,r],.5),!0),[n,r,n,r],!1)};function Se(t,e){var n,r,i,o,a,s,l,u,c,h=t[0],d=t.slice(1).map(Number),f=d[0],p=d[1],v=e.x1,g=e.y1,y=e.x,m=e.y;switch("TQ".includes(h)||(e.qx=null,e.qy=null),h){case"M":return e.x=f,e.y=p,t;case"A":return n=[v,g].concat(d),["C"].concat(xe(n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9]));case"Q":return e.qx=f,e.qy=p,n=[v,g].concat(d),["C"].concat((r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],l=n[5],[(u=1/3)*r+(c=2/3)*o,u*i+c*a,u*s+c*o,u*l+c*a,s,l]));case"L":return["C"].concat(Ee(v,g,f,p));case"Z":return v===y&&g===m?["C",v,g,y,m,y,m]:["C"].concat(Ee(v,g,y,m))}return t}function Te(t,e){if(void 0===e&&(e=!1),function(t){return le(t)&&t.every((function(t){var e=t[0];return"MC".includes(e)}))}(t)){var n=[].concat(t);return e?[n,[]]:n}for(var r,i,o=Ce(t),a=S({},re),s=[],l="",u=o.length,c=[],h=0;h<u;h+=1){o[h]&&(l=o[h][0]),s[h]=l;var d=Se(o[h],a);o[h]=d,ie(o,s,h),u=o.length,"Z"===l&&c.push(h),i=(r=o[h]).length,a.x1=+r[i-2],a.y1=+r[i-1],a.x2=+r[i-4]||a.x1,a.y2=+r[i-3]||a.y1}return e?[o,c]:o}function Le(t,e){return Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]))}function _e(t,e,n,r,i){var o=Le([t,e],[n,r]),a={x:0,y:0};if("number"==typeof i)if(i<=0)a={x:t,y:e};else if(i>=o)a={x:n,y:r};else{var s=be([t,e],[n,r],i/o);a={x:s[0],y:s[1]}}return{length:o,point:a,min:{x:Math.min(t,n),y:Math.min(e,r)},max:{x:Math.max(t,n),y:Math.max(e,r)}}}function Me(t,e){var n=t.x,r=t.y,i=e.x,o=e.y,a=n*i+r*o,s=Math.sqrt((Math.pow(n,2)+Math.pow(r,2))*(Math.pow(i,2)+Math.pow(o,2)));return(n*o-r*i<0?-1:1)*Math.acos(a/s)}function Re(t,e,n,r,i,o,a,s,l,u){var c=Math.abs,h=Math.sin,d=Math.cos,f=Math.sqrt,p=Math.PI,v=c(n),g=c(r),y=(i%360+360)%360*(p/180);if(t===s&&e===l)return{x:t,y:e};if(0===v||0===g)return _e(t,e,s,l,u).point;var m=(t-s)/2,C=(e-l)/2,w={x:d(y)*m+h(y)*C,y:-h(y)*m+d(y)*C},x=Math.pow(w.x,2)/Math.pow(v,2)+Math.pow(w.y,2)/Math.pow(g,2);x>1&&(v*=f(x),g*=f(x));var b=(Math.pow(v,2)*Math.pow(g,2)-Math.pow(v,2)*Math.pow(w.y,2)-Math.pow(g,2)*Math.pow(w.x,2))/(Math.pow(v,2)*Math.pow(w.y,2)+Math.pow(g,2)*Math.pow(w.x,2)),E=(o!==a?1:-1)*f(b=b<0?0:b),S=E*(v*w.y/g),T=E*(-g*w.x/v),L=d(y)*S-h(y)*T+(t+s)/2,_=h(y)*S+d(y)*T+(e+l)/2,M={x:(w.x-S)/v,y:(w.y-T)/g},R=Me({x:1,y:0},M),O=Me(M,{x:(-w.x-S)/v,y:(-w.y-T)/g});!a&&O>0?O-=2*p:a&&O<0&&(O+=2*p);var N=R+(O%=2*p)*u,I=v*d(N),A=g*h(N);return{x:d(y)*I-h(y)*A+L,y:h(y)*I+d(y)*A+_}}function Oe(t,e,n,r,i,o,a,s,l,u,c){var h,d=c.bbox,f=void 0===d||d,p=c.length,v=void 0===p||p,g=c.sampleSize,y=void 0===g?30:g,m="number"==typeof u,C=t,w=e,x=0,b=[C,w,x],E=[C,w],S={x:0,y:0},T=[{x:C,y:w}];m&&u<=0&&(S={x:C,y:w});for(var L=0;L<=y;L+=1){if(C=(h=Re(t,e,n,r,i,o,a,s,l,L/y)).x,w=h.y,f&&T.push({x:C,y:w}),v&&(x+=Le(E,[C,w])),E=[C,w],m&&x>=u&&u>b[2]){var _=(x-u)/(x-b[2]);S={x:E[0]*(1-_)+b[0]*_,y:E[1]*(1-_)+b[1]*_}}b=[C,w,x]}return m&&u>=x&&(S={x:s,y:l}),{length:x,point:S,min:{x:Math.min.apply(null,T.map((function(t){return t.x}))),y:Math.min.apply(null,T.map((function(t){return t.y})))},max:{x:Math.max.apply(null,T.map((function(t){return t.x}))),y:Math.max.apply(null,T.map((function(t){return t.y})))}}}function Ne(t,e,n,r,i,o,a,s,l){var u=1-l;return{x:Math.pow(u,3)*t+3*Math.pow(u,2)*l*n+3*u*Math.pow(l,2)*i+Math.pow(l,3)*a,y:Math.pow(u,3)*e+3*Math.pow(u,2)*l*r+3*u*Math.pow(l,2)*o+Math.pow(l,3)*s}}function Ie(t,e,n,r,i,o,a,s,l,u){var c,h=u.bbox,d=void 0===h||h,f=u.length,p=void 0===f||f,v=u.sampleSize,g=void 0===v?10:v,y="number"==typeof l,m=t,C=e,w=0,x=[m,C,w],b=[m,C],E={x:0,y:0},S=[{x:m,y:C}];y&&l<=0&&(E={x:m,y:C});for(var T=0;T<=g;T+=1){if(m=(c=Ne(t,e,n,r,i,o,a,s,T/g)).x,C=c.y,d&&S.push({x:m,y:C}),p&&(w+=Le(b,[m,C])),b=[m,C],y&&w>=l&&l>x[2]){var L=(w-l)/(w-x[2]);E={x:b[0]*(1-L)+x[0]*L,y:b[1]*(1-L)+x[1]*L}}x=[m,C,w]}return y&&l>=w&&(E={x:a,y:s}),{length:w,point:E,min:{x:Math.min.apply(null,S.map((function(t){return t.x}))),y:Math.min.apply(null,S.map((function(t){return t.y})))},max:{x:Math.max.apply(null,S.map((function(t){return t.x}))),y:Math.max.apply(null,S.map((function(t){return t.y})))}}}function Ae(t,e,n,r,i,o,a){var s=1-a;return{x:Math.pow(s,2)*t+2*s*a*n+Math.pow(a,2)*i,y:Math.pow(s,2)*e+2*s*a*r+Math.pow(a,2)*o}}function Pe(t,e,n,r,i,o,a,s){var l,u=s.bbox,c=void 0===u||u,h=s.length,d=void 0===h||h,f=s.sampleSize,p=void 0===f?10:f,v="number"==typeof a,g=t,y=e,m=0,C=[g,y,m],w=[g,y],x={x:0,y:0},b=[{x:g,y:y}];v&&a<=0&&(x={x:g,y:y});for(var E=0;E<=p;E+=1){if(g=(l=Ae(t,e,n,r,i,o,E/p)).x,y=l.y,c&&b.push({x:g,y:y}),d&&(m+=Le(w,[g,y])),w=[g,y],v&&m>=a&&a>C[2]){var S=(m-a)/(m-C[2]);x={x:w[0]*(1-S)+C[0]*S,y:w[1]*(1-S)+C[1]*S}}C=[g,y,m]}return v&&a>=m&&(x={x:i,y:o}),{length:m,point:x,min:{x:Math.min.apply(null,b.map((function(t){return t.x}))),y:Math.min.apply(null,b.map((function(t){return t.y})))},max:{x:Math.max.apply(null,b.map((function(t){return t.x}))),y:Math.max.apply(null,b.map((function(t){return t.y})))}}}function ke(t,e,n){for(var r,i,o,a,s,l,u,c,h,d=Ce(t),f="number"==typeof e,p=[],v=0,g=0,y=0,m=0,C=[],w=[],x=0,b={x:0,y:0},E=b,S=b,T=b,L=0,_=0,M=d.length;_<M;_+=1)p=(u="M"===(c=(h=d[_])[0]))?p:[v,g].concat(h.slice(1)),u?(E=b={x:y=h[1],y:m=h[2]},x=0,f&&e<.001&&(T=b)):"L"===c?(x=(r=_e(p[0],p[1],p[2],p[3],(e||0)-L)).length,b=r.min,E=r.max,S=r.point):"A"===c?(x=(i=Oe(p[0],p[1],p[2],p[3],p[4],p[5],p[6],p[7],p[8],(e||0)-L,n||{})).length,b=i.min,E=i.max,S=i.point):"C"===c?(x=(o=Ie(p[0],p[1],p[2],p[3],p[4],p[5],p[6],p[7],(e||0)-L,n||{})).length,b=o.min,E=o.max,S=o.point):"Q"===c?(x=(a=Pe(p[0],p[1],p[2],p[3],p[4],p[5],(e||0)-L,n||{})).length,b=a.min,E=a.max,S=a.point):"Z"===c&&(x=(s=_e((p=[v,g,y,m])[0],p[1],p[2],p[3],(e||0)-L)).length,b=s.min,E=s.max,S=s.point),f&&L<e&&L+x>=e&&(T=S),w.push(E),C.push(b),L+=x,v=(l="Z"!==c?h.slice(-2):[y,m])[0],g=l[1];return f&&e>=L&&(T={x:v,y:g}),{length:L,point:T,min:{x:Math.min.apply(null,C.map((function(t){return t.x}))),y:Math.min.apply(null,C.map((function(t){return t.y})))},max:{x:Math.max.apply(null,w.map((function(t){return t.x}))),y:Math.max.apply(null,w.map((function(t){return t.y})))}}}function Be(t){return function(t){var e=0,n=0,r=0;return Te(t).map((function(t){var i;if("M"===t[0])return e=t[1],n=t[2],0;var o=t.slice(1),a=o[0],s=o[1],l=o[2],u=o[3],c=o[4],h=o[5];return r=function(t,e,n,r,i,o,a,s){return 3*((s-e)*(n+i)-(a-t)*(r+o)+r*(t-i)-n*(e-o)+s*(i+t/3)-a*(o+e/3))/20}(e,n,a,s,l,u,c,h),i=t.slice(-2),e=i[0],n=i[1],r})).reduce((function(t,e){return t+e}),0)}(t)>=0}function De(t){return t.map((function(t,e,n){var r=e&&n[e-1].slice(-2).concat(t.slice(1)),i=e?Ie(r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7],r[8],{bbox:!1}).length:0;return{s:t,ss:e?i?function(t,e){void 0===e&&(e=.5);var n=t.slice(0,2),r=t.slice(2,4),i=t.slice(4,6),o=t.slice(6,8),a=be(n,r,e),s=be(r,i,e),l=be(i,o,e),u=be(a,s,e),c=be(s,l,e),h=be(u,c,e);return[["C"].concat(a,u,h),["C"].concat(c,l,o)]}(r):[t,t]:[t],l:i}}))}function Fe(t,e,n){var r=De(t),i=De(e),o=r.length,a=i.length,s=r.filter((function(t){return t.l})).length,l=i.filter((function(t){return t.l})).length,u=r.filter((function(t){return t.l})).reduce((function(t,e){return t+e.l}),0)/s||0,c=i.filter((function(t){return t.l})).reduce((function(t,e){return t+e.l}),0)/l||0,h=n||Math.max(o,a),d=[u,c],f=[h-o,h-a],p=0,v=[r,i].map((function(t,e){return t.l===h?t.map((function(t){return t.s})):t.map((function(t,n){return p=n&&f[e]&&t.l>=d[e],f[e]-=p?1:0,p?t.ss:[t.s]})).flat()}));return v[0].length===v[1].length?v:Fe(v[0],v[1],h)}function He(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function ze(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Ge(){}var We=.7,Ve=1/We,Ue="\\s*([+-]?\\d+)\\s*",je="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ye="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Xe=/^#([0-9a-f]{3,8})$/,qe=new RegExp("^rgb\\("+[Ue,Ue,Ue]+"\\)$"),Ke=new RegExp("^rgb\\("+[Ye,Ye,Ye]+"\\)$"),Ze=new RegExp("^rgba\\("+[Ue,Ue,Ue,je]+"\\)$"),$e=new RegExp("^rgba\\("+[Ye,Ye,Ye,je]+"\\)$"),Qe=new RegExp("^hsl\\("+[je,Ye,Ye]+"\\)$"),Je=new RegExp("^hsla\\("+[je,Ye,Ye,je]+"\\)$"),tn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function en(){return this.rgb().formatHex()}function nn(){return this.rgb().formatRgb()}function rn(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Xe.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?on(e):3===n?new ln(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?an(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?an(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=qe.exec(t))?new ln(e[1],e[2],e[3],1):(e=Ke.exec(t))?new ln(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Ze.exec(t))?an(e[1],e[2],e[3],e[4]):(e=$e.exec(t))?an(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Qe.exec(t))?dn(e[1],e[2]/100,e[3]/100,1):(e=Je.exec(t))?dn(e[1],e[2]/100,e[3]/100,e[4]):tn.hasOwnProperty(t)?on(tn[t]):"transparent"===t?new ln(NaN,NaN,NaN,0):null}function on(t){return new ln(t>>16&255,t>>8&255,255&t,1)}function an(t,e,n,r){return r<=0&&(t=e=n=NaN),new ln(t,e,n,r)}function sn(t,e,n,r){return 1===arguments.length?((i=t)instanceof Ge||(i=rn(i)),i?new ln((i=i.rgb()).r,i.g,i.b,i.opacity):new ln):new ln(t,e,n,null==r?1:r);var i}function ln(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function un(){return"#"+hn(this.r)+hn(this.g)+hn(this.b)}function cn(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function hn(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function dn(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new pn(t,e,n,r)}function fn(t){if(t instanceof pn)return new pn(t.h,t.s,t.l,t.opacity);if(t instanceof Ge||(t=rn(t)),!t)return new pn;if(t instanceof pn)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,s=o-i,l=(o+i)/2;return s?(a=e===o?(n-r)/s+6*(n<r):n===o?(r-e)/s+2:(e-n)/s+4,s/=l<.5?o+i:2-o-i,a*=60):s=l>0&&l<1?0:a,new pn(a,s,l,t.opacity)}function pn(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function vn(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function gn(t,e,n,r){var i=t-n,o=e-r;return Math.sqrt(i*i+o*o)}function yn(t,e){var n=Math.min.apply(Math,O([],R(t),!1)),r=Math.min.apply(Math,O([],R(e),!1));return{x:n,y:r,width:Math.max.apply(Math,O([],R(t),!1))-n,height:Math.max.apply(Math,O([],R(e),!1))-r}}function mn(t,e,n,r,i,o){return n*Math.cos(i)*Math.cos(o)-r*Math.sin(i)*Math.sin(o)+t}function Cn(t,e,n,r,i,o){return n*Math.sin(i)*Math.cos(o)+r*Math.cos(i)*Math.sin(o)+e}function wn(t,e,n,r,i,o,a){for(var s=function(t,e,n){return Math.atan(-e/t*Math.tan(n))}(n,r,i),l=1/0,u=-1/0,c=[o,a],h=2*-Math.PI;h<=2*Math.PI;h+=Math.PI){var d=s+h;o<a?o<d&&d<a&&c.push(d):a<d&&d<o&&c.push(d)}for(h=0;h<c.length;h++){var f=mn(t,0,n,r,i,c[h]);f<l&&(l=f),f>u&&(u=f)}var p=function(t,e,n){return Math.atan(e/(t*Math.tan(n)))}(n,r,i),v=1/0,g=-1/0,y=[o,a];for(h=2*-Math.PI;h<=2*Math.PI;h+=Math.PI){var m=p+h;o<a?o<m&&m<a&&y.push(m):a<m&&m<o&&y.push(m)}for(h=0;h<y.length;h++){var C=Cn(0,e,n,r,i,y[h]);C<v&&(v=C),C>g&&(g=C)}return{x:l,y:v,width:u-l,height:g-v}}He(Ge,rn,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:en,formatHex:en,formatHsl:function(){return fn(this).formatHsl()},formatRgb:nn,toString:nn}),He(ln,sn,ze(Ge,{brighter:function(t){return t=null==t?Ve:Math.pow(Ve,t),new ln(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?We:Math.pow(We,t),new ln(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:un,formatHex:un,formatRgb:cn,toString:cn})),He(pn,(function(t,e,n,r){return 1===arguments.length?fn(t):new pn(t,e,n,null==r?1:r)}),ze(Ge,{brighter:function(t){return t=null==t?Ve:Math.pow(Ve,t),new pn(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?We:Math.pow(We,t),new pn(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new ln(vn(t>=240?t-240:t+120,i,r),vn(t,i,r),vn(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));var xn=1e-4;function bn(t,e,n,r,i,o){var a=-1,s=1/0,l=[n,r],u=20;o&&o>200&&(u=o/10);for(var c=1/u,h=c/10,d=0;d<=u;d++){var f=d*c,p=[i.apply(void 0,O([],R(t.concat([f])),!1)),i.apply(void 0,O([],R(e.concat([f])),!1))];(m=gn(l[0],l[1],p[0],p[1]))<s&&(a=f,s=m)}if(0===a)return{x:t[0],y:e[0]};if(1===a){var v=t.length;return{x:t[v-1],y:e[v-1]}}s=1/0;for(d=0;d<32&&!(h<xn);d++){var g=a-h,y=a+h,m=(p=[i.apply(void 0,O([],R(t.concat([g])),!1)),i.apply(void 0,O([],R(e.concat([g])),!1))],gn(l[0],l[1],p[0],p[1]));if(g>=0&&m<s)a=g,s=m;else{var C=[i.apply(void 0,O([],R(t.concat([y])),!1)),i.apply(void 0,O([],R(e.concat([y])),!1))],w=gn(l[0],l[1],C[0],C[1]);y<=1&&w<s?(a=y,s=w):h*=.5}}return{x:i.apply(void 0,O([],R(t.concat([a])),!1)),y:i.apply(void 0,O([],R(e.concat([a])),!1))}}function En(t,e,n,r){return gn(t,e,n,r)}function Sn(t,e,n,r,i){return{x:(1-i)*t+i*n,y:(1-i)*e+i*r}}function Tn(t,e,n,r,i,o){var a=[n-t,r-e];if(function(t,e){return t[0]===e[0]&&t[1]===e[1]}(a,[0,0]))return Math.sqrt((i-t)*(i-t)+(o-e)*(o-e));var s=[-a[1],a[0]];!function(t,e){var n=e[0],r=e[1],i=n*n+r*r;i>0&&(i=1/Math.sqrt(i)),t[0]=e[0]*i,t[1]=e[1]*i}(s,s);var l=[i-t,o-e];return Math.abs(function(t,e){return t[0]*e[0]+t[1]*e[1]}(l,s))}function Ln(t,e,n,r,i){var o=1-i;return o*o*o*t+3*e*i*o*o+3*n*i*i*o+r*i*i*i}function _n(t,e,n,r){var i,o,a,s=-3*t+9*e-9*n+3*r,l=6*t-12*e+6*n,u=3*e-3*t,c=[];if(Jt(s,0))Jt(l,0)||(i=-u/l)>=0&&i<=1&&c.push(i);else{var h=l*l-4*s*u;Jt(h,0)?c.push(-l/(2*s)):h>0&&(o=(-l-(a=Math.sqrt(h)))/(2*s),(i=(-l+a)/(2*s))>=0&&i<=1&&c.push(i),o>=0&&o<=1&&c.push(o))}return c}function Mn(t,e,n,r,i,o,a,s){for(var l=[t,a],u=[e,s],c=_n(t,n,i,a),h=_n(e,r,o,s),d=0;d<c.length;d++)l.push(Ln(t,n,i,a,c[d]));for(d=0;d<h.length;d++)u.push(Ln(e,r,o,s,h[d]));return yn(l,u)}function Rn(t,e,n,r,i,o,a,s,l,u,c){var h=function(t,e,n,r,i,o,a,s,l,u,c){return bn([t,n,i,a],[e,r,o,s],l,u,Ln,c)}(t,e,n,r,i,o,a,s,l,u,c);return gn(h.x,h.y,l,u)}function On(t){return function(t){if(t.length<2)return 0;for(var e=0,n=0;n<t.length-1;n++){var r=t[n],i=t[n+1];e+=gn(r[0],r[1],i[0],i[1])}return e}(t)}function Nn(t,e,n,r){var i=1-r;return i*i*t+2*r*i*e+r*r*n}function In(t,e,n){var r=t+n-2*e;if(Jt(r,0))return[.5];var i=(t-e)/r;return i<=1&&i>=0?[i]:[]}function An(t,e,n,r,i,o){var a=In(t,n,i)[0],s=In(e,r,o)[0],l=[t,i],u=[e,o];return void 0!==a&&l.push(Nn(t,n,i,a)),void 0!==s&&u.push(Nn(e,r,o,s)),yn(l,u)}function Pn(t,e,n,r,i,o,a,s){var l=function(t,e,n,r,i,o,a,s){return bn([t,n,i],[e,r,o],a,s,Nn)}(t,e,n,r,i,o,a,s);return gn(l.x,l.y,a,s)}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var kn={exports:{}};!function(t,e){t.exports=function(){function t(t,n,i,o,a){e(t,n,i||0,o||t.length-1,a||r)}function e(t,r,i,o,a){for(;o>i;){if(o-i>600){var s=o-i+1,l=r-i+1,u=Math.log(s),c=.5*Math.exp(2*u/3),h=.5*Math.sqrt(u*c*(s-c)/s)*(l-s/2<0?-1:1);e(t,r,Math.max(i,Math.floor(r-l*c/s+h)),Math.min(o,Math.floor(r+(s-l)*c/s+h)),a)}var d=t[r],f=i,p=o;for(n(t,i,r),a(t[o],d)>0&&n(t,i,o);f<p;){for(n(t,f,p),f++,p--;a(t[f],d)<0;)f++;for(;a(t[p],d)>0;)p--}0===a(t[i],d)?n(t,i,p):n(t,++p,o),p<=r&&(i=p+1),r<=p&&(o=p-1)}}function n(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function r(t,e){return t<e?-1:t>e?1:0}var i=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function o(t,e,n){if(!n)return e.indexOf(t);for(var r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1}function a(t,e){s(t,0,t.children.length,e,t)}function s(t,e,n,r,i){i||(i=y(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o=e;o<n;o++){var a=t.children[o];l(i,t.leaf?r(a):a)}return i}function l(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function u(t,e){return t.minX-e.minX}function c(t,e){return t.minY-e.minY}function h(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function d(t){return t.maxX-t.minX+(t.maxY-t.minY)}function f(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}function p(t,e){var n=Math.max(t.minX,e.minX),r=Math.max(t.minY,e.minY),i=Math.min(t.maxX,e.maxX),o=Math.min(t.maxY,e.maxY);return Math.max(0,i-n)*Math.max(0,o-r)}function v(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function g(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function y(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function m(e,n,r,i,o){for(var a=[n,r];a.length;)if(!((r=a.pop())-(n=a.pop())<=i)){var s=n+Math.ceil((r-n)/i/2)*i;t(e,s,n,r,o),a.push(n,s,s,r)}}return i.prototype.all=function(){return this._all(this.data,[])},i.prototype.search=function(t){var e=this.data,n=[];if(!g(t,e))return n;for(var r=this.toBBox,i=[];e;){for(var o=0;o<e.children.length;o++){var a=e.children[o],s=e.leaf?r(a):a;g(t,s)&&(e.leaf?n.push(a):v(t,s)?this._all(a,n):i.push(a))}e=i.pop()}return n},i.prototype.collides=function(t){var e=this.data;if(!g(t,e))return!1;for(var n=[];e;){for(var r=0;r<e.children.length;r++){var i=e.children[r],o=e.leaf?this.toBBox(i):i;if(g(t,o)){if(e.leaf||v(t,o))return!0;n.push(i)}}e=n.pop()}return!1},i.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0;e<t.length;e++)this.insert(t[e]);return this}var n=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var r=this.data;this.data=n,n=r}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},i.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},i.prototype.clear=function(){return this.data=y([]),this},i.prototype.remove=function(t,e){if(!t)return this;for(var n,r,i,a=this.data,s=this.toBBox(t),l=[],u=[];a||l.length;){if(a||(a=l.pop(),r=l[l.length-1],n=u.pop(),i=!0),a.leaf){var c=o(t,a.children,e);if(-1!==c)return a.children.splice(c,1),l.push(a),this._condense(l),this}i||a.leaf||!v(a,s)?r?(n++,a=r.children[n],i=!1):a=null:(l.push(a),u.push(n),n=0,r=a,a=a.children[0])}return this},i.prototype.toBBox=function(t){return t},i.prototype.compareMinX=function(t,e){return t.minX-e.minX},i.prototype.compareMinY=function(t,e){return t.minY-e.minY},i.prototype.toJSON=function(){return this.data},i.prototype.fromJSON=function(t){return this.data=t,this},i.prototype._all=function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},i.prototype._build=function(t,e,n,r){var i,o=n-e+1,s=this._maxEntries;if(o<=s)return a(i=y(t.slice(e,n+1)),this.toBBox),i;r||(r=Math.ceil(Math.log(o)/Math.log(s)),s=Math.ceil(o/Math.pow(s,r-1))),(i=y([])).leaf=!1,i.height=r;var l=Math.ceil(o/s),u=l*Math.ceil(Math.sqrt(s));m(t,e,n,u,this.compareMinX);for(var c=e;c<=n;c+=u){var h=Math.min(c+u-1,n);m(t,c,h,l,this.compareMinY);for(var d=c;d<=h;d+=l){var f=Math.min(d+l-1,h);i.children.push(this._build(t,d,f,r-1))}}return a(i,this.toBBox),i},i.prototype._chooseSubtree=function(t,e,n,r){for(;r.push(e),!e.leaf&&r.length-1!==n;){for(var i=1/0,o=1/0,a=void 0,s=0;s<e.children.length;s++){var l=e.children[s],u=h(l),c=f(t,l)-u;c<o?(o=c,i=u<i?u:i,a=l):c===o&&u<i&&(i=u,a=l)}e=a||e.children[0]}return e},i.prototype._insert=function(t,e,n){var r=n?t:this.toBBox(t),i=[],o=this._chooseSubtree(r,this.data,e,i);for(o.children.push(t),l(o,r);e>=0&&i[e].children.length>this._maxEntries;)this._split(i,e),e--;this._adjustParentBBoxes(r,i,e)},i.prototype._split=function(t,e){var n=t[e],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var o=this._chooseSplitIndex(n,i,r),s=y(n.children.splice(o,n.children.length-o));s.height=n.height,s.leaf=n.leaf,a(n,this.toBBox),a(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(n,s)},i.prototype._splitRoot=function(t,e){this.data=y([t,e]),this.data.height=t.height+1,this.data.leaf=!1,a(this.data,this.toBBox)},i.prototype._chooseSplitIndex=function(t,e,n){for(var r,i=1/0,o=1/0,a=e;a<=n-e;a++){var l=s(t,0,a,this.toBBox),u=s(t,a,n,this.toBBox),c=p(l,u),d=h(l)+h(u);c<i?(i=c,r=a,o=d<o?d:o):c===i&&d<o&&(o=d,r=a)}return r||n-e},i.prototype._chooseSplitAxis=function(t,e,n){var r=t.leaf?this.compareMinX:u,i=t.leaf?this.compareMinY:c;this._allDistMargin(t,e,n,r)<this._allDistMargin(t,e,n,i)&&t.children.sort(r)},i.prototype._allDistMargin=function(t,e,n,r){t.children.sort(r);for(var i=this.toBBox,o=s(t,0,e,i),a=s(t,n-e,n,i),u=d(o)+d(a),c=e;c<n-e;c++){var h=t.children[c];l(o,t.leaf?i(h):h),u+=d(o)}for(var f=n-e-1;f>=e;f--){var p=t.children[f];l(a,t.leaf?i(p):p),u+=d(a)}return u},i.prototype._adjustParentBBoxes=function(t,e,n){for(var r=n;r>=0;r--)l(e[r],t)},i.prototype._condense=function(t){for(var e=t.length-1,n=void 0;e>=0;e--)0===t[e].children.length?e>0?(n=t[e-1].children).splice(n.indexOf(t[e]),1):this.clear():a(t[e],this.toBBox)},i}()}(kn);var Bn,Dn,Fn=kn.exports;!function(t){t.GROUP="g",t.CIRCLE="circle",t.ELLIPSE="ellipse",t.IMAGE="image",t.RECT="rect",t.LINE="line",t.POLYLINE="polyline",t.POLYGON="polygon",t.TEXT="text",t.PATH="path",t.HTML="html",t.MESH="mesh"}(Bn||(Bn={})),function(t){t[t.ZERO=0]="ZERO",t[t.NEGATIVE_ONE=1]="NEGATIVE_ONE"}(Dn||(Dn={}));var Hn=function(){function t(){this.plugins=[]}return t.prototype.addRenderingPlugin=function(t){this.plugins.push(t),this.context.renderingPlugins.push(t)},t.prototype.removeAllRenderingPlugins=function(){var t=this;this.plugins.forEach((function(e){var n=t.context.renderingPlugins.indexOf(e);n>=0&&t.context.renderingPlugins.splice(n,1)}))},t}(),zn=function(){function t(t){this.clipSpaceNearZ=Dn.NEGATIVE_ONE,this.plugins=[],this.config=S({enableDirtyCheck:!0,enableCulling:!1,enableAutoRendering:!0,enableDirtyRectangleRendering:!0,enableDirtyRectangleRenderingDebug:!1,enableSizeAttenuation:!0},t)}return t.prototype.registerPlugin=function(t){-1===this.plugins.findIndex((function(e){return e===t}))&&this.plugins.push(t)},t.prototype.unregisterPlugin=function(t){var e=this.plugins.findIndex((function(e){return e===t}));e>-1&&this.plugins.splice(e,1)},t.prototype.getPlugins=function(){return this.plugins},t.prototype.getPlugin=function(t){return this.plugins.find((function(e){return e.name===t}))},t.prototype.getConfig=function(){return this.config},t.prototype.setConfig=function(t){Object.assign(this.config,t)},t}();function Gn(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function Wn(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function Vn(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function Un(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function jn(t){return void 0===t?0:t>360||t<-360?t%360:t}function Yn(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=0),Array.isArray(t)&&3===t.length?vt(t):$t(t)?yt(t,e,n):yt(t[0],t[1]||e,t[2]||n)}function Xn(t){return t*(Math.PI/180)}function qn(t){return t*(180/Math.PI)}function Kn(t,e){return 16===e.length?function(t,e){var n,r,i=.5*Math.PI,o=R(tt(pt(),e),3),a=o[0],s=o[1],l=o[2],u=Math.asin(-e[2]/a);return u<i?u>-i?(n=Math.atan2(e[6]/s,e[10]/l),r=Math.atan2(e[1]/a,e[0]/a)):(r=0,n=-Math.atan2(e[4]/s,e[5]/s)):(r=0,n=Math.atan2(e[4]/s,e[5]/s)),t[0]=n,t[1]=u,t[2]=r,t}(t,e):function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=r*r,s=i*i,l=o*o,u=n*n+a+s+l,c=n*o-r*i;return c>.499995*u?(t[0]=Math.PI/2,t[1]=2*Math.atan2(r,n),t[2]=0):c<-.499995*u?(t[0]=-Math.PI/2,t[1]=2*Math.atan2(r,n),t[2]=0):(t[0]=Math.asin(2*(n*i-o*r)),t[1]=Math.atan2(2*(n*o+r*i),1-2*(s+l)),t[2]=Math.atan2(2*(n*r+i*o),1-2*(a+s))),t}(t,e)}function Zn(t,e,n,r,i){var o,a,s,l,u,c,h,d,f,p,v=Math.cos(t),g=Math.sin(t);return o=r*v,a=i*g,s=0,l=-r*g,u=i*v,c=0,h=e,d=n,f=1,(p=new k(9))[0]=o,p[1]=a,p[2]=s,p[3]=l,p[4]=u,p[5]=c,p[6]=h,p[7]=d,p[8]=f,p}function $n(t){var e=t[0],n=t[1],r=t[3],i=t[4],o=Math.sqrt(e*e+n*n),a=Math.sqrt(r*r+i*i);e*i-n*r<0&&(e<i?o=-o:a=-a),o&&(e*=1/o,n*=1/o),a&&(r*=1/a,i*=1/a);var s=qn(Math.atan2(n,e));return[t[6],t[7],o,a,s]}var Qn=D(),Jn=D(),tr=Nt(),er=[pt(),pt(),pt()],nr=pt();function rr(t,e,n,r,i){t[0]=e[0]*r+n[0]*i,t[1]=e[1]*r+n[1]*i,t[2]=e[2]*r+n[2]*i}var ir,or=function(){function t(){this.center=[0,0,0],this.halfExtents=[0,0,0],this.min=[0,0,0],this.max=[0,0,0]}return t.isEmpty=function(t){return!t||0===t.halfExtents[0]&&0===t.halfExtents[1]&&0===t.halfExtents[2]},t.prototype.update=function(t,e){Gn(this.center,t),Gn(this.halfExtents,e),Wn(this.min,this.center,this.halfExtents),Vn(this.max,this.center,this.halfExtents)},t.prototype.setMinMax=function(t,e){Vn(this.center,e,t),Un(this.center,this.center,.5),Wn(this.halfExtents,e,t),Un(this.halfExtents,this.halfExtents,.5),Gn(this.min,t),Gn(this.max,e)},t.prototype.getMin=function(){return this.min},t.prototype.getMax=function(){return this.max},t.prototype.add=function(e){if(!t.isEmpty(e))if(t.isEmpty(this))this.setMinMax(e.getMin(),e.getMax());else{var n=this.center,r=n[0],i=n[1],o=n[2],a=this.halfExtents,s=a[0],l=a[1],u=a[2],c=r-s,h=r+s,d=i-l,f=i+l,p=o-u,v=o+u,g=e.center,y=g[0],m=g[1],C=g[2],w=e.halfExtents,x=w[0],b=w[1],E=w[2],S=y-x,T=y+x,L=m-b,_=m+b,M=C-E,R=C+E;S<c&&(c=S),T>h&&(h=T),L<d&&(d=L),_>f&&(f=_),M<p&&(p=M),R>v&&(v=R),n[0]=.5*(c+h),n[1]=.5*(d+f),n[2]=.5*(p+v),a[0]=.5*(h-c),a[1]=.5*(f-d),a[2]=.5*(v-p),this.min[0]=c,this.min[1]=d,this.min[2]=p,this.max[0]=h,this.max[1]=f,this.max[2]=v}},t.prototype.setFromTransformedAABB=function(t,e){var n=this.center,r=this.halfExtents,i=t.center,o=t.halfExtents,a=e[0],s=e[4],l=e[8],u=e[1],c=e[5],h=e[9],d=e[2],f=e[6],p=e[10],v=Math.abs(a),g=Math.abs(s),y=Math.abs(l),m=Math.abs(u),C=Math.abs(c),w=Math.abs(h),x=Math.abs(d),b=Math.abs(f),E=Math.abs(p);n[0]=e[12]+a*i[0]+s*i[1]+l*i[2],n[1]=e[13]+u*i[0]+c*i[1]+h*i[2],n[2]=e[14]+d*i[0]+f*i[1]+p*i[2],r[0]=v*o[0]+g*o[1]+y*o[2],r[1]=m*o[0]+C*o[1]+w*o[2],r[2]=x*o[0]+b*o[1]+E*o[2],Wn(this.min,n,r),Vn(this.max,n,r)},t.prototype.intersects=function(t){var e=this.getMax(),n=this.getMin(),r=t.getMax(),i=t.getMin();return n[0]<=r[0]&&e[0]>=i[0]&&n[1]<=r[1]&&e[1]>=i[1]&&n[2]<=r[2]&&e[2]>=i[2]},t.prototype.intersection=function(e){if(!this.intersects(e))return null;var n,r,i,o=new t,a=(n=[0,0,0],r=this.getMin(),i=e.getMin(),n[0]=Math.max(r[0],i[0]),n[1]=Math.max(r[1],i[1]),n[2]=Math.max(r[2],i[2]),n),s=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t}([0,0,0],this.getMax(),e.getMax());return o.setMinMax(a,s),o},t.prototype.getNegativeFarPoint=function(t){return 273===t.pnVertexFlag?Gn([0,0,0],this.min):272===t.pnVertexFlag?[this.min[0],this.min[1],this.max[2]]:257===t.pnVertexFlag?[this.min[0],this.max[1],this.min[2]]:256===t.pnVertexFlag?[this.min[0],this.max[1],this.max[2]]:17===t.pnVertexFlag?[this.max[0],this.min[1],this.min[2]]:16===t.pnVertexFlag?[this.max[0],this.min[1],this.max[2]]:1===t.pnVertexFlag?[this.max[0],this.max[1],this.min[2]]:[this.max[0],this.max[1],this.max[2]]},t.prototype.getPositiveFarPoint=function(t){return 273===t.pnVertexFlag?Gn([0,0,0],this.max):272===t.pnVertexFlag?[this.max[0],this.max[1],this.min[2]]:257===t.pnVertexFlag?[this.max[0],this.min[1],this.max[2]]:256===t.pnVertexFlag?[this.max[0],this.min[1],this.min[2]]:17===t.pnVertexFlag?[this.min[0],this.max[1],this.max[2]]:16===t.pnVertexFlag?[this.min[0],this.max[1],this.min[2]]:1===t.pnVertexFlag?[this.min[0],this.min[1],this.max[2]]:[this.min[0],this.min[1],this.min[2]]},t}(),ar=function(){function t(t,e){this.distance=t||0,this.normal=e||yt(0,1,0),this.updatePNVertexFlag()}return t.prototype.updatePNVertexFlag=function(){this.pnVertexFlag=(Number(this.normal[0]>=0)<<8)+(Number(this.normal[1]>=0)<<4)+Number(this.normal[2]>=0)},t.prototype.distanceToPoint=function(t){return St(t,this.normal)-this.distance},t.prototype.normalize=function(){var t=1/Ot(this.normal);bt(this.normal,this.normal,t),this.distance*=t},t.prototype.intersectsLine=function(t,e,n){var r=this.distanceToPoint(t),i=r/(r-this.distanceToPoint(e)),o=i>=0&&i<=1;return o&&n&&Lt(n,t,e,i),o},t}();!function(t){t[t.OUTSIDE=4294967295]="OUTSIDE",t[t.INSIDE=0]="INSIDE",t[t.INDETERMINATE=2147483647]="INDETERMINATE"}(ir||(ir={}));var sr,lr,ur,cr=function(){function t(t){if(this.planes=[],t)this.planes=t;else for(var e=0;e<6;e++)this.planes.push(new ar)}return t.prototype.extractFromVPMatrix=function(t){var e=R(t,16),n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],l=e[6],u=e[7],c=e[8],h=e[9],d=e[10],f=e[11],p=e[12],v=e[13],g=e[14],y=e[15];Ct(this.planes[0].normal,o-n,u-a,f-c),this.planes[0].distance=y-p,Ct(this.planes[1].normal,o+n,u+a,f+c),this.planes[1].distance=y+p,Ct(this.planes[2].normal,o+r,u+s,f+h),this.planes[2].distance=y+v,Ct(this.planes[3].normal,o-r,u-s,f-h),this.planes[3].distance=y-v,Ct(this.planes[4].normal,o-i,u-l,f-d),this.planes[4].distance=y-g,Ct(this.planes[5].normal,o+i,u+l,f+d),this.planes[5].distance=y+g,this.planes.forEach((function(t){t.normalize(),t.updatePNVertexFlag()}))},t}(),hr=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=0,this.y=0,this.x=t,this.y=e}return t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.copyFrom=function(t){this.x=t.x,this.y=t.y},t}(),dr=function(){function t(t,e,n,r){this.x=t,this.y=e,this.width=n,this.height=r,this.left=t,this.right=t+n,this.top=e,this.bottom=e+r}return t.prototype.toJSON=function(){},t}(),fr="Method not implemented.",pr="Use document.documentElement instead.";!function(t){t[t.ORBITING=0]="ORBITING",t[t.EXPLORING=1]="EXPLORING",t[t.TRACKING=2]="TRACKING"}(sr||(sr={})),function(t){t[t.DEFAULT=0]="DEFAULT",t[t.ROTATIONAL=1]="ROTATIONAL",t[t.TRANSLATIONAL=2]="TRANSLATIONAL",t[t.CINEMATIC=3]="CINEMATIC"}(lr||(lr={})),function(t){t[t.ORTHOGRAPHIC=0]="ORTHOGRAPHIC",t[t.PERSPECTIVE=1]="PERSPECTIVE"}(ur||(ur={}));var vr,gr,yr,mr,Cr,wr="updated",xr=2e-4,br=function(){function t(){this.clipSpaceNearZ=Dn.NEGATIVE_ONE,this.eventEmitter=new A,this.matrix=D(),this.right=yt(1,0,0),this.up=yt(0,1,0),this.forward=yt(0,0,1),this.position=yt(0,0,1),this.focalPoint=yt(0,0,0),this.distanceVector=yt(0,0,-1),this.distance=1,this.azimuth=0,this.elevation=0,this.roll=0,this.relAzimuth=0,this.relElevation=0,this.relRoll=0,this.dollyingStep=0,this.maxDistance=1/0,this.minDistance=-1/0,this.zoom=1,this.rotateWorld=!1,this.fov=30,this.near=.1,this.far=1e3,this.aspect=1,this.projectionMatrix=D(),this.projectionMatrixInverse=D(),this.jitteredProjectionMatrix=void 0,this.enableUpdate=!0,this.type=sr.EXPLORING,this.trackingMode=lr.DEFAULT,this.projectionMode=ur.PERSPECTIVE,this.frustum=new cr,this.orthoMatrix=D()}return t.prototype.isOrtho=function(){return this.projectionMode===ur.ORTHOGRAPHIC},t.prototype.getProjectionMode=function(){return this.projectionMode},t.prototype.getPerspective=function(){return this.jitteredProjectionMatrix||this.projectionMatrix},t.prototype.getPerspectiveInverse=function(){return this.projectionMatrixInverse},t.prototype.getFrustum=function(){return this.frustum},t.prototype.getPosition=function(){return this.position},t.prototype.getFocalPoint=function(){return this.focalPoint},t.prototype.getDollyingStep=function(){return this.dollyingStep},t.prototype.getNear=function(){return this.near},t.prototype.getFar=function(){return this.far},t.prototype.getZoom=function(){return this.zoom},t.prototype.getOrthoMatrix=function(){return this.orthoMatrix},t.prototype.getView=function(){return this.view},t.prototype.setEnableUpdate=function(t){this.enableUpdate=t},t.prototype.setType=function(t,e){return this.type=t,this.type===sr.EXPLORING?this.setWorldRotation(!0):this.setWorldRotation(!1),this._getAngles(),this.type===sr.TRACKING&&void 0!==e&&this.setTrackingMode(e),this},t.prototype.setProjectionMode=function(t){return this.projectionMode=t,this},t.prototype.setTrackingMode=function(t){if(this.type!==sr.TRACKING)throw new Error("Impossible to set a tracking mode if the camera is not of tracking type");return this.trackingMode=t,this},t.prototype.setWorldRotation=function(t){return this.rotateWorld=t,this._getAngles(),this},t.prototype.getViewTransform=function(){return V(D(),this.matrix)},t.prototype.getWorldTransform=function(){return this.matrix},t.prototype.jitterProjectionMatrix=function(t,e){var n=Z(D(),[t,e,0]);this.jitteredProjectionMatrix=j(D(),n,this.projectionMatrix)},t.prototype.clearJitterProjectionMatrix=function(){this.jitteredProjectionMatrix=void 0},t.prototype.setMatrix=function(t){return this.matrix=t,this._update(),this},t.prototype.setFov=function(t){return this.setPerspective(this.near,this.far,t,this.aspect),this},t.prototype.setAspect=function(t){return this.setPerspective(this.near,this.far,this.fov,t),this},t.prototype.setNear=function(t){return this.projectionMode===ur.PERSPECTIVE?this.setPerspective(t,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,t,this.far),this},t.prototype.setFar=function(t){return this.projectionMode===ur.PERSPECTIVE?this.setPerspective(this.near,t,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,t),this},t.prototype.setViewOffset=function(t,e,n,r,i,o){return this.aspect=t/e,void 0===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.projectionMode===ur.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this},t.prototype.clearViewOffset=function(){return void 0!==this.view&&(this.view.enabled=!1),this.projectionMode===ur.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this},t.prototype.setZoom=function(t){return this.zoom=t,this.projectionMode===ur.ORTHOGRAPHIC?this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far):this.projectionMode===ur.PERSPECTIVE&&this.setPerspective(this.near,this.far,this.fov,this.aspect),this},t.prototype.setZoomByViewportPoint=function(t,e){var n=this.canvas.viewport2Canvas({x:e[0],y:e[1]}),r=n.x,i=n.y,o=this.roll;this.rotate(0,0,-o),this.setPosition(r,i),this.setFocalPoint(r,i),this.setZoom(t),this.rotate(0,0,o);var a=this.canvas.viewport2Canvas({x:e[0],y:e[1]}),s=yt(a.x-r,a.y-i,0),l=St(s,this.right)/gt(this.right),u=St(s,this.up)/gt(this.up);return this.pan(-l,-u),this},t.prototype.setPerspective=function(t,e,n,r){var i;this.projectionMode=ur.PERSPECTIVE,this.fov=n,this.near=t,this.far=e,this.aspect=r;var o=this.near*Math.tan(Xn(.5*this.fov))/this.zoom,a=2*o,s=this.aspect*a,l=-.5*s;if(null===(i=this.view)||void 0===i?void 0:i.enabled){var u=this.view.fullWidth,c=this.view.fullHeight;l+=this.view.offsetX*s/u,o-=this.view.offsetY*a/c,s*=this.view.width/u,a*=this.view.height/c}return function(t,e,n,r,i,o,a,s){void 0===s&&(s=!1);var l,u,c=2*o/(n-e),h=2*o/(r-i),d=(n+e)/(n-e),f=(r+i)/(r-i);s?(l=-a/(a-o),u=-a*o/(a-o)):(l=-(a+o)/(a-o),u=-2*a*o/(a-o)),t[0]=c,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=h,t[6]=0,t[7]=0,t[8]=d,t[9]=f,t[10]=l,t[11]=-1,t[12]=0,t[13]=0,t[14]=u,t[15]=0}(this.projectionMatrix,l,l+s,o,o-a,t,this.far,this.clipSpaceNearZ===Dn.ZERO),X(this.projectionMatrix,this.projectionMatrix,yt(1,-1,1)),V(this.projectionMatrixInverse,this.projectionMatrix),this.triggerUpdate(),this},t.prototype.setOrthographic=function(t,e,n,r,i,o){var a;this.projectionMode=ur.ORTHOGRAPHIC,this.rright=e,this.left=t,this.top=n,this.bottom=r,this.near=i,this.far=o;var s=(this.rright-this.left)/(2*this.zoom),l=(this.top-this.bottom)/(2*this.zoom),u=(this.rright+this.left)/2,c=(this.top+this.bottom)/2,h=u-s,d=u+s,f=c+l,p=c-l;if(null===(a=this.view)||void 0===a?void 0:a.enabled){var v=(this.rright-this.left)/this.view.fullWidth/this.zoom,g=(this.top-this.bottom)/this.view.fullHeight/this.zoom;d=(h+=v*this.view.offsetX)+v*this.view.width,p=(f-=g*this.view.offsetY)-g*this.view.height}return this.clipSpaceNearZ===Dn.NEGATIVE_ONE?st(this.projectionMatrix,h,d,p,f,i,o):lt(this.projectionMatrix,h,d,p,f,i,o),X(this.projectionMatrix,this.projectionMatrix,yt(1,-1,1)),V(this.projectionMatrixInverse,this.projectionMatrix),this._getOrthoMatrix(),this.triggerUpdate(),this},t.prototype.setPosition=function(t,e,n){void 0===e&&(e=this.position[1]),void 0===n&&(n=this.position[2]);var r=Yn(t,e,n);return this._setPosition(r),this.setFocalPoint(this.focalPoint),this.triggerUpdate(),this},t.prototype.setFocalPoint=function(t,e,n){void 0===e&&(e=this.focalPoint[1]),void 0===n&&(n=this.focalPoint[2]);var r=yt(0,1,0);if(this.focalPoint=Yn(t,e,n),this.trackingMode===lr.CINEMATIC){var i=xt(pt(),this.focalPoint,this.position);t=i[0],e=i[1],n=i[2];var o=gt(i),a=qn(Math.asin(e/o)),s=90+qn(Math.atan2(n,t)),l=D();K(l,l,Xn(s)),q(l,l,Xn(a)),r=_t(pt(),[0,1,0],l)}return V(this.matrix,ut(D(),this.position,this.focalPoint,r)),this._getAxes(),this._getDistance(),this._getAngles(),this.triggerUpdate(),this},t.prototype.getDistance=function(){return this.distance},t.prototype.getDistanceVector=function(){return this.distanceVector},t.prototype.setDistance=function(t){if(this.distance===t||t<0)return this;this.distance=t,this.distance<xr&&(this.distance=xr),this.dollyingStep=this.distance/100;var e=pt();t=this.distance;var n=this.forward,r=this.focalPoint;return e[0]=t*n[0]+r[0],e[1]=t*n[1]+r[1],e[2]=t*n[2]+r[2],this._setPosition(e),this.triggerUpdate(),this},t.prototype.setMaxDistance=function(t){return this.maxDistance=t,this},t.prototype.setMinDistance=function(t){return this.minDistance=t,this},t.prototype.setAzimuth=function(t){return this.azimuth=jn(t),this.computeMatrix(),this._getAxes(),this.type===sr.ORBITING||this.type===sr.EXPLORING?this._getPosition():this.type===sr.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this},t.prototype.getAzimuth=function(){return this.azimuth},t.prototype.setElevation=function(t){return this.elevation=jn(t),this.computeMatrix(),this._getAxes(),this.type===sr.ORBITING||this.type===sr.EXPLORING?this._getPosition():this.type===sr.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this},t.prototype.getElevation=function(){return this.elevation},t.prototype.setRoll=function(t){return this.roll=jn(t),this.computeMatrix(),this._getAxes(),this.type===sr.ORBITING||this.type===sr.EXPLORING?this._getPosition():this.type===sr.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this},t.prototype.getRoll=function(){return this.roll},t.prototype._update=function(){this._getAxes(),this._getPosition(),this._getDistance(),this._getAngles(),this._getOrthoMatrix(),this.triggerUpdate()},t.prototype.computeMatrix=function(){var t=Pt(At(),[0,0,1],Xn(this.roll));G(this.matrix);var e=Pt(At(),[1,0,0],Xn((this.rotateWorld&&this.type!==sr.TRACKING||this.type===sr.TRACKING?1:-1)*this.elevation)),n=Pt(At(),[0,1,0],Xn((this.rotateWorld&&this.type!==sr.TRACKING||this.type===sr.TRACKING?1:-1)*this.azimuth)),r=kt(At(),n,e);r=kt(At(),r,t);var i=rt(D(),r);this.type===sr.ORBITING||this.type===sr.EXPLORING?(Y(this.matrix,this.matrix,this.focalPoint),j(this.matrix,this.matrix,i),Y(this.matrix,this.matrix,[0,0,this.distance])):this.type===sr.TRACKING&&(Y(this.matrix,this.matrix,this.position),j(this.matrix,this.matrix,i))},t.prototype._setPosition=function(t,e,n){this.position=Yn(t,e,n);var r=this.matrix;r[12]=this.position[0],r[13]=this.position[1],r[14]=this.position[2],r[15]=1,this._getOrthoMatrix()},t.prototype._getAxes=function(){mt(this.right,Yn(It(Nt(),[1,0,0,0],this.matrix))),mt(this.up,Yn(It(Nt(),[0,1,0,0],this.matrix))),mt(this.forward,Yn(It(Nt(),[0,0,1,0],this.matrix))),Et(this.right,this.right),Et(this.up,this.up),Et(this.forward,this.forward)},t.prototype._getAngles=function(){var t=this.distanceVector[0],e=this.distanceVector[1],n=this.distanceVector[2],r=gt(this.distanceVector);if(0===r)return this.elevation=0,void(this.azimuth=0);this.type===sr.TRACKING||this.rotateWorld?(this.elevation=qn(Math.asin(e/r)),this.azimuth=qn(Math.atan2(-t,-n))):(this.elevation=-qn(Math.asin(e/r)),this.azimuth=-qn(Math.atan2(-t,-n)))},t.prototype._getPosition=function(){mt(this.position,Yn(It(Nt(),[0,0,0,1],this.matrix))),this._getDistance()},t.prototype._getFocalPoint=function(){var t,e;!function(t,e,n){var r=e[0],i=e[1],o=e[2];t[0]=r*n[0]+i*n[3]+o*n[6],t[1]=r*n[1]+i*n[4]+o*n[7],t[2]=r*n[2]+i*n[5]+o*n[8]}(this.distanceVector,[0,0,-this.distance],(t=B(),e=this.matrix,t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t)),wt(this.focalPoint,this.position,this.distanceVector),this._getDistance()},t.prototype._getDistance=function(){this.distanceVector=xt(pt(),this.focalPoint,this.position),this.distance=gt(this.distanceVector),this.dollyingStep=this.distance/100},t.prototype._getOrthoMatrix=function(){if(this.projectionMode===ur.ORTHOGRAPHIC){var t=this.position,e=Pt(At(),[0,0,1],-this.roll*Math.PI/180);nt(this.orthoMatrix,e,yt((this.rright-this.left)/2-t[0],(this.top-this.bottom)/2-t[1],0),yt(this.zoom,this.zoom,1),t)}},t.prototype.triggerUpdate=function(){if(this.enableUpdate){var t=this.getViewTransform(),e=j(D(),this.getPerspective(),t);this.getFrustum().extractFromVPMatrix(e),this.eventEmitter.emit(wr)}},t.prototype.rotate=function(t,e,n){throw new Error(fr)},t.prototype.pan=function(t,e){throw new Error(fr)},t.prototype.dolly=function(t){throw new Error(fr)},t.prototype.createLandmark=function(t,e){throw new Error(fr)},t.prototype.gotoLandmark=function(t,e){throw new Error(fr)},t.prototype.cancelLandmarkAnimation=function(){throw new Error(fr)},t}();function Er(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function n(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var o=e?e.apply(this,r):r[0],a=n.cache;if(a.has(o))return a.get(o);var s=t.apply(this,r);return n.cache=a.set(o,s)||a,s};return n.cache=new(Er.Cache||Map),n}Er.Cache=Map,function(t){t[t.kUnknown=0]="kUnknown",t[t.kNumber=1]="kNumber",t[t.kPercentage=2]="kPercentage",t[t.kEms=3]="kEms",t[t.kPixels=4]="kPixels",t[t.kRems=5]="kRems",t[t.kDegrees=6]="kDegrees",t[t.kRadians=7]="kRadians",t[t.kGradians=8]="kGradians",t[t.kTurns=9]="kTurns",t[t.kMilliseconds=10]="kMilliseconds",t[t.kSeconds=11]="kSeconds",t[t.kInteger=12]="kInteger"}(vr||(vr={})),function(t){t[t.kUNumber=0]="kUNumber",t[t.kUPercent=1]="kUPercent",t[t.kULength=2]="kULength",t[t.kUAngle=3]="kUAngle",t[t.kUTime=4]="kUTime",t[t.kUOther=5]="kUOther"}(gr||(gr={})),function(t){t[t.kAll=0]="kAll",t[t.kNonNegative=1]="kNonNegative",t[t.kInteger=2]="kInteger",t[t.kNonNegativeInteger=3]="kNonNegativeInteger",t[t.kPositiveInteger=4]="kPositiveInteger"}(yr||(yr={})),function(t){t[t.kYes=0]="kYes",t[t.kNo=1]="kNo"}(mr||(mr={})),function(t){t[t.kYes=0]="kYes",t[t.kNo=1]="kNo"}(Cr||(Cr={}));var Sr,Tr=[{name:"em",unit_type:vr.kEms},{name:"px",unit_type:vr.kPixels},{name:"deg",unit_type:vr.kDegrees},{name:"rad",unit_type:vr.kRadians},{name:"grad",unit_type:vr.kGradians},{name:"ms",unit_type:vr.kMilliseconds},{name:"s",unit_type:vr.kSeconds},{name:"rem",unit_type:vr.kRems},{name:"turn",unit_type:vr.kTurns}];!function(t){t[t.kUnknownType=0]="kUnknownType",t[t.kUnparsedType=1]="kUnparsedType",t[t.kKeywordType=2]="kKeywordType",t[t.kUnitType=3]="kUnitType",t[t.kSumType=4]="kSumType",t[t.kProductType=5]="kProductType",t[t.kNegateType=6]="kNegateType",t[t.kInvertType=7]="kInvertType",t[t.kMinType=8]="kMinType",t[t.kMaxType=9]="kMaxType",t[t.kClampType=10]="kClampType",t[t.kTransformType=11]="kTransformType",t[t.kPositionType=12]="kPositionType",t[t.kURLImageType=13]="kURLImageType",t[t.kColorType=14]="kColorType",t[t.kUnsupportedColorType=15]="kUnsupportedColorType"}(Sr||(Sr={}));var Lr,_r=function(t){return t?"number"===t?vr.kNumber:"percent"===t||"%"===t?vr.kPercentage:function(t){return Tr.find((function(e){return e.name===t})).unit_type}(t):vr.kUnknown},Mr=function(t){var e=1;switch(t){case vr.kPixels:case vr.kDegrees:case vr.kSeconds:break;case vr.kMilliseconds:e=.001;break;case vr.kRadians:e=180/Math.PI;break;case vr.kGradians:e=.9;break;case vr.kTurns:e=360}return e},Rr=function(t){switch(t){case vr.kNumber:case vr.kInteger:return"";case vr.kPercentage:return"%";case vr.kEms:return"em";case vr.kRems:return"rem";case vr.kPixels:return"px";case vr.kDegrees:return"deg";case vr.kRadians:return"rad";case vr.kGradians:return"grad";case vr.kMilliseconds:return"ms";case vr.kSeconds:return"s";case vr.kTurns:return"turn"}return""},Or=function(){function t(){}return t.isAngle=function(t){return t===vr.kDegrees||t===vr.kRadians||t===vr.kGradians||t===vr.kTurns},t.isLength=function(t){return t>=vr.kEms&&t<vr.kDegrees},t.isRelativeUnit=function(t){return t===vr.kPercentage||t===vr.kEms||t===vr.kRems},t.isTime=function(t){return t===vr.kSeconds||t===vr.kMilliseconds},t.prototype.toString=function(){return this.buildCSSText(mr.kNo,Cr.kNo,"")},t.prototype.isNumericValue=function(){return this.getType()>=Sr.kUnitType&&this.getType()<=Sr.kClampType},t}(),Nr=function(t){function e(e){var n=t.call(this)||this;return n.colorSpace=e,n}return E(e,t),e.prototype.getType=function(){return Sr.kColorType},e.prototype.to=function(t){return this},e}(Or);!function(t){t[t.Constant=0]="Constant",t[t.LinearGradient=1]="LinearGradient",t[t.RadialGradient=2]="RadialGradient"}(Lr||(Lr={}));var Ir=function(t){function e(e,n){var r=t.call(this)||this;return r.type=e,r.value=n,r}return E(e,t),e.prototype.clone=function(){return new e(this.type,this.value)},e.prototype.buildCSSText=function(t,e,n){return n},e.prototype.getType=function(){return Sr.kColorType},e}(Or),Ar=function(t){function e(e){var n=t.call(this)||this;return n.value=e,n}return E(e,t),e.prototype.clone=function(){return new e(this.value)},e.prototype.getType=function(){return Sr.kKeywordType},e.prototype.buildCSSText=function(t,e,n){return n+this.value},e}(Or),Pr=Er((function(t){return void 0===t&&(t=""),t.replace(/-([a-z])/g,(function(t){return t[1].toUpperCase()}))})),kr=function(t){return t.split("").map((function(t,e){return t.toUpperCase()===t?"".concat(0!==e?"-":"").concat(t.toLowerCase()):t})).join("")};function Br(t){return"function"==typeof t}var Dr={d:{alias:"path"},strokeDasharray:{alias:"lineDash"},strokeWidth:{alias:"lineWidth"},textAnchor:{alias:"textAlign"},src:{alias:"img"}},Fr=Er((function(t){var e=Pr(t),n=Dr[e];return e=(null==n?void 0:n.alias)||e})),Hr=function(t,e){void 0===e&&(e="");var n="";return Number.isFinite(t)?(!function(t){if(!t)throw new Error}(Number.isNaN(t)),n="NaN"):n=t>0?"infinity":"-infinity",n+e},zr=function(t){return function(t){switch(t){case gr.kUNumber:return vr.kNumber;case gr.kULength:return vr.kPixels;case gr.kUPercent:return vr.kPercentage;case gr.kUTime:return vr.kSeconds;case gr.kUAngle:return vr.kDegrees;default:return vr.kUnknown}}(function(t){switch(t){case vr.kNumber:case vr.kInteger:return gr.kUNumber;case vr.kPercentage:return gr.kUPercent;case vr.kPixels:return gr.kULength;case vr.kMilliseconds:case vr.kSeconds:return gr.kUTime;case vr.kDegrees:case vr.kRadians:case vr.kGradians:case vr.kTurns:return gr.kUAngle;default:return gr.kUOther}}(t))},Gr=function(t){function e(e,n){void 0===n&&(n=vr.kNumber);var r,i=t.call(this)||this;return r="string"==typeof n?_r(n):n,i.unit=r,i.value=e,i}return E(e,t),e.prototype.clone=function(){return new e(this.value,this.unit)},e.prototype.equals=function(t){var e=t;return this.value===e.value&&this.unit===e.unit},e.prototype.getType=function(){return Sr.kUnitType},e.prototype.convertTo=function(t){if(this.unit===t)return new e(this.value,this.unit);var n=zr(this.unit);if(n!==zr(t)||n===vr.kUnknown)return null;var r=Mr(this.unit)/Mr(t);return new e(this.value*r,t)},e.prototype.buildCSSText=function(t,e,n){var r;switch(this.unit){case vr.kUnknown:break;case vr.kInteger:r=Number(this.value).toFixed(0);break;case vr.kNumber:case vr.kPercentage:case vr.kEms:case vr.kRems:case vr.kPixels:case vr.kDegrees:case vr.kRadians:case vr.kGradians:case vr.kMilliseconds:case vr.kSeconds:case vr.kTurns:var i=this.value,o=Rr(this.unit);if(i<-999999||i>999999){var a=Rr(this.unit);r=!Number.isFinite(i)||Number.isNaN(i)?Hr(i,a):i+(a||"")}else r="".concat(i).concat(o)}return n+=r},e}(Or),Wr=new Gr(0,"px");new Gr(1,"px");var Vr,Ur,jr=new Gr(0,"deg"),Yr=function(t){function e(e,n,r,i,o){void 0===i&&(i=1),void 0===o&&(o=!1);var a=t.call(this,"rgb")||this;return a.r=e,a.g=n,a.b=r,a.alpha=i,a.isNone=o,a}return E(e,t),e.prototype.clone=function(){return new e(this.r,this.g,this.b,this.alpha)},e.prototype.buildCSSText=function(t,e,n){return n+"rgba(".concat(this.r,",").concat(this.g,",").concat(this.b,",").concat(this.alpha,")")},e}(Nr),Xr=new Ar("unset"),qr=new Ar("initial"),Kr=new Ar("inherit"),Zr={"":Xr,unset:Xr,initial:qr,inherit:Kr},$r=function(t){return Zr[t]||(Zr[t]=new Ar(t)),Zr[t]},Qr=new Yr(0,0,0,0,!0),Jr=new Yr(0,0,0,0),ti=Er((function(t,e,n,r){return new Yr(t,e,n,r)}),(function(t,e,n,r){return"rgba(".concat(t,",").concat(e,",").concat(n,",").concat(r,")")})),ei=function(t,e){return void 0===e&&(e=vr.kNumber),new Gr(t,e)},ni=new Gr(50,"%");!function(t){t[t.Standard=0]="Standard"}(Vr||(Vr={})),function(t){t[t.ADDED=0]="ADDED",t[t.REMOVED=1]="REMOVED",t[t.Z_INDEX_CHANGED=2]="Z_INDEX_CHANGED"}(Ur||(Ur={}));var ri,ii={absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:new dr(0,0,0,0)};function oi(t){var e=t.type,n=t.value;return"hex"===e?"#".concat(n):"literal"===e?n:"rgb"===e?"rgb(".concat(n.join(","),")"):"rgba(".concat(n.join(","),")")}!function(t){t.COORDINATE="<coordinate>",t.COLOR="<color>",t.PAINT="<paint>",t.NUMBER="<number>",t.ANGLE="<angle>",t.OPACITY_VALUE="<opacity-value>",t.SHADOW_BLUR="<shadow-blur>",t.LENGTH="<length>",t.PERCENTAGE="<percentage>",t.LENGTH_PERCENTAGE="<length> | <percentage>",t.LENGTH_PERCENTAGE_12="[<length> | <percentage>]{1,2}",t.LENGTH_PERCENTAGE_14="[<length> | <percentage>]{1,4}",t.LIST_OF_POINTS="<list-of-points>",t.PATH="<path>",t.FILTER="<filter>",t.Z_INDEX="<z-index>",t.OFFSET_DISTANCE="<offset-distance>",t.DEFINED_PATH="<defined-path>",t.MARKER="<marker>",t.TRANSFORM="<transform>",t.TRANSFORM_ORIGIN="<transform-origin>",t.TEXT="<text>",t.TEXT_TRANSFORM="<text-transform>"}(ri||(ri={}));var ai=function(){var t={linearGradient:/^(linear\-gradient)/i,repeatingLinearGradient:/^(repeating\-linear\-gradient)/i,radialGradient:/^(radial\-gradient)/i,repeatingRadialGradient:/^(repeating\-radial\-gradient)/i,conicGradient:/^(conic\-gradient)/i,sideOrCorner:/^to (left (top|bottom)|right (top|bottom)|top (left|right)|bottom (left|right)|left|right|top|bottom)/i,extentKeywords:/^(closest\-side|closest\-corner|farthest\-side|farthest\-corner|contain|cover)/,positionKeywords:/^(left|center|right|top|bottom)/i,pixelValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))px/,percentageValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))\%/,emValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))em/,angleValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))deg/,startCall:/^\(/,endCall:/^\)/,comma:/^,/,hexColor:/^\#([0-9a-fA-F]+)/,literalColor:/^([a-zA-Z]+)/,rgbColor:/^rgb/i,rgbaColor:/^rgba/i,number:/^(([0-9]*\.[0-9]+)|([0-9]+\.?))/},e="";function n(t){throw new Error(e+": "+t)}function r(){var t=f(i);return e.length>0&&n("Invalid input not EOF"),t}function i(){return o("linear-gradient",t.linearGradient,s)||o("repeating-linear-gradient",t.repeatingLinearGradient,s)||o("radial-gradient",t.radialGradient,l)||o("repeating-radial-gradient",t.repeatingRadialGradient,l)||o("conic-gradient",t.conicGradient,l)}function o(e,r,i){return a(r,(function(r){var o=i();return o&&(C(t.comma)||n("Missing comma before color stops")),{type:e,orientation:o,colorStops:f(p)}}))}function a(e,r){var i=C(e);if(i){C(t.startCall)||n("Missing (");var o=r(i);return C(t.endCall)||n("Missing )"),o}}function s(){return m("directional",t.sideOrCorner,1)||m("angular",t.angleValue,1)}function l(){var n,r,i=u();return i&&((n=[]).push(i),r=e,C(t.comma)&&((i=u())?n.push(i):e=r)),n}function u(){var t=function(){var t=m("shape",/^(circle)/i,0);t&&(t.style=y()||c());return t}()||function(){var t=m("shape",/^(ellipse)/i,0);t&&(t.style=g()||c());return t}();if(t)t.at=h();else{var e=c();if(e){t=e;var n=h();n&&(t.at=n)}else{var r=d();r&&(t={type:"default-radial",at:r})}}return t}function c(){return m("extent-keyword",t.extentKeywords,1)}function h(){if(m("position",/^at/,0)){var t=d();return t||n("Missing positioning value"),t}}function d(){var t={x:g(),y:g()};if(t.x||t.y)return{type:"position",value:t}}function f(e){var r=e(),i=[];if(r)for(i.push(r);C(t.comma);)(r=e())?i.push(r):n("One extra comma");return i}function p(){var e=m("hex",t.hexColor,1)||a(t.rgbaColor,(function(){return{type:"rgba",value:f(v)}}))||a(t.rgbColor,(function(){return{type:"rgb",value:f(v)}}))||m("literal",t.literalColor,0);return e||n("Expected color definition"),e.length=g(),e}function v(){return C(t.number)[1]}function g(){return m("%",t.percentageValue,1)||m("position-keyword",t.positionKeywords,1)||y()}function y(){return m("px",t.pixelValue,1)||m("em",t.emValue,1)}function m(t,e,n){var r=C(e);if(r)return{type:t,value:r[n]}}function C(t){var n=/^[\n\r\t\s]+/.exec(e);n&&w(n[0].length);var r=t.exec(e);return r&&w(r[0].length),r}function w(t){e=e.substring(t)}return function(t){return e=t,r()}}();var si=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,li=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,ui=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,ci=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;var hi={left:180,top:-90,bottom:90,right:0,"left top":225,"top left":225,"left bottom":135,"bottom left":135,"right top":-45,"top right":-45,"right bottom":45,"bottom right":45},di=Er((function(t){var e;return e="angular"===t.type?Number(t.value):hi[t.value]||0,ei(e,"deg")})),fi=Er((function(t){var e=50,n=50,r="%",i="%";if("position"===(null==t?void 0:t.type)){var o=t.value,a=o.x,s=o.y;"position-keyword"===(null==a?void 0:a.type)&&("left"===a.value?e=0:"center"===a.value?e=50:"right"===a.value?e=100:"top"===a.value?n=0:"bottom"===a.value&&(n=100)),"position-keyword"===(null==s?void 0:s.type)&&("left"===s.value?e=0:"center"===s.value?n=50:"right"===s.value?e=100:"top"===s.value?n=0:"bottom"===s.value&&(n=100)),"px"!==(null==a?void 0:a.type)&&"%"!==(null==a?void 0:a.type)&&"em"!==(null==a?void 0:a.type)||(r=null==a?void 0:a.type,e=Number(a.value)),"px"!==(null==s?void 0:s.type)&&"%"!==(null==s?void 0:s.type)&&"em"!==(null==s?void 0:s.type)||(i=null==s?void 0:s.type,n=Number(s.value))}return{cx:ei(e,r),cy:ei(n,i)}})),pi=Er((function(t){var e;if(t.indexOf("linear")>-1||t.indexOf("radial")>-1)return ai(t).map((function(t){var e=t.type,n=t.orientation,r=t.colorStops;!function(t){var e,n,r,i=t.length;t[i-1].length=null!==(e=t[i-1].length)&&void 0!==e?e:{type:"%",value:"100"},i>1&&(t[0].length=null!==(n=t[0].length)&&void 0!==n?n:{type:"%",value:"0"});for(var o=0,a=Number(t[0].length.value),s=1;s<i;s++){var l=null===(r=t[s].length)||void 0===r?void 0:r.value;if(!Wt(l)&&!Wt(a)){for(var u=1;u<s-o;u++)t[o+u].length={type:"%",value:"".concat(a+(Number(l)-a)*u/(s-o))};o=s,a=Number(l)}}}(r);var i=r.map((function(t){return{offset:ei(Number(t.length.value),"%"),color:oi(t)}}));if("linear-gradient"===e)return new Ir(Lr.LinearGradient,{angle:n?di(n):jr,steps:i});if("radial-gradient"===e&&(n||(n=[{type:"shape",value:"circle"}]),"shape"===n[0].type&&"circle"===n[0].value)){var o=fi(n[0].at),a=o.cx,s=o.cy,l=void 0;if(n[0].style){var u=n[0].style,c=u.type,h=u.value;l="extent-keyword"===c?$r(h):ei(h,c)}return new Ir(Lr.RadialGradient,{cx:a,cy:s,size:l,steps:i})}}));var n=t[0];if("("===t[1]||"("===t[2])if("l"===n){var r=si.exec(t);if(r){var i=(null===(e=r[2].match(ci))||void 0===e?void 0:e.map((function(t){return t.split(":")})))||[];return[new Ir(Lr.LinearGradient,{angle:ei(parseFloat(r[1]),"deg"),steps:i.map((function(t){var e=R(t,2),n=e[0],r=e[1];return{offset:ei(100*Number(n),"%"),color:r}}))})]}}else if("r"===n){var o=function(t){var e,n=li.exec(t);if(n){var r=(null===(e=n[4].match(ci))||void 0===e?void 0:e.map((function(t){return t.split(":")})))||[];return{cx:ei(50,"%"),cy:ei(50,"%"),steps:r.map((function(t){var e=R(t,2),n=e[0],r=e[1];return{offset:ei(100*Number(n),"%"),color:r}}))}}return null}(t);if(o){if(!Kt(o))return[new Ir(Lr.RadialGradient,o)];t=o}}else if("p"===n)return function(t){var e=ui.exec(t);if(e){var n=e[1],r=e[2];switch(n){case"a":n="repeat";break;case"x":n="repeat-x";break;case"y":n="repeat-y";break;default:n="no-repeat"}return{image:r,repetition:n}}return null}(t)}));function vi(t){return t&&!!t.image}function gi(t){return t&&!Wt(t.r)&&!Wt(t.g)&&!Wt(t.b)}var yi=Er((function(t){if(vi(t))return S({repetition:"repeat"},t);if(Wt(t)&&(t=""),"transparent"===t)return Jr;"currentColor"===t&&(t="black");var e=pi(t);if(e)return e;var n=rn(t),r=[0,0,0,0];return null!==n&&(r[0]=n.r||0,r[1]=n.g||0,r[2]=n.b||0,r[3]=n.opacity),ti.apply(void 0,O([],R(r),!1))}));function mi(t,e){if(gi(t)&&gi(e))return[[Number(t.r),Number(t.g),Number(t.b),Number(t.alpha)],[Number(e.r),Number(e.g),Number(e.b),Number(e.alpha)],function(t){var e=t.slice();if(e[3])for(var n=0;n<3;n++)e[n]=Math.round(Zt(e[n],0,255));return e[3]=Zt(e[3],0,1),"rgba(".concat(e.join(","),")")}]}function Ci(t,e){if(Wt(e))return ei(0,"px");if(e="".concat(e).trim().toLowerCase(),isFinite(Number(e))){if("px".search(t)>=0)return ei(Number(e),"px");if("deg".search(t)>=0)return ei(Number(e),"deg")}var n=[];e=e.replace(t,(function(t){return n.push(t),"U"+t}));var r="U("+t.source+")";return n.map((function(t){return ei(Number(e.replace(new RegExp("U"+t,"g"),"").replace(new RegExp(r,"g"),"*0")),t)}))[0]}var wi=function(t){return Ci(new RegExp("px","g"),t)},xi=Er(wi);Er((function(t){return Ci(new RegExp("%","g"),t)}));var bi=function(t){return $t(t)||isFinite(Number(t))?ei(Number(t)||0,"px"):Ci(new RegExp("px|%|em|rem","g"),t)},Ei=Er(bi),Si=function(t){return Ci(new RegExp("deg|rad|grad|turn","g"),t)},Ti=Er(Si);function Li(t,e,n,r,i){void 0===i&&(i=0);var o="",a=t.value||0,s=e.value||0,l=zr(t.unit),u=t.convertTo(l),c=e.convertTo(l);return u&&c?(a=u.value,s=c.value,o=Rr(t.unit)):(Gr.isLength(t.unit)||Gr.isLength(e.unit))&&(a=Oi(t,i,n),s=Oi(e,i,n),o="px"),[a,s,function(t){return r&&(t=Math.max(t,0)),t+o}]}function _i(t){var e=0;return t.unit===vr.kDegrees?e=t.value:t.unit===vr.kRadians?e=qn(Number(t.value)):t.unit===vr.kTurns&&(e=360*Number(t.value)),e}function Mi(t,e){var n;return Array.isArray(t)?n=t.map((function(t){return Number(t)})):Kt(t)?n=t.split(" ").map((function(t){return Number(t)})):$t(t)&&(n=[t]),2===e?1===n.length?[n[0],n[0]]:[n[0],n[1]]:1===n.length?[n[0],n[0],n[0],n[0]]:2===n.length?[n[0],n[1],n[0],n[1]]:3===n.length?[n[0],n[1],n[2],n[1]]:[n[0],n[1],n[2],n[3]]}function Ri(t){return Kt(t)?t.split(" ").map((function(t){return Ei(t)})):t.map((function(t){return Ei(t.toString())}))}function Oi(t,e,n){if(0===t.value)return 0;if(t.unit===vr.kPixels)return Number(t.value);if(t.unit===vr.kPercentage&&n){var r=n.nodeName===Bn.GROUP?n.getLocalBounds():n.geometry.contentBounds;return t.value/100*r.halfExtents[e]*2}return 0}var Ni=["blur","brightness","drop-shadow","contrast","grayscale","sepia","saturate","hue-rotate","invert"];function Ii(t){if(void 0===t&&(t=""),"none"===(t=t.toLowerCase().trim()))return[];for(var e,n=/\s*([\w-]+)\(([^)]*)\)/g,r=[],i=0;e=n.exec(t);){if(e.index!==i)return[];if(i=e.index+e[0].length,Ni.indexOf(e[1])>-1&&r.push({name:e[1],params:e[2].split(" ").map((function(t){return Ci(/deg|rad|grad|turn|px|%/g,t)||yi(t)}))}),n.lastIndex===t.length)return r}return[]}function Ai(t){return t.toString()}var Pi=function(t){return"number"==typeof t?ei(t):/^\s*[-+]?(\d*\.)?\d+\s*$/.test(t)?ei(Number(t)):ei(0)},ki=Er(Pi);function Bi(t,e){return[t,e,Ai]}function Di(t,e){return function(n,r){return[n,r,function(n){return Ai(Zt(n,t,e))}]}}function Fi(t,e){if(t.length===e.length)return[t,e,function(t){return t}]}function Hi(t){var e;return 0===t.parsedStyle.path.totalLength&&(t.parsedStyle.path.totalLength=ke(t.parsedStyle.path.absolutePath,void 0,S(S({},e),{bbox:!1,length:!0})).length),t.parsedStyle.path.totalLength}function zi(t,e){return t[0]===e[0]&&t[1]===e[1]}function Gi(t,e){var n=t.prePoint,r=t.currentPoint,i=t.nextPoint,o=Math.pow(r[0]-n[0],2)+Math.pow(r[1]-n[1],2),a=Math.pow(r[0]-i[0],2)+Math.pow(r[1]-i[1],2),s=Math.pow(n[0]-i[0],2)+Math.pow(n[1]-i[1],2),l=Math.acos((o+a-s)/(2*Math.sqrt(o)*Math.sqrt(a)));if(!l||0===Math.sin(l)||Jt(l,0))return{xExtra:0,yExtra:0};var u=Math.abs(Math.atan2(i[1]-r[1],i[0]-r[0])),c=Math.abs(Math.atan2(i[0]-r[0],i[1]-r[1]));return u=u>Math.PI/2?Math.PI-u:u,c=c>Math.PI/2?Math.PI-c:c,{xExtra:Math.cos(l/2-u)*(e/2*(1/Math.sin(l/2)))-e/2||0,yExtra:Math.cos(c-l/2)*(e/2*(1/Math.sin(l/2)))-e/2||0}}function Wi(t,e){return[e[0]+(e[0]-t[0]),e[1]+(e[1]-t[1])]}Er((function(t){return Kt(t)?t.split(" ").map(ki):t.map(ki)}));var Vi=function(t,e){var n=t.x*e.x+t.y*e.y,r=Math.sqrt((Math.pow(t.x,2)+Math.pow(t.y,2))*(Math.pow(e.x,2)+Math.pow(e.y,2)));return(t.x*e.y-t.y*e.x<0?-1:1)*Math.acos(n/r)},Ui=function(t,e,n,r,i,o,a,s){e=Math.abs(e),n=Math.abs(n);var l=Xn(r=te(r,360));if(t.x===a.x&&t.y===a.y)return{x:t.x,y:t.y,ellipticalArcAngle:0};if(0===e||0===n)return{x:0,y:0,ellipticalArcAngle:0};var u=(t.x-a.x)/2,c=(t.y-a.y)/2,h={x:Math.cos(l)*u+Math.sin(l)*c,y:-Math.sin(l)*u+Math.cos(l)*c},d=Math.pow(h.x,2)/Math.pow(e,2)+Math.pow(h.y,2)/Math.pow(n,2);d>1&&(e=Math.sqrt(d)*e,n=Math.sqrt(d)*n);var f=(Math.pow(e,2)*Math.pow(n,2)-Math.pow(e,2)*Math.pow(h.y,2)-Math.pow(n,2)*Math.pow(h.x,2))/(Math.pow(e,2)*Math.pow(h.y,2)+Math.pow(n,2)*Math.pow(h.x,2));f=f<0?0:f;var p=(i!==o?1:-1)*Math.sqrt(f),v=p*(e*h.y/n),g=p*(-n*h.x/e),y={x:Math.cos(l)*v-Math.sin(l)*g+(t.x+a.x)/2,y:Math.sin(l)*v+Math.cos(l)*g+(t.y+a.y)/2},m={x:(h.x-v)/e,y:(h.y-g)/n},C=Vi({x:1,y:0},m),w=Vi(m,{x:(-h.x-v)/e,y:(-h.y-g)/n});!o&&w>0?w-=2*Math.PI:o&&w<0&&(w+=2*Math.PI);var x=C+(w%=2*Math.PI)*s,b=e*Math.cos(x),E=n*Math.sin(x);return{x:Math.cos(l)*b-Math.sin(l)*E+y.x,y:Math.sin(l)*b+Math.cos(l)*E+y.y,ellipticalArcStartAngle:C,ellipticalArcEndAngle:C+w,ellipticalArcAngle:x,ellipticalArcCenter:y,resultantRx:e,resultantRy:n}};function ji(t,e,n){void 0===n&&(n=!0);var r=t.arcParams,i=r.rx,o=void 0===i?0:i,a=r.ry,s=void 0===a?0:a,l=r.xRotation,u=r.arcFlag,c=r.sweepFlag,h=Ui({x:t.prePoint[0],y:t.prePoint[1]},o,s,l,!!u,!!c,{x:t.currentPoint[0],y:t.currentPoint[1]},e),d=Ui({x:t.prePoint[0],y:t.prePoint[1]},o,s,l,!!u,!!c,{x:t.currentPoint[0],y:t.currentPoint[1]},n?e+.005:e-.005),f=d.x-h.x,p=d.y-h.y,v=Math.sqrt(f*f+p*p);return{x:-f/v,y:-p/v}}function Yi(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function Xi(t,e){return Yi(t)*Yi(e)?(t[0]*e[0]+t[1]*e[1])/(Yi(t)*Yi(e)):1}function qi(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(Xi(t,e))}function Ki(t,e){var n=e[1],r=e[2],i=te(Xn(e[3]),2*Math.PI),o=e[4],a=e[5],s=t[0],l=t[1],u=e[6],c=e[7],h=Math.cos(i)*(s-u)/2+Math.sin(i)*(l-c)/2,d=-1*Math.sin(i)*(s-u)/2+Math.cos(i)*(l-c)/2,f=h*h/(n*n)+d*d/(r*r);f>1&&(n*=Math.sqrt(f),r*=Math.sqrt(f));var p=n*n*(d*d)+r*r*(h*h),v=p?Math.sqrt((n*n*(r*r)-p)/p):1;o===a&&(v*=-1),isNaN(v)&&(v=0);var g=r?v*n*d/r:0,y=n?v*-r*h/n:0,m=(s+u)/2+Math.cos(i)*g-Math.sin(i)*y,C=(l+c)/2+Math.sin(i)*g+Math.cos(i)*y,w=[(h-g)/n,(d-y)/r],x=[(-1*h-g)/n,(-1*d-y)/r],b=qi([1,0],w),E=qi(w,x);return Xi(w,x)<=-1&&(E=Math.PI),Xi(w,x)>=1&&(E=0),0===a&&E>0&&(E-=2*Math.PI),1===a&&E<0&&(E+=2*Math.PI),{cx:m,cy:C,rx:zi(t,[u,c])?0:n,ry:zi(t,[u,c])?0:r,startAngle:b,endAngle:b+E,xRotation:i,arcFlag:o,sweepFlag:a}}var Zi=function(t){if(""===t||Array.isArray(t)&&0===t.length)return{absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:{x:0,y:0,width:0,height:0}};var e;try{e=Ce(t)}catch(d){e=Ce(""),console.error("[g]: Invalid SVG Path definition: ".concat(t))}!function(t){for(var e=0;e<t.length;e++){var n=t[e-1],r=t[e];if("M"===r[0]&&n){var i=n[0],o=[r[1],r[2]],a=void 0;"L"===i||"M"===i?a=[n[1],n[2]]:"C"!==i&&"A"!==i&&"Q"!==i||(a=[n[n.length-2],n[n.length-1]]),a&&zi(o,a)&&(t.splice(e,1),e--)}}}(e);var n=function(t){for(var e=!1,n=t.length,r=0;r<n;r++){var i=t[r][0];if("C"===i||"A"===i||"Q"===i){e=!0;break}}return e}(e),r=function(t){for(var e=[],n=[],r=[],i=0;i<t.length;i++){var o=t[i],a=o[0];"M"===a?(r.length&&(n.push(r),r=[]),r.push([o[1],o[2]])):"Z"===a?r.length&&(e.push(r),r=[]):r.push([o[1],o[2]])}return r.length>0&&n.push(r),{polygons:e,polylines:n}}(e),i=r.polygons,o=r.polylines,a=function(t){for(var e=[],n=null,r=null,i=null,o=0,a=t.length,s=0;s<a;s++){var l=t[s];r=t[s+1];var u=l[0],c={command:u,prePoint:n,params:l,startTangent:null,endTangent:null,currentPoint:null,nextPoint:null,arcParams:null,box:null,cubicParams:null};switch(u){case"M":i=[l[1],l[2]],o=s;break;case"A":var h=Ki(n,l);c.arcParams=h}if("Z"===u)n=i,r=t[o+1];else{var d=l.length;n=[l[d-2],l[d-1]]}r&&"Z"===r[0]&&(r=t[o],e[o]&&(e[o].prePoint=n)),c.currentPoint=n,e[o]&&zi(n,e[o].currentPoint)&&(e[o].prePoint=c.prePoint);var f=r?[r[r.length-2],r[r.length-1]]:null;c.nextPoint=f;var p=c.prePoint;if(["L","H","V"].includes(u))c.startTangent=[p[0]-n[0],p[1]-n[1]],c.endTangent=[n[0]-p[0],n[1]-p[1]];else if("Q"===u){var v=[l[1],l[2]];c.startTangent=[p[0]-v[0],p[1]-v[1]],c.endTangent=[n[0]-v[0],n[1]-v[1]]}else if("T"===u)v=Wi((m=e[s-1]).currentPoint,p),"Q"===m.command?(c.command="Q",c.startTangent=[p[0]-v[0],p[1]-v[1]],c.endTangent=[n[0]-v[0],n[1]-v[1]]):(c.command="TL",c.startTangent=[p[0]-n[0],p[1]-n[1]],c.endTangent=[n[0]-p[0],n[1]-p[1]]);else if("C"===u){var g=[l[1],l[2]],y=[l[3],l[4]];c.startTangent=[p[0]-g[0],p[1]-g[1]],c.endTangent=[n[0]-y[0],n[1]-y[1]],0===c.startTangent[0]&&0===c.startTangent[1]&&(c.startTangent=[g[0]-y[0],g[1]-y[1]]),0===c.endTangent[0]&&0===c.endTangent[1]&&(c.endTangent=[y[0]-g[0],y[1]-g[1]])}else if("S"===u){var m;g=Wi((m=e[s-1]).currentPoint,p),y=[l[1],l[2]],"C"===m.command?(c.command="C",c.startTangent=[p[0]-g[0],p[1]-g[1]],c.endTangent=[n[0]-y[0],n[1]-y[1]]):(c.command="SQ",c.startTangent=[p[0]-y[0],p[1]-y[1]],c.endTangent=[n[0]-y[0],n[1]-y[1]])}else if("A"===u){var C=ji(c,0),w=C.x,x=C.y,b=ji(c,1,!1),E=b.x,S=b.y;c.startTangent=[w,x],c.endTangent=[E,S]}e.push(c)}return e}(e),s=function(t,e){for(var n=[],r=[],i=[],o=0;o<t.length;o++){var a=(v=t[o]).currentPoint,s=v.params,l=v.prePoint,u=void 0;switch(v.command){case"Q":u=An(l[0],l[1],s[1],s[2],s[3],s[4]);break;case"C":u=Mn(l[0],l[1],s[1],s[2],s[3],s[4],s[5],s[6]);break;case"A":var c=v.arcParams;u=wn(c.cx,c.cy,c.rx,c.ry,c.xRotation,c.startAngle,c.endAngle);break;default:n.push(a[0]),r.push(a[1])}u&&(v.box=u,n.push(u.x,u.x+u.width),r.push(u.y,u.y+u.height)),e&&("L"===v.command||"M"===v.command)&&v.prePoint&&v.nextPoint&&i.push(v)}n=n.filter((function(t){return!Number.isNaN(t)&&t!==1/0&&t!==-1/0})),r=r.filter((function(t){return!Number.isNaN(t)&&t!==1/0&&t!==-1/0}));var h=qt(n),d=qt(r),f=Xt(n),p=Xt(r);if(0===i.length)return{x:h,y:d,width:f-h,height:p-d};for(o=0;o<i.length;o++){var v;(a=(v=i[o]).currentPoint)[0]===h?h-=Gi(v,e).xExtra:a[0]===f&&(f+=Gi(v,e).xExtra),a[1]===d?d-=Gi(v,e).yExtra:a[1]===p&&(p+=Gi(v,e).yExtra)}return{x:h,y:d,width:f-h,height:p-d}}(a,0),l=s.x,u=s.y,c=s.width,h=s.height;return{absolutePath:e,hasArc:n,segments:a,polygons:i,polylines:o,totalLength:0,rect:{x:Number.isFinite(l)?l:0,y:Number.isFinite(u)?u:0,width:Number.isFinite(c)?c:0,height:Number.isFinite(h)?h:0}}},$i=Er(Zi);function Qi(t){return Kt(t)?$i(t):Zi(t)}function Ji(t,e,n){var r=t.curve,i=e.curve;r&&0!==r.length||(r=Te(t.absolutePath,!1),t.curve=r),i&&0!==i.length||(i=Te(e.absolutePath,!1),e.curve=i);var o=[r,i];r.length!==i.length&&(o=Fe(r,i));var a,s,l,u,c,h,d,f,p=Be(o[0])!==Be(o[1])?(a=o[0],s=a.slice(1).map((function(t,e,n){return e?n[e-1].slice(-2).concat(t.slice(1)):a[0].slice(1).concat(t.slice(1))})).map((function(t){return t.map((function(e,n){return t[t.length-n-2*(1-n%2)]}))})).reverse(),[["M"].concat(s[0].slice(0,2))].concat(s.map((function(t){return["C"].concat(t.slice(2))})))):o[0].map((function(t){return Array.isArray(t)?[].concat(t):t}));return[p,(l=o[1],u=p,c=l.length-1,h=[],d=0,f=function(t){var e=t.length,n=e-1;return t.map((function(r,i){return t.map((function(r,o){var a,s=i+o;return 0===o||t[s]&&"M"===t[s][0]?(a=t[s],["M"].concat(a.slice(-2))):(s>=e&&(s-=n),t[s])}))}))}(l),f.forEach((function(t,e){l.slice(1).forEach((function(t,n){d+=Le(l[(e+n)%c].slice(-2),u[n%c].slice(-2))})),h[e]=d,d=0})),f[h.indexOf(Math.min.apply(null,h))]),function(t){return t}]}function to(t,e){var n;n=Kt(t)?t.split(" ").map((function(t){var e=R(t.split(","),2),n=e[0],r=e[1];return[Number(n),Number(r)]})):t;var r,i,o=[],a=0,s=On(n);n.forEach((function(t,e){n[e+1]&&((r=[0,0])[0]=a/s,i=En(t[0],t[1],n[e+1][0],n[e+1][1]),a+=i,r[1]=a/s,o.push(r))}));var l=Math.min.apply(Math,O([],R(n.map((function(t){return t[0]}))),!1)),u=Math.min.apply(Math,O([],R(n.map((function(t){return t[1]}))),!1));return e&&(e.parsedStyle.defX=l,e.parsedStyle.defY=u),{points:n,totalLength:s,segments:o}}function eo(t,e){return[t.points,e.points,function(t){return t}]}var no=null;function ro(t){return function(e){var n=0;return t.map((function(t){return t===no?e[n++]:t}))}}function io(t){return t}var oo={matrix:["NNNNNN",[no,no,0,0,no,no,0,0,0,0,1,0,no,no,0,1],io],matrix3d:["NNNNNNNNNNNNNNNN",io],rotate:["A"],rotatex:["A"],rotatey:["A"],rotatez:["A"],rotate3d:["NNNA"],perspective:["L"],scale:["Nn",ro([no,no,new Gr(1)]),io],scalex:["N",ro([no,new Gr(1),new Gr(1)]),ro([no,new Gr(1)])],scaley:["N",ro([new Gr(1),no,new Gr(1)]),ro([new Gr(1),no])],scalez:["N",ro([new Gr(1),new Gr(1),no])],scale3d:["NNN",io],skew:["Aa",null,io],skewx:["A",null,ro([no,jr])],skewy:["A",null,ro([jr,no])],translate:["Tt",ro([no,no,Wr]),io],translatex:["T",ro([no,Wr,Wr]),ro([no,Wr])],translatey:["T",ro([Wr,no,Wr]),ro([Wr,no])],translatez:["L",ro([Wr,Wr,no])],translate3d:["TTL",io]};function ao(t){if("none"===(t=(t||"none").toLowerCase().trim()))return[];for(var e,n=/\s*(\w+)\(([^)]*)\)/g,r=[],i=0;e=n.exec(t);){if(e.index!==i)return[];i=e.index+e[0].length;var o=e[1],a=oo[o];if(!a)return[];var s=e[2].split(","),l=a[0];if(l.length<s.length)return[];for(var u=[],c=0;c<l.length;c++){var h=s[c],d=l[c],f=void 0;if(void 0===(f=h?{A:function(t){return"0"===t.trim()?jr:Ti(t)},N:ki,T:Ei,L:xi}[d.toUpperCase()](h):{a:jr,n:u[0],t:Wr}[d]))return[];u.push(f)}if(r.push({t:o,d:u}),n.lastIndex===t.length)return r}return[]}function so(t){if("none"===(t=(t||"none").toLowerCase().trim()))return[];for(var e,n=/\s*(\w+)\(([^)]*)\)/g,r=[],i=0;e=n.exec(t);){if(e.index!==i)return[];i=e.index+e[0].length;var o=e[1],a=oo[o];if(!a)return[];var s=e[2].split(","),l=a[0];if(l.length<s.length)return[];for(var u=[],c=0;c<l.length;c++){var h=s[c],d=l[c],f=void 0;if(void 0===(f=h?{A:function(t){return"0"===t.trim()?jr:Si(t)},N:Pi,T:bi,L:wi}[d.toUpperCase()](h):{a:jr,n:u[0],t:Wr}[d]))return[];u.push(f)}if(r.push({t:o,d:u}),n.lastIndex===t.length)return r}return[]}function lo(t){var e,n,r,i;switch(t.t){case"rotatex":return i=Xn(_i(t.d[0])),[1,0,0,0,0,Math.cos(i),Math.sin(i),0,0,-Math.sin(i),Math.cos(i),0,0,0,0,1];case"rotatey":return i=Xn(_i(t.d[0])),[Math.cos(i),0,-Math.sin(i),0,0,1,0,0,Math.sin(i),0,Math.cos(i),0,0,0,0,1];case"rotate":case"rotatez":return i=Xn(_i(t.d[0])),[Math.cos(i),Math.sin(i),0,0,-Math.sin(i),Math.cos(i),0,0,0,0,1,0,0,0,0,1];case"rotate3d":e=t.d[0].value,n=t.d[1].value,r=t.d[2].value,i=Xn(_i(t.d[3]));var o=e*e+n*n+r*r;if(0===o)e=1,n=0,r=0;else if(1!==o){var a=Math.sqrt(o);e/=a,n/=a,r/=a}var s=Math.sin(i/2),l=s*Math.cos(i/2),u=s*s;return[1-2*(n*n+r*r)*u,2*(e*n*u+r*l),2*(e*r*u-n*l),0,2*(e*n*u-r*l),1-2*(e*e+r*r)*u,2*(n*r*u+e*l),0,2*(e*r*u+n*l),2*(n*r*u-e*l),1-2*(e*e+n*n)*u,0,0,0,0,1];case"scale":return[t.d[0].value,0,0,0,0,t.d[1].value,0,0,0,0,1,0,0,0,0,1];case"scalex":return[t.d[0].value,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];case"scaley":return[1,0,0,0,0,t.d[0].value,0,0,0,0,1,0,0,0,0,1];case"scalez":return[1,0,0,0,0,1,0,0,0,0,t.d[0].value,0,0,0,0,1];case"scale3d":return[t.d[0].value,0,0,0,0,t.d[1].value,0,0,0,0,t.d[2].value,0,0,0,0,1];case"skew":var c=Xn(_i(t.d[0])),h=Xn(_i(t.d[1]));return[1,Math.tan(h),0,0,Math.tan(c),1,0,0,0,0,1,0,0,0,0,1];case"skewx":return i=Xn(_i(t.d[0])),[1,0,0,0,Math.tan(i),1,0,0,0,0,1,0,0,0,0,1];case"skewy":return i=Xn(_i(t.d[0])),[1,Math.tan(i),0,0,0,1,0,0,0,0,1,0,0,0,0,1];case"translate":return[1,0,0,0,0,1,0,0,0,0,1,0,e=Oi(t.d[0],0,null)||0,n=Oi(t.d[1],0,null)||0,0,1];case"translatex":return[1,0,0,0,0,1,0,0,0,0,1,0,e=Oi(t.d[0],0,null)||0,0,0,1];case"translatey":return[1,0,0,0,0,1,0,0,0,0,1,0,0,n=Oi(t.d[0],0,null)||0,0,1];case"translatez":return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,r=Oi(t.d[0],0,null)||0,1];case"translate3d":return[1,0,0,0,0,1,0,0,0,0,1,0,e=Oi(t.d[0],0,null)||0,n=Oi(t.d[1],0,null)||0,r=Oi(t.d[2],0,null)||0,1];case"perspective":var d=Oi(t.d[0],0,null)||0;return[1,0,0,0,0,1,0,0,0,0,1,d?-1/d:0,0,0,0,1];case"matrix":return[t.d[0].value,t.d[1].value,0,0,t.d[2].value,t.d[3].value,0,0,0,0,1,0,t.d[4].value,t.d[5].value,0,1];case"matrix3d":return t.d.map((function(t){return t.value}))}}function uo(t,e){return[t[0]*e[0]+t[4]*e[1]+t[8]*e[2]+t[12]*e[3],t[1]*e[0]+t[5]*e[1]+t[9]*e[2]+t[13]*e[3],t[2]*e[0]+t[6]*e[1]+t[10]*e[2]+t[14]*e[3],t[3]*e[0]+t[7]*e[1]+t[11]*e[2]+t[15]*e[3],t[0]*e[4]+t[4]*e[5]+t[8]*e[6]+t[12]*e[7],t[1]*e[4]+t[5]*e[5]+t[9]*e[6]+t[13]*e[7],t[2]*e[4]+t[6]*e[5]+t[10]*e[6]+t[14]*e[7],t[3]*e[4]+t[7]*e[5]+t[11]*e[6]+t[15]*e[7],t[0]*e[8]+t[4]*e[9]+t[8]*e[10]+t[12]*e[11],t[1]*e[8]+t[5]*e[9]+t[9]*e[10]+t[13]*e[11],t[2]*e[8]+t[6]*e[9]+t[10]*e[10]+t[14]*e[11],t[3]*e[8]+t[7]*e[9]+t[11]*e[10]+t[15]*e[11],t[0]*e[12]+t[4]*e[13]+t[8]*e[14]+t[12]*e[15],t[1]*e[12]+t[5]*e[13]+t[9]*e[14]+t[13]*e[15],t[2]*e[12]+t[6]*e[13]+t[10]*e[14]+t[14]*e[15],t[3]*e[12]+t[7]*e[13]+t[11]*e[14]+t[15]*e[15]]}function co(t){var e=[0,0,0],n=[1,1,1],r=[0,0,0],i=[0,0,0,1],o=[0,0,0,1];return function(t,e,n,r,i,o){if(!function(t,e){var n=e[15];if(0===n)return!1;for(var r=1/n,i=0;i<16;i++)t[i]=e[i]*r;return!0}(Qn,t))return!1;if(H(Jn,Qn),Jn[3]=0,Jn[7]=0,Jn[11]=0,Jn[15]=1,Math.abs(U(Jn))<1e-8)return!1;var a,s,l=Qn[3],u=Qn[7],c=Qn[11],h=Qn[12],d=Qn[13],f=Qn[14],p=Qn[15];if(0!==l||0!==u||0!==c){if(tr[0]=l,tr[1]=u,tr[2]=c,tr[3]=p,!V(Jn,Jn))return!1;W(Jn,Jn),It(i,tr,Jn)}else i[0]=i[1]=i[2]=0,i[3]=1;if(e[0]=h,e[1]=d,e[2]=f,s=Qn,(a=er)[0][0]=s[0],a[0][1]=s[1],a[0][2]=s[2],a[1][0]=s[4],a[1][1]=s[5],a[1][2]=s[6],a[2][0]=s[8],a[2][1]=s[9],a[2][2]=s[10],n[0]=gt(er[0]),Et(er[0],er[0]),r[0]=St(er[0],er[1]),rr(er[1],er[1],er[0],1,-r[0]),n[1]=gt(er[1]),Et(er[1],er[1]),r[0]/=n[1],r[1]=St(er[0],er[2]),rr(er[2],er[2],er[0],1,-r[1]),r[2]=St(er[1],er[2]),rr(er[2],er[2],er[1],1,-r[2]),n[2]=gt(er[2]),Et(er[2],er[2]),r[1]/=n[2],r[2]/=n[2],Tt(nr,er[1],er[2]),St(er[0],nr)<0)for(var v=0;v<3;v++)n[v]*=-1,er[v][0]*=-1,er[v][1]*=-1,er[v][2]*=-1;o[0]=.5*Math.sqrt(Math.max(1+er[0][0]-er[1][1]-er[2][2],0)),o[1]=.5*Math.sqrt(Math.max(1-er[0][0]+er[1][1]-er[2][2],0)),o[2]=.5*Math.sqrt(Math.max(1-er[0][0]-er[1][1]+er[2][2],0)),o[3]=.5*Math.sqrt(Math.max(1+er[0][0]+er[1][1]+er[2][2],0)),er[2][1]>er[1][2]&&(o[0]=-o[0]),er[0][2]>er[2][0]&&(o[1]=-o[1]),er[1][0]>er[0][1]&&(o[2]=-o[2])}(function(t){return 0===t.length?[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]:t.map(lo).reduce(uo)}(t),e,n,r,i,o),[[e,n,r,o,i]]}var ho=function(){function t(t,e){for(var n=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],r=0;r<4;r++)for(var i=0;i<4;i++)for(var o=0;o<4;o++)n[r][i]+=e[r][o]*t[o][i];return n}return function(e,n,r,i,o){for(var a=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],s=0;s<4;s++)a[s][3]=o[s];for(s=0;s<3;s++)for(var l=0;l<3;l++)a[3][s]+=e[l]*a[l][s];var u=i[0],c=i[1],h=i[2],d=i[3],f=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];f[0][0]=1-2*(c*c+h*h),f[0][1]=2*(u*c-h*d),f[0][2]=2*(u*h+c*d),f[1][0]=2*(u*c+h*d),f[1][1]=1-2*(u*u+h*h),f[1][2]=2*(c*h-u*d),f[2][0]=2*(u*h-c*d),f[2][1]=2*(c*h+u*d),f[2][2]=1-2*(u*u+c*c),a=t(a,f);var p,v=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];for(r[2]&&(v[2][1]=r[2],a=t(a,v)),r[1]&&(v[2][1]=0,v[2][0]=r[0],a=t(a,v)),r[0]&&(v[2][0]=0,v[1][0]=r[0],a=t(a,v)),s=0;s<3;s++)for(l=0;l<3;l++)a[s][l]*=n[s];return 0==(p=a)[0][2]&&0==p[0][3]&&0==p[1][2]&&0==p[1][3]&&0==p[2][0]&&0==p[2][1]&&1==p[2][2]&&0==p[2][3]&&0==p[3][2]&&1==p[3][3]?[a[0][0],a[0][1],a[1][0],a[1][1],a[3][0],a[3][1]]:a[0].concat(a[1],a[2],a[3])}}();function fo(t){return t.toFixed(6).replace(".000000","")}function po(t,e){var n,r;return t.decompositionPair!==e&&(t.decompositionPair=e,n=co(t)),e.decompositionPair!==t&&(e.decompositionPair=t,r=co(e)),null===n[0]||null===r[0]?[[!1],[!0],function(n){return n?e[0].d:t[0].d}]:(n[0].push(0),r[0].push(1),[n,r,function(t){var e=function(t,e,n){var r=function(t,e){for(var n=0,r=0;r<t.length;r++)n+=t[r]*e[r];return n}(t,e);r=Zt(r,-1,1);var i=[];if(1===r)i=t;else for(var o=Math.acos(r),a=1*Math.sin(n*o)/Math.sqrt(1-r*r),s=0;s<4;s++)i.push(t[s]*(Math.cos(n*o)-r*a)+e[s]*a);return i}(n[0][3],r[0][3],t[5]);return ho(t[0],t[1],t[2],e,t[4]).map(fo).join(",")}])}function vo(t){return t.replace(/[xy]/,"")}function go(t){return t.replace(/(x|y|z|3d)?$/,"3d")}function yo(t,e,n){var r=!1;if(!t.length||!e.length){t.length||(r=!0,t=e,e=[]);for(var i=function(n){var r=t[n],i=r.t,o=r.d,a="scale"===i.substring(0,5)?1:0;e.push({t:i,d:o.map((function(t){return"number"==typeof t?ei(a):ei(a,t.unit)}))})},o=0;o<t.length;o++)i(o)}var a,s,l=[],u=[],c=[];if(t.length!==e.length)l=[(m=po(t,e))[0]],u=[m[1]],c=[["matrix",[m[2]]]];else for(o=0;o<t.length;o++){var h=t[o].t,d=e[o].t,f=t[o].d,p=e[o].d,v=oo[h],g=oo[d],y=void 0;if(s=d,"perspective"===(a=h)&&"perspective"===s||!("matrix"!==a&&"matrix3d"!==a||"matrix"!==s&&"matrix3d"!==s)){var m=po([t[o]],[e[o]]);l.push(m[0]),u.push(m[1]),c.push(["matrix",[m[2]]])}else{if(h===d)y=h;else if(v[2]&&g[2]&&vo(h)===vo(d))y=vo(h),f=v[2](f),p=g[2](p);else{if(!v[1]||!g[1]||go(h)!==go(d)){l=[(m=po(t,e))[0]],u=[m[1]],c=[["matrix",[m[2]]]];break}y=go(h),f=v[1](f),p=g[1](p)}for(var C=[],w=[],x=[],b=0;b<f.length;b++){m=Li(f[b],p[b],n,!1,b);C[b]=m[0],w[b]=m[1],x.push(m[2])}l.push(C),u.push(w),c.push([y,x])}}if(r){var E=l;l=u,u=E}return[l,u,function(t){return t.map((function(t,e){var n=t.map((function(t,n){return c[e][1][n](t)})).join(",");return"matrix"===c[e][0]&&16===n.split(",").length&&(c[e][0]="matrix3d"),"matrix3d"===c[e][0]&&6===n.split(",").length&&(c[e][0]="matrix"),c[e][0]+"("+n+")"})).join(" ")}]}var mo=Er((function(t){if(Kt(t)){if("text-anchor"===t)return[ei(0,"px"),ei(0,"px")];var e=t.split(" ");return 1===e.length&&("top"===e[0]||"bottom"===e[0]?(e[1]=e[0],e[0]="center"):e[1]="center"),2!==e.length?null:[Ei(wo(e[0])),Ei(wo(e[1]))]}return[ei(t[0]||0,"px"),ei(t[1]||0,"px")]})),Co=function(t){if(Kt(t)){if("text-anchor"===t)return[ei(0,"px"),ei(0,"px")];var e=t.split(" ");return 1===e.length&&("top"===e[0]||"bottom"===e[0]?(e[1]=e[0],e[0]="center"):e[1]="center"),2!==e.length?null:[bi(wo(e[0])),bi(wo(e[1]))]}return[ei(t[0]||0,"px"),ei(t[1]||0,"px")]};function wo(t){return"center"===t?"50%":"left"===t||"top"===t?"0":"right"===t||"bottom"===t?"100%":t}var xo=[{n:"display",k:["none"]},{n:"opacity",int:!0,inh:!0,d:"1",syntax:ri.OPACITY_VALUE},{n:"fillOpacity",int:!0,inh:!0,d:"1",syntax:ri.OPACITY_VALUE},{n:"strokeOpacity",int:!0,inh:!0,d:"1",syntax:ri.OPACITY_VALUE},{n:"fill",int:!0,k:["none"],d:"none",syntax:ri.PAINT},{n:"fillRule",k:["nonzero","evenodd"],d:"nonzero"},{n:"stroke",int:!0,k:["none"],d:"none",syntax:ri.PAINT,l:!0},{n:"shadowType",k:["inner","outer","both"],d:"outer",l:!0},{n:"shadowColor",int:!0,syntax:ri.COLOR},{n:"shadowOffsetX",int:!0,l:!0,d:"0",syntax:ri.LENGTH_PERCENTAGE},{n:"shadowOffsetY",int:!0,l:!0,d:"0",syntax:ri.LENGTH_PERCENTAGE},{n:"shadowBlur",int:!0,l:!0,d:"0",syntax:ri.SHADOW_BLUR},{n:"lineWidth",int:!0,inh:!0,d:"1",l:!0,a:["strokeWidth"],syntax:ri.LENGTH_PERCENTAGE},{n:"increasedLineWidthForHitTesting",inh:!0,d:"0",l:!0,syntax:ri.LENGTH_PERCENTAGE},{n:"lineJoin",inh:!0,l:!0,a:["strokeLinejoin"],k:["miter","bevel","round"],d:"miter"},{n:"lineCap",inh:!0,l:!0,a:["strokeLinecap"],k:["butt","round","square"],d:"butt"},{n:"lineDash",int:!0,inh:!0,k:["none"],a:["strokeDasharray"],syntax:ri.LENGTH_PERCENTAGE_12},{n:"lineDashOffset",int:!0,inh:!0,d:"0",a:["strokeDashoffset"],syntax:ri.LENGTH_PERCENTAGE},{n:"offsetPath",syntax:ri.DEFINED_PATH},{n:"offsetDistance",int:!0,syntax:ri.OFFSET_DISTANCE},{n:"dx",int:!0,l:!0,d:"0",syntax:ri.LENGTH_PERCENTAGE},{n:"dy",int:!0,l:!0,d:"0",syntax:ri.LENGTH_PERCENTAGE},{n:"zIndex",ind:!0,int:!0,d:"0",k:["auto"],syntax:ri.Z_INDEX},{n:"visibility",k:["visible","hidden"],ind:!0,inh:!0,int:!0,d:"visible"},{n:"pointerEvents",inh:!0,k:["none","auto","stroke","fill","painted","visible","visiblestroke","visiblefill","visiblepainted","all"],d:"auto"},{n:"filter",ind:!0,l:!0,k:["none"],d:"none",syntax:ri.FILTER},{n:"clipPath",syntax:ri.DEFINED_PATH},{n:"textPath",syntax:ri.DEFINED_PATH},{n:"textPathSide",k:["left","right"],d:"left"},{n:"textPathStartOffset",l:!0,d:"0",syntax:ri.LENGTH_PERCENTAGE},{n:"transform",p:100,int:!0,k:["none"],d:"none",syntax:ri.TRANSFORM},{n:"transformOrigin",p:100,d:function(t){return t===Bn.CIRCLE||t===Bn.ELLIPSE?"center":t===Bn.TEXT?"text-anchor":"left top"},l:!0,syntax:ri.TRANSFORM_ORIGIN},{n:"anchor",p:99,d:function(t){return t===Bn.CIRCLE||t===Bn.ELLIPSE?"0.5 0.5":"0 0"},l:!0,syntax:ri.LENGTH_PERCENTAGE_12},{n:"cx",int:!0,d:"0",syntax:ri.COORDINATE},{n:"cy",int:!0,d:"0",syntax:ri.COORDINATE},{n:"cz",int:!0,d:"0",syntax:ri.COORDINATE},{n:"r",int:!0,l:!0,d:"0",syntax:ri.LENGTH_PERCENTAGE},{n:"rx",int:!0,l:!0,d:"0",syntax:ri.LENGTH_PERCENTAGE},{n:"ry",int:!0,l:!0,d:"0",syntax:ri.LENGTH_PERCENTAGE},{n:"x",int:!0,d:"0",syntax:ri.COORDINATE},{n:"y",int:!0,d:"0",syntax:ri.COORDINATE},{n:"z",int:!0,d:"0",syntax:ri.COORDINATE},{n:"width",int:!0,l:!0,k:["auto","fit-content","min-content","max-content"],d:"0",syntax:ri.LENGTH_PERCENTAGE},{n:"height",int:!0,l:!0,k:["auto","fit-content","min-content","max-content"],d:"0",syntax:ri.LENGTH_PERCENTAGE},{n:"radius",int:!0,l:!0,d:"0",syntax:ri.LENGTH_PERCENTAGE_14},{n:"x1",int:!0,l:!0,syntax:ri.COORDINATE},{n:"y1",int:!0,l:!0,syntax:ri.COORDINATE},{n:"z1",int:!0,l:!0,syntax:ri.COORDINATE},{n:"x2",int:!0,l:!0,syntax:ri.COORDINATE},{n:"y2",int:!0,l:!0,syntax:ri.COORDINATE},{n:"z2",int:!0,l:!0,syntax:ri.COORDINATE},{n:"path",int:!0,l:!0,d:"",a:["d"],syntax:ri.PATH,p:50},{n:"points",int:!0,l:!0,syntax:ri.LIST_OF_POINTS,p:50},{n:"text",l:!0,d:"",syntax:ri.TEXT,p:50},{n:"textTransform",l:!0,inh:!0,k:["capitalize","uppercase","lowercase","none"],d:"none",syntax:ri.TEXT_TRANSFORM,p:51},{n:"font",l:!0},{n:"fontSize",int:!0,inh:!0,d:"16px",l:!0,syntax:ri.LENGTH_PERCENTAGE},{n:"fontFamily",l:!0,inh:!0,d:"sans-serif"},{n:"fontStyle",l:!0,inh:!0,k:["normal","italic","oblique"],d:"normal"},{n:"fontWeight",l:!0,inh:!0,k:["normal","bold","bolder","lighter"],d:"normal"},{n:"fontVariant",l:!0,inh:!0,k:["normal","small-caps"],d:"normal"},{n:"lineHeight",l:!0,syntax:ri.LENGTH,int:!0,d:"0"},{n:"letterSpacing",l:!0,syntax:ri.LENGTH,int:!0,d:"0"},{n:"miterLimit",l:!0,syntax:ri.NUMBER,d:function(t){return t===Bn.PATH||t===Bn.POLYGON||t===Bn.POLYLINE?"4":"10"}},{n:"wordWrap",l:!0},{n:"wordWrapWidth",l:!0},{n:"maxLines",l:!0},{n:"textOverflow",l:!0,d:"clip"},{n:"leading",l:!0},{n:"textBaseline",l:!0,inh:!0,k:["top","hanging","middle","alphabetic","ideographic","bottom"],d:"alphabetic"},{n:"textAlign",l:!0,inh:!0,k:["start","center","middle","end","left","right"],d:"start"},{n:"markerStart",syntax:ri.MARKER},{n:"markerEnd",syntax:ri.MARKER},{n:"markerMid",syntax:ri.MARKER},{n:"markerStartOffset",syntax:ri.LENGTH,l:!0,int:!0,d:"0"},{n:"markerEndOffset",syntax:ri.LENGTH,l:!0,int:!0,d:"0"}],bo=xo.filter((function(t){return!!t.l})).map((function(t){return t.n})),Eo={},So=new WeakMap,To=function(){function t(t){var e=this;this.runtime=t,xo.forEach((function(t){e.registerMetadata(t)}))}return t.prototype.registerMetadata=function(t){O([t.n],R(t.a||[]),!1).forEach((function(e){Eo[e]=t}))},t.prototype.unregisterMetadata=function(t){delete Eo[t]},t.prototype.getPropertySyntax=function(t){return this.runtime.CSSPropertySyntaxFactory[t]},t.prototype.processProperties=function(t,e,n){var r=this;if(void 0===n&&(n={skipUpdateAttribute:!1,skipParse:!1,forceUpdateGeometry:!1,usedAttributes:[],memoize:!0}),!this.runtime.enableCSSParsing){Object.assign(t.attributes,e);var i=Object.keys(e),o=t.parsedStyle.clipPath,a=t.parsedStyle.offsetPath;t.parsedStyle=Object.assign(t.parsedStyle,e);var s=!!n.forceUpdateGeometry;if(!s)for(var l=0;l<bo.length;l++)if(bo[l]in e){s=!0;break}return e.fill&&(t.parsedStyle.fill=yi(e.fill)),e.stroke&&(t.parsedStyle.stroke=yi(e.stroke)),e.shadowColor&&(t.parsedStyle.shadowColor=yi(e.shadowColor)),e.filter&&(t.parsedStyle.filter=Ii(e.filter)),Wt(e.radius)||(t.parsedStyle.radius=Mi(e.radius,4)),Wt(e.lineDash)||(t.parsedStyle.lineDash=Mi(e.lineDash,2)),e.points&&(t.parsedStyle.points=to(e.points,t)),""===e.path&&(t.parsedStyle.path=S({},ii)),e.path&&(t.parsedStyle.path=Qi(e.path),t.parsedStyle.defX=t.parsedStyle.path.rect.x,t.parsedStyle.defY=t.parsedStyle.path.rect.y),e.textTransform&&this.runtime.CSSPropertySyntaxFactory["<text-transform>"].calculator(null,null,{value:e.textTransform},t,null),e.clipPath&&this.runtime.CSSPropertySyntaxFactory["<defined-path>"].calculator("clipPath",o,e.clipPath,t,this.runtime),e.offsetPath&&this.runtime.CSSPropertySyntaxFactory["<defined-path>"].calculator("offsetPath",a,e.offsetPath,t,this.runtime),e.anchor&&(t.parsedStyle.anchor=Mi(e.anchor,2)),e.transform&&(t.parsedStyle.transform=ao(e.transform)),e.transformOrigin&&(t.parsedStyle.transformOrigin=mo(e.transformOrigin)),e.markerStart&&(t.parsedStyle.markerStart=this.runtime.CSSPropertySyntaxFactory["<marker>"].calculator(null,e.markerStart,e.markerStart,null,null)),e.markerEnd&&(t.parsedStyle.markerEnd=this.runtime.CSSPropertySyntaxFactory["<marker>"].calculator(null,e.markerEnd,e.markerEnd,null,null)),e.markerMid&&(t.parsedStyle.markerMid=this.runtime.CSSPropertySyntaxFactory["<marker>"].calculator("",e.markerMid,e.markerMid,null,null)),(t.nodeName!==Bn.CIRCLE&&t.nodeName!==Bn.ELLIPSE||Wt(e.cx)&&Wt(e.cy))&&(t.nodeName!==Bn.RECT&&t.nodeName!==Bn.IMAGE&&t.nodeName!==Bn.GROUP&&t.nodeName!==Bn.HTML&&t.nodeName!==Bn.TEXT&&t.nodeName!==Bn.MESH||Wt(e.x)&&Wt(e.y)&&Wt(e.z))&&(t.nodeName!==Bn.LINE||Wt(e.x1)&&Wt(e.y1)&&Wt(e.z1)&&Wt(e.x2)&&Wt(e.y2)&&Wt(e.z2))||this.runtime.CSSPropertySyntaxFactory["<coordinate>"].postProcessor(t,i),Wt(e.zIndex)||this.runtime.CSSPropertySyntaxFactory["<z-index>"].postProcessor(t,i),e.path&&this.runtime.CSSPropertySyntaxFactory["<path>"].postProcessor(t,i),e.points&&this.runtime.CSSPropertySyntaxFactory["<list-of-points>"].postProcessor(t,i),Wt(e.offsetDistance)||this.runtime.CSSPropertySyntaxFactory["<offset-distance>"].postProcessor(t,i),e.transform&&this.runtime.CSSPropertySyntaxFactory["<transform>"].postProcessor(t,i),void(s&&this.updateGeometry(t))}var u=n.skipUpdateAttribute,c=n.skipParse,h=n.forceUpdateGeometry,d=n.usedAttributes,f=n.memoize,p=h,v=Object.keys(e);v.forEach((function(n){var r;u||(t.attributes[n]=e[n]),!p&&(null===(r=Eo[n])||void 0===r?void 0:r.l)&&(p=!0)})),c||v.forEach((function(e){t.computedStyle[e]=r.parseProperty(e,t.attributes[e],t,f)})),(null==d?void 0:d.length)&&(v=Array.from(new Set(v.concat(d)))),v.forEach((function(e){e in t.computedStyle&&(t.parsedStyle[e]=r.computeProperty(e,t.computedStyle[e],t,f))})),p&&this.updateGeometry(t),v.forEach((function(e){e in t.parsedStyle&&r.postProcessProperty(e,t,v)})),this.runtime.enableCSSParsing&&t.children.length&&v.forEach((function(e){e in t.parsedStyle&&r.isPropertyInheritable(e)&&t.children.forEach((function(t){t.internalSetAttribute(e,null,{skipUpdateAttribute:!0,skipParse:!0})}))}))},t.prototype.parseProperty=function(t,e,n,r){var i=Eo[t],o=e;if((""===e||Wt(e))&&(e="unset"),"unset"===e||"initial"===e||"inherit"===e)o=$r(e);else if(i){var a=i.k,s=i.syntax,l=s&&this.getPropertySyntax(s);a&&a.indexOf(e)>-1?o=$r(e):l&&(!r&&l.parserUnmemoize?o=l.parserUnmemoize(e,n):l.parser&&(o=l.parser(e,n)))}return o},t.prototype.computeProperty=function(t,e,n,r){var i=Eo[t],o="g-root"===n.id,a=e;if(i){var s=i.syntax,l=i.inh,u=i.d;if(e instanceof Ar){var c=e.value;if("unset"===c&&(c=l&&!o?"inherit":"initial"),"initial"===c)Wt(u)||(e=this.parseProperty(t,Br(u)?u(n.nodeName):u,n,r));else if("inherit"===c){var h=this.tryToResolveProperty(n,t,{inherited:!0});return Wt(h)?void this.addUnresolveProperty(n,t):h}}var d=s&&this.getPropertySyntax(s);if(d&&d.calculator){var f=n.parsedStyle[t];a=d.calculator(t,f,e,n,this.runtime)}else a=e instanceof Ar?e.value:e}return a},t.prototype.postProcessProperty=function(t,e,n){var r=Eo[t];if(r&&r.syntax){var i=r.syntax&&this.getPropertySyntax(r.syntax);i&&i.postProcessor&&i.postProcessor(e,n)}},t.prototype.addUnresolveProperty=function(t,e){var n=So.get(t);n||(So.set(t,[]),n=So.get(t)),-1===n.indexOf(e)&&n.push(e)},t.prototype.tryToResolveProperty=function(t,e,n){if(void 0===n&&(n={}),n.inherited&&t.parentElement&&function(t,e){var n=So.get(t);return!n||0===n.length||n.includes(e)}(t.parentElement,e)){var r=t.parentElement.parsedStyle[e];if("unset"===r||"initial"===r||"inherit"===r)return;return r}},t.prototype.recalc=function(t){var e=So.get(t);if(e&&e.length){var n={};e.forEach((function(e){n[e]=t.attributes[e]})),this.processProperties(t,n),So.delete(t)}},t.prototype.updateGeometry=function(t){var e=t.nodeName,n=this.runtime.geometryUpdaterFactory[e];if(n){var r=t.geometry;r.contentBounds||(r.contentBounds=new or),r.renderBounds||(r.renderBounds=new or);var i=t.parsedStyle,o=n.update(i,t),a=o.width,s=o.height,l=o.depth,u=void 0===l?0:l,c=o.offsetX,h=void 0===c?0:c,d=o.offsetY,f=void 0===d?0:d,p=o.offsetZ,v=void 0===p?0:p,g=[Math.abs(a)/2,Math.abs(s)/2,u/2],y=i,m=y.stroke,C=y.lineWidth,w=y.increasedLineWidthForHitTesting,x=y.shadowType,b=y.shadowColor,E=y.filter,S=void 0===E?[]:E,T=y.transformOrigin,L=i.anchor;e===Bn.TEXT?delete i.anchor:e===Bn.MESH&&(i.anchor[2]=.5);var _=[(1-2*(L&&L[0]||0))*a/2+h,(1-2*(L&&L[1]||0))*s/2+f,(1-2*(L&&L[2]||0))*g[2]+v];r.contentBounds.update(_,g);var M=e===Bn.POLYLINE||e===Bn.POLYGON||e===Bn.PATH?Math.SQRT2:.5;if(m&&!m.isNone){var R=((C||0)+(w||0))*M;g[0]+=R,g[1]+=R}if(r.renderBounds.update(_,g),b&&x&&"inner"!==x){var O=r.renderBounds,N=O.min,I=O.max,A=i,P=A.shadowBlur||0,k=A.shadowOffsetX||0,B=A.shadowOffsetY||0,D=N[0]-P+k,F=I[0]+P+k,H=N[1]-P+B,z=I[1]+P+B;N[0]=Math.min(N[0],D),I[0]=Math.max(I[0],F),N[1]=Math.min(N[1],H),I[1]=Math.max(I[1],z),r.renderBounds.setMinMax(N,I)}S.forEach((function(t){var e=t.name,n=t.params;if("blur"===e){var i=n[0].value;r.renderBounds.update(r.renderBounds.center,Vn(r.renderBounds.halfExtents,r.renderBounds.halfExtents,[i,i,0]))}else if("drop-shadow"===e){var o=n[0].value,a=n[1].value,s=n[2].value,l=r.renderBounds,u=l.min,c=l.max,h=u[0]-s+o,d=c[0]+s+o,f=u[1]-s+a,p=c[1]+s+a;u[0]=Math.min(u[0],h),c[0]=Math.max(c[0],d),u[1]=Math.min(u[1],f),c[1]=Math.max(c[1],p),r.renderBounds.setMinMax(u,c)}})),L=i.anchor;var G=a<0,W=s<0,V=(G?-1:1)*(T?Oi(T[0],0,t):0),U=(W?-1:1)*(T?Oi(T[1],1,t):0);V-=(G?-1:1)*(L&&L[0]||0)*r.contentBounds.halfExtents[0]*2,U-=(W?-1:1)*(L&&L[1]||0)*r.contentBounds.halfExtents[1]*2,t.setOrigin(V,U),this.runtime.sceneGraphService.dirtifyToRoot(t)}},t.prototype.updateSizeAttenuation=function(t,e){t.style.isSizeAttenuation?(t.style.rawLineWidth||(t.style.rawLineWidth=t.style.lineWidth),t.style.lineWidth=t.style.rawLineWidth/e,t.nodeName===Bn.CIRCLE&&(t.style.rawR||(t.style.rawR=t.style.r),t.style.r=t.style.rawR/e)):(t.style.rawLineWidth&&(t.style.lineWidth=t.style.rawLineWidth,delete t.style.rawLineWidth),t.nodeName===Bn.CIRCLE&&t.style.rawR&&(t.style.r=t.style.rawR,delete t.style.rawR))},t.prototype.isPropertyInheritable=function(t){var e=Eo[t];return!!e&&e.inh},t}(),Lo=function(){function t(){this.parser=Ti,this.parserUnmemoize=Si,this.parserWithCSSDisabled=null,this.mixer=Bi}return t.prototype.calculator=function(t,e,n,r){return _i(n)},t}(),_o=function(){function t(){}return t.prototype.calculator=function(t,e,n,r,i){return n instanceof Ar&&(n=null),i.sceneGraphService.updateDisplayObjectDependency(t,e,n,r),"clipPath"===t&&r.forEach((function(t){0===t.childNodes.length&&i.sceneGraphService.dirtifyToRoot(t)})),n},t}(),Mo=function(){function t(){this.parser=yi,this.parserWithCSSDisabled=yi,this.mixer=mi}return t.prototype.calculator=function(t,e,n,r){return n instanceof Ar?"none"===n.value?Qr:Jr:n},t}(),Ro=function(){function t(){this.parser=Ii}return t.prototype.calculator=function(t,e,n){return n instanceof Ar?[]:n},t}();function Oo(t){var e=t.parsedStyle.fontSize;return Wt(e)?null:e}var No=function(){function t(){this.parser=Ei,this.parserUnmemoize=bi,this.parserWithCSSDisabled=null,this.mixer=Bi}return t.prototype.calculator=function(t,e,n,r,i){var o;if($t(n))return n;if(!Gr.isRelativeUnit(n.unit))return n.value;var a=i.styleValueRegistry;if(n.unit===vr.kPercentage)return 0;if(n.unit===vr.kEms){if(r.parentNode){if(s=Oo(r.parentNode))return s*=n.value;a.addUnresolveProperty(r,t)}else a.addUnresolveProperty(r,t);return 0}if(n.unit===vr.kRems){if(null===(o=null==r?void 0:r.ownerDocument)||void 0===o?void 0:o.documentElement){var s;if(s=Oo(r.ownerDocument.documentElement))return s*=n.value;a.addUnresolveProperty(r,t)}else a.addUnresolveProperty(r,t);return 0}},t}(),Io=function(){function t(){this.mixer=Fi}return t.prototype.parser=function(t){var e=Ri($t(t)?[t]:t);return 1===e.length?[e[0],e[0]]:[e[0],e[1]]},t.prototype.calculator=function(t,e,n){return n.map((function(t){return t.value}))},t}(),Ao=function(){function t(){this.mixer=Fi}return t.prototype.parser=function(t){var e=Ri($t(t)?[t]:t);return 1===e.length?[e[0],e[0],e[0],e[0]]:2===e.length?[e[0],e[1],e[0],e[1]]:3===e.length?[e[0],e[1],e[2],e[1]]:[e[0],e[1],e[2],e[3]]},t.prototype.calculator=function(t,e,n){return n.map((function(t){return t.value}))},t}(),Po=D();function ko(t,e){var n=e.parsedStyle.defX||0,r=e.parsedStyle.defY||0;return e.resetLocalTransform(),e.setLocalPosition(n,r),t.forEach((function(t){var i=t.t,o=t.d;if("scale"===i){var a=(null==o?void 0:o.map((function(t){return t.value})))||[1,1];e.scaleLocal(a[0],a[1],1)}else if("scalex"===i){a=(null==o?void 0:o.map((function(t){return t.value})))||[1];e.scaleLocal(a[0],1,1)}else if("scaley"===i){a=(null==o?void 0:o.map((function(t){return t.value})))||[1];e.scaleLocal(1,a[0],1)}else if("scalez"===i){a=(null==o?void 0:o.map((function(t){return t.value})))||[1];e.scaleLocal(1,1,a[0])}else if("scale3d"===i){a=(null==o?void 0:o.map((function(t){return t.value})))||[1,1,1];e.scaleLocal(a[0],a[1],a[2])}else if("translate"===i){var s=o||[Wr,Wr];e.translateLocal(s[0].value,s[1].value,0)}else if("translatex"===i){s=o||[Wr];e.translateLocal(s[0].value,0,0)}else if("translatey"===i){s=o||[Wr];e.translateLocal(0,s[0].value,0)}else if("translatez"===i){s=o||[Wr];e.translateLocal(0,0,s[0].value)}else if("translate3d"===i){s=o||[Wr,Wr,Wr];e.translateLocal(s[0].value,s[1].value,s[2].value)}else if("rotate"===i){var l=o||[jr];e.rotateLocal(0,0,_i(l[0]))}else if("rotatex"===i){l=o||[jr];e.rotateLocal(_i(l[0]),0,0)}else if("rotatey"===i){l=o||[jr];e.rotateLocal(0,_i(l[0]),0)}else if("rotatez"===i){l=o||[jr];e.rotateLocal(0,0,_i(l[0]))}else if("rotate3d"===i);else if("skew"===i){var u=(null==o?void 0:o.map((function(t){return t.value})))||[0,0];e.setLocalSkew(Xn(u[0]),Xn(u[1]))}else if("skewx"===i){u=(null==o?void 0:o.map((function(t){return t.value})))||[0];e.setLocalSkew(Xn(u[0]),e.getLocalSkew()[1])}else if("skewy"===i){u=(null==o?void 0:o.map((function(t){return t.value})))||[0];e.setLocalSkew(e.getLocalSkew()[0],Xn(u[0]))}else if("matrix"===i){var c=R(o.map((function(t){return t.value})),6),h=c[0],d=c[1],f=c[2],p=c[3],v=c[4],g=c[5];e.setLocalTransform(z(Po,h,d,0,0,f,p,0,0,0,0,1,0,v+n,g+r,0,1))}else"matrix3d"===i&&(z.apply(ft,O([Po],R(o.map((function(t){return t.value}))),!1)),Po[12]+=n,Po[13]+=r,e.setLocalTransform(Po))})),e.getLocalTransform()}var Bo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return E(e,t),e.prototype.postProcessor=function(t,e){var n,r,i;switch(t.nodeName){case Bn.CIRCLE:case Bn.ELLIPSE:var o=t.parsedStyle,a=o.cx,s=o.cy,l=o.cz;Wt(a)||(n=a),Wt(s)||(r=s),Wt(l)||(i=l);break;case Bn.LINE:var u=t.parsedStyle,c=u.x1,h=u.x2,d=u.y1,f=u.y2;n=Math.min(c,h),r=Math.min(d,f),i=0;break;case Bn.RECT:case Bn.IMAGE:case Bn.GROUP:case Bn.HTML:case Bn.TEXT:case Bn.MESH:Wt(t.parsedStyle.x)||(n=t.parsedStyle.x),Wt(t.parsedStyle.y)||(r=t.parsedStyle.y),Wt(t.parsedStyle.z)||(i=t.parsedStyle.z)}if(t.nodeName!==Bn.PATH&&t.nodeName!==Bn.POLYLINE&&t.nodeName!==Bn.POLYGON&&(t.parsedStyle.defX=n||0,t.parsedStyle.defY=r||0),(!Wt(n)||!Wt(r)||!Wt(i))&&-1===e.indexOf("transform")){var p=t.parsedStyle.transform;if(p&&p.length)ko(p,t);else{var v=R(t.getLocalPosition(),3),g=v[0],y=v[1],m=v[2];t.setLocalPosition(Wt(n)?g:n,Wt(r)?y:r,Wt(i)?m:i)}}},e}(No),Do=function(){function t(){}return t.prototype.calculator=function(t,e,n,r){n instanceof Ar&&(n=null);var i=null==n?void 0:n.cloneNode(!0);return i&&(i.style.isMarker=!0),i},t}(),Fo=function(){function t(){this.mixer=Bi,this.parser=ki,this.parserUnmemoize=Pi,this.parserWithCSSDisabled=null}return t.prototype.calculator=function(t,e,n){return n.value},t}(),Ho=function(){function t(){this.parser=ki,this.parserUnmemoize=Pi,this.parserWithCSSDisabled=null,this.mixer=Di(0,1)}return t.prototype.calculator=function(t,e,n){return n.value},t.prototype.postProcessor=function(t){var e=t.parsedStyle,n=e.offsetPath,r=e.offsetDistance;if(n){var i=n.nodeName;if(i===Bn.LINE||i===Bn.PATH||i===Bn.POLYLINE){var o=n.getPoint(r);o&&(t.parsedStyle.defX=o.x,t.parsedStyle.defY=o.y,t.setLocalPosition(o.x,o.y))}}},t}(),zo=function(){function t(){this.parser=ki,this.parserUnmemoize=Pi,this.parserWithCSSDisabled=null,this.mixer=Di(0,1)}return t.prototype.calculator=function(t,e,n){return n.value},t}(),Go=function(){function t(){this.parser=Qi,this.parserWithCSSDisabled=Qi,this.mixer=Ji}return t.prototype.calculator=function(t,e,n){return n instanceof Ar&&"unset"===n.value?{absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:new dr(0,0,0,0)}:n},t.prototype.postProcessor=function(t,e){if(t.parsedStyle.defX=t.parsedStyle.path.rect.x,t.parsedStyle.defY=t.parsedStyle.path.rect.y,t.nodeName===Bn.PATH&&-1===e.indexOf("transform")){var n=t.parsedStyle,r=n.defX,i=void 0===r?0:r,o=n.defY,a=void 0===o?0:o;t.setLocalPosition(i,a)}},t}(),Wo=function(){function t(){this.parser=to,this.mixer=eo}return t.prototype.postProcessor=function(t,e){if((t.nodeName===Bn.POLYGON||t.nodeName===Bn.POLYLINE)&&-1===e.indexOf("transform")){var n=t.parsedStyle,r=n.defX,i=n.defY;t.setLocalPosition(r,i)}},t}(),Vo=function(t){function e(){var e=t.apply(this,O([],R(arguments),!1))||this;return e.mixer=Di(0,1/0),e}return E(e,t),e}(No),Uo=function(){function t(){}return t.prototype.calculator=function(t,e,n,r){return n instanceof Ar?"unset"===n.value?"":n.value:"".concat(n)},t.prototype.postProcessor=function(t){t.nodeValue="".concat(t.parsedStyle.text)||""},t}(),jo=function(){function t(){}return t.prototype.calculator=function(t,e,n,r){var i=r.getAttribute("text");if(i){var o=i;"capitalize"===n.value?o=i.charAt(0).toUpperCase()+i.slice(1):"lowercase"===n.value?o=i.toLowerCase():"uppercase"===n.value&&(o=i.toUpperCase()),r.parsedStyle.text=o}return n.value},t}(),Yo={},Xo=0;var qo="undefined"!=typeof window&&void 0!==window.document;function Ko(t){return!!t.getAttribute}function Zo(t,e){var n=Number(t.parsedStyle.zIndex),r=Number(e.parsedStyle.zIndex);if(n===r){var i=t.parentNode;if(i){var o=i.childNodes||[];return o.indexOf(t)-o.indexOf(e)}}return n-r}function $o(t){var e,n=t;do{if(null===(e=n.parsedStyle)||void 0===e?void 0:e.clipPath)return n;n=n.parentElement}while(null!==n);return null}function Qo(t,e){if(qo)return document.defaultView.getComputedStyle(t,null).getPropertyValue(e)}var Jo={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},ta="object"===("undefined"==typeof performance?"undefined":h(performance))&&performance.now?performance:Date;function ea(t,e,n){var r=!1,i=!1,o=!!e&&!e.isNone,a=!!n&&!n.isNone;return"visiblepainted"===t||"painted"===t||"auto"===t?(r=o,i=a):"visiblefill"===t||"fill"===t?r=!0:"visiblestroke"===t||"stroke"===t?i=!0:"visible"!==t&&"all"!==t||(r=!0,i=!0),[r,i]}var na=1,ra="object"===("undefined"==typeof self?"undefined":h(self))&&self.self==self?self:"object"===("undefined"==typeof global?"undefined":h(global))&&global.global==global?global:{},ia=Date.now(),oa={},aa=Date.now(),sa=function(t){if("function"!=typeof t)throw new TypeError(t+" is not a function");var e=Date.now(),n=e-aa,r=n>16?0:16-n,i=na++;return oa[i]=t,Object.keys(oa).length>1||setTimeout((function(){aa=e;var t=oa;oa={},Object.keys(t).forEach((function(e){return t[e](ra.performance&&"function"==typeof ra.performance.now?ra.performance.now():Date.now()-ia)}))}),r),i},la=function(t){delete oa[t]},ua=function(t){return"string"!=typeof t?sa:""===t?ra.requestAnimationFrame:ra[t+"RequestAnimationFrame"]},ca=function(t,e){for(var n=0;void 0!==t[n];){if(e(t[n]))return t[n];n+=1}}(["","webkit","moz","ms","o"],(function(t){return!!ua(t)})),ha=ua(ca),da=function(t){return"string"!=typeof t?la:""===t?ra.cancelAnimationFrame:ra[t+"CancelAnimationFrame"]||ra[t+"CancelRequestAnimationFrame"]}(ca);ra.requestAnimationFrame=ha,ra.cancelAnimationFrame=da;var fa=function(){function t(){this.callbacks=[]}return t.prototype.getCallbacksNum=function(){return this.callbacks.length},t.prototype.tapPromise=function(t,e){this.callbacks.push(e)},t.prototype.promise=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Promise.all(this.callbacks.map((function(e){return e.apply(void 0,O([],R(t),!1))})))},t}(),pa=function(){function t(){this.callbacks=[]}return t.prototype.tapPromise=function(t,e){this.callbacks.push(e)},t.prototype.promise=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return L(this,void 0,void 0,(function(){var e,n,r;return _(this,(function(i){switch(i.label){case 0:return this.callbacks.length?[4,(r=this.callbacks)[0].apply(r,O([],R(t),!1))]:[3,6];case 1:e=i.sent(),n=0,i.label=2;case 2:return n<this.callbacks.length-1?[4,(0,this.callbacks[n])(e)]:[3,5];case 3:e=i.sent(),i.label=4;case 4:return n++,[3,2];case 5:return[2,e];case 6:return[2,null]}}))}))},t}(),va=function(){function t(){this.callbacks=[]}return t.prototype.tap=function(t,e){this.callbacks.push(e)},t.prototype.call=function(){var t=arguments;this.callbacks.forEach((function(e){e.apply(void 0,t)}))},t}(),ga=function(){function t(){this.callbacks=[]}return t.prototype.tap=function(t,e){this.callbacks.push(e)},t.prototype.call=function(){if(this.callbacks.length){for(var t=arguments,e=this.callbacks[0].apply(void 0,t),n=0;n<this.callbacks.length-1;n++){e=(0,this.callbacks[n])(e)}return e}return null},t}(),ya=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],ma=/([\"\'])[^\'\"]+\1/;var Ca=function(){function t(){this.parser=ao,this.parserUnmemoize=so,this.parserWithCSSDisabled=so,this.mixer=yo}return t.prototype.calculator=function(t,e,n,r){return n instanceof Ar?[]:n},t.prototype.postProcessor=function(t){ko(t.parsedStyle.transform,t)},t}(),wa=function(){this.parser=mo,this.parserUnmemoize=Co},xa=function(){function t(){this.parser=ki,this.parserUnmemoize=Pi}return t.prototype.calculator=function(t,e,n,r){return n.value},t.prototype.postProcessor=function(t){if(t.parentNode){var e=t.parentNode,n=e.renderable,r=e.sortable;n&&(n.dirty=!0),r&&(r.dirty=!0,r.dirtyReason=Ur.Z_INDEX_CHANGED)}},t}(),ba=function(){function t(){}return t.prototype.update=function(t,e){var n=t.r;return{width:2*n,height:2*n}},t}(),Ea=function(){function t(){}return t.prototype.update=function(t,e){return{width:2*t.rx,height:2*t.ry}},t}(),Sa=function(){function t(){}return t.prototype.update=function(t){var e=t.x1,n=t.y1,r=t.x2,i=t.y2,o=Math.min(e,r),a=Math.max(e,r),s=Math.min(n,i);return{width:a-o,height:Math.max(n,i)-s}},t}(),Ta=function(){function t(){}return t.prototype.update=function(t){var e=t.path.rect;return{width:e.width,height:e.height}},t}(),La=function(){function t(){}return t.prototype.update=function(t){if(t.points&&jt(t.points.points)){var e=t.points.points,n=Math.min.apply(Math,O([],R(e.map((function(t){return t[0]}))),!1)),r=Math.max.apply(Math,O([],R(e.map((function(t){return t[0]}))),!1)),i=Math.min.apply(Math,O([],R(e.map((function(t){return t[1]}))),!1));return{width:r-n,height:Math.max.apply(Math,O([],R(e.map((function(t){return t[1]}))),!1))-i}}return{width:0,height:0}},t}(),_a=function(){function t(){}return t.prototype.update=function(t,e){var n=t.img,r=t.width,i=void 0===r?0:r,o=t.height,a=i,s=void 0===o?0:o;return n&&!Kt(n)&&(a||(a=n.width,t.width=a),s||(s=n.height,t.height=s)),{width:a,height:s}},t}(),Ma=function(){function t(t){this.globalRuntime=t}return t.prototype.isReadyToMeasure=function(t,e){var n=t.text,r=t.textAlign,i=t.textBaseline,o=t.fontSize,a=t.fontStyle,s=t.fontWeight,l=t.fontVariant,u=t.lineWidth;return n&&o&&a&&s&&l&&r&&i&&!Wt(u)},t.prototype.update=function(t,e){var n,r,i=t.text,o=t.textAlign,a=t.lineWidth,s=t.textBaseline,l=t.dx,u=t.dy;if(!this.isReadyToMeasure(t,e))return t.metrics={font:"",width:0,height:0,lines:[],lineWidths:[],lineHeight:0,maxLineWidth:0,fontProperties:{ascent:0,descent:0,fontSize:0},lineMetrics:[]},{width:0,height:0,x:0,y:0,offsetX:0,offsetY:0};var c=((null===(r=null===(n=null==e?void 0:e.ownerDocument)||void 0===n?void 0:n.defaultView)||void 0===r?void 0:r.getConfig())||{}).offscreenCanvas,h=this.globalRuntime.textService.measureText(i,t,c);t.metrics=h;var d=h.width,f=h.height,p=h.lineHeight,v=h.fontProperties,g=[d/2,f/2,0],y=[0,1],m=0;"center"===o||"middle"===o?(m=a/2,y=[.5,1]):"right"!==o&&"end"!==o||(m=a,y=[1,1]);var C=0;return"middle"===s?C=g[1]:"top"===s||"hanging"===s?C=2*g[1]:"alphabetic"===s?C=this.globalRuntime.enableCSSParsing?p-v.ascent:0:"bottom"!==s&&"ideographic"!==s||(C=0),l&&(m+=l),u&&(C+=u),t.anchor=[y[0],y[1],0],{width:2*g[0],height:2*g[1],offsetX:m,offsetY:C}},t}();var Ra,Oa=function(){function t(e){this.eventPhase=t.prototype.NONE,this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.defaultPrevented=!1,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new hr,this.page=new hr,this.canvas=new hr,this.viewport=new hr,this.composed=!1,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=e}return Object.defineProperty(t.prototype,"name",{get:function(){return this.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"layerX",{get:function(){return this.layer.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"layerY",{get:function(){return this.layer.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pageX",{get:function(){return this.page.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pageY",{get:function(){return this.page.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"x",{get:function(){return this.canvas.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.canvas.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canvasX",{get:function(){return this.canvas.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canvasY",{get:function(){return this.canvas.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"viewportX",{get:function(){return this.viewport.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"viewportY",{get:function(){return this.viewport.y},enumerable:!1,configurable:!0}),t.prototype.composedPath=function(){return!this.manager||this.path&&this.path[0]===this.target||(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path},Object.defineProperty(t.prototype,"propagationPath",{get:function(){return this.composedPath()},enumerable:!1,configurable:!0}),t.prototype.preventDefault=function(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0},t.prototype.stopImmediatePropagation=function(){this.propagationImmediatelyStopped=!0},t.prototype.stopPropagation=function(){this.propagationStopped=!0},t.prototype.initEvent=function(){},t.prototype.initUIEvent=function(){},t.prototype.clone=function(){throw new Error(fr)},t}(),Na=function(t){function e(){var e=t.apply(this,O([],R(arguments),!1))||this;return e.client=new hr,e.movement=new hr,e.offset=new hr,e.global=new hr,e.screen=new hr,e}return E(e,t),Object.defineProperty(e.prototype,"clientX",{get:function(){return this.client.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"clientY",{get:function(){return this.client.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"movementX",{get:function(){return this.movement.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"movementY",{get:function(){return this.movement.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"offsetX",{get:function(){return this.offset.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"offsetY",{get:function(){return this.offset.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"globalX",{get:function(){return this.global.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"globalY",{get:function(){return this.global.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"screenX",{get:function(){return this.screen.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"screenY",{get:function(){return this.screen.y},enumerable:!1,configurable:!0}),e.prototype.getModifierState=function(t){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(t)},e.prototype.initMouseEvent=function(){throw new Error(fr)},e}(Oa),Ia=function(t){function e(){var e=t.apply(this,O([],R(arguments),!1))||this;return e.width=0,e.height=0,e.isPrimary=!1,e}return E(e,t),e.prototype.getCoalescedEvents=function(){return"pointermove"===this.type||"mousemove"===this.type||"touchmove"===this.type?[this]:[]},e.prototype.getPredictedEvents=function(){throw new Error("getPredictedEvents is not supported!")},e.prototype.clone=function(){return this.manager.clonePointerEvent(this)},e}(Na),Aa=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return E(e,t),e.prototype.clone=function(){return this.manager.cloneWheelEvent(this)},e}(Na),Pa=function(t){function e(e,n){var r=t.call(this,null)||this;return r.type=e,r.detail=n,Object.assign(r,n),r}return E(e,t),e}(Oa),ka=function(){function t(){this.emitter=new A}return t.prototype.on=function(t,e,n){return this.addEventListener(t,e,n),this},t.prototype.addEventListener=function(t,e,n){var r=ee(n)&&n||Yt(n)&&n.capture,i=Yt(n)&&n.once,o=Br(e)?void 0:e,a=!1,s="";if(t.indexOf(":")>-1){var l=R(t.split(":"),2),u=l[0];t=l[1],s=u,a=!0}if(t=r?"".concat(t,"capture"):t,e=Br(e)?e:e.handleEvent,a){var c=e;e=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];(null===(t=e[0].target)||void 0===t?void 0:t.name)===s&&c.apply(void 0,O([],R(e),!1))}}return i?this.emitter.once(t,e,o):this.emitter.on(t,e,o),this},t.prototype.off=function(t,e,n){return t?this.removeEventListener(t,e,n):this.removeAllEventListeners(),this},t.prototype.removeAllEventListeners=function(){this.emitter.removeAllListeners()},t.prototype.removeEventListener=function(t,e,n){var r=ee(n)&&n||Yt(n)&&n.capture,i=Br(e)?void 0:e;return t=r?"".concat(t,"capture"):t,e=Br(e)?e:null==e?void 0:e.handleEvent,this.emitter.off(t,e,i),this},t.prototype.emit=function(t,e){this.dispatchEvent(new Pa(t,e))},t.prototype.dispatchEvent=function(t,e){var n,r,i;if(void 0===e&&(e=!1),!function(t){return!!t.type}(t))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");if(i=this.document?this:this.defaultView?this.defaultView:null===(n=this.ownerDocument)||void 0===n?void 0:n.defaultView){if(t.manager=i.getEventService()||null,!t.manager)return!1;t.defaultPrevented=!1,t.path=[],e||(t.target=this),null===(r=t.manager)||void 0===r||r.dispatchEvent(t,t.type,e)}return!t.defaultPrevented},t}(),Ba=function(t){function e(){var e=t.apply(this,O([],R(arguments),!1))||this;return e.shadow=!1,e.ownerDocument=null,e.isConnected=!1,e.baseURI="",e.childNodes=[],e.nodeType=0,e.nodeName="",e.nodeValue=null,e.parentNode=null,e}return E(e,t),e.isNode=function(t){return!!t.childNodes},Object.defineProperty(e.prototype,"textContent",{get:function(){var t,e,n="";this.nodeName===Bn.TEXT&&(n+=this.style.text);try{for(var r=M(this.childNodes),i=r.next();!i.done;i=r.next()){var o=i.value;o.nodeName===Bn.TEXT?n+=o.nodeValue:n+=o.textContent}}catch(a){t={error:a}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}return n},set:function(t){var e=this;this.childNodes.slice().forEach((function(t){e.removeChild(t)})),this.nodeName===Bn.TEXT&&(this.style.text="".concat(t))},enumerable:!1,configurable:!0}),e.prototype.getRootNode=function(t){return void 0===t&&(t={}),this.parentNode?this.parentNode.getRootNode(t):t.composed&&this.host?this.host.getRootNode(t):this},e.prototype.hasChildNodes=function(){return this.childNodes.length>0},e.prototype.isDefaultNamespace=function(t){throw new Error(fr)},e.prototype.lookupNamespaceURI=function(t){throw new Error(fr)},e.prototype.lookupPrefix=function(t){throw new Error(fr)},e.prototype.normalize=function(){throw new Error(fr)},e.prototype.isEqualNode=function(t){return this===t},e.prototype.isSameNode=function(t){return this.isEqualNode(t)},Object.defineProperty(e.prototype,"parent",{get:function(){return this.parentNode},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parentElement",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextSibling",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"previousSibling",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"firstChild",{get:function(){return this.childNodes.length>0?this.childNodes[0]:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastChild",{get:function(){return this.childNodes.length>0?this.childNodes[this.childNodes.length-1]:null},enumerable:!1,configurable:!0}),e.prototype.compareDocumentPosition=function(t){var n;if(t===this)return 0;for(var r=t,i=this,o=[r],a=[i];null!==(n=r.parentNode)&&void 0!==n?n:i.parentNode;)r=r.parentNode?(o.push(r.parentNode),r.parentNode):r,i=i.parentNode?(a.push(i.parentNode),i.parentNode):i;if(r!==i)return e.DOCUMENT_POSITION_DISCONNECTED|e.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC|e.DOCUMENT_POSITION_PRECEDING;var s=o.length>a.length?o:a,l=s===o?a:o;if(s[s.length-l.length]===l[0])return s===o?e.DOCUMENT_POSITION_CONTAINED_BY|e.DOCUMENT_POSITION_FOLLOWING:e.DOCUMENT_POSITION_CONTAINS|e.DOCUMENT_POSITION_PRECEDING;for(var u=s.length-l.length,c=l.length-1;c>=0;c--){var h=l[c],d=s[u+c];if(d!==h){var f=h.parentNode.childNodes;return f.indexOf(h)<f.indexOf(d)?l===o?e.DOCUMENT_POSITION_PRECEDING:e.DOCUMENT_POSITION_FOLLOWING:s===o?e.DOCUMENT_POSITION_PRECEDING:e.DOCUMENT_POSITION_FOLLOWING}}return e.DOCUMENT_POSITION_FOLLOWING},e.prototype.contain=function(t){return this.contains(t)},e.prototype.contains=function(t){for(var e=t;e&&this!==e;)e=e.parentNode;return!!e},e.prototype.getAncestor=function(t){for(var e=this;t>0&&e;)e=e.parentNode,t--;return e},e.prototype.forEach=function(t,e){void 0===e&&(e=!1),t(this)||(e?this.childNodes.slice():this.childNodes).forEach((function(e){e.forEach(t)}))},e.DOCUMENT_POSITION_DISCONNECTED=1,e.DOCUMENT_POSITION_PRECEDING=2,e.DOCUMENT_POSITION_FOLLOWING=4,e.DOCUMENT_POSITION_CONTAINS=8,e.DOCUMENT_POSITION_CONTAINED_BY=16,e.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC=32,e}(ka),Da=function(){function t(t,e){var n=this;this.globalRuntime=t,this.context=e,this.emitter=new A,this.nativeHTMLMap=new WeakMap,this.cursor="default",this.mappingTable={},this.mappingState={trackingData:{}},this.eventPool=new Map,this.tmpMatrix=D(),this.tmpVec3=pt(),this.onPointerDown=function(t){var e=n.createPointerEvent(t);if(n.dispatchEvent(e,"pointerdown"),"touch"===e.pointerType)n.dispatchEvent(e,"touchstart");else if("mouse"===e.pointerType||"pen"===e.pointerType){var r=2===e.button;n.dispatchEvent(e,r?"rightdown":"mousedown")}n.trackingData(t.pointerId).pressTargetsByButton[t.button]=e.composedPath(),n.freeEvent(e)},this.onPointerUp=function(t){var e,r=ta.now(),i=n.createPointerEvent(t,void 0,void 0,n.context.config.alwaysTriggerPointerEventOnCanvas?n.rootTarget:void 0);if(n.dispatchEvent(i,"pointerup"),"touch"===i.pointerType)n.dispatchEvent(i,"touchend");else if("mouse"===i.pointerType||"pen"===i.pointerType){var o=2===i.button;n.dispatchEvent(i,o?"rightup":"mouseup")}var a=n.trackingData(t.pointerId),s=n.findMountedTarget(a.pressTargetsByButton[t.button]),l=s;if(s&&!i.composedPath().includes(s)){for(var u=s;u&&!i.composedPath().includes(u);){if(i.currentTarget=u,n.notifyTarget(i,"pointerupoutside"),"touch"===i.pointerType)n.notifyTarget(i,"touchendoutside");else if("mouse"===i.pointerType||"pen"===i.pointerType){o=2===i.button;n.notifyTarget(i,o?"rightupoutside":"mouseupoutside")}Ba.isNode(u)&&(u=u.parentNode)}delete a.pressTargetsByButton[t.button],l=u}if(l){var c=n.clonePointerEvent(i,"click");c.target=l,c.path=[],a.clicksByButton[t.button]||(a.clicksByButton[t.button]={clickCount:0,target:c.target,timeStamp:r});var h=a.clicksByButton[t.button];h.target===c.target&&r-h.timeStamp<200?++h.clickCount:h.clickCount=1,h.target=c.target,h.timeStamp=r,c.detail=h.clickCount,(null===(e=i.detail)||void 0===e?void 0:e.preventClick)||(n.context.config.useNativeClickEvent||"mouse"!==c.pointerType&&"touch"!==c.pointerType||n.dispatchEvent(c,"click"),n.dispatchEvent(c,"pointertap")),n.freeEvent(c)}n.freeEvent(i)},this.onPointerMove=function(t){var e=n.createPointerEvent(t,void 0,void 0,n.context.config.alwaysTriggerPointerEventOnCanvas?n.rootTarget:void 0),r="mouse"===e.pointerType||"pen"===e.pointerType,i=n.trackingData(t.pointerId),o=n.findMountedTarget(i.overTargets);if(i.overTargets&&o!==e.target){var a="mousemove"===t.type?"mouseout":"pointerout",s=n.createPointerEvent(t,a,o||void 0);if(n.dispatchEvent(s,"pointerout"),r&&n.dispatchEvent(s,"mouseout"),!e.composedPath().includes(o)){var l=n.createPointerEvent(t,"pointerleave",o||void 0);for(l.eventPhase=l.AT_TARGET;l.target&&!e.composedPath().includes(l.target);)l.currentTarget=l.target,n.notifyTarget(l),r&&n.notifyTarget(l,"mouseleave"),Ba.isNode(l.target)&&(l.target=l.target.parentNode);n.freeEvent(l)}n.freeEvent(s)}if(o!==e.target){var u="mousemove"===t.type?"mouseover":"pointerover",c=n.clonePointerEvent(e,u);n.dispatchEvent(c,"pointerover"),r&&n.dispatchEvent(c,"mouseover");for(var h=o&&Ba.isNode(o)&&o.parentNode;h&&h!==(Ba.isNode(n.rootTarget)&&n.rootTarget.parentNode)&&h!==e.target;)h=h.parentNode;if(!h||h===(Ba.isNode(n.rootTarget)&&n.rootTarget.parentNode)){var d=n.clonePointerEvent(e,"pointerenter");for(d.eventPhase=d.AT_TARGET;d.target&&d.target!==o&&d.target!==(Ba.isNode(n.rootTarget)&&n.rootTarget.parentNode);)d.currentTarget=d.target,n.notifyTarget(d),r&&n.notifyTarget(d,"mouseenter"),Ba.isNode(d.target)&&(d.target=d.target.parentNode);n.freeEvent(d)}n.freeEvent(c)}n.dispatchEvent(e,"pointermove"),"touch"===e.pointerType&&n.dispatchEvent(e,"touchmove"),r&&(n.dispatchEvent(e,"mousemove"),n.cursor=n.getCursor(e.target)),i.overTargets=e.composedPath(),n.freeEvent(e)},this.onPointerOut=function(t){var e=n.trackingData(t.pointerId);if(e.overTargets){var r="mouse"===t.pointerType||"pen"===t.pointerType,i=n.findMountedTarget(e.overTargets),o=n.createPointerEvent(t,"pointerout",i||void 0);n.dispatchEvent(o),r&&n.dispatchEvent(o,"mouseout");var a=n.createPointerEvent(t,"pointerleave",i||void 0);for(a.eventPhase=a.AT_TARGET;a.target&&a.target!==(Ba.isNode(n.rootTarget)&&n.rootTarget.parentNode);)a.currentTarget=a.target,n.notifyTarget(a),r&&n.notifyTarget(a,"mouseleave"),Ba.isNode(a.target)&&(a.target=a.target.parentNode);e.overTargets=null,n.freeEvent(o),n.freeEvent(a)}n.cursor=null},this.onPointerOver=function(t){var e=n.trackingData(t.pointerId),r=n.createPointerEvent(t),i="mouse"===r.pointerType||"pen"===r.pointerType;n.dispatchEvent(r,"pointerover"),i&&n.dispatchEvent(r,"mouseover"),"mouse"===r.pointerType&&(n.cursor=n.getCursor(r.target));var o=n.clonePointerEvent(r,"pointerenter");for(o.eventPhase=o.AT_TARGET;o.target&&o.target!==(Ba.isNode(n.rootTarget)&&n.rootTarget.parentNode);)o.currentTarget=o.target,n.notifyTarget(o),i&&n.notifyTarget(o,"mouseenter"),Ba.isNode(o.target)&&(o.target=o.target.parentNode);e.overTargets=r.composedPath(),n.freeEvent(r),n.freeEvent(o)},this.onPointerUpOutside=function(t){var e=n.trackingData(t.pointerId),r=n.findMountedTarget(e.pressTargetsByButton[t.button]),i=n.createPointerEvent(t);if(r){for(var o=r;o;)i.currentTarget=o,n.notifyTarget(i,"pointerupoutside"),"touch"===i.pointerType||"mouse"!==i.pointerType&&"pen"!==i.pointerType||n.notifyTarget(i,2===i.button?"rightupoutside":"mouseupoutside"),Ba.isNode(o)&&(o=o.parentNode);delete e.pressTargetsByButton[t.button]}n.freeEvent(i)},this.onWheel=function(t){var e=n.createWheelEvent(t);n.dispatchEvent(e),n.freeEvent(e)},this.onClick=function(t){if(n.context.config.useNativeClickEvent){var e=n.createPointerEvent(t);n.dispatchEvent(e),n.freeEvent(e)}},this.onPointerCancel=function(t){var e=n.createPointerEvent(t,void 0,void 0,n.context.config.alwaysTriggerPointerEventOnCanvas?n.rootTarget:void 0);n.dispatchEvent(e),n.freeEvent(e)}}return t.prototype.init=function(){this.rootTarget=this.context.renderingContext.root.parentNode,this.addEventMapping("pointerdown",this.onPointerDown),this.addEventMapping("pointerup",this.onPointerUp),this.addEventMapping("pointermove",this.onPointerMove),this.addEventMapping("pointerout",this.onPointerOut),this.addEventMapping("pointerleave",this.onPointerOut),this.addEventMapping("pointercancel",this.onPointerCancel),this.addEventMapping("pointerover",this.onPointerOver),this.addEventMapping("pointerupoutside",this.onPointerUpOutside),this.addEventMapping("wheel",this.onWheel),this.addEventMapping("click",this.onClick)},t.prototype.destroy=function(){this.emitter.removeAllListeners(),this.mappingTable={},this.mappingState={},this.eventPool.clear()},t.prototype.client2Viewport=function(t){var e=this.context.contextService.getBoundingClientRect();return new hr(t.x-((null==e?void 0:e.left)||0),t.y-((null==e?void 0:e.top)||0))},t.prototype.viewport2Client=function(t){var e=this.context.contextService.getBoundingClientRect();return new hr(t.x+((null==e?void 0:e.left)||0),t.y+((null==e?void 0:e.top)||0))},t.prototype.viewport2Canvas=function(t){var e=t.x,n=t.y,r=this.rootTarget.defaultView.getCamera(),i=this.context.config,o=i.width,a=i.height,s=r.getPerspectiveInverse(),l=r.getWorldTransform(),u=j(this.tmpMatrix,l,s),c=Ct(this.tmpVec3,e/o*2-1,2*(1-n/a)-1,0);return _t(c,c,u),new hr(c[0],c[1])},t.prototype.canvas2Viewport=function(t){var e=this.rootTarget.defaultView.getCamera(),n=e.getPerspective(),r=e.getViewTransform(),i=j(this.tmpMatrix,n,r),o=Ct(this.tmpVec3,t.x,t.y,0);_t(this.tmpVec3,this.tmpVec3,i);var a=this.context.config,s=a.width,l=a.height;return new hr((o[0]+1)/2*s,(1-(o[1]+1)/2)*l)},t.prototype.setPickHandler=function(t){this.pickHandler=t},t.prototype.addEventMapping=function(t,e){this.mappingTable[t]||(this.mappingTable[t]=[]),this.mappingTable[t].push({fn:e,priority:0}),this.mappingTable[t].sort((function(t,e){return t.priority-e.priority}))},t.prototype.mapEvent=function(t){if(this.rootTarget){var e=this.mappingTable[t.type];if(e)for(var n=0,r=e.length;n<r;n++)e[n].fn(t);else console.warn("[EventService]: Event mapping not defined for ".concat(t.type))}},t.prototype.dispatchEvent=function(t,e,n){if(n){t.eventPhase=t.AT_TARGET;var r=this.rootTarget.defaultView||null;t.currentTarget=r,this.notifyListeners(t,e)}else t.propagationStopped=!1,t.propagationImmediatelyStopped=!1,this.propagate(t,e);this.emitter.emit(e||t.type,t)},t.prototype.propagate=function(t,e){if(t.target){var n=t.composedPath();t.eventPhase=t.CAPTURING_PHASE;for(var r=n.length-1;r>=1;r--)if(t.currentTarget=n[r],this.notifyTarget(t,e),t.propagationStopped||t.propagationImmediatelyStopped)return;if(t.eventPhase=t.AT_TARGET,t.currentTarget=t.target,this.notifyTarget(t,e),!t.propagationStopped&&!t.propagationImmediatelyStopped){var i=n.indexOf(t.currentTarget);t.eventPhase=t.BUBBLING_PHASE;for(r=i+1;r<n.length;r++)if(t.currentTarget=n[r],this.notifyTarget(t,e),t.propagationStopped||t.propagationImmediatelyStopped)return}}},t.prototype.propagationPath=function(t){var e=[t],n=this.rootTarget.defaultView||null;if(n&&n===t)return e.unshift(n.document),e;for(var r=0;r<2048&&t!==this.rootTarget;r++)Ba.isNode(t)&&t.parentNode&&(e.push(t.parentNode),t=t.parentNode);return n&&e.push(n),e},t.prototype.hitTest=function(t){var e=t.viewportX,n=t.viewportY,r=this.context.config,i=r.width,o=r.height,a=r.disableHitTesting;return e<0||n<0||e>i||n>o?null:!a&&this.pickHandler(t)||this.rootTarget||null},t.prototype.isNativeEventFromCanvas=function(t){var e,n=this.context.contextService.getDomElement(),r=null===(e=t.nativeEvent)||void 0===e?void 0:e.target;if(r){if(r===n)return!0;if(n&&n.contains)return n.contains(r)}return!!t.nativeEvent.composedPath&&t.nativeEvent.composedPath().indexOf(n)>-1},t.prototype.getExistedHTML=function(t){var e,n;if(t.nativeEvent.composedPath)try{for(var r=M(t.nativeEvent.composedPath()),i=r.next();!i.done;i=r.next()){var o=i.value,a=this.nativeHTMLMap.get(o);if(a)return a}}catch(s){e={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return null},t.prototype.pickTarget=function(t){return this.hitTest({clientX:t.clientX,clientY:t.clientY,viewportX:t.viewportX,viewportY:t.viewportY,x:t.canvasX,y:t.canvasY})},t.prototype.createPointerEvent=function(t,e,n,r){var i=this.allocateEvent(Ia);this.copyPointerData(t,i),this.copyMouseData(t,i),this.copyData(t,i),i.nativeEvent=t.nativeEvent,i.originalEvent=t;var o=this.getExistedHTML(i);return i.target=null!=n?n:o||this.isNativeEventFromCanvas(i)&&this.pickTarget(i)||r,"string"==typeof e&&(i.type=e),i},t.prototype.createWheelEvent=function(t){var e=this.allocateEvent(Aa);this.copyWheelData(t,e),this.copyMouseData(t,e),this.copyData(t,e),e.nativeEvent=t.nativeEvent,e.originalEvent=t;var n=this.getExistedHTML(e);return e.target=n||this.isNativeEventFromCanvas(e)&&this.pickTarget(e),e},t.prototype.trackingData=function(t){return this.mappingState.trackingData[t]||(this.mappingState.trackingData[t]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[t]},t.prototype.cloneWheelEvent=function(t){var e=this.allocateEvent(Aa);return e.nativeEvent=t.nativeEvent,e.originalEvent=t.originalEvent,this.copyWheelData(t,e),this.copyMouseData(t,e),this.copyData(t,e),e.target=t.target,e.path=t.composedPath().slice(),e.type=t.type,e},t.prototype.clonePointerEvent=function(t,e){var n=this.allocateEvent(Ia);return n.nativeEvent=t.nativeEvent,n.originalEvent=t.originalEvent,this.copyPointerData(t,n),this.copyMouseData(t,n),this.copyData(t,n),n.target=t.target,n.path=t.composedPath().slice(),n.type=null!=e?e:n.type,n},t.prototype.copyPointerData=function(t,e){e.pointerId=t.pointerId,e.width=t.width,e.height=t.height,e.isPrimary=t.isPrimary,e.pointerType=t.pointerType,e.pressure=t.pressure,e.tangentialPressure=t.tangentialPressure,e.tiltX=t.tiltX,e.tiltY=t.tiltY,e.twist=t.twist},t.prototype.copyMouseData=function(t,e){e.altKey=t.altKey,e.button=t.button,e.buttons=t.buttons,e.ctrlKey=t.ctrlKey,e.metaKey=t.metaKey,e.shiftKey=t.shiftKey,e.client.copyFrom(t.client),e.movement.copyFrom(t.movement),e.canvas.copyFrom(t.canvas),e.screen.copyFrom(t.screen),e.global.copyFrom(t.global),e.offset.copyFrom(t.offset)},t.prototype.copyWheelData=function(t,e){e.deltaMode=t.deltaMode,e.deltaX=t.deltaX,e.deltaY=t.deltaY,e.deltaZ=t.deltaZ},t.prototype.copyData=function(t,e){e.isTrusted=t.isTrusted,e.timeStamp=ta.now(),e.type=t.type,e.detail=t.detail,e.view=t.view,e.page.copyFrom(t.page),e.viewport.copyFrom(t.viewport)},t.prototype.allocateEvent=function(t){this.eventPool.has(t)||this.eventPool.set(t,[]);var e=this.eventPool.get(t).pop()||new t(this);return e.eventPhase=e.NONE,e.currentTarget=null,e.path=[],e.target=null,e},t.prototype.freeEvent=function(t){if(t.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");var e=t.constructor;this.eventPool.has(e)||this.eventPool.set(e,[]),this.eventPool.get(e).push(t)},t.prototype.notifyTarget=function(t,e){e=null!=e?e:t.type;var n=t.eventPhase===t.CAPTURING_PHASE||t.eventPhase===t.AT_TARGET?"".concat(e,"capture"):e;this.notifyListeners(t,n),t.eventPhase===t.AT_TARGET&&this.notifyListeners(t,e)},t.prototype.notifyListeners=function(t,e){var n=t.currentTarget.emitter,r=n._events[e];if(r)if("fn"in r)r.once&&n.removeListener(e,r.fn,void 0,!0),r.fn.call(t.currentTarget||r.context,t);else for(var i=0;i<r.length&&!t.propagationImmediatelyStopped;i++)r[i].once&&n.removeListener(e,r[i].fn,void 0,!0),r[i].fn.call(t.currentTarget||r[i].context,t)},t.prototype.findMountedTarget=function(t){if(!t)return null;for(var e=t[t.length-1],n=t.length-2;n>=0;n--){var r=t[n];if(!(r===this.rootTarget||Ba.isNode(r)&&r.parentNode===e))break;e=t[n]}return e},t.prototype.getCursor=function(t){for(var e=t;e;){var n=Ko(e)&&e.getAttribute("cursor");if(n)return n;e=Ba.isNode(e)&&e.parentNode}},t}(),Fa=function(){function t(){}return t.prototype.getOrCreateCanvas=function(t,e){if(this.canvas)return this.canvas;if(t||Qa.offscreenCanvas)this.canvas=t||Qa.offscreenCanvas,this.context=this.canvas.getContext("2d",S({willReadFrequently:!0},e));else try{this.canvas=new window.OffscreenCanvas(0,0),this.context=this.canvas.getContext("2d",S({willReadFrequently:!0},e)),this.context&&this.context.measureText||(this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"))}catch(n){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d",S({willReadFrequently:!0},e))}return this.canvas.width=10,this.canvas.height=10,this.canvas},t.prototype.getOrCreateContext=function(t,e){return this.context||this.getOrCreateCanvas(t,e),this.context},t}();!function(t){t[t.CAMERA_CHANGED=0]="CAMERA_CHANGED",t[t.DISPLAY_OBJECT_CHANGED=1]="DISPLAY_OBJECT_CHANGED",t[t.NONE=2]="NONE"}(Ra||(Ra={}));var Ha,za=function(){function t(t,e){this.globalRuntime=t,this.context=e,this.inited=!1,this.stats={total:0,rendered:0},this.zIndexCounter=0,this.hooks={init:new va,initAsync:new fa,dirtycheck:new ga,cull:new ga,beginFrame:new va,beforeRender:new va,render:new va,afterRender:new va,endFrame:new va,destroy:new va,pick:new pa,pickSync:new ga,pointerDown:new va,pointerUp:new va,pointerMove:new va,pointerOut:new va,pointerOver:new va,pointerWheel:new va,pointerCancel:new va,click:new va}}return t.prototype.init=function(t){var e=this,n=S(S({},this.globalRuntime),this.context);this.context.renderingPlugins.forEach((function(t){t.apply(n,e.globalRuntime)})),this.hooks.init.call(),0===this.hooks.initAsync.getCallbacksNum()?(this.inited=!0,t()):this.hooks.initAsync.promise().then((function(){e.inited=!0,t()}))},t.prototype.getStats=function(){return this.stats},t.prototype.disableDirtyRectangleRendering=function(){return!this.context.config.renderer.getConfig().enableDirtyRectangleRendering||this.context.renderingContext.renderReasons.has(Ra.CAMERA_CHANGED)},t.prototype.render=function(t,e){var n=this;this.stats.total=0,this.stats.rendered=0,this.zIndexCounter=0;var r=this.context.renderingContext;if(this.globalRuntime.sceneGraphService.syncHierarchy(r.root),this.globalRuntime.sceneGraphService.triggerPendingEvents(),r.renderReasons.size&&this.inited){r.dirtyRectangleRenderingDisabled=this.disableDirtyRectangleRendering();var i=1===r.renderReasons.size&&r.renderReasons.has(Ra.CAMERA_CHANGED),o=!t.disableRenderHooks||!(t.disableRenderHooks&&i);o&&this.renderDisplayObject(r.root,t,r),this.hooks.beginFrame.call(),o&&r.renderListCurrentFrame.forEach((function(t){n.hooks.beforeRender.call(t),n.hooks.render.call(t),n.hooks.afterRender.call(t)})),this.hooks.endFrame.call(),r.renderListCurrentFrame=[],r.renderReasons.clear(),e()}},t.prototype.renderDisplayObject=function(t,e,n){var r=this,i=e.renderer.getConfig(),o=i.enableDirtyCheck,a=i.enableCulling;this.globalRuntime.enableCSSParsing&&this.globalRuntime.styleValueRegistry.recalc(t);var s=t.renderable,l=o?s.dirty||n.dirtyRectangleRenderingDisabled?t:null:t;if(l){var u=a?this.hooks.cull.call(l,this.context.camera):l;u&&(this.stats.rendered++,n.renderListCurrentFrame.push(u))}t.renderable.dirty=!1,t.sortable.renderOrder=this.zIndexCounter++,this.stats.total++;var c=t.sortable;c.dirty&&(this.sort(t,c),c.dirty=!1,c.dirtyChildren=[],c.dirtyReason=void 0),(c.sorted||t.childNodes).forEach((function(t){r.renderDisplayObject(t,e,n)}))},t.prototype.sort=function(t,e){e.sorted&&e.dirtyReason!==Ur.Z_INDEX_CHANGED?e.dirtyChildren.forEach((function(n){if(-1===t.childNodes.indexOf(n)){var r=e.sorted.indexOf(n);r>=0&&e.sorted.splice(r,1)}else if(0===e.sorted.length)e.sorted.push(n);else{var i=function(t,e){for(var n=0,r=t.length;n<r;){var i=n+r>>>1;Zo(t[i],e)<0?n=i+1:r=i}return n}(e.sorted,n);e.sorted.splice(i,0,n)}})):e.sorted=t.childNodes.slice().sort(Zo)},t.prototype.destroy=function(){this.inited=!1,this.hooks.destroy.call(),this.globalRuntime.sceneGraphService.clearPendingEvents()},t.prototype.dirtify=function(){this.context.renderingContext.renderReasons.add(Ra.DISPLAY_OBJECT_CHANGED)},t}(),Ga=/\[\s*(.*)=(.*)\s*\]/,Wa=function(){function t(){}return t.prototype.selectOne=function(t,e){var n=this;if(t.startsWith("."))return e.find((function(e){return((null==e?void 0:e.classList)||[]).indexOf(n.getIdOrClassname(t))>-1}));if(t.startsWith("#"))return e.find((function(e){return e.id===n.getIdOrClassname(t)}));if(t.startsWith("[")){var r=this.getAttribute(t),i=r.name,o=r.value;return i?e.find((function(t){return e!==t&&("name"===i?t.name===o:n.attributeToString(t,i)===o)})):null}return e.find((function(n){return e!==n&&n.nodeName===t}))},t.prototype.selectAll=function(t,e){var n=this;if(t.startsWith("."))return e.findAll((function(r){return e!==r&&((null==r?void 0:r.classList)||[]).indexOf(n.getIdOrClassname(t))>-1}));if(t.startsWith("#"))return e.findAll((function(r){return e!==r&&r.id===n.getIdOrClassname(t)}));if(t.startsWith("[")){var r=this.getAttribute(t),i=r.name,o=r.value;return i?e.findAll((function(t){return e!==t&&("name"===i?t.name===o:n.attributeToString(t,i)===o)})):[]}return e.findAll((function(n){return e!==n&&n.nodeName===t}))},t.prototype.is=function(t,e){if(t.startsWith("."))return e.className===this.getIdOrClassname(t);if(t.startsWith("#"))return e.id===this.getIdOrClassname(t);if(t.startsWith("[")){var n=this.getAttribute(t),r=n.name,i=n.value;return"name"===r?e.name===i:this.attributeToString(e,r)===i}return e.nodeName===t},t.prototype.getIdOrClassname=function(t){return t.substring(1)},t.prototype.getAttribute=function(t){var e=t.match(Ga),n="",r="";return e&&e.length>2&&(n=e[1].replace(/"/g,""),r=e[2].replace(/"/g,"")),{name:n,value:r}},t.prototype.attributeToString=function(t,e){if(!t.getAttribute)return"";var n=t.getAttribute(e);return Wt(n)?"":n.toString?n.toString():""},t}(),Va=function(t){function e(e,n,r,i,o,a,s,l){var u=t.call(this,null)||this;return u.relatedNode=n,u.prevValue=r,u.newValue=i,u.attrName=o,u.attrChange=a,u.prevParsedValue=s,u.newParsedValue=l,u.type=e,u}return E(e,t),e.ADDITION=2,e.MODIFICATION=1,e.REMOVAL=3,e}(Oa);function Ua(t){var e=t.renderable;e&&(e.renderBoundsDirty=!0,e.boundsDirty=!0)}!function(t){t.REPARENT="reparent",t.DESTROY="destroy",t.ATTR_MODIFIED="DOMAttrModified",t.INSERTED="DOMNodeInserted",t.REMOVED="removed",t.MOUNTED="DOMNodeInsertedIntoDocument",t.UNMOUNTED="DOMNodeRemovedFromDocument",t.BOUNDS_CHANGED="bounds-changed",t.CULLED="culled"}(Ha||(Ha={}));var ja=new Va(Ha.REPARENT,null,"","","",0,"",""),Ya=function(){function t(t){var e,n,r,i,o,a,s,l,u=this;this.runtime=t,this.pendingEvents=[],this.boundsChangedEvent=new Pa(Ha.BOUNDS_CHANGED),this.rotate=(e=At(),function(t,n,r,i){void 0===r&&(r=0),void 0===i&&(i=0),"number"==typeof n&&(n=yt(n,r,i));var o=t.transformable;if(null!==t.parentNode&&t.parentNode.transformable){var a=At();Dt(a,n[0],n[1],n[2]);var s=u.getRotation(t),l=u.getRotation(t.parentNode);Ht(e,l),Bt(e,e),kt(a,e,a),kt(o.localRotation,a,s),Gt(o.localRotation,o.localRotation),u.dirtifyLocal(t,o)}else u.rotateLocal(t,n)}),this.rotateLocal=(n=At(),function(t,e,r,i){void 0===r&&(r=0),void 0===i&&(i=0),"number"==typeof e&&(e=yt(e,r,i));var o=t.transformable;Dt(n,e[0],e[1],e[2]),zt(o.localRotation,o.localRotation,n),u.dirtifyLocal(t,o)}),this.setEulerAngles=(r=At(),function(t,e,n,i){void 0===n&&(n=0),void 0===i&&(i=0),"number"==typeof e&&(e=yt(e,n,i));var o=t.transformable;if(null!==t.parentNode&&t.parentNode.transformable){Dt(o.localRotation,e[0],e[1],e[2]);var a=u.getRotation(t.parentNode);Ht(r,Bt(At(),a)),zt(o.localRotation,o.localRotation,r),u.dirtifyLocal(t,o)}else u.setLocalEulerAngles(t,e)}),this.translateLocal=function(t,e,n,r){void 0===n&&(n=0),void 0===r&&(r=0),"number"==typeof e&&(e=yt(e,n,r));var i=t.transformable;Mt(e,pt())||(function(t,e,n){var r=n[0],i=n[1],o=n[2],a=n[3],s=e[0],l=e[1],u=e[2],c=i*u-o*l,h=o*s-r*u,d=r*l-i*s,f=i*d-o*h,p=o*c-r*d,v=r*h-i*c,g=2*a;c*=g,h*=g,d*=g,f*=2,p*=2,v*=2,t[0]=s+c+f,t[1]=l+h+p,t[2]=u+d+v}(e,e,i.localRotation),wt(i.localPosition,i.localPosition,e),u.dirtifyLocal(t,i))},this.setPosition=(i=D(),o=pt(),function(t,e){var n=t.transformable;if(o[0]=e[0],o[1]=e[1],o[2]=e[2]||0,!Mt(u.getPosition(t),o)){if(mt(n.position,o),null!==t.parentNode&&t.parentNode.transformable){var r=t.parentNode.transformable;H(i,r.worldTransform),V(i,i),_t(n.localPosition,o,i)}else mt(n.localPosition,o);u.dirtifyLocal(t,n)}}),this.setLocalPosition=function(){var t=pt();return function(e,n){var r=e.transformable;t[0]=n[0],t[1]=n[1],t[2]=n[2]||0,Mt(r.localPosition,t)||(mt(r.localPosition,t),u.dirtifyLocal(e,r))}}(),this.translate=(a=pt(),s=pt(),l=pt(),function(t,e,n,r){void 0===n&&(n=0),void 0===r&&(r=0),"number"==typeof e&&(e=Ct(s,e,n,r)),Mt(e,a)||(wt(l,u.getPosition(t),e),u.setPosition(t,l))}),this.setRotation=function(){var t=At();return function(e,n,r,i,o){var a=e.transformable;if("number"==typeof n&&(n=Ft(n,r,i,o)),null!==e.parentNode&&e.parentNode.transformable){var s=u.getRotation(e.parentNode);Ht(t,s),Bt(t,t),kt(a.localRotation,t,n),Gt(a.localRotation,a.localRotation),u.dirtifyLocal(e,a)}else u.setLocalRotation(e,n)}},this.displayObjectDependencyMap=new WeakMap,this.calcLocalTransform=function(){var t=D(),e=pt(),n=Ft(0,0,0,1);return function(r){if(0!==r.localSkew[0]||0!==r.localSkew[1]){if(nt(r.localTransform,r.localRotation,r.localPosition,yt(1,1,1),r.origin),0!==r.localSkew[0]||0!==r.localSkew[1]){var i=G(t);i[4]=Math.tan(r.localSkew[0]),i[1]=Math.tan(r.localSkew[1]),j(r.localTransform,r.localTransform,i)}var o=nt(t,n,e,r.localScale,r.origin);j(r.localTransform,r.localTransform,o)}else nt(r.localTransform,r.localRotation,r.localPosition,r.localScale,r.origin)}}()}return t.prototype.matches=function(t,e){return this.runtime.sceneGraphSelector.is(t,e)},t.prototype.querySelector=function(t,e){return this.runtime.sceneGraphSelector.selectOne(t,e)},t.prototype.querySelectorAll=function(t,e){return this.runtime.sceneGraphSelector.selectAll(t,e)},t.prototype.attach=function(t,e,n){var r,i,o=!1;t.parentNode&&(o=t.parentNode!==e,this.detach(t)),t.parentNode=e,Wt(n)?t.parentNode.childNodes.push(t):t.parentNode.childNodes.splice(n,0,t);var a=e.sortable;((null===(r=null==a?void 0:a.sorted)||void 0===r?void 0:r.length)||(null===(i=t.style)||void 0===i?void 0:i.zIndex))&&(-1===a.dirtyChildren.indexOf(t)&&a.dirtyChildren.push(t),a.dirty=!0,a.dirtyReason=Ur.ADDED);var s=t.transformable;s&&this.dirtifyWorld(t,s),s.frozen&&this.unfreezeParentToRoot(t),o&&t.dispatchEvent(ja)},t.prototype.detach=function(t){var e,n;if(t.parentNode){var r=t.transformable,i=t.parentNode.sortable;((null===(e=null==i?void 0:i.sorted)||void 0===e?void 0:e.length)||(null===(n=t.style)||void 0===n?void 0:n.zIndex))&&(-1===i.dirtyChildren.indexOf(t)&&i.dirtyChildren.push(t),i.dirty=!0,i.dirtyReason=Ur.REMOVED);var o=t.parentNode.childNodes.indexOf(t);o>-1&&t.parentNode.childNodes.splice(o,1),r&&this.dirtifyWorld(t,r),t.parentNode=null}},t.prototype.getOrigin=function(t){return t.transformable.origin},t.prototype.setOrigin=function(t,e,n,r){void 0===n&&(n=0),void 0===r&&(r=0),"number"==typeof e&&(e=[e,n,r]);var i=t.transformable;if(e[0]!==i.origin[0]||e[1]!==i.origin[1]||e[2]!==i.origin[2]){var o=i.origin;o[0]=e[0],o[1]=e[1],o[2]=e[2]||0,this.dirtifyLocal(t,i)}},t.prototype.setLocalEulerAngles=function(t,e,n,r){void 0===n&&(n=0),void 0===r&&(r=0),"number"==typeof e&&(e=yt(e,n,r));var i=t.transformable;Dt(i.localRotation,e[0],e[1],e[2]),this.dirtifyLocal(t,i)},t.prototype.scaleLocal=function(t,e){var n,r,i,o=t.transformable;n=o.localScale,r=o.localScale,i=yt(e[0],e[1],e[2]||1),n[0]=r[0]*i[0],n[1]=r[1]*i[1],n[2]=r[2]*i[2],this.dirtifyLocal(t,o)},t.prototype.setLocalScale=function(t,e){var n=t.transformable,r=yt(e[0],e[1],e[2]||n.localScale[2]);Mt(r,n.localScale)||(mt(n.localScale,r),this.dirtifyLocal(t,n))},t.prototype.setLocalRotation=function(t,e,n,r,i){"number"==typeof e&&(e=Ft(e,n,r,i));var o=t.transformable;Ht(o.localRotation,e),this.dirtifyLocal(t,o)},t.prototype.setLocalSkew=function(t,e,n){"number"==typeof e&&(e=function(t,e){var n=new k(2);return n[0]=t,n[1]=e,n}(e,n));var r,i,o=t.transformable;r=o.localSkew,i=e,r[0]=i[0],r[1]=i[1],this.dirtifyLocal(t,o)},t.prototype.dirtifyLocal=function(t,e){e.localDirtyFlag||(e.localDirtyFlag=!0,e.dirtyFlag||this.dirtifyWorld(t,e))},t.prototype.dirtifyWorld=function(t,e){e.dirtyFlag||this.unfreezeParentToRoot(t),this.dirtifyWorldInternal(t,e),this.dirtifyToRoot(t,!0)},t.prototype.triggerPendingEvents=function(){var t=this,e=new Set,n=function(n,r){n.isConnected&&!e.has(n.entity)&&(t.boundsChangedEvent.detail=r,t.boundsChangedEvent.target=n,n.isMutationObserved?n.dispatchEvent(t.boundsChangedEvent):n.ownerDocument.defaultView.dispatchEvent(t.boundsChangedEvent,!0),e.add(n.entity))};this.pendingEvents.forEach((function(t){var e=R(t,2),r=e[0],i=e[1];i.affectChildren?r.forEach((function(t){n(t,i)})):n(r,i)})),this.clearPendingEvents(),e.clear()},t.prototype.clearPendingEvents=function(){this.pendingEvents=[]},t.prototype.dirtifyToRoot=function(t,e){void 0===e&&(e=!1);var n=t;for(n.renderable&&(n.renderable.dirty=!0);n;)Ua(n),n=n.parentNode;e&&t.forEach((function(t){Ua(t)})),this.informDependentDisplayObjects(t),this.pendingEvents.push([t,{affectChildren:e}])},t.prototype.updateDisplayObjectDependency=function(t,e,n,r){if(e&&e!==n){var i=this.displayObjectDependencyMap.get(e);if(i&&i[t]){var o=i[t].indexOf(r);i[t].splice(o,1)}}if(n){var a=this.displayObjectDependencyMap.get(n);a||(this.displayObjectDependencyMap.set(n,{}),a=this.displayObjectDependencyMap.get(n)),a[t]||(a[t]=[]),a[t].push(r)}},t.prototype.informDependentDisplayObjects=function(t){var e=this,n=this.displayObjectDependencyMap.get(t);n&&Object.keys(n).forEach((function(t){n[t].forEach((function(n){e.dirtifyToRoot(n,!0),n.dispatchEvent(new Va(Ha.ATTR_MODIFIED,n,e,e,t,Va.MODIFICATION,e,e)),n.isCustomElement&&n.isConnected&&n.attributeChangedCallback&&n.attributeChangedCallback(t,e,e)}))}))},t.prototype.getPosition=function(t){var e=t.transformable;return J(e.position,this.getWorldTransform(t,e))},t.prototype.getRotation=function(t){var e=t.transformable;return et(e.rotation,this.getWorldTransform(t,e))},t.prototype.getScale=function(t){var e=t.transformable;return tt(e.scaling,this.getWorldTransform(t,e))},t.prototype.getWorldTransform=function(t,e){return void 0===e&&(e=t.transformable),e.localDirtyFlag||e.dirtyFlag?(t.parentNode&&t.parentNode.transformable&&this.getWorldTransform(t.parentNode),this.sync(t,e),e.worldTransform):e.worldTransform},t.prototype.getLocalPosition=function(t){return t.transformable.localPosition},t.prototype.getLocalRotation=function(t){return t.transformable.localRotation},t.prototype.getLocalScale=function(t){return t.transformable.localScale},t.prototype.getLocalSkew=function(t){return t.transformable.localSkew},t.prototype.getLocalTransform=function(t){var e=t.transformable;return e.localDirtyFlag&&(this.calcLocalTransform(e),e.localDirtyFlag=!1),e.localTransform},t.prototype.setLocalTransform=function(t,e){var n=J(pt(),e),r=et(At(),e),i=tt(pt(),e);this.setLocalScale(t,i),this.setLocalPosition(t,n),this.setLocalRotation(t,r)},t.prototype.resetLocalTransform=function(t){this.setLocalScale(t,[1,1,1]),this.setLocalPosition(t,[0,0,0]),this.setLocalEulerAngles(t,[0,0,0]),this.setLocalSkew(t,[0,0])},t.prototype.getTransformedGeometryBounds=function(t,e,n){void 0===e&&(e=!1);var r=this.getGeometryBounds(t,e);if(or.isEmpty(r))return null;var i=n||new or;return i.setFromTransformedAABB(r,this.getWorldTransform(t)),i},t.prototype.getGeometryBounds=function(t,e){void 0===e&&(e=!1);var n=t.geometry;return(e?n.renderBounds:n.contentBounds||null)||new or},t.prototype.getBounds=function(t,e){var n=this;void 0===e&&(e=!1);var r=t.renderable;if(!r.boundsDirty&&!e&&r.bounds)return r.bounds;if(!r.renderBoundsDirty&&e&&r.renderBounds)return r.renderBounds;var i=e?r.renderBounds:r.bounds,o=this.getTransformedGeometryBounds(t,e,i);if(t.childNodes.forEach((function(t){var r=n.getBounds(t,e);r&&(o?o.add(r):(o=i||new or).update(r.center,r.halfExtents))})),o||(o=new or),e){var a=$o(t);if(a){var s=a.parsedStyle.clipPath.getBounds(e);o?s&&(o=s.intersection(o)):o.update(s.center,s.halfExtents)}}return e?(r.renderBounds=o,r.renderBoundsDirty=!1):(r.bounds=o,r.boundsDirty=!1),o},t.prototype.getLocalBounds=function(t){if(t.parentNode){var e=D();t.parentNode.transformable&&(e=V(D(),this.getWorldTransform(t.parentNode)));var n=this.getBounds(t);if(!or.isEmpty(n)){var r=new or;return r.setFromTransformedAABB(n,e),r}}return this.getBounds(t)},t.prototype.getBoundingClientRect=function(t){var e,n,r,i=this.getGeometryBounds(t);or.isEmpty(i)||(r=new or).setFromTransformedAABB(i,this.getWorldTransform(t));var o=null===(n=null===(e=t.ownerDocument)||void 0===e?void 0:e.defaultView)||void 0===n?void 0:n.getContextService().getBoundingClientRect();if(r){var a=R(r.getMin(),2),s=a[0],l=a[1],u=R(r.getMax(),2),c=u[0],h=u[1];return new dr(s+((null==o?void 0:o.left)||0),l+((null==o?void 0:o.top)||0),c-s,h-l)}return new dr((null==o?void 0:o.left)||0,(null==o?void 0:o.top)||0,0,0)},t.prototype.dirtifyWorldInternal=function(t,e){var n=this;if(!e.dirtyFlag){e.dirtyFlag=!0,e.frozen=!1,t.childNodes.forEach((function(t){var e=t.transformable;e.dirtyFlag||n.dirtifyWorldInternal(t,e)}));var r=t.renderable;r&&(r.renderBoundsDirty=!0,r.boundsDirty=!0,r.dirty=!0)}},t.prototype.syncHierarchy=function(t){var e=t.transformable;if(!e.frozen){e.frozen=!0,(e.localDirtyFlag||e.dirtyFlag)&&this.sync(t,e);for(var n=t.childNodes,r=0;r<n.length;r++)this.syncHierarchy(n[r])}},t.prototype.sync=function(t,e){if(e.localDirtyFlag&&(this.calcLocalTransform(e),e.localDirtyFlag=!1),e.dirtyFlag){var n=t.parentNode,r=n&&n.transformable;null!==n&&r?j(e.worldTransform,r.worldTransform,e.localTransform):H(e.worldTransform,e.localTransform),e.dirtyFlag=!1}},t.prototype.unfreezeParentToRoot=function(t){for(var e=t.parentNode;e;){var n=e.transformable;n&&(n.frozen=!1),e=e.parentNode}},t}(),Xa={MetricsString:"|q",BaselineSymbol:"M",BaselineMultiplier:1.4,HeightMultiplier:2,Newlines:[10,13],BreakingSpaces:[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288]},qa=/[a-zA-Z0-9\u00C0-\u00D6\u00D8-\u00f6\u00f8-\u00ff!"#$%&'()*+,-./:;]/,Ka=new RegExp("".concat(/[!%),.:;?\]}'""]/.source,"|").concat(/[!),.:;?\]}'""]/.source,"|").concat(/[)\]'"?!:;,.]/.source,"|").concat(/[!%),.:;?\]}'"]/.source)),Za=new RegExp("".concat(/[$('"]/.source,"|").concat(/[([{'"]/.source,"|").concat(/[(['"...]/.source,"|").concat(/[$([{'"#]/.source)),$a=function(){function t(t){var e=this;this.runtime=t,this.fontMetricsCache={},this.shouldBreakByKinsokuShorui=function(t,n){return!e.isBreakingSpace(n)&&!(!t||!Za.exec(n)&&!Ka.exec(t))},this.trimByKinsokuShorui=function(t){var e=O([],R(t),!1),n=e[e.length-2];if(!n)return t;var r=n[n.length-1];return e[e.length-2]=n.slice(0,-1),e[e.length-1]=r+e[e.length-1],e}}return t.prototype.measureFont=function(t,e){if(this.fontMetricsCache[t])return this.fontMetricsCache[t];var n={ascent:0,descent:0,fontSize:0},r=this.runtime.offscreenCanvasCreator.getOrCreateCanvas(e),i=this.runtime.offscreenCanvasCreator.getOrCreateContext(e,{willReadFrequently:!0});i.font=t;var o=Xa.MetricsString+Xa.BaselineSymbol,a=Math.ceil(i.measureText(o).width),s=Math.ceil(i.measureText(Xa.BaselineSymbol).width),l=Xa.HeightMultiplier*s;s=s*Xa.BaselineMultiplier|0,r.width=a,r.height=l,i.fillStyle="#f00",i.fillRect(0,0,a,l),i.font=t,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(o,0,s);var u=i.getImageData(0,0,a||1,l||1).data,c=u.length,h=4*a,d=0,f=0,p=!1;for(d=0;d<s;++d){for(var v=0;v<h;v+=4)if(255!==u[f+v]){p=!0;break}if(p)break;f+=h}for(n.ascent=s-d,f=c-h,p=!1,d=l;d>s;--d){for(v=0;v<h;v+=4)if(255!==u[f+v]){p=!0;break}if(p)break;f-=h}return n.descent=d-s,n.fontSize=n.ascent+n.descent,this.fontMetricsCache[t]=n,n},t.prototype.measureText=function(t,e,n){var r=e.fontSize,i=e.wordWrap,o=e.lineHeight,a=e.lineWidth,s=e.textBaseline,l=e.textAlign,u=e.letterSpacing,c=e.textPath;e.textPathSide,e.textPathStartOffset;var h=e.leading,d=void 0===h?0:h,f=function(t){for(var e=t.fontSize,n=t.fontFamily,r=t.fontStyle,i=t.fontVariant,o=t.fontWeight,a=$t(e)&&"".concat(e,"px")||"16px",s=n.split(","),l=s.length-1;l>=0;l--){var u=s[l].trim();!ma.test(u)&&ya.indexOf(u)<0&&(u='"'.concat(u,'"')),s[l]=u}return"".concat(r," ").concat(i," ").concat(o," ").concat(a," ").concat(s.join(","))}(e),p=this.measureFont(f,n);0===p.fontSize&&(p.fontSize=r,p.ascent=r);var v=this.runtime.offscreenCanvasCreator.getOrCreateContext(n);v.font=f,e.isOverflowing=!1;var g=(i?this.wordWrap(t,e,n):t).split(/(?:\r\n|\r|\n)/),y=new Array(g.length),m=0;if(!c){for(E=0;E<g.length;E++){var C=v.measureText(g[E]).width+(g[E].length-1)*u;y[E]=C,m=Math.max(m,C)}S=m+a;var w=o||p.fontSize+a,x=Math.max(w,p.fontSize+a)+(g.length-1)*(w+d),b=0;return"middle"===s?b=-x/2:"bottom"===s||"alphabetic"===s||"ideographic"===s?b=-x:"top"!==s&&"hanging"!==s||(b=0),{font:f,width:S,height:x,lines:g,lineWidths:y,lineHeight:w+=d,maxLineWidth:m,fontProperties:p,lineMetrics:y.map((function(t,e){var n=0;return"center"===l||"middle"===l?n-=t/2:"right"!==l&&"end"!==l||(n-=t),new dr(n-a/2,b+e*w,t+a,w)}))}}c.getTotalLength();for(var E=0;E<g.length;E++)var S=v.measureText(g[E]).width+(g[E].length-1)*u},t.prototype.setGraphemeOnPath=function(){},t.prototype.wordWrap=function(t,e,n){var r=this,i=e.wordWrapWidth,o=void 0===i?0:i,a=e.letterSpacing,s=e.maxLines,l=void 0===s?1/0:s,u=e.textOverflow,c=this.runtime.offscreenCanvasCreator.getOrCreateContext(n),h=o+a,d="";"ellipsis"===u?d="...":u&&"clip"!==u&&(d=u);for(var f=[],p=0,v=0,g={},y=function(t){return r.getFromCache(t,a,g,c)},m=Array.from(d).reduce((function(t,e){return t+y(e)}),0),C=Array.from(t),w=0;w<C.length;w++){var x=C[w],b=t[w-1],E=t[w+1],S=y(x);if(this.isNewline(x)){if(++p>=l){e.isOverflowing=!0;break}v=0,f[p]=""}else{if(v>0&&v+S>h){if(p+1>=l){if(e.isOverflowing=!0,m>0&&m<=h){for(var T=f[p].length,L=0,_=T,M=0;M<T;M++){var R=y(f[p][M]);if(L+R+m>h){_=M;break}L+=R}f[p]=(f[p]||"").slice(0,_)+d}break}if(v=0,f[++p]="",this.isBreakingSpace(x))continue;this.canBreakInLastChar(x)||(f=this.trimToBreakable(f),v=this.sumTextWidthByCache(f[p]||"",g)),this.shouldBreakByKinsokuShorui(x,E)&&(f=this.trimByKinsokuShorui(f),v+=y(b||""))}v+=S,f[p]=(f[p]||"")+x}}return f.join("\n")},t.prototype.isBreakingSpace=function(t){return"string"==typeof t&&Xa.BreakingSpaces.indexOf(t.charCodeAt(0))>=0},t.prototype.isNewline=function(t){return"string"==typeof t&&Xa.Newlines.indexOf(t.charCodeAt(0))>=0},t.prototype.trimToBreakable=function(t){var e=O([],R(t),!1),n=e[e.length-2],r=this.findBreakableIndex(n);if(-1===r||!n)return e;var i=n.slice(r,r+1),o=r+1,a=r+(this.isBreakingSpace(i)?0:1);return e[e.length-1]+=n.slice(o,n.length),e[e.length-2]=n.slice(0,a),e},t.prototype.canBreakInLastChar=function(t){return!t||!qa.test(t)},t.prototype.sumTextWidthByCache=function(t,e){return t.split("").reduce((function(t,n){if(!e[n])throw Error("cannot count the word without cache");return t+e[n]}),0)},t.prototype.findBreakableIndex=function(t){for(var e=t.length-1;e>=0;e--)if(!qa.test(t[e]))return e;return-1},t.prototype.getFromCache=function(t,e,n,r){var i=n[t];if("number"!=typeof i){var o=t.length*e;i=r.measureText(t).width+o,n[t]=i}return i},t}(),Qa={},Ja=function(){var t,e=new _a,n=new La;return(t={})[Bn.CIRCLE]=new ba,t[Bn.ELLIPSE]=new Ea,t[Bn.RECT]=e,t[Bn.IMAGE]=e,t[Bn.GROUP]=e,t[Bn.LINE]=new Sa,t[Bn.TEXT]=new Ma(Qa),t[Bn.POLYLINE]=n,t[Bn.POLYGON]=n,t[Bn.PATH]=new Ta,t[Bn.HTML]=null,t[Bn.MESH]=null,t}(),ts=function(){var t,e=new Mo,n=new No;return(t={})[ri.PERCENTAGE]=null,t[ri.NUMBER]=new Fo,t[ri.ANGLE]=new Lo,t[ri.DEFINED_PATH]=new _o,t[ri.PAINT]=e,t[ri.COLOR]=e,t[ri.FILTER]=new Ro,t[ri.LENGTH]=n,t[ri.LENGTH_PERCENTAGE]=n,t[ri.LENGTH_PERCENTAGE_12]=new Io,t[ri.LENGTH_PERCENTAGE_14]=new Ao,t[ri.COORDINATE]=new Bo,t[ri.OFFSET_DISTANCE]=new Ho,t[ri.OPACITY_VALUE]=new zo,t[ri.PATH]=new Go,t[ri.LIST_OF_POINTS]=new Wo,t[ri.SHADOW_BLUR]=new Vo,t[ri.TEXT]=new Uo,t[ri.TEXT_TRANSFORM]=new jo,t[ri.TRANSFORM]=new Ca,t[ri.TRANSFORM_ORIGIN]=new wa,t[ri.Z_INDEX]=new xa,t[ri.MARKER]=new Do,t}();Qa.CameraContribution=br,Qa.AnimationTimeline=null,Qa.EasingFunction=null,Qa.offscreenCanvasCreator=new Fa,Qa.sceneGraphSelector=new Wa,Qa.sceneGraphService=new Ya(Qa),Qa.textService=new $a(Qa),Qa.geometryUpdaterFactory=Ja,Qa.CSSPropertySyntaxFactory=ts,Qa.styleValueRegistry=new To(Qa),Qa.layoutRegistry=null,Qa.globalThis="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},Qa.enableCSSParsing=!0,Qa.enableDataset=!1,Qa.enableStyleSyntax=!0,Qa.enableSizeAttenuation=!1;var es=0,ns=new Va(Ha.INSERTED,null,"","","",0,"",""),rs=new Va(Ha.REMOVED,null,"","","",0,"",""),is=new Pa(Ha.DESTROY),os=function(t){function e(){var e=t.apply(this,O([],R(arguments),!1))||this;return e.entity=es++,e.renderable={bounds:void 0,boundsDirty:!0,renderBounds:void 0,renderBoundsDirty:!0,dirtyRenderBounds:void 0,dirty:!1},e.cullable={strategy:Vr.Standard,visibilityPlaneMask:-1,visible:!0,enable:!0},e.transformable={dirtyFlag:!1,localDirtyFlag:!1,frozen:!1,localPosition:[0,0,0],localRotation:[0,0,0,1],localScale:[1,1,1],localTransform:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],localSkew:[0,0],position:[0,0,0],rotation:[0,0,0,1],scaling:[1,1,1],worldTransform:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],origin:[0,0,0]},e.sortable={dirty:!1,sorted:void 0,renderOrder:0,dirtyChildren:[],dirtyReason:void 0},e.geometry={contentBounds:void 0,renderBounds:void 0},e.rBushNode={aabb:void 0},e.namespaceURI="g",e.scrollLeft=0,e.scrollTop=0,e.clientTop=0,e.clientLeft=0,e.destroyed=!1,e.style={},e.computedStyle=Qa.enableCSSParsing?{anchor:Xr,opacity:Xr,fillOpacity:Xr,strokeOpacity:Xr,fill:Xr,stroke:Xr,transform:Xr,transformOrigin:Xr,visibility:Xr,pointerEvents:Xr,lineWidth:Xr,lineCap:Xr,lineJoin:Xr,increasedLineWidthForHitTesting:Xr,fontSize:Xr,fontFamily:Xr,fontStyle:Xr,fontWeight:Xr,fontVariant:Xr,textAlign:Xr,textBaseline:Xr,textTransform:Xr,zIndex:Xr,filter:Xr,shadowType:Xr}:null,e.parsedStyle={},e.attributes={},e}return E(e,t),Object.defineProperty(e.prototype,"className",{get:function(){return this.getAttribute("class")||""},set:function(t){this.setAttribute("class",t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"classList",{get:function(){return this.className.split(" ").filter((function(t){return""!==t}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tagName",{get:function(){return this.nodeName},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"children",{get:function(){return this.childNodes},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"childElementCount",{get:function(){return this.childNodes.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"firstElementChild",{get:function(){return this.firstChild},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastElementChild",{get:function(){return this.lastChild},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parentElement",{get:function(){return this.parentNode},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextSibling",{get:function(){if(this.parentNode){var t=this.parentNode.childNodes.indexOf(this);return this.parentNode.childNodes[t+1]||null}return null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"previousSibling",{get:function(){if(this.parentNode){var t=this.parentNode.childNodes.indexOf(this);return this.parentNode.childNodes[t-1]||null}return null},enumerable:!1,configurable:!0}),e.prototype.cloneNode=function(t){throw new Error(fr)},e.prototype.appendChild=function(t,e){var n;if(t.destroyed)throw new Error("Cannot append a destroyed element.");return Qa.sceneGraphService.attach(t,this,e),(null===(n=this.ownerDocument)||void 0===n?void 0:n.defaultView)&&this.ownerDocument.defaultView.mountChildren(t),ns.relatedNode=this,t.dispatchEvent(ns),t},e.prototype.insertBefore=function(t,e){if(e){t.parentElement&&t.parentElement.removeChild(t);var n=this.childNodes.indexOf(e);-1===n?this.appendChild(t):this.appendChild(t,n)}else this.appendChild(t);return t},e.prototype.replaceChild=function(t,e){var n=this.childNodes.indexOf(e);return this.removeChild(e),this.appendChild(t,n),e},e.prototype.removeChild=function(t){var e;return rs.relatedNode=this,t.dispatchEvent(rs),(null===(e=t.ownerDocument)||void 0===e?void 0:e.defaultView)&&t.ownerDocument.defaultView.unmountChildren(t),Qa.sceneGraphService.detach(t),t},e.prototype.removeChildren=function(){for(var t=this.childNodes.length-1;t>=0;t--){var e=this.childNodes[t];this.removeChild(e)}},e.prototype.destroyChildren=function(){for(var t=this.childNodes.length-1;t>=0;t--){var e=this.childNodes[t];e.childNodes.length&&e.destroyChildren(),e.destroy()}},e.prototype.matches=function(t){return Qa.sceneGraphService.matches(t,this)},e.prototype.getElementById=function(t){return Qa.sceneGraphService.querySelector("#".concat(t),this)},e.prototype.getElementsByName=function(t){return Qa.sceneGraphService.querySelectorAll('[name="'.concat(t,'"]'),this)},e.prototype.getElementsByClassName=function(t){return Qa.sceneGraphService.querySelectorAll(".".concat(t),this)},e.prototype.getElementsByTagName=function(t){return Qa.sceneGraphService.querySelectorAll(t,this)},e.prototype.querySelector=function(t){return Qa.sceneGraphService.querySelector(t,this)},e.prototype.querySelectorAll=function(t){return Qa.sceneGraphService.querySelectorAll(t,this)},e.prototype.closest=function(t){var e=this;do{if(Qa.sceneGraphService.matches(t,e))return e;e=e.parentElement}while(null!==e);return null},e.prototype.find=function(t){var e=this,n=null;return this.forEach((function(r){return!(r===e||!t(r))&&(n=r,!0)})),n},e.prototype.findAll=function(t){var e=this,n=[];return this.forEach((function(r){r!==e&&t(r)&&n.push(r)})),n},e.prototype.after=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(this.parentNode){var r=this.parentNode.childNodes.indexOf(this);e.forEach((function(e,n){var i;return null===(i=t.parentNode)||void 0===i?void 0:i.appendChild(e,r+n+1)}))}},e.prototype.before=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(this.parentNode){var r=this.parentNode.childNodes.indexOf(this),i=R(e),o=i[0],a=i.slice(1);this.parentNode.appendChild(o,r),(t=o).after.apply(t,O([],R(a),!1))}},e.prototype.replaceWith=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.after.apply(this,O([],R(t),!1)),this.remove()},e.prototype.append=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];e.forEach((function(e){return t.appendChild(e)}))},e.prototype.prepend=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];e.forEach((function(e,n){return t.appendChild(e,n)}))},e.prototype.replaceChildren=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(;this.childNodes.length&&this.firstChild;)this.removeChild(this.firstChild);this.append.apply(this,O([],R(t),!1))},e.prototype.remove=function(){return this.parentNode?this.parentNode.removeChild(this):this},e.prototype.destroy=function(){this.dispatchEvent(is),this.remove(),this.emitter.removeAllListeners(),this.destroyed=!0},e.prototype.getGeometryBounds=function(){return Qa.sceneGraphService.getGeometryBounds(this)},e.prototype.getRenderBounds=function(){return Qa.sceneGraphService.getBounds(this,!0)},e.prototype.getBounds=function(){return Qa.sceneGraphService.getBounds(this)},e.prototype.getLocalBounds=function(){return Qa.sceneGraphService.getLocalBounds(this)},e.prototype.getBoundingClientRect=function(){return Qa.sceneGraphService.getBoundingClientRect(this)},e.prototype.getClientRects=function(){return[this.getBoundingClientRect()]},e.prototype.computedStyleMap=function(){return new Map(Object.entries(this.computedStyle))},e.prototype.getAttributeNames=function(){return Object.keys(this.attributes)},e.prototype.getAttribute=function(t){if(function(t){return"symbol"===h(t)}(t))return Qa.enableCSSParsing?null:void 0;var e=this.attributes[t];if(void 0===e){var n=Fr(t);return e=this.attributes[n],Qa.enableCSSParsing&&Wt(e)?null:e}return e},e.prototype.hasAttribute=function(t){return this.getAttributeNames().includes(t)},e.prototype.hasAttributes=function(){return!!this.getAttributeNames().length},e.prototype.removeAttribute=function(t){this.setAttribute(t,null),delete this.attributes[t]},e.prototype.setAttribute=function(t,e,n){this.attributes[t]=e},e.prototype.getAttributeNS=function(t,e){throw new Error(fr)},e.prototype.getAttributeNode=function(t){throw new Error(fr)},e.prototype.getAttributeNodeNS=function(t,e){throw new Error(fr)},e.prototype.hasAttributeNS=function(t,e){throw new Error(fr)},e.prototype.removeAttributeNS=function(t,e){throw new Error(fr)},e.prototype.removeAttributeNode=function(t){throw new Error(fr)},e.prototype.setAttributeNS=function(t,e,n){throw new Error(fr)},e.prototype.setAttributeNode=function(t){throw new Error(fr)},e.prototype.setAttributeNodeNS=function(t){throw new Error(fr)},e.prototype.toggleAttribute=function(t,e){throw new Error(fr)},e}(Ba);function as(t){return!!(null==t?void 0:t.nodeName)}var ss=new Va(Ha.ATTR_MODIFIED,null,null,null,null,Va.MODIFICATION,null,null),ls={anchor:"",opacity:"",fillOpacity:"",strokeOpacity:"",fill:"",stroke:"",transform:"",transformOrigin:"",visibility:"",pointerEvents:"",lineWidth:"",lineCap:"",lineJoin:"",increasedLineWidthForHitTesting:"",fontSize:"",fontFamily:"",fontStyle:"",fontWeight:"",fontVariant:"",textAlign:"",textBaseline:"",textTransform:"",zIndex:"",filter:"",shadowType:""},us={anchor:[0,0],fill:Qr,stroke:Qr,transform:[],zIndex:0,filter:[],shadowType:"outer",miterLimit:10},cs=S(S({},us),{opacity:1,fillOpacity:1,strokeOpacity:1,visibility:"visible",pointerEvents:"auto",lineWidth:1,lineCap:"butt",lineJoin:"miter",increasedLineWidthForHitTesting:0,fillRule:"nonzero"}),hs=O(O([],R(["opacity","fillOpacity","strokeOpacity","transformOrigin","visibility","pointerEvents","lineWidth","lineCap","lineJoin","increasedLineWidthForHitTesting"]),!1),["fontSize","fontFamily","fontStyle","fontWeight","fontVariant","textAlign","textBaseline","textTransform"],!1),ds="data-",fs=function(t){function e(e){var n,r=t.call(this)||this;r.isCustomElement=!1,r.isMutationObserved=!1,r.activeAnimations=[],r.getClip=function(){return this.style.clipPath||null},r.config=e,r.config.interactive=null!==(n=r.config.capture)&&void 0!==n?n:r.config.interactive,r.id=r.config.id||"",r.name=r.config.name||"",(r.config.className||r.config.class)&&(r.className=r.config.className||r.config.class),r.nodeName=r.config.type||Bn.GROUP,r.config.style=r.config.style||r.config.attrs||{},Object.assign(r.config.style,r.config.attrs),null!=r.config.visible&&(r.config.style.visibility=!1===r.config.visible?"hidden":"visible"),null!=r.config.interactive&&(r.config.style.pointerEvents=!1===r.config.interactive?"none":"auto"),Object.assign(r.parsedStyle,Qa.enableCSSParsing?us:cs,r.config.initialParsedStyle),Qa.enableCSSParsing&&Object.assign(r.attributes,ls),r.initAttributes(r.config.style);var i=Qa.globalThis.Proxy?Qa.globalThis.Proxy:function(){};return Qa.enableDataset&&(r.dataset=new i({},{get:function(t,e){var n="".concat(ds).concat(kr(e));return void 0!==t[n]?t[n]:r.getAttribute(n)},set:function(t,e,n){return r.setAttribute("".concat(ds).concat(kr(e)),n),!0}})),Qa.enableStyleSyntax&&(r.style=new i({setProperty:function(t,e){r.setAttribute(t,e)},getPropertyValue:function(t){return r.getAttribute(t)},removeProperty:function(t){r.removeAttribute(t)},item:function(){return""}},{get:function(t,e){return void 0!==t[e]?t[e]:r.getAttribute(e)},set:function(t,e,n){return r.setAttribute(e,n),!0}})),r}return E(e,t),e.prototype.destroy=function(){t.prototype.destroy.call(this),this.getAnimations().forEach((function(t){t.cancel()}))},e.prototype.cloneNode=function(t,e){var n=S({},this.attributes);for(var r in n){var i=n[r];as(i)&&"clipPath"!==r&&"offsetPath"!==r&&"textPath"!==r&&(n[r]=i.cloneNode(t)),e&&(n[r]=e(r,i))}var o=new this.constructor({id:this.id,name:this.name,className:this.name,interactive:this.interactive,style:n});return o.setLocalTransform(this.getLocalTransform()),t&&this.children.forEach((function(e){if(!e.style.isMarker){var n=e.cloneNode(t);o.appendChild(n)}})),o},e.prototype.initAttributes=function(t){void 0===t&&(t={});var e=this.renderable,n={forceUpdateGeometry:!0};Qa.enableCSSParsing&&(n.usedAttributes=hs);var r={};for(var i in t){r[Fr(i)]=t[i]}Qa.styleValueRegistry.processProperties(this,r,n),e.dirty=!0},e.prototype.setAttribute=function(e,n,r,i){void 0===r&&(r=!1),void 0===i&&(i=!0);var o=Fr(e);ne(n)||(r||n!==this.attributes[o])&&(this.internalSetAttribute(o,n,{memoize:i}),t.prototype.setAttribute.call(this,o,n))},e.prototype.internalSetAttribute=function(t,e,n){var r;void 0===n&&(n={});var i=this.renderable,o=this.attributes[t],a=this.parsedStyle[t];Qa.styleValueRegistry.processProperties(this,((r={})[t]=e,r),n),i.dirty=!0;var s=this.parsedStyle[t];this.isConnected&&(ss.relatedNode=this,ss.prevValue=o,ss.newValue=e,ss.attrName=t,ss.prevParsedValue=a,ss.newParsedValue=s,this.isMutationObserved?this.dispatchEvent(ss):(ss.target=this,this.ownerDocument.defaultView.dispatchEvent(ss,!0))),(this.isCustomElement&&this.isConnected||!this.isCustomElement)&&this.attributeChangedCallback&&this.attributeChangedCallback(t,o,e,a,s)},e.prototype.getBBox=function(){var t=this.getBounds(),e=R(t.getMin(),2),n=e[0],r=e[1],i=R(t.getMax(),2),o=i[0],a=i[1];return new dr(n,r,o-n,a-r)},e.prototype.setOrigin=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=0),Qa.sceneGraphService.setOrigin(this,Yn(t,e,n)),this},e.prototype.getOrigin=function(){return Qa.sceneGraphService.getOrigin(this)},e.prototype.setPosition=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=0),Qa.sceneGraphService.setPosition(this,Yn(t,e,n)),this},e.prototype.setLocalPosition=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=0),Qa.sceneGraphService.setLocalPosition(this,Yn(t,e,n)),this},e.prototype.translate=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=0),Qa.sceneGraphService.translate(this,Yn(t,e,n)),this},e.prototype.translateLocal=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=0),Qa.sceneGraphService.translateLocal(this,Yn(t,e,n)),this},e.prototype.getPosition=function(){return Qa.sceneGraphService.getPosition(this)},e.prototype.getLocalPosition=function(){return Qa.sceneGraphService.getLocalPosition(this)},e.prototype.scale=function(t,e,n){return this.scaleLocal(t,e,n)},e.prototype.scaleLocal=function(t,e,n){return"number"==typeof t&&(t=Yn(t,e=e||t,n=n||t)),Qa.sceneGraphService.scaleLocal(this,t),this},e.prototype.setLocalScale=function(t,e,n){return"number"==typeof t&&(t=Yn(t,e=e||t,n=n||t)),Qa.sceneGraphService.setLocalScale(this,t),this},e.prototype.getLocalScale=function(){return Qa.sceneGraphService.getLocalScale(this)},e.prototype.getScale=function(){return Qa.sceneGraphService.getScale(this)},e.prototype.getEulerAngles=function(){return qn(R(Kn(pt(),Qa.sceneGraphService.getWorldTransform(this)),3)[2])},e.prototype.getLocalEulerAngles=function(){return qn(R(Kn(pt(),Qa.sceneGraphService.getLocalRotation(this)),3)[2])},e.prototype.setEulerAngles=function(t){return Qa.sceneGraphService.setEulerAngles(this,0,0,t),this},e.prototype.setLocalEulerAngles=function(t){return Qa.sceneGraphService.setLocalEulerAngles(this,0,0,t),this},e.prototype.rotateLocal=function(t,e,n){return Wt(e)&&Wt(n)?Qa.sceneGraphService.rotateLocal(this,0,0,t):Qa.sceneGraphService.rotateLocal(this,t,e,n),this},e.prototype.rotate=function(t,e,n){return Wt(e)&&Wt(n)?Qa.sceneGraphService.rotate(this,0,0,t):Qa.sceneGraphService.rotate(this,t,e,n),this},e.prototype.setRotation=function(t,e,n,r){return Qa.sceneGraphService.setRotation(this,t,e,n,r),this},e.prototype.setLocalRotation=function(t,e,n,r){return Qa.sceneGraphService.setLocalRotation(this,t,e,n,r),this},e.prototype.setLocalSkew=function(t,e){return Qa.sceneGraphService.setLocalSkew(this,t,e),this},e.prototype.getRotation=function(){return Qa.sceneGraphService.getRotation(this)},e.prototype.getLocalRotation=function(){return Qa.sceneGraphService.getLocalRotation(this)},e.prototype.getLocalSkew=function(){return Qa.sceneGraphService.getLocalSkew(this)},e.prototype.getLocalTransform=function(){return Qa.sceneGraphService.getLocalTransform(this)},e.prototype.getWorldTransform=function(){return Qa.sceneGraphService.getWorldTransform(this)},e.prototype.setLocalTransform=function(t){return Qa.sceneGraphService.setLocalTransform(this,t),this},e.prototype.resetLocalTransform=function(){Qa.sceneGraphService.resetLocalTransform(this)},e.prototype.getAnimations=function(){return this.activeAnimations},e.prototype.animate=function(t,e){var n,r=null===(n=this.ownerDocument)||void 0===n?void 0:n.timeline;return r?r.play(this,t,e):null},e.prototype.isVisible=function(){var t;return"visible"===(null===(t=this.parsedStyle)||void 0===t?void 0:t.visibility)},Object.defineProperty(e.prototype,"interactive",{get:function(){return this.isInteractive()},set:function(t){this.style.pointerEvents=t?"auto":"none"},enumerable:!1,configurable:!0}),e.prototype.isInteractive=function(){var t;return"none"!==(null===(t=this.parsedStyle)||void 0===t?void 0:t.pointerEvents)},e.prototype.isCulled=function(){return!(!this.cullable||!this.cullable.enable||this.cullable.visible)},e.prototype.toFront=function(){return this.parentNode&&(this.style.zIndex=Math.max.apply(Math,O([],R(this.parentNode.children.map((function(t){return Number(t.style.zIndex)}))),!1))+1),this},e.prototype.toBack=function(){return this.parentNode&&(this.style.zIndex=Math.min.apply(Math,O([],R(this.parentNode.children.map((function(t){return Number(t.style.zIndex)}))),!1))-1),this},e.prototype.getConfig=function(){return this.config},e.prototype.attr=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=R(e,2),i=r[0],o=r[1];return i?Yt(i)?(Object.keys(i).forEach((function(e){t.setAttribute(e,i[e])})),this):2===e.length?(this.setAttribute(i,o),this):this.attributes[i]:this.attributes},e.prototype.getMatrix=function(t){var e=t||this.getWorldTransform(),n=R(J(pt(),e),2),r=n[0],i=n[1],o=R(tt(pt(),e),2),a=o[0],s=o[1],l=et(At(),e),u=R(Kn(pt(),l),3),c=u[0],h=u[2];return Zn(c||h,r,i,a,s)},e.prototype.getLocalMatrix=function(){return this.getMatrix(this.getLocalTransform())},e.prototype.setMatrix=function(t){var e=R($n(t),5),n=e[0],r=e[1],i=e[2],o=e[3],a=e[4];this.setEulerAngles(a).setPosition(n,r).setLocalScale(i,o)},e.prototype.setLocalMatrix=function(t){var e=R($n(t),5),n=e[0],r=e[1],i=e[2],o=e[3],a=e[4];this.setLocalEulerAngles(a).setLocalPosition(n,r).setLocalScale(i,o)},e.prototype.show=function(){Qa.enableCSSParsing?this.style.visibility="visible":this.forEach((function(t){t.style.visibility="visible"}))},e.prototype.hide=function(){Qa.enableCSSParsing?this.style.visibility="hidden":this.forEach((function(t){t.style.visibility="hidden"}))},e.prototype.getCount=function(){return this.childElementCount},e.prototype.getParent=function(){return this.parentElement},e.prototype.getChildren=function(){return this.children},e.prototype.getFirst=function(){return this.firstElementChild},e.prototype.getLast=function(){return this.lastElementChild},e.prototype.getChildByIndex=function(t){return this.children[t]||null},e.prototype.add=function(t,e){return this.appendChild(t,e)},e.prototype.setClip=function(t){this.style.clipPath=t},e.prototype.set=function(t,e){this.config[t]=e},e.prototype.get=function(t){return this.config[t]},e.prototype.moveTo=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=0),this.setPosition(t,e,n),this},e.prototype.move=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=0),this.setPosition(t,e,n),this},e.prototype.setZIndex=function(t){return this.style.zIndex=t,this},e}(os),ps=function(t){function e(e){void 0===e&&(e={});var n=e.style,r=T(e,["style"]);return t.call(this,S({type:Bn.CIRCLE,style:Qa.enableCSSParsing?S({cx:"",cy:"",r:""},n):S({},n),initialParsedStyle:{anchor:[.5,.5],transformOrigin:Qa.enableCSSParsing?null:[ni,ni]}},r))||this}return E(e,t),e}(fs);!function(t){function e(e){void 0===e&&(e={});var n=this,r=e.style,i=T(e,["style"]);return(n=t.call(this,S({style:Qa.enableCSSParsing?S({x:"",y:""},r):S({},r)},i))||this).isCustomElement=!0,n}E(e,t)}(fs);var vs,gs=function(t){function e(e){void 0===e&&(e={});var n=e.style,r=T(e,["style"]);return t.call(this,S({type:Bn.ELLIPSE,style:Qa.enableCSSParsing?S({cx:"",cy:"",rx:"",ry:""},n):S({},n),initialParsedStyle:{anchor:[.5,.5],transformOrigin:Qa.enableCSSParsing?null:[ni,ni]}},r))||this}return E(e,t),e}(fs),ys=function(t){function e(e){void 0===e&&(e={});var n=e.style,r=T(e,["style"]);return t.call(this,S({type:Bn.GROUP,style:Qa.enableCSSParsing?S({x:"",y:"",width:"",height:""},n):S({},n)},r))||this}return E(e,t),e}(fs),ms=function(t){function e(e){void 0===e&&(e={});var n=this,r=e.style,i=T(e,["style"]);return(n=t.call(this,S({type:Bn.HTML,style:Qa.enableCSSParsing?S({x:"",y:"",width:"auto",height:"auto",innerHTML:""},r):S({},r)},i))||this).cullable.enable=!1,n}return E(e,t),e.prototype.getDomElement=function(){return this.parsedStyle.$el},e.prototype.getBoundingClientRect=function(){if(this.parsedStyle.$el)return this.parsedStyle.$el.getBoundingClientRect();var t=this.parsedStyle,e=t.x,n=t.y,r=t.width,i=t.height;return new dr(e,n,r,i)},e.prototype.getClientRects=function(){return[this.getBoundingClientRect()]},e.prototype.getBounds=function(){var t,e,n=this.getBoundingClientRect(),r=null===(e=null===(t=this.ownerDocument)||void 0===t?void 0:t.defaultView)||void 0===e?void 0:e.getContextService().getBoundingClientRect(),i=new or,o=n.left-((null==r?void 0:r.left)||0),a=n.top-((null==r?void 0:r.top)||0);return i.setMinMax([o,a,0],[o+n.width,a+n.height,0]),i},e.prototype.getLocalBounds=function(){if(this.parentNode){var t=V(D(),this.parentNode.getWorldTransform()),e=this.getBounds();if(!or.isEmpty(e)){var n=new or;return n.setFromTransformedAABB(e,t),n}}return this.getBounds()},e}(fs),Cs=function(t){function e(e){void 0===e&&(e={});var n=e.style,r=T(e,["style"]);return t.call(this,S({type:Bn.IMAGE,style:Qa.enableCSSParsing?S({x:"",y:"",img:"",width:"",height:""},n):S({},n)},r))||this}return E(e,t),e}(fs),ws=function(t){function e(e){void 0===e&&(e={});var n=this,r=e.style,i=T(e,["style"]);(n=t.call(this,S({type:Bn.LINE,style:S({x1:0,y1:0,x2:0,y2:0,z1:0,z2:0},r)},i))||this).markerStartAngle=0,n.markerEndAngle=0;var o=n.parsedStyle,a=o.markerStart,s=o.markerEnd;return a&&as(a)&&(n.markerStartAngle=a.getLocalEulerAngles(),n.appendChild(a)),s&&as(s)&&(n.markerEndAngle=s.getLocalEulerAngles(),n.appendChild(s)),n.transformMarker(!0),n.transformMarker(!1),n}return E(e,t),e.prototype.attributeChangedCallback=function(t,e,n,r,i){"x1"===t||"y1"===t||"x2"===t||"y2"===t||"markerStartOffset"===t||"markerEndOffset"===t?(this.transformMarker(!0),this.transformMarker(!1)):"markerStart"===t?(r&&as(r)&&(this.markerStartAngle=0,r.remove()),i&&as(i)&&(this.markerStartAngle=i.getLocalEulerAngles(),this.appendChild(i),this.transformMarker(!0))):"markerEnd"===t&&(r&&as(r)&&(this.markerEndAngle=0,r.remove()),i&&as(i)&&(this.markerEndAngle=i.getLocalEulerAngles(),this.appendChild(i),this.transformMarker(!1)))},e.prototype.transformMarker=function(t){var e=this.parsedStyle,n=e.markerStart,r=e.markerEnd,i=e.markerStartOffset,o=e.markerEndOffset,a=e.x1,s=e.x2,l=e.y1,u=e.y2,c=e.defX,h=e.defY,d=t?n:r;if(d&&as(d)){var f,p,v,g,y,m,C;t?(g=a-c,y=l-h,p=s-a,v=u-l,m=i||0,C=this.markerStartAngle):(g=s-c,y=u-h,p=a-s,v=l-u,m=o||0,C=this.markerEndAngle),f=Math.atan2(v,p),d.setLocalEulerAngles(180*f/Math.PI+C),d.setLocalPosition(g+Math.cos(f)*m,y+Math.sin(f)*m)}},e.prototype.getPoint=function(t,e){void 0===e&&(e=!1);var n=this.parsedStyle,r=n.x1,i=n.y1,o=n.x2,a=n.y2,s=n.defX,l=n.defY,u=Sn(r,i,o,a,t),c=u.x,h=u.y,d=_t(pt(),yt(c-s,h-l,0),e?this.getWorldTransform():this.getLocalTransform());return new hr(d[0],d[1])},e.prototype.getPointAtLength=function(t,e){return void 0===e&&(e=!1),this.getPoint(t/this.getTotalLength(),e)},e.prototype.getTotalLength=function(){var t=this.parsedStyle;return En(t.x1,t.y1,t.x2,t.y2)},e}(fs),xs=function(t){function e(e){void 0===e&&(e={});var n=this,r=e.style,i=T(e,["style"]);(n=t.call(this,S({type:Bn.PATH,style:Qa.enableCSSParsing?S({path:"",miterLimit:""},r):S({},r),initialParsedStyle:Qa.enableCSSParsing?null:{miterLimit:4,path:S({},ii)}},i))||this).markerStartAngle=0,n.markerEndAngle=0,n.markerMidList=[];var o=n.parsedStyle,a=o.markerStart,s=o.markerEnd,l=o.markerMid;return a&&as(a)&&(n.markerStartAngle=a.getLocalEulerAngles(),n.appendChild(a)),l&&as(l)&&n.placeMarkerMid(l),s&&as(s)&&(n.markerEndAngle=s.getLocalEulerAngles(),n.appendChild(s)),n.transformMarker(!0),n.transformMarker(!1),n}return E(e,t),e.prototype.attributeChangedCallback=function(t,e,n,r,i){"path"===t?(this.transformMarker(!0),this.transformMarker(!1),this.placeMarkerMid(this.parsedStyle.markerMid)):"markerStartOffset"===t||"markerEndOffset"===t?(this.transformMarker(!0),this.transformMarker(!1)):"markerStart"===t?(r&&as(r)&&(this.markerStartAngle=0,r.remove()),i&&as(i)&&(this.markerStartAngle=i.getLocalEulerAngles(),this.appendChild(i),this.transformMarker(!0))):"markerEnd"===t?(r&&as(r)&&(this.markerEndAngle=0,r.remove()),i&&as(i)&&(this.markerEndAngle=i.getLocalEulerAngles(),this.appendChild(i),this.transformMarker(!1))):"markerMid"===t&&this.placeMarkerMid(i)},e.prototype.transformMarker=function(t){var e=this.parsedStyle,n=e.markerStart,r=e.markerEnd,i=e.markerStartOffset,o=e.markerEndOffset,a=e.defX,s=e.defY,l=t?n:r;if(l&&as(l)){var u,c,h,d,f,p,v;if(t){var g=R(this.getStartTangent(),2),y=g[0];d=(m=g[1])[0]-a,f=m[1]-s,c=y[0]-m[0],h=y[1]-m[1],p=i||0,v=this.markerStartAngle}else{var m,C=R(this.getEndTangent(),2);y=C[0];d=(m=C[1])[0]-a,f=m[1]-s,c=y[0]-m[0],h=y[1]-m[1],p=o||0,v=this.markerEndAngle}u=Math.atan2(h,c),l.setLocalEulerAngles(180*u/Math.PI+v),l.setLocalPosition(d+Math.cos(u)*p,f+Math.sin(u)*p)}},e.prototype.placeMarkerMid=function(t){var e=this.parsedStyle,n=e.path.segments,r=e.defX,i=e.defY;if(this.markerMidList.forEach((function(t){t.remove()})),t&&as(t))for(var o=1;o<n.length-1;o++){var a=R(n[o].currentPoint,2),s=a[0],l=a[1],u=1===o?t:t.cloneNode(!0);this.markerMidList.push(u),this.appendChild(u),u.setLocalPosition(s-r,l-i)}},e.prototype.getTotalLength=function(){return Hi(this)},e.prototype.getPointAtLength=function(t,e){void 0===e&&(e=!1);var n=this.parsedStyle,r=n.defX,i=n.defY,o=function(t,e,n){return ke(t,e,S(S({},n),{bbox:!1,length:!0})).point}(n.path.absolutePath,t),a=o.x,s=o.y,l=_t(pt(),yt(a-r,s-i,0),e?this.getWorldTransform():this.getLocalTransform());return new hr(l[0],l[1])},e.prototype.getPoint=function(t,e){return void 0===e&&(e=!1),this.getPointAtLength(t*Hi(this),e)},e.prototype.getStartTangent=function(){var t=this.parsedStyle.path.segments,e=[];if(t.length>1){var n=t[0].currentPoint,r=t[1].currentPoint,i=t[1].startTangent;e=[],i?(e.push([n[0]-i[0],n[1]-i[1]]),e.push([n[0],n[1]])):(e.push([r[0],r[1]]),e.push([n[0],n[1]]))}return e},e.prototype.getEndTangent=function(){var t=this.parsedStyle.path.segments,e=t.length,n=[];if(e>1){var r=t[e-2].currentPoint,i=t[e-1].currentPoint,o=t[e-1].endTangent;n=[],o?(n.push([i[0]-o[0],i[1]-o[1]]),n.push([i[0],i[1]])):(n.push([r[0],r[1]]),n.push([i[0],i[1]]))}return n},e}(fs),bs=function(t){function e(e){void 0===e&&(e={});var n=this,r=e.style,i=T(e,["style"]);(n=t.call(this,S({type:Bn.POLYGON,style:Qa.enableCSSParsing?S({points:"",miterLimit:"",isClosed:!0},r):S({},r),initialParsedStyle:Qa.enableCSSParsing?null:{points:{points:[],totalLength:0,segments:[]},miterLimit:4,isClosed:!0}},i))||this).markerStartAngle=0,n.markerEndAngle=0,n.markerMidList=[];var o=n.parsedStyle,a=o.markerStart,s=o.markerEnd,l=o.markerMid;return a&&as(a)&&(n.markerStartAngle=a.getLocalEulerAngles(),n.appendChild(a)),l&&as(l)&&n.placeMarkerMid(l),s&&as(s)&&(n.markerEndAngle=s.getLocalEulerAngles(),n.appendChild(s)),n.transformMarker(!0),n.transformMarker(!1),n}return E(e,t),e.prototype.attributeChangedCallback=function(t,e,n,r,i){"points"===t?(this.transformMarker(!0),this.transformMarker(!1),this.placeMarkerMid(this.parsedStyle.markerMid)):"markerStartOffset"===t||"markerEndOffset"===t?(this.transformMarker(!0),this.transformMarker(!1)):"markerStart"===t?(r&&as(r)&&(this.markerStartAngle=0,r.remove()),i&&as(i)&&(this.markerStartAngle=i.getLocalEulerAngles(),this.appendChild(i),this.transformMarker(!0))):"markerEnd"===t?(r&&as(r)&&(this.markerEndAngle=0,r.remove()),i&&as(i)&&(this.markerEndAngle=i.getLocalEulerAngles(),this.appendChild(i),this.transformMarker(!1))):"markerMid"===t&&this.placeMarkerMid(i)},e.prototype.transformMarker=function(t){var e=this.parsedStyle,n=e.markerStart,r=e.markerEnd,i=e.markerStartOffset,o=e.markerEndOffset,a=e.points,s=e.defX,l=e.defY,u=(a||{}).points,c=t?n:r;if(c&&as(c)&&u){var h,d,f,p,v,g,y;if(p=u[0][0]-s,v=u[0][1]-l,t)d=u[1][0]-u[0][0],f=u[1][1]-u[0][1],g=i||0,y=this.markerStartAngle;else{var m=u.length;this.parsedStyle.isClosed?(d=u[m-1][0]-u[0][0],f=u[m-1][1]-u[0][1]):(p=u[m-1][0]-s,v=u[m-1][1]-l,d=u[m-2][0]-u[m-1][0],f=u[m-2][1]-u[m-1][1]),g=o||0,y=this.markerEndAngle}h=Math.atan2(f,d),c.setLocalEulerAngles(180*h/Math.PI+y),c.setLocalPosition(p+Math.cos(h)*g,v+Math.sin(h)*g)}},e.prototype.placeMarkerMid=function(t){var e=this.parsedStyle,n=e.points,r=e.defX,i=e.defY,o=(n||{}).points;if(this.markerMidList.forEach((function(t){t.remove()})),this.markerMidList=[],t&&as(t)&&o)for(var a=1;a<(this.parsedStyle.isClosed?o.length:o.length-1);a++){var s=o[a][0]-r,l=o[a][1]-i,u=1===a?t:t.cloneNode(!0);this.markerMidList.push(u),this.appendChild(u),u.setLocalPosition(s,l)}},e}(fs),Es=function(t){function e(e){void 0===e&&(e={});var n=e.style,r=T(e,["style"]);return t.call(this,S({type:Bn.POLYLINE,style:Qa.enableCSSParsing?S({points:"",miterLimit:"",isClosed:!1},n):S({},n),initialParsedStyle:Qa.enableCSSParsing?null:{points:{points:[],totalLength:0,segments:[]},miterLimit:4,isClosed:!1}},r))||this}return E(e,t),e.prototype.getTotalLength=function(){return this.parsedStyle.points.totalLength},e.prototype.getPointAtLength=function(t,e){return void 0===e&&(e=!1),this.getPoint(t/this.getTotalLength(),e)},e.prototype.getPoint=function(t,e){void 0===e&&(e=!1);var n=this.parsedStyle,r=n.defX,i=n.defY,o=n.points,a=o.points,s=o.segments,l=0,u=0;s.forEach((function(e,n){t>=e[0]&&t<=e[1]&&(l=(t-e[0])/(e[1]-e[0]),u=n)}));var c=Sn(a[u][0],a[u][1],a[u+1][0],a[u+1][1],l),h=c.x,d=c.y,f=_t(pt(),yt(h-r,d-i,0),e?this.getWorldTransform():this.getLocalTransform());return new hr(f[0],f[1])},e.prototype.getStartTangent=function(){var t=this.parsedStyle.points.points,e=[];return e.push([t[1][0],t[1][1]]),e.push([t[0][0],t[0][1]]),e},e.prototype.getEndTangent=function(){var t=this.parsedStyle.points.points,e=t.length-1,n=[];return n.push([t[e-1][0],t[e-1][1]]),n.push([t[e][0],t[e][1]]),n},e}(bs),Ss=function(t){function e(e){void 0===e&&(e={});var n=e.style,r=T(e,["style"]);return t.call(this,S({type:Bn.RECT,style:Qa.enableCSSParsing?S({x:"",y:"",width:"",height:"",radius:""},n):S({},n)},r))||this}return E(e,t),e}(fs),Ts=function(t){function e(e){void 0===e&&(e={});var n=e.style,r=T(e,["style"]);return t.call(this,S({type:Bn.TEXT,style:Qa.enableCSSParsing?S({x:"",y:"",text:"",fontSize:"",fontFamily:"",fontStyle:"",fontWeight:"",fontVariant:"",textAlign:"",textBaseline:"",textTransform:"",fill:"black",letterSpacing:"",lineHeight:"",miterLimit:"",wordWrap:!1,wordWrapWidth:0,leading:0,dx:"",dy:""},n):S({fill:"black"},n),initialParsedStyle:Qa.enableCSSParsing?{}:{x:0,y:0,fontSize:16,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",lineHeight:0,letterSpacing:0,textBaseline:"alphabetic",textAlign:"start",wordWrap:!1,wordWrapWidth:0,leading:0,dx:0,dy:0}},r))||this}return E(e,t),e.prototype.getComputedTextLength=function(){var t;return(null===(t=this.parsedStyle.metrics)||void 0===t?void 0:t.maxLineWidth)||0},e.prototype.getLineBoundingRects=function(){var t;return(null===(t=this.parsedStyle.metrics)||void 0===t?void 0:t.lineMetrics)||[]},e.prototype.isOverflowing=function(){return!!this.parsedStyle.isOverflowing},e}(fs),Ls=function(){function t(){this.registry={},this.define(Bn.CIRCLE,ps),this.define(Bn.ELLIPSE,gs),this.define(Bn.RECT,Ss),this.define(Bn.IMAGE,Cs),this.define(Bn.LINE,ws),this.define(Bn.GROUP,ys),this.define(Bn.PATH,xs),this.define(Bn.POLYGON,bs),this.define(Bn.POLYLINE,Es),this.define(Bn.TEXT,Ts),this.define(Bn.HTML,ms)}return t.prototype.define=function(t,e){this.registry[t]=e},t.prototype.get=function(t){return this.registry[t]},t}(),_s=function(t){function e(){var e=t.call(this)||this;e.defaultView=null,e.ownerDocument=null,e.nodeName="document";try{e.timeline=new Qa.AnimationTimeline(e)}catch(r){}var n={};return xo.forEach((function(t){var e=t.n,r=t.inh,i=t.d;r&&i&&(n[e]=Br(i)?i(Bn.GROUP):i)})),e.documentElement=new ys({id:"g-root",style:n}),e.documentElement.ownerDocument=e,e.documentElement.parentNode=e,e.childNodes=[e.documentElement],e}return E(e,t),Object.defineProperty(e.prototype,"children",{get:function(){return this.childNodes},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"childElementCount",{get:function(){return this.childNodes.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"firstElementChild",{get:function(){return this.firstChild},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastElementChild",{get:function(){return this.lastChild},enumerable:!1,configurable:!0}),e.prototype.createElement=function(t,e){if("svg"===t)return this.documentElement;var n=this.defaultView.customElements.get(t);n||(console.warn("Unsupported tagName: ",t),n="tspan"===t?Ts:ys);var r=new n(e);return r.ownerDocument=this,r},e.prototype.createElementNS=function(t,e,n){return this.createElement(e,n)},e.prototype.cloneNode=function(t){throw new Error(fr)},e.prototype.destroy=function(){try{this.documentElement.destroyChildren(),this.timeline.destroy()}catch(t){}},e.prototype.elementsFromBBox=function(t,e,n,r){var i=this.defaultView.context.rBushRoot.search({minX:t,minY:e,maxX:n,maxY:r}),o=[];return i.forEach((function(t){var e=t.displayObject,n=e.parsedStyle.pointerEvents,r=["auto","visiblepainted","visiblefill","visiblestroke","visible"].includes(n);(!r||r&&e.isVisible())&&!e.isCulled()&&e.isInteractive()&&o.push(e)})),o.sort((function(t,e){return e.sortable.renderOrder-t.sortable.renderOrder})),o},e.prototype.elementFromPointSync=function(t,e){var n=this.defaultView.canvas2Viewport({x:t,y:e}),r=n.x,i=n.y,o=this.defaultView.getConfig(),a=o.width,s=o.height;if(r<0||i<0||r>a||i>s)return null;var l=this.defaultView.viewport2Client({x:r,y:i}),u=l.x,c=l.y,h=this.defaultView.getRenderingService().hooks.pickSync.call({topmost:!0,position:{x:t,y:e,viewportX:r,viewportY:i,clientX:u,clientY:c},picked:[]}).picked;return h&&h[0]||this.documentElement},e.prototype.elementFromPoint=function(t,e){return L(this,void 0,void 0,(function(){var n,r,i,o,a,s,l,u,c,h;return _(this,(function(d){switch(d.label){case 0:return n=this.defaultView.canvas2Viewport({x:t,y:e}),r=n.x,i=n.y,o=this.defaultView.getConfig(),a=o.width,s=o.height,r<0||i<0||r>a||i>s?[2,null]:(l=this.defaultView.viewport2Client({x:r,y:i}),u=l.x,c=l.y,[4,this.defaultView.getRenderingService().hooks.pick.promise({topmost:!0,position:{x:t,y:e,viewportX:r,viewportY:i,clientX:u,clientY:c},picked:[]})]);case 1:return[2,(h=d.sent().picked)&&h[0]||this.documentElement]}}))}))},e.prototype.elementsFromPointSync=function(t,e){var n=this.defaultView.canvas2Viewport({x:t,y:e}),r=n.x,i=n.y,o=this.defaultView.getConfig(),a=o.width,s=o.height;if(r<0||i<0||r>a||i>s)return[];var l=this.defaultView.viewport2Client({x:r,y:i}),u=l.x,c=l.y,h=this.defaultView.getRenderingService().hooks.pickSync.call({topmost:!1,position:{x:t,y:e,viewportX:r,viewportY:i,clientX:u,clientY:c},picked:[]}).picked;return h[h.length-1]!==this.documentElement&&h.push(this.documentElement),h},e.prototype.elementsFromPoint=function(t,e){return L(this,void 0,void 0,(function(){var n,r,i,o,a,s,l,u,c,h;return _(this,(function(d){switch(d.label){case 0:return n=this.defaultView.canvas2Viewport({x:t,y:e}),r=n.x,i=n.y,o=this.defaultView.getConfig(),a=o.width,s=o.height,r<0||i<0||r>a||i>s?[2,[]]:(l=this.defaultView.viewport2Client({x:r,y:i}),u=l.x,c=l.y,[4,this.defaultView.getRenderingService().hooks.pick.promise({topmost:!1,position:{x:t,y:e,viewportX:r,viewportY:i,clientX:u,clientY:c},picked:[]})]);case 1:return(h=d.sent().picked)[h.length-1]!==this.documentElement&&h.push(this.documentElement),[2,h]}}))}))},e.prototype.appendChild=function(t,e){throw new Error(pr)},e.prototype.insertBefore=function(t,e){throw new Error(pr)},e.prototype.removeChild=function(t,e){throw new Error(pr)},e.prototype.replaceChild=function(t,e,n){throw new Error(pr)},e.prototype.append=function(){throw new Error(pr)},e.prototype.prepend=function(){throw new Error(pr)},e.prototype.getElementById=function(t){return this.documentElement.getElementById(t)},e.prototype.getElementsByName=function(t){return this.documentElement.getElementsByName(t)},e.prototype.getElementsByTagName=function(t){return this.documentElement.getElementsByTagName(t)},e.prototype.getElementsByClassName=function(t){return this.documentElement.getElementsByClassName(t)},e.prototype.querySelector=function(t){return this.documentElement.querySelector(t)},e.prototype.querySelectorAll=function(t){return this.documentElement.querySelectorAll(t)},e.prototype.find=function(t){return this.documentElement.find(t)},e.prototype.findAll=function(t){return this.documentElement.findAll(t)},e}(Ba),Ms=function(){function t(t){this.strategies=t}return t.prototype.apply=function(e){var n=e.camera,r=e.renderingService,i=e.renderingContext,o=this.strategies;r.hooks.cull.tap(t.tag,(function(t){if(t){var e=t.cullable;return 0===o.length?e.visible=i.unculledEntities.indexOf(t.entity)>-1:e.visible=o.every((function(e){return e.isVisible(n,t)})),!t.isCulled()&&t.isVisible()?t:(t.dispatchEvent(new Pa(Ha.CULLED)),null)}return t})),r.hooks.afterRender.tap(t.tag,(function(t){t.cullable.visibilityPlaneMask=-1}))},t.tag="Culling",t}(),Rs=function(){function t(){var t=this;this.autoPreventDefault=!1,this.rootPointerEvent=new Ia(null),this.rootWheelEvent=new Aa(null),this.onPointerMove=function(e){var n,r,i,o,a=null===(o=null===(i=t.context.renderingContext.root)||void 0===i?void 0:i.ownerDocument)||void 0===o?void 0:o.defaultView;if(!a.supportsTouchEvents||"touch"!==e.pointerType){var s=t.normalizeToPointerEvent(e,a);try{for(var l=M(s),u=l.next();!u.done;u=l.next()){var c=u.value,h=t.bootstrapEvent(t.rootPointerEvent,c,a,e);t.context.eventService.mapEvent(h)}}catch(d){n={error:d}}finally{try{u&&!u.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}t.setCursor(t.context.eventService.cursor)}},this.onClick=function(e){var n,r,i,o,a=null===(o=null===(i=t.context.renderingContext.root)||void 0===i?void 0:i.ownerDocument)||void 0===o?void 0:o.defaultView,s=t.normalizeToPointerEvent(e,a);try{for(var l=M(s),u=l.next();!u.done;u=l.next()){var c=u.value,h=t.bootstrapEvent(t.rootPointerEvent,c,a,e);t.context.eventService.mapEvent(h)}}catch(d){n={error:d}}finally{try{u&&!u.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}t.setCursor(t.context.eventService.cursor)}}return t.prototype.apply=function(e){var n=this;this.context=e;var r=e.renderingService,i=this.context.renderingContext.root.ownerDocument.defaultView;this.context.eventService.setPickHandler((function(t){return n.context.renderingService.hooks.pickSync.call({position:t,picked:[],topmost:!0}).picked[0]||null})),r.hooks.pointerWheel.tap(t.tag,(function(t){var e=n.normalizeWheelEvent(t);n.context.eventService.mapEvent(e)})),r.hooks.pointerDown.tap(t.tag,(function(t){var e,r;if(!i.supportsTouchEvents||"touch"!==t.pointerType){var o=n.normalizeToPointerEvent(t,i);if(n.autoPreventDefault&&o[0].isNormalized)(t.cancelable||!("cancelable"in t))&&t.preventDefault();try{for(var a=M(o),s=a.next();!s.done;s=a.next()){var l=s.value,u=n.bootstrapEvent(n.rootPointerEvent,l,i,t);n.context.eventService.mapEvent(u)}}catch(c){e={error:c}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}n.setCursor(n.context.eventService.cursor)}})),r.hooks.pointerUp.tap(t.tag,(function(t){var e,r;if(!i.supportsTouchEvents||"touch"!==t.pointerType){var o=n.context.contextService.getDomElement(),a="outside";try{a=o&&t.target&&t.target!==o&&o.contains&&!o.contains(t.target)?"outside":""}catch(d){}var s=n.normalizeToPointerEvent(t,i);try{for(var l=M(s),u=l.next();!u.done;u=l.next()){var c=u.value,h=n.bootstrapEvent(n.rootPointerEvent,c,i,t);h.type+=a,n.context.eventService.mapEvent(h)}}catch(f){e={error:f}}finally{try{u&&!u.done&&(r=l.return)&&r.call(l)}finally{if(e)throw e.error}}n.setCursor(n.context.eventService.cursor)}})),r.hooks.pointerMove.tap(t.tag,this.onPointerMove),r.hooks.pointerOver.tap(t.tag,this.onPointerMove),r.hooks.pointerOut.tap(t.tag,this.onPointerMove),r.hooks.click.tap(t.tag,this.onClick),r.hooks.pointerCancel.tap(t.tag,(function(t){var e,r,o=n.normalizeToPointerEvent(t,i);try{for(var a=M(o),s=a.next();!s.done;s=a.next()){var l=s.value,u=n.bootstrapEvent(n.rootPointerEvent,l,i,t);n.context.eventService.mapEvent(u)}}catch(c){e={error:c}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}n.setCursor(n.context.eventService.cursor)}))},t.prototype.getViewportXY=function(t){var e,n,r=t.offsetX,i=t.offsetY,o=t.clientX,a=t.clientY;if(!this.context.config.supportsCSSTransform||Wt(r)||Wt(i)){var s=this.context.eventService.client2Viewport(new hr(o,a));e=s.x,n=s.y}else e=r,n=i;return{x:e,y:n}},t.prototype.bootstrapEvent=function(t,e,n,r){t.view=n,t.originalEvent=null,t.nativeEvent=r,t.pointerId=e.pointerId,t.width=e.width,t.height=e.height,t.isPrimary=e.isPrimary,t.pointerType=e.pointerType,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist,this.transferMouseData(t,e);var i=this.getViewportXY(e),o=i.x,a=i.y;t.viewport.x=o,t.viewport.y=a;var s=this.context.eventService.viewport2Canvas(t.viewport),l=s.x,u=s.y;return t.canvas.x=l,t.canvas.y=u,t.global.copyFrom(t.canvas),t.offset.copyFrom(t.canvas),t.isTrusted=r.isTrusted,"pointerleave"===t.type&&(t.type="pointerout"),t.type.startsWith("mouse")&&(t.type=t.type.replace("mouse","pointer")),t.type.startsWith("touch")&&(t.type=Jo[t.type]||t.type),t},t.prototype.normalizeWheelEvent=function(t){var e=this.rootWheelEvent;this.transferMouseData(e,t),e.deltaMode=t.deltaMode,e.deltaX=t.deltaX,e.deltaY=t.deltaY,e.deltaZ=t.deltaZ;var n=this.getViewportXY(t),r=n.x,i=n.y;e.viewport.x=r,e.viewport.y=i;var o=this.context.eventService.viewport2Canvas(e.viewport),a=o.x,s=o.y;return e.canvas.x=a,e.canvas.y=s,e.global.copyFrom(e.canvas),e.offset.copyFrom(e.canvas),e.nativeEvent=t,e.type=t.type,e},t.prototype.transferMouseData=function(t,e){t.isTrusted=e.isTrusted,t.srcElement=e.srcElement,t.timeStamp=ta.now(),t.type=e.type,t.altKey=e.altKey,t.metaKey=e.metaKey,t.shiftKey=e.shiftKey,t.ctrlKey=e.ctrlKey,t.button=e.button,t.buttons=e.buttons,t.client.x=e.clientX,t.client.y=e.clientY,t.movement.x=e.movementX,t.movement.y=e.movementY,t.page.x=e.pageX,t.page.y=e.pageY,t.screen.x=e.screenX,t.screen.y=e.screenY,t.relatedTarget=null},t.prototype.setCursor=function(t){this.context.contextService.applyCursorStyle(t||this.context.config.cursor||"default")},t.prototype.normalizeToPointerEvent=function(t,e){var n=[];if(e.isTouchEvent(t))for(var r=0;r<t.changedTouches.length;r++){var i=t.changedTouches[r];ne(i.button)&&(i.button=0),ne(i.buttons)&&(i.buttons=1),ne(i.isPrimary)&&(i.isPrimary=1===t.touches.length&&"touchstart"===t.type),ne(i.width)&&(i.width=i.radiusX||1),ne(i.height)&&(i.height=i.radiusY||1),ne(i.tiltX)&&(i.tiltX=0),ne(i.tiltY)&&(i.tiltY=0),ne(i.pointerType)&&(i.pointerType="touch"),ne(i.pointerId)&&(i.pointerId=i.identifier||0),ne(i.pressure)&&(i.pressure=i.force||.5),ne(i.twist)&&(i.twist=0),ne(i.tangentialPressure)&&(i.tangentialPressure=0),i.isNormalized=!0,i.type=t.type,n.push(i)}else if(e.isMouseEvent(t)){var o=t;ne(o.isPrimary)&&(o.isPrimary=!0),ne(o.width)&&(o.width=1),ne(o.height)&&(o.height=1),ne(o.tiltX)&&(o.tiltX=0),ne(o.tiltY)&&(o.tiltY=0),ne(o.pointerType)&&(o.pointerType="mouse"),ne(o.pointerId)&&(o.pointerId=1),ne(o.pressure)&&(o.pressure=.5),ne(o.twist)&&(o.twist=0),ne(o.tangentialPressure)&&(o.tangentialPressure=0),o.isNormalized=!0,n.push(o)}else n.push(t);return n},t.tag="Event",t}(),Os=[Bn.CIRCLE,Bn.ELLIPSE,Bn.IMAGE,Bn.RECT,Bn.LINE,Bn.POLYLINE,Bn.POLYGON,Bn.TEXT,Bn.PATH,Bn.HTML],Ns=function(){function t(){}return t.prototype.isVisible=function(t,e){var n,r,i=e.cullable;if(!i.enable)return!0;var o=e.getRenderBounds();if(or.isEmpty(o))return!1;var a=t.getFrustum(),s=null===(r=null===(n=e.parentNode)||void 0===n?void 0:n.cullable)||void 0===r?void 0:r.visibilityPlaneMask;return i.visibilityPlaneMask=this.computeVisibilityWithPlaneMask(e,o,s||ir.INDETERMINATE,a.planes),i.visible=i.visibilityPlaneMask!==ir.OUTSIDE,i.visible},t.prototype.computeVisibilityWithPlaneMask=function(t,e,n,r){if(n===ir.OUTSIDE||n===ir.INSIDE)return n;for(var i=ir.INSIDE,o=Os.indexOf(t.nodeName)>-1,a=0,s=r.length;a<s;++a){var l=1<<a;if(n&l&&(!o||4!==a&&5!==a)){var u=r[a],c=u.normal,h=u.distance;if(St(c,e.getPositiveFarPoint(r[a]))+h<0)return ir.OUTSIDE;St(c,e.getNegativeFarPoint(r[a]))+h<0&&(i|=l)}}return i},t}(),Is=function(){function t(){this.toSync=new Set}return t.prototype.apply=function(e){var n=this,r=e.renderingService,i=e.renderingContext,o=e.rBushRoot,a=i.root.ownerDocument.defaultView;this.rBush=o;var s=function(t){t.target.renderable.dirty=!0,r.dirtify()},l=function(t){var e=t.detail.affectChildren,i=t.target;e&&i.forEach((function(t){n.toSync.add(t)}));for(var o=i;o;)o.renderable&&n.toSync.add(o),o=o.parentElement;r.dirtify()},u=function(t){var e=t.target;Qa.enableSizeAttenuation&&Qa.styleValueRegistry.updateSizeAttenuation(e,a.getCamera().getZoom()),Qa.enableCSSParsing&&Qa.styleValueRegistry.recalc(e),Qa.sceneGraphService.dirtifyToRoot(e),r.dirtify()},c=function(t){var e=t.target,i=e.rBushNode;i.aabb&&n.rBush.remove(i.aabb),n.toSync.delete(e),Qa.sceneGraphService.dirtifyToRoot(e),r.dirtify()};r.hooks.init.tap(t.tag,(function(){a.addEventListener(Ha.MOUNTED,u),a.addEventListener(Ha.UNMOUNTED,c),a.addEventListener(Ha.ATTR_MODIFIED,s),a.addEventListener(Ha.BOUNDS_CHANGED,l)})),r.hooks.destroy.tap(t.tag,(function(){a.removeEventListener(Ha.MOUNTED,u),a.removeEventListener(Ha.UNMOUNTED,c),a.removeEventListener(Ha.ATTR_MODIFIED,s),a.removeEventListener(Ha.BOUNDS_CHANGED,l),n.toSync.clear()})),r.hooks.endFrame.tap(t.tag,(function(){n.syncRTree()}))},t.prototype.syncRTree=function(){var t=this,e=[];Array.from(this.toSync).filter((function(t){return t.isConnected})).forEach((function(n){var r=n.rBushNode;r&&r.aabb&&t.rBush.remove(r.aabb);var i=n.getRenderBounds();if(i){var o=R(i.getMin(),2),a=o[0],s=o[1],l=R(i.getMax(),2),u=l[0],c=l[1];r.aabb||(r.aabb={}),r.aabb.displayObject=n,r.aabb.minX=a,r.aabb.minY=s,r.aabb.maxX=u,r.aabb.maxY=c}r.aabb&&(isNaN(r.aabb.maxX)||isNaN(r.aabb.maxX)||isNaN(r.aabb.minX)||isNaN(r.aabb.minY)||e.push(r.aabb))})),this.rBush.load(e),e.length=0,this.toSync.clear()},t.tag="Prepare",t}();!function(t){t.READY="ready",t.BEFORE_RENDER="beforerender",t.RERENDER="rerender",t.AFTER_RENDER="afterrender",t.BEFORE_DESTROY="beforedestroy",t.AFTER_DESTROY="afterdestroy",t.RESIZE="resize",t.DIRTY_RECTANGLE="dirtyrectangle",t.RENDERER_CHANGED="rendererchanged"}(vs||(vs={}));var As=new Pa(Ha.MOUNTED),Ps=new Pa(Ha.UNMOUNTED),ks=new Pa(vs.BEFORE_RENDER),Bs=new Pa(vs.RERENDER),Ds=new Pa(vs.AFTER_RENDER),Fs=function(t){function e(e){var n=t.call(this)||this;n.Element=fs,n.inited=!1,n.context={},n.document=new _s,n.document.defaultView=n,n.customElements=new Ls;var r=e.container,i=e.canvas,o=e.offscreenCanvas,a=e.width,s=e.height,l=e.devicePixelRatio,u=e.renderer,c=e.background,h=e.cursor,d=e.document,f=e.requestAnimationFrame,p=e.cancelAnimationFrame,v=e.createImage,g=e.supportsPointerEvents,y=e.supportsTouchEvents,m=e.supportsCSSTransform,C=e.supportsMutipleCanvasesInOneContainer,w=e.useNativeClickEvent,x=e.alwaysTriggerPointerEventOnCanvas,b=e.isTouchEvent,E=e.isMouseEvent;C||function(t,e){if(t){var n="string"==typeof t?t:t.id||Xo++;Yo[n]&&Yo[n].destroy(),Yo[n]=e}}(r,n);var S=a,T=s,L=l;return i&&(L=(L=l||qo&&window.devicePixelRatio||1)>=1?Math.ceil(L):1,S=a||function(t){var e=Qo(t,"width");return"auto"===e?t.offsetWidth:parseFloat(e)}(i)||i.width/L,T=s||function(t){var e=Qo(t,"height");return"auto"===e?t.offsetHeight:parseFloat(e)}(i)||i.height/L),o&&(Qa.offscreenCanvas=o),n.devicePixelRatio=L,n.requestAnimationFrame=null!=f?f:ha.bind(Qa.globalThis),n.cancelAnimationFrame=null!=p?p:da.bind(Qa.globalThis),n.supportsTouchEvents=null!=y?y:"ontouchstart"in Qa.globalThis,n.supportsPointerEvents=null!=g?g:!!Qa.globalThis.PointerEvent,n.isTouchEvent=null!=b?b:function(t){return n.supportsTouchEvents&&t instanceof Qa.globalThis.TouchEvent},n.isMouseEvent=null!=E?E:function(t){return!Qa.globalThis.MouseEvent||t instanceof Qa.globalThis.MouseEvent&&(!n.supportsPointerEvents||!(t instanceof Qa.globalThis.PointerEvent))},n.initRenderingContext({container:r,canvas:i,width:S,height:T,renderer:u,offscreenCanvas:o,devicePixelRatio:L,cursor:h||"default",background:c||"transparent",createImage:v,document:d,supportsCSSTransform:m,useNativeClickEvent:w,alwaysTriggerPointerEventOnCanvas:x}),n.initDefaultCamera(S,T,u.clipSpaceNearZ),n.initRenderer(u,!0),n}return E(e,t),e.prototype.initRenderingContext=function(t){this.context.config=t,this.context.renderingContext={root:this.document.documentElement,renderListCurrentFrame:[],unculledEntities:[],renderReasons:new Set,force:!1,dirty:!1}},e.prototype.initDefaultCamera=function(t,e,n){var r=this,i=new Qa.CameraContribution;i.clipSpaceNearZ=n,i.setType(sr.EXPLORING,lr.DEFAULT).setPosition(t/2,e/2,500).setFocalPoint(t/2,e/2,0).setOrthographic(t/-2,t/2,e/2,e/-2,.1,1e3),i.canvas=this,i.eventEmitter.on(wr,(function(){r.context.renderingContext.renderReasons.add(Ra.CAMERA_CHANGED),Qa.enableSizeAttenuation&&r.getConfig().renderer.getConfig().enableSizeAttenuation&&r.updateSizeAttenuation()})),this.context.camera=i},e.prototype.updateSizeAttenuation=function(){var t=this.getCamera().getZoom();this.document.documentElement.forEach((function(e){Qa.styleValueRegistry.updateSizeAttenuation(e,t)}))},e.prototype.getConfig=function(){return this.context.config},e.prototype.getRoot=function(){return this.document.documentElement},e.prototype.getCamera=function(){return this.context.camera},e.prototype.getContextService=function(){return this.context.contextService},e.prototype.getEventService=function(){return this.context.eventService},e.prototype.getRenderingService=function(){return this.context.renderingService},e.prototype.getRenderingContext=function(){return this.context.renderingContext},e.prototype.getStats=function(){return this.getRenderingService().getStats()},Object.defineProperty(e.prototype,"ready",{get:function(){var t=this;return this.readyPromise||(this.readyPromise=new Promise((function(e){t.resolveReadyPromise=function(){e(t)}})),this.inited&&this.resolveReadyPromise()),this.readyPromise},enumerable:!1,configurable:!0}),e.prototype.destroy=function(t,e){(void 0===t&&(t=!0),void 0===e&&(e=!1),e||this.dispatchEvent(new Pa(vs.BEFORE_DESTROY)),this.frameId)&&(this.getConfig().cancelAnimationFrame||cancelAnimationFrame)(this.frameId);var n=this.getRoot();this.unmountChildren(n),t&&(this.document.destroy(),this.getEventService().destroy()),this.getRenderingService().destroy(),this.getContextService().destroy(),t&&this.context.rBushRoot&&(this.context.rBushRoot.clear(),this.context.rBushRoot=null,this.context.renderingContext.root=null),e||this.dispatchEvent(new Pa(vs.AFTER_DESTROY))},e.prototype.changeSize=function(t,e){this.resize(t,e)},e.prototype.resize=function(t,e){var n=this.context.config;n.width=t,n.height=e,this.getContextService().resize(t,e);var r=this.context.camera,i=r.getProjectionMode();r.setPosition(t/2,e/2,500).setFocalPoint(t/2,e/2,0),i===ur.ORTHOGRAPHIC?r.setOrthographic(t/-2,t/2,e/2,e/-2,r.getNear(),r.getFar()):r.setAspect(t/e),this.dispatchEvent(new Pa(vs.RESIZE,{width:t,height:e}))},e.prototype.appendChild=function(t,e){return this.document.documentElement.appendChild(t,e)},e.prototype.insertBefore=function(t,e){return this.document.documentElement.insertBefore(t,e)},e.prototype.removeChild=function(t){return this.document.documentElement.removeChild(t)},e.prototype.removeChildren=function(){this.document.documentElement.removeChildren()},e.prototype.destroyChildren=function(){this.document.documentElement.destroyChildren()},e.prototype.render=function(){var t=this;this.dispatchEvent(ks),this.getRenderingService().render(this.getConfig(),(function(){t.dispatchEvent(Bs)})),this.dispatchEvent(Ds)},e.prototype.run=function(){var t=this;!function e(){t.render(),t.frameId=t.requestAnimationFrame(e)}()},e.prototype.initRenderer=function(t,e){var n=this;if(void 0===e&&(e=!1),!t)throw new Error("Renderer is required.");this.inited=!1,this.readyPromise=void 0,this.context.rBushRoot=new Fn,this.context.renderingPlugins=[],this.context.renderingPlugins.push(new Rs,new Is,new Ms([new Ns])),this.loadRendererContainerModule(t),this.context.contextService=new this.context.ContextService(S(S({},Qa),this.context)),this.context.renderingService=new za(Qa,this.context),this.context.eventService=new Da(Qa,this.context),this.context.eventService.init(),this.context.contextService.init?(this.context.contextService.init(),this.initRenderingService(t,e,!0)):this.context.contextService.initAsync().then((function(){n.initRenderingService(t,e)}))},e.prototype.initRenderingService=function(t,e,n){var r=this;void 0===e&&(e=!1),void 0===n&&(n=!1),this.context.renderingService.init((function(){r.inited=!0,e?(n?r.requestAnimationFrame((function(){r.dispatchEvent(new Pa(vs.READY))})):r.dispatchEvent(new Pa(vs.READY)),r.readyPromise&&r.resolveReadyPromise()):r.dispatchEvent(new Pa(vs.RENDERER_CHANGED)),e||r.getRoot().forEach((function(t){var e=t.renderable;e&&(e.renderBoundsDirty=!0,e.boundsDirty=!0,e.dirty=!0)})),r.mountChildren(r.getRoot()),t.getConfig().enableAutoRendering&&r.run()}))},e.prototype.loadRendererContainerModule=function(t){var e=this;t.getPlugins().forEach((function(t){t.context=e.context,t.init(Qa)}))},e.prototype.setRenderer=function(t){var e=this.getConfig();if(e.renderer!==t){var n=e.renderer;e.renderer=t,this.destroy(!1,!0),O([],R(null==n?void 0:n.getPlugins()),!1).reverse().forEach((function(t){t.destroy(Qa)})),this.initRenderer(t)}},e.prototype.setCursor=function(t){this.getConfig().cursor=t,this.getContextService().applyCursorStyle(t)},e.prototype.unmountChildren=function(t){var e=this;t.childNodes.forEach((function(t){e.unmountChildren(t)})),this.inited&&(t.isMutationObserved?t.dispatchEvent(Ps):(Ps.target=t,this.dispatchEvent(Ps,!0)),t!==this.document.documentElement&&(t.ownerDocument=null),t.isConnected=!1),t.isCustomElement&&t.disconnectedCallback&&t.disconnectedCallback()},e.prototype.mountChildren=function(t){var e=this;this.inited?t.isConnected||(t.ownerDocument=this.document,t.isConnected=!0,t.isMutationObserved?t.dispatchEvent(As):(As.target=t,this.dispatchEvent(As,!0))):console.warn("[g]: You are trying to call `canvas.appendChild` before canvas' initialization finished. You can either await `canvas.ready` or listen to `CanvasEvent.READY` manually.","appended child: ",t.nodeName),t.childNodes.forEach((function(t){e.mountChildren(t)})),t.isCustomElement&&t.connectedCallback&&t.connectedCallback()},e.prototype.client2Viewport=function(t){return this.getEventService().client2Viewport(t)},e.prototype.viewport2Client=function(t){return this.getEventService().viewport2Client(t)},e.prototype.viewport2Canvas=function(t){return this.getEventService().viewport2Canvas(t)},e.prototype.canvas2Viewport=function(t){return this.getEventService().canvas2Viewport(t)},e.prototype.getPointByClient=function(t,e){return this.client2Viewport({x:t,y:e})},e.prototype.getClientByPoint=function(t,e){return this.viewport2Client({x:t,y:e})},e}(ka),Hs=function(t){function e(){var e=t.apply(this,O([],R(arguments),!1))||this;return e.landmarks=[],e}return E(e,t),e.prototype.rotate=function(t,e,n){if(this.relElevation=jn(e),this.relAzimuth=jn(t),this.relRoll=jn(n),this.elevation+=this.relElevation,this.azimuth+=this.relAzimuth,this.roll+=this.relRoll,this.type===sr.EXPLORING){var r=Pt(At(),[1,0,0],Xn((this.rotateWorld?1:-1)*this.relElevation)),i=Pt(At(),[0,1,0],Xn((this.rotateWorld?1:-1)*this.relAzimuth)),o=Pt(At(),[0,0,1],Xn(this.relRoll)),a=kt(At(),i,r);a=kt(At(),a,o);var s=rt(D(),a);Y(this.matrix,this.matrix,[0,0,-this.distance]),j(this.matrix,this.matrix,s),Y(this.matrix,this.matrix,[0,0,this.distance])}else{if(Math.abs(this.elevation)>90)return this;this.computeMatrix()}return this._getAxes(),this.type===sr.ORBITING||this.type===sr.EXPLORING?this._getPosition():this.type===sr.TRACKING&&this._getFocalPoint(),this._update(),this},e.prototype.pan=function(t,e){var n=Yn(t,e,0),r=vt(this.position);return wt(r,r,bt(pt(),this.right,n[0])),wt(r,r,bt(pt(),this.up,n[1])),this._setPosition(r),this.triggerUpdate(),this},e.prototype.dolly=function(t){var e=this.forward,n=vt(this.position),r=this.dollyingStep,i=this.distance+t*this.dollyingStep;return r=Math.max(Math.min(i,this.maxDistance),this.minDistance)-this.distance,n[0]+=r*e[0],n[1]+=r*e[1],n[2]+=r*e[2],this._setPosition(n),this.type===sr.ORBITING||this.type===sr.EXPLORING?this._getDistance():this.type===sr.TRACKING&&wt(this.focalPoint,n,this.distanceVector),this.triggerUpdate(),this},e.prototype.cancelLandmarkAnimation=function(){void 0!==this.landmarkAnimationID&&this.canvas.cancelAnimationFrame(this.landmarkAnimationID)},e.prototype.createLandmark=function(t,e){var n,r,i,o;void 0===e&&(e={});var a=e.position,s=void 0===a?this.position:a,l=e.focalPoint,u=void 0===l?this.focalPoint:l,c=e.roll,h=e.zoom,d=new Qa.CameraContribution;d.setType(this.type,void 0),d.setPosition(s[0],null!==(n=s[1])&&void 0!==n?n:this.position[1],null!==(r=s[2])&&void 0!==r?r:this.position[2]),d.setFocalPoint(u[0],null!==(i=u[1])&&void 0!==i?i:this.focalPoint[1],null!==(o=u[2])&&void 0!==o?o:this.focalPoint[2]),d.setRoll(null!=c?c:this.roll),d.setZoom(null!=h?h:this.zoom);var f={name:t,matrix:F(d.getWorldTransform()),right:vt(d.right),up:vt(d.up),forward:vt(d.forward),position:vt(d.getPosition()),focalPoint:vt(d.getFocalPoint()),distanceVector:vt(d.getDistanceVector()),distance:d.getDistance(),dollyingStep:d.getDollyingStep(),azimuth:d.getAzimuth(),elevation:d.getElevation(),roll:d.getRoll(),relAzimuth:d.relAzimuth,relElevation:d.relElevation,relRoll:d.relRoll,zoom:d.getZoom()};return this.landmarks.push(f),f},e.prototype.gotoLandmark=function(t,e){var n=this;void 0===e&&(e={});var r=Kt(t)?this.landmarks.find((function(e){return e.name===t})):t;if(r){var i=$t(e)?{duration:e}:e,o=i.easing,a=void 0===o?"linear":o,s=i.duration,l=void 0===s?100:s,u=i.easingFunction,c=void 0===u?void 0:u,h=i.onfinish,d=void 0===h?void 0:h,f=i.onframe,p=void 0===f?void 0:f;if(0===l)return this.syncFromLandmark(r),void(d&&d());this.cancelLandmarkAnimation();var v,g=r.position,y=r.focalPoint,m=r.zoom,C=r.roll,w=c||Qa.EasingFunction(a),x=function(){n.setFocalPoint(y),n.setPosition(g),n.setRoll(C),n.setZoom(m),n.computeMatrix(),n.triggerUpdate(),d&&d()};this.canvas.requestAnimationFrame((function t(e){void 0===v&&(v=e);var r=e-v;if(r>l)x();else{var i,o,a=w(r/l),s=pt(),u=pt();Lt(s,n.focalPoint,y,a),Lt(u,n.position,g,a),o=n.roll*(1-a)+C*a,i=n.zoom*(1-a)+m*a,n.setFocalPoint(s),n.setPosition(u),n.setRoll(o),n.setZoom(i),Rt(s,y)+Rt(u,g)<=.01&&null==m&&null==C?x():(n.computeMatrix(),n.triggerUpdate(),r<l&&(p&&p(a),n.landmarkAnimationID=n.canvas.requestAnimationFrame(t)))}}))}},e.prototype.syncFromLandmark=function(t){this.matrix=H(this.matrix,t.matrix),this.right=mt(this.right,t.right),this.up=mt(this.up,t.up),this.forward=mt(this.forward,t.forward),this.position=mt(this.position,t.position),this.focalPoint=mt(this.focalPoint,t.focalPoint),this.distanceVector=mt(this.distanceVector,t.distanceVector),this.azimuth=t.azimuth,this.elevation=t.elevation,this.roll=t.roll,this.relAzimuth=t.relAzimuth,this.relElevation=t.relElevation,this.relRoll=t.relRoll,this.dollyingStep=t.dollyingStep,this.distance=t.distance,this.zoom=t.zoom},e}(br);Qa.CameraContribution=Hs;var zs=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;return o.currentTime=r,o.timelineTime=i,o.target=n,o.type="finish",o.bubbles=!1,o.currentTarget=n,o.defaultPrevented=!1,o.eventPhase=o.AT_TARGET,o.timeStamp=Date.now(),o.currentTime=r,o.timelineTime=i,o}return E(e,t),e}(Oa),Gs=0,Ws=function(){function t(t,e){var n;this.currentTimePending=!1,this._idle=!0,this._paused=!1,this._finishedFlag=!0,this._currentTime=0,this._playbackRate=1,this._inTimeline=!0,this.effect=t,t.animation=this,this.timeline=e,this.id="".concat(Gs++),this._inEffect=!!this.effect.update(0),this._totalDuration=Number(null===(n=this.effect)||void 0===n?void 0:n.getComputedTiming().endTime),this._holdTime=0,this._paused=!1,this.oldPlayState="idle",this.updatePromises()}return Object.defineProperty(t.prototype,"pending",{get:function(){return null===this._startTime&&!this._paused&&0!==this.playbackRate||this.currentTimePending},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"playState",{get:function(){return this._idle?"idle":this._isFinished?"finished":this._paused?"paused":"running"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ready",{get:function(){var t=this;return this.readyPromise||(-1===this.timeline.animationsWithPromises.indexOf(this)&&this.timeline.animationsWithPromises.push(this),this.readyPromise=new Promise((function(e,n){t.resolveReadyPromise=function(){e(t)},t.rejectReadyPromise=function(){n(new Error)}})),this.pending||this.resolveReadyPromise()),this.readyPromise},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"finished",{get:function(){var t=this;return this.finishedPromise||(-1===this.timeline.animationsWithPromises.indexOf(this)&&this.timeline.animationsWithPromises.push(this),this.finishedPromise=new Promise((function(e,n){t.resolveFinishedPromise=function(){e(t)},t.rejectFinishedPromise=function(){n(new Error)}})),"finished"===this.playState&&this.resolveFinishedPromise()),this.finishedPromise},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currentTime",{get:function(){return this.updatePromises(),this._idle||this.currentTimePending?null:this._currentTime},set:function(t){var e;t=Number(t),isNaN(t)||(this.timeline.restart(),this._paused||null===this._startTime||(this._startTime=Number(null===(e=this.timeline)||void 0===e?void 0:e.currentTime)-t/this.playbackRate),this.currentTimePending=!1,this._currentTime!==t&&(this._idle&&(this._idle=!1,this._paused=!0),this.tickCurrentTime(t,!0),this.timeline.applyDirtiedAnimation(this)))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"startTime",{get:function(){return this._startTime},set:function(t){if(null!==t){if(this.updatePromises(),t=Number(t),isNaN(t))return;if(this._paused||this._idle)return;this._startTime=t,this.tickCurrentTime((Number(this.timeline.currentTime)-this._startTime)*this.playbackRate),this.timeline.applyDirtiedAnimation(this),this.updatePromises()}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"playbackRate",{get:function(){return this._playbackRate},set:function(t){if(t!==this._playbackRate){this.updatePromises();var e=this.currentTime;this._playbackRate=t,this.startTime=null,"paused"!==this.playState&&"idle"!==this.playState&&(this._finishedFlag=!1,this._idle=!1,this.ensureAlive(),this.timeline.applyDirtiedAnimation(this)),null!==e&&(this.currentTime=e),this.updatePromises()}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_isFinished",{get:function(){return!this._idle&&(this._playbackRate>0&&Number(this._currentTime)>=this._totalDuration||this._playbackRate<0&&Number(this._currentTime)<=0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalDuration",{get:function(){return this._totalDuration},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_needsTick",{get:function(){return this.pending||"running"===this.playState||!this._finishedFlag},enumerable:!1,configurable:!0}),t.prototype.updatePromises=function(){var t=this.oldPlayState,e=this.pending?"pending":this.playState;return this.readyPromise&&e!==t&&("idle"===e?(this.rejectReadyPromise(),this.readyPromise=void 0):"pending"===t?this.resolveReadyPromise():"pending"===e&&(this.readyPromise=void 0)),this.finishedPromise&&e!==t&&("idle"===e?(this.rejectFinishedPromise(),this.finishedPromise=void 0):"finished"===e?this.resolveFinishedPromise():"finished"===t&&(this.finishedPromise=void 0)),this.oldPlayState=e,this.readyPromise||this.finishedPromise},t.prototype.play=function(){this.updatePromises(),this._paused=!1,(this._isFinished||this._idle)&&(this.rewind(),this._startTime=null),this._finishedFlag=!1,this._idle=!1,this.ensureAlive(),this.timeline.applyDirtiedAnimation(this),-1===this.timeline.animations.indexOf(this)&&this.timeline.animations.push(this),this.updatePromises()},t.prototype.pause=function(){this.updatePromises(),this.currentTime&&(this._holdTime=this.currentTime),this._isFinished||this._paused||this._idle?this._idle&&(this.rewind(),this._idle=!1):this.currentTimePending=!0,this._startTime=null,this._paused=!0,this.updatePromises()},t.prototype.finish=function(){this.updatePromises(),this._idle||(this.currentTime=this._playbackRate>0?this._totalDuration:0,this._startTime=this._totalDuration-this.currentTime,this.currentTimePending=!1,this.timeline.applyDirtiedAnimation(this),this.updatePromises())},t.prototype.cancel=function(){var t=this;if(this.updatePromises(),this._inEffect&&(this._inEffect=!1,this._idle=!0,this._paused=!1,this._finishedFlag=!0,this._currentTime=0,this._startTime=null,this.effect.update(null),this.timeline.applyDirtiedAnimation(this),this.updatePromises(),this.oncancel)){var e=new zs(null,this,this.currentTime,null);setTimeout((function(){t.oncancel(e)}))}},t.prototype.reverse=function(){this.updatePromises();var t=this.currentTime;this.playbackRate*=-1,this.play(),null!==t&&(this.currentTime=t),this.updatePromises()},t.prototype.updatePlaybackRate=function(t){this.playbackRate=t},t.prototype.targetAnimations=function(){var t;return(null===(t=this.effect)||void 0===t?void 0:t.target).getAnimations()},t.prototype.markTarget=function(){var t=this.targetAnimations();-1===t.indexOf(this)&&t.push(this)},t.prototype.unmarkTarget=function(){var t=this.targetAnimations(),e=t.indexOf(this);-1!==e&&t.splice(e,1)},t.prototype.tick=function(t,e){this._idle||this._paused||(null===this._startTime?e&&(this.startTime=t-this._currentTime/this.playbackRate):this._isFinished||this.tickCurrentTime((t-this._startTime)*this.playbackRate)),e&&(this.currentTimePending=!1,this.fireEvents(t))},t.prototype.rewind=function(){if(this.playbackRate>=0)this.currentTime=0;else{if(!(this._totalDuration<1/0))throw new Error("Unable to rewind negative playback rate animation with infinite duration");this.currentTime=this._totalDuration}},t.prototype.persist=function(){throw new Error(fr)},t.prototype.addEventListener=function(t,e,n){throw new Error(fr)},t.prototype.removeEventListener=function(t,e,n){throw new Error(fr)},t.prototype.dispatchEvent=function(t){throw new Error(fr)},t.prototype.commitStyles=function(){throw new Error(fr)},t.prototype.ensureAlive=function(){var t,e;this.playbackRate<0&&0===this.currentTime?this._inEffect=!!(null===(t=this.effect)||void 0===t?void 0:t.update(-1)):this._inEffect=!!(null===(e=this.effect)||void 0===e?void 0:e.update(this.currentTime)),this._inTimeline||!this._inEffect&&this._finishedFlag||(this._inTimeline=!0,this.timeline.animations.push(this))},t.prototype.tickCurrentTime=function(t,e){t!==this._currentTime&&(this._currentTime=t,this._isFinished&&!e&&(this._currentTime=this._playbackRate>0?this._totalDuration:0),this.ensureAlive())},t.prototype.fireEvents=function(t){var e=this;if(this._isFinished){if(!this._finishedFlag){if(this.onfinish){var n=new zs(null,this,this.currentTime,t);setTimeout((function(){e.onfinish&&e.onfinish(n)}))}this._finishedFlag=!0}}else{if(this.onframe&&"running"===this.playState){var r=new zs(null,this,this.currentTime,t);this.onframe(r)}this._finishedFlag=!1}},t}(),Vs=.1,Us="function"==typeof Float32Array,js=function(t,e){return 1-3*e+3*t},Ys=function(t,e){return 3*e-6*t},Xs=function(t){return 3*t},qs=function(t,e,n){return((js(e,n)*t+Ys(e,n))*t+Xs(e))*t},Ks=function(t,e,n){return 3*js(e,n)*t*t+2*Ys(e,n)*t+Xs(e)},Zs=function(t,e,n,r){if(!(0<=t&&t<=1&&0<=n&&n<=1))throw new Error("bezier x values must be in [0, 1] range");if(t===e&&n===r)return function(t){return t};for(var i=Us?new Float32Array(11):new Array(11),o=0;o<11;++o)i[o]=qs(o*Vs,t,n);var a=function(e){for(var r=0,o=1;10!==o&&i[o]<=e;++o)r+=Vs;--o;var a=r+(e-i[o])/(i[o+1]-i[o])*Vs,s=Ks(a,t,n);return s>=.001?function(t,e,n,r){for(var i=0;i<4;++i){var o=Ks(e,n,r);if(0===o)return e;e-=(qs(e,n,r)-t)/o}return e}(e,a,t,n):0===s?a:function(t,e,n,r,i){var o,a,s=0;do{(o=qs(a=e+(n-e)/2,r,i)-t)>0?n=a:e=a}while(Math.abs(o)>1e-7&&++s<10);return a}(e,r,r+Vs,t,n)};return function(t){return 0===t||1===t?t:qs(a(t),e,r)}},$s=function(t){return Math.pow(t,2)},Qs=function(t){return Math.pow(t,3)},Js=function(t){return Math.pow(t,4)},tl=function(t){return Math.pow(t,5)},el=function(t){return Math.pow(t,6)},nl=function(t){return 1-Math.cos(t*Math.PI/2)},rl=function(t){return 1-Math.sqrt(1-t*t)},il=function(t){return t*t*(3*t-2)},ol=function(t){for(var e,n=4;t<((e=Math.pow(2,--n))-1)/11;);return 1/Math.pow(4,3-n)-7.5625*Math.pow((3*e-2)/22-t,2)},al=function(t,e){void 0===e&&(e=[]);var n=R(e,2),r=n[0],i=void 0===r?1:r,o=n[1],a=void 0===o?.5:o,s=Zt(Number(i),1,10),l=Zt(Number(a),.1,2);return 0===t||1===t?t:-s*Math.pow(2,10*(t-1))*Math.sin((t-1-l/(2*Math.PI)*Math.asin(1/s))*(2*Math.PI)/l)},sl=function(t,e,n){void 0===e&&(e=[]);var r=R(e,4),i=r[0],o=void 0===i?1:i,a=r[1],s=void 0===a?100:a,l=r[2],u=void 0===l?10:l,c=r[3],h=void 0===c?0:c;o=Zt(o,.1,1e3),s=Zt(s,.1,1e3),u=Zt(u,.1,1e3),h=Zt(h,.1,1e3);var d=Math.sqrt(s/o),f=u/(2*Math.sqrt(s*o)),p=f<1?d*Math.sqrt(1-f*f):0,v=f<1?(f*d-h)/p:-h+d,g=n?n*t/1e3:t;return g=f<1?Math.exp(-g*f*d)*(1*Math.cos(p*g)+v*Math.sin(p*g)):(1+v*g)*Math.exp(-g*d),0===t||1===t?t:1-g},ll=function(t,e){void 0===e&&(e=[]);var n=R(e,2),r=n[0],i=void 0===r?10:r;return("start"==n[1]?Math.ceil:Math.floor)(Zt(t,0,1)*i)/i},ul=function(t,e){void 0===e&&(e=[]);var n=R(e,4),r=n[0],i=n[1],o=n[2],a=n[3];return Zs(r,i,o,a)(t)},cl=Zs(.42,0,1,1),hl=function(t){return function(e,n,r){return void 0===n&&(n=[]),1-t(1-e,n,r)}},dl=function(t){return function(e,n,r){return void 0===n&&(n=[]),e<.5?t(2*e,n,r)/2:1-t(-2*e+2,n,r)/2}},fl=function(t){return function(e,n,r){return void 0===n&&(n=[]),e<.5?(1-t(1-2*e,n,r))/2:(t(2*e-1,n,r)+1)/2}},pl={steps:ll,"step-start":function(t){return ll(t,[1,"start"])},"step-end":function(t){return ll(t,[1,"end"])},linear:function(t){return t},"cubic-bezier":ul,ease:function(t){return ul(t,[.25,.1,.25,1])},in:cl,out:hl(cl),"in-out":dl(cl),"out-in":fl(cl),"in-quad":$s,"out-quad":hl($s),"in-out-quad":dl($s),"out-in-quad":fl($s),"in-cubic":Qs,"out-cubic":hl(Qs),"in-out-cubic":dl(Qs),"out-in-cubic":fl(Qs),"in-quart":Js,"out-quart":hl(Js),"in-out-quart":dl(Js),"out-in-quart":fl(Js),"in-quint":tl,"out-quint":hl(tl),"in-out-quint":dl(tl),"out-in-quint":fl(tl),"in-expo":el,"out-expo":hl(el),"in-out-expo":dl(el),"out-in-expo":fl(el),"in-sine":nl,"out-sine":hl(nl),"in-out-sine":dl(nl),"out-in-sine":fl(nl),"in-circ":rl,"out-circ":hl(rl),"in-out-circ":dl(rl),"out-in-circ":fl(rl),"in-back":il,"out-back":hl(il),"in-out-back":dl(il),"out-in-back":fl(il),"in-bounce":ol,"out-bounce":hl(ol),"in-out-bounce":dl(ol),"out-in-bounce":fl(ol),"in-elastic":al,"out-elastic":hl(al),"in-out-elastic":dl(al),"out-in-elastic":fl(al),spring:sl,"spring-in":sl,"spring-out":hl(sl),"spring-in-out":dl(sl),"spring-out-in":fl(sl)},vl=function(t){return pl[function(t){return function(t){return"-"===(t=t.replace(/([A-Z])/g,(function(t){return"-".concat(t.toLowerCase())}))).charAt(0)?t.substring(1):t}(t).replace(/^ease-/,"").replace(/(\(|\s).+/,"").toLowerCase().trim()}(t)]||pl.linear},gl=function(t){return t},yl=1,ml=.5,Cl=0;function wl(t,e){return function(n){if(n>=1)return 1;var r=1/t;return(n+=e*r)-n%r}}var xl="\\s*(-?\\d+\\.?\\d*|-?\\.\\d+)\\s*",bl=new RegExp("cubic-bezier\\("+xl+","+xl+","+xl+","+xl+"\\)"),El=/steps\(\s*(\d+)\s*\)/,Sl=/steps\(\s*(\d+)\s*,\s*(start|middle|end)\s*\)/;function Tl(t){var e=bl.exec(t);if(e)return Zs.apply(void 0,O([],R(e.slice(1).map(Number)),!1));var n=El.exec(t);if(n)return wl(Number(n[1]),Cl);var r=Sl.exec(t);return r?wl(Number(r[1]),{start:yl,middle:ml,end:Cl}[r[2]]):vl(t)}function Ll(t){return Math.abs(function(t){var e;if(0===t.duration||0===t.iterations)return 0;return("auto"===t.duration?0:Number(t.duration))*(null!==(e=t.iterations)&&void 0!==e?e:1)}(t)/(t.playbackRate||1))}var _l=0,Ml=1,Rl=2,Ol=3;function Nl(t,e,n){var r=function(t,e,n){if(null===e)return _l;var r=n.endTime;return e<Math.min(n.delay,r)?Ml:e>=Math.min(n.delay+t+n.endDelay,r)?Rl:Ol}(t,e,n),i=function(t,e,n,r,i){switch(r){case Ml:return"backwards"===e||"both"===e?0:null;case Ol:return n-i;case Rl:return"forwards"===e||"both"===e?t:null;case _l:return null}}(t,n.fill,e,r,n.delay);if(null===i)return null;var o="auto"===n.duration?0:n.duration,a=function(t,e,n,r,i){var o=i;return 0===t?e!==Ml&&(o+=n):o+=r/t,o}(o,r,n.iterations,i,n.iterationStart),s=function(t,e,n,r,i,o){var a=t===1/0?e%1:t%1;return 0!==a||n!==Rl||0===r||0===i&&0!==o||(a=1),a}(a,n.iterationStart,r,n.iterations,i,o),l=function(t,e,n,r){return t===Rl&&e===1/0?1/0:1===n?Math.floor(r)-1:Math.floor(r)}(r,n.iterations,s,a),u=function(t,e,n){var r=t;if("normal"!==t&&"reverse"!==t){var i=e;"alternate-reverse"===t&&(i+=1),r="normal",i!==1/0&&i%2!=0&&(r="reverse")}return"normal"===r?n:1-n}(n.direction,l,s);return n.currentIteration=l,n.progress=u,n.easingFunction(u)}function Il(t,e,n){var r=function(t,e){for(var n={},r=0;r<t.length;r++)for(var i in t[r])if(Al(i)){var o={offset:t[r].offset,computedOffset:t[r].computedOffset,easing:t[r].easing,easingFunction:Tl(t[r].easing)||e.easingFunction,value:t[r][i]};n[i]=n[i]||[],n[i].push(o)}return n}(t,e),i=function(t,e){var n=[];for(var r in t)for(var i=t[r],o=0;o<i.length-1;o++){var a=o,s=o+1,l=i[a].computedOffset,u=i[s].computedOffset,c=l,h=u;0===o&&(c=-1/0,0===u&&(s=a)),o===i.length-2&&(h=1/0,1===l&&(a=s)),n.push({applyFrom:c,applyTo:h,startOffset:i[a].computedOffset,endOffset:i[s].computedOffset,easingFunction:i[a].easingFunction,property:r,interpolation:kl(r,i[a].value,i[s].value,e)})}return n.sort((function(t,e){return t.startOffset-e.startOffset})),n}(r,n);return function(t,e){if(null!==e)i.filter((function(t){return e>=t.applyFrom&&e<t.applyTo})).forEach((function(n){var r=e-n.startOffset,i=n.endOffset-n.startOffset,o=0===i?0:n.easingFunction(r/i);t.setAttribute(n.property,n.interpolation(o),!1,!1)}));else for(var n in r)Al(n)&&t.setAttribute(n,null)}}function Al(t){return"offset"!==t&&"easing"!==t&&"composite"!==t&&"computedOffset"!==t}var Pl=function(t,e,n){return function(r){var i=Bl(t,e,r);return!Qa.enableCSSParsing&&$t(i)?i:n(i)}};function kl(t,e,n,r){var i=Eo[t];if(i&&i.syntax&&i.int){var o=Qa.styleValueRegistry.getPropertySyntax(i.syntax);if(o){var a=void 0,s=void 0;if(Qa.enableCSSParsing){var l=Qa.styleValueRegistry.parseProperty(t,e,r,!1),u=Qa.styleValueRegistry.parseProperty(t,n,r,!1);a=Qa.styleValueRegistry.computeProperty(t,l,r,!1),s=Qa.styleValueRegistry.computeProperty(t,u,r,!1)}else{var c=o.parserWithCSSDisabled;a=c?c(e,r):e,s=c?c(n,r):n}var h=o.mixer(a,s,r);if(h){var d=Pl.apply(void 0,O([],R(h),!1));return function(t){return 0===t?e:1===t?n:d(t)}}}}return Pl(!1,!0,(function(t){return t?n:e}))}function Bl(t,e,n){if("number"==typeof t&&"number"==typeof e)return t*(1-n)+e*n;if("boolean"==typeof t&&"boolean"==typeof e||"string"==typeof t&&"string"==typeof e)return n<.5?t:e;if(Array.isArray(t)&&Array.isArray(e)){for(var r=t.length,i=e.length,o=Math.max(r,i),a=[],s=0;s<o;s++)a.push(Bl(t[s<r?s:r-1],e[s<i?s:i-1],n));return a}throw new Error("Mismatched interpolation arguments "+t+":"+e)}var Dl=function(){function t(){this.delay=0,this.direction="normal",this.duration="auto",this._easing="linear",this.easingFunction=gl,this.endDelay=0,this.fill="auto",this.iterationStart=0,this.iterations=1,this.currentIteration=null,this.progress=null}return Object.defineProperty(t.prototype,"easing",{get:function(){return this._easing},set:function(t){this.easingFunction=Tl(t),this._easing=t},enumerable:!1,configurable:!0}),t}();function Fl(t,e){if(null===t)return[];Array.isArray(t)||(t=function(t){var e=[];for(var n in t)if(!(n in["easing","offset","composite"])){var r=t[n];Array.isArray(r)||(r=[r]);for(var i=r.length,o=0;o<i;o++){if(!e[o]){var a={};"offset"in t&&(a.offset=Number(t.offset)),"easing"in t&&(a.easing=t.easing),"composite"in t&&(a.composite=t.composite),e[o]=a}void 0!==r[o]&&null!==r[o]&&(e[o][n]=r[o])}}return e.sort((function(t,e){return(t.computedOffset||0)-(e.computedOffset||0)})),e}(t));for(var n=t.map((function(t){var n={};for(var r in(null==e?void 0:e.composite)&&(n.composite="auto"),t){var i=t[r];if("offset"===r){if(null!==i){if(i=Number(i),!isFinite(i))throw new Error("Keyframe offsets must be numbers.");if(i<0||i>1)throw new Error("Keyframe offsets must be between 0 and 1.");n.computedOffset=i}}else if("composite"===r&&-1===["replace","add","accumulate","auto"].indexOf(i))throw new Error("".concat(i," compositing is not supported"));n[r]=i}return void 0===n.offset&&(n.offset=null),void 0===n.easing&&(n.easing=(null==e?void 0:e.easing)||"linear"),void 0===n.composite&&(n.composite="auto"),n})),r=!0,i=-1/0,o=0;o<n.length;o++){var a=n[o].offset;if(Wt(a))r=!1;else{if(a<i)throw new TypeError("Keyframes are not loosely sorted by offset. Sort or specify offsets.");i=a}}return n=n.filter((function(t){return Number(t.offset)>=0&&Number(t.offset)<=1})),r||function(){var t,e,r=n.length;n[r-1].computedOffset=Number(null!==(t=n[r-1].offset)&&void 0!==t?t:1),r>1&&(n[0].computedOffset=Number(null!==(e=n[0].offset)&&void 0!==e?e:0));for(var i=0,o=Number(n[0].computedOffset),a=1;a<r;a++){var s=n[a].computedOffset;if(!Wt(s)&&!Wt(o)){for(var l=1;l<a-i;l++)n[i+l].computedOffset=o+(Number(s)-o)*l/(a-i);i=a,o=Number(s)}}}(),n}var Hl="backwards|forwards|both|none".split("|"),zl="reverse|alternate|alternate-reverse".split("|");function Gl(t,e){return function(t,e){var n=new Dl;return e&&(n.fill="both",n.duration="auto"),"number"!=typeof t||isNaN(t)?void 0!==t&&Object.keys(t).forEach((function(e){if(void 0!==t[e]&&null!==t[e]&&"auto"!==t[e]){if(("number"==typeof n[e]||"duration"===e)&&("number"!=typeof t[e]||isNaN(t[e])))return;if("fill"===e&&-1===Hl.indexOf(t[e]))return;if("direction"===e&&-1===zl.indexOf(t[e]))return;n[e]=t[e]}})):n.duration=t,n}(t=function(t){"number"==typeof t&&(t=isNaN(t)?{duration:"auto"}:{duration:t});return t}(null!=t?t:{duration:"auto"}),e)}var Wl=function(){function t(t,e,n){var r=this;this.composite="replace",this.iterationComposite="replace",this.target=t,this.timing=Gl(n,!1),this.timing.effect=this,this.timing.activeDuration=Ll(this.timing),this.timing.endTime=Math.max(0,this.timing.delay+this.timing.activeDuration+this.timing.endDelay),this.normalizedKeyframes=Fl(e,this.timing),this.interpolations=Il(this.normalizedKeyframes,this.timing,this.target);var i=Qa.globalThis.Proxy;this.computedTiming=i?new i(this.timing,{get:function(t,e){return"duration"===e?"auto"===t.duration?0:t.duration:"fill"===e?"auto"===t.fill?"none":t.fill:"localTime"===e?r.animation&&r.animation.currentTime||null:"currentIteration"===e?r.animation&&"running"===r.animation.playState?t.currentIteration||0:null:"progress"===e?r.animation&&"running"===r.animation.playState?t.progress||0:null:t[e]},set:function(){return!0}}):this.timing}return t.prototype.applyInterpolations=function(){this.interpolations(this.target,Number(this.timeFraction))},t.prototype.update=function(t){return null!==t&&(this.timeFraction=Nl(this.timing.activeDuration,t,this.timing),null!==this.timeFraction)},t.prototype.getKeyframes=function(){return this.normalizedKeyframes},t.prototype.setKeyframes=function(t){this.normalizedKeyframes=Fl(t)},t.prototype.getComputedTiming=function(){return this.computedTiming},t.prototype.getTiming=function(){return this.timing},t.prototype.updateTiming=function(t){var e=this;Object.keys(t||{}).forEach((function(n){e.timing[n]=t[n]}))},t}();function Vl(t,e){return Number(t.id)-Number(e.id)}var Ul=function(){function t(t){var e=this;this.document=t,this.animations=[],this.ticking=!1,this.timelineTicking=!1,this.hasRestartedThisFrame=!1,this.animationsWithPromises=[],this.inTick=!1,this.pendingEffects=[],this.currentTime=null,this.rafId=0,this.rafCallbacks=[],this.webAnimationsNextTick=function(t){e.currentTime=t,e.discardAnimations(),0===e.animations.length?e.timelineTicking=!1:e.requestAnimationFrame(e.webAnimationsNextTick)},this.processRafCallbacks=function(t){var n=e.rafCallbacks;e.rafCallbacks=[],t<Number(e.currentTime)&&(t=Number(e.currentTime)),e.animations.sort(Vl),e.animations=e.tick(t,!0,e.animations)[0],n.forEach((function(e){e[1](t)})),e.applyPendingEffects()}}return t.prototype.getAnimations=function(){return this.discardAnimations(),this.animations.slice()},t.prototype.isTicking=function(){return this.inTick},t.prototype.play=function(t,e,n){var r=new Wl(t,e,n),i=new Ws(r,this);return this.animations.push(i),this.restartWebAnimationsNextTick(),i.updatePromises(),i.play(),i.updatePromises(),i},t.prototype.applyDirtiedAnimation=function(t){var e=this;if(!this.inTick){t.markTarget();var n=t.targetAnimations();n.sort(Vl),this.tick(Number(this.currentTime),!1,n.slice())[1].forEach((function(t){var n=e.animations.indexOf(t);-1!==n&&e.animations.splice(n,1)})),this.applyPendingEffects()}},t.prototype.restart=function(){return this.ticking||(this.ticking=!0,this.requestAnimationFrame((function(){})),this.hasRestartedThisFrame=!0),this.hasRestartedThisFrame},t.prototype.destroy=function(){this.document.defaultView.cancelAnimationFrame(this.frameId)},t.prototype.applyPendingEffects=function(){this.pendingEffects.forEach((function(t){null==t||t.applyInterpolations()})),this.pendingEffects=[]},t.prototype.updateAnimationsPromises=function(){this.animationsWithPromises=this.animationsWithPromises.filter((function(t){return t.updatePromises()}))},t.prototype.discardAnimations=function(){this.updateAnimationsPromises(),this.animations=this.animations.filter((function(t){return"finished"!==t.playState&&"idle"!==t.playState}))},t.prototype.restartWebAnimationsNextTick=function(){this.timelineTicking||(this.timelineTicking=!0,this.requestAnimationFrame(this.webAnimationsNextTick))},t.prototype.rAF=function(t){var e=this.rafId++;return 0===this.rafCallbacks.length&&(this.frameId=this.document.defaultView.requestAnimationFrame(this.processRafCallbacks)),this.rafCallbacks.push([e,t]),e},t.prototype.requestAnimationFrame=function(t){var e=this;return this.rAF((function(n){e.updateAnimationsPromises(),t(n),e.updateAnimationsPromises()}))},t.prototype.tick=function(t,e,n){var r,i,o=this;this.inTick=!0,this.hasRestartedThisFrame=!1,this.currentTime=t,this.ticking=!1;var a=[],s=[],l=[],u=[];return n.forEach((function(n){n.tick(t,e),n._inEffect?(s.push(n.effect),n.markTarget()):(a.push(n.effect),n.unmarkTarget()),n._needsTick&&(o.ticking=!0);var r=n._inEffect||n._needsTick;n._inTimeline=r,r?l.push(n):u.push(n)})),(r=this.pendingEffects).push.apply(r,O([],R(a),!1)),(i=this.pendingEffects).push.apply(i,O([],R(s),!1)),this.ticking&&this.requestAnimationFrame((function(){})),this.inTick=!1,[l,u]},t}();Qa.EasingFunction=Tl,Qa.AnimationTimeline=Ul;var jl,Yl,Xl,ql="$$value$$",Kl="$$extra$$",Zl="$$origin$$",$l="$$extra_column$$",Ql="$$total$$",Jl="$$multi$$",tu="$$series_number$$",eu="$$empty_field_value$$",nu="$$empty_extra_placeholder$$";!function(t){t.DATA_CELL_CLICK_EVENT="interaction:data-cell-click",t.MERGED_CELLS_CLICK_EVENT="interaction:merged-cells-click",t.CORNER_TEXT_CLICK_EVENT="interaction:corner-cell-text-click",t.ROW_COLUMN_CLICK_EVENT="interaction:row-column-click",t.ROW_TEXT_CLICK_EVENT="interaction:row-text-click",t.HOVER_EVENT="interaction:hover"}(jl||(jl={})),function(t){t.MOUSE_DOWN="mousedown",t.MOUSE_MOVE="mousemove",t.MOUSE_UP="mouseup",t.MOUSE_OUT="mouseout",t.MOUSE_LEAVE="mouseleave",t.TOUCH_START="touchstart",t.KEY_DOWN="keydown",t.KEY_UP="keyup",t.CLICK="click",t.HOVER="hover",t.DOUBLE_CLICK="dblclick",t.CONTEXT_MENU="contextmenu",t.POINTER_DOWN="pointerdown",t.POINTER_MOVE="pointermove",t.POINTER_OUT="pointerout",t.POINTER_LEAVE="pointerleave",t.POINTER_UP="pointerup",t.POINTER_CANCEL="pointercancel",t.POINTER_ENTER="pointerenter",t.POINTER_OVER="pointerover",t.RIGHT_DOWN="rightdown",t.RIGHT_UP="rightup"}(Yl||(Yl={})),function(t){t.ROW_CELL_HOVER="row-cell:hover",t.ROW_CELL_CLICK="row-cell:click",t.ROW_CELL_DOUBLE_CLICK="row-cell:double-click",t.ROW_CELL_CONTEXT_MENU="row-cell:context-menu",t.ROW_CELL_MOUSE_DOWN="row-cell:mouse-down",t.ROW_CELL_MOUSE_UP="row-cell:mouse-up",t.ROW_CELL_MOUSE_MOVE="row-cell:mouse-move",t.ROW_CELL_SCROLL="row-cell:scroll",t.ROW_CELL_BRUSH_SELECTION="row-cell:brush-selection",t.ROW_CELL_COLLAPSED="row-cell:collapsed",t.ROW_CELL_ALL_COLLAPSED="row-cell:all-collapsed",t.ROW_CELL_RENDER="row-cell:render",t.ROW_CELL_COLLAPSED__PRIVATE="row-cell:collapsed__private",t.ROW_CELL_ALL_COLLAPSED__PRIVATE="row-cell:all-collapsed__private",t.COL_CELL_HOVER="col-cell:hover",t.COL_CELL_CLICK="col-cell:click",t.COL_CELL_DOUBLE_CLICK="col-cell:double-click",t.COL_CELL_CONTEXT_MENU="col-cell:context-menu",t.COL_CELL_MOUSE_DOWN="col-cell:mouse-down",t.COL_CELL_MOUSE_UP="col-cell:mouse-up",t.COL_CELL_MOUSE_MOVE="col-cell:mouse-move",t.COL_CELL_BRUSH_SELECTION="col-cell:brush-selection",t.COL_CELL_EXPANDED="col-cell:expanded",t.COL_CELL_HIDDEN="col-cell:hidden",t.COL_CELL_RENDER="col-cell:render",t.DATA_CELL_HOVER="data-cell:hover",t.DATA_CELL_CLICK="data-cell:click",t.DATA_CELL_DOUBLE_CLICK="data-cell:double-click",t.DATA_CELL_CONTEXT_MENU="data-cell:context-menu",t.DATA_CELL_MOUSE_UP="data-cell:mouse-up",t.DATA_CELL_MOUSE_DOWN="data-cell:mouse-down",t.DATA_CELL_MOUSE_MOVE="data-cell:mouse-move",t.DATA_CELL_BRUSH_SELECTION="data-cell:brush-selection",t.DATA_CELL_SELECT_MOVE="data-cell:select-move",t.DATA_CELL_RENDER="data-cell:render",t.CORNER_CELL_HOVER="corner-cell:hover",t.CORNER_CELL_CLICK="corner-cell:click",t.CORNER_CELL_DOUBLE_CLICK="corner-cell:double-click",t.CORNER_CELL_CONTEXT_MENU="corner-cell:context-menu",t.CORNER_CELL_MOUSE_DOWN="corner-cell:mouse-down",t.CORNER_CELL_MOUSE_UP="corner-cell:mouse-up",t.CORNER_CELL_MOUSE_MOVE="corner-cell:mouse-move",t.CORNER_CELL_RENDER="corner-cell:render",t.MERGED_CELLS_HOVER="merged-cells:hover",t.MERGED_CELLS_CLICK="merged-cells:click",t.MERGED_CELLS_DOUBLE_CLICK="merged-cells:double-click",t.MERGED_CELLS_CONTEXT_MENU="merged-cells:context-menu",t.MERGED_CELLS_MOUSE_DOWN="merged-cells:mouse-down",t.MERGED_CELLS_MOUSE_UP="merged-cells:mouse-up",t.MERGED_CELLS_MOUSE_MOVE="merged-cells:mouse-move",t.MERGED_CELLS_RENDER="merged-cells:render",t.SERIES_NUMBER_CELL_RENDER="series-number-cell:render",t.RANGE_SORT="sort:range-sort",t.RANGE_SORTED="sort:range-sorted",t.RANGE_FILTER="filter:range-filter",t.RANGE_FILTERED="filter:range-filtered",t.LAYOUT_AFTER_HEADER_LAYOUT="layout:after-header-layout",t.LAYOUT_CELL_RENDER="layout:cell-render",t.LAYOUT_PAGINATION="layout:pagination",t.LAYOUT_AFTER_REAL_DATA_CELL_RENDER="layout:after-real-data-cell-render",t.LAYOUT_AFTER_RENDER="layout:after-render",t.LAYOUT_BEFORE_RENDER="layout:before-render",t.LAYOUT_DESTROY="layout:destroy",t.LAYOUT_RESIZE="layout:resize",t.LAYOUT_RESIZE_SERIES_WIDTH="layout:resize-series-width",t.LAYOUT_RESIZE_ROW_WIDTH="layout:resize-row-width",t.LAYOUT_RESIZE_ROW_HEIGHT="layout:resize-row-height",t.LAYOUT_RESIZE_COL_WIDTH="layout:resize-column-width",t.LAYOUT_RESIZE_COL_HEIGHT="layout:resize-column-height",t.LAYOUT_RESIZE_TREE_WIDTH="layout:resize-tree-width",t.LAYOUT_RESIZE_MOUSE_DOWN="layout:resize:mouse-down",t.LAYOUT_RESIZE_MOUSE_MOVE="layout:resize:mouse-move",t.LAYOUT_RESIZE_MOUSE_UP="layout:resize-mouse-up",t.GLOBAL_KEYBOARD_DOWN="global:keyboard-down",t.GLOBAL_KEYBOARD_UP="global:keyboard-up",t.GLOBAL_COPIED="global:copied",t.GLOBAL_MOUSE_UP="global:mouse-up",t.GLOBAL_MOUSE_MOVE="global:mouse-move",t.GLOBAL_ACTION_ICON_CLICK="global:action-icon-click",t.GLOBAL_ACTION_ICON_HOVER="global:action-icon-hover",t.GLOBAL_ACTION_ICON_HOVER_OFF="global:action-icon-hover-off",t.GLOBAL_CONTEXT_MENU="global:context-menu",t.GLOBAL_CLICK="global:click",t.GLOBAL_DOUBLE_CLICK="global:double-click",t.GLOBAL_SELECTED="global:selected",t.GLOBAL_HOVER="global:hover",t.GLOBAL_RESET="global:reset",t.GLOBAL_LINK_FIELD_JUMP="global:link-field-jump",t.GLOBAL_SCROLL="global:scroll"}(Xl||(Xl={}));var ru="object"==("undefined"==typeof global?"undefined":h(global))&&global&&global.Object===Object&&global,iu="object"==("undefined"==typeof self?"undefined":h(self))&&self&&self.Object===Object&&self,ou=ru||iu||Function("return this")(),au=ou.Symbol,su=Object.prototype,lu=su.hasOwnProperty,uu=su.toString,cu=au?au.toStringTag:void 0;var hu=Object.prototype.toString;var du="[object Null]",fu="[object Undefined]",pu=au?au.toStringTag:void 0;function vu(t){return null==t?void 0===t?fu:du:pu&&pu in Object(t)?function(t){var e=lu.call(t,cu),n=t[cu];try{t[cu]=void 0;var r=!0}catch(o){}var i=uu.call(t);return r&&(e?t[cu]=n:delete t[cu]),i}(t):function(t){return hu.call(t)}(t)}function gu(t){return null!=t&&"object"==h(t)}var yu="[object Symbol]";function mu(t){return"symbol"==h(t)||gu(t)&&vu(t)==yu}function Cu(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}var wu=Array.isArray,xu=1/0,bu=au?au.prototype:void 0,Eu=bu?bu.toString:void 0;function Su(t){if("string"==typeof t)return t;if(wu(t))return Cu(t,Su)+"";if(mu(t))return Eu?Eu.call(t):"";var e=t+"";return"0"==e&&1/t==-xu?"-0":e}var Tu=/\s/;var Lu=/^\s+/;function _u(t){return t?t.slice(0,function(t){for(var e=t.length;e--&&Tu.test(t.charAt(e)););return e}(t)+1).replace(Lu,""):t}function Mu(t){var e=h(t);return null!=t&&("object"==e||"function"==e)}var Ru=NaN,Ou=/^[-+]0x[0-9a-f]+$/i,Nu=/^0b[01]+$/i,Iu=/^0o[0-7]+$/i,Au=parseInt;function Pu(t){if("number"==typeof t)return t;if(mu(t))return Ru;if(Mu(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Mu(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=_u(t);var n=Nu.test(t);return n||Iu.test(t)?Au(t.slice(2),n?2:8):Ou.test(t)?Ru:+t}var ku=1/0,Bu=17976931348623157e292;function Du(t){return t?(t=Pu(t))===ku||t===-ku?(t<0?-1:1)*Bu:t==t?t:0:0===t?t:0}function Fu(t){var e=Du(t),n=e%1;return e==e?n?e-n:e:0}function Hu(t){return t}var zu="[object AsyncFunction]",Gu="[object Function]",Wu="[object GeneratorFunction]",Vu="[object Proxy]";function Uu(t){if(!Mu(t))return!1;var e=vu(t);return e==Gu||e==Wu||e==zu||e==Vu}var ju,Yu=ou["__core-js_shared__"],Xu=(ju=/[^.]+$/.exec(Yu&&Yu.keys&&Yu.keys.IE_PROTO||""))?"Symbol(src)_1."+ju:"";var qu=Function.prototype.toString;function Ku(t){if(null!=t){try{return qu.call(t)}catch(e){}try{return t+""}catch(e){}}return""}var Zu=/^\[object .+?Constructor\]$/,$u=Function.prototype,Qu=Object.prototype,Ju=$u.toString,tc=Qu.hasOwnProperty,ec=RegExp("^"+Ju.call(tc).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function nc(t){return!(!Mu(t)||(e=t,Xu&&Xu in e))&&(Uu(t)?ec:Zu).test(Ku(t));var e}function rc(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return nc(n)?n:void 0}var ic=rc(ou,"WeakMap"),oc=Object.create,ac=function(){function t(){}return function(e){if(!Mu(e))return{};if(oc)return oc(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();function sc(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}var lc=Date.now;function uc(t){return function(){return t}}var cc,hc,dc,fc=function(){try{var t=rc(Object,"defineProperty");return t({},"",{}),t}catch(e){}}(),pc=fc?function(t,e){return fc(t,"toString",{configurable:!0,enumerable:!1,value:uc(e),writable:!0})}:Hu,vc=(cc=pc,hc=0,dc=0,function(){var t=lc(),e=16-(t-dc);if(dc=t,e>0){if(++hc>=800)return arguments[0]}else hc=0;return cc.apply(void 0,arguments)});function gc(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}function yc(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}function mc(t){return t!=t}function Cc(t,e,n){return e==e?function(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}(t,e,n):yc(t,mc,n)}function wc(t,e){return!!(null==t?0:t.length)&&Cc(t,e,0)>-1}var xc=9007199254740991,bc=/^(?:0|[1-9]\d*)$/;function Ec(t,e){var n=h(t);return!!(e=null==e?xc:e)&&("number"==n||"symbol"!=n&&bc.test(t))&&t>-1&&t%1==0&&t<e}function Sc(t,e,n){"__proto__"==e&&fc?fc(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function Tc(t,e){return t===e||t!=t&&e!=e}var Lc=Object.prototype.hasOwnProperty;function _c(t,e,n){var r=t[e];Lc.call(t,e)&&Tc(r,n)&&(void 0!==n||e in t)||Sc(t,e,n)}function Mc(t,e,n,r){var i=!n;n||(n={});for(var o=-1,a=e.length;++o<a;){var s=e[o],l=r?r(n[s],t[s],s,n,t):void 0;void 0===l&&(l=t[s]),i?Sc(n,s,l):_c(n,s,l)}return n}var Rc=Math.max;function Oc(t,e,n){return e=Rc(void 0===e?t.length-1:e,0),function(){for(var r=arguments,i=-1,o=Rc(r.length-e,0),a=Array(o);++i<o;)a[i]=r[e+i];i=-1;for(var s=Array(e+1);++i<e;)s[i]=r[i];return s[e]=n(a),function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}(t,this,s)}}function Nc(t,e){return vc(Oc(t,e,Hu),t+"")}var Ic=9007199254740991;function Ac(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=Ic}function Pc(t){return null!=t&&Ac(t.length)&&!Uu(t)}function kc(t,e,n){if(!Mu(n))return!1;var r=h(e);return!!("number"==r?Pc(n)&&Ec(e,n.length):"string"==r&&e in n)&&Tc(n[e],t)}function Bc(t){return Nc((function(e,n){var r=-1,i=n.length,o=i>1?n[i-1]:void 0,a=i>2?n[2]:void 0;for(o=t.length>3&&"function"==typeof o?(i--,o):void 0,a&&kc(n[0],n[1],a)&&(o=i<3?void 0:o,i=1),e=Object(e);++r<i;){var s=n[r];s&&t(e,s,r,o)}return e}))}var Dc=Object.prototype;function Fc(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Dc)}function Hc(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function zc(t){return gu(t)&&"[object Arguments]"==vu(t)}var Gc=Object.prototype,Wc=Gc.hasOwnProperty,Vc=Gc.propertyIsEnumerable,Uc=zc(function(){return arguments}())?zc:function(t){return gu(t)&&Wc.call(t,"callee")&&!Vc.call(t,"callee")};var jc="object"==h(e)&&e&&!e.nodeType&&e,Yc=jc&&"object"==h(r)&&r&&!r.nodeType&&r,Xc=Yc&&Yc.exports===jc?ou.Buffer:void 0,qc=(Xc?Xc.isBuffer:void 0)||function(){return!1},Kc={};function Zc(t){return function(e){return t(e)}}Kc["[object Float32Array]"]=Kc["[object Float64Array]"]=Kc["[object Int8Array]"]=Kc["[object Int16Array]"]=Kc["[object Int32Array]"]=Kc["[object Uint8Array]"]=Kc["[object Uint8ClampedArray]"]=Kc["[object Uint16Array]"]=Kc["[object Uint32Array]"]=!0,Kc["[object Arguments]"]=Kc["[object Array]"]=Kc["[object ArrayBuffer]"]=Kc["[object Boolean]"]=Kc["[object DataView]"]=Kc["[object Date]"]=Kc["[object Error]"]=Kc["[object Function]"]=Kc["[object Map]"]=Kc["[object Number]"]=Kc["[object Object]"]=Kc["[object RegExp]"]=Kc["[object Set]"]=Kc["[object String]"]=Kc["[object WeakMap]"]=!1;var $c="object"==h(e)&&e&&!e.nodeType&&e,Qc=$c&&"object"==h(r)&&r&&!r.nodeType&&r,Jc=Qc&&Qc.exports===$c&&ru.process,th=function(){try{var t=Qc&&Qc.require&&Qc.require("util").types;return t||Jc&&Jc.binding&&Jc.binding("util")}catch(e){}}(),eh=th&&th.isTypedArray,nh=eh?Zc(eh):function(t){return gu(t)&&Ac(t.length)&&!!Kc[vu(t)]},rh=nh,ih=Object.prototype.hasOwnProperty;function oh(t,e){var n=wu(t),r=!n&&Uc(t),i=!n&&!r&&qc(t),o=!n&&!r&&!i&&rh(t),a=n||r||i||o,s=a?Hc(t.length,String):[],l=s.length;for(var u in t)!e&&!ih.call(t,u)||a&&("length"==u||i&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||Ec(u,l))||s.push(u);return s}function ah(t,e){return function(n){return t(e(n))}}var sh=ah(Object.keys,Object),lh=Object.prototype.hasOwnProperty;function uh(t){if(!Fc(t))return sh(t);var e=[];for(var n in Object(t))lh.call(t,n)&&"constructor"!=n&&e.push(n);return e}function ch(t){return Pc(t)?oh(t):uh(t)}var hh=Object.prototype.hasOwnProperty,dh=Bc((function(t,e){if(Fc(e)||Pc(e))Mc(e,ch(e),t);else for(var n in e)hh.call(e,n)&&_c(t,n,e[n])}));var fh=Object.prototype.hasOwnProperty;function ph(t){if(!Mu(t))return function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}(t);var e=Fc(t),n=[];for(var r in t)("constructor"!=r||!e&&fh.call(t,r))&&n.push(r);return n}function vh(t){return Pc(t)?oh(t,!0):ph(t)}var gh=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,yh=/^\w*$/;function mh(t,e){if(wu(t))return!1;var n=h(t);return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!mu(t))||(yh.test(t)||!gh.test(t)||null!=e&&t in Object(e))}var Ch=rc(Object,"create");var wh=Object.prototype.hasOwnProperty;var xh=Object.prototype.hasOwnProperty;function bh(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Eh(t,e){for(var n=t.length;n--;)if(Tc(t[n][0],e))return n;return-1}bh.prototype.clear=function(){this.__data__=Ch?Ch(null):{},this.size=0},bh.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},bh.prototype.get=function(t){var e=this.__data__;if(Ch){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return wh.call(e,t)?e[t]:void 0},bh.prototype.has=function(t){var e=this.__data__;return Ch?void 0!==e[t]:xh.call(e,t)},bh.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Ch&&void 0===e?"__lodash_hash_undefined__":e,this};var Sh=Array.prototype.splice;function Th(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Th.prototype.clear=function(){this.__data__=[],this.size=0},Th.prototype.delete=function(t){var e=this.__data__,n=Eh(e,t);return!(n<0)&&(n==e.length-1?e.pop():Sh.call(e,n,1),--this.size,!0)},Th.prototype.get=function(t){var e=this.__data__,n=Eh(e,t);return n<0?void 0:e[n][1]},Th.prototype.has=function(t){return Eh(this.__data__,t)>-1},Th.prototype.set=function(t,e){var n=this.__data__,r=Eh(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this};var Lh=rc(ou,"Map");function _h(t,e){var n=t.__data__;return function(t){var e=h(t);return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}(e)?n["string"==typeof e?"string":"hash"]:n.map}function Mh(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Mh.prototype.clear=function(){this.size=0,this.__data__={hash:new bh,map:new(Lh||Th),string:new bh}},Mh.prototype.delete=function(t){var e=_h(this,t).delete(t);return this.size-=e?1:0,e},Mh.prototype.get=function(t){return _h(this,t).get(t)},Mh.prototype.has=function(t){return _h(this,t).has(t)},Mh.prototype.set=function(t,e){var n=_h(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this};var Rh="Expected a function";function Oh(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError(Rh);var n=function n(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(Oh.Cache||Mh),n}Oh.Cache=Mh;var Nh=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ih=/\\(\\)?/g,Ah=function(t){var e=Oh(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(Nh,(function(t,n,r,i){e.push(r?i.replace(Ih,"$1"):n||t)})),e}));function Ph(t){return null==t?"":Su(t)}function kh(t,e){return wu(t)?t:mh(t,e)?[t]:Ah(Ph(t))}var Bh=1/0;function Dh(t){if("string"==typeof t||mu(t))return t;var e=t+"";return"0"==e&&1/t==-Bh?"-0":e}function Fh(t,e){for(var n=0,r=(e=kh(e,t)).length;null!=t&&n<r;)t=t[Dh(e[n++])];return n&&n==r?t:void 0}function Hh(t,e,n){var r=null==t?void 0:Fh(t,e);return void 0===r?n:r}function zh(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}var Gh=au?au.isConcatSpreadable:void 0;function Wh(t){return wu(t)||Uc(t)||!!(Gh&&t&&t[Gh])}function Vh(t,e,n,r,i){var o=-1,a=t.length;for(n||(n=Wh),i||(i=[]);++o<a;){var s=t[o];e>0&&n(s)?e>1?Vh(s,e-1,n,r,i):zh(i,s):r||(i[i.length]=s)}return i}function Uh(t){return(null==t?0:t.length)?Vh(t,1):[]}function jh(t){return vc(Oc(t,void 0,Uh),t+"")}var Yh=ah(Object.getPrototypeOf,Object),Xh="[object Object]",qh=Function.prototype,Kh=Object.prototype,Zh=qh.toString,$h=Kh.hasOwnProperty,Qh=Zh.call(Object);function Jh(t){if(!gu(t)||vu(t)!=Xh)return!1;var e=Yh(t);if(null===e)return!0;var n=$h.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&Zh.call(n)==Qh}function td(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),(n=n>i?i:n)<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=Array(i);++r<i;)o[r]=t[r+e];return o}var ed=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");function nd(t){return ed.test(t)}var rd="\\ud800-\\udfff",id="["+rd+"]",od="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",ad="\\ud83c[\\udffb-\\udfff]",sd="[^"+rd+"]",ld="(?:\\ud83c[\\udde6-\\uddff]){2}",ud="[\\ud800-\\udbff][\\udc00-\\udfff]",cd="(?:"+od+"|"+ad+")"+"?",hd="[\\ufe0e\\ufe0f]?",dd=hd+cd+("(?:\\u200d(?:"+[sd,ld,ud].join("|")+")"+hd+cd+")*"),fd="(?:"+[sd+od+"?",od,ld,ud,id].join("|")+")",pd=RegExp(ad+"(?="+ad+")|"+fd+dd,"g");function vd(t){return nd(t)?function(t){return t.match(pd)||[]}(t):function(t){return t.split("")}(t)}function gd(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function yd(t){return function(e){return null==t?void 0:t[e]}}var md=yd({"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss","":"A","":"A","":"A","":"a","":"a","":"a","":"C","":"C","":"C","":"C","":"c","":"c","":"c","":"c","":"D","":"D","":"d","":"d","":"E","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"e","":"G","":"G","":"G","":"G","":"g","":"g","":"g","":"g","":"H","":"H","":"h","":"h","":"I","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"i","":"J","":"j","":"K","":"k","":"k","":"L","":"L","":"L","":"L","":"L","":"l","":"l","":"l","":"l","":"l","":"N","":"N","":"N","":"N","":"n","":"n","":"n","":"n","":"O","":"O","":"O","":"o","":"o","":"o","":"R","":"R","":"R","":"r","":"r","":"r","":"S","":"S","":"S","":"S","":"s","":"s","":"s","":"s","":"T","":"T","":"T","":"t","":"t","":"t","":"U","":"U","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"u","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"Z","":"Z","":"z","":"z","":"z","":"IJ","":"ij","":"Oe","":"oe","":"'n","":"s"}),Cd=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,wd=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");var xd=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;var bd=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;var Ed="\\ud800-\\udfff",Sd="\\u2700-\\u27bf",Td="a-z\\xdf-\\xf6\\xf8-\\xff",Ld="A-Z\\xc0-\\xd6\\xd8-\\xde",_d="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Md="["+_d+"]",Rd="\\d+",Od="["+Sd+"]",Nd="["+Td+"]",Id="[^"+Ed+_d+Rd+Sd+Td+Ld+"]",Ad="(?:\\ud83c[\\udde6-\\uddff]){2}",Pd="[\\ud800-\\udbff][\\udc00-\\udfff]",kd="["+Ld+"]",Bd="(?:"+Nd+"|"+Id+")",Dd="(?:"+kd+"|"+Id+")",Fd="(?:['](?:d|ll|m|re|s|t|ve))?",Hd="(?:['](?:D|LL|M|RE|S|T|VE))?",zd="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",Gd="[\\ufe0e\\ufe0f]?",Wd=Gd+zd+("(?:\\u200d(?:"+["[^"+Ed+"]",Ad,Pd].join("|")+")"+Gd+zd+")*"),Vd="(?:"+[Od,Ad,Pd].join("|")+")"+Wd,Ud=RegExp([kd+"?"+Nd+"+"+Fd+"(?="+[Md,kd,"$"].join("|")+")",Dd+"+"+Hd+"(?="+[Md,kd+Bd,"$"].join("|")+")",kd+"?"+Bd+"+"+Fd,kd+"+"+Hd,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Rd,Vd].join("|"),"g");function jd(t,e,n){return t=Ph(t),void 0===(e=n?void 0:e)?function(t){return bd.test(t)}(t)?function(t){return t.match(Ud)||[]}(t):function(t){return t.match(xd)||[]}(t):t.match(e)||[]}var Yd=RegExp("[']","g");var Xd=ou.isFinite,qd=Math.min;function Kd(t,e,n){return t==t&&(void 0!==n&&(t=t<=n?t:n),void 0!==e&&(t=t>=e?t:e)),t}function Zd(t,e,n){return void 0===n&&(n=e,e=void 0),void 0!==n&&(n=(n=Pu(n))==n?n:0),void 0!==e&&(e=(e=Pu(e))==e?e:0),Kd(Pu(t),e,n)}function $d(t){var e=this.__data__=new Th(t);this.size=e.size}$d.prototype.clear=function(){this.__data__=new Th,this.size=0},$d.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},$d.prototype.get=function(t){return this.__data__.get(t)},$d.prototype.has=function(t){return this.__data__.has(t)},$d.prototype.set=function(t,e){var n=this.__data__;if(n instanceof Th){var r=n.__data__;if(!Lh||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Mh(r)}return n.set(t,e),this.size=n.size,this};var Qd="object"==h(e)&&e&&!e.nodeType&&e,Jd=Qd&&"object"==h(r)&&r&&!r.nodeType&&r,tf=Jd&&Jd.exports===Qd?ou.Buffer:void 0,ef=tf?tf.allocUnsafe:void 0;function nf(t,e){if(e)return t.slice();var n=t.length,r=ef?ef(n):new t.constructor(n);return t.copy(r),r}function rf(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}function of(){return[]}var af=Object.prototype.propertyIsEnumerable,sf=Object.getOwnPropertySymbols,lf=sf?function(t){return null==t?[]:(t=Object(t),rf(sf(t),(function(e){return af.call(t,e)})))}:of;var uf=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)zh(e,lf(t)),t=Yh(t);return e}:of;function cf(t,e,n){var r=e(t);return wu(t)?r:zh(r,n(t))}function hf(t){return cf(t,ch,lf)}function df(t){return cf(t,vh,uf)}var ff=rc(ou,"DataView"),pf=rc(ou,"Promise"),vf=rc(ou,"Set"),gf="[object Map]",yf="[object Promise]",mf="[object Set]",Cf="[object WeakMap]",wf="[object DataView]",xf=Ku(ff),bf=Ku(Lh),Ef=Ku(pf),Sf=Ku(vf),Tf=Ku(ic),Lf=vu;(ff&&Lf(new ff(new ArrayBuffer(1)))!=wf||Lh&&Lf(new Lh)!=gf||pf&&Lf(pf.resolve())!=yf||vf&&Lf(new vf)!=mf||ic&&Lf(new ic)!=Cf)&&(Lf=function(t){var e=vu(t),n="[object Object]"==e?t.constructor:void 0,r=n?Ku(n):"";if(r)switch(r){case xf:return wf;case bf:return gf;case Ef:return yf;case Sf:return mf;case Tf:return Cf}return e});var _f=Lf,Mf=Object.prototype.hasOwnProperty;var Rf=ou.Uint8Array;function Of(t){var e=new t.constructor(t.byteLength);return new Rf(e).set(new Rf(t)),e}var Nf=/\w*$/;var If=au?au.prototype:void 0,Af=If?If.valueOf:void 0;function Pf(t,e){var n=e?Of(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}var kf="[object Boolean]",Bf="[object Date]",Df="[object Map]",Ff="[object Number]",Hf="[object RegExp]",zf="[object Set]",Gf="[object String]",Wf="[object Symbol]",Vf="[object ArrayBuffer]",Uf="[object DataView]",jf="[object Float32Array]",Yf="[object Float64Array]",Xf="[object Int8Array]",qf="[object Int16Array]",Kf="[object Int32Array]",Zf="[object Uint8Array]",$f="[object Uint8ClampedArray]",Qf="[object Uint16Array]",Jf="[object Uint32Array]";function tp(t,e,n){var r,i,o,a=t.constructor;switch(e){case Vf:return Of(t);case kf:case Bf:return new a(+t);case Uf:return function(t,e){var n=e?Of(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case jf:case Yf:case Xf:case qf:case Kf:case Zf:case $f:case Qf:case Jf:return Pf(t,n);case Df:return new a;case Ff:case Gf:return new a(t);case Hf:return(o=new(i=t).constructor(i.source,Nf.exec(i))).lastIndex=i.lastIndex,o;case zf:return new a;case Wf:return r=t,Af?Object(Af.call(r)):{}}}function ep(t){return"function"!=typeof t.constructor||Fc(t)?{}:ac(Yh(t))}var np=th&&th.isMap,rp=np?Zc(np):function(t){return gu(t)&&"[object Map]"==_f(t)};var ip=th&&th.isSet,op=ip?Zc(ip):function(t){return gu(t)&&"[object Set]"==_f(t)},ap=1,sp=2,lp=4,up="[object Arguments]",cp="[object Function]",hp="[object GeneratorFunction]",dp="[object Object]",fp={};function pp(t,e,n,r,i,o){var a,s=e&ap,l=e&sp,u=e&lp;if(n&&(a=i?n(t,r,i,o):n(t)),void 0!==a)return a;if(!Mu(t))return t;var c=wu(t);if(c){if(a=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&Mf.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(t),!s)return sc(t,a)}else{var h=_f(t),d=h==cp||h==hp;if(qc(t))return nf(t,s);if(h==dp||h==up||d&&!i){if(a=l||d?{}:ep(t),!s)return l?function(t,e){return Mc(t,uf(t),e)}(t,function(t,e){return t&&Mc(e,vh(e),t)}(a,t)):function(t,e){return Mc(t,lf(t),e)}(t,function(t,e){return t&&Mc(e,ch(e),t)}(a,t))}else{if(!fp[h])return i?t:{};a=tp(t,h,s)}}o||(o=new $d);var f=o.get(t);if(f)return f;o.set(t,a),op(t)?t.forEach((function(r){a.add(pp(r,e,n,r,t,o))})):rp(t)&&t.forEach((function(r,i){a.set(i,pp(r,e,n,i,t,o))}));var p=c?void 0:(u?l?df:hf:l?vh:ch)(t);return gc(p||t,(function(r,i){p&&(r=t[i=r]),_c(a,i,pp(r,e,n,i,t,o))})),a}fp[up]=fp["[object Array]"]=fp["[object ArrayBuffer]"]=fp["[object DataView]"]=fp["[object Boolean]"]=fp["[object Date]"]=fp["[object Float32Array]"]=fp["[object Float64Array]"]=fp["[object Int8Array]"]=fp["[object Int16Array]"]=fp["[object Int32Array]"]=fp["[object Map]"]=fp["[object Number]"]=fp[dp]=fp["[object RegExp]"]=fp["[object Set]"]=fp["[object String]"]=fp["[object Symbol]"]=fp["[object Uint8Array]"]=fp["[object Uint8ClampedArray]"]=fp["[object Uint16Array]"]=fp["[object Uint32Array]"]=!0,fp["[object Error]"]=fp[cp]=fp["[object WeakMap]"]=!1;function vp(t){return pp(t,4)}function gp(t){return pp(t,5)}function yp(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var o=t[e];o&&(i[r++]=o)}return i}function mp(){var t=arguments.length;if(!t)return[];for(var e=Array(t-1),n=arguments[0],r=t;r--;)e[r-1]=arguments[r];return zh(wu(n)?sc(n):[n],Vh(e,1))}function Cp(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new Mh;++e<n;)this.add(t[e])}function wp(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function xp(t,e){return t.has(e)}Cp.prototype.add=Cp.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},Cp.prototype.has=function(t){return this.__data__.has(t)};var bp=1,Ep=2;function Sp(t,e,n,r,i,o){var a=n&bp,s=t.length,l=e.length;if(s!=l&&!(a&&l>s))return!1;var u=o.get(t),c=o.get(e);if(u&&c)return u==e&&c==t;var h=-1,d=!0,f=n&Ep?new Cp:void 0;for(o.set(t,e),o.set(e,t);++h<s;){var p=t[h],v=e[h];if(r)var g=a?r(v,p,h,e,t,o):r(p,v,h,t,e,o);if(void 0!==g){if(g)continue;d=!1;break}if(f){if(!wp(e,(function(t,e){if(!xp(f,e)&&(p===t||i(p,t,n,r,o)))return f.push(e)}))){d=!1;break}}else if(p!==v&&!i(p,v,n,r,o)){d=!1;break}}return o.delete(t),o.delete(e),d}function Tp(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function Lp(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}var _p=1,Mp=2,Rp="[object Boolean]",Op="[object Date]",Np="[object Error]",Ip="[object Map]",Ap="[object Number]",Pp="[object RegExp]",kp="[object Set]",Bp="[object String]",Dp="[object Symbol]",Fp="[object ArrayBuffer]",Hp="[object DataView]",zp=au?au.prototype:void 0,Gp=zp?zp.valueOf:void 0;var Wp=1,Vp=Object.prototype.hasOwnProperty;var Up=1,jp="[object Arguments]",Yp="[object Array]",Xp="[object Object]",qp=Object.prototype.hasOwnProperty;function Kp(t,e,n,r,i,o){var a=wu(t),s=wu(e),l=a?Yp:_f(t),u=s?Yp:_f(e),c=(l=l==jp?Xp:l)==Xp,h=(u=u==jp?Xp:u)==Xp,d=l==u;if(d&&qc(t)){if(!qc(e))return!1;a=!0,c=!1}if(d&&!c)return o||(o=new $d),a||rh(t)?Sp(t,e,n,r,i,o):function(t,e,n,r,i,o,a){switch(n){case Hp:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case Fp:return!(t.byteLength!=e.byteLength||!o(new Rf(t),new Rf(e)));case Rp:case Op:case Ap:return Tc(+t,+e);case Np:return t.name==e.name&&t.message==e.message;case Pp:case Bp:return t==e+"";case Ip:var s=Tp;case kp:var l=r&_p;if(s||(s=Lp),t.size!=e.size&&!l)return!1;var u=a.get(t);if(u)return u==e;r|=Mp,a.set(t,e);var c=Sp(s(t),s(e),r,i,o,a);return a.delete(t),c;case Dp:if(Gp)return Gp.call(t)==Gp.call(e)}return!1}(t,e,l,n,r,i,o);if(!(n&Up)){var f=c&&qp.call(t,"__wrapped__"),p=h&&qp.call(e,"__wrapped__");if(f||p){var v=f?t.value():t,g=p?e.value():e;return o||(o=new $d),i(v,g,n,r,o)}}return!!d&&(o||(o=new $d),function(t,e,n,r,i,o){var a=n&Wp,s=hf(t),l=s.length;if(l!=hf(e).length&&!a)return!1;for(var u=l;u--;){var c=s[u];if(!(a?c in e:Vp.call(e,c)))return!1}var h=o.get(t),d=o.get(e);if(h&&d)return h==e&&d==t;var f=!0;o.set(t,e),o.set(e,t);for(var p=a;++u<l;){var v=t[c=s[u]],g=e[c];if(r)var y=a?r(g,v,c,e,t,o):r(v,g,c,t,e,o);if(!(void 0===y?v===g||i(v,g,n,r,o):y)){f=!1;break}p||(p="constructor"==c)}if(f&&!p){var m=t.constructor,C=e.constructor;m==C||!("constructor"in t)||!("constructor"in e)||"function"==typeof m&&m instanceof m&&"function"==typeof C&&C instanceof C||(f=!1)}return o.delete(t),o.delete(e),f}(t,e,n,r,i,o))}function Zp(t,e,n,r,i){return t===e||(null==t||null==e||!gu(t)&&!gu(e)?t!=t&&e!=e:Kp(t,e,n,r,Zp,i))}var $p=1,Qp=2;function Jp(t){return t==t&&!Mu(t)}function tv(t,e){return function(n){return null!=n&&(n[t]===e&&(void 0!==e||t in Object(n)))}}function ev(t){var e=function(t){for(var e=ch(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,Jp(i)]}return e}(t);return 1==e.length&&e[0][2]?tv(e[0][0],e[0][1]):function(n){return n===t||function(t,e,n,r){var i=n.length,o=i,a=!r;if(null==t)return!o;for(t=Object(t);i--;){var s=n[i];if(a&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++i<o;){var l=(s=n[i])[0],u=t[l],c=s[1];if(a&&s[2]){if(void 0===u&&!(l in t))return!1}else{var h=new $d;if(r)var d=r(u,c,l,t,e,h);if(!(void 0===d?Zp(c,u,$p|Qp,r,h):d))return!1}}return!0}(n,t,e)}}function nv(t,e){return null!=t&&e in Object(t)}function rv(t,e,n){for(var r=-1,i=(e=kh(e,t)).length,o=!1;++r<i;){var a=Dh(e[r]);if(!(o=null!=t&&n(t,a)))break;t=t[a]}return o||++r!=i?o:!!(i=null==t?0:t.length)&&Ac(i)&&Ec(a,i)&&(wu(t)||Uc(t))}function iv(t,e){return null!=t&&rv(t,e,nv)}var ov=1,av=2;function sv(t){return function(e){return null==e?void 0:e[t]}}function lv(t){return mh(t)?sv(Dh(t)):function(t){return function(e){return Fh(e,t)}}(t)}function uv(t){return"function"==typeof t?t:null==t?Hu:"object"==h(t)?wu(t)?(e=t[0],n=t[1],mh(e)&&Jp(n)?tv(Dh(e),n):function(t){var r=Hh(t,e);return void 0===r&&r===n?iv(t,e):Zp(n,r,ov|av)}):ev(t):lv(t);var e,n}function cv(t,e,n,r){for(var i=-1,o=null==t?0:t.length;++i<o;){var a=t[i];e(r,a,n(a),t)}return r}var hv,dv=function(t,e,n){for(var r=-1,i=Object(t),o=n(t),a=o.length;a--;){var s=o[hv?a:++r];if(!1===e(i[s],s,i))break}return t};function fv(t,e){return t&&dv(t,e,ch)}var pv=function(t,e){return function(n,r){if(null==n)return n;if(!Pc(n))return t(n,r);for(var i=n.length,o=e?i:-1,a=Object(n);(e?o--:++o<i)&&!1!==r(a[o],o,a););return n}}(fv),vv=pv;function gv(t,e,n,r){return vv(t,(function(t,i,o){e(r,t,n(t),o)})),r}var yv=function(){return ou.Date.now()},mv="Expected a function",Cv=Math.max,wv=Math.min;function xv(t,e,n){var r,i,o,a,s,l,u=0,c=!1,h=!1,d=!0;if("function"!=typeof t)throw new TypeError(mv);function f(e){var n=r,o=i;return r=i=void 0,u=e,a=t.apply(o,n)}function p(t){var n=t-l;return void 0===l||n>=e||n<0||h&&t-u>=o}function v(){var t=yv();if(p(t))return g(t);s=setTimeout(v,function(t){var n=e-(t-l);return h?wv(n,o-(t-u)):n}(t))}function g(t){return s=void 0,d&&r?f(t):(r=i=void 0,a)}function y(){var t=yv(),n=p(t);if(r=arguments,i=this,l=t,n){if(void 0===s)return function(t){return u=t,s=setTimeout(v,e),c?f(t):a}(l);if(h)return clearTimeout(s),s=setTimeout(v,e),f(l)}return void 0===s&&(s=setTimeout(v,e)),a}return e=Pu(e)||0,Mu(n)&&(c=!!n.leading,o=(h="maxWait"in n)?Cv(Pu(n.maxWait)||0,e):o,d="trailing"in n?!!n.trailing:d),y.cancel=function(){void 0!==s&&clearTimeout(s),u=0,r=l=i=s=void 0},y.flush=function(){return void 0===s?a:g(yv())},y}function bv(t,e,n){(void 0!==n&&!Tc(t[e],n)||void 0===n&&!(e in t))&&Sc(t,e,n)}function Ev(t){return gu(t)&&Pc(t)}function Sv(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}function Tv(t,e,n,r,i,o,a){var s=Sv(t,n),l=Sv(e,n),u=a.get(l);if(u)bv(t,n,u);else{var c=o?o(s,l,n+"",t,e,a):void 0,h=void 0===c;if(h){var d=wu(l),f=!d&&qc(l),p=!d&&!f&&rh(l);c=l,d||f||p?wu(s)?c=s:Ev(s)?c=sc(s):f?(h=!1,c=nf(l,!0)):p?(h=!1,c=Pf(l,!0)):c=[]:Jh(l)||Uc(l)?(c=s,Uc(s)?c=function(t){return Mc(t,vh(t))}(s):Mu(s)&&!Uu(s)||(c=ep(l))):h=!1}h&&(a.set(l,c),i(c,l,r,o,a),a.delete(l)),bv(t,n,c)}}function Lv(t,e,n,r,i){t!==e&&dv(e,(function(o,a){if(i||(i=new $d),Mu(o))Tv(t,e,a,n,Lv,r,i);else{var s=r?r(Sv(t,a),o,a+"",t,e,i):void 0;void 0===s&&(s=o),bv(t,a,s)}}),vh)}var _v=Bc((function(t,e,n,r){Lv(t,e,n,r)}));var Mv=Nc((function(t,e,n){return function(t,e,n){if("function"!=typeof t)throw new TypeError("Expected a function");return setTimeout((function(){t.apply(void 0,n)}),e)}(t,Pu(e)||0,n)}));function Rv(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}function Ov(t,e,n,r){var i=-1,o=wc,a=!0,s=t.length,l=[],u=e.length;if(!s)return l;n&&(e=Cu(e,Zc(n))),r?(o=Rv,a=!1):e.length>=200&&(o=xp,a=!1,e=new Cp(e));t:for(;++i<s;){var c=t[i],h=null==n?c:n(c);if(c=r||0!==c?c:0,a&&h==h){for(var d=u;d--;)if(e[d]===h)continue t;l.push(c)}else o(e,h,r)||l.push(c)}return l}var Nv=Nc((function(t,e){return Ev(t)?Ov(t,Vh(e,1,Ev,!0)):[]}));function Iv(t){var e=null==t?0:t.length;return e?t[e-1]:void 0}var Av=Nc((function(t,e){var n=Iv(e);return Ev(n)&&(n=void 0),Ev(t)?Ov(t,Vh(e,1,Ev,!0),void 0,n):[]}));function Pv(t){return"function"==typeof t?t:Hu}function kv(t,e){return(wu(t)?gc:vv)(t,Pv(e))}var Bv=yd({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}),Dv=/[&<>"']/g,Fv=RegExp(Dv.source);function Hv(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function zv(t,e){var n=!0;return vv(t,(function(t,r,i){return n=!!e(t,r,i)})),n}function Gv(t,e,n){var r=wu(t)?Hv:zv;return n&&kc(t,e,n)&&(e=void 0),r(t,uv(e))}function Wv(t,e){var n=[];return vv(t,(function(t,r,i){e(t,r,i)&&n.push(t)})),n}function Vv(t,e){return(wu(t)?rf:Wv)(t,uv(e))}function Uv(t){return function(e,n,r){var i=Object(e);if(!Pc(e)){var o=uv(n);e=ch(e),n=function(t){return o(i[t],t,i)}}var a=t(e,n,r);return a>-1?i[o?e[a]:a]:void 0}}var jv=Math.max;function Yv(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:Fu(n);return i<0&&(i=jv(r+i,0)),yc(t,uv(e),i)}var Xv=Uv(Yv),qv=Math.max,Kv=Math.min;var Zv=Uv((function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=r-1;return void 0!==n&&(i=Fu(n),i=n<0?qv(r+i,0):Kv(i,r-1)),yc(t,uv(e),i,!0)}));function $v(t){return t&&t.length?t[0]:void 0}function Qv(t,e){var n=-1,r=Pc(t)?Array(t.length):[];return vv(t,(function(t,i,o){r[++n]=e(t,i,o)})),r}function Jv(t,e){return(wu(t)?Cu:Qv)(t,uv(e))}function tg(t,e){return Vh(Jv(t,e),1)}var eg=function(t){var e=Math[t];return function(t,n){if(t=Pu(t),(n=null==n?0:qd(Fu(n),292))&&Xd(t)){var r=(Ph(t)+"e").split("e");return+((r=(Ph(e(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return e(t)}}("floor");var ng,rg,ig=Object.prototype.hasOwnProperty,og=(ng=function(t,e,n){ig.call(t,n)?t[n].push(e):Sc(t,n,[e])},function(t,e){var n=wu(t)?cv:gv,r=rg?rg():{};return n(t,ng,uv(e),r)});function ag(t,e){return t>e}var sg=Object.prototype.hasOwnProperty;function lg(t,e){return null!=t&&sg.call(t,e)}function ug(t,e){return null!=t&&rv(t,e,lg)}var cg=Math.max,hg=Math.min;function dg(t,e,n){return e=Du(e),void 0===n?(n=e,e=0):n=Du(n),function(t,e,n){return t>=hg(e,n)&&t<cg(e,n)}(t=Pu(t),e,n)}var fg="[object String]";function pg(t){return"string"==typeof t||!wu(t)&&gu(t)&&vu(t)==fg}function vg(t){return null==t?[]:function(t,e){return Cu(e,(function(e){return t[e]}))}(t,ch(t))}var gg=Math.max;function yg(t,e,n,r){t=Pc(t)?t:vg(t),n=n&&!r?Fu(n):0;var i=t.length;return n<0&&(n=gg(i+n,0)),pg(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&Cc(t,e,n)>-1}var mg=Math.max;function Cg(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:Fu(n);return i<0&&(i=mg(r+i,0)),Cc(t,e,i)}var wg=Math.min;function xg(t){return Ev(t)?t:[]}var bg=Nc((function(t){var e=Cu(t,xg);return e.length&&e[0]===t[0]?function(t,e,n){for(var r=n?Rv:wc,i=t[0].length,o=t.length,a=o,s=Array(o),l=1/0,u=[];a--;){var c=t[a];a&&e&&(c=Cu(c,Zc(e))),l=wg(c.length,l),s[a]=!n&&(e||i>=120&&c.length>=120)?new Cp(a&&c):void 0}c=t[0];var h=-1,d=s[0];t:for(;++h<i&&u.length<l;){var f=c[h],p=e?e(f):f;if(f=n||0!==f?f:0,!(d?xp(d,p):r(u,p,n))){for(a=o;--a;){var v=s[a];if(!(v?xp(v,p):r(t[a],p,n)))continue t}d&&d.push(p),u.push(f)}}return u}(e):[]}));function Eg(t){return!0===t||!1===t||gu(t)&&"[object Boolean]"==vu(t)}var Sg="[object Map]",Tg="[object Set]",Lg=Object.prototype.hasOwnProperty;function _g(t){if(null==t)return!0;if(Pc(t)&&(wu(t)||"string"==typeof t||"function"==typeof t.splice||qc(t)||rh(t)||Uc(t)))return!t.length;var e=_f(t);if(e==Sg||e==Tg)return!t.size;if(Fc(t))return!uh(t).length;for(var n in t)if(Lg.call(t,n))return!1;return!0}function Mg(t,e){return Zp(t,e)}function Rg(t){return"number"==typeof t||gu(t)&&"[object Number]"==vu(t)}function Og(t){return null==t}function Ng(t){return null===t}var Ig=th&&th.isRegExp,Ag=Ig?Zc(Ig):function(t){return gu(t)&&"[object RegExp]"==vu(t)};function Pg(t){return void 0===t}var kg,Bg=(kg=function(t,e,n){return t+(n?" ":"")+e.toLowerCase()},function(t){return gd(jd(function(t){return(t=Ph(t))&&t.replace(Cd,md).replace(wd,"")}(t).replace(Yd,"")),kg,"")});function Dg(t,e){return t<e}function Fg(t,e,n){for(var r=-1,i=t.length;++r<i;){var o=t[r],a=e(o);if(null!=a&&(void 0===s?a==a&&!mu(a):n(a,s)))var s=a,l=o}return l}function Hg(t){return t&&t.length?Fg(t,Hu,ag):void 0}function zg(t,e){return t&&t.length?Fg(t,uv(e),ag):void 0}var Gg=Bc((function(t,e,n){Lv(t,e,n)}));function Wg(t){return t&&t.length?Fg(t,Hu,Dg):void 0}function Vg(t,e){return null==(t=function(t,e){return e.length<2?t:Fh(t,td(e,0,-1))}(t,e=kh(e,t)))||delete t[Dh(Iv(e))]}function Ug(t){return Jh(t)?void 0:t}var jg=jh((function(t,e){var n={};if(null==t)return n;var r=!1;e=Cu(e,(function(e){return e=kh(e,t),r||(r=e.length>1),e})),Mc(t,df(t),n),r&&(n=pp(n,7,Ug));for(var i=e.length;i--;)Vg(n,e[i]);return n}));function Yg(t,e,n,r){if(!Mu(t))return t;for(var i=-1,o=(e=kh(e,t)).length,a=o-1,s=t;null!=s&&++i<o;){var l=Dh(e[i]),u=n;if("__proto__"===l||"constructor"===l||"prototype"===l)return t;if(i!=a){var c=s[l];void 0===(u=r?r(c,l,s):void 0)&&(u=Mu(c)?c:Ec(e[i+1])?[]:{})}_c(s,l,u),s=s[l]}return t}function Xg(t,e,n){for(var r=-1,i=e.length,o={};++r<i;){var a=e[r],s=Fh(t,a);n(s,a)&&Yg(o,kh(a,t),s)}return o}function qg(t,e){if(t!==e){var n=void 0!==t,r=null===t,i=t==t,o=mu(t),a=void 0!==e,s=null===e,l=e==e,u=mu(e);if(!s&&!u&&!o&&t>e||o&&a&&l&&!s&&!u||r&&a&&l||!n&&l||!i)return 1;if(!r&&!o&&!u&&t<e||u&&n&&i&&!r&&!o||s&&n&&i||!a&&i||!l)return-1}return 0}function Kg(t,e,n){e=e.length?Cu(e,(function(t){return wu(t)?function(e){return Fh(e,1===t.length?t[0]:t)}:t})):[Hu];var r=-1;e=Cu(e,Zc(uv));var i=Qv(t,(function(t,n,i){return{criteria:Cu(e,(function(e){return e(t)})),index:++r,value:t}}));return function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}(i,(function(t,e){return function(t,e,n){for(var r=-1,i=t.criteria,o=e.criteria,a=i.length,s=n.length;++r<a;){var l=qg(i[r],o[r]);if(l)return r>=s?l:l*("desc"==n[r]?-1:1)}return t.index-e.index}(t,e,n)}))}var Zg=9007199254740991,$g=Math.floor;var Qg=sv("length"),Jg="\\ud800-\\udfff",ty="["+Jg+"]",ey="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",ny="\\ud83c[\\udffb-\\udfff]",ry="[^"+Jg+"]",iy="(?:\\ud83c[\\udde6-\\uddff]){2}",oy="[\\ud800-\\udbff][\\udc00-\\udfff]",ay="(?:"+ey+"|"+ny+")"+"?",sy="[\\ufe0e\\ufe0f]?",ly=sy+ay+("(?:\\u200d(?:"+[ry,iy,oy].join("|")+")"+sy+ay+")*"),uy="(?:"+[ry+ey+"?",ey,iy,oy,ty].join("|")+")",cy=RegExp(ny+"(?="+ny+")|"+uy+ly,"g");function hy(t){return nd(t)?function(t){for(var e=cy.lastIndex=0;cy.test(t);)++e;return e}(t):Qg(t)}var dy=jh((function(t,e){return null==t?{}:function(t,e){return Xg(t,e,(function(e,n){return iv(t,n)}))}(t,e)})),fy=Math.ceil,py=Math.max;var vy=function(t){return function(e,n,r){return r&&"number"!=typeof r&&kc(e,n,r)&&(n=r=void 0),e=Du(e),void 0===n?(n=e,e=0):n=Du(n),function(t,e,n,r){for(var i=-1,o=py(fy((e-t)/(n||1)),0),a=Array(o);o--;)a[r?o:++i]=t,t+=n;return a}(e,n,r=void 0===r?e<n?1:-1:Du(r),t)}}();function gy(t,e,n,r,i){return i(t,(function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)})),n}function yy(t,e,n){var r=wu(t)?gd:gy,i=arguments.length<3;return r(t,uv(e),n,i,vv)}function my(t,e,n){return e=(n?kc(t,e,n):void 0===e)?1:Fu(e),function(t,e){var n="";if(!t||e<1||e>Zg)return n;do{e%2&&(n+=t),(e=$g(e/2))&&(t+=t)}while(e);return n}(Ph(t),e)}function Cy(t,e,n){return null==t?t:Yg(t,e,n)}function wy(t){if(null==t)return 0;if(Pc(t))return pg(t)?hy(t):t.length;var e=_f(t);return"[object Map]"==e||"[object Set]"==e?t.size:uh(t).length}function xy(t,e){var n;return vv(t,(function(t,r,i){return!(n=e(t,r,i))})),!!n}function by(t,e,n){var r=wu(t)?wp:xy;return n&&kc(t,e,n)&&(e=void 0),r(t,uv(e))}var Ey=Nc((function(t,e){if(null==t)return[];var n=e.length;return n>1&&kc(t,e[0],e[1])?e=[]:n>2&&kc(e[0],e[1],e[2])&&(e=[e[0]]),Kg(t,Vh(e,1),[])}));function Sy(t,e,n){return n&&"number"!=typeof n&&kc(t,e,n)&&(e=n=void 0),(n=void 0===n?4294967295:n>>>0)?(t=Ph(t))&&("string"==typeof e||null!=e&&!Ag(e))&&!(e=Su(e))&&nd(t)?function(t,e,n){var r=t.length;return n=void 0===n?r:n,!e&&n>=r?t:td(t,e,n)}(vd(t),0,n):t.split(e,n):[]}function Ty(t,e){return t&&t.length?function(t,e){for(var n,r=-1,i=t.length;++r<i;){var o=e(t[r]);void 0!==o&&(n=void 0===n?o:n+o)}return n}(t,uv(e)):0}function Ly(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new TypeError("Expected a function");return Mu(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),xv(t,e,{leading:r,maxWait:e,trailing:i})}function _y(t){return Ph(t).toUpperCase()}var My=vf&&1/Lp(new vf([,-0]))[1]==1/0?function(t){return new vf(t)}:function(){},Ry=200;function Oy(t,e,n){var r=-1,i=wc,o=t.length,a=!0,s=[],l=s;if(n)a=!1,i=Rv;else if(o>=Ry){var u=e?null:My(t);if(u)return Lp(u);a=!1,i=xp,l=new Cp}else l=e?[]:s;t:for(;++r<o;){var c=t[r],h=e?e(c):c;if(c=n||0!==c?c:0,a&&h==h){for(var d=l.length;d--;)if(l[d]===h)continue t;e&&l.push(h),s.push(c)}else i(l,h,n)||(l!==s&&l.push(h),s.push(c))}return s}var Ny=Nc((function(t){var e=Iv(t);return Ev(e)&&(e=void 0),Oy(Vh(t,1,Ev,!0),uv(e))}));function Iy(t){return t&&t.length?Oy(t):[]}function Ay(t,e){return null==t||Vg(t,e)}var Py=Math.max;var ky,By=Nc((function(t){if(!t||!t.length)return[];var e=0;return t=rf(t,(function(t){if(Ev(t))return e=Py(t.length,e),!0})),Hc(e,(function(e){return Cu(t,sv(e))}))})),Dy={zh_CN:{"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},en_US:{"":"Total","":"Total","":"(SUM)","":"items","":"selected","":"Index","":"Measure","":"Measure","":"Total","":"","":"Hide","":"Group ASC","":"Group DESC","":"ASC","":"DESC","":"No order","":", "}},Fy=function(t,e){return void 0===e&&(e=t),Hh(Dy,["zh_CN",t],e)},Hy="mergedCellsGroup",zy="frozenRowGroup",Gy="frozenColGroup",Wy="frozenTrailingRowGroup",Vy="frozenTrailingColGroup",Uy="frozenTopGroup",jy="frozenBottomGroup",Yy="rowResizeAreaGroup",Xy="rowFrozenResizeAreaGroup",qy="frozenSplitLine",Ky="rowIndexResizeAreaGroup",Zy="cornerResizeAreaGroup",$y="colResizeAreaGroup",Qy="colFrozenResizeAreaGroup",Jy="horizontal-resize-area-";!function(t){t.Line="line",t.Bar="bar",t.Bullet="bullet"}(ky||(ky={}));var tm,em,nm,rm=function(t){return null!=t?t:Fy("")},im="valueRanges",om={},am="#000000",sm="#FFFFFF",lm={data:[],fields:{rows:[],columns:[],values:[],valueInCols:!0},meta:[],sortParams:[],filterParams:[]};!function(t){t.ROW="row",t.COL="col",t.TRAILING_ROW="trailingRow",t.TRAILING_COL="trailingCol",t.SCROLL="scroll",t.TOP="top",t.BOTTOM="bottom"}(em||(em={})),function(t){t.FROZEN_COL="frozenCol",t.FROZEN_ROW="frozenRow",t.FROZEN_TRAILING_COL="frozenTrailingCol",t.FROZEN_TRAILING_ROW="frozenTrailingRow"}(nm||(nm={}));var um,cm,hm,dm=((tm={})[em.ROW]="frozenRowGroup",tm[em.COL]="frozenColGroup",tm[em.TRAILING_COL]="frozenTrailingColGroup",tm[em.TRAILING_ROW]="frozenTrailingRowGroup",tm[em.SCROLL]="panelScrollGroup",tm[em.TOP]="frozenTopGroup",tm[em.BOTTOM]="frozenBottomGroup",tm);!function(t){t.CORNER_CELL_CLICK="cornerCellClick",t.DATA_CELL_CLICK="dataCellClick",t.MERGED_CELLS_CLICK="mergedCellsClick",t.ROW_COLUMN_CLICK="rowColumnClick",t.ROW_TEXT_CLICK="rowTextClick",t.HOVER="hover",t.DATA_CELL_BRUSH_SELECTION="dataCellBrushSelection",t.ROW_CELL_BRUSH_SELECTION="rowCellBrushSelection",t.COL_CELL_BRUSH_SELECTION="colCellBrushSelection",t.COL_ROW_RESIZE="rowColResize",t.DATA_CELL_MULTI_SELECTION="dataCellMultiSelection",t.RANGE_SELECTION="rangeSelection",t.SELECTED_CELL_MOVE="selectedCellMove"}(um||(um={})),function(t){t.ALL_SELECTED="allSelected",t.SELECTED="selected",t.ROW_CELL_BRUSH_SELECTED="rowCellBrushSelected",t.COL_CELL_BRUSH_SELECTED="colCellBrushSelected",t.DATA_CELL_BRUSH_SELECTED="dataCellBrushSelected",t.UNSELECTED="unselected",t.HOVER="hover",t.HOVER_FOCUS="hoverFocus",t.HIGHLIGHT="highlight",t.SEARCH_RESULT="searchResult",t.PREPARE_SELECT="prepareSelect"}(cm||(cm={})),function(t){t.DATA_CELL="dataCell",t.ROW_CELL="rowCell",t.COL_CELL="colCell",t.SERIES_NUMBER_CELL="seriesNumberCell",t.CORNER_CELL="cornerCell",t.MERGED_CELL="mergedCell"}(hm||(hm={}));var fm,pm,vm,gm,ym={textOpacity:"fillOpacity",backgroundOpacity:"fillOpacity",backgroundColor:"fill",borderOpacity:"strokeOpacity",borderColor:"stroke",borderWidth:"lineWidth",opacity:"opacity"},mm={textShape:["textOpacity"],textShapes:["textOpacity"],linkFieldShape:["opacity"],interactiveBgShape:["backgroundColor","backgroundOpacity"],interactiveBorderShape:["borderColor","borderOpacity","borderWidth"]},Cm="interactionStateInfo";!function(t){t.CLICK="click",t.UN_DRAGGED="unDragged",t.DRAGGED="dragged"}(fm||(fm={})),function(t){t.SHIFT="Shift",t.COPY="c",t.ESC="Escape",t.META="Meta",t.CONTROL="Control",t.ARROW_UP="ArrowUp",t.ARROW_DOWN="ArrowDown",t.ARROW_LEFT="ArrowLeft",t.ARROW_RIGHT="ArrowRight"}(pm||(pm={})),function(t){t.ASC="ASC",t.DESC="DESC"}(vm||(vm={})),function(t){t.HOVER="hover",t.CLICK="click",t.DATA_CELL_BRUSH_SELECTION="dataCellBrushSelection",t.ROW_CELL_BRUSH_SELECTION="rowCellBrushSelection",t.COL_CELL_BRUSH_SELECTION="colCellBrushSelection",t.MULTI_SELECTION="multiSelection",t.RESIZE="resize"}(gm||(gm={}));var wm,xm,bm,Em={x:{value:0,scroll:!1},y:{value:0,scroll:!1}};!function(t){t.CONTENT="content",t.CANVAS="canvas"}(wm||(wm={})),function(t){t.SCROLL_UP="scrollUp",t.SCROLL_DOWN="scrollDown"}(xm||(xm={})),function(t){t[t.SCROLL_UP=-1]="SCROLL_UP",t[t.SCROLL_DOWN=1]="SCROLL_DOWN"}(bm||(bm={}));var Sm,Tm,Lm,_m;!function(t){t.Horizontal="col",t.Vertical="row"}(Sm||(Sm={})),function(t){t.Field="field",t.Cell="cell",t.Tree="tree",t.Series="series"}(Tm||(Tm={})),function(t){t.ALL="all",t.CURRENT="current",t.SELECTED="selected"}(Lm||(Lm={})),function(t){t.PC="pc",t.MOBILE="mobile"}(_m||(_m={}));var Mm;!function(t){t.Adaptive="adaptive",t.ColAdaptive="colAdaptive",t.Compact="compact"}(Mm||(Mm={}));var Rm={wordWrap:!0,maxLines:1,textOverflow:"ellipsis"},Om={layoutWidthType:Mm.Adaptive,seriesNumberCell:Rm,cornerCell:Rm,rowCell:S(S({},Rm),{showTreeLeafNodeAlignDot:!1,widthByField:null,heightByField:null}),colCell:S(S({},Rm),{height:30,widthByField:null,heightByField:null}),dataCell:S(S({},Rm),{width:96,height:30})},Nm={width:600,height:480,debug:!1,hierarchyType:"grid",device:_m.PC,conditions:{},totals:{},tooltip:{enable:!1,autoAdjustBoundary:"body",operation:{hiddenColumns:!1,sort:!1,menu:{items:[]}}},interaction:{copy:{enable:!0,withFormat:!0,withHeader:!1},linkFields:[],hiddenColumnFields:[],selectedCellsSpotlight:!1,hoverHighlight:!0,hoverFocus:{duration:800},scrollSpeedRatio:{horizontal:1,vertical:1},autoResetSheetStyle:!0,brushSelection:{dataCell:!0,rowCell:!0,colCell:!0},multiSelection:!0,rangeSelection:!0,scrollbarPosition:wm.CONTENT,resize:{rowCellVertical:!0,cornerCellHorizontal:!0,colCellHorizontal:!0,colCellVertical:!0,rowResizeType:Lm.CURRENT,colResizeType:Lm.CURRENT,minCellWidth:20,minCellHeight:20},eventListenerOptions:!1,selectedCellHighlight:!1,overscrollBehavior:"auto"},seriesNumber:{enable:!1},customSVGIcons:[],showDefaultHeaderActionIcon:!1,headerActionIcons:[],style:Om,frozen:{rowHeader:!0,rowCount:0,colCount:0,trailingRowCount:0,trailingColCount:0},hd:!0,cornerText:"",cornerExtraFieldText:"",placeholder:"-"};function Im(t){return Im="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Im(t)}var Am=/^\s+/,Pm=/\s+$/;function km(t,e){if(e=e||{},(t=t||"")instanceof km)return t;if(!(this instanceof km))return new km(t,e);var n=function(t){var e={r:0,g:0,b:0},n=1,r=null,i=null,o=null,a=!1,s=!1;"string"==typeof t&&(t=function(t){t=t.replace(Am,"").replace(Pm,"").toLowerCase();var e,n=!1;if(Qm[t])t=Qm[t],n=!0;else if("transparent"==t)return{r:0,g:0,b:0,a:0,format:"name"};if(e=hC.rgb.exec(t))return{r:e[1],g:e[2],b:e[3]};if(e=hC.rgba.exec(t))return{r:e[1],g:e[2],b:e[3],a:e[4]};if(e=hC.hsl.exec(t))return{h:e[1],s:e[2],l:e[3]};if(e=hC.hsla.exec(t))return{h:e[1],s:e[2],l:e[3],a:e[4]};if(e=hC.hsv.exec(t))return{h:e[1],s:e[2],v:e[3]};if(e=hC.hsva.exec(t))return{h:e[1],s:e[2],v:e[3],a:e[4]};if(e=hC.hex8.exec(t))return{r:rC(e[1]),g:rC(e[2]),b:rC(e[3]),a:sC(e[4]),format:n?"name":"hex8"};if(e=hC.hex6.exec(t))return{r:rC(e[1]),g:rC(e[2]),b:rC(e[3]),format:n?"name":"hex"};if(e=hC.hex4.exec(t))return{r:rC(e[1]+""+e[1]),g:rC(e[2]+""+e[2]),b:rC(e[3]+""+e[3]),a:sC(e[4]+""+e[4]),format:n?"name":"hex8"};if(e=hC.hex3.exec(t))return{r:rC(e[1]+""+e[1]),g:rC(e[2]+""+e[2]),b:rC(e[3]+""+e[3]),format:n?"name":"hex"};return!1}(t));"object"==Im(t)&&(dC(t.r)&&dC(t.g)&&dC(t.b)?(l=t.r,u=t.g,c=t.b,e={r:255*eC(l,255),g:255*eC(u,255),b:255*eC(c,255)},a=!0,s="%"===String(t.r).substr(-1)?"prgb":"rgb"):dC(t.h)&&dC(t.s)&&dC(t.v)?(r=oC(t.s),i=oC(t.v),e=function(t,e,n){t=6*eC(t,360),e=eC(e,100),n=eC(n,100);var r=Math.floor(t),i=t-r,o=n*(1-e),a=n*(1-i*e),s=n*(1-(1-i)*e),l=r%6,u=[n,a,o,o,s,n][l],c=[s,n,n,a,o,o][l],h=[o,o,s,n,n,a][l];return{r:255*u,g:255*c,b:255*h}}(t.h,r,i),a=!0,s="hsv"):dC(t.h)&&dC(t.s)&&dC(t.l)&&(r=oC(t.s),o=oC(t.l),e=function(t,e,n){var r,i,o;function a(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}if(t=eC(t,360),e=eC(e,100),n=eC(n,100),0===e)r=i=o=n;else{var s=n<.5?n*(1+e):n+e-n*e,l=2*n-s;r=a(l,s,t+1/3),i=a(l,s,t),o=a(l,s,t-1/3)}return{r:255*r,g:255*i,b:255*o}}(t.h,r,o),a=!0,s="hsl"),t.hasOwnProperty("a")&&(n=t.a));var l,u,c;return n=tC(n),{ok:a,format:t.format||s,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:n}}(t);this._originalInput=t,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=Math.round(100*this._a)/100,this._format=e.format||n.format,this._gradientType=e.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=n.ok}function Bm(t,e,n){t=eC(t,255),e=eC(e,255),n=eC(n,255);var r,i,o=Math.max(t,e,n),a=Math.min(t,e,n),s=(o+a)/2;if(o==a)r=i=0;else{var l=o-a;switch(i=s>.5?l/(2-o-a):l/(o+a),o){case t:r=(e-n)/l+(e<n?6:0);break;case e:r=(n-t)/l+2;break;case n:r=(t-e)/l+4}r/=6}return{h:r,s:i,l:s}}function Dm(t,e,n){t=eC(t,255),e=eC(e,255),n=eC(n,255);var r,i,o=Math.max(t,e,n),a=Math.min(t,e,n),s=o,l=o-a;if(i=0===o?0:l/o,o==a)r=0;else{switch(o){case t:r=(e-n)/l+(e<n?6:0);break;case e:r=(n-t)/l+2;break;case n:r=(t-e)/l+4}r/=6}return{h:r,s:i,v:s}}function Fm(t,e,n,r){var i=[iC(Math.round(t).toString(16)),iC(Math.round(e).toString(16)),iC(Math.round(n).toString(16))];return r&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function Hm(t,e,n,r){return[iC(aC(r)),iC(Math.round(t).toString(16)),iC(Math.round(e).toString(16)),iC(Math.round(n).toString(16))].join("")}function zm(t,e){e=0===e?0:e||10;var n=km(t).toHsl();return n.s-=e/100,n.s=nC(n.s),km(n)}function Gm(t,e){e=0===e?0:e||10;var n=km(t).toHsl();return n.s+=e/100,n.s=nC(n.s),km(n)}function Wm(t){return km(t).desaturate(100)}function Vm(t,e){e=0===e?0:e||10;var n=km(t).toHsl();return n.l+=e/100,n.l=nC(n.l),km(n)}function Um(t,e){e=0===e?0:e||10;var n=km(t).toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(-e/100*255))),n.g=Math.max(0,Math.min(255,n.g-Math.round(-e/100*255))),n.b=Math.max(0,Math.min(255,n.b-Math.round(-e/100*255))),km(n)}function jm(t,e){e=0===e?0:e||10;var n=km(t).toHsl();return n.l-=e/100,n.l=nC(n.l),km(n)}function Ym(t,e){var n=km(t).toHsl(),r=(n.h+e)%360;return n.h=r<0?360+r:r,km(n)}function Xm(t){var e=km(t).toHsl();return e.h=(e.h+180)%360,km(e)}function qm(t,e){if(isNaN(e)||e<=0)throw new Error("Argument to polyad must be a positive number");for(var n=km(t).toHsl(),r=[km(t)],i=360/e,o=1;o<e;o++)r.push(km({h:(n.h+o*i)%360,s:n.s,l:n.l}));return r}function Km(t){var e=km(t).toHsl(),n=e.h;return[km(t),km({h:(n+72)%360,s:e.s,l:e.l}),km({h:(n+216)%360,s:e.s,l:e.l})]}function Zm(t,e,n){e=e||6,n=n||30;var r=km(t).toHsl(),i=360/n,o=[km(t)];for(r.h=(r.h-(i*e>>1)+720)%360;--e;)r.h=(r.h+i)%360,o.push(km(r));return o}function $m(t,e){e=e||6;for(var n=km(t).toHsv(),r=n.h,i=n.s,o=n.v,a=[],s=1/e;e--;)a.push(km({h:r,s:i,v:o})),o=(o+s)%1;return a}km.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(299*t.r+587*t.g+114*t.b)/1e3},getLuminance:function(){var t,e,n,r=this.toRgb();return t=r.r/255,e=r.g/255,n=r.b/255,.2126*(t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4))+.7152*(e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4))+.0722*(n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4))},setAlpha:function(t){return this._a=tC(t),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var t=Dm(this._r,this._g,this._b);return{h:360*t.h,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=Dm(this._r,this._g,this._b),e=Math.round(360*t.h),n=Math.round(100*t.s),r=Math.round(100*t.v);return 1==this._a?"hsv("+e+", "+n+"%, "+r+"%)":"hsva("+e+", "+n+"%, "+r+"%, "+this._roundA+")"},toHsl:function(){var t=Bm(this._r,this._g,this._b);return{h:360*t.h,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=Bm(this._r,this._g,this._b),e=Math.round(360*t.h),n=Math.round(100*t.s),r=Math.round(100*t.l);return 1==this._a?"hsl("+e+", "+n+"%, "+r+"%)":"hsla("+e+", "+n+"%, "+r+"%, "+this._roundA+")"},toHex:function(t){return Fm(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(t){return function(t,e,n,r,i){var o=[iC(Math.round(t).toString(16)),iC(Math.round(e).toString(16)),iC(Math.round(n).toString(16)),iC(aC(r))];if(i&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1))return o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0);return o.join("")}(this._r,this._g,this._b,this._a,t)},toHex8String:function(t){return"#"+this.toHex8(t)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(100*eC(this._r,255))+"%",g:Math.round(100*eC(this._g,255))+"%",b:Math.round(100*eC(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+Math.round(100*eC(this._r,255))+"%, "+Math.round(100*eC(this._g,255))+"%, "+Math.round(100*eC(this._b,255))+"%)":"rgba("+Math.round(100*eC(this._r,255))+"%, "+Math.round(100*eC(this._g,255))+"%, "+Math.round(100*eC(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(Jm[Fm(this._r,this._g,this._b,!0)]||!1)},toFilter:function(t){var e="#"+Hm(this._r,this._g,this._b,this._a),n=e,r=this._gradientType?"GradientType = 1, ":"";if(t){var i=km(t);n="#"+Hm(i._r,i._g,i._b,i._a)}return"progid:DXImageTransform.Microsoft.gradient("+r+"startColorstr="+e+",endColorstr="+n+")"},toString:function(t){var e=!!t;t=t||this._format;var n=!1,r=this._a<1&&this._a>=0;return e||!r||"hex"!==t&&"hex6"!==t&&"hex3"!==t&&"hex4"!==t&&"hex8"!==t&&"name"!==t?("rgb"===t&&(n=this.toRgbString()),"prgb"===t&&(n=this.toPercentageRgbString()),"hex"!==t&&"hex6"!==t||(n=this.toHexString()),"hex3"===t&&(n=this.toHexString(!0)),"hex4"===t&&(n=this.toHex8String(!0)),"hex8"===t&&(n=this.toHex8String()),"name"===t&&(n=this.toName()),"hsl"===t&&(n=this.toHslString()),"hsv"===t&&(n=this.toHsvString()),n||this.toHexString()):"name"===t&&0===this._a?this.toName():this.toRgbString()},clone:function(){return km(this.toString())},_applyModification:function(t,e){var n=t.apply(null,[this].concat([].slice.call(e)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(Vm,arguments)},brighten:function(){return this._applyModification(Um,arguments)},darken:function(){return this._applyModification(jm,arguments)},desaturate:function(){return this._applyModification(zm,arguments)},saturate:function(){return this._applyModification(Gm,arguments)},greyscale:function(){return this._applyModification(Wm,arguments)},spin:function(){return this._applyModification(Ym,arguments)},_applyCombination:function(t,e){return t.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination(Zm,arguments)},complement:function(){return this._applyCombination(Xm,arguments)},monochromatic:function(){return this._applyCombination($m,arguments)},splitcomplement:function(){return this._applyCombination(Km,arguments)},triad:function(){return this._applyCombination(qm,[3])},tetrad:function(){return this._applyCombination(qm,[4])}},km.fromRatio=function(t,e){if("object"==Im(t)){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]="a"===r?t[r]:oC(t[r]));t=n}return km(t,e)},km.equals=function(t,e){return!(!t||!e)&&km(t).toRgbString()==km(e).toRgbString()},km.random=function(){return km.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})},km.mix=function(t,e,n){n=0===n?0:n||50;var r=km(t).toRgb(),i=km(e).toRgb(),o=n/100;return km({r:(i.r-r.r)*o+r.r,g:(i.g-r.g)*o+r.g,b:(i.b-r.b)*o+r.b,a:(i.a-r.a)*o+r.a})},km.readability=function(t,e){var n=km(t),r=km(e);return(Math.max(n.getLuminance(),r.getLuminance())+.05)/(Math.min(n.getLuminance(),r.getLuminance())+.05)},km.isReadable=function(t,e,n){var r,i,o=km.readability(t,e);switch(i=!1,r=function(t){var e,n;e=((t=t||{level:"AA",size:"small"}).level||"AA").toUpperCase(),n=(t.size||"small").toLowerCase(),"AA"!==e&&"AAA"!==e&&(e="AA");"small"!==n&&"large"!==n&&(n="small");return{level:e,size:n}}(n),r.level+r.size){case"AAsmall":case"AAAlarge":i=o>=4.5;break;case"AAlarge":i=o>=3;break;case"AAAsmall":i=o>=7}return i},km.mostReadable=function(t,e,n){var r,i,o,a,s=null,l=0;i=(n=n||{}).includeFallbackColors,o=n.level,a=n.size;for(var u=0;u<e.length;u++)(r=km.readability(t,e[u]))>l&&(l=r,s=km(e[u]));return km.isReadable(t,s,{level:o,size:a})||!i?s:(n.includeFallbackColors=!1,km.mostReadable(t,["#fff","#000"],n))};var Qm=km.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},Jm=km.hexNames=function(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}(Qm);function tC(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function eC(t,e){(function(t){return"string"==typeof t&&-1!=t.indexOf(".")&&1===parseFloat(t)})(t)&&(t="100%");var n=function(t){return"string"==typeof t&&-1!=t.indexOf("%")}(t);return t=Math.min(e,Math.max(0,parseFloat(t))),n&&(t=parseInt(t*e,10)/100),Math.abs(t-e)<1e-6?1:t%e/parseFloat(e)}function nC(t){return Math.min(1,Math.max(0,t))}function rC(t){return parseInt(t,16)}function iC(t){return 1==t.length?"0"+t:""+t}function oC(t){return t<=1&&(t=100*t+"%"),t}function aC(t){return Math.round(255*parseFloat(t)).toString(16)}function sC(t){return rC(t)/255}var lC,uC,cC,hC=(uC="[\\s|\\(]+("+(lC="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+lC+")[,|\\s]+("+lC+")\\s*\\)?",cC="[\\s|\\(]+("+lC+")[,|\\s]+("+lC+")[,|\\s]+("+lC+")[,|\\s]+("+lC+")\\s*\\)?",{CSS_UNIT:new RegExp(lC),rgb:new RegExp("rgb"+uC),rgba:new RegExp("rgba"+cC),hsl:new RegExp("hsl"+uC),hsla:new RegExp("hsla"+cC),hsv:new RegExp("hsv"+uC),hsva:new RegExp("hsva"+cC),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function dC(t){return!!hC.CSS_UNIT.exec(t)}var fC,pC=[95,85,75,30,15,0,15,30,45,60,80],vC=function(t){return km(t).getLuminance()<=.5},gC=[{fontColorIndex:0,bgColorIndex:3},{fontColorIndex:13,bgColorIndex:8},{fontColorIndex:14,bgColorIndex:1}],yC=function(t){void 0===t&&(t={});var e=Array.from(Array(15)).fill(sm),n=t.basicColorRelations,r=void 0===n?[]:n,i=function(t){for(var e=[],n=0;n<11;n++){var r=pC[n];e.push(_y(0===r?t:km.mix(t,n<5?"#FFFFFF":"#000000",r).toHexString()))}return e}(t.brandColor);return r.forEach((function(t){e[t.basicColorIndex]=i[t.standardColorIndex]})),gC.forEach((function(t){var n=t.fontColorIndex,r=t.bgColorIndex;e[n]=vC(e[r])?sm:am})),S(S({},t),{basicColors:e})},mC=yC({brandColor:"#3471F9",semanticColors:{red:"#FF4D4F",green:"#29A294",yellow:"#FAAD14"},others:{highlight:"#87B5FF",results:"#F0F7FF"},basicColorRelations:[{basicColorIndex:1,standardColorIndex:0},{basicColorIndex:2,standardColorIndex:1},{basicColorIndex:3,standardColorIndex:5},{basicColorIndex:4,standardColorIndex:6},{basicColorIndex:5,standardColorIndex:6},{basicColorIndex:6,standardColorIndex:6},{basicColorIndex:7,standardColorIndex:5},{basicColorIndex:9,standardColorIndex:1},{basicColorIndex:10,standardColorIndex:4},{basicColorIndex:11,standardColorIndex:4},{basicColorIndex:12,standardColorIndex:5}]}),CC={default:yC({brandColor:"#326EF4",semanticColors:{red:"#FF4D4F",green:"#29A294",yellow:"#FAAD14"},others:{highlight:"#87B5FF",results:"#F0F7FF"},basicColorRelations:[{basicColorIndex:1,standardColorIndex:0},{basicColorIndex:2,standardColorIndex:1},{basicColorIndex:3,standardColorIndex:1},{basicColorIndex:4,standardColorIndex:2},{basicColorIndex:5,standardColorIndex:7},{basicColorIndex:6,standardColorIndex:5},{basicColorIndex:7,standardColorIndex:5},{basicColorIndex:9,standardColorIndex:1},{basicColorIndex:10,standardColorIndex:2},{basicColorIndex:11,standardColorIndex:5},{basicColorIndex:12,standardColorIndex:5}]}),colorful:mC,gray:yC({brandColor:"#9DA7B6",semanticColors:{red:"#FF4D4F",green:"#29A294",yellow:"#FAAD14"},others:{highlight:"#87B5FF",results:"#F0F7FF"},basicColorRelations:[{basicColorIndex:1,standardColorIndex:0},{basicColorIndex:2,standardColorIndex:1},{basicColorIndex:3,standardColorIndex:1},{basicColorIndex:4,standardColorIndex:2},{basicColorIndex:5,standardColorIndex:7},{basicColorIndex:6,standardColorIndex:8},{basicColorIndex:7,standardColorIndex:5},{basicColorIndex:9,standardColorIndex:1},{basicColorIndex:10,standardColorIndex:2},{basicColorIndex:11,standardColorIndex:3},{basicColorIndex:12,standardColorIndex:3}]}),dark:{brandColor:"#255dff",semanticColors:{red:"#FF4D4F",green:"#29A294",yellow:"#FAAD14"},basicColors:["#ffffff","#151a27","#213f94","#133aad","#213f94","#255dff","#4b91ff","#4b91ff","#191919","#1e2436","#0647b1","#7899ff","#7899ff","#f0f0f0","#dcdcdc"],basicColorRelations:[]}},wC="Roboto, PingFangSC, Microsoft YaHei, Arial, sans-serif",xC={default:"light",colorful:"light",gray:"light",dark:"dark"},bC="".concat("antv-s2","-tooltip"),EC="".concat(bC,"-container"),SC="".concat(EC,"-show"),TC="".concat(EC,"-hide"),LC=15,_C=10;!function(t){t[t.ALL=0]="ALL",t[t.COL=1]="COL",t[t.ROW=2]="ROW"}(fC||(fC={}));var MC,RC=5e3,OC="root",NC="[&]";!function(t){t.All="all",t.DetailOnly="detailOnly"}(MC||(MC={}));var IC=function(){function t(){var t=this;this.debug=!1,this.debugCallback=function(e,n){if(t.debug){var r=performance.now();n();var i=performance.now();console.log(e,"".concat(i-r," ms"))}else n()},this.logger=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];t.debug&&console.log.apply(console,O([e],R(n),!1))}}return t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.prototype.setDebug=function(t){this.debug=t},t}(),AC=Object.freeze({__proto__:null,ArrowDown:'\n<svg width="10px" height="10px" viewBox="0 0 10 10" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n<g id="-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" font-family="Roboto, PingFangSC, BlinkMacSystemFont, Microsoft YaHei, Arial, sans-serif" font-size="12" font-weight="bold">\n    <text id="" fill="#29A294">\n        <tspan x="-0.225097656" y="8.5"></tspan>\n    </text>\n</g>\n</svg>',ArrowUp:'<svg width="10px" height="10px" viewBox="0 0 10 10" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n<g id="-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" font-family="Roboto, PingFangSC, BlinkMacSystemFont, Microsoft YaHei, Arial, sans-serif" font-size="12" font-weight="bold">\n    <text id="" fill="#FF4D4F">\n        <tspan x="-0.225097656" y="8.5"></tspan>\n    </text>\n</g>\n</svg>\n',CellDown:'<?xml version="1.0" encoding="UTF-8"?>\n<svg width="7px" height="9px" viewBox="0 0 7 9" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \x3c!-- Generator: Sketch 58 (84663) - https://sketch.com --\x3e\n    <title>down</title>\n    <desc>Created with Sketch.</desc>\n    <g id="" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <polygon id="down" fill="#58AE57" transform="translate(3.500000, 4.500000) scale(1, -1) translate(-3.500000, -4.500000) " points="3.5 0 7 9 0 9"></polygon>\n    </g>\n</svg>',CellUp:'<?xml version="1.0" encoding="UTF-8"?>\n<svg width="7px" height="9px" viewBox="0 0 7 9" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \x3c!-- Generator: Sketch 58 (84663) - https://sketch.com --\x3e\n    <title>up</title>\n    <desc>Created with Sketch.</desc>\n    <g id="" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <polygon id="up" fill="#F46649" points="3.5 0 7 9 0 9"></polygon>\n    </g>\n</svg> ',DrillDownIcon:'<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1608030723688" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="21482" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16"><defs><style type="text/css"></style></defs><path d="M547.648 696a32 32 0 0 1 31.488 26.24l0.512 5.76v151.68l145.216-144.512a32 32 0 0 1 40.832-3.648l4.416 3.712a32 32 0 0 1 3.584 40.832l-3.712 4.48-203.072 202.24a32 32 0 0 1-40.768 3.648l-4.416-3.712-202.24-202.24a32 32 0 0 1 40.832-48.96l4.416 3.712 150.912 150.912v-158.144a32 32 0 0 1 32-32z m194.56-529.28l4.928 3.072 233.792 180.224a32 32 0 0 1 1.728 49.28l-4.864 3.52-409.792 245.568a32 32 0 0 1-27.328 2.624l-5.184-2.432-422.4-245.568a32 32 0 0 1-7.552-49.28l4.544-4.032 242.816-180.288a32 32 0 0 1 42.432 47.552l-4.288 3.84-203.84 151.296 364.16 211.648 353.28-211.712-196.608-151.552a32 32 0 0 1-8.896-40l3.136-4.864a32 32 0 0 1 40-8.96zM547.712 28.672a32 32 0 0 1 31.488 26.24l0.512 5.76v396.992a32 32 0 0 1-63.488 5.76l-0.512-5.76V60.736a32 32 0 0 1 32-32z" p-id="21483" fill="currentColor"></path></svg>\n',ExpandColIcon:'<?xml version="1.0" encoding="UTF-8"?>\n<svg width="23px" height="12px" viewBox="0 0 23 12" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <title> 8 3</title>\n    <g id="----" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="" transform="translate(-275.000000, -824.000000)">\n            <rect fill="#FFFFFF" x="0" y="0" width="1333" height="1167"></rect>\n            <g id="-8-3" transform="translate(275.000000, 824.000000)">\n                <rect id="" stroke-opacity="0.25" stroke="#000000" fill="#F7F7F7" x="0.5" y="0.5" width="11" height="11"></rect>\n                <rect id="-9" stroke-opacity="0.25" stroke="#000000" fill="#F7F7F7" x="11.5" y="0.5" width="11" height="11"></rect>\n                <g id="7.Icon/arrow/15.down/fill" transform="translate(6.000000, 6.000000) rotate(90.000000) translate(-6.000000, -6.000000) " fill="#000000" fill-rule="nonzero" opacity="0.65">\n                    <path d="M7.25020811,6.37218077 L4.91348936,8.20968077 C4.82677061,8.27764952 4.69903624,8.21671202 4.69903624,8.10655577 L4.69903624,4.43272764 C4.69903624,4.32257139 4.82677061,4.26046202 4.91348936,4.32960264 L7.25020811,6.16593077 C7.31700499,6.21866514 7.31700499,6.31944639 7.25020811,6.37218077 Z" id="fill" transform="translate(5.999671, 6.269385) rotate(90.000000) translate(-5.999671, -6.269385) "></path>\n                </g>\n                <g id="7.Icon/arrow/15.down/fill" transform="translate(17.000000, 6.000000) rotate(270.000000) translate(-17.000000, -6.000000) translate(11.000000, 0.000000)" fill="#000000" fill-rule="nonzero" opacity="0.65">\n                    <path d="M7.25020811,6.37218077 L4.91348936,8.20968077 C4.82677061,8.27764952 4.69903624,8.21671202 4.69903624,8.10655577 L4.69903624,4.43272764 C4.69903624,4.32257139 4.82677061,4.26046202 4.91348936,4.32960264 L7.25020811,6.16593077 C7.31700499,6.21866514 7.31700499,6.31944639 7.25020811,6.37218077 Z" id="fill" transform="translate(5.999671, 6.269385) rotate(90.000000) translate(-5.999671, -6.269385) "></path>\n                </g>\n            </g>\n            <line x1="286.5" y1="813" x2="286.5" y2="864.5" id="-2-3" stroke="#000000" opacity="0.25"></line>\n        </g>\n    </g>\n</svg>',EyeOutlined:'<svg viewBox="64 64 896 896" focusable="false" data-icon="eye" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z"></path></svg>',GlobalAsc:'<svg t="1557124621626" class="icon" style="" viewBox="0 0 1024 1024" version="1.1"\nxmlns="http://www.w3.org/2000/svg" p-id="17452"\nxmlns:xlink="http://www.w3.org/1999/xlink" width="14" height="14">\n<defs>\n  <style type="text/css"></style>\n</defs>\n<path d="M182.272 167.04a8 8 0 0 0-12.544 0L57.728 309.056A8 8 0 0 0 64 321.984h76.032v530.048c0 4.352 3.584 7.936 7.936 7.936h56.064a8 8 0 0 0 7.936-7.936V321.92H288a8 8 0 0 0 6.272-12.992l-112-141.888z m209.728 626.944h176c4.416 0 8 3.584 8 8v56a8 8 0 0 1-8 8h-176A8 8 0 0 1 384 857.984v-56c0-4.416 3.584-8 8-8z m0-424h368c4.416 0 8 3.648 8 8v56a8 8 0 0 1-8 8h-368A8 8 0 0 1 384 433.984v-56c0-4.352 3.584-8 8-8z m528-139.968h-528A8 8 0 0 1 384 222.016v-56c0-4.416 3.584-8 8-8h528c4.416 0 8 3.584 8 8v56a8 8 0 0 1-8 8z m-256 424h-272A8 8 0 0 1 384 646.016v-56c0-4.416 3.584-8 8-8h272c4.416 0 8 3.584 8 8v56a8 8 0 0 1-8 8z" p-id="17453"></path>\n</svg>',GlobalDesc:'<svg t="1557124685600" class="icon" style="" viewBox="0 0 1024 1024" version="1.1"\n  xmlns="http://www.w3.org/2000/svg" p-id="17561"\n  xmlns:xlink="http://www.w3.org/1999/xlink" width="14" height="14">\n  <defs>\n    <style type="text/css"></style>\n  </defs>\n  <path d="M182.272 856.96a8 8 0 0 1-12.544 0l-112-141.952A8 8 0 0 1 64 702.08h76.032V172.032c0-4.416 3.584-8 7.936-8h56.064c4.352 0 7.936 3.584 7.936 8v529.984H288c6.72 0 10.496 7.808 6.272 12.992l-112 141.888z m209.728-626.944h176A8 8 0 0 0 576 222.016v-56a8 8 0 0 0-8-8h-176A8 8 0 0 0 384 166.016v56c0 4.416 3.584 8 8 8z m0 424h368a8 8 0 0 0 8-8v-56a8 8 0 0 0-8-8h-368A8 8 0 0 0 384 590.016v56c0 4.416 3.584 8 8 8z m528 139.968h-528a8 8 0 0 0-8 8v56c0 4.416 3.584 8 8 8h528a8 8 0 0 0 8-8v-56a8 8 0 0 0-8-8z m-256-424h-272A8 8 0 0 0 384 377.984v56c0 4.416 3.584 8 8 8h272a8 8 0 0 0 8-8v-56a8 8 0 0 0-8-8z" p-id="17562"></path>\n</svg>',GroupAsc:'<svg t="1557124695786" class="icon" style="" viewBox="0 0 1024 1024" version="1.1"\n  xmlns="http://www.w3.org/2000/svg" p-id="17670"\n  xmlns:xlink="http://www.w3.org/1999/xlink" width="14" height="14">\n  <defs>\n    <style type="text/css"></style>\n  </defs>\n  <path d="M182.272 167.04a8 8 0 0 0-12.544 0L57.728 309.056A8 8 0 0 0 64 321.984h76.032v530.048c0 4.352 3.584 7.936 7.936 7.936h56.064a8 8 0 0 0 7.936-7.936V321.92H288a8 8 0 0 0 6.272-12.992l-112-141.888z m209.728 62.976h304A8 8 0 0 0 704 222.016v-56a8 8 0 0 0-8-8h-304A8 8 0 0 0 384 166.016v56c0 4.416 3.584 8 8 8z m0 424h304a8 8 0 0 0 8-8v-56a8 8 0 0 0-8-8h-304A8 8 0 0 0 384 590.016v56c0 4.416 3.584 8 8 8z m528 139.968h-528a8 8 0 0 0-8 8v56c0 4.416 3.584 8 8 8h528a8 8 0 0 0 8-8v-56a8 8 0 0 0-8-8z m0-424h-528A8 8 0 0 0 384 377.984v56c0 4.416 3.584 8 8 8h528a8 8 0 0 0 8-8v-56a8 8 0 0 0-8-8z" p-id="17671"></path>\n</svg>',GroupDesc:'<svg t="1557124710652" class="icon" style="" viewBox="0 0 1024 1024" version="1.1"\n  xmlns="http://www.w3.org/2000/svg" p-id="17779"\n  xmlns:xlink="http://www.w3.org/1999/xlink" width="14" height="14">\n  <defs>\n    <style type="text/css"></style>\n  </defs>\n  <path d="M182.272 856.96a8 8 0 0 1-12.544 0l-112-141.952A8 8 0 0 1 64 702.08h76.032V172.032c0-4.416 3.584-8 7.936-8h56.064c4.352 0 7.936 3.584 7.936 8v529.984H288c6.72 0 10.496 7.808 6.272 12.992l-112 141.888z m209.728-626.944h304A8 8 0 0 0 704 222.016v-56a8 8 0 0 0-8-8h-304A8 8 0 0 0 384 166.016v56c0 4.416 3.584 8 8 8z m0 424h304a8 8 0 0 0 8-8v-56a8 8 0 0 0-8-8h-304A8 8 0 0 0 384 590.016v56c0 4.416 3.584 8 8 8z m528 139.968h-528a8 8 0 0 0-8 8v56c0 4.416 3.584 8 8 8h528a8 8 0 0 0 8-8v-56a8 8 0 0 0-8-8z m0-424h-528A8 8 0 0 0 384 377.984v56c0 4.416 3.584 8 8 8h528a8 8 0 0 0 8-8v-56a8 8 0 0 0-8-8z" p-id="17780"></path>\n</svg>',GroupNone:'<svg width="16px" height="16px" viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n<g id="" stroke="none" stroke-width="1" fill-opacity="0.25" fill-rule="evenodd">\n    <g id="--" transform="translate(-3275.000000, -724.000000)" fill-rule="nonzero">\n        <g id="-39" transform="translate(3064.500000, 667.000000)">\n            <g id="-36" transform="translate(80.500000, 44.000000)">\n                <g id="" transform="translate(130.000000, 13.000000)">\n                    <path d="M12.0009375,12.40625 C12.0696875,12.40625 12.1259375,12.4625 12.1259375,12.53125 L12.1259375,12.53125 L12.1259375,13.40625 C12.1259375,13.475 12.0696875,13.53125 12.0009375,13.53125 L12.0009375,13.53125 L6.25093747,13.53125 C6.18218747,13.53125 6.12593747,13.475 6.12593747,13.40625 L6.12593747,13.40625 L6.12593747,12.53125 C6.12593747,12.4625 6.18218747,12.40625 6.25093747,12.40625 L6.25093747,12.40625 Z M2.93949997,2.5801875 L2.97437497,2.6109375 L4.72437497,4.828125 C4.78062497,4.89776786 4.74503823,4.99725765 4.66779698,5.02426203 L4.62593747,5.03125 L3.438,5.03089062 L3.43843747,10.9691406 L4.62593747,10.9691406 C4.73062497,10.9691406 4.78999997,11.0910156 4.72437497,11.1722656 L2.97437497,13.3894531 C2.92437497,13.4535156 2.82749997,13.4535156 2.77749997,13.3894531 L1.02749997,11.1722656 C0.961874969,11.0894531 1.02124997,10.9691406 1.12593747,10.9691406 L2.31343747,10.9691406 L2.313,5.03089062 L1.12593747,5.03125 C1.03620533,5.03125 0.979764,4.94285714 1.00679571,4.8654519 L1.02749997,4.828125 L2.77749997,2.6109375 C2.81749997,2.5596875 2.88749997,2.5494375 2.93949997,2.5801875 Z M10.5009375,9.09375 C10.5696875,9.09375 10.6259375,9.15 10.6259375,9.21875 L10.6259375,9.21875 L10.6259375,10.09375 C10.6259375,10.1625 10.5696875,10.21875 10.5009375,10.21875 L10.5009375,10.21875 L6.25093747,10.21875 C6.18218747,10.21875 6.12593747,10.1625 6.12593747,10.09375 L6.12593747,10.09375 L6.12593747,9.21875 C6.12593747,9.15 6.18218747,9.09375 6.25093747,9.09375 L6.25093747,9.09375 Z M14.5009375,5.78125 C14.5696875,5.78125 14.6259375,5.8375 14.6259375,5.90625 L14.6259375,5.90625 L14.6259375,6.78125 C14.6259375,6.85 14.5696875,6.90625 14.5009375,6.90625 L14.5009375,6.90625 L6.25093747,6.90625 C6.18218747,6.90625 6.12593747,6.85 6.12593747,6.78125 L6.12593747,6.78125 L6.12593747,5.90625 C6.12593747,5.8375 6.18218747,5.78125 6.25093747,5.78125 L6.25093747,5.78125 Z M9.00093747,2.46875 C9.06968747,2.46875 9.12593747,2.525 9.12593747,2.59375 L9.12593747,2.59375 L9.12593747,3.46875 C9.12593747,3.5375 9.06968747,3.59375 9.00093747,3.59375 L9.00093747,3.59375 L6.25093747,3.59375 C6.18218747,3.59375 6.12593747,3.5375 6.12593747,3.46875 L6.12593747,3.46875 L6.12593747,2.59375 C6.12593747,2.525 6.18218747,2.46875 6.25093747,2.46875 L6.25093747,2.46875 Z" id=""></path>\n                </g>\n            </g>\n        </g>\n    </g>q\n</g>\n</svg>',InfoCircle:'<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1590389330617" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="19656" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><defs><style type="text/css"></style></defs><path d="M512 64c-247.4 0-448 200.6-448 448s200.6 448 448 448 448-200.6 448-448-200.6-448-448-448z m0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z" fill="" p-id="19657"></path><path d="M464 336c0 26.5 21.5 48 48 48s48-21.5 48-48-21.5-48-48-48-48 21.5-48 48zM536 448h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-272c0-4.4-3.6-8-8-8z" fill="" p-id="19658"></path></svg>',Minus:'<svg t="1557140120188" class="icon" style="" viewBox="0 0 1024 1024" version="1.1"\nxmlns="http://www.w3.org/2000/svg" p-id="16909" xmlns:xlink="http://www.w3.org/1999/xlink"\nwidth="200" height="200">\n\t<defs>\n\t\t<style type="text/css">\n\t\t</style>\n\t</defs>\n\t<path d="M328 544h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"\n\tp-id="16910">\n\t</path>\n\t<path d="M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32z m-40 728H184V184h656v656z"\n\tp-id="16911">\n\t</path>\n</svg>',Plus:'<svg t="1557140186692" class="icon" style="" viewBox="0 0 1024 1024" version="1.1"\nxmlns="http://www.w3.org/2000/svg" p-id="17025" xmlns:xlink="http://www.w3.org/1999/xlink"\nwidth="200" height="200">\n\t<defs>\n\t\t<style type="text/css">\n\t\t</style>\n\t</defs>\n\t<path d="M328 544h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"\n\tp-id="17026">\n\t</path>\n\t<path d="M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32z m-40 728H184V184h656v656z"\n\tp-id="17027">\n\t</path>\n</svg>',SortDown:'<svg t="1565940955886" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"\n     p-id="17472" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200">\n  <defs>\n    <style type="text/css"></style>\n  </defs>\n  <path\n    fill-opacity="0.45"\n    d="M948 392.992l-403.008 488.99200001Q532 896 512.992 896t-32-14.016L76 392.992q-18.016-20.992-7.008-46.016T108 321.98400001L916 321.98400001q28 0 39.008 24.99199999T948 392.992z"\n    p-id="17473" data-spm-anchor-id="a313x.7781069.0.i2" class="selected"></path>\n</svg>\n',SortDownSelected:'<svg t="1565940955886" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"\n     p-id="17472" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200">\n  <defs>\n    <style type="text/css"></style>\n  </defs>\n  <path\n    d="M948 392.992l-403.008 488.99200001Q532 896 512.992 896t-32-14.016L76 392.992q-18.016-20.992-7.008-46.016T108 321.98400001L916 321.98400001q28 0 39.008 24.99199999T948 392.992z"\n    p-id="17473" data-spm-anchor-id="a313x.7781069.0.i2" class="selected"></path>\n</svg>\n',SortUp:'<svg t="1565940979768" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"\n     p-id="17620" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200">\n  <defs>\n    <style type="text/css"></style>\n  </defs>\n  <path\n    fill-opacity="0.45"\n    d="M76 631.008l403.008-488.99200001Q492 128 511.008 128t32 14.016L948 631.008q18.016 20.992 7.008 46.016T916 702.01599999L108 702.01599999q-28 0-39.008-24.99199999T76 631.008z"\n    p-id="17621"></path>\n</svg>\n',SortUpSelected:'<svg t="1565940979768" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"\np-id="17620" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200">\n<defs>\n<style type="text/css"></style>\n</defs>\n<path\nd="M76 631.008l403.008-488.99200001Q492 128 511.008 128t32 14.016L948 631.008q18.016 20.992 7.008 46.016T916 702.01599999L108 702.01599999q-28 0-39.008-24.99199999T76 631.008z"\np-id="17621"></path>\n</svg>\n',Trend:'<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1596433821690" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="20229" width="16" height="16" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><style type="text/css"></style></defs><path d="M888 792H200V168c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h752c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM305.8 637.7c3.1 3.1 8.1 3.1 11.3 0l138.3-137.6L583 628.5c3.1 3.1 8.2 3.1 11.3 0l275.4-275.3c3.1-3.1 3.1-8.2 0-11.3l-39.6-39.6c-3.1-3.1-8.2-3.1-11.3 0l-230 229.9L461.4 404c-3.1-3.1-8.2-3.1-11.3 0L266.3 586.7c-3.1 3.1-3.1 8.2 0 11.3l39.5 39.7z" p-id="20230"></path></svg>'}),PC={},kC=function(t,e){PC[Bg(t)]=e};ch(AC).forEach((function(t){var e=Hh(AC,t);kC(t,e)}));var BC,DC,FC,HC,zC,GC=function(t){function e(e,n){var r=t.call(this,n)||this;return r.imgType=e,r}return E(e,t),e}(Cs),WC=function(t){function e(e,n){var r=t.call(this,e)||this;return r.appendInfo=n,r}return E(e,t),e}(Ss),VC="<svg",UC="data:image/svg+xml",jC={},YC=function(t){function e(e){var n=t.call(this,{name:e.name})||this;return n.isOnlineLink=function(t){return/^(?:https?:)?(?:\/\/)/.test(t)},n.cfg=e,n.render(),n}return E(e,t),e.prototype.getCfg=function(){return this.cfg},e.prototype.getImage=function(t,e,n){var r=this;return new Promise((function(i,o){var a=function(t){return PC[Bg(t)]}(t);if(a){var s=new Image;s.onload=function(){jC[e]=s,i(s)},s.onerror=o,a&&(a.includes(UC)||r.isOnlineLink(a))?(s.src=a,s.crossOrigin="anonymous"):(n&&(a=(a=a.replace(/fill=[\'\"]#?\w+[\'\"]/g,"")).replace(/fill>/g,">")),a=a.replace(VC,"".concat(VC,' fill="').concat(n,'"')),s.src="".concat(UC,";utf-8,").concat(encodeURIComponent(a)))}}))},e.prototype.render=function(){var t=this.cfg,n=t.name,r=t.fill,i=vp(this.cfg),o=new GC(e.type,{style:jg(i,"fill")});this.iconImageShape=o,this.setImageAttrs({name:n,fill:r})},e.prototype.setImageAttrs=function(t){var e=this,n=t.name,r=t.fill,i=this.iconImageShape;n=n||this.cfg.name,r=r||this.cfg.fill;var o="".concat(n,"-").concat(r),a=jC[o];a?(i.attr("img",a),this.appendChild(i)):this.getImage(n,o,r).then((function(t){e.destroyed?IC.getInstance().logger("GuiIcon ".concat(n," destroyed.")):(i.attr("img",t),e.appendChild(i))})).catch((function(t){t instanceof TypeError?console.warn("GuiIcon ".concat(n," destroyed:"),t):console.error("GuiIcon ".concat(n," load failed:"),t)}))},e.type="__GUI_ICON__",e}(ys);!function(t){t.TOP="TOP",t.BOTTOM="BOTTOM",t.LEFT="LEFT",t.RIGHT="RIGHT"}(BC||(BC={})),function(t){t.BORDER_BOX="borderBox",t.PADDING_BOX="paddingBox",t.CONTENT_BOX="contentBox"}(DC||(DC={})),function(t){t.SUM="SUM",t.MIN="MIN",t.MAX="MAX",t.AVG="AVG"}(FC||(FC={})),function(t){t.Row="row",t.Col="col",t.Series="series"}(HC||(HC={})),function(t){t.PLAIN="text/plain",t.HTML="text/html"}(zC||(zC={}));var XC=function(){function t(){this.store=new Map}return t.prototype.set=function(t,e){return this.store.set(t,e)},t.prototype.get=function(t,e){var n;return null!==(n=this.store.get(t))&&void 0!==n?n:e},t.prototype.clear=function(){this.store.clear()},t.prototype.size=function(){return this.store.size},t}();function qC(t){return t===_m.MOBILE||/(?:iPhone|iPad|SymbianOS|Windows Phone|iPod|iOS|Android)/i.test(navigator.userAgent)}function KC(){return/windows/i.test(navigator.userAgent)}var ZC=function(t){!function(t,e){void 0===e&&(e="");var n=document.getElementById(t);n||((n=document.createElement("style")).id=t,document.head.appendChild(n)),n.innerHTML=e}("antv-s2-core-vars","dark"===t?":root {\n  --antv-s2-background: #000;\n  --antv-s2-tooltip-background: rgba(43, 43, 43, 0.95);\n  --antv-s2-tooltip-operator-background: rgba(43, 43, 43, 0.95);\n}\n":"")},$C=function(t){var e,n,r,i,o,a,s=(null==t?void 0:t.palette)||(a=null==t?void 0:t.name,CC[a||"default"]),l=s.basicColors,u=s.semanticColors,c=s.others,h=null===(e=null==t?void 0:t.spreadsheet)||void 0===e?void 0:e.isTableMode(),d=KC()?"bold":700,f=function(){var t,e;return{bolderText:{fontFamily:wC,fontSize:12,fontWeight:d,fill:l[13],opacity:1,textAlign:"right",textBaseline:"middle",linkTextFill:l[6]},text:{fontFamily:wC,fontSize:12,fontWeight:"normal",fill:l[13],opacity:1,textAlign:"right",textBaseline:"middle",linkTextFill:l[6]},cell:{crossBackgroundColor:l[1],backgroundColor:l[8],backgroundColorOpacity:1,horizontalBorderColor:l[9],horizontalBorderColorOpacity:1,verticalBorderColor:l[9],verticalBorderColorOpacity:1,horizontalBorderWidth:1,verticalBorderWidth:1,padding:{top:8,right:8,bottom:8,left:8},interactionState:{hover:{backgroundColor:l[2],backgroundOpacity:.6},hoverFocus:{backgroundColor:l[2],backgroundOpacity:.6,borderColor:l[14],borderWidth:1,borderOpacity:1},selected:{backgroundColor:l[2],backgroundOpacity:.6},unselected:{backgroundOpacity:.3,textOpacity:.3,opacity:.3},searchResult:{backgroundColor:null!==(t=null==c?void 0:c.results)&&void 0!==t?t:l[2],backgroundOpacity:1},highlight:{backgroundColor:null!==(e=null==c?void 0:c.highlight)&&void 0!==e?e:l[6],backgroundOpacity:1},prepareSelect:{borderColor:l[14],borderOpacity:1,borderWidth:1}}},miniChart:{line:{point:{size:2.2,fill:l[6],opacity:1},linkLine:{size:1.5,fill:l[6],opacity:.6}},bar:{intervalPadding:4,fill:l[6],opacity:1},bullet:{progressBar:{widthPercent:.6,height:10,innerHeight:6},comparativeMeasure:{width:1,height:12,fill:l[13],opacity:.25},rangeColors:{good:null==u?void 0:u.green,satisfactory:u.yellow,bad:u.red},backgroundColor:"#E9E9E9"},interval:{height:12,fill:l[7]}},icon:{fill:l[13],size:10,margin:{right:4,left:4}}}};return{cornerCell:{text:{fontFamily:wC,fontSize:12,fontWeight:d,fill:l[0],opacity:1,textAlign:h?"center":"left",textBaseline:"middle"},bolderText:{fontFamily:wC,fontSize:12,fontWeight:d,fill:l[0],opacity:1,textAlign:h?"center":"right",textBaseline:"middle"},cell:{backgroundColor:l[3],backgroundColorOpacity:1,horizontalBorderColor:l[10],horizontalBorderColorOpacity:1,verticalBorderColor:l[10],verticalBorderColorOpacity:1,horizontalBorderWidth:1,verticalBorderWidth:1,borderDash:[],padding:{top:4,right:8,bottom:4,left:8}},icon:{fill:l[0],size:10,margin:{right:4,left:4}}},rowCell:{seriesText:{fontFamily:wC,fontSize:12,fontWeight:"normal",fill:l[14],linkTextFill:l[6],opacity:1,textBaseline:"middle",textAlign:"center"},measureText:{fontFamily:wC,fontSize:12,fontWeight:"normal",fill:l[14],linkTextFill:l[6],opacity:1,textAlign:h?"center":"left",textBaseline:"middle"},bolderText:{fontFamily:wC,fontSize:12,fontWeight:d,fill:l[14],linkTextFill:l[6],opacity:1,textAlign:h?"center":"left",textBaseline:"middle"},text:{fontFamily:wC,fontSize:12,fontWeight:"normal",fill:l[14],linkTextFill:l[6],opacity:1,textBaseline:"middle",textAlign:h?"center":"left"},cell:{backgroundColor:l[1],backgroundColorOpacity:1,horizontalBorderColor:l[9],horizontalBorderColorOpacity:1,verticalBorderColor:l[9],verticalBorderColorOpacity:1,horizontalBorderWidth:1,verticalBorderWidth:1,borderDash:[],padding:{top:4,right:8,bottom:4,left:8},interactionState:{hover:{backgroundColor:l[2],backgroundOpacity:.6},selected:{backgroundColor:l[2],backgroundOpacity:.6},unselected:{backgroundOpacity:.3,textOpacity:.3,opacity:.3},prepareSelect:{borderColor:l[14],borderOpacity:1,borderWidth:1},searchResult:{backgroundColor:null!==(n=null==c?void 0:c.results)&&void 0!==n?n:l[2],backgroundOpacity:1},highlight:{backgroundColor:null!==(r=null==c?void 0:c.highlight)&&void 0!==r?r:l[6],backgroundOpacity:1}}},icon:{fill:l[14],size:10,margin:{right:4,left:4}},seriesNumberWidth:80},colCell:{measureText:{fontFamily:wC,fontSize:12,fontWeight:"normal",fill:l[0],opacity:1,textAlign:"right",textBaseline:"middle"},bolderText:{fontFamily:wC,fontSize:12,fontWeight:d,fill:l[0],opacity:1,textAlign:"center",textBaseline:"middle"},text:{fontFamily:wC,fontSize:12,fontWeight:"normal",fill:l[0],opacity:1,textAlign:"center",textBaseline:"middle"},cell:{backgroundColor:l[3],backgroundColorOpacity:1,horizontalBorderColor:l[10],horizontalBorderColorOpacity:1,verticalBorderColor:l[10],verticalBorderColorOpacity:1,horizontalBorderWidth:1,verticalBorderWidth:1,borderDash:[],padding:{top:4,right:8,bottom:4,left:8},interactionState:{hover:{backgroundColor:l[4],backgroundOpacity:.6},selected:{backgroundColor:l[4],backgroundOpacity:.6},unselected:{backgroundOpacity:.3,textOpacity:.3,opacity:.3},prepareSelect:{borderColor:l[14],borderOpacity:1,borderWidth:1},searchResult:{backgroundColor:null!==(i=null==c?void 0:c.results)&&void 0!==i?i:l[2],backgroundOpacity:1},highlight:{backgroundColor:null!==(o=null==c?void 0:c.highlight)&&void 0!==o?o:l[6],backgroundOpacity:1}}},icon:{fill:l[0],size:10,margin:{top:6,right:4,bottom:6,left:4}}},dataCell:f(),mergedCell:f(),resizeArea:{size:3,background:l[7],backgroundOpacity:0,guideLineColor:l[7],guideLineDisableColor:"rgba(0,0,0,0.25)",guideLineDash:[3,3],interactionState:{hover:{backgroundColor:l[7],backgroundOpacity:1}}},scrollBar:{trackColor:"rgba(0,0,0,0.01)",thumbHoverColor:"rgba(0,0,0,0.25)",thumbColor:"rgba(0,0,0,0.15)",thumbHorizontalMinSize:32,thumbVerticalMinSize:32,size:qC()?3:6,hoverSize:qC()?4:8,lineCap:"round"},splitLine:{horizontalBorderColor:l[12],horizontalBorderColorOpacity:.2,horizontalBorderWidth:2,verticalBorderColor:l[11],verticalBorderColorOpacity:.25,verticalBorderWidth:2,showShadow:!0,shadowWidth:8,shadowColors:{left:"rgba(0,0,0,0.1)",right:"rgba(0,0,0,0)"},borderDash:[]},prepareSelectMask:{backgroundColor:l[5],backgroundOpacity:.3},background:{color:l[8],opacity:1}}},QC=function(){function t(t){this.x=0,this.y=0,this.width=0,this.height=0,this.colIndex=-1,this.level=0,this.isLeaf=!1,this.children=[],this.padding=0;var e=t.id,n=t.field,r=t.value,i=t.parent,o=t.level,a=t.rowIndex,s=t.isTotals,l=t.isGrandTotals,u=t.isSubTotals,c=t.isCollapsed,h=t.isTotalRoot,d=t.hierarchy,f=t.isPivotMode,p=t.seriesNumberWidth,v=t.spreadsheet,g=t.query,y=t.belongsCell,m=t.inCollapseNode,C=t.isTotalMeasure,w=t.isLeaf,x=t.extra;this.id=e,this.field=n,this.value=r,this.parent=i,this.level=o,this.rowIndex=a,this.isTotals=s,this.isCollapsed=c,this.hierarchy=d,this.isPivotMode=f,this.seriesNumberWidth=p,this.spreadsheet=v,this.query=g,this.inCollapseNode=m,this.isTotalMeasure=C,this.isLeaf=w,this.isGrandTotals=l,this.isSubTotals=u,this.belongsCell=y,this.isTotalRoot=h,this.extra=x}return t.getFieldPath=function(t,e){if(t&&!t.isTotals||t&&e){for(var n=t.parent,r=[t.field];n&&n.id!==OC;)r.push(n.field),n=n.parent;return r.reverse()}return[]},t.getAllLeaveNodes=function(t){var e=[];if(t.isLeaf)return[t];for(var n=O([],R(t.children||[]),!1),r=n.shift();r;)r.isLeaf?e.push(r):n.unshift.apply(n,O([],R(r.children),!1)),r=n.shift();return e},t.getAllChildrenNodes=function(t){var e=[];if(t.isLeaf)return[t];for(var n=O([],R(t.children||[]),!1),r=n.shift();r;)e.push(r),n.unshift.apply(n,O([],R(r.children),!1)),r=n.shift();return e},t.getBranchNodes=function(t){if(t&&!t.isTotals){for(var e=t.parent,n=[t];e&&e.id!==OC;)n.push(e),e=e.parent;return n.reverse()}return[]},t.blankNode=function(){return new t({id:"",field:"",value:""})},t.rootNode=function(){return new t({id:OC,field:"",value:""})},t.prototype.getHeadLeafChild=function(){for(var t=this;!_g(null==t?void 0:t.children);)t=$v(null==t?void 0:t.children);return t},t.prototype.getTotalHeightForTreeHierarchy=function(){return 0===this.height||_g(this.children)?this.height:this.children.reduce((function(t,e){return t+e.getTotalHeightForTreeHierarchy()}),this.height)},t.prototype.isSeriesNumberNode=function(){return this.field===tu},t}(),JC=function(){function t(){this.width=0,this.height=0,this.maxLevel=-1,this.sampleNodesForAllLevels=[],this.sampleNodeForLastLevel=null,this.allNodesWithoutRoot=[],this.indexNode=[]}return t.prototype.getLeaves=function(){return this.allNodesWithoutRoot.filter((function(t){return t.isLeaf}))},t.prototype.getNodes=function(t){return void 0!==t?this.allNodesWithoutRoot.filter((function(e){return e.level===t})):this.allNodesWithoutRoot},t.prototype.getNodesLessThanLevel=function(t){return this.allNodesWithoutRoot.filter((function(e){return e.level<=t}))},t.prototype.pushNode=function(t,e){void 0===e&&(e=-1),-1===e?this.allNodesWithoutRoot.push(t):this.allNodesWithoutRoot.splice(e,0,t)},t.prototype.pushIndexNode=function(t){this.indexNode.push(t)},t.prototype.getIndexNodes=function(){return this.indexNode},t}(),tw=function(t){var e=t.label,n=t.isSubTotals,r=t.isGrandTotals,i=t.isTotalRoot,o=void 0!==i&&i;this.label=e,this.isSubTotals=n,this.isGrandTotals=r,this.isTotalRoot=o};function ew(t,e){for(var n={},r=t;r&&r.field;)r.isTotalRoot&&!e||r.value===eu||(n[r.field]=r.value),r=r.parent;return n}var nw=function(t){var e,n,r,i,o=t.spreadsheet,a=t.level,s=t.fields,l=o.options,u=o.dataSet.moreThanOneValue(),c=null===(n=null===(e=o.dataCfg.fields)||void 0===e?void 0:e.valueInCols)||void 0===n||n,h=(null===(i=null===(r=null==l?void 0:l.style)||void 0===r?void 0:r.colCell)||void 0===i?void 0:i.hideValue)&&c&&!u&&yg(s,Kl)?2:1;return a===s.length-h},rw=function(t,e,n,r){return t.options.layoutArrange?t.options.layoutArrange(t,n,r,e):e},iw=function(t,e,n,r){var i,o,a,s;if((null===(i=null==t?void 0:t.facet)||void 0===i?void 0:i.getHiddenColumnsInfo(n))&&(null===(s=null===(a=null===(o=null==t?void 0:t.dataSet)||void 0===o?void 0:o.fields)||void 0===a?void 0:a.columns)||void 0===s?void 0:s.find((function(t){return t===(null==n?void 0:n.field)}))))return!1;var l=!0,u=function(t,n,i){void 0===n&&(n=-1),void 0===i&&(i=-1),-1===n?(e.children.push(t),r.pushNode(t)):(e.children.splice(n,0,t),r.pushNode(t,i))};if(t.options.layoutHierarchy){var c=t.options.layoutHierarchy(t,n);if(c){var h=!!Eg(null==c?void 0:c.delete)&&(null==c?void 0:c.delete);l=!h;var d=c.push,f=c.unshift,p=e.children.length,v=r.getNodes().length;_g(f)||(kv(f,(function(t){u(t)})),p=e.children.length,v=r.getNodes().length),_g(d)||kv(d,(function(t){u(t)})),h||u(n,p,v)}else u(n)}else u(n);return l},ow=function(t,e,n){var r,i;(null===(r=t.options)||void 0===r?void 0:r.layoutCoordinate)&&((null==e?void 0:e.isLeaf)||(null==n?void 0:n.isLeaf))&&(null===(i=t.options)||void 0===i||i.layoutCoordinate(t,e,n))},aw=function(t){this.label=t},sw=function(t){return void 0===t&&(t=[]),t.filter((function(t){return t!==Ql&&t!==nu}))};var lw=function t(e){var n=e.addTotalMeasureInTotal,r=e.parentNode,i=e.currentField,o=e.fields,a=e.hierarchy,s=e.spreadsheet,l=o.indexOf(i),u=s.dataSet,c=u.fields.values,h=void 0===c?[]:c,d=[],f={},p=s.getTotalsConfig(i),v=r.isGrandTotals?p.grandTotalsGroupDimensions||[]:p.subTotalsGroupDimensions||[],g=u.isEmpty()?[]:v;if(null==g?void 0:g.includes(i)){f=ew(r);var y=u.getDimensionValues(i,f);d.push.apply(d,O([],R((y||[]).map((function(t){return new tw({label:t,isSubTotals:r.isSubTotals,isGrandTotals:r.isGrandTotals,isTotalRoot:!1})}))),!1)),_g(d)&&i&&d.push(eu)}else{if(!n||i!==Kl)return nw({spreadsheet:s,level:l,fields:o})?(r.isLeaf=!0,a.pushIndexNode(r),void(r.rowIndex=a.getIndexNodes().length-1)):void t(S(S({},e),{currentField:o[l+1]}));f=ew(r),d.push.apply(d,O([],R(h.map((function(t){return new aw(t)}))),!1))}var m=sw(d);dw(S(S({},e),{fieldValues:m,level:l,parentNode:r,query:f}))},uw=function(t){var e,n=t.parentNode,r=t.currentField,i=t.fields,o=t.spreadsheet,a=o.dataSet,s=a.fields.values,l=void 0===s?[]:s,u=i.indexOf(r),c=[];e=ew(n,!0);var h=a.getDimensionValues(r,e),d=rw(o,h,n,r);c.push.apply(c,O([],R(d||[]),!1)),_g(c)&&r&&(r===Kl?c.push.apply(c,O([],R(l),!1)):c.push(eu)),function(t){var e,n,r,i=t.isFirstField,o=t.currentField,a=t.fieldValues,s=t.spreadsheet,l=t.lastField,u=s.getTotalsConfig(i?o:l);i?(null==u?void 0:u.showGrandTotals)&&(n=u.reverseGrandTotalsLayout?"unshift":"push",r=new tw({label:u.grandTotalsLabel,isSubTotals:!1,isGrandTotals:!0,isTotalRoot:!0})):(null==u?void 0:u.showSubTotals)&&(wy(a)>1||!1!==Hh(u,"showSubTotals.always"))&&o!==Kl&&(n=u.reverseSubTotalsLayout?"unshift":"push",r=new tw({label:u.subTotalsLabel,isSubTotals:!0,isGrandTotals:!1,isTotalRoot:!0})),n&&(null===(e=a[n])||void 0===e||e.call(a,r))}({currentField:r,lastField:i[u-1],isFirstField:0===u,fieldValues:c,spreadsheet:o});var f=sw(c);dw(S(S({},t),{fieldValues:f,level:u,parentNode:n,query:e}))},cw=function(t){t.parentNode.isTotals?lw(t):uw(t)},hw=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.map((function(t){return Pg(t)?"$$undefined$$":Ng(t)?"$$null$$":String(t)})).join(NC)},dw=function(t){var e,n,r,i,o,a,s,l,u,c,h=t.currentField,d=t.fields,f=t.fieldValues,p=t.hierarchy,v=t.parentNode,g=t.level,y=t.query,m=t.addMeasureInTotalQuery,C=t.addTotalMeasureInTotal,w=t.spreadsheet,x=w.isTableMode();try{for(var b=M(f.entries()),E=b.next();!E.done;E=b.next()){var T=R(E.value,2),L=T[0],_=T[1],O=_ instanceof tw,N=_ instanceof aw,I=void 0,A=void 0,P=!1,k=!1,B=!1,D=!1,F=h;if(O){var H=_;k=H.isGrandTotals,B=H.isSubTotals,D=H.isTotalRoot,I=Fy(_.label),A=D?y:S(S({},y),((r={})[h]=I,r)),m&&(A[Kl]=null===(s=null==w?void 0:w.dataSet)||void 0===s?void 0:s.fields.values[0]),P=nw({spreadsheet:w,level:g,fields:d})}else N?(I=Fy(_.label),A=S(S({},y),((i={})[Kl]=I,i)),F=Kl,k=v.isGrandTotals,B=v.isSubTotals,P=nw({spreadsheet:w,level:g,fields:d})):x?(I=_,F=d[L],A=S(S({},y),((o={})[F]=I,o)),P=!0):(A=(I=_)===eu?S({},y):S(S({},y),((a={})[h]=I,a)),P=nw({spreadsheet:w,level:g,fields:d}));var z=x?F:I,G=hw(v.id,z);if(!G)return;var W=!1,V=new QC({id:G,value:I,level:g,field:F,parent:v,isTotals:O||N,isGrandTotals:k,isSubTotals:B,isTotalMeasure:N,isCollapsed:W,isTotalRoot:D,hierarchy:p,query:A,spreadsheet:w,isLeaf:P||W}),U=iw(w,v,V,p),j=null===(l=null==w?void 0:w.facet)||void 0===l?void 0:l.getHiddenColumnsInfo(V);!(g>p.maxLevel)||k||v.isGrandTotals||v.isSubTotals||V.isSubTotals||(p.sampleNodesForAllLevels.push(V),p.maxLevel=g,p.sampleNodeForLastLevel=j?(null===(u=null==j?void 0:j.displaySiblingNode)||void 0===u?void 0:u.next)||(null===(c=null==j?void 0:j.displaySiblingNode)||void 0===c?void 0:c.prev):V),P||!U?(V.isLeaf=!0,p.pushIndexNode(V),V.rowIndex=p.getIndexNodes().length-1):cw({addTotalMeasureInTotal:C,addMeasureInTotalQuery:m,parentNode:V,currentField:d[g+1],fields:d,hierarchy:p,spreadsheet:w})}}catch(Y){e={error:Y}}finally{try{E&&!E.done&&(n=b.return)&&n.call(b)}finally{if(e)throw e.error}}},fw=function(t){return Number.parseFloat((Pu(t)||0).toPrecision(16))},pw=function(t,e,n){if(void 0===n&&(n=0),!Object.values(t).find((function(t){return t>0})))return t;var r=S({},t);r.colCount>=e&&(r.colCount=e);var i=e-r.colCount;r.trailingColCount>i&&(r.trailingColCount=i),r.rowCount>=n&&(r.rowCount=n);var o=n-r.rowCount;return r.trailingRowCount>o&&(r.trailingRowCount=o),r},vw=function(t){function e(e,n){var r=t.call(this,e)||this;return r.appendInfo=n,r}return E(e,t),e}(Ts);function gw(t,e){return null==t?void 0:t.appendChild(new Ss({style:e}))}function yw(t,e){return null==t?void 0:t.appendChild(new ps({style:e}))}function mw(t,e){return null==t?void 0:t.appendChild(new ws({style:S({zIndex:100},e)}))}function Cw(t,e,n){_g(t)||(wu(t)?t:[t]).forEach((function(t){var r;null===(r=null==t?void 0:t.style)||void 0===r||r.setProperty(e,n)}))}function ww(t,e){var n=new YC(e);return null==t||t.appendChild(n),n}function xw(t){var e=t.group,n=t.iconCfg,r=t.isCollapsed,i=t.onClick,o=ww(e,S(S({},n),{name:r?"Plus":"Minus",cursor:"pointer"}));return Uu(i)&&o.addEventListener("click",i),o}var bw,Ew=function(t,e,n){void 0===t&&(t=[]);var r,i=(void 0===(r=t)&&(r=[]),r.map((function(t){return S(S({},t),{icons:(e=t.icons,void 0===n&&(n="right"),e.map((function(t){return"string"==typeof t?{name:t,position:n}:t})))});var e,n}))),o=Xv(i,(function(t){return function(t,e,n){if(!t)return!1;var r=t.icons,i=t.displayCondition,o=t.belongsCell;return!_g(r)&&o===n&&r.some((function(t){var n,r,o;return null===(o=null!==(r=null===(n=t.displayCondition)||void 0===n?void 0:n.call(t,e,t.name))&&void 0!==r?r:null==i?void 0:i(e,t.name))||void 0===o||o}))}(t,e,n)}));if(o){var a=o.icons.filter((function(t){var n,r,i,a;return null===(a=null!==(r=null===(n=t.displayCondition)||void 0===n?void 0:n.call(t,e,t.name))&&void 0!==r?r:null===(i=o.displayCondition)||void 0===i?void 0:i.call(o,e,t.name))||void 0===a||a}));return S(S({},o),{icons:a})}},Sw=function(t,e){if(void 0===t&&(t=[]),_g(t))return 0;var n=e.margin,r=e.size;return t.reduce((function(t,e){var i=e.position;return t+r+("left"===i?n.right:n.left)}),0)},Tw=function(t,e){void 0===t&&(t=[]);var n=Gg({left:[],right:[]},og(t,"position"));return e&&("left"===e.position?n.left.push(e):n.right.unshift(e)),n},Lw=function(t,e){var n=t.value;return Mg(t.field,Kl)?{formattedValue:e||n,value:n}:{formattedValue:n,value:n}},_w=function(t,e){var n=t.y,r=t.height;switch(e){case"top":return n;case"middle":return n+r/2;default:return n+r}},Mw=function(t,e,n,r){var i=(n-t)/2;switch(r){case"top":return e+i;case"middle":return e-t/2;default:return e-i-t}},Rw=function(t){var e,n,r,i=t.bbox,o=t.textWidth,a=t.textAlign,s=t.groupedIcons,l=t.iconStyle,u=i.x,c=i.width,h=Sw(s.left,l),d=Sw(s.right,l);switch(a){case"left":n=u,r=(e=u+h)+o+(d&&l.margin.left);break;case"right":n=(e=u+c-d)-o-h,r=u+c-d+(d&&l.margin.left);break;default:e=(n=u+c/2-(h+o+d)/2)+h+o/2,r=n+h+o+(d&&l.margin.left)}return{textX:e,leftIconX:n,rightIconX:r}},Ow=function(t,e,n){var r=e||{},i=r.x,o=r.y,a=r.width,s=r.height,l=n||{},u=l.horizontalBorderWidth,c=void 0===u?0:u,h=l.horizontalBorderColorOpacity,d=l.horizontalBorderColor,f=l.verticalBorderWidth,p=void 0===f?0:f,v=l.verticalBorderColor,g=l.verticalBorderColorOpacity,y=l.borderDash,m=_g(y)?"":y,C=[BC.TOP,BC.BOTTOM].includes(t)?{lineWidth:c,stroke:d,strokeOpacity:h,lineDash:m}:{lineWidth:p,stroke:v,strokeOpacity:g,lineDash:m},w=0,x=0,b=0,E=0;if(t===BC.TOP||t===BC.BOTTOM){var S=o;x=S=t===BC.TOP?o+c/2:o+s-c/2,E=S,w=i,b=i+a}if(t===BC.LEFT||t===BC.RIGHT){var T=i;w=T=t===BC.LEFT?i+p/2:i+a-p/2,b=T,x=o,E=o+s}return{position:{x1:w,x2:b,y1:x,y2:E},style:C}},Nw=function(t){var e;return null!==(e=null==t?void 0:t.position)&&void 0!==e?e:"right"},Iw=function(t,e){var n,r,i=t.data,o=t.encode,a=t.type,s=e.getMeta(),l=s.x,u=s.y,c=s.height,h=s.width,d=e.getStyle(hm.DATA_CELL),f=d.cell,p=d.miniChart,v=[],g=Jv(i,(function(t){return v.push(null==t?void 0:t[o.y]),{x:t[o.x],y:t[o.y]}})),y=Hg(v)||0,m=Wg(v)||0,C=y-m,w=f.padding,x=w.left,b=void 0===x?0:x,E=w.right,S=void 0===E?0:E,T=w.top,L=void 0===T?0:T,_=w.bottom,M=l+b,R=l+h-S,O=u+L,N=u+c-(void 0===_?0:_),I=N-O,A=null===(n=null==p?void 0:p.bar)||void 0===n?void 0:n.intervalPadding,P=a===ky.Bar?(R-M-(v.length-1)*A)/v.length+A:null!==(r=(R-M)/(v.length-1))&&void 0!==r?r:0,k=[];return{points:Jv(g,(function(t,e){var n,r=M+e*P;if(n=0!==C?N-((null==t?void 0:t.y)-m)/C*I:m>0?O:N,a===ky.Bar){var i=void 0,o=void 0;m<0&&y>0&&0!==C?(i=N-(0-m)/C*I,o=Math.abs(n-i),(null==t?void 0:t.y)<0&&(n=i)):(i=m<0?O:N,o=0===(C=Hg([Math.abs(y),Math.abs(m)]))?I:Math.abs((null==t?void 0:t.y)-0)/C*I,n=i);var s=P-A;k.push([s,o])}return[r,n]})),box:k}},Aw=function(t,e){if(!_g(null==t?void 0:t.data)&&!_g(e)){var n,r,i=e.getStyle(hm.DATA_CELL).miniChart,o=null==i?void 0:i.line,a=o.point,s=o.linkLine,l=Iw(t,e).points;n=e,r={points:l,stroke:null==s?void 0:s.fill,lineWidth:null==s?void 0:s.size,opacity:null==s?void 0:s.opacity},null==n||n.appendChild(new Es({style:r}));for(var u=0;u<l.length;u++)yw(e,{cx:l[u][0],cy:l[u][1],r:a.size,fill:a.fill,fillOpacity:null==a?void 0:a.opacity})}},Pw=function(t,e,n){var r=Number(e)-Number(t);return Number.isNaN(r)||Number(t)<0?n.bad:r<=.1?n.good:r>.1&&r<=.2?n.satisfactory:n.bad},kw=function(t){var e,n,r,i,o,a;if(!_g(t)){var s=t.getBBoxByType(DC.PADDING_BOX),l=s.x,u=s.y,c=s.height,h=s.width,d=t.findFieldCondition(null===(e=t.cellConditions)||void 0===e?void 0:e.interval);if(null==d?void 0:d.mapping){var f=t.mappingValue(d);if(!f)return;var p=f.isCompare?f:t.valueRangeByField,v=fw(p.minValue),g=fw(p.maxValue),y=Og(null==f?void 0:f.fieldValue)?fw(t.getMeta().fieldValue):fw(null==f?void 0:f.fieldValue);if(y<v||y>g)return;var m=t.getStyle(),C=null===(r=null===(n=null==m?void 0:m.miniChart)||void 0===n?void 0:n.interval)||void 0===r?void 0:r.height,w=null===(o=null===(i=null==m?void 0:m.miniChart)||void 0===i?void 0:i.interval)||void 0===o?void 0:o.fill,x=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),t=fw(t),e=fw(e);var n=t>=0,r=e>=0&&t<=0,i=r?0:n?t:e,o=e-t;return function(e){var a=n?0:1;return{zeroScale:r?Zd(Math.abs(0-t)/o,0,1):a,scale:Zd((e-i)/o,-1,1)}}}(v,g),b=x(y);return gw(t,{x:l+h*b.zeroScale,y:u+c/2-C/2,width:h*b.scale,height:C,fill:null!==(a=f.fill)&&void 0!==a?a:w})}}},Bw=function(t,e){var n=e.getStyle(hm.DATA_CELL),r=e.getMeta(),i=r.x,o=r.y,a=r.height,s=r.width;if(_g(t))e.renderTextShape(S(S({},n.text),{x:i+s-n.cell.padding.right,y:o+a/2,text:""}));else{var l=n.miniChart.bullet,u=l.progressBar,c=l.comparativeMeasure,h=l.rangeColors,d=l.backgroundColor,f=t.measure,p=t.target,v=Math.max(Number(f),0),g=Math.max(Number(p),0),y=function(t,e){var n,r;void 0===e&&(e={min:0,max:0});var i=Number(t);if(Number.isNaN(i))return t;var o=null!==(n=null==e?void 0:e.min)&&void 0!==n?n:e,a=null!==(r=null==e?void 0:e.max)&&void 0!==r?r:e;return new Intl.NumberFormat("en-US",{minimumFractionDigits:o,maximumFractionDigits:a,useGrouping:!1,style:"percent"}).format(i)}(f,2),m=(null==u?void 0:u.widthPercent)>1?(null==u?void 0:u.widthPercent)/100:null==u?void 0:u.widthPercent,C=n.cell.padding,w=s-C.left-C.right,x=m*w,b=w-x,E=i+s-C.right-x,T=o+a/2-u.height/2;gw(e,{x:E,y:T,width:x,height:u.height,fill:d});var L=Math.max(Math.min(x*v,x),0);gw(e,{x:E,y:T+(u.height-u.innerHeight)/2,width:L,height:u.innerHeight,fill:Pw(v,g,h)});var _=E+x*g;mw(e,{x1:_,y1:o+(a-c.height)/2,x2:_,y2:o+(a-c.height)/2+c.height,stroke:null==c?void 0:c.fill,lineWidth:c.width,opacity:null==c?void 0:c.opacity});var M=b-C.right;e.renderTextShape(S(S({},n.text),{x:E-C.right,y:o+a/2,text:y,wordWrapWidth:M}))}},Dw=function(t,e){switch(null==e?void 0:e.type){case ky.Line:Aw(e,t);break;case ky.Bar:!function(t,e){if(!_g(null==t?void 0:t.data)&&!_g(e))for(var n=e.getStyle(hm.DATA_CELL).miniChart.bar,r=Iw(t,e),i=r.points,o=r.box,a=0;a<i.length;a++)gw(e,{x:i[a][0],y:i[a][1],width:o[a][0],height:o[a][1],fill:n.fill,fillOpacity:n.opacity})}(e,t);break;default:Bw(e,t)}},Fw=function(t,e,n,r){void 0===r&&(r="left");var i=e.right,o=void 0===i?0:i,a=e.left,s=n||0;return"left"===r?t+o/2+s:"right"===r?t-o/2-s:t+(void 0===a?0:a)/2+s},Hw=function(t){var e,n=t.rowIndex,r=t.colIndex,i=t.meta,o=t.data,a=t.textStyle,s=t.textCondition,l=null===(e=null==s?void 0:s.mapping)||void 0===e?void 0:e.call(s,o,{rowIndex:n,colIndex:r,meta:i});return S(S({},a),l)},zw=function(t,e){return Uu(e)?e(t):e},Gw=function(t,e,n){var r,i,o,a,s,l,u,c;void 0===n&&(n=!0);var h=t.getBBoxByType(DC.CONTENT_BOX),d=h.x,f=h.y,p=h.height,v=h.width,g=t.getMeta(),y=e||g.fieldValue,m=y.values,C=g.spreadsheet.options,w=null===(i=null===(r=null==C?void 0:C.conditions)||void 0===r?void 0:r.text)||void 0===i?void 0:i[0],x=null===(a=null===(o=null==C?void 0:C.conditions)||void 0===o?void 0:o.icon)||void 0===a?void 0:a[0];if(wu(m)){var b=null===(u=null===(l=null===(s=C.style)||void 0===s?void 0:s.dataCell)||void 0===l?void 0:l.valuesCfg)||void 0===u?void 0:u.widthPercent,E=0;if(null==y?void 0:y.label){var T=t.getStyle(hm.DATA_CELL).bolderText;E=p/(m.length+1),t.renderTextShape(S(S({},T),{x:d,y:f+E/2,text:y.label,maxLines:1,wordWrapWidth:v,wordWrap:!0,textOverflow:"ellipsis"}),{shallowRender:!0})}for(var L,_=function(t){var e,n,r=t.getMeta().isTotals,i=null===(n=(e=t).isMeasureField)||void 0===n?void 0:n.call(e),o=t.getStyle(t.cellType||hm.DATA_CELL);return{cellStyle:o,textStyle:i?null==o?void 0:o.measureText:r?null==o?void 0:o.bolderText:null==o?void 0:o.text}}(t),M=_.cellStyle,R=_.textStyle,O=null==M?void 0:M.icon,N=x&&x.mapping&&{name:"",size:null==O?void 0:O.size,margin:null==O?void 0:O.margin,position:Nw(x)},I=function(t,e,n){for(var r,i,o,a=t.x,s=t.y,l=t.width,u=t.height/wy(e),c=[],h=0,d=Jv(n,(function(t){return t>1?t/100:t})),f=0;f<wy(e);f++){i=s+u*f;var p=[];r=a,h=0;for(var v=0;v<wy(e[f]);v++)o=_g(d)?l/wy(e[0]):l*d[v],r=Fw(a,{left:0,right:0},h,"left"),h+=o,p.push({x:r,y:i,width:o,height:u});c.push(p)}return c}({x:d,y:f+E,height:p-E,width:v},m,b),A=0;A<m.length;A++)for(var P=vp(m[A]),k=0;k<P.length;k++){L=P[k];var B=n?Hw({rowIndex:A,colIndex:k,meta:g,data:L,textStyle:R,textCondition:w}):R,D=I[A][k].width-O.size-("left"===(null==N?void 0:N.position)?O.margin.right:O.margin.left),F={left:[],right:[]};N&&F[N.position].push(N),t.renderTextShape(S(S({},B),{x:0,y:0,maxLines:1,text:L,wordWrapWidth:D}),{shallowRender:!0});var H=t.getActualTextWidth(),z=Rw({bbox:I[A][k],textAlign:B.textAlign,textWidth:H,iconStyle:O,groupedIcons:F}),G=z.textX,W=z.leftIconX,V=z.rightIconX,U=_w(I[A][k],B.textBaseline);if(t.updateTextPosition({x:G,y:U}),x&&n){var j=null===(c=null==x?void 0:x.mapping)||void 0===c?void 0:c.call(x,L,{rowIndex:A,colIndex:k,meta:null==t?void 0:t.getMeta()}),Y="left"===(null==N?void 0:N.position)?W:V,X=Mw(O.size,U,B.fontSize,B.textBaseline);if(j){var q=ww(t,{x:Y,y:X,name:j.icon,width:null==O?void 0:O.size,height:null==O?void 0:O.size,fill:j.fill});t.addConditionIconShape(q)}}}}else Dw(t,m)},Ww=function(t,e){return void 0===e&&(e=1),(null==t?void 0:t.width)*e},Vw=function(t,e){return void 0===e&&(e="\t"),{type:zC.PLAIN,content:Jv(t,(function(t){return t.join(e)})).join("\r\n")}},Uw=function(t){function e(t,e){return t.map((function(t){return"<".concat(e,">").concat(function(t){return(t=Ph(t))&&Fv.test(t)?t.replace(Dv,Bv):t}(t),"</").concat(e,">")})).join("")}var n=function(t,n){return t.map((function(t){return"<".concat(n,">").concat(e(t,"td"),"</").concat(n,">")})).join("")}(t,"tr");return{type:zC.HTML,content:'<meta charset="utf-8"><table><tbody>'.concat(n,"</tbody></table>")}},jw=((bw={})[zC.PLAIN]=Vw,bw[zC.HTML]=Uw,bw);function Yw(t,e,n){return void 0===e&&(e=!1),e?n.getFieldFormatter(t):function(t){return t}}var Xw=function(t){var e,n,r,i,o,a,s=t.rowMatrix,l=t.colMatrix,u=t.dataMatrix,c=t.cornerMatrix,h=null!==(n=null===(e=null==s?void 0:s[0])||void 0===e?void 0:e.length)&&void 0!==n?n:0,d=null!==(r=null==l?void 0:l.length)&&void 0!==r?r:0,f=null!==(o=null===(i=u[0])||void 0===i?void 0:i.length)&&void 0!==o?o:0,p=null!==(a=u.length)&&void 0!==a?a:0,v=h+f,g=d+p,y=Array.from(Array(g),(function(){return new Array(v)}));return y=Jv(y,(function(t,e){return Jv(t,(function(t,n){var r,i;return n>=0&&n<h&&e>=0&&e<d?null!==(i=null===(r=null==c?void 0:c[e])||void 0===r?void 0:r[n])&&void 0!==i?i:"":n>=h&&n<=v&&e>=0&&e<d?l[e][n-h]:n>=0&&n<h&&e>=d&&e<g?null==s?void 0:s[e-d][n]:n>=h&&n<=v&&e>=d&&e<g?u[e-d][n-h]:void 0}))})),y};function qw(t){var e;return null!==(e=Hg(Jv(t,(function(t){return t.length}))))&&void 0!==e?e:0}function Kw(t){var e,n,r=t.spreadsheet.options.interaction,i=t.config,o=i.formatOptions,a=void 0!==o&&o,s=i.separator,l=void 0===s?"\t":s,u=i.selectedCells,c=void 0===u?[]:u,d=i.customTransformer,f=i.isAsyncExport,p=void 0!==f&&f,v=t.isExport,g=r.copy,y=v?function(t){var e,n;return"object"===h(t)?{formatHeader:null!==(e=t.formatHeader)&&void 0!==e&&e,formatData:null!==(n=t.formatData)&&void 0!==n&&n}:{formatHeader:null!=t&&t,formatData:null!=t&&t}}(a):{formatData:null!==(e=null==g?void 0:g.withFormat)&&void 0!==e&&e,formatHeader:null!==(n=null==g?void 0:g.withFormat)&&void 0!==n&&n},m=y.formatData,C=y.formatHeader,w=function(t){var e;if(!t)return jw;var n=t(jw);return(e={})[zC.PLAIN]=n[zC.PLAIN]||jw[zC.PLAIN],e[zC.HTML]=n[zC.HTML]||jw[zC.HTML],e}(v?d:null==g?void 0:g.customTransformer);return{separator:l,selectedCells:c,transformers:w,formatData:m,formatHeader:C,isAsyncExport:p}}function Zw(t,e){return!(!t||!e)&&String(t).toLowerCase()===String(e).toLowerCase()}var $w=function(t){return/\n/.test(t)?'"'.concat(t.replace(/\r\n?/g,"\n").replace(/"/g,"'"),'"'):t};var Qw=function(t,e,n){return void 0===n&&(n=!0),Jv(t,(function(t){return n?e.dataSet.getFieldName(t):t}))},Jw=function(t,e){var n=t.split(NC);return e?n.slice(n.length-e):(n.shift(),n)},tx=function(t,e){return t()?null==e?void 0:e.value:null==e?void 0:e.field},ex=function(t){return t.filter((function(t){return t.type===hm.COL_CELL}))},nx=function(t){return t.filter((function(t){return t.type===hm.ROW_CELL}))},rx=function(){function t(t){var e=this;this.matrixHtmlTransformer=function(t){return e.config.transformers[zC.HTML](t)};var n=t.spreadsheet,r=t.isExport,i=void 0!==r&&r,o=t.config;this.spreadsheet=n,this.config=Kw({config:o,spreadsheet:n,isExport:i})}return t.prototype.getHeaderNodeMatrix=function(t){var e=this.config.formatHeader;return Qw(Jw(t.id),t.spreadsheet,e)},t.prototype.matrixPlainTextTransformer=function(t,e){return this.config.transformers[zC.PLAIN](t,e)},t.prototype.matrixTransformer=function(t,e){return void 0===e&&(e="\t"),[this.matrixPlainTextTransformer(t,e),this.matrixHtmlTransformer(t)]},t}(),ix=function(t){function e(e){var n=t.call(this,e)||this;return n.leafRowNodes=[],n.leafColNodes=[],n.compatibleHideMeasureColumn=function(){var t,e,r,i,o;return(null===(i=null===(r=null===(e=n.spreadsheet.options)||void 0===e?void 0:e.style)||void 0===r?void 0:r.colCell)||void 0===i?void 0:i.hideValue)&&n.spreadsheet.isValueInCols()?((t={})[Kl]=null===(o=n.spreadsheet.dataCfg.fields.values)||void 0===o?void 0:o[0],t):{}},n.getDataMatrixByHeaderNode=function(){var t=n.compatibleHideMeasureColumn();return Jv(n.leafRowNodes,(function(e){return n.leafColNodes.map((function(r){return n.getDataCellValue({rowNode:e,colNode:r,config:{measureQuery:t,isPivotMode:n.spreadsheet.isPivotMode,dataSet:n.spreadsheet.dataSet}})}))}))},n.getDataMatrixByHeaderNodeRIC=function(){var t=[],e=0,r=n.compatibleHideMeasureColumn();return new Promise((function(i,o){try{requestIdleCallback((function o(a){for(var s=n.leafRowNodes.length,l=s>=RC?RC:s;(a.timeRemaining()>0||a.didTimeout)&&e<=s-1&&l>0;)for(var u=e;u<s&&l>0;u++){for(var c=[],h=n.leafRowNodes[u],d=0;d<n.leafColNodes.length;d++){var f=n.leafColNodes[d],p=n.getDataCellValue({rowNode:h,colNode:f,config:{isPivotMode:n.spreadsheet.isPivotMode,dataSet:n.spreadsheet.dataSet,measureQuery:r}});c.push(p)}e=u,t.push(c),l--}e===s-1?i(t):requestIdleCallback(o)}))}catch(a){o(a)}}))},n.getDataCellValue=function(t){var e,r=t.rowNode,i=t.colNode,o=t.config,a=o.isPivotMode,s=o.dataSet,l=o.measureQuery,u=s.getCellData({query:S(S(S({},r.query),i.query),l),rowNode:r,isTotals:r.isTotals||r.isTotalMeasure||i.isTotals||i.isTotalMeasure}),c=n.spreadsheet.isValueInCols()?i:r,h=null!==(e=tx(a,c))&&void 0!==e?e:"",d=n.spreadsheet.dataCfg.fields.values,f=Yw(null!=(h=(null==d?void 0:d.includes(h))?h:null==d?void 0:d[0])?h:i.field,n.config.formatData,s),p=null==u?void 0:u[ql],v=Jh(null==p?void 0:p.values)?"":p;return f(null!=v?v:"")},n.getCustomRowCornerMatrix=function(t){var e=qw(null!=t?t:[]),r=n.spreadsheet.facet.getCornerNodes(),i=Ey(r,(function(t){return t.cornerType===HC.Col?0:1}));return n.spreadsheet.isHierarchyTreeType()?Jv(i,(function(t){var n=new Array(e).fill("");return n[e-1]=t.value,n})):Object.values(og(i,"y")).map((function(t){var n=new Array(e-t.length).fill(""),r=t.map((function(t){return t.value}));return O(O([],R(n),!1),R(r),!1)}))},n.getCornerMatrix=function(t){if(n.spreadsheet.isCustomRowFields())return n.getCustomRowCornerMatrix(t);var e=n.spreadsheet.dataCfg.fields,r=e.columns,i=void 0===r?[]:r,o=e.rows,a=void 0===o?[]:o,s=O(O([],R(i),!1),[""],!1),l=n.spreadsheet.isHierarchyTreeType()?qw(null!=t?t:[]):a.length,u=function(t,e,n){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&kc(t,e,n)?(e=0,n=r):(e=null==e?0:Fu(e),n=void 0===n?r:Fu(n)),td(t,e,n)):[]}(a,0,l);return Jv(s,(function(t,e){return Jv(u,(function(r,i){return e===s.length-1?n.spreadsheet.dataSet.getFieldName(r):i===l-1?n.spreadsheet.dataSet.getFieldName(t):""}))}))},n.getDataMatrixByDataCell=function(t){var e=n.spreadsheet.options.interaction.copy,r=n.compatibleHideMeasureColumn(),i=Jv(t,(function(t){return Jv(t,(function(t){var e=R(ux(t,n.spreadsheet),2),i=e[0],o=e[1],a=n.getDataCellValue({rowNode:i,colNode:o,config:{isPivotMode:n.spreadsheet.isPivotMode,dataSet:n.spreadsheet.dataSet,measureQuery:r}});return $w(a)}))}));if(!(null==e?void 0:e.withHeader))return n.matrixTransformer(i,n.config.separator);var o=n.getRowMatrix(),a=n.getColMatrix();return n.matrixTransformer(Xw({rowMatrix:o,colMatrix:a,dataMatrix:i}),n.config.separator)},n.getAsyncAllPivotCopyData=function(){return L(n,void 0,void 0,(function(){var t,e,n,r;return _(this,(function(i){switch(i.label){case 0:return t=this.getRowMatrix(),e=this.getColMatrix(),n=this.getCornerMatrix(t),r=[],this.config.isAsyncExport?[4,this.getDataMatrixByHeaderNodeRIC()]:[3,2];case 1:return r=i.sent(),[3,4];case 2:return[4,Promise.resolve(this.getDataMatrixByHeaderNode())];case 3:r=i.sent(),i.label=4;case 4:return[2,this.matrixTransformer(Xw({rowMatrix:t,colMatrix:e,dataMatrix:r,cornerMatrix:n}),this.config.separator)]}}))}))},n.getPivotAllCopyData=function(){var t=n.getRowMatrix(),e=n.getColMatrix(),r=n.getCornerMatrix(t),i=n.getDataMatrixByHeaderNode();return n.matrixTransformer(Xw({rowMatrix:t,colMatrix:e,dataMatrix:i,cornerMatrix:r}),n.config.separator)},n.leafRowNodes=n.getLeafRowNodes(),n.leafColNodes=n.getLeafColNodes(),n}return E(e,t),e.prototype.getHeaderNodeMatrix=function(e){return this.config.formatHeader?(n=[],function t(e){var r,i,o,a;if(e.id!==OC){var s=null===(o=null===(i=null===(r=e.spreadsheet)||void 0===r?void 0:r.dataSet)||void 0===i?void 0:i.getFieldFormatter)||void 0===o?void 0:o.call(i,e.field),l=null!==(a=null==s?void 0:s(e.value))&&void 0!==a?a:e.value;return n.unshift(l),(null==e?void 0:e.parent)?t(e.parent):void 0}}(e),n):t.prototype.getHeaderNodeMatrix.call(this,e);var n},e.prototype.getLeafRowNodes=function(){var t=this.spreadsheet.facet.getRowLeafNodes(),e=nx(this.config.selectedCells),n=this.spreadsheet.isHierarchyTreeType();return _g(e)?t:this.getSelectedNode(e,t,n)},e.prototype.getLeafColNodes=function(){var t=this.spreadsheet.facet.getColLeafNodes(),e=ex(this.config.selectedCells);return _g(e)?t:this.getSelectedNode(e,t)},e.prototype.getSelectedNode=function(t,e,n){return void 0===n&&(n=!1),t.reduce((function(t,r){var i=e.filter((function(t){return n?t.id===r.id:t.id.startsWith(r.id)}));return t.push.apply(t,O([],R(i),!1)),t}),[])},e.prototype.getColMatrix=function(){var t=this;return By.apply(void 0,O([],R(Jv(this.leafColNodes,(function(e){return t.getHeaderNodeMatrix(e)}))),!1))},e.prototype.getRowMatrix=function(){var t,e,n=this,r=Jv(this.leafRowNodes,(function(t){return n.getHeaderNodeMatrix(t)}));return e=qw(t=r),Jv(t,(function(t){var n=e-t.length;return n?O(O([],R(t),!1),R(new Array(n).fill("")),!1):t}))},e.prototype.getPivotCopyData=function(){var t=this.spreadsheet.options.interaction.copy,e=this.getDataMatrixByHeaderNode();if(!(null==t?void 0:t.withHeader))return this.matrixTransformer(e,this.config.separator);var n=this.getRowMatrix(),r=this.getColMatrix();return this.matrixTransformer(Xw({rowMatrix:n,colMatrix:r,dataMatrix:e}),this.config.separator)},e}(rx);var ox=function(t){var e=t.spreadsheet,n=t.selectedCells,r=t.headerSelectedCells;return new ix({spreadsheet:e,config:{selectedCells:r,formatOptions:!0}}).getDataMatrixByDataCell(n)};function ax(t){var e,n=function(t){var e=new Set;return kv(t,(function(t){var n=t.getMeta().level;e.has(n)||e.add(n)})),e}(t),r=null!==(e=Hg(Array.from(n)))&&void 0!==e?e:0,i=function(t,e){return Vv(t,(function(t){var n=t.getMeta(),r=n.level===e,i=n.isTotals&&_g(n.children);return r||i}))}(t,r),o=t[0].cellType===hm.COL_CELL,a=function(t,e,n){return Jv(t,(function(t){var r=t.getMeta(),i=r.id,o=r.value,a=r.isTotals,s=r.level,l=r.spreadsheet,u=i;return a&&s!==e&&(u=i+NC+my(o,e-s)),Qw(Jw(u,n.size),l)}))}(i,r,n),s=o?By.apply(void 0,O([],R(a),!1)):a;return[Vw(s),Uw(s)]}var sx=function(t){function e(e){var n=t.call(this,e)||this;return n.getValueFromMeta=function(t){var e,r=R(ux(t,n.spreadsheet),2)[1],i=tx(n.spreadsheet.isPivotMode,r),o=n.isSeriesNumberField(i)?t.rowIndex+1:null===(e=n.displayData[t.rowIndex])||void 0===e?void 0:e[i];return Yw(i,n.config.formatData,n.spreadsheet.dataSet)(o)},n.displayData=n.getSelectedDisplayData(),n.columnNodes=n.getSelectedColNodes(),n}return E(e,t),e.prototype.getHeaderNodeMatrix=function(e){return t.prototype.getHeaderNodeMatrix.call(this,e)},e.prototype.getSelectedColNodes=function(){var t=ex(this.config.selectedCells),e=this.spreadsheet.facet.getColLeafNodes();return 0===t.length?e:Jv(t,(function(t){return e[t.colIndex]}))},e.prototype.getSelectedDisplayData=function(){var t=nx(this.config.selectedCells),e=this.spreadsheet.dataSet.getDisplayDataSet();return 0===t.length?e:Jv(t,(function(t){return e[t.rowIndex]}))},e.prototype.getDataMatrix=function(){var t=this,e=this.spreadsheet.options.seriesNumber;return this.displayData.map((function(n,r){return t.columnNodes.map((function(i){var o=null==i?void 0:i.field;return tu===o&&(null==e?void 0:e.enable)?(r+1).toString():Yw(o,t.config.formatData,t.spreadsheet.dataSet)(null==n?void 0:n[o])}))}))},e.prototype.getDataMatrixRIC=function(){var t=this,e=this.spreadsheet.options.seriesNumber,n=[],r=0;return new Promise((function(i,o){try{requestIdleCallback((function o(a){for(var s=t.displayData.length,l=s>=RC?RC:s;(a.timeRemaining()>0||a.didTimeout)&&r<=s-1&&l>0;)for(var u=r;u<s&&l>0;u++){for(var c=t.displayData[u],h=[],d=0;d<t.columnNodes.length;d++){var f=t.columnNodes[d].field;if(tu===f&&(null==e?void 0:e.enable))h.push((u+1).toString());else{var p=Yw(f,t.config.formatData,t.spreadsheet.dataSet)(c[f]);h.push(p)}}r=u,n.push(h),l--}r===s-1?i(n):requestIdleCallback(o)}))}catch(a){o(a)}}))},e.prototype.isSeriesNumberField=function(t){var e=this.spreadsheet.options.seriesNumber;return tu===t&&(null==e?void 0:e.enable)},e.prototype.getColMatrix=function(){var t=this;return By.apply(void 0,O([],R(this.columnNodes.map((function(e){var n=t.getHeaderNodeMatrix(e);return t.isSeriesNumberField(e.field)?[rm()]:n}))),!1))},e.prototype.getDataMatrixByDataCell=function(t){var e=this,n=this.spreadsheet.options.interaction.copy,r=Jv(t,(function(t){return Jv(t,(function(t){return $w(e.getValueFromMeta(t))}))}));if(!(null==n?void 0:n.withHeader))return this.matrixTransformer(r,this.config.separator);var i=this.getColMatrix();return this.matrixTransformer(Xw({colMatrix:i,dataMatrix:r}),this.config.separator)},e.prototype.processSelectedTable=function(t){void 0===t&&(t=!1);var e=this.getDataMatrix();if(!t)return this.matrixTransformer(e,this.config.separator);var n=this.getColMatrix();return this.matrixTransformer(Xw({colMatrix:n,dataMatrix:e}),this.config.separator)},e.prototype.asyncProcessSelectedTable=function(t){return void 0===t&&(t=!1),L(this,void 0,void 0,(function(){var e,n,r;return _(this,(function(i){switch(i.label){case 0:return this.config.isAsyncExport?[4,this.getDataMatrixRIC()]:[3,2];case 1:return n=i.sent(),[3,4];case 2:return[4,Promise.resolve(this.getDataMatrix())];case 3:n=i.sent(),i.label=4;case 4:return e=n,t?(r=this.getColMatrix(),[2,this.matrixTransformer(Xw({colMatrix:r,dataMatrix:e}),this.config.separator)]):[2,this.matrixTransformer(e,this.config.separator)]}}))}))},e}(rx),lx=function(t){var e=t.spreadsheet,n=t.selectedCells,r=t.headerSelectedCells;return new sx({spreadsheet:e,config:{selectedCells:r,formatOptions:!0}}).getDataMatrixByDataCell(n)},ux=function(t,e){var n=t.rowIndex,r=t.colIndex,i=e.facet;return[i.getRowNodeByIndex(n),i.getColNodeByIndex(r)]},cx=function(t,e){return t.isPivotMode()?function(t,e){return new ix({spreadsheet:t,config:{selectedCells:e}}).getPivotCopyData()}(t,e):function(t,e){return new sx({spreadsheet:t,config:{selectedCells:e}}).processSelectedTable()}(t,e)};function hx(t,e){var n,r=ex(e),i=nx(e);if(t.interaction.getCurrentStateName()===cm.ALL_SELECTED)n=cx(t,[]);else if(r.length)n=cx(t,r);else if(i.length)n=cx(t,i);else{if(!e.length)return[{type:zC.PLAIN,content:""},{type:zC.HTML,content:""}];var o=function(t){if(!(null==t?void 0:t.length))return[];var e=R([{row:1/0,col:1/0},{row:0,col:0}],2),n=e[0],r=e[1];t.forEach((function(t){var e=t.rowIndex,i=t.colIndex;n.col=Math.min(i,n.col),n.row=Math.min(e,n.row),r.col=Math.max(i,r.col),r.row=Math.max(e,r.row)}));var i=R([r.row-n.row+1,r.col-n.col+1],2),o=i[0],a=i[1],s=new Array(o).fill("").map((function(){return new Array(a).fill("")}));return t.forEach((function(t){var e=t.rowIndex,r=t.colIndex,i=R([e-n.row,r-n.col],2),o=i[0],a=i[1];s[o][a]=t})),s}(e),a=o[0].map((function(t){var e;return S(S({},t),{id:(null==t?void 0:t.colId)||Iv(null===(e=null==t?void 0:t.id)||void 0===e?void 0:e.split("-"))||"",type:hm.COL_CELL})})),s=o.map((function(t){var e,n,r;return S(S({},t[0]),{id:(null===(e=t[0])||void 0===e?void 0:e.rowId)||$v(null===(r=null===(n=t[0])||void 0===n?void 0:n.id)||void 0===r?void 0:r.split("-"))||"",type:hm.ROW_CELL})}));n=function(t,e,n,r){return r.isPivotMode()?ox({spreadsheet:r,selectedCells:t,headerSelectedCells:mp(e,n)}):lx({spreadsheet:r,selectedCells:t,headerSelectedCells:e})}(o,a,s,t)}return n}var dx,fx=function(t){var e,n=t.interaction,r=n.getState().cells||[],i=null!==(e=n.getInteractedCells())&&void 0!==e?e:[],o=function(t){return!_g(t)&&Gv(t,(function(t){return t.cellType===hm.ROW_CELL||t.cellType===hm.COL_CELL}))}(i),a=o?ax(i):hx(t,r);return a&&vx(a),a},px=function(t){return new Promise((function(e,n){var r;r=Array.isArray(t)?Hh(t.filter((function(t){return t.type===zC.PLAIN})),"[0].content",""):t.content||"";var i=document.createElement("textarea");i.value=r,document.body.appendChild(i),i.focus({preventScroll:!0}),i.select();var o=document.execCommand("copy");document.body.removeChild(i),o?e():n()}))},vx=function(t,e){var n;return void 0===e&&(e=!1),n="string"==typeof t?{content:t,type:zC.PLAIN}:t,navigator.clipboard&&window.ClipboardItem&&!e?function(t){return navigator.clipboard.write([new ClipboardItem(mp(t).reduce((function(t,e){var n,r=e.type,i=e.content.replace(/\x00/g,"");return S(S({},t),((n={})[r]=new Blob([i],{type:r}),n))}),{}))]).catch((function(){return px(t)}))}(n):px(n)},gx=function(t){return t&&"appendInfo"in t?t.appendInfo:{}},yx=function(t,e,n){var r,i=t.split(NC);if(n)r=[t];else{r=[hw(i[0],i[1])];for(var o=2;o<i.length;o+=1)r.push(hw(r[o-2],i[o]))}var a=Vv(e,(function(t){var e;return r.includes(null===(e=t.getMeta())||void 0===e?void 0:e.id)}));return a},mx=function(t){function e(e,n){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];var o=t.call(this,{})||this;return o.textShapes=[],o.conditionIconShapes=[],o.stateShapes=new Map,o.meta=e,o.spreadsheet=n,o.theme=n.theme,o.conditions=o.spreadsheet.options.conditions,o.groupedIcons={left:[],right:[]},o.handleRestOptions.apply(o,O([],R(r),!1)),o.shouldInit()&&o.initCell(),o}return E(e,t),e.prototype.handleRestOptions=function(){},e.prototype.getMeta=function(){return this.meta},e.prototype.setMeta=function(t){this.meta=t},e.prototype.getIconStyle=function(){var t;return null===(t=this.theme[this.cellType])||void 0===t?void 0:t.icon},e.prototype.isShallowRender=function(){return!1},e.prototype.getCellTextWordWrapStyle=function(t){var e,n,r=(null===(n=null===(e=this.spreadsheet.options)||void 0===e?void 0:e.style)||void 0===n?void 0:n[t||this.cellType])||{};return{wordWrap:r.wordWrap,maxLines:r.maxLines,textOverflow:r.textOverflow}},e.prototype.getActualText=function(){return this.actualText},e.prototype.getActualTextWidth=function(){var t;return(null===(t=this.textShape)||void 0===t?void 0:t.getComputedTextLength())||0},e.prototype.getActualTextHeight=function(){return this.getMultiLineActualTextHeight()},e.prototype.getMultiLineActualTexts=function(){var t,e;return(null===(e=null===(t=this.textShape)||void 0===t?void 0:t.parsedStyle.metrics)||void 0===e?void 0:e.lines)||[]},e.prototype.getMultiLineActualTextWidth=function(){return Ty(this.getTextLineBoundingRects(),"width")||0},e.prototype.getMultiLineActualTextHeight=function(){return Ty(this.getTextLineBoundingRects(),"height")||0},e.prototype.getOriginalText=function(){return this.originalText},e.prototype.isTextOverflowing=function(){var t;return null===(t=this.textShape)||void 0===t?void 0:t.isOverflowing()},e.prototype.isMultiLineText=function(){return this.getTextLineBoundingRects().length>1},e.prototype.getEmptyPlaceholder=function(){var t=this.spreadsheet.options.placeholder;return zw(this,t)},e.prototype.getTextLineBoundingRects=function(){var t;return(null===(t=this.textShape)||void 0===t?void 0:t.getLineBoundingRects())||[]},e.prototype.getFieldValue=function(){return this.getFormattedFieldValue().formattedValue},e.prototype.shouldInit=function(){var t=this.meta,e=t.width,n=t.height;return e>0&&n>0},e.prototype.getStyle=function(t){return Hh(this.theme,t||this.cellType)},e.prototype.getLinkFieldShape=function(){return this.linkFieldShape},e.prototype.getBackgroundShape=function(){return this.backgroundShape},e.prototype.getStateShapes=function(){return this.stateShapes},e.prototype.getResizeAreaStyle=function(){return this.getStyle("resizeArea")},e.prototype.shouldDrawResizeAreaByType=function(t,e){var n=this.spreadsheet.options.interaction.resize;return Eg(n)?n:Uu(null==n?void 0:n.visible)?null==n?void 0:n.visible(e):null==n?void 0:n[t]},e.prototype.getBBoxByType=function(t){void 0===t&&(t=DC.BORDER_BOX);var e={x:this.meta.x,y:this.meta.y,height:this.meta.height,width:this.meta.width},n=this.getStyle()||this.theme.dataCell;return function(t,e,n,r){if(r===DC.BORDER_BOX)return t;var i=t.x,o=t.y,a=t.width,s=t.height,l=n.padding,u=n.horizontalBorderWidth,c=void 0===u?0:u,h=n.verticalBorderWidth,d=void 0===h?0:h;return e.forEach((function(t){var e=[BC.BOTTOM,BC.TOP].includes(t)?c:d;switch(t){case BC.TOP:o+=e,s-=e;break;case BC.BOTTOM:s-=e;break;case BC.LEFT:i+=e,a-=e;break;default:a-=e}})),r===DC.CONTENT_BOX&&(i+=null==l?void 0:l.left,o+=null==l?void 0:l.top,a-=(null==l?void 0:l.left)+(null==l?void 0:l.right),s-=(null==l?void 0:l.top)+(null==l?void 0:l.bottom)),{x:i,y:o,width:a,height:s}}(e,this.getBorderPositions(),null==n?void 0:n.cell,t)},e.prototype.drawBorders=function(){var t=this;this.getBorderPositions().forEach((function(e){var n,r=Ow(e,t.getBBoxByType(),null===(n=t.getStyle())||void 0===n?void 0:n.cell),i=r.position,o=r.style;mw(t,S(S({},i),o))}))},e.prototype.drawInteractiveBorderShape=function(){this.stateShapes.set("interactiveBorderShape",gw(this,S(S({},this.getBBoxByType(DC.PADDING_BOX)),{visibility:"hidden",pointerEvents:"none"})))},e.prototype.drawInteractiveBgShape=function(){this.stateShapes.set("interactiveBgShape",gw(this,S(S({},this.getBBoxByType()),{visibility:"hidden",pointerEvents:"none"})))},e.prototype.drawBackgroundShape=function(){var t=this.getBackgroundColor(),e=t.backgroundColor,n=t.backgroundColorOpacity;this.backgroundShape=gw(this,S(S({},this.getBBoxByType()),{fill:e,fillOpacity:n}))},e.prototype.renderTextShape=function(t,e){var n=function(t,e){var n=null!=e?e:"-";return Og(t)||""===t||t===eu?n:"".concat(t)}(t.text,this.getEmptyPlaceholder()),r=(null==e?void 0:e.shallowRender)||this.isShallowRender();if(this.textShape=function(t){var e=t.group,n=t.textShape,r=t.style,i=t.appendInfo;return n&&e&&e.contains(n)&&e.removeChild(n),null==e?void 0:e.appendChild(new vw({style:S({fontVariant:"normal",fontStyle:"normal",lineWidth:1},r)},i||{}))}({group:this,textShape:r?void 0:this.textShape,style:S(S({},t),{text:n})}),this.addTextShape(this.textShape),r)return this.textShape;var i=this.getMultiLineActualTexts().join("");return this.actualText=i,this.originalText=n,this.textShape},e.prototype.updateTextPosition=function(t){var e,n,r,i,o=this.getTextPosition();null===(e=this.textShape)||void 0===e||e.attr("x",null!==(n=null==t?void 0:t.x)&&void 0!==n?n:null==o?void 0:o.x),null===(r=this.textShape)||void 0===r||r.attr("y",null!==(i=null==t?void 0:t.y)&&void 0!==i?i:null==o?void 0:o.y)},e.prototype.drawTextShape=function(){var t=Math.max(this.getMaxTextWidth(),0),e=this.getTextStyle();this.renderTextShape(S(S({},e),{x:0,y:0,text:this.getFieldValue(),wordWrapWidth:t})),this.isShallowRender()||this.updateTextPosition()},e.prototype.drawLinkFieldShape=function(t,e){if(t){if(!qC(this.spreadsheet.options.device)){var n=this.getTextStyle(),r=this.getTextPosition(),i=this.getActualTextWidth(),o=r.x;"center"===n.textAlign?o-=i/2:"right"===n.textAlign&&(o-=i);var a=this.textShape.getBBox().bottom;this.linkFieldShape=mw(this,{x1:o,y1:a+1,x2:o+i,y2:a+1,stroke:e,lineWidth:1})}this.textShape.style.fill=e,this.textShape.style.cursor="pointer",this.textShape.appendInfo={isLinkFieldText:!0,cellData:this.meta}}},e.prototype.getLinkFieldStyle=function(){return this.getTextStyle().linkTextFill},e.prototype.drawLinkField=function(t){var e=this.spreadsheet.options.interaction.linkFields,n=void 0===e?[]:e,r=this.getLinkFieldStyle(),i=function(t,e){return"function"==typeof t?t(e):t.some((function(t){return t===e.field||t===e.id||t===e.valueField}))}(n,t);this.drawLinkFieldShape(i,r)},e.prototype.updateByState=function(t,e){var n=this;this.spreadsheet.interaction.setInteractedCells(e),kv(Hh(this.theme,"".concat(this.cellType,".cell.interactionState.").concat(t)),(function(t,e){var r=ch(function(t,e){if(null==t)return{};var n=Cu(df(t),(function(t){return[t]}));return e=uv(e),Xg(t,n,(function(t,n){return e(t,n[0])}))}(mm,(function(t){return yg(t,e)})));r.forEach((function(r){var i=n.stateShapes.has(r),o=i?n.stateShapes.get(r):n[r],a=wu(o)?o:[o];(i&&a.forEach((function(t){t.setAttribute("visibility","visible")})),"interactiveBorderShape"===r&&"borderWidth"===e)&&(Rg(t)&&kv(n.getInteractiveBorderShapeStyle(t),(function(t,e){Cw(a,e,t)})));Cw(a,ym[e],t)}))}))},e.prototype.getInteractiveBorderShapeStyle=function(t){var e=this.getBBoxByType(DC.PADDING_BOX),n=e.x,r=e.y,i=e.height,o=t/2;return{x:n+o,y:r+o,width:e.width-t,height:i-t}},e.prototype.hideInteractionShape=function(){this.stateShapes.forEach((function(t){Cw(t,ym.backgroundOpacity,0),Cw(t,ym.backgroundColor,"transparent"),Cw(t,ym.borderOpacity,0),Cw(t,ym.borderWidth,1),Cw(t,ym.borderColor,"transparent")}))},e.prototype.clearUnselectedState=function(){Cw(this.backgroundShape,ym.backgroundOpacity,1),Cw(this.textShapes,ym.textOpacity,1),Cw(this.linkFieldShape,ym.opacity,1)},e.prototype.getTextShape=function(){return this.textShape},e.prototype.getTextShapes=function(){return this.textShapes||[this.textShape]},e.prototype.addTextShape=function(t){t&&this.textShapes.push(t)},e.prototype.getConditionIconShape=function(){return this.conditionIconShape},e.prototype.getConditionIconShapes=function(){return this.conditionIconShapes||[this.conditionIconShape]},e.prototype.addConditionIconShape=function(t){t&&this.conditionIconShapes.push(t)},e.prototype.resetTextAndConditionIconShapes=function(){this.textShapes=[],this.conditionIconShapes=[]},Object.defineProperty(e.prototype,"cellConditions",{get:function(){return this.conditions},enumerable:!1,configurable:!0}),e.prototype.drawConditionIconShapes=function(){var t=this.getIconConditionResult();if(t){var e=this.getIconPosition(),n=this.getStyle().icon.size;this.conditionIconShape=ww(this,S(S({},e),{name:null==t?void 0:t.name,width:n,height:n,fill:null==t?void 0:t.fill})),this.addConditionIconShape(this.conditionIconShape)}},e.prototype.getTextConditionMappingResult=function(){var t,e=this.findFieldCondition(null===(t=this.conditions)||void 0===t?void 0:t.text);return(null==e?void 0:e.mapping)?this.mappingValue(e):null},e.prototype.getContainConditionMappingResultTextStyle=function(t){var e=this.getDefaultTextFill(t.fill),n=this.getTextConditionMappingResult();return S(S(S({},t),n),{fill:(null==n?void 0:n.fill)||e})},e.prototype.getDefaultTextFill=function(t){var e=this.getBackgroundColor(),n=e.backgroundColor,r=e.intelligentReverseTextColor;return vC(n)&&t===am&&r&&(t=sm),t||""},e.prototype.getBackgroundConditionFill=function(){var t,e=this.findFieldCondition(null===(t=this.conditions)||void 0===t?void 0:t.background);if(null==e?void 0:e.mapping){var n=this.mappingValue(e);if(n)return{backgroundColor:n.fill,intelligentReverseTextColor:n.intelligentReverseTextColor||!1}}return{intelligentReverseTextColor:!1}},e.prototype.getIconConditionResult=function(){var t,e=this.findFieldCondition(null===(t=this.conditions)||void 0===t?void 0:t.icon);if(null==e?void 0:e.mapping){var n=this.mappingValue(e);if(n&&n.icon)return{name:n.icon,position:Nw(e),fill:n.fill,isConditionIcon:!0}}},e.prototype.getActionAndConditionIconWidth=function(t){var e=this.groupedIcons,n=e.left,r=e.right,i=this.getStyle().icon;return t?Sw(this.groupedIcons[t],i):Sw(n,i)+Sw(r,i)},e.prototype.getCrossBackgroundColor=function(t){var e=this.getStyle().cell,n=e.crossBackgroundColor,r=e.backgroundColorOpacity;return n&&t%2==0?{backgroundColorOpacity:r,backgroundColor:n}:{backgroundColorOpacity:r,backgroundColor:this.getStyle().cell.backgroundColor}},e}(ys),Cx=function(){function t(t,e){this.raw=t,this.extraField=e}return t.getCellData=function(e,n){return new t(e,n)},t.getCellDataList=function(e,n){return n.map((function(n){return t.getCellData(e,n)}))},t.getFieldValue=function(e,n){return void 0===n&&(n=""),e instanceof t?n?e.getValueByField(n):e[Zl]:null==e?void 0:e[n]},Object.defineProperty(t.prototype,Zl,{get:function(){return this.raw},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,Kl,{get:function(){return this.extraField},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,ql,{get:function(){return this.raw[this.extraField]},enumerable:!1,configurable:!0}),t.prototype.getValueByField=function(t){return t===ql||t===Kl?this[t]:this.raw[t]},t}(),wx=function(t,e){var n=e.getMeta().id;return t.some((function(t){return Mg(t.id,n)}))},xx=function(t,e){return"".concat(t).concat("-").concat(e)},bx=function(t){return t.type===hm.DATA_CELL},Ex=function(t,e,n){var r,i=n.interaction.getSelectedCellHighlight(),o=i.rowHeader,a=i.colHeader,s=i.currentRow,l=i.currentCol,u=e.cellType===hm.ROW_CELL,c=n.isTableMode()&&(null===(r=n.options.seriesNumber)||void 0===r?void 0:r.enable)&&o&&u;(s||c)&&function(t,e){kv(t,(function(t){bx(t)&&t.rowIndex===e.getMeta().rowIndex&&e.updateByState(cm.SELECTED)}))}(t,e),l&&function(t,e){kv(t,(function(t){bx(t)&&t.colIndex===e.getMeta().colIndex&&e.updateByState(cm.SELECTED)}))}(t,e),(o||a)&&function(t,e){kv(t,(function(t){bx(t)&&t.rowIndex===e.getMeta().rowIndex&&t.colIndex===e.getMeta().colIndex&&e.updateByState(cm.SELECTED)}))}(t,e)},Sx=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return E(e,t),Object.defineProperty(e.prototype,"cellType",{get:function(){return hm.DATA_CELL},enumerable:!1,configurable:!0}),e.prototype.isMultiData=function(){return Mu(this.getFieldValue())},e.prototype.isChartData=function(){var t=this.getFieldValue();return Jh(null==t?void 0:t.values)},e.prototype.getRenderChartData=function(){var t=this.meta.fieldValue;return null==t?void 0:t.values},e.prototype.getRenderChartOptions=function(){var t=this.getRenderChartData(),e=this.getBBoxByType(DC.CONTENT_BOX),n=this.spreadsheet.getThemeName();return S(S({autoFit:!0,theme:{type:xC[n]}},e),t)},e.prototype.getBorderPositions=function(){return[BC.BOTTOM,BC.RIGHT]},Object.defineProperty(e.prototype,"valueRangeByField",{get:function(){return this.spreadsheet.dataSet.getValueRangeByField(this.meta.valueField)},enumerable:!1,configurable:!0}),e.prototype.handleByStateName=function(t,e){wx(t,this)&&this.updateByState(e)},e.prototype.handleSearchResult=function(t){wx(t,this)&&(Xv(t,(function(t){return null==t?void 0:t.isTarget})).id===this.getMeta().id?this.updateByState(cm.HIGHLIGHT):this.updateByState(cm.SEARCH_RESULT))},e.prototype.handleSelect=function(t){var e,n;switch(null===(e=null==t?void 0:t[0])||void 0===e?void 0:e.type){case hm.COL_CELL:this.changeRowColSelectState("colIndex");break;case hm.ROW_CELL:this.changeRowColSelectState("rowIndex");break;case hm.DATA_CELL:!function(t){var e=t.interaction.getSelectedCellHighlight(),n=e.currentRow,r=e.currentCol,i=e.rowHeader,o=e.colHeader;return n||r||i||o}(this.spreadsheet)?wx(t,this)?this.updateByState(cm.SELECTED):(null===(n=this.spreadsheet.options.interaction)||void 0===n?void 0:n.selectedCellsSpotlight)&&this.updateByState(cm.UNSELECTED):Ex(t,this,this.spreadsheet)}},e.prototype.isDisableHover=function(t){return t.type!==hm.DATA_CELL},e.prototype.handleHover=function(t){var e=$v(t);if(this.isDisableHover(e))this.hideInteractionShape();else{var n=this.spreadsheet.interaction.getHoverHighlight(),r=n.currentRow,i=n.currentCol;if(r||i){var o=this.meta.colIndex,a=this.meta.rowIndex;i&&o===(null==e?void 0:e.colIndex)||r&&a===(null==e?void 0:e.rowIndex)?this.updateByState(cm.HOVER):this.hideInteractionShape()}var s=this.getMeta(),l=s.id,u=s.rowIndex,c=s.colIndex;Mg(e.id,l)&&Mg(e.rowIndex,u)&&Mg(e.colIndex,c)&&this.updateByState(cm.HOVER_FOCUS)}},e.prototype.update=function(){var t=this.spreadsheet.interaction.getCurrentStateName(),e=this.spreadsheet.interaction.getCells();if(t!==cm.ALL_SELECTED){if(!_g(e)&&t)switch(t){case cm.SELECTED:case cm.DATA_CELL_BRUSH_SELECTED:this.handleSelect(e);break;case cm.HOVER_FOCUS:case cm.HOVER:this.handleHover(e);break;case cm.SEARCH_RESULT:this.handleSearchResult(e);break;default:this.handleByStateName(e,t)}}else this.updateByState(cm.SELECTED)},e.prototype.setMeta=function(e){t.prototype.setMeta.call(this,e),this.initCell()},e.prototype.drawTextShape=function(){t.prototype.drawTextShape.call(this),this.isShallowRender()||this.drawLinkField(this.meta)},e.prototype.initCell=function(){this.resetTextAndConditionIconShapes(),this.generateIconConfig(),this.drawBackgroundShape(),this.drawInteractiveBgShape(),this.shouldHideRowSubtotalData()||this.drawConditionIntervalShape(),this.shouldHideRowSubtotalData()||(this.drawTextShape(),this.drawConditionIconShapes()),this.drawBorders(),this.drawInteractiveBorderShape(),this.update()},e.prototype.generateIconConfig=function(){var t,e=this.findFieldCondition(null===(t=this.conditions)||void 0===t?void 0:t.icon),n=e&&e.mapping&&{name:"",position:Nw(e)};this.groupedIcons=Tw([],n)},e.prototype.getTextStyle=function(){var t=this.getCellTextWordWrapStyle(),e=this.meta.isTotals,n=this.theme.dataCell,r=e?null==n?void 0:n.bolderText:null==n?void 0:n.text;return this.getContainConditionMappingResultTextStyle(S(S({},t),r))},e.prototype.drawConditionIntervalShape=function(){this.conditionIntervalShape=kw(this)},e.prototype.shouldHideRowSubtotalData=function(){var t,e,n=this.meta,r=n.rowId,i=n.rowIndex,o=this.spreadsheet.store.get("drillDownIdPathMap");if(null==o?void 0:o.has(r))return!1;var a=(null!==(t=this.spreadsheet.options.totals)&&void 0!==t?t:{}).row,s=void 0===a?{}:a,l=null===(e=this.spreadsheet.facet)||void 0===e?void 0:e.getRowLeafNodeByIndex(i),u=!(null==l?void 0:l.isGrandTotals)&&(null==l?void 0:l.isTotals);return this.spreadsheet.isHierarchyTreeType()&&!s.showSubTotals&&u},e.prototype.getFormattedFieldValue=function(){var t;if(this.shouldHideRowSubtotalData())return{value:null,formattedValue:"-"};var e=this.meta,n=e.rowId,r=e.valueField,i=e.fieldValue,o=e.data,a=e.id,s=null===(t=this.spreadsheet.dataSet.displayFormattedValueMap)||void 0===t?void 0:t.get(a),l=this.spreadsheet.dataSet.getFieldMeta(n)?n:r,u=this.spreadsheet.dataSet.getFieldFormatter(l);return{value:i,formattedValue:null!=s?s:u(i,o,this.meta)}},e.prototype.getMaxTextWidth=function(){return this.getBBoxByType(DC.CONTENT_BOX).width-this.getActionAndConditionIconWidth()},e.prototype.getTextPosition=function(){var t=this.getBBoxByType(DC.CONTENT_BOX),e=this.getTextStyle(),n=this.getIconStyle(),r=Rw({bbox:t,iconStyle:n,textWidth:this.getActualTextWidth(),textAlign:e.textAlign,groupedIcons:this.groupedIcons}),i=r.textX,o=r.leftIconX,a=r.rightIconX,s=_w(t,e.textBaseline),l=Mw(n.size,s,e.fontSize,e.textBaseline);return this.iconPosition={x:_g(this.groupedIcons.left)?a:o,y:l},{x:i,y:s}},e.prototype.getIconPosition=function(){return this.iconPosition},e.prototype.getBackgroundColor=function(){var t=this.getCrossBackgroundColor(this.meta.rowIndex),e=t.backgroundColor,n=t.backgroundColorOpacity;return this.shouldHideRowSubtotalData()?{backgroundColor:e,backgroundColorOpacity:n,intelligentReverseTextColor:!1}:Gg({backgroundColor:e,backgroundColorOpacity:n},this.getBackgroundConditionFill())},e.prototype.changeRowColSelectState=function(t){var e,n=this.spreadsheet.interaction,r=Hh(this.meta,t),i=n.getState(),o=i.nodes,a=void 0===o?[]:o,s=i.cells,l=void 0===s?[]:s,u=!1;this.spreadsheet.isTableMode()&&a.length?u=a[0].hierarchy.getLeaves().some((function(t,e){return!!a.some((function(e){return e===t}))&&e===r})):u=O(O([],R(a),!1),R(l),!1).some((function(e){return Hh(e,t)===r}));u?this.updateByState(cm.SELECTED):(null===(e=this.spreadsheet.options.interaction)||void 0===e?void 0:e.selectedCellsSpotlight)?this.updateByState(cm.UNSELECTED):this.hideInteractionShape()},e.prototype.drawBorders=function(){},e.prototype.findFieldCondition=function(t){var e=this;return void 0===t&&(t=[]),Zv(t,(function(t){return t.field instanceof RegExp?t.field.test(e.meta.valueField):t.field===e.meta.valueField}))},e.prototype.mappingValue=function(t){var e=this.meta.fieldValue,n=this.spreadsheet.isTableMode()?this.spreadsheet.dataSet.getCellData({query:{rowIndex:this.meta.rowIndex}}):Cx.getFieldValue(this.meta.data);return t.mapping(e,n,this)},e.prototype.updateByState=function(e){if(t.prototype.updateByState.call(this,e,this),e===cm.UNSELECTED){var n=Hh(this.theme,"".concat(this.cellType,".cell.interactionState.").concat(e));n&&this.toggleConditionIntervalShapeOpacity(n.opacity)}},e.prototype.clearUnselectedState=function(){t.prototype.clearUnselectedState.call(this),this.toggleConditionIntervalShapeOpacity(1)},e.prototype.toggleConditionIntervalShapeOpacity=function(t){Cw(this.conditionIntervalShape,ym.backgroundOpacity,t),Cw(this.conditionIconShapes,ym.opacity,t)},e}(mx),Tx=function(t){function e(e,n,r){return t.call(this,r,e,n)||this}return E(e,t),Object.defineProperty(e.prototype,"cellType",{get:function(){return hm.MERGED_CELL},enumerable:!1,configurable:!0}),e.prototype.handleRestOptions=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=R(t,1)[0];this.cells=n},e.prototype.update=function(){},e.prototype.initCell=function(){this.resetTextAndConditionIconShapes(),this.drawBackgroundShape(),this.drawTextShape(),this.drawBorders()},e.prototype.drawBackgroundShape=function(){var t,e,n=_x(this.cells),r=this.theme.dataCell.cell;this.backgroundShape=(t=this,e={points:n,fill:r.backgroundColor},null==t?void 0:t.appendChild(new bs({style:e})))},e.prototype.drawTextShape=function(){if(!_g(this.meta))return this.isMultiData()?Gw(this):void t.prototype.drawTextShape.call(this)},e.prototype.drawBorders=function(){var t=this,e=Mx(this.cells),n=e.right,r=e.bottom,i=e.bottomRightCornerCell;n.forEach((function(e){var n,r=Ow(BC.RIGHT,e.getBBoxByType(),null===(n=e.getStyle())||void 0===n?void 0:n.cell),i=r.position,o=r.style;mw(t,S(S({},i),o))})),r.forEach((function(e){var n,r=Ow(BC.BOTTOM,e.getBBoxByType(),null===(n=e.getStyle())||void 0===n?void 0:n.cell),i=r.position,o=r.style;mw(t,S(S({},i),o))})),i.forEach((function(e){var n,r=e.getBBoxByType(),i=r.x,o=r.y,a=r.width,s=r.height,l=null===(n=e.getStyle())||void 0===n?void 0:n.cell,u=l.horizontalBorderWidth,c=void 0===u?0:u,h=l.verticalBorderWidth,d=void 0===h?0:h,f=l.verticalBorderColor,p=i+a-d/2;mw(t,{x1:p,x2:p,y1:o+s-c,y2:o+s,lineWidth:d,stroke:f,strokeOpacity:d})}))},e}(Sx),Lx=function(t,e){return Xv(e,(function(e){return Mg(e[0],t[1])}))},_x=function(t){var e,n,r=[];t.forEach((function(t){var e=t.getMeta(),n=e.x,i=e.y,o=e.width,a=e.height;r=r.concat(function(t,e,n,r){var i=[t,e],o=[t+n,e],a=[t+n,e+r],s=[t,e+r];return[[i,o],[o,a],[a,s],[s,i]]}(n,i,o,a))})),n=[],kv(e=r,(function(t){var r=[t[1],t[0]];JSON.stringify(e).includes(JSON.stringify(r))||n.push(t)}));for(var i=[],o=(r=n)[0],a=o,s=[];!Mg(o,s);)i=i.concat(a),a=s=Lx(a,r);return i},Mx=function(t){var e=[],n=[],r=[];return t.forEach((function(r){var i=R(r.position||[],2),o=i[0],a=i[1];Xv(t,(function(t){var e,n;return(null===(e=t.position)||void 0===e?void 0:e[0])===o+1&&(null===(n=t.position)||void 0===n?void 0:n[1])===a}))||n.push(r),Xv(t,(function(t){var e,n;return(null===(e=t.position)||void 0===e?void 0:e[1])===a+1&&(null===(n=t.position)||void 0===n?void 0:n[0])===o}))||e.push(r)})),e.forEach((function(n){var i=R(n.position||[],2),o=i[0],a=i[1],s=Xv(t,(function(t){var e,n;return(null===(e=t.position)||void 0===e?void 0:e[0])===o-1&&(null===(n=t.position)||void 0===n?void 0:n[1])===a}));s&&!yg(e,s)&&r.push(s)})),{bottom:n,right:e,bottomRightCornerCell:r}},Rx=function(t,e,n){var r;void 0===n&&(n=[]);var i=function(t,e){var n,r=[],i=[];return kv(t,(function(t){var o=Xv(e,(function(e){var n,r=null===(n=null==e?void 0:e.getMeta)||void 0===n?void 0:n.call(e);if((null==r?void 0:r.colIndex)===(null==t?void 0:t.colIndex)&&(null==r?void 0:r.rowIndex)===(null==t?void 0:t.rowIndex))return e}));o?(r.push(o),n=(null==t?void 0:t.showText)?null==o?void 0:o.getMeta():n):i.push(t)})),{cells:r,invisibleCellInfo:i,cellsMeta:n}}(n,t),o=i.cellsMeta,a=i.cells,s=i.invisibleCellInfo,l=o,u=a;if((null==s?void 0:s.length)>0&&s.length<n.length){var c=function(t,e){var n,r=[];return kv(t,(function(t){var i,o,a,s=null===(i=null==e?void 0:e.facet)||void 0===i?void 0:i.getCellMeta(t.rowIndex,t.colIndex);if(s){var l=null===(a=null===(o=null==e?void 0:e.options)||void 0===o?void 0:o.dataCell)||void 0===a?void 0:a.call(o,s);n=(null==t?void 0:t.showText)?s:n,r.push(l)}})),{cells:r,cellsMeta:n}}(s,e),h=c.cells,d=c.cellsMeta;l=l||d,u=a.concat(h)}return _g(a)||l||(l=null===(r=u[0])||void 0===r?void 0:r.getMeta()),{cells:u,viewMeta:l}},Ox=function(t,e,n){return t.options.mergedCell?t.options.mergedCell(t,e,n):new Tx(t,e,n)},Nx=function(t,e,n){var r,i=e||function(t){var e=t.interaction.getActiveCells(),n=[];return kv(e,(function(t,e){var r=t.getMeta(),i=0===e?{showText:!0}:{};n.push(S(S({},i),{colIndex:null==r?void 0:r.colIndex,rowIndex:null==r?void 0:r.rowIndex}))})),n}(t);if((null==i?void 0:i.length)<=1)console.error("then merged cells must be more than one");else{var o=t.facet.getDataCells(),a=Rx(o,t,i),s=a.cells,l=a.viewMeta;if(!_g(s)){var u=(null===(r=t.options)||void 0===r?void 0:r.mergedCellsInfo)||[];u.push(i),t.setOptions({mergedCellsInfo:u});var c=n?void 0:l;t.facet.panelScrollGroup.addMergeCell(Ox(t,s,c))}}},Ix=function(t,e){var n,r,i;if(e&&e.cellType===hm.MERGED_CELL){var o,a,s,l=(o=e,a=(null===(n=t.options)||void 0===n?void 0:n.mergedCellsInfo)||[],s=Jv(o.cells,(function(t){return{colIndex:t.getMeta().colIndex,rowIndex:t.getMeta().rowIndex}})),Vv(a,(function(t){return!Mg(t.map((function(t){return t.showText?{colIndex:t.colIndex,rowIndex:t.rowIndex}:t})),s)})));(null==l?void 0:l.length)!==(null===(i=null===(r=t.options)||void 0===r?void 0:r.mergedCellsInfo)||void 0===i?void 0:i.length)&&(t.setOptions({mergedCellsInfo:l}),e.remove())}else console.error("unmergeCell: the ".concat(e," is not a MergedCell"))},Ax=function(t,e){return Av(t,e,(function(t,e){return Mg(t.viewMeta.id,e.viewMeta.id)}))},Px=function(t,e){var n,r=null===(n=t.options)||void 0===n?void 0:n.mergedCellsInfo;if(!_g(r)){var i=t.facet.getDataCells();if(!_g(i)){var o=[];r.forEach((function(e){var n=Rx(i,t,e);n.cells.length>0&&o.push(n)}));var a=e.children,s=function(t){return Jv(t,(function(t){return{cells:t.cells,viewMeta:t.getMeta()}}))}(a),l=Ax(s,o),u=Ax(o,s);kv(l,(function(t){var e=Xv(a,(function(e){return Mg(e.getMeta().id,t.viewMeta.id)}));null==e||e.remove()})),kv(u,(function(n){var r=n.cells,i=n.viewMeta;e.appendChild(Ox(t,r,i))}))}}};!function(t){t[t.Start=0]="Start",t[t.Center=1]="Center",t[t.End=2]="End"}(dx||(dx={}));var kx=function(t){return["left","top"].includes(t)?dx.Start:["center","middle"].includes(t)?dx.Center:dx.End},Bx=function(t,e,n){var r=n.align,i=n.size,o=n.padding,a=i.textSize,s=i.iconStartSize,l=void 0===s?0:s,u=i.iconEndSize,c=void 0===u?0:u,h=o.betweenTextAndEndIcon,d=void 0===h?0:h;d=c?d:0;var f=a+l+c,p=e.start-o.start,v=p+(e.size+o.start+o.end),g=e.start+e.size,y=t.start+t.size;function m(t){switch(r){case dx.Start:return{iconStart:t.start,textStart:t.start+l,iconEnd:t.start+l+a+d};case dx.Center:var e=t.start+t.size/2-f/2;return{iconStart:e,textStart:e+l+a/2,iconEnd:e+l+a+d};default:var n=t.start+t.size;return{iconStart:n-c-a-l,textStart:n-c,iconEnd:n-c+d}}}if(p>=t.start&&v<=y)return m(e);if(p<t.start&&v<=y){var C={start:t.start+(r!==dx.End?o.start:0),size:e.size-(t.start-e.start)-(r!==dx.End?o.start:0)};return C.size<f&&(C.size=f,C.start=g-f),m(C)}if(p>=t.start&&v>y){var w={start:e.start,size:e.size-(g-y)-(r!==dx.Start?o.end:0)};return w.size<f&&(w.size=f,w.start=e.start),m(w)}var x={start:t.start+o.start,size:t.size-o.start-o.end};if(x.size<f){var b=e.start+e.size/2-f/2,E=b+f;b>x.start||(E>x.start+x.size?x.start=b:x.start-=f-x.size),x.size=f}return m(x)},Dx=function(t,e){return e>0&&t<e},Fx=function(t,e,n){return e>0&&t>=n-e},Hx=function(t,e,n){return n>0&&t<e+n},zx=function(t,e,n){return n>0&&t>=e+1-n},Gx=function(t){var e=t.scrollX,n=t.scrollY,r=t.widths,i=t.heights,o=t.viewport,a=t.rowRemainWidth,s=Yv(r,(function(t,n){var i=e-(Og(a)?0:a)+o.x;return i>=t&&i<r[n+1]}),0);s=Math.max(s,0);var l=Yv(r,(function(t,n){var i=o.width+e+o.x;return i>=t&&i<r[n+1]}),s);l=Math.min(-1===l?1/0:l,r.length-2);var u=i.getIndexRange(n+o.y,o.height+n+o.y);return[s,l,u.start,u.end]},Wx=function(t,e,n){if(t){var r=R(t.getPosition(),2),i=r[0],o=r[1];t.translate(e-i,n-o)}},Vx=function(t,e){if(t){var n=R(t.getPosition(),1)[0];t.translate(e-n,0)}},Ux=function(t,e,n){var r=function t(e){return e.isLeaf?1:e.children?e.children.reduce((function(e,n){return e+=t(n)}),0):0};return e&&(e=t.slice(0,e).reduce((function(t,e){return t+=r(e)}),0)),n&&(n=t.slice(t.length-n).reduce((function(t,e){return t+=r(e)}),0)),{colCount:e,trailingColCount:n}},jx=function(t){void 0===t&&(t=[]);var e=function(t){var e=[];return function t(n){n.forEach((function(n){"string"!=typeof n&&n.children?t(n.children):e.push(n)}))}(t),e}(t);return e.map((function(t){return"string"==typeof t?t:t.field}))},Yx=function t(e){var n=e.children[0];return n?n.isLeaf?n:t(n):e},Xx=function(t,e){var n,r=t.pagination,i=t.frozen,o=t.hierarchyType,a=t.seriesNumber,s=r&&r.pageSize,l=!1,u=null==e?void 0:e[0];s||(null==a?void 0:a.enable)||!(null==i?void 0:i.firstRow)||(l="tree"===o||0===(null===(n=null==u?void 0:u.children)||void 0===n?void 0:n.length));var c=l&&!!u;return{rowCount:c?1:0,colCount:0,trailingColCount:0,trailingRowCount:0,firstRow:l,rowHeight:c?u.height:0}},qx=function(t){function e(e){var n=t.call(this)||this;return n.isHeaderCellInViewport=function(t){var e=t.cellPosition,n=t.cellSize,r=t.viewportPosition,i=t.viewportSize;return e+n>=r&&r+i>=e},n.headerConfig=e,n}return E(e,t),e.prototype.getHeaderConfig=function(){return this.headerConfig||{}},e.prototype.clearResizeAreaGroup=function(t){var e=this.parentNode,n=null==e?void 0:e.getElementById(t);null==n||n.removeChildren()},e.prototype.render=function(t){this.clearResizeAreaGroup(t),this.clear(),this.layout(),this.offset(),this.clip()},e.prototype.onScrollXY=function(t,e,n){this.headerConfig.scrollX=t,this.headerConfig.scrollY=e,this.render(n)},e.prototype.onRowScrollX=function(t,e){this.headerConfig.scrollX=t,this.render(e)},e.prototype.clear=function(){t.prototype.removeChildren.call(this)},e}(ys),Kx=function(t){function e(e){var n=t.call(this,e)||this;return n.initScrollGroup(),n}return E(e,t),e.prototype.getCellInstance=function(t){var e=this.getHeaderConfig(),n=this.getHeaderConfig().spreadsheet,r=n.options.colCell;return(null==r?void 0:r(t,n,e))||new TS(t,n,e)},e.prototype.initScrollGroup=function(){this.scrollGroup=this.appendChild(new ys({name:"colScrollGroup",style:{zIndex:3}}))},e.prototype.onColScroll=function(t,e){this.headerConfig.scrollX!==t&&(this.headerConfig.scrollX=t,this.render(e))},e.prototype.clip=function(){var t=this.getHeaderConfig(),e=t.height,n=t.width,r=t.spreadsheet,i=t.position,o=r.isFrozenRowHeader();this.scrollGroup.style.clipPath=new Ss({style:{x:o?i.x:0,y:o?i.y:0,width:o?n:i.x+n,height:e}})},e.prototype.clear=function(){var t;null===(t=this.scrollGroup)||void 0===t||t.removeChildren()},e.prototype.getCellGroup=function(t){return this.scrollGroup},e.prototype.isColCellInRect=function(t){var e=this.getHeaderConfig(),n=e.spreadsheet,r=e.cornerWidth,i=e.width,o=e.scrollX,a=void 0===o?0:o;return i+a>t.x&&a-(n.isFrozenRowHeader()?0:r)<t.x+t.width},e.prototype.layout=function(){var t=this,e=this.getHeaderConfig(),n=e.nodes,r=e.spreadsheet;kv(n,(function(e){if(t.isColCellInRect(e)){var n=t.getCellGroup(e);e.isFrozen=n!==t.scrollGroup;var i=t.getCellInstance(e);e.belongsCell=i,null==n||n.appendChild(i),r.emit(Xl.COL_CELL_RENDER,i),r.emit(Xl.LAYOUT_CELL_RENDER,i)}}))},e.prototype.offset=function(){var t=this.getHeaderConfig(),e=t.position,n=t.scrollX,r=void 0===n?0:n;Vx(this.scrollGroup,e.x-r)},e}(qx),Zx=function(t){var e=t.type,n=t.theme,r=t.width,i=t.height,o=T(t,["type","theme","width","height"]),a=e===Sm.Horizontal?n.size:void 0,s=e===Sm.Vertical?n.size:void 0;return{style:{fill:n.background,fillOpacity:n.backgroundOpacity,cursor:"".concat(e,"-resize"),width:a,height:s},appendInfo:S(S({},o),{isResizeArea:!0,type:e,width:r,height:i,size:n.size})}},$x=function(t,e){var n;if(null===(n=t.facet)||void 0===n?void 0:n.foregroundGroup)return t.facet.foregroundGroup.getElementById(e)||t.facet.foregroundGroup.appendChild(new ys({id:e,style:{zIndex:5}}))},Qx=function(t,e,n){var r=null!=n?n:{},i=r.scrollX,o=void 0===i?0:i,a=r.scrollY,s=void 0===a?0:a,l=!(t.x-o>e.x+e.width||t.x+t.width-o<e.x),u=!(t.y-s>e.y+e.height||t.y+t.height-s<e.y);return l&&u};function Jx(t){return void 0===t&&(t=[]),t.filter((function(t){return t!==Kl}))}function tb(t){return t===Jl}function eb(t,e,n){return void 0===t&&(t={}),void 0===e&&(e=[]),void 0===n&&(n=Ql),e.reduce((function(e,r){var i=t[r];return r in t?e.push(String(i)):e.push(n),e}),[])}function nb(t,e){var n=e.filter((function(e){return e in t}));return _g(n)&&n.push(nu),n}function rb(t,e,n){void 0===t&&(t={}),void 0===e&&(e=[]);var r=[];function i(t,e,n){return e.reduce((function(e,r){var i=t[r];return r in t?e.push(String(i)):r===Kl&&n?e.push(n):e.push(Ql),e}),[])}return n?n.forEach((function(n){r.push(i(t,e,n))})):r.push(i(t,e)),r}function ib(t,e){return t.concat(e).filter((function(t){return t!==Kl})).join(NC)}function ob(t){var e=t.rowDimensionValues,n=t.colDimensionValues,r=t.isFirstCreate,i=t.onFirstCreate,o=t.rowFields,a=t.colFields,s=t.rowPivotMeta,l=t.colPivotMeta,u=t.prefix,c=void 0===u?"":u,h=function(t,e,n,o){for(var a=n,s=[],l=0;l<e.length;l++){var u=e[l];if(r&&a&&!(null==a?void 0:a.has(u))){var c=e.slice(0,l+1).map((function(t){return String(t)})),h=c.join(NC),d=void 0;d=u===Ql?0:a.has(Ql)?a.size:a.size+1,a.set(u,{id:h,dimensions:c,value:u,level:d,children:new Map}),null==i||i({dimension:null==t?void 0:t[l],dimensionPath:h,careRepeated:o})}var f=null==a?void 0:a.get(u);if(s.push(tb(u)?u:null==f?void 0:f.level),f){var p=null==t?void 0:t[l+1];r&&f.childField!==p&&(f.childField=p),a=null==f?void 0:f.children}}return s},d=h(o,e,s,!1),f=h(a,n,l,!0);return O(O([c],R(d),!1),R(f),!1)}function ab(t,e){if(t&&e){var n=e.split(NC),r=Iv(n),i=t;kv(n,(function(t,e){var n=i.get(t);return n?(t===r?(n.children=new Map,n.childField=void 0):i=n.children,!0):0===e&&t===OC}))}}function sb(t,e,n){var r={field:Kl,name:e||n,formatter:function(e){return function(e){var n=Xv(t,(function(t){return t.field===e}));return Hh(n,"name",e)}(e)}};return r}function lb(t){var e=t.pivotMeta,n=t.dimensionValues,r=t.fieldIdx,i=t.queryType,o=t.fields,a=t.sortedDimensionValues,s=[{children:e}];for(var l=function(t){var e=n[t],r=o[t];s=tb(e)?function(t,e){var n,r=tg(t,(function(t){var e,n,r=[];try{for(var o=M(t.children.values()),a=o.next();!a.done;a=o.next()){var s=a.value;s.value===nu||i!==MC.All&&s.value===Ql||r.push(s)}}catch(l){e={error:l}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r}));if(t.length>1){var o=null!==(n=a[e])&&void 0!==n?n:[],s=new Map(o.map((function(t,e){return[t,e]})));return r.sort((function(t,e){var n,r;return(null!==(n=s.get(t.id))&&void 0!==n?n:0)-(null!==(r=s.get(e.id))&&void 0!==r?r:0)})),r}return r}(s,r):s.map((function(t){return t.children.get(e)})).filter(Boolean)},u=0;u<=r;u++)l(u);return s}function ub(t){var e=t.dimensionValues,n=t.pivotMeta,r=t.fields,i=t.sortedDimensionValues,o=t.queryType,a=void 0===o?MC.All:o;return function(t){for(var e=null,n=0;n<t.length;n++)if(tb(t[n]))e=n;else if(!Ng(e)&&e<n)return!0;return!1}(e)?lb({pivotMeta:n,dimensionValues:e,fieldIdx:e.length-1,queryType:a,fields:r,sortedDimensionValues:i}).map((function(t){return t.dimensions})):[e]}function cb(t,e){return t?wu(t)?tg(t,(function(t){if(!wu(t))return yp([t]);var n=e===MC.DetailOnly?1:0;return yp(t.slice(n))})):yp([t]):[]}
/*!
       *  decimal.js v10.4.3
       *  An arbitrary-precision Decimal type for JavaScript.
       *  https://github.com/MikeMcl/decimal.js
       *  Copyright (c) 2022 Michael Mclaughlin <M8ch88l@gmail.com>
       *  MIT Licence
       */var hb,db,fb=9e15,pb=1e9,vb="0123456789abcdef",gb="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",yb="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",mb={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-fb,maxE:fb,crypto:!1},Cb=!0,wb="[DecimalError] ",xb=wb+"Invalid argument: ",bb=wb+"Precision limit exceeded",Eb=wb+"crypto unavailable",Sb="[object Decimal]",Tb=Math.floor,Lb=Math.pow,_b=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,Mb=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,Rb=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,Ob=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Nb=1e7,Ib=7,Ab=gb.length-1,Pb=yb.length-1,kb={toStringTag:Sb};function Bb(t){var e,n,r,i=t.length-1,o="",a=t[0];if(i>0){for(o+=a,e=1;e<i;e++)r=t[e]+"",(n=Ib-r.length)&&(o+=Xb(n)),o+=r;a=t[e],(n=Ib-(r=a+"").length)&&(o+=Xb(n))}else if(0===a)return"0";for(;a%10==0;)a/=10;return o+a}function Db(t,e,n){if(t!==~~t||t<e||t>n)throw Error(xb+t)}function Fb(t,e,n,r){var i,o,a,s;for(o=t[0];o>=10;o/=10)--e;return--e<0?(e+=Ib,i=0):(i=Math.ceil((e+1)/Ib),e%=Ib),o=Lb(10,Ib-e),s=t[i]%o|0,null==r?e<3?(0==e?s=s/100|0:1==e&&(s=s/10|0),a=n<4&&99999==s||n>3&&49999==s||5e4==s||0==s):a=(n<4&&s+1==o||n>3&&s+1==o/2)&&(t[i+1]/o/100|0)==Lb(10,e-2)-1||(s==o/2||0==s)&&!(t[i+1]/o/100|0):e<4?(0==e?s=s/1e3|0:1==e?s=s/100|0:2==e&&(s=s/10|0),a=(r||n<4)&&9999==s||!r&&n>3&&4999==s):a=((r||n<4)&&s+1==o||!r&&n>3&&s+1==o/2)&&(t[i+1]/o/1e3|0)==Lb(10,e-3)-1,a}function Hb(t,e,n){for(var r,i,o=[0],a=0,s=t.length;a<s;){for(i=o.length;i--;)o[i]*=e;for(o[0]+=vb.indexOf(t.charAt(a++)),r=0;r<o.length;r++)o[r]>n-1&&(void 0===o[r+1]&&(o[r+1]=0),o[r+1]+=o[r]/n|0,o[r]%=n)}return o.reverse()}kb.absoluteValue=kb.abs=function(){var t=new this.constructor(this);return t.s<0&&(t.s=1),Gb(t)},kb.ceil=function(){return Gb(new this.constructor(this),this.e+1,2)},kb.clampedTo=kb.clamp=function(t,e){var n=this,r=n.constructor;if(t=new r(t),e=new r(e),!t.s||!e.s)return new r(NaN);if(t.gt(e))throw Error(xb+e);return n.cmp(t)<0?t:n.cmp(e)>0?e:new r(n)},kb.comparedTo=kb.cmp=function(t){var e,n,r,i,o=this,a=o.d,s=(t=new o.constructor(t)).d,l=o.s,u=t.s;if(!a||!s)return l&&u?l!==u?l:a===s?0:!a^l<0?1:-1:NaN;if(!a[0]||!s[0])return a[0]?l:s[0]?-u:0;if(l!==u)return l;if(o.e!==t.e)return o.e>t.e^l<0?1:-1;for(e=0,n=(r=a.length)<(i=s.length)?r:i;e<n;++e)if(a[e]!==s[e])return a[e]>s[e]^l<0?1:-1;return r===i?0:r>i^l<0?1:-1},kb.cosine=kb.cos=function(){var t,e,n=this,r=n.constructor;return n.d?n.d[0]?(t=r.precision,e=r.rounding,r.precision=t+Math.max(n.e,n.sd())+Ib,r.rounding=1,n=function(t,e){var n,r,i;if(e.isZero())return e;r=e.d.length,r<32?i=(1/rE(4,n=Math.ceil(r/3))).toString():(n=16,i="2.3283064365386962890625e-10");t.precision+=n,e=nE(t,1,e.times(i),new t(1));for(var o=n;o--;){var a=e.times(e);e=a.times(a).minus(a).times(8).plus(1)}return t.precision-=n,e}(r,iE(r,n)),r.precision=t,r.rounding=e,Gb(2==db||3==db?n.neg():n,t,e,!0)):new r(1):new r(NaN)},kb.cubeRoot=kb.cbrt=function(){var t,e,n,r,i,o,a,s,l,u,c=this,h=c.constructor;if(!c.isFinite()||c.isZero())return new h(c);for(Cb=!1,(o=c.s*Lb(c.s*c,1/3))&&Math.abs(o)!=1/0?r=new h(o.toString()):(n=Bb(c.d),(o=((t=c.e)-n.length+1)%3)&&(n+=1==o||-2==o?"0":"00"),o=Lb(n,1/3),t=Tb((t+1)/3)-(t%3==(t<0?-1:2)),(r=new h(n=o==1/0?"5e"+t:(n=o.toExponential()).slice(0,n.indexOf("e")+1)+t)).s=c.s),a=(t=h.precision)+3;;)if(u=(l=(s=r).times(s).times(s)).plus(c),r=zb(u.plus(c).times(s),u.plus(l),a+2,1),Bb(s.d).slice(0,a)===(n=Bb(r.d)).slice(0,a)){if("9999"!=(n=n.slice(a-3,a+1))&&(i||"4999"!=n)){+n&&(+n.slice(1)||"5"!=n.charAt(0))||(Gb(r,t+1,1),e=!r.times(r).times(r).eq(c));break}if(!i&&(Gb(s,t+1,0),s.times(s).times(s).eq(c))){r=s;break}a+=4,i=1}return Cb=!0,Gb(r,t,h.rounding,e)},kb.decimalPlaces=kb.dp=function(){var t,e=this.d,n=NaN;if(e){if(n=((t=e.length-1)-Tb(this.e/Ib))*Ib,t=e[t])for(;t%10==0;t/=10)n--;n<0&&(n=0)}return n},kb.dividedBy=kb.div=function(t){return zb(this,new this.constructor(t))},kb.dividedToIntegerBy=kb.divToInt=function(t){var e=this.constructor;return Gb(zb(this,new e(t),0,1,1),e.precision,e.rounding)},kb.equals=kb.eq=function(t){return 0===this.cmp(t)},kb.floor=function(){return Gb(new this.constructor(this),this.e+1,3)},kb.greaterThan=kb.gt=function(t){return this.cmp(t)>0},kb.greaterThanOrEqualTo=kb.gte=function(t){var e=this.cmp(t);return 1==e||0===e},kb.hyperbolicCosine=kb.cosh=function(){var t,e,n,r,i,o=this,a=o.constructor,s=new a(1);if(!o.isFinite())return new a(o.s?1/0:NaN);if(o.isZero())return s;n=a.precision,r=a.rounding,a.precision=n+Math.max(o.e,o.sd())+4,a.rounding=1,(i=o.d.length)<32?e=(1/rE(4,t=Math.ceil(i/3))).toString():(t=16,e="2.3283064365386962890625e-10"),o=nE(a,1,o.times(e),new a(1),!0);for(var l,u=t,c=new a(8);u--;)l=o.times(o),o=s.minus(l.times(c.minus(l.times(c))));return Gb(o,a.precision=n,a.rounding=r,!0)},kb.hyperbolicSine=kb.sinh=function(){var t,e,n,r,i=this,o=i.constructor;if(!i.isFinite()||i.isZero())return new o(i);if(e=o.precision,n=o.rounding,o.precision=e+Math.max(i.e,i.sd())+4,o.rounding=1,(r=i.d.length)<3)i=nE(o,2,i,i,!0);else{t=(t=1.4*Math.sqrt(r))>16?16:0|t,i=nE(o,2,i=i.times(1/rE(5,t)),i,!0);for(var a,s=new o(5),l=new o(16),u=new o(20);t--;)a=i.times(i),i=i.times(s.plus(a.times(l.times(a).plus(u))))}return o.precision=e,o.rounding=n,Gb(i,e,n,!0)},kb.hyperbolicTangent=kb.tanh=function(){var t,e,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+7,r.rounding=1,zb(n.sinh(),n.cosh(),r.precision=t,r.rounding=e)):new r(n.s)},kb.inverseCosine=kb.acos=function(){var t,e=this,n=e.constructor,r=e.abs().cmp(1),i=n.precision,o=n.rounding;return-1!==r?0===r?e.isNeg()?jb(n,i,o):new n(0):new n(NaN):e.isZero()?jb(n,i+4,o).times(.5):(n.precision=i+6,n.rounding=1,e=e.asin(),t=jb(n,i+4,o).times(.5),n.precision=i,n.rounding=o,t.minus(e))},kb.inverseHyperbolicCosine=kb.acosh=function(){var t,e,n=this,r=n.constructor;return n.lte(1)?new r(n.eq(1)?0:NaN):n.isFinite()?(t=r.precision,e=r.rounding,r.precision=t+Math.max(Math.abs(n.e),n.sd())+4,r.rounding=1,Cb=!1,n=n.times(n).minus(1).sqrt().plus(n),Cb=!0,r.precision=t,r.rounding=e,n.ln()):new r(n)},kb.inverseHyperbolicSine=kb.asinh=function(){var t,e,n=this,r=n.constructor;return!n.isFinite()||n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+2*Math.max(Math.abs(n.e),n.sd())+6,r.rounding=1,Cb=!1,n=n.times(n).plus(1).sqrt().plus(n),Cb=!0,r.precision=t,r.rounding=e,n.ln())},kb.inverseHyperbolicTangent=kb.atanh=function(){var t,e,n,r,i=this,o=i.constructor;return i.isFinite()?i.e>=0?new o(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(t=o.precision,e=o.rounding,r=i.sd(),Math.max(r,t)<2*-i.e-1?Gb(new o(i),t,e,!0):(o.precision=n=r-i.e,i=zb(i.plus(1),new o(1).minus(i),n+t,1),o.precision=t+4,o.rounding=1,i=i.ln(),o.precision=t,o.rounding=e,i.times(.5))):new o(NaN)},kb.inverseSine=kb.asin=function(){var t,e,n,r,i=this,o=i.constructor;return i.isZero()?new o(i):(e=i.abs().cmp(1),n=o.precision,r=o.rounding,-1!==e?0===e?((t=jb(o,n+4,r).times(.5)).s=i.s,t):new o(NaN):(o.precision=n+6,o.rounding=1,i=i.div(new o(1).minus(i.times(i)).sqrt().plus(1)).atan(),o.precision=n,o.rounding=r,i.times(2)))},kb.inverseTangent=kb.atan=function(){var t,e,n,r,i,o,a,s,l,u=this,c=u.constructor,h=c.precision,d=c.rounding;if(u.isFinite()){if(u.isZero())return new c(u);if(u.abs().eq(1)&&h+4<=Pb)return(a=jb(c,h+4,d).times(.25)).s=u.s,a}else{if(!u.s)return new c(NaN);if(h+4<=Pb)return(a=jb(c,h+4,d).times(.5)).s=u.s,a}for(c.precision=s=h+10,c.rounding=1,t=n=Math.min(28,s/Ib+2|0);t;--t)u=u.div(u.times(u).plus(1).sqrt().plus(1));for(Cb=!1,e=Math.ceil(s/Ib),r=1,l=u.times(u),a=new c(u),i=u;-1!==t;)if(i=i.times(l),o=a.minus(i.div(r+=2)),i=i.times(l),void 0!==(a=o.plus(i.div(r+=2))).d[e])for(t=e;a.d[t]===o.d[t]&&t--;);return n&&(a=a.times(2<<n-1)),Cb=!0,Gb(a,c.precision=h,c.rounding=d,!0)},kb.isFinite=function(){return!!this.d},kb.isInteger=kb.isInt=function(){return!!this.d&&Tb(this.e/Ib)>this.d.length-2},kb.isNaN=function(){return!this.s},kb.isNegative=kb.isNeg=function(){return this.s<0},kb.isPositive=kb.isPos=function(){return this.s>0},kb.isZero=function(){return!!this.d&&0===this.d[0]},kb.lessThan=kb.lt=function(t){return this.cmp(t)<0},kb.lessThanOrEqualTo=kb.lte=function(t){return this.cmp(t)<1},kb.logarithm=kb.log=function(t){var e,n,r,i,o,a,s,l,u=this,c=u.constructor,h=c.precision,d=c.rounding;if(null==t)t=new c(10),e=!0;else{if(n=(t=new c(t)).d,t.s<0||!n||!n[0]||t.eq(1))return new c(NaN);e=t.eq(10)}if(n=u.d,u.s<0||!n||!n[0]||u.eq(1))return new c(n&&!n[0]?-1/0:1!=u.s?NaN:n?0:1/0);if(e)if(n.length>1)o=!0;else{for(i=n[0];i%10==0;)i/=10;o=1!==i}if(Cb=!1,a=Qb(u,s=h+5),r=e?Ub(c,s+10):Qb(t,s),Fb((l=zb(a,r,s,1)).d,i=h,d))do{if(a=Qb(u,s+=10),r=e?Ub(c,s+10):Qb(t,s),l=zb(a,r,s,1),!o){+Bb(l.d).slice(i+1,i+15)+1==1e14&&(l=Gb(l,h+1,0));break}}while(Fb(l.d,i+=10,d));return Cb=!0,Gb(l,h,d)},kb.minus=kb.sub=function(t){var e,n,r,i,o,a,s,l,u,c,h,d,f=this,p=f.constructor;if(t=new p(t),!f.d||!t.d)return f.s&&t.s?f.d?t.s=-t.s:t=new p(t.d||f.s!==t.s?f:NaN):t=new p(NaN),t;if(f.s!=t.s)return t.s=-t.s,f.plus(t);if(u=f.d,d=t.d,s=p.precision,l=p.rounding,!u[0]||!d[0]){if(d[0])t.s=-t.s;else{if(!u[0])return new p(3===l?-0:0);t=new p(f)}return Cb?Gb(t,s,l):t}if(n=Tb(t.e/Ib),c=Tb(f.e/Ib),u=u.slice(),o=c-n){for((h=o<0)?(e=u,o=-o,a=d.length):(e=d,n=c,a=u.length),o>(r=Math.max(Math.ceil(s/Ib),a)+2)&&(o=r,e.length=1),e.reverse(),r=o;r--;)e.push(0);e.reverse()}else{for((h=(r=u.length)<(a=d.length))&&(a=r),r=0;r<a;r++)if(u[r]!=d[r]){h=u[r]<d[r];break}o=0}for(h&&(e=u,u=d,d=e,t.s=-t.s),a=u.length,r=d.length-a;r>0;--r)u[a++]=0;for(r=d.length;r>o;){if(u[--r]<d[r]){for(i=r;i&&0===u[--i];)u[i]=Nb-1;--u[i],u[r]+=Nb}u[r]-=d[r]}for(;0===u[--a];)u.pop();for(;0===u[0];u.shift())--n;return u[0]?(t.d=u,t.e=Vb(u,n),Cb?Gb(t,s,l):t):new p(3===l?-0:0)},kb.modulo=kb.mod=function(t){var e,n=this,r=n.constructor;return t=new r(t),!n.d||!t.s||t.d&&!t.d[0]?new r(NaN):!t.d||n.d&&!n.d[0]?Gb(new r(n),r.precision,r.rounding):(Cb=!1,9==r.modulo?(e=zb(n,t.abs(),0,3,1)).s*=t.s:e=zb(n,t,0,r.modulo,1),e=e.times(t),Cb=!0,n.minus(e))},kb.naturalExponential=kb.exp=function(){return $b(this)},kb.naturalLogarithm=kb.ln=function(){return Qb(this)},kb.negated=kb.neg=function(){var t=new this.constructor(this);return t.s=-t.s,Gb(t)},kb.plus=kb.add=function(t){var e,n,r,i,o,a,s,l,u,c,h=this,d=h.constructor;if(t=new d(t),!h.d||!t.d)return h.s&&t.s?h.d||(t=new d(t.d||h.s===t.s?h:NaN)):t=new d(NaN),t;if(h.s!=t.s)return t.s=-t.s,h.minus(t);if(u=h.d,c=t.d,s=d.precision,l=d.rounding,!u[0]||!c[0])return c[0]||(t=new d(h)),Cb?Gb(t,s,l):t;if(o=Tb(h.e/Ib),r=Tb(t.e/Ib),u=u.slice(),i=o-r){for(i<0?(n=u,i=-i,a=c.length):(n=c,r=o,a=u.length),i>(a=(o=Math.ceil(s/Ib))>a?o+1:a+1)&&(i=a,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for((a=u.length)-(i=c.length)<0&&(i=a,n=c,c=u,u=n),e=0;i;)e=(u[--i]=u[i]+c[i]+e)/Nb|0,u[i]%=Nb;for(e&&(u.unshift(e),++r),a=u.length;0==u[--a];)u.pop();return t.d=u,t.e=Vb(u,r),Cb?Gb(t,s,l):t},kb.precision=kb.sd=function(t){var e,n=this;if(void 0!==t&&t!==!!t&&1!==t&&0!==t)throw Error(xb+t);return n.d?(e=Yb(n.d),t&&n.e+1>e&&(e=n.e+1)):e=NaN,e},kb.round=function(){var t=this,e=t.constructor;return Gb(new e(t),t.e+1,e.rounding)},kb.sine=kb.sin=function(){var t,e,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+Math.max(n.e,n.sd())+Ib,r.rounding=1,n=function(t,e){var n,r=e.d.length;if(r<3)return e.isZero()?e:nE(t,2,e,e);n=1.4*Math.sqrt(r),n=n>16?16:0|n,e=e.times(1/rE(5,n)),e=nE(t,2,e,e);for(var i,o=new t(5),a=new t(16),s=new t(20);n--;)i=e.times(e),e=e.times(o.plus(i.times(a.times(i).minus(s))));return e}(r,iE(r,n)),r.precision=t,r.rounding=e,Gb(db>2?n.neg():n,t,e,!0)):new r(NaN)},kb.squareRoot=kb.sqrt=function(){var t,e,n,r,i,o,a=this,s=a.d,l=a.e,u=a.s,c=a.constructor;if(1!==u||!s||!s[0])return new c(!u||u<0&&(!s||s[0])?NaN:s?a:1/0);for(Cb=!1,0==(u=Math.sqrt(+a))||u==1/0?(((e=Bb(s)).length+l)%2==0&&(e+="0"),u=Math.sqrt(e),l=Tb((l+1)/2)-(l<0||l%2),r=new c(e=u==1/0?"5e"+l:(e=u.toExponential()).slice(0,e.indexOf("e")+1)+l)):r=new c(u.toString()),n=(l=c.precision)+3;;)if(r=(o=r).plus(zb(a,o,n+2,1)).times(.5),Bb(o.d).slice(0,n)===(e=Bb(r.d)).slice(0,n)){if("9999"!=(e=e.slice(n-3,n+1))&&(i||"4999"!=e)){+e&&(+e.slice(1)||"5"!=e.charAt(0))||(Gb(r,l+1,1),t=!r.times(r).eq(a));break}if(!i&&(Gb(o,l+1,0),o.times(o).eq(a))){r=o;break}n+=4,i=1}return Cb=!0,Gb(r,l,c.rounding,t)},kb.tangent=kb.tan=function(){var t,e,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+10,r.rounding=1,(n=n.sin()).s=1,n=zb(n,new r(1).minus(n.times(n)).sqrt(),t+10,0),r.precision=t,r.rounding=e,Gb(2==db||4==db?n.neg():n,t,e,!0)):new r(NaN)},kb.times=kb.mul=function(t){var e,n,r,i,o,a,s,l,u,c=this,h=c.constructor,d=c.d,f=(t=new h(t)).d;if(t.s*=c.s,!(d&&d[0]&&f&&f[0]))return new h(!t.s||d&&!d[0]&&!f||f&&!f[0]&&!d?NaN:d&&f?0*t.s:t.s/0);for(n=Tb(c.e/Ib)+Tb(t.e/Ib),(l=d.length)<(u=f.length)&&(o=d,d=f,f=o,a=l,l=u,u=a),o=[],r=a=l+u;r--;)o.push(0);for(r=u;--r>=0;){for(e=0,i=l+r;i>r;)s=o[i]+f[r]*d[i-r-1]+e,o[i--]=s%Nb|0,e=s/Nb|0;o[i]=(o[i]+e)%Nb|0}for(;!o[--a];)o.pop();return e?++n:o.shift(),t.d=o,t.e=Vb(o,n),Cb?Gb(t,h.precision,h.rounding):t},kb.toBinary=function(t,e){return oE(this,2,t,e)},kb.toDecimalPlaces=kb.toDP=function(t,e){var n=this,r=n.constructor;return n=new r(n),void 0===t?n:(Db(t,0,pb),void 0===e?e=r.rounding:Db(e,0,8),Gb(n,t+n.e+1,e))},kb.toExponential=function(t,e){var n,r=this,i=r.constructor;return void 0===t?n=Wb(r,!0):(Db(t,0,pb),void 0===e?e=i.rounding:Db(e,0,8),n=Wb(r=Gb(new i(r),t+1,e),!0,t+1)),r.isNeg()&&!r.isZero()?"-"+n:n},kb.toFixed=function(t,e){var n,r,i=this,o=i.constructor;return void 0===t?n=Wb(i):(Db(t,0,pb),void 0===e?e=o.rounding:Db(e,0,8),n=Wb(r=Gb(new o(i),t+i.e+1,e),!1,t+r.e+1)),i.isNeg()&&!i.isZero()?"-"+n:n},kb.toFraction=function(t){var e,n,r,i,o,a,s,l,u,c,h,d,f=this,p=f.d,v=f.constructor;if(!p)return new v(f);if(u=n=new v(1),r=l=new v(0),a=(o=(e=new v(r)).e=Yb(p)-f.e-1)%Ib,e.d[0]=Lb(10,a<0?Ib+a:a),null==t)t=o>0?e:u;else{if(!(s=new v(t)).isInt()||s.lt(u))throw Error(xb+s);t=s.gt(e)?o>0?e:u:s}for(Cb=!1,s=new v(Bb(p)),c=v.precision,v.precision=o=p.length*Ib*2;h=zb(s,e,0,1,1),1!=(i=n.plus(h.times(r))).cmp(t);)n=r,r=i,i=u,u=l.plus(h.times(i)),l=i,i=e,e=s.minus(h.times(i)),s=i;return i=zb(t.minus(n),r,0,1,1),l=l.plus(i.times(u)),n=n.plus(i.times(r)),l.s=u.s=f.s,d=zb(u,r,o,1).minus(f).abs().cmp(zb(l,n,o,1).minus(f).abs())<1?[u,r]:[l,n],v.precision=c,Cb=!0,d},kb.toHexadecimal=kb.toHex=function(t,e){return oE(this,16,t,e)},kb.toNearest=function(t,e){var n=this,r=n.constructor;if(n=new r(n),null==t){if(!n.d)return n;t=new r(1),e=r.rounding}else{if(t=new r(t),void 0===e?e=r.rounding:Db(e,0,8),!n.d)return t.s?n:t;if(!t.d)return t.s&&(t.s=n.s),t}return t.d[0]?(Cb=!1,n=zb(n,t,0,e,1).times(t),Cb=!0,Gb(n)):(t.s=n.s,n=t),n},kb.toNumber=function(){return+this},kb.toOctal=function(t,e){return oE(this,8,t,e)},kb.toPower=kb.pow=function(t){var e,n,r,i,o,a,s=this,l=s.constructor,u=+(t=new l(t));if(!(s.d&&t.d&&s.d[0]&&t.d[0]))return new l(Lb(+s,u));if((s=new l(s)).eq(1))return s;if(r=l.precision,o=l.rounding,t.eq(1))return Gb(s,r,o);if((e=Tb(t.e/Ib))>=t.d.length-1&&(n=u<0?-u:u)<=9007199254740991)return i=qb(l,s,n,r),t.s<0?new l(1).div(i):Gb(i,r,o);if((a=s.s)<0){if(e<t.d.length-1)return new l(NaN);if(1&t.d[e]||(a=1),0==s.e&&1==s.d[0]&&1==s.d.length)return s.s=a,s}return(e=0!=(n=Lb(+s,u))&&isFinite(n)?new l(n+"").e:Tb(u*(Math.log("0."+Bb(s.d))/Math.LN10+s.e+1)))>l.maxE+1||e<l.minE-1?new l(e>0?a/0:0):(Cb=!1,l.rounding=s.s=1,n=Math.min(12,(e+"").length),(i=$b(t.times(Qb(s,r+n)),r)).d&&Fb((i=Gb(i,r+5,1)).d,r,o)&&(e=r+10,+Bb((i=Gb($b(t.times(Qb(s,e+n)),e),e+5,1)).d).slice(r+1,r+15)+1==1e14&&(i=Gb(i,r+1,0))),i.s=a,Cb=!0,l.rounding=o,Gb(i,r,o))},kb.toPrecision=function(t,e){var n,r=this,i=r.constructor;return void 0===t?n=Wb(r,r.e<=i.toExpNeg||r.e>=i.toExpPos):(Db(t,1,pb),void 0===e?e=i.rounding:Db(e,0,8),n=Wb(r=Gb(new i(r),t,e),t<=r.e||r.e<=i.toExpNeg,t)),r.isNeg()&&!r.isZero()?"-"+n:n},kb.toSignificantDigits=kb.toSD=function(t,e){var n=this.constructor;return void 0===t?(t=n.precision,e=n.rounding):(Db(t,1,pb),void 0===e?e=n.rounding:Db(e,0,8)),Gb(new n(this),t,e)},kb.toString=function(){var t=this,e=t.constructor,n=Wb(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()&&!t.isZero()?"-"+n:n},kb.truncated=kb.trunc=function(){return Gb(new this.constructor(this),this.e+1,1)},kb.valueOf=kb.toJSON=function(){var t=this,e=t.constructor,n=Wb(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()?"-"+n:n};var zb=function(){function t(t,e,n){var r,i=0,o=t.length;for(t=t.slice();o--;)r=t[o]*e+i,t[o]=r%n|0,i=r/n|0;return i&&t.unshift(i),t}function e(t,e,n,r){var i,o;if(n!=r)o=n>r?1:-1;else for(i=o=0;i<n;i++)if(t[i]!=e[i]){o=t[i]>e[i]?1:-1;break}return o}function n(t,e,n,r){for(var i=0;n--;)t[n]-=i,i=t[n]<e[n]?1:0,t[n]=i*r+t[n]-e[n];for(;!t[0]&&t.length>1;)t.shift()}return function(r,i,o,a,s,l){var u,c,h,d,f,p,v,g,y,m,C,w,x,b,E,S,T,L,_,M,R=r.constructor,O=r.s==i.s?1:-1,N=r.d,I=i.d;if(!(N&&N[0]&&I&&I[0]))return new R(r.s&&i.s&&(N?!I||N[0]!=I[0]:I)?N&&0==N[0]||!I?0*O:O/0:NaN);for(l?(f=1,c=r.e-i.e):(l=Nb,f=Ib,c=Tb(r.e/f)-Tb(i.e/f)),_=I.length,T=N.length,m=(y=new R(O)).d=[],h=0;I[h]==(N[h]||0);h++);if(I[h]>(N[h]||0)&&c--,null==o?(b=o=R.precision,a=R.rounding):b=s?o+(r.e-i.e)+1:o,b<0)m.push(1),p=!0;else{if(b=b/f+2|0,h=0,1==_){for(d=0,I=I[0],b++;(h<T||d)&&b--;h++)E=d*l+(N[h]||0),m[h]=E/I|0,d=E%I|0;p=d||h<T}else{for((d=l/(I[0]+1)|0)>1&&(I=t(I,d,l),N=t(N,d,l),_=I.length,T=N.length),S=_,w=(C=N.slice(0,_)).length;w<_;)C[w++]=0;(M=I.slice()).unshift(0),L=I[0],I[1]>=l/2&&++L;do{d=0,(u=e(I,C,_,w))<0?(x=C[0],_!=w&&(x=x*l+(C[1]||0)),(d=x/L|0)>1?(d>=l&&(d=l-1),1==(u=e(v=t(I,d,l),C,g=v.length,w=C.length))&&(d--,n(v,_<g?M:I,g,l))):(0==d&&(u=d=1),v=I.slice()),(g=v.length)<w&&v.unshift(0),n(C,v,w,l),-1==u&&(u=e(I,C,_,w=C.length))<1&&(d++,n(C,_<w?M:I,w,l)),w=C.length):0===u&&(d++,C=[0]),m[h++]=d,u&&C[0]?C[w++]=N[S]||0:(C=[N[S]],w=1)}while((S++<T||void 0!==C[0])&&b--);p=void 0!==C[0]}m[0]||m.shift()}if(1==f)y.e=c,hb=p;else{for(h=1,d=m[0];d>=10;d/=10)h++;y.e=h+c*f-1,Gb(y,s?o+y.e+1:o,a,p)}return y}}();function Gb(t,e,n,r){var i,o,a,s,l,u,c,h,d,f=t.constructor;t:if(null!=e){if(!(h=t.d))return t;for(i=1,s=h[0];s>=10;s/=10)i++;if((o=e-i)<0)o+=Ib,a=e,l=(c=h[d=0])/Lb(10,i-a-1)%10|0;else if((d=Math.ceil((o+1)/Ib))>=(s=h.length)){if(!r)break t;for(;s++<=d;)h.push(0);c=l=0,i=1,a=(o%=Ib)-Ib+1}else{for(c=s=h[d],i=1;s>=10;s/=10)i++;l=(a=(o%=Ib)-Ib+i)<0?0:c/Lb(10,i-a-1)%10|0}if(r=r||e<0||void 0!==h[d+1]||(a<0?c:c%Lb(10,i-a-1)),u=n<4?(l||r)&&(0==n||n==(t.s<0?3:2)):l>5||5==l&&(4==n||r||6==n&&(o>0?a>0?c/Lb(10,i-a):0:h[d-1])%10&1||n==(t.s<0?8:7)),e<1||!h[0])return h.length=0,u?(e-=t.e+1,h[0]=Lb(10,(Ib-e%Ib)%Ib),t.e=-e||0):h[0]=t.e=0,t;if(0==o?(h.length=d,s=1,d--):(h.length=d+1,s=Lb(10,Ib-o),h[d]=a>0?(c/Lb(10,i-a)%Lb(10,a)|0)*s:0),u)for(;;){if(0==d){for(o=1,a=h[0];a>=10;a/=10)o++;for(a=h[0]+=s,s=1;a>=10;a/=10)s++;o!=s&&(t.e++,h[0]==Nb&&(h[0]=1));break}if(h[d]+=s,h[d]!=Nb)break;h[d--]=0,s=1}for(o=h.length;0===h[--o];)h.pop()}return Cb&&(t.e>f.maxE?(t.d=null,t.e=NaN):t.e<f.minE&&(t.e=0,t.d=[0])),t}function Wb(t,e,n){if(!t.isFinite())return Jb(t);var r,i=t.e,o=Bb(t.d),a=o.length;return e?(n&&(r=n-a)>0?o=o.charAt(0)+"."+o.slice(1)+Xb(r):a>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(t.e<0?"e":"e+")+t.e):i<0?(o="0."+Xb(-i-1)+o,n&&(r=n-a)>0&&(o+=Xb(r))):i>=a?(o+=Xb(i+1-a),n&&(r=n-i-1)>0&&(o=o+"."+Xb(r))):((r=i+1)<a&&(o=o.slice(0,r)+"."+o.slice(r)),n&&(r=n-a)>0&&(i+1===a&&(o+="."),o+=Xb(r))),o}function Vb(t,e){var n=t[0];for(e*=Ib;n>=10;n/=10)e++;return e}function Ub(t,e,n){if(e>Ab)throw Cb=!0,n&&(t.precision=n),Error(bb);return Gb(new t(gb),e,1,!0)}function jb(t,e,n){if(e>Pb)throw Error(bb);return Gb(new t(yb),e,n,!0)}function Yb(t){var e=t.length-1,n=e*Ib+1;if(e=t[e]){for(;e%10==0;e/=10)n--;for(e=t[0];e>=10;e/=10)n++}return n}function Xb(t){for(var e="";t--;)e+="0";return e}function qb(t,e,n,r){var i,o=new t(1),a=Math.ceil(r/Ib+4);for(Cb=!1;;){if(n%2&&aE((o=o.times(e)).d,a)&&(i=!0),0===(n=Tb(n/2))){n=o.d.length-1,i&&0===o.d[n]&&++o.d[n];break}aE((e=e.times(e)).d,a)}return Cb=!0,o}function Kb(t){return 1&t.d[t.d.length-1]}function Zb(t,e,n){for(var r,i=new t(e[0]),o=0;++o<e.length;){if(!(r=new t(e[o])).s){i=r;break}i[n](r)&&(i=r)}return i}function $b(t,e){var n,r,i,o,a,s,l,u=0,c=0,h=0,d=t.constructor,f=d.rounding,p=d.precision;if(!t.d||!t.d[0]||t.e>17)return new d(t.d?t.d[0]?t.s<0?0:1/0:1:t.s?t.s<0?0:t:NaN);for(null==e?(Cb=!1,l=p):l=e,s=new d(.03125);t.e>-2;)t=t.times(s),h+=5;for(l+=r=Math.log(Lb(2,h))/Math.LN10*2+5|0,n=o=a=new d(1),d.precision=l;;){if(o=Gb(o.times(t),l,1),n=n.times(++c),Bb((s=a.plus(zb(o,n,l,1))).d).slice(0,l)===Bb(a.d).slice(0,l)){for(i=h;i--;)a=Gb(a.times(a),l,1);if(null!=e)return d.precision=p,a;if(!(u<3&&Fb(a.d,l-r,f,u)))return Gb(a,d.precision=p,f,Cb=!0);d.precision=l+=10,n=o=s=new d(1),c=0,u++}a=s}}function Qb(t,e){var n,r,i,o,a,s,l,u,c,h,d,f=1,p=t,v=p.d,g=p.constructor,y=g.rounding,m=g.precision;if(p.s<0||!v||!v[0]||!p.e&&1==v[0]&&1==v.length)return new g(v&&!v[0]?-1/0:1!=p.s?NaN:v?0:p);if(null==e?(Cb=!1,c=m):c=e,g.precision=c+=10,r=(n=Bb(v)).charAt(0),!(Math.abs(o=p.e)<15e14))return u=Ub(g,c+2,m).times(o+""),p=Qb(new g(r+"."+n.slice(1)),c-10).plus(u),g.precision=m,null==e?Gb(p,m,y,Cb=!0):p;for(;r<7&&1!=r||1==r&&n.charAt(1)>3;)r=(n=Bb((p=p.times(t)).d)).charAt(0),f++;for(o=p.e,r>1?(p=new g("0."+n),o++):p=new g(r+"."+n.slice(1)),h=p,l=a=p=zb(p.minus(1),p.plus(1),c,1),d=Gb(p.times(p),c,1),i=3;;){if(a=Gb(a.times(d),c,1),Bb((u=l.plus(zb(a,new g(i),c,1))).d).slice(0,c)===Bb(l.d).slice(0,c)){if(l=l.times(2),0!==o&&(l=l.plus(Ub(g,c+2,m).times(o+""))),l=zb(l,new g(f),c,1),null!=e)return g.precision=m,l;if(!Fb(l.d,c-10,y,s))return Gb(l,g.precision=m,y,Cb=!0);g.precision=c+=10,u=a=p=zb(h.minus(1),h.plus(1),c,1),d=Gb(p.times(p),c,1),i=s=1}l=u,i+=2}}function Jb(t){return String(t.s*t.s/0)}function tE(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;48===e.charCodeAt(r);r++);for(i=e.length;48===e.charCodeAt(i-1);--i);if(e=e.slice(r,i)){if(i-=r,t.e=n=n-r-1,t.d=[],r=(n+1)%Ib,n<0&&(r+=Ib),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=Ib;r<i;)t.d.push(+e.slice(r,r+=Ib));e=e.slice(r),r=Ib-e.length}else r-=i;for(;r--;)e+="0";t.d.push(+e),Cb&&(t.e>t.constructor.maxE?(t.d=null,t.e=NaN):t.e<t.constructor.minE&&(t.e=0,t.d=[0]))}else t.e=0,t.d=[0];return t}function eE(t,e){var n,r,i,o,a,s,l,u,c;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),Ob.test(e))return tE(t,e)}else if("Infinity"===e||"NaN"===e)return+e||(t.s=NaN),t.e=NaN,t.d=null,t;if(Mb.test(e))n=16,e=e.toLowerCase();else if(_b.test(e))n=2;else{if(!Rb.test(e))throw Error(xb+e);n=8}for((o=e.search(/p/i))>0?(l=+e.slice(o+1),e=e.substring(2,o)):e=e.slice(2),a=(o=e.indexOf("."))>=0,r=t.constructor,a&&(o=(s=(e=e.replace(".","")).length)-o,i=qb(r,new r(n),o,2*o)),o=c=(u=Hb(e,n,Nb)).length-1;0===u[o];--o)u.pop();return o<0?new r(0*t.s):(t.e=Vb(u,c),t.d=u,Cb=!1,a&&(t=zb(t,i,4*s)),l&&(t=t.times(Math.abs(l)<54?Lb(2,l):qE.pow(2,l))),Cb=!0,t)}function nE(t,e,n,r,i){var o,a,s,l,u=t.precision,c=Math.ceil(u/Ib);for(Cb=!1,l=n.times(n),s=new t(r);;){if(a=zb(s.times(l),new t(e++*e++),u,1),s=i?r.plus(a):r.minus(a),r=zb(a.times(l),new t(e++*e++),u,1),void 0!==(a=s.plus(r)).d[c]){for(o=c;a.d[o]===s.d[o]&&o--;);if(-1==o)break}o=s,s=r,r=a,a=o}return Cb=!0,a.d.length=c+1,a}function rE(t,e){for(var n=t;--e;)n*=t;return n}function iE(t,e){var n,r=e.s<0,i=jb(t,t.precision,1),o=i.times(.5);if((e=e.abs()).lte(o))return db=r?4:1,e;if((n=e.divToInt(i)).isZero())db=r?3:2;else{if((e=e.minus(n.times(i))).lte(o))return db=Kb(n)?r?2:3:r?4:1,e;db=Kb(n)?r?1:4:r?3:2}return e.minus(i).abs()}function oE(t,e,n,r){var i,o,a,s,l,u,c,h,d,f=t.constructor,p=void 0!==n;if(p?(Db(n,1,pb),void 0===r?r=f.rounding:Db(r,0,8)):(n=f.precision,r=f.rounding),t.isFinite()){for(p?(i=2,16==e?n=4*n-3:8==e&&(n=3*n-2)):i=e,(a=(c=Wb(t)).indexOf("."))>=0&&(c=c.replace(".",""),(d=new f(1)).e=c.length-a,d.d=Hb(Wb(d),10,i),d.e=d.d.length),o=l=(h=Hb(c,10,i)).length;0==h[--l];)h.pop();if(h[0]){if(a<0?o--:((t=new f(t)).d=h,t.e=o,h=(t=zb(t,d,n,r,0,i)).d,o=t.e,u=hb),a=h[n],s=i/2,u=u||void 0!==h[n+1],u=r<4?(void 0!==a||u)&&(0===r||r===(t.s<0?3:2)):a>s||a===s&&(4===r||u||6===r&&1&h[n-1]||r===(t.s<0?8:7)),h.length=n,u)for(;++h[--n]>i-1;)h[n]=0,n||(++o,h.unshift(1));for(l=h.length;!h[l-1];--l);for(a=0,c="";a<l;a++)c+=vb.charAt(h[a]);if(p){if(l>1)if(16==e||8==e){for(a=16==e?4:3,--l;l%a;l++)c+="0";for(l=(h=Hb(c,i,e)).length;!h[l-1];--l);for(a=1,c="1.";a<l;a++)c+=vb.charAt(h[a])}else c=c.charAt(0)+"."+c.slice(1);c=c+(o<0?"p":"p+")+o}else if(o<0){for(;++o;)c="0"+c;c="0."+c}else if(++o>l)for(o-=l;o--;)c+="0";else o<l&&(c=c.slice(0,o)+"."+c.slice(o))}else c=p?"0p+0":"0";c=(16==e?"0x":2==e?"0b":8==e?"0o":"")+c}else c=Jb(t);return t.s<0?"-"+c:c}function aE(t,e){if(t.length>e)return t.length=e,!0}function sE(t){return new this(t).abs()}function lE(t){return new this(t).acos()}function uE(t){return new this(t).acosh()}function cE(t,e){return new this(t).plus(e)}function hE(t){return new this(t).asin()}function dE(t){return new this(t).asinh()}function fE(t){return new this(t).atan()}function pE(t){return new this(t).atanh()}function vE(t,e){t=new this(t),e=new this(e);var n,r=this.precision,i=this.rounding,o=r+4;return t.s&&e.s?t.d||e.d?!e.d||t.isZero()?(n=e.s<0?jb(this,r,i):new this(0)).s=t.s:!t.d||e.isZero()?(n=jb(this,o,1).times(.5)).s=t.s:e.s<0?(this.precision=o,this.rounding=1,n=this.atan(zb(t,e,o,1)),e=jb(this,o,1),this.precision=r,this.rounding=i,n=t.s<0?n.minus(e):n.plus(e)):n=this.atan(zb(t,e,o,1)):(n=jb(this,o,1).times(e.s>0?.25:.75)).s=t.s:n=new this(NaN),n}function gE(t){return new this(t).cbrt()}function yE(t){return Gb(t=new this(t),t.e+1,2)}function mE(t,e,n){return new this(t).clamp(e,n)}function CE(t){if(!t||"object"!==h(t))throw Error(wb+"Object expected");var e,n,r,i=!0===t.defaults,o=["precision",1,pb,"rounding",0,8,"toExpNeg",-fb,0,"toExpPos",0,fb,"maxE",0,fb,"minE",-fb,0,"modulo",0,9];for(e=0;e<o.length;e+=3)if(n=o[e],i&&(this[n]=mb[n]),void 0!==(r=t[n])){if(!(Tb(r)===r&&r>=o[e+1]&&r<=o[e+2]))throw Error(xb+n+": "+r);this[n]=r}if(n="crypto",i&&(this[n]=mb[n]),void 0!==(r=t[n])){if(!0!==r&&!1!==r&&0!==r&&1!==r)throw Error(xb+n+": "+r);if(r){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw Error(Eb);this[n]=!0}else this[n]=!1}return this}function wE(t){return new this(t).cos()}function xE(t){return new this(t).cosh()}function bE(t,e){return new this(t).div(e)}function EE(t){return new this(t).exp()}function SE(t){return Gb(t=new this(t),t.e+1,3)}function TE(){var t,e,n=new this(0);for(Cb=!1,t=0;t<arguments.length;)if((e=new this(arguments[t++])).d)n.d&&(n=n.plus(e.times(e)));else{if(e.s)return Cb=!0,new this(1/0);n=e}return Cb=!0,n.sqrt()}function LE(t){return t instanceof qE||t&&t.toStringTag===Sb||!1}function _E(t){return new this(t).ln()}function ME(t,e){return new this(t).log(e)}function RE(t){return new this(t).log(2)}function OE(t){return new this(t).log(10)}function NE(){return Zb(this,arguments,"lt")}function IE(){return Zb(this,arguments,"gt")}function AE(t,e){return new this(t).mod(e)}function PE(t,e){return new this(t).mul(e)}function kE(t,e){return new this(t).pow(e)}function BE(t){var e,n,r,i,o=0,a=new this(1),s=[];if(void 0===t?t=this.precision:Db(t,1,pb),r=Math.ceil(t/Ib),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(r));o<r;)(i=e[o])>=429e7?e[o]=crypto.getRandomValues(new Uint32Array(1))[0]:s[o++]=i%1e7;else{if(!crypto.randomBytes)throw Error(Eb);for(e=crypto.randomBytes(r*=4);o<r;)(i=e[o]+(e[o+1]<<8)+(e[o+2]<<16)+((127&e[o+3])<<24))>=214e7?crypto.randomBytes(4).copy(e,o):(s.push(i%1e7),o+=4);o=r/4}else for(;o<r;)s[o++]=1e7*Math.random()|0;for(r=s[--o],t%=Ib,r&&t&&(i=Lb(10,Ib-t),s[o]=(r/i|0)*i);0===s[o];o--)s.pop();if(o<0)n=0,s=[0];else{for(n=-1;0===s[0];n-=Ib)s.shift();for(r=1,i=s[0];i>=10;i/=10)r++;r<Ib&&(n-=Ib-r)}return a.e=n,a.d=s,a}function DE(t){return Gb(t=new this(t),t.e+1,this.rounding)}function FE(t){return(t=new this(t)).d?t.d[0]?t.s:0*t.s:t.s||NaN}function HE(t){return new this(t).sin()}function zE(t){return new this(t).sinh()}function GE(t){return new this(t).sqrt()}function WE(t,e){return new this(t).sub(e)}function VE(){var t=0,e=arguments,n=new this(e[t]);for(Cb=!1;n.s&&++t<e.length;)n=n.plus(e[t]);return Cb=!0,Gb(n,this.precision,this.rounding)}function UE(t){return new this(t).tan()}function jE(t){return new this(t).tanh()}function YE(t){return Gb(t=new this(t),t.e+1,1)}kb[Symbol.for("nodejs.util.inspect.custom")]=kb.toString,kb[Symbol.toStringTag]="Decimal";var XE,qE=kb.constructor=function t(e){var n,r,i;function o(t){var e,n,r,i=this;if(!(i instanceof o))return new o(t);if(i.constructor=o,LE(t))return i.s=t.s,void(Cb?!t.d||t.e>o.maxE?(i.e=NaN,i.d=null):t.e<o.minE?(i.e=0,i.d=[0]):(i.e=t.e,i.d=t.d.slice()):(i.e=t.e,i.d=t.d?t.d.slice():t.d));if("number"===(r=h(t))){if(0===t)return i.s=1/t<0?-1:1,i.e=0,void(i.d=[0]);if(t<0?(t=-t,i.s=-1):i.s=1,t===~~t&&t<1e7){for(e=0,n=t;n>=10;n/=10)e++;return void(Cb?e>o.maxE?(i.e=NaN,i.d=null):e<o.minE?(i.e=0,i.d=[0]):(i.e=e,i.d=[t]):(i.e=e,i.d=[t]))}return 0*t!=0?(t||(i.s=NaN),i.e=NaN,void(i.d=null)):tE(i,t.toString())}if("string"!==r)throw Error(xb+t);return 45===(n=t.charCodeAt(0))?(t=t.slice(1),i.s=-1):(43===n&&(t=t.slice(1)),i.s=1),Ob.test(t)?tE(i,t):eE(i,t)}if(o.prototype=kb,o.ROUND_UP=0,o.ROUND_DOWN=1,o.ROUND_CEIL=2,o.ROUND_FLOOR=3,o.ROUND_HALF_UP=4,o.ROUND_HALF_DOWN=5,o.ROUND_HALF_EVEN=6,o.ROUND_HALF_CEIL=7,o.ROUND_HALF_FLOOR=8,o.EUCLID=9,o.config=o.set=CE,o.clone=t,o.isDecimal=LE,o.abs=sE,o.acos=lE,o.acosh=uE,o.add=cE,o.asin=hE,o.asinh=dE,o.atan=fE,o.atanh=pE,o.atan2=vE,o.cbrt=gE,o.ceil=yE,o.clamp=mE,o.cos=wE,o.cosh=xE,o.div=bE,o.exp=EE,o.floor=SE,o.hypot=TE,o.ln=_E,o.log=ME,o.log10=OE,o.log2=RE,o.max=NE,o.min=IE,o.mod=AE,o.mul=PE,o.pow=kE,o.random=BE,o.round=DE,o.sign=FE,o.sin=HE,o.sinh=zE,o.sqrt=GE,o.sub=WE,o.sum=VE,o.tan=UE,o.tanh=jE,o.trunc=YE,void 0===e&&(e={}),e&&!0!==e.defaults)for(i=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],n=0;n<i.length;)e.hasOwnProperty(r=i[n++])||(e[r]=this[r]);return o.config(e),o}(mb);gb=new qE(gb),yb=new qE(yb);var KE=function(t){return"number"==typeof t?Number.isNaN(t):!t||("string"!=typeof t||Number.isNaN(Number(t)))},ZE=function(t){return!KE(t)},$E=function(t,e,n){return void 0===n&&(n=!1),(null==t?void 0:t.length)?t.reduce((function(t,r){var i=Cx.getFieldValue(r,e),o=KE(i);if(n&&o)return t;var a=o?0:i;return t.push(new qE(a)),t}),[]):[]},QE=function(t,e){var n=$E(t,e);return n.length?qE.sum.apply(qE,O([],R(n),!1)).toNumber():0},JE=function(t,e,n){var r=$E(e,n,!0);if(null==r?void 0:r.length)return qE[t].apply(qE,O([],R(r),!1)).toNumber()},tS=((XE={})[FC.SUM]=QE,XE[FC.MIN]=function(t,e){return JE("min",t,e)},XE[FC.MAX]=function(t,e){return JE("max",t,e)},XE[FC.AVG]=function(t,e){var n=$E(t,e);return(null==n?void 0:n.length)?qE.sum.apply(qE,O([],R(n),!1)).dividedBy(n.length).toNumber():0},XE),eS=function(t){return"ASC"===_y(t)},nS=function(t){return"DESC"===_y(t)},rS=function(t,e,n){var r=eS(e)?1:-1,i=["-",void 0];return null==t?void 0:t.sort((function(t,e){var o=t,a=e;if(n){if(o=t.getValueByField(n),a=e.getValueByField(n),ZE(o)&&ZE(a))return(Number(o)-Number(a))*r;if(o&&(null==i?void 0:i.includes(null==o?void 0:o.toString())))return-r;if(Number(o)&&(null==i?void 0:i.includes(null==a?void 0:a.toString())))return r}return Og(o)||Og(a)?o?r:-r:o.toString().localeCompare(a.toString(),"zh")*r}))},iS=function(t,e,n){return n?function(t,e){var n;return null===(n=null==t?void 0:t.filter((function(t){return!(null==e?void 0:e.includes(t))})))||void 0===n?void 0:n.concat(e)}(e,Iy(t)):O([],R(new Set(O(O([],R(t),!1),R(e),!1))),!1)},oS=function(t){var e=t.sortByValues,n=void 0===e?[]:e,r=t.originValues,i=void 0===r?[]:r,o=i.filter((function(t){return n.find((function(e){return function(t,e,n){t=Ph(t),e=Su(e);var r=t.length,i=n=void 0===n?r:Kd(Fu(n),0,r);return(n-=e.length)>=0&&t.slice(n,i)==e}(t,e)}))})),a=o.map((function(t){var e=t.split(NC);return e.length>1?[e.slice(0,e.length-1).join(NC),e[e.length-1]]:e})),s=Array.from(new Set(a.map((function(t){return t[0]}))));a.sort((function(t,e){var r=t.slice(0,t.length-1),i=e.slice(0,e.length-1);return r.join()!==i.join()?s.indexOf(r[0])-s.indexOf(i[0]):n.indexOf(t[t.length-1])-n.indexOf(e[e.length-1])}));var l,u,c=a.map((function(t){return t.join(NC)}));return l=c,i.sort((function(t,e){u&&(t=u(t),e=u(e));var n=l.indexOf(t),r=l.indexOf(e);return-1===n&&-1===r?0:-1===n?1:-1===r?-1:n-r}))},aS=function(t){var e,n=t.sortParam,r=t.measureValues,i=t.originValues,o=t.dataSet,a=n,s=a.sortByMeasure,l=a.query,u=a.sortFieldId,c=a.sortMethod,h=o.fields,d=h.rows,f=void 0===d?[]:d,p=h.columns,v=void 0===p?[]:p,g=null==f?void 0:f.includes(u);if(s){var y=rS(r,c,s===Ql?null==l?void 0:l[Kl]:s);e=function(t,e,n){var r;void 0===e&&(e=[]);var i=e.slice(0,e.indexOf(t)+1);return null===(r=n.map((function(t){return i.map((function(e){return t.getValueByField(e)})).join("".concat(NC))})))||void 0===r?void 0:r.filter(Boolean)}(u,g?f:jx(v),y)}else e=rS(r,c);return iS(e,i,eS(c))},sS=function(t){var e=t.sortParam,n=t.originValues,r=void 0===n?[]:n,i=t.measureValues,o=t.dataSet,a=e,s=a.sortFunc,l=a.sortMethod,u=a.sortBy,c=r,h={originValues:r,measureValues:i,sortParam:e,dataSet:o};return s?c=function(t){var e=t.originValues,n=void 0===e?[]:e,r=t.measureValues,i=t.sortParam,o=t.dataSet,a=i,s=a.sortFunc,l=a.sortFieldId,u=a.sortMethod,c=null==s?void 0:s(S({data:r},i));return(null==c?void 0:c.length)?(o.fields.rows.indexOf(l)>0||o.fields.columns.indexOf(l)>0)&&!yg(c[0],NC)?oS({sortByValues:c,originValues:n}):iS(c,n,eS(u)):n}(h):u?c=oS({sortByValues:u,originValues:r}):(eS(l)||nS(l))&&(c=aS(h)),c},lS=function(t){var e=t.dataSet,n=t.sortParam,r=t.originValues,i=e.fields,o=n,a=o.sortByMeasure,s=o.query,l=o.sortFieldId;if(a!==Ql)return e.getCellMultiData({query:s,queryType:MC.DetailOnly});var u=e.getCellMultiData({query:s,queryType:MC.All}),c=jx(i.columns),h=yg(i.rows,l),d=Jx(h?i.rows:c),f=Jx(h?c:i.rows),p=d[d.indexOf(l)+1],v=ch(s),g=f.filter((function(t){return!v.includes(t)})),y=u.filter((function(t){var e=new Set(ch(t[Zl]));return!!e.has(l)&&(!e.has(p)&&g.every((function(t){return!e.has(t)})))}));return _g(y)?yp(Jv(r,(function(t){var n=function(t,e,n){var r,i={};if(yg(t,NC))for(var o=Sy(t,NC),a=(null===(r=null==e?void 0:e.rows)||void 0===r?void 0:r.includes(n))?e.rows:jx(e.columns),s=0;s<=Cg(a,n);s++)i[a[s]]=o[s];else i[n]=t;return i}(t,i,l);return e.getTotalValue(S(S({},s),n))}))):y},uS=function(t,e){if(null==t?void 0:t.sortMethod){if(eS(null==t?void 0:t.sortMethod))return"groupAsc";if(nS(null==t?void 0:t.sortMethod))return"groupDesc"}if(e)return"SortDown"},cS=function(t){var e,n,r=t.pivotMeta,i=t.dimensions,o=t.sortedDimensionValues,a=t.sortFieldId,s={children:r},l=[s];try{for(var u=M(i),c=u.next();!c.done;c=u.next()){if(c.value===a){l.forEach((function(t){var e=O([],R(t.children.values()),!1),n=Ey(e,(function(t){return Cg(o,t.id)})).map((function(t){return[t.value,t]}));t.children=new Map(n)}));break}l=tg(l,(function(t){return O([],R(t.children.values()),!1)}))}}catch(h){e={error:h}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(e)throw e.error}}return s.children},hS=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return E(e,t),e.prototype.getHeaderConfig=function(){return this.headerConfig||{}},e.prototype.isShallowRender=function(){return this.headerConfig.shallowRender},e.prototype.shouldInit=function(){return t.prototype.shouldInit.call(this)&&!this.isShallowRender()},e.prototype.handleRestOptions=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=R(t,1)[0];this.headerConfig=S({},n);var r=this.meta,i=r.value,o=r.query,a=this.spreadsheet.dataCfg.sortParams||[],s=this.isSortCell(),l=Xv(O([],R(a),!1).reverse(),(function(t){return s&&(null==t?void 0:t.sortByMeasure)===i&&Mg(Hh(t,"query"),o)})),u=uS(l,s);this.headerConfig.sortParam=S(S(S({},this.headerConfig.sortParam),l||{query:o}),{type:u})},e.prototype.initCell=function(){this.resetTextAndConditionIconShapes(),this.actionIcons=[],this.hasDefaultHiddenIcon=!1,this.generateIconConfig()},e.prototype.generateIconConfig=function(){var t,e;this.conditionIconMappingResult=this.getIconConditionResult();var n=this.getHeaderConfig().sortParam;this.showSortIcon()?this.actionIconConfig={icons:[{name:Hh(n,"type","none"),position:"right"}],belongsCell:this.cellType,isSortIcon:!0}:this.actionIconConfig=Ew(this.spreadsheet.options.headerActionIcons,this.meta,this.cellType),this.groupedIcons=Tw(null!==(e=null===(t=this.actionIconConfig)||void 0===t?void 0:t.icons)&&void 0!==e?e:[],this.conditionIconMappingResult)},e.prototype.getFormattedFieldValue=function(){var t=this.meta,e=t.isTotalRoot,n=t.isGrandTotals,r=t.value,i=this.spreadsheet.dataSet.getFieldFormatter(this.meta.field);return{formattedValue:!this.spreadsheet.isTableMode()&&(this.spreadsheet.isHierarchyTreeType()?!(n&&e):!e)&&i?i(r,void 0,this.meta):r,value:r}},e.prototype.showSortIcon=function(){var t=this.spreadsheet,e=t.options,n=_g(t.dataCfg.fields.values);if(e.showDefaultHeaderActionIcon&&!n){var r=this.getHeaderConfig().sortParam,i=this.meta.query;return i&&Mg(null==r?void 0:r.query,i)&&(null==r?void 0:r.type)&&"none"!==(null==r?void 0:r.type)}return!1},e.prototype.getActionIconStyle=function(t){var e=this.getStyle().icon,n=this.getTextConditionMappingResult(),r=(null==n?void 0:n.fill)||this.getTextStyle().fill;return{width:null==e?void 0:e.size,height:null==e?void 0:e.size,fill:(null==t?void 0:t.fill)||(null==e?void 0:e.fill)||r,cursor:"pointer"}},e.prototype.hasDefaultHideActionIcon=function(){return this.hasDefaultHiddenIcon},e.prototype.addActionIcon=function(t){var e=this,n=t.x,r=t.y,i=t.name,o=t.defaultHide,a=t.onClick,s=t.onHover,l=t.isSortIcon,u=new YC(S(S({},this.getActionIconStyle(t)),{name:i,x:n,y:r}));u.setAttribute("visibility",o?"hidden":"visible"),u.addEventListener("mouseover",(function(t){e.spreadsheet.emit(Xl.GLOBAL_ACTION_ICON_HOVER,t),null==s||s({hovering:!0,name:i,meta:e.meta,event:t})})),u.addEventListener("mouseleave",(function(t){e.spreadsheet.emit(Xl.GLOBAL_ACTION_ICON_HOVER_OFF,t),null==s||s({hovering:!1,name:i,meta:e.meta,event:t})})),u.addEventListener("click",(function(t){e.spreadsheet.emit(Xl.GLOBAL_ACTION_ICON_CLICK,t),l?e.spreadsheet.handleGroupSort(t,e.meta):null==a||a({name:i,meta:e.meta,event:t})})),this.actionIcons.push(u),this.appendChild(u)},e.prototype.drawActionAndConditionIcons=function(){var t=this;_g(this.groupedIcons.left)&&_g(this.groupedIcons.right)||this.leftIconPosition&&this.rightIconPosition&&kv(this.groupedIcons,(function(e,n){var r=t.getStyle().icon,i=r.size,o=r.margin,a=o.right,s="left"===n?t.leftIconPosition:t.rightIconPosition;kv(e,(function(e,n){var r,o,l,u=s.x+(i+a)*n,c=s.y;if(e.isConditionIcon)return t.conditionIconShape=ww(t,{x:u,y:c,name:e.name,width:i,height:i,fill:e.fill}),void t.addConditionIconShape(t.conditionIconShape);var h=t.actionIconConfig,d=h.onClick,f=h.onHover,p=h.defaultHide,v=h.isSortIcon,g=null!==(r=e.defaultHide)&&void 0!==r?r:p,y="function"==typeof g?g(t.meta,e.name):g;y&&(t.hasDefaultHiddenIcon=!0),t.addActionIcon({name:e.name,fill:e.fill,x:u,y:c,defaultHide:y,onClick:null!==(o=e.onClick)&&void 0!==o?o:d,onHover:null!==(l=e.onHover)&&void 0!==l?l:f,isSortIcon:v})}))}))},e.prototype.isSortCell=function(){var t,e,n,r=null===(e=null===(t=this.spreadsheet)||void 0===t?void 0:t.isValueInCols)||void 0===e?void 0:e.call(t),i=this.meta.level===(null===(n=this.meta.hierarchy)||void 0===n?void 0:n.maxLevel);return r?i&&this.cellType===hm.COL_CELL:i&&this.cellType===hm.ROW_CELL},e.prototype.handleByStateName=function(t,e){wx(t,this)&&this.updateByState(e)},e.prototype.handleSearchResult=function(t){wx(t,this)&&(Xv(t,(function(t){return null==t?void 0:t.isTarget})).id===this.getMeta().id?this.updateByState(cm.HIGHLIGHT):this.updateByState(cm.SEARCH_RESULT))},e.prototype.handleHover=function(t){var e;wx(t,this)&&(this.updateByState(cm.HOVER),this.hasDefaultHideActionIcon()&&this.toggleActionIcon(null===(e=null==t?void 0:t[0])||void 0===e?void 0:e.id))},e.prototype.handleSelect=function(t,e){void 0===e&&(e=[]),wx(t,this)&&this.updateByState(cm.SELECTED),yg(Jv(e,"id"),this.meta.id)&&this.updateByState(cm.SELECTED)},e.prototype.getTextStyle=function(){var t,e=this.getCellTextWordWrapStyle(),n=this.getStyle(),r=n.text,i=n.bolderText,o=n.measureText;return t=this.isMeasureField()?o||r:this.isBolderText()?i:r,this.getContainConditionMappingResultTextStyle(S(S({},e),t))},e.prototype.getBackgroundColor=function(){var t,e=(null===(t=this.getStyle())||void 0===t?void 0:t.cell)||{},n=e.backgroundColor,r=e.backgroundColorOpacity;return Gg({backgroundColor:n,backgroundColorOpacity:r},this.getBackgroundConditionFill())},e.prototype.toggleActionIcon=function(t){if(this.getMeta().id===t){var e=[];kv(this.actionIcons,(function(t){"visible"!==t.parsedStyle.visibility&&(t.setAttribute("visibility","visible"),e.push(t))})),this.spreadsheet.store.set("visibleActionIcons",e)}},e.prototype.getIconPosition=function(){return this.leftIconPosition||this.rightIconPosition},e.prototype.update=function(){var t=this.spreadsheet.interaction,e=null==t?void 0:t.getState(),n=null==t?void 0:t.getCells([hm.CORNER_CELL,hm.COL_CELL,hm.ROW_CELL,hm.SERIES_NUMBER_CELL]);if($v(n))switch(null==e?void 0:e.stateName){case cm.SELECTED:case cm.ROW_CELL_BRUSH_SELECTED:case cm.COL_CELL_BRUSH_SELECTED:this.handleSelect(n,null==e?void 0:e.nodes);break;case cm.HOVER_FOCUS:case cm.HOVER:this.handleHover(n);break;case cm.SEARCH_RESULT:this.handleSearchResult(n);break;default:this.handleByStateName(n,null==e?void 0:e.stateName)}},e.prototype.updateByState=function(e){t.prototype.updateByState.call(this,e,this)},e.prototype.hideInteractionShape=function(){t.prototype.hideInteractionShape.call(this)},e.prototype.isMeasureField=function(){return[Kl,$l].includes(this.meta.field)},e.prototype.mappingValue=function(t){var e=this.getMeta().value;return t.mapping(e,this.meta,this)},e.prototype.findFieldCondition=function(t){var e=this;return void 0===t&&(t=[]),Zv(t,(function(t){return t.field instanceof RegExp?t.field.test(e.meta.field):t.field===e.meta.field}))},e.prototype.getTreeIcon=function(){return this.treeIcon},e.prototype.getActionIcons=function(){return this.actionIcons||[]},e}(mx),dS=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return E(e,t),Object.defineProperty(e.prototype,"cellType",{get:function(){return hm.CORNER_CELL},enumerable:!1,configurable:!0}),e.prototype.isBolderText=function(){return this.meta.cornerType===HC.Col},e.prototype.getBorderPositions=function(){return[BC.TOP,BC.LEFT]},e.prototype.initCell=function(){t.prototype.initCell.call(this),this.resetTextAndConditionIconShapes(),this.drawBackgroundShape(),this.drawTextShape(),this.drawTreeIcon(),this.drawActionAndConditionIcons(),this.drawBorders(),this.drawResizeArea(),this.update()},e.prototype.drawTreeIcon=function(){var t,e=this;if(this.showTreeIcon()){var n=(null===(t=this.spreadsheet.options.style)||void 0===t?void 0:t.rowCell).collapseFields,r=void 0===n?{}:n,i=this.getStyle().icon.size,o=void 0===i?0:i,a=this.getTextStyle().fill,s=this.getBBoxByType(DC.CONTENT_BOX),l=this.spreadsheet.facet.getRowNodes(0),u=vg(r).filter(Boolean).length===l.length||l.every((function(t){return t.isCollapsed}));this.treeIcon=xw({group:this,iconCfg:{x:s.x,y:this.getIconPosition().y,width:o,height:o,fill:a},isCollapsed:u,onClick:function(){e.spreadsheet.facet.resetScrollY(),e.spreadsheet.emit(Xl.ROW_CELL_ALL_COLLAPSED__PRIVATE,u)}})}},e.prototype.isLastRowCornerCell=function(){var t=this.meta,e=t.cornerType,n=t.field,r=this.spreadsheet.dataSet.fields.rows;return e===HC.Row&&(this.spreadsheet.isHierarchyTreeType()||Iv(r)===n)},e.prototype.getResizeAreaEffect=function(){return this.meta.cornerType===HC.Series?Tm.Series:this.isLastRowCornerCell()&&this.spreadsheet.isHierarchyTreeType()?Tm.Tree:Tm.Field},e.prototype.drawResizeArea=function(){if(this.shouldDrawResizeAreaByType("cornerCellHorizontal",this)){var t=this.getResizeAreaStyle(),e=$x(this.spreadsheet,Zy);if(e){var n=this.getHeaderConfig(),r=n.position,i=n.scrollX,o=void 0===i?0:i,a=n.scrollY,s=void 0===a?0:a,l=n.width,u=n.height,c=this.getBBoxByType(),h=c.x,d=c.y,f=c.width,p=c.height,v=this.meta.cornerType,g={x:h+f-t.size,y:d,width:t.size,height:p},y={x:0,y:0,width:l,height:u};if(v!==HC.Col&&Qx(g,y,{scrollX:o,scrollY:s})){var m=r.x+h-o,C=r.y+(this.isLastRowCornerCell()?0:d),w=Zx({theme:t,type:Sm.Horizontal,effect:this.getResizeAreaEffect(),offsetX:m,offsetY:C,width:f,height:p,meta:this.meta});e.appendChild(new WC({style:S(S({},w.style),{x:m+f-t.size,y:C,height:this.isLastRowCornerCell()?u:p})},w.appendInfo))}}}},e.prototype.showTreeIcon=function(){return this.spreadsheet.isHierarchyTreeType()&&this.meta.cornerType===HC.Row},e.prototype.getTreeIconWidth=function(){var t=this.getStyle().icon,e=t.size,n=t.margin;return this.showTreeIcon()?e+n.right:0},e.prototype.getMaxTextWidth=function(){return this.getBBoxByType(DC.CONTENT_BOX).width-this.getTreeIconWidth()-this.getActionAndConditionIconWidth()},e.prototype.getTextPosition=function(){var t=this.getBBoxByType(DC.CONTENT_BOX),e=t.x,n=t.y,r=t.height,i=t.width,o=this.getTextStyle(),a=Rw({bbox:{x:e+this.getTreeIconWidth(),y:n,width:i-this.getTreeIconWidth(),height:r},textAlign:o.textAlign,textWidth:this.getActualTextWidth(),groupedIcons:this.groupedIcons,iconStyle:this.getIconStyle()}),s=a.textX,l=a.leftIconX,u=a.rightIconX,c=_w(t,o.textBaseline),h=this.getStyle().icon.size,d=Mw(void 0===h?0:h,c,o.fontSize,o.textBaseline);return this.leftIconPosition={x:l,y:d},this.rightIconPosition={x:u,y:d},{x:s,y:c}},e.prototype.getFormattedFieldValue=function(){return Lw(this.meta,this.spreadsheet.dataSet.getFieldName(this.meta.field))},e}(hS),fS=function(t){function e(e){return t.call(this,e)||this}return E(e,t),e.prototype.getCellInstance=function(t){var e=this.getHeaderConfig(),n=e.spreadsheet,r=n.options.cornerCell;return(null==r?void 0:r(t,n,e))||new dS(t,n,e)},e.getCornerHeader=function(t){var n=t.panelBBox,r=t.cornerBBox,i=t.seriesNumberWidth,o=t.layoutResult,a=t.spreadsheet,s=n.width,l=n.height,u=r.originalWidth,c=r.originalHeight,h=r.width,d=r.height;return new e({nodes:this.getCornerNodes({position:{x:r.x,y:r.y},width:u,height:c,layoutResult:o,seriesNumberWidth:i,spreadsheet:a}),position:{x:r.x,y:r.y},width:h,height:d,originalHeight:c,originalWidth:u,viewportWidth:s,viewportHeight:l,seriesNumberWidth:i,spreadsheet:a})},e.getTreeCornerText=function(t){var e=t.spreadsheet,n=e.dataSet.fields.rows,r=void 0===n?[]:n,i=e.options.cornerText;if(i)return i;var o=e.store.get("drillDownFieldInLevel",[]).map((function(t){return t.drillField})),a=r.filter((function(t){return!yg(o,t)})).map((function(t){return e.dataSet.getFieldName(t)})).join("/");return a||Fy("")},e.getCornerNodes=function(t){var e,n,r,i,o,a,s=t.position,l=t.width,u=t.layoutResult,c=t.seriesNumberWidth,h=t.spreadsheet,d=u.rowsHierarchy,f=u.colsHierarchy,p=(null===(e=null==h?void 0:h.dataSet)||void 0===e?void 0:e.fields)||{},v=p.rows,g=void 0===v?[]:v,y=p.columns,m=void 0===y?[]:y,C=h.options.style.colCell,w=[],x=null==f?void 0:f.sampleNodeForLastLevel;if(c){var b=new QC({id:"",field:"",value:rm(null===(n=h.options.seriesNumber)||void 0===n?void 0:n.text)});b.x=null==s?void 0:s.x,b.y=null!==(r=null==x?void 0:x.y)&&void 0!==r?r:0,b.width=c,b.height=null!==(i=null==x?void 0:x.height)&&void 0!==i?i:null==C?void 0:C.height,b.isPivotMode=!0,b.spreadsheet=h,b.cornerType=HC.Series,w.push(b)}if(h.isHierarchyTreeType()){var E=this.getTreeCornerText(t),S=new QC({id:E,field:"",value:E});S.x=s.x+c,S.y=null!==(o=null==x?void 0:x.y)&&void 0!==o?o:0,S.width=l-c,S.height=null!==(a=null==x?void 0:x.height)&&void 0!==a?a:null==C?void 0:C.height,S.seriesNumberWidth=c,S.isPivotMode=!0,S.spreadsheet=h,S.cornerType=HC.Row,w.push(S)}else{var T=d.sampleNodesForAllLevels||[],L=h.isCustomRowFields();T.forEach((function(t){var e,n,r=L?t.field:g[t.level],i=h.dataSet.getFieldName(r),o=new QC({id:r,field:r,value:i});o.x=t.x+c,o.y=null!==(e=null==x?void 0:x.y)&&void 0!==e?e:0,o.width=t.width,o.height=null!==(n=null==x?void 0:x.height)&&void 0!==n?n:null==C?void 0:C.height,o.isPivotMode=!0,o.cornerType=HC.Row,o.spreadsheet=h,w.push(o)}))}var _=f.sampleNodesForAllLevels||[],M=h.isCustomColumnFields();return _.forEach((function(t){if(t.level<f.maxLevel){var e=M?t.field:m[t.level],n=h.dataSet.getFieldName(e),r=new QC({id:e,field:e,value:n});r.x=s.x,r.y=t.y,r.width=l,r.height=t.height,r.isPivotMode=!0,r.cornerType=HC.Col,r.spreadsheet=h,w.push(r)}})),w},e.prototype.onCorScroll=function(t,e){this.headerConfig.scrollX=t,this.render(e)},e.prototype.destroy=function(){t.prototype.destroy.call(this)},e.prototype.layout=function(){this.renderCells()},e.prototype.renderCells=function(){var t,e=this,n=this.getHeaderConfig(),r=n.nodes,i=n.spreadsheet,o=null===(t=i.options)||void 0===t?void 0:t.cornerHeader;o?o(this,i,this.headerConfig):r.forEach((function(t){var n=e.getCellInstance(t);e.appendChild(n),i.emit(Xl.CORNER_CELL_RENDER,n),i.emit(Xl.LAYOUT_CELL_RENDER,n)}))},e.prototype.offset=function(){var t=this.getHeaderConfig().scrollX;Vx(this,-(void 0===t?0:t))},e.prototype.clip=function(){var t=this.getHeaderConfig(),e=t.width,n=t.height;this.style.clipPath=new Ss({style:{x:0,y:0,width:e,height:n}})},e.prototype.getNodes=function(){return this.headerConfig.nodes||[]},e}(qx);function pS(t,e){return void 0===e&&(e=2),eg(t,e)}var vS=function(t){function e(e){var n=t.call(this)||this;return n.cfg=e,n.render(),n}return E(e,t),e.prototype.layout=function(){this.addCornerBottomBorder(),this.addCornerRightBorder(),this.addSplitLineShadow()},e.prototype.render=function(){this.removeChildren(),this.layout()},e.getHorizontalBorderWidth=function(t){var e;return(null===(e=t.theme)||void 0===e?void 0:e.splitLine).horizontalBorderWidth},e.getVerticalBorderWidth=function(t){var e,n=t.theme,r=n.splitLine,i=n.cornerCell,o=n.colCell,a=n.dataCell;return t.isPivotMode()?null==r?void 0:r.verticalBorderWidth:Math.max(a.cell.verticalBorderWidth,(null===(e=t.options.seriesNumber)||void 0===e?void 0:e.enable)?i.cell.verticalBorderWidth:o.cell.verticalBorderWidth)},e.prototype.onBorderScroll=function(t){this.cfg.scrollX=t;var e=this.cfg.position;Wx(this,e.x-t,0),this.render()},e.prototype.onChangeShadowVisibility=function(t,e){this.cfg.showViewportLeftShadow=t>0,this.cfg.showViewportRightShadow=pS(t)<pS(e),this.render()},e.prototype.addCornerRightBorder=function(){var t,n,r=this.cfg,i=r.cornerWidth,o=r.cornerHeight,a=r.viewportHeight,s=r.position,l=r.spreadsheet,u=null===(t=l.theme)||void 0===t?void 0:t.splitLine,c=u.verticalBorderColor,h=u.verticalBorderColorOpacity,d=u.horizontalBorderWidth,f=e.getVerticalBorderWidth(l),p=s.x+i+f/2;if(l.isPivotMode()){var v=s.y+o+d+a;mw(this,{x1:p,y1:s.y,x2:p,y2:v,stroke:c,lineWidth:f,opacity:h})}else{var g=(null===(n=l.options.seriesNumber)||void 0===n?void 0:n.enable)?l.theme.cornerCell.cell:l.theme.colCell.cell,y=g.verticalBorderColor,m=g.verticalBorderColorOpacity;mw(this,{x1:p,y1:s.y,x2:p,y2:s.y+o,stroke:y,lineWidth:f,opacity:m});var C=l.theme.dataCell.cell,w=C.verticalBorderColor,x=C.verticalBorderColorOpacity;mw(this,{x1:p,y1:s.y+o+d,x2:p,y2:s.y+o+d+a,stroke:w,lineWidth:f,opacity:x})}},e.prototype.addCornerBottomBorder=function(){var t,n=this.cfg,r=n.cornerWidth,i=n.cornerHeight,o=n.viewportWidth,a=n.position,s=n.scrollX,l=void 0===s?0:s,u=n.spreadsheet,c=null===(t=u.theme)||void 0===t?void 0:t.splitLine,h=c.horizontalBorderColor,d=c.horizontalBorderWidth,f=c.horizontalBorderColorOpacity,p=a.x,v=p+r+e.getVerticalBorderWidth(u)+o+(u.isFrozenRowHeader()?0:l),g=a.y+i+d/2;mw(this,{x1:p,y1:g,x2:v,y2:g,stroke:h,lineWidth:d,opacity:f})},e.prototype.addSplitLineShadow=function(){var t,e=this.cfg.spreadsheet,n=null===(t=e.theme)||void 0===t?void 0:t.splitLine;e.isPivotMode()&&(null==n?void 0:n.showShadow)&&e.isFrozenRowHeader()&&(this.addSplitLineLeftShadow(),this.addSplitLineRightShadow())},e.prototype.addSplitLineLeftShadow=function(){var t;if(this.cfg.showViewportLeftShadow){var n=this.cfg,r=n.cornerWidth,i=n.cornerHeight,o=n.viewportHeight,a=n.position,s=n.spreadsheet,l=null===(t=s.theme)||void 0===t?void 0:t.splitLine,u=l.shadowColors,c=l.shadowWidth,h=l.horizontalBorderWidth,d=a.x+r+e.getVerticalBorderWidth(s),f=a.y;this.appendChild(new Ss({style:{x:d,y:f,width:c,height:i+h+o,fill:"l (0) 0:".concat(null==u?void 0:u.left," 1:").concat(null==u?void 0:u.right)}}))}},e.prototype.addSplitLineRightShadow=function(){var t;if(this.cfg.showViewportRightShadow){var n=this.cfg,r=n.cornerWidth,i=n.cornerHeight,o=n.viewportHeight,a=n.viewportWidth,s=n.position,l=n.spreadsheet,u=null===(t=l.theme)||void 0===t?void 0:t.splitLine,c=u.shadowColors,h=u.shadowWidth,d=u.horizontalBorderWidth,f=s.x+r+e.getVerticalBorderWidth(l)+a-h,p=s.y;this.appendChild(new Ss({style:{x:f,y:p,width:h,height:i+d+o,fill:"l (0) 0:".concat(null==c?void 0:c.right," 1:").concat(null==c?void 0:c.left)}}))}},e}(ys),gS=function(t){function e(e){var n=t.call(this,e)||this;return n.initGroups(),n}return E(e,t),e.prototype.initGroups=function(){this.scrollGroup=this.appendChild(new ys({name:"rowScrollGroup",style:{zIndex:3}})),this.frozenRowGroup=this.appendChild(new ys({name:"rowHeaderFrozenGroup",style:{zIndex:4}}))},e.prototype.getCellInstance=function(t){var e=this.getHeaderConfig(),n=e.spreadsheet,r=n.options.rowCell;return(null==r?void 0:r(t,n,e))||new OS(t,n,e)},e.prototype.isRowCellInRect=function(t){var e=this.getHeaderConfig(),n=e.width,r=e.viewportHeight,i=e.position,o=e.scrollY,a=void 0===o?0:o,s=e.scrollX,l=void 0===s?0:s;return!!this.isFrozenRow(t)||r+a>t.y&&a<t.y+t.height&&n-i.x+l>t.x&&l-i.x<t.x+t.width},e.prototype.isFrozenRow=function(t){var e=this.headerConfig.spreadsheet,n=e.facet,r=Xx(e.options,n.getRowNodes()).rowCount,i=void 0===r?0:r;return i>0&&t.rowIndex>=0&&t.rowIndex<i},e.prototype.getCellGroup=function(t){return this.isFrozenRow(t)?this.frozenRowGroup:this.scrollGroup},e.prototype.layout=function(){var t=this,e=this.getHeaderConfig(),n=e.nodes,r=e.spreadsheet;kv(n,(function(e){if(t.isRowCellInRect(e)&&0!==e.height){var n=t.getCellGroup(e);e.isFrozen=n!==t.scrollGroup;var i=t.getCellInstance(e);e.belongsCell=i,n.appendChild(i),r.emit(Xl.ROW_CELL_RENDER,i),r.emit(Xl.LAYOUT_CELL_RENDER,i)}}))},e.prototype.offset=function(){var t=this.getHeaderConfig(),e=t.scrollX,n=void 0===e?0:e,r=t.scrollY,i=void 0===r?0:r,o=t.position,a=o.x-n;Wx(this.scrollGroup,a,o.y-i),Wx(this.frozenRowGroup,a,o.y)},e.prototype.clip=function(){var t=this.getHeaderConfig(),e=t.width,n=t.viewportHeight,r=t.position,i=t.spreadsheet,o=i.facet.frozenGroupInfo[nm.FROZEN_ROW].height;this.scrollGroup.style.clipPath=new Ss({style:{x:i.facet.cornerBBox.x,y:r.y+o,width:e,height:n}}),this.frozenRowGroup.style.clipPath=new Ss({style:{x:i.facet.cornerBBox.x,y:r.y,width:e,height:o}})},e.prototype.clear=function(){var t,e;null===(t=this.scrollGroup)||void 0===t||t.removeChildren(),null===(e=this.frozenRowGroup)||void 0===e||e.removeChildren()},e}(qx),yS=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return E(e,t),Object.defineProperty(e.prototype,"cellType",{get:function(){return hm.ROW_CELL},enumerable:!1,configurable:!0}),e.prototype.getBorderPositions=function(){return[BC.LEFT,BC.BOTTOM]},e.prototype.initCell=function(){this.drawBackgroundShape(),this.drawInteractiveBgShape(),this.drawInteractiveBorderShape(),this.drawBorders(),this.drawTextShape(),this.update()},e.prototype.getBackgroundColor=function(){var t=this.getCrossBackgroundColor(this.meta.rowIndex);return{backgroundColor:t.backgroundColor,backgroundColorOpacity:t.backgroundColorOpacity,intelligentReverseTextColor:!1}},e.prototype.getTextStyle=function(){var t,e=this.getCellTextWordWrapStyle(hm.SERIES_NUMBER_CELL),n=null===(t=this.getStyle())||void 0===t?void 0:t.seriesText;return S(S({},e),n)},e.prototype.getFormattedFieldValue=function(){var t,e=this.meta,n=e.value,r=e.field,i=this.spreadsheet.dataSet.getFieldFormatter(r);return{value:n,formattedValue:null!==(t=null==i?void 0:i(n,void 0,this.meta))&&void 0!==t?t:n}},e.prototype.getMaxTextWidth=function(){return this.getBBoxByType(DC.CONTENT_BOX).width},e.prototype.getTextPosition=function(){var t,e,n=this.headerConfig,r=n.scrollY,i=n.viewportHeight,o=this.getTextStyle(),a=this.getStyle().cell,s={start:r,size:i},l=this.getBBoxByType(DC.CONTENT_BOX),u=Bx(s,{start:l.y,size:l.height},{align:kx(o.textBaseline),size:{textSize:o.fontSize},padding:{start:null===(t=null==a?void 0:a.padding)||void 0===t?void 0:t.top,end:null===(e=null==a?void 0:a.padding)||void 0===e?void 0:e.bottom}}).textStart;return{x:Rw({bbox:l,textAlign:o.textAlign,textWidth:this.getActualTextWidth(),iconStyle:this.getIconStyle(),groupedIcons:this.groupedIcons}).textX,y:u}},e.prototype.isBolderText=function(){return!1},e.prototype.findFieldCondition=function(){},e.prototype.mappingValue=function(){},e.prototype.getIconPosition=function(){return{x:0,y:0}},e}(hS),mS=function(t,e,n){var r=n.isHierarchyTreeType();return t.getNodes(0).map((function(t,i){var o="".concat(i+1),a=new QC({id:o,field:"",rowIndex:i,value:o});return a.x=t.x,a.y=t.y,a.width=e,a.height=r?t.getTotalHeightForTreeHierarchy():t.height,a.isLeaf=!0,a.spreadsheet=n,a}))},CS=function(t){function e(e){return t.call(this,e)||this}return E(e,t),e.prototype.getCellInstance=function(t){var e=this.getHeaderConfig(),n=e.spreadsheet,r=n.options.seriesNumberCell;return(null==r?void 0:r(t,n,e))||new yS(t,n,e)},e.getSeriesNumberHeader=function(t){var n,r,i=t.panelBBox,o=t.seriesNumberWidth,a=t.rowsHierarchy,s=t.spreadsheet,l=t.cornerWidth,u=i.height,c=i.viewportHeight,h=null!==(r=null===(n=s.options)||void 0===n?void 0:n.layoutSeriesNumberNodes)&&void 0!==r?r:mS;return new e({width:l,height:u,viewportWidth:l,viewportHeight:c,position:{x:0,y:i.y},nodes:h(a,o,s),spreadsheet:s})},e.prototype.clip=function(){var t=this.getHeaderConfig(),e=t.width,n=t.height,r=t.viewportHeight,i=t.position,o=t.spreadsheet;this.style.clipPath=new Ss({style:{x:o.facet.cornerBBox.x,y:i.y,width:e,height:n+r}})},e.prototype.layout=function(){var t=this,e=this.getHeaderConfig(),n=e.nodes,r=e.scrollY,i=void 0===r?0:r,o=e.viewportHeight,a=e.spreadsheet;kv(n,(function(e){var n=e.y,r=e.height;if(t.isHeaderCellInViewport({cellPosition:n,cellSize:r,viewportPosition:i,viewportSize:o})){var s=t.getCellInstance(e);e.belongsCell=s,t.appendChild(s),a.emit(Xl.SERIES_NUMBER_CELL_RENDER,s),a.emit(Xl.LAYOUT_CELL_RENDER,s)}}))},e.prototype.offset=function(){var t=this.getHeaderConfig(),e=t.scrollY,n=void 0===e?0:e,r=t.scrollX,i=void 0===r?0:r,o=t.position;Wx(this,o.x-i,o.y-n)},e.prototype.getNodes=function(){return this.getHeaderConfig().nodes||[]},e}(qx),wS=function(t){return t.includes(NC)?"id":"field"},xS=function(t,e){void 0===e&&(e=[]);var n=t.facet.getInitColLeafNodes();return yp(e.map((function(t){var e=wS(t);return n.find((function(n){return n[e]===t}))})))},bS=function(t,e,n){return void 0===e&&(e=[]),void 0===n&&(n=!1),L(void 0,void 0,void 0,(function(){var r,i,o,a,s,l,u,c,h;return _(this,(function(d){switch(d.label){case 0:return r=function(e,n){return void 0===e&&(e=[]),void 0===n&&(n=[]),L(void 0,void 0,void 0,(function(){return _(this,(function(r){switch(r.label){case 0:return t.setOptions({interaction:{hiddenColumnFields:e}}),t.interaction.reset(),t.store.set("hiddenColumnsDetail",n),[4,t.render({reloadData:!1,reBuildHiddenColumnsDetail:!1})];case 1:return r.sent(),[2]}}))}))},_g(e)&&n?[4,r()]:[3,2];case 1:case 3:return d.sent(),[2];case 2:return i=t.store.get("hiddenColumnsDetail",[]),o=t.options.interaction.hiddenColumnFields,Mg(e,a=void 0===o?[]:o)&&!n?[2]:(s=Iy(O(O([],R(e),!1),R(a),!1)),l=xS(t,s).every((function(t,e,n){var r=n[e+1];return!r||1===Math.abs(t.colIndex-r.colIndex)})),u=function(t,e){if(void 0===e&&(e=[]),_g(e))return{prev:null,next:null};var n=t.facet.getInitColLeafNodes(),r=xS(t,e).map((function(t){return null==t?void 0:t.colIndex})),i=Math.max.apply(Math,O([],R(r),!1)),o=Math.min.apply(Math,O([],R(r),!1)),a=n.find((function(t){return t.colIndex===i+1}));return{prev:n.find((function(t){return t.colIndex===o-1}))||null,next:a||null}}(t,l?s:e),c={hideColumnNodes:xS(t,e),displaySiblingNode:u},h=O(O([],R(i),!1),[c],!1),t.emit(Xl.COL_CELL_HIDDEN,c,h),[4,r(s,h)])}}))}))},ES=function(t,e,n){return void 0===e&&(e=[]),void 0===n&&(n=!1),L(void 0,void 0,void 0,(function(){var r,i,o;return _(this,(function(a){switch(a.label){case 0:return _g(e)&&n?[4,bS(t,e,!0)]:[3,2];case 1:a.sent(),a.label=2;case 2:return r=function(t){var e=t.dataCfg.fields.columns,n=void 0===e?[]:e;return t.isTableMode()&&!t.isCustomColumnFields()?n:t.facet.getInitColLeafNodes().map((function(t){return t.id}))}(t),i=jx(r),o=function(t,e){if(_g(e))return[];var n=Number.NEGATIVE_INFINITY;return t.reduce((function(t,r,i){if(!e.includes(r))return t;if(i===n+1){var o=Iv(t);null==o||o.push(r)}else{var a=[r];t.push(a)}return n=i,t}),[])}(i,e),[4,Promise.all(o.map((function(e){return L(void 0,void 0,void 0,(function(){return _(this,(function(r){switch(r.label){case 0:return[4,bS(t,e,n)];case 1:return r.sent(),[2]}}))}))})))];case 3:return a.sent(),[2]}}))}))},SS=function(t,e){return function(t){var e=function(t){return(null==t?void 0:t.next)||(null==t?void 0:t.prev)}(t);return null==e?void 0:e.id}(t)===e},TS=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return E(e,t),Object.defineProperty(e.prototype,"cellType",{get:function(){return hm.COL_CELL},enumerable:!1,configurable:!0}),e.prototype.getBorderPositions=function(){return[BC.TOP,BC.RIGHT]},e.prototype.initCell=function(){t.prototype.initCell.call(this),this.drawBackgroundShape(),this.drawInteractiveBgShape(),this.drawInteractiveBorderShape(),this.drawTextShape(),this.drawActionAndConditionIcons(),this.drawBorders(),this.drawResizeArea(),this.addExpandColumnIconShapes(),this.update()},e.prototype.getFormattedFieldValue=function(){var e,n=this.meta,r=n.extra,i=n.value,o=n.field,a=this.spreadsheet.dataSet.fields;return(null==r?void 0:r.isCustomNode)&&(null===(e=null==a?void 0:a.values)||void 0===e?void 0:e.includes(o))?{formattedValue:i,value:i}:t.prototype.getFormattedFieldValue.call(this)},e.prototype.getMaxTextWidth=function(){return this.getBBoxByType(DC.CONTENT_BOX).width-this.getActionAndConditionIconWidth()},e.prototype.isBolderText=function(){var t=this.meta,e=t.isLeaf;return!(!t.isTotals&&e)},e.prototype.handleViewport=function(){var t=this.getHeaderConfig(),e=t.width,n=t.cornerWidth,r=void 0===n?0:n,i=t.scrollX,o=void 0===i?0:i,a=!this.spreadsheet.isFrozenRowHeader();return{start:o-(a?r:0),size:e+(a?r:0)}},e.prototype.getTextPosition=function(){var t,e,n,r=this.meta.isLeaf,i=this.getTextStyle(),o=this.getBBoxByType(DC.CONTENT_BOX),a=this.getIconStyle(),s=_w(o,i.textBaseline),l=Mw(a.size,s,i.fontSize,i.textBaseline);if(r){var u=Rw({bbox:o,textWidth:this.getActualTextWidth(),textAlign:i.textAlign,groupedIcons:this.groupedIcons,iconStyle:a}),c=u.textX,h=u.leftIconX,d=u.rightIconX;return this.leftIconPosition={x:h,y:l},this.rightIconPosition={x:d,y:l},{x:c,y:s}}var f=this.handleViewport(),p=this.getStyle(),v=p.cell,g=p.icon,y=this.getTextStyle(),m=y.textAlign,C=y.textBaseline,w=Bx(f,{start:o.x,size:o.width},{align:kx(m),size:{textSize:this.getActualTextWidth(),iconStartSize:this.getActionAndConditionIconWidth("left"),iconEndSize:this.getActionAndConditionIconWidth("right")},padding:{start:null===(t=null==v?void 0:v.padding)||void 0===t?void 0:t.left,end:null===(e=null==v?void 0:v.padding)||void 0===e?void 0:e.right,betweenTextAndEndIcon:null===(n=null==g?void 0:g.margin)||void 0===n?void 0:n.left}}),x=w.textStart,b=w.iconStart,E=w.iconEnd,S=_w(o,C);return this.leftIconPosition={x:b,y:l},this.rightIconPosition={x:E,y:l},{x:x,y:S}},e.prototype.getColResizeArea=function(){return $x(this.spreadsheet,$y)},e.prototype.getHorizontalResizeAreaName=function(){return"".concat(Jy).concat(this.meta.field)},e.prototype.isCrossColumnLeafNode=function(){var t,e=this.spreadsheet.facet.getLayoutResult().colsHierarchy,n=this.meta,r=n.level,i=n.isLeaf;return(null===(t=null==e?void 0:e.sampleNodeForLastLevel)||void 0===t?void 0:t.level)!==r&&i},e.prototype.drawHorizontalResizeArea=function(){var t,e;if(!(0===(null===(e=null===(t=this.spreadsheet.options.style)||void 0===t?void 0:t.colCell)||void 0===e?void 0:e.height))&&this.shouldDrawResizeAreaByType("colCellVertical",this)){var n=this.meta,r=n.y,i=n.height,o=this.getResizeAreaStyle(),a=this.getColResizeArea();if(a&&!this.isCrossColumnLeafNode()){var s=this.getHorizontalResizeAreaName();if(!(null==a?void 0:a.find((function(t){return t.name===s})))){var l=this.getResizeAreaWidth(),u=Zx({theme:o,type:Sm.Vertical,effect:Tm.Field,offsetX:0,offsetY:r,width:l,height:i,meta:this.meta});a.appendChild(new WC({name:s,style:S(S({},u.style),{x:0,y:r+i-o.size,width:l})},u.appendInfo))}}}},e.prototype.getResizeAreaWidth=function(){var t=this.getHeaderConfig(),e=t.cornerWidth,n=void 0===e?0:e,r=t.viewportWidth;return vS.getVerticalBorderWidth(this.spreadsheet)+n+r},e.prototype.shouldAddVerticalResizeArea=function(){var t=this.meta,e=t.x,n=t.y,r=t.width,i=t.height,o=this.getHeaderConfig(),a=o.scrollX,s=o.scrollY,l=o.cornerWidth,u=void 0===l?0:l,c=o.height,h=o.width,d=!this.spreadsheet.isFrozenRowHeader(),f=this.getResizeAreaStyle(),p={x:e+r-f.size,y:n,width:f.size,height:i};return Qx(p,{x:d?-u:0,y:0,width:d?u+h:h,height:c},{scrollX:a,scrollY:s})},e.prototype.getVerticalResizeAreaOffset=function(){var t=this.meta,e=t.x,n=t.y,r=this.getHeaderConfig(),i=r.scrollX,o=void 0===i?0:i,a=r.position;return{x:(null==a?void 0:a.x)+e-o,y:(null==a?void 0:a.y)+n}},e.prototype.drawVerticalResizeArea=function(){if(this.meta.isLeaf&&this.shouldDrawResizeAreaByType("colCellHorizontal",this)){var t=this.meta,e=t.width,n=t.height,r=this.getResizeAreaStyle(),i=this.getColResizeArea();if(i&&this.shouldAddVerticalResizeArea()){var o=this.getVerticalResizeAreaOffset(),a=o.x,s=o.y,l=Zx({theme:r,type:Sm.Horizontal,effect:Tm.Cell,offsetX:a,offsetY:s,width:e,height:n,meta:this.meta});i.appendChild(new WC({style:S(S({},l.style),{x:a+e-r.size,y:s,height:n})},l.appendInfo))}}},e.prototype.drawResizeArea=function(){this.drawHorizontalResizeArea(),this.drawVerticalResizeArea()},e.prototype.hasHiddenColumnCell=function(){var t,e=this,n=this.spreadsheet.options,r=n.interaction,i=n.tooltip,o=this.spreadsheet.store.get("hiddenColumnsDetail",[]);return!(_g(o)||_g(null==r?void 0:r.hiddenColumnFields)||!(null===(t=null==i?void 0:i.operation)||void 0===t?void 0:t.hiddenColumns))&&!!o.find((function(t){return SS(null==t?void 0:t.displaySiblingNode,e.meta.id)}))},e.prototype.getExpandIconTheme=function(){return this.getStyle().icon},e.prototype.addExpandColumnSplitLine=function(){var t=this.getBBoxByType(),e=t.x,n=t.y,r=t.width,i=t.height,o=this.theme.splitLine,a=o.horizontalBorderColor,s=o.horizontalBorderColorOpacity,l=this.isLastColumn()?e+r:e;mw(this,{x1:l,y1:n,x2:l,y2:n+i,stroke:a,lineWidth:1,strokeOpacity:s})},e.prototype.addExpandColumnIconShapes=function(){this.hasHiddenColumnCell()&&(this.addExpandColumnSplitLine(),this.addExpandColumnIcons())},e.prototype.addExpandColumnIcons=function(){var t=this.isLastColumn();this.addExpandColumnIcon(t),this.isAllDisplaySiblingNodeHidden()&&t&&this.addExpandColumnIcon(!1)},e.prototype.addExpandColumnIcon=function(t){var e=this,n=this.getExpandColumnIconConfig(t);ww(this,S(S({},n),{name:"ExpandColIcon",cursor:"pointer"})).addEventListener("click",(function(){e.spreadsheet.emit(Xl.COL_CELL_EXPANDED,e.meta)}))},e.prototype.getExpandColumnIconConfig=function(t){var e=this.getExpandIconTheme().size,n=void 0===e?0:e,r=this.getBBoxByType(),i=r.x,o=r.y,a=r.width,s=i-n;return{x:t?s+a:s,y:o+r.height/2-n/2,width:2*n,height:n}},e.prototype.isLastColumn=function(){return t=this.spreadsheet,e=this.meta.id,n=t.facet.getColNodes(),r=t.facet.getInitColLeafNodes(),i=wS(e),Hh(Iv(n),i)===e&&Hh(Iv(r),i)!==e;var t,e,n,r,i},e.prototype.isAllDisplaySiblingNodeHidden=function(){var t=this.meta.id,e=this.spreadsheet.store.get("hiddenColumnsDetail",[]),n=e.find((function(e){var n,r=e.displaySiblingNode;return(null===(n=null==r?void 0:r.next)||void 0===n?void 0:n.id)===t})),r=e.find((function(e){var n,r=e.displaySiblingNode;return(null===(n=null==r?void 0:r.prev)||void 0===n?void 0:n.id)===t}));return r&&n},e}(hS),LS=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return E(e,t),e.prototype.handleRestOptions=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=R(t,1)[0];this.headerConfig=S({},n);var r=this.meta.field,i=this.spreadsheet.dataCfg.sortParams,o=Xv(i,(function(t){return(null==t?void 0:t.sortFieldId)===r})),a=uS(o,!0);this.headerConfig.sortParam=S(S(S({},this.headerConfig.sortParam),o||{}),{type:a})},e.prototype.getFormattedFieldValue=function(){return Lw(this.meta,this.spreadsheet.dataSet.getFieldName(this.meta.field))},e.prototype.shouldAddVerticalResizeArea=function(){if(this.getMeta().isFrozen)return!0;var t=this.getHeaderConfig(),e=t.scrollX,n=t.scrollY,r=t.width,i=t.height,o=t.spreadsheet,a=this.getBBoxByType(),s=a.x,l=a.y,u=a.width,c=a.height,h=this.getResizeAreaStyle(),d={x:s+u-h.size,y:l,width:h.size,height:c},f=o.facet.frozenGroupInfo,p=f[nm.FROZEN_COL].width,v=f[nm.FROZEN_TRAILING_COL].width;return Qx(d,{x:p,y:0,width:r-p-v,height:i},{scrollX:e,scrollY:n})},e.prototype.getVerticalResizeAreaOffset=function(){var t=this.meta,e=t.x,n=t.y,r=this.getHeaderConfig(),i=r.scrollX,o=void 0===i?0:i,a=r.position;return this.getMeta().isFrozen?{x:(null==a?void 0:a.x)+e,y:(null==a?void 0:a.y)+n}:{x:(null==a?void 0:a.x)+e-o,y:(null==a?void 0:a.y)+n}},e.prototype.getColResizeArea=function(){return this.getMeta().isFrozen?$x(this.spreadsheet,Qy):t.prototype.getColResizeArea.call(this)},e.prototype.isSortCell=function(){return!0},e.prototype.showSortIcon=function(){return this.spreadsheet.options.showDefaultHeaderActionIcon},e.prototype.getTextStyle=function(){var t,e=this.getCellTextWordWrapStyle(),n=null===(t=this.getStyle())||void 0===t?void 0:t.bolderText;return S(S({},e),n)},e.prototype.getHorizontalResizeAreaName=function(){return"".concat(Jy).concat(this.meta.id)},e.prototype.drawBackgroundShape=function(){var t=this.getStyle().cell||{},e=t.backgroundColor,n=t.backgroundColorOpacity;this.backgroundShape=gw(this,S(S({},this.getBBoxByType()),{fill:e,fillOpacity:n}))},e.prototype.handleViewport=function(){var e=t.prototype.handleViewport.call(this);return this.getMeta().isFrozen&&(e.start=0),e},e}(TS),_S=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return E(e,t),e.prototype.getStyle=function(t){var e;return t?Hh(this.theme,t):null===(e=this.theme)||void 0===e?void 0:e.cornerCell},e.prototype.showSortIcon=function(){return!1},e}(LS),MS=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return E(e,t),e.prototype.getLinkFieldStyle=function(){return this.theme.rowCell.text.linkTextFill},e.prototype.drawBorders=function(){this.meta.isFrozenCorner&&mx.prototype.drawBorders.call(this)},e.prototype.shouldDrawResizeArea=function(){var t="".concat(this.meta.rowIndex),e=$x(this.spreadsheet,Yy),n=$x(this.spreadsheet,Xy);return!(null==e?void 0:e.getElementById(t))&&!(null==n?void 0:n.getElementById(t))},e.prototype.drawResizeArea=function(){if(this.shouldDrawResizeArea()){var t=this.getBBoxByType(),e=t.y,n=t.height,r=this.meta.rowIndex,i=this.getResizeAreaStyle(),o=this.spreadsheet.options.frozen,a=o.rowCount,s=void 0===a?0:a,l=o.trailingRowCount,u=void 0===l?0:l,c=this.spreadsheet.facet.getCellRange(),h=Hx(r,c.start,s),d=zx(r,c.end,u),f=h||d,p=f?Xy:Yy,v=$x(this.spreadsheet,p);if(v){var g=this.spreadsheet.facet.columnHeader.getHeaderConfig(),y=g.height,m=g.viewportWidth,C=this.spreadsheet.facet.getScrollOffset().scrollY,w=this.spreadsheet.facet.getPaginationScrollY(),x=e+y+vS.getHorizontalBorderWidth(this.spreadsheet),b=this.spreadsheet.facet.frozenGroupInfo,E=b[nm.FROZEN_ROW].height,T=b[nm.FROZEN_TRAILING_ROW].height,L={x:0,y:e+n-i.size,width:m,height:i.size},_={x:0,y:E,width:m,height:this.spreadsheet.facet.panelBBox.height-E-T};if(f||Qx(L,_,{scrollX:0,scrollY:C})){f||(x-=C+w);var M=m+vS.getVerticalBorderWidth(this.spreadsheet),R=Zx({theme:i,type:Sm.Vertical,effect:Tm.Cell,offsetX:0,offsetY:x,width:M,height:n,meta:this.meta});v.appendChild(new WC({style:S(S({},R.style),{x:0,y:x+n-i.size,width:M})},R.appendInfo))}}}},e.prototype.isDisableHover=function(t){return(null==t?void 0:t.type)===hm.COL_CELL},e}(Sx),RS=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return E(e,t),Object.defineProperty(e.prototype,"cellType",{get:function(){return hm.DATA_CELL},enumerable:!1,configurable:!0}),e.prototype.getTextStyle=function(){var t=this.getCellTextWordWrapStyle(hm.SERIES_NUMBER_CELL),e=this.theme.rowCell.seriesText;return S(S({},t),e)},e}(MS),OS=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return E(e,t),Object.defineProperty(e.prototype,"cellType",{get:function(){return hm.ROW_CELL},enumerable:!1,configurable:!0}),e.prototype.getBorderPositions=function(){return[BC.BOTTOM,BC.LEFT]},e.prototype.initCell=function(){t.prototype.initCell.call(this),this.drawBackgroundShape(),this.drawInteractiveBgShape(),this.drawInteractiveBorderShape(),this.drawTextShape(),this.drawActionAndConditionIcons(),this.drawTreeIcon(),this.drawTreeLeafNodeAlignDot(),this.drawBorders(),this.drawResizeAreaInLeaf(),this.update()},e.prototype.getBackgroundColor=function(){var t=this.getCrossBackgroundColor(this.meta.rowIndex),e=t.backgroundColor,n=t.backgroundColorOpacity;return Gg({backgroundColor:e,backgroundColorOpacity:n},this.getBackgroundConditionFill())},e.prototype.showTreeIcon=function(){return this.spreadsheet.isHierarchyTreeType()&&!this.meta.isLeaf},e.prototype.showTreeLeafNodeAlignDot=function(){var t,e;return(null===(e=null===(t=this.spreadsheet.options.style)||void 0===t?void 0:t.rowCell)||void 0===e?void 0:e.showTreeLeafNodeAlignDot)&&this.spreadsheet.isHierarchyTreeType()},e.prototype.getParentTreeIconCfg=function(){var t;if(this.showTreeLeafNodeAlignDot()&&this.spreadsheet.isHierarchyTreeType()&&this.meta.isLeaf){var e=(null===(t=this.meta.parent)||void 0===t?void 0:t.belongsCell).getTreeIcon();return null==e?void 0:e.style}},e.prototype.onTreeIconClick=function(){var t=this.meta,e=t.isCollapsed,n=t.hierarchy;if(!qC()){if(!e){var r=this.spreadsheet.facet.getScrollOffset().scrollY,i=this.spreadsheet.facet.panelBBox.viewportHeight||0,o=(l=this.meta,u=0,null==(c=l.children)||c.forEach((function(t){u+=t.height||0})),u),a=n.height-o;if(r>0&&r+i>a){var s=a-i;this.spreadsheet.facet.setScrollOffset({scrollY:s>0?s:0})}}var l,u,c;this.emitCollapseEvent()}},e.prototype.emitCollapseEvent=function(){this.spreadsheet.emit(Xl.ROW_CELL_COLLAPSED__PRIVATE,{isCollapsed:!this.meta.isCollapsed,node:this.meta})},e.prototype.drawTreeIcon=function(){var t=this;if(this.showTreeIcon()){var e=this.meta.isCollapsed,n=this.getBBoxByType(DC.CONTENT_BOX).x,r=this.getTextStyle().fill,i=this.getStyle().icon.size,o=n+this.getContentIndent(),a=this.getIconPosition().y;this.treeIcon=xw({group:this,iconCfg:{x:o,y:a,width:i,height:i,fill:r},isCollapsed:e,onClick:function(){t.onTreeIconClick()}}),qC()&&this.addEventListener("click",(function(){t.emitCollapseEvent()}))}},e.prototype.drawTreeLeafNodeAlignDot=function(){var t=this.getParentTreeIconCfg();if(t){var e=this.getStyle().icon,n=e.size,r=e.margin,i=t.x+n+r.right,o=this.getTextPosition().y,a=this.getTextStyle(),s=a.fill,l=a.fontSize,u=n/5;this.treeLeafNodeAlignDot=yw(this,{cx:i+n/2,cy:o+(l-u)/2,r:u,fill:s,fillOpacity:.3})}},e.prototype.isBolderText=function(){var t=this.meta,e=t.isLeaf,n=t.isTotals,r=t.level;return!e&&0===r||n},e.prototype.drawTextShape=function(){t.prototype.drawTextShape.call(this),this.isShallowRender()||this.drawLinkField(this.meta)},e.prototype.drawResizeAreaInLeaf=function(){var t;if(this.meta.isLeaf&&this.shouldDrawResizeAreaByType("rowCellVertical",this)){var e=this.getBBoxByType(),n=e.x,r=e.y,i=e.width,o=e.height,a=this.getResizeAreaStyle(),s=$x(this.spreadsheet,Yy);if(s){var l=this.getHeaderConfig(),u=l.position,c=l.width,h=l.viewportHeight,d=l.scrollX,f=void 0===d?0:d,p=l.scrollY,v=void 0===p?0:p,g=l.spreadsheet,y={x:n,y:r+o-a.size,width:i,height:a.size},m=this.getMeta().isFrozen,C=null===(t=g.facet.frozenGroupInfo[nm.FROZEN_ROW])||void 0===t?void 0:t.height;if(m||Qx(y,{x:0,y:C,width:c,height:h},{scrollX:f,scrollY:v})){var w=u.x+n-f,x=u.y+r-(m?0:v),b=this.spreadsheet.isFrozenRowHeader()?c-u.x-(n-f):i,E=Zx({theme:a,type:Sm.Vertical,effect:Tm.Cell,offsetX:w,offsetY:x,width:i,height:o,meta:this.meta});s.appendChild(new WC({style:S(S({},E.style),{x:w,y:x+o-a.size,width:b})},E.appendInfo))}}}},e.prototype.getContentIndent=function(){if(!this.spreadsheet.isHierarchyTreeType())return 0;for(var t=this.getStyle(),e=t.icon,n=t.cell,r=e.size+e.margin.right,i=this.meta.parent,o=0;i;)0!==i.height&&(o+=r),i=i.parent;return this.showTreeLeafNodeAlignDot()&&(o+=this.isTreeLevel()?0:n.padding.right+e.margin.right),o},e.prototype.getTextIndent=function(){var t=this.getStyle().icon,e=t.size,n=t.margin;return this.getContentIndent()+(this.showTreeIcon()||this.isTreeLevel()&&this.showTreeLeafNodeAlignDot()?e+n.right:0)},e.prototype.isTreeLevel=function(){return Xv(Hh(this.meta,"parent.children"),(function(t){return!t.isLeaf}))},e.prototype.getMaxTextWidth=function(){return this.getBBoxByType(DC.CONTENT_BOX).width-this.getTextIndent()-this.getActionAndConditionIconWidth()},e.prototype.getTextArea=function(){var t=this.getBBoxByType(DC.CONTENT_BOX),e=this.getTextIndent();return S(S({},t),{x:t.x+e,width:t.width-e})},e.prototype.handleViewport=function(){var t,e=this.getHeaderConfig(),n=e.scrollY,r=e.viewportHeight,i=null===(t=this.spreadsheet.facet)||void 0===t?void 0:t.frozenGroupInfo[nm.FROZEN_ROW].height;return{start:this.getMeta().isFrozen?0:n+i,size:r-i}},e.prototype.getTextPosition=function(){var t=this.getTextArea(),e=this.getTextStyle(),n=this.getStyle(),r=n.cell,i=n.icon,o=this.handleViewport(),a=Bx(o,{start:t.y,size:t.height},{align:kx(e.textBaseline),size:{textSize:e.fontSize},padding:{start:r.padding.top,end:r.padding.bottom}}).textStart,s=Rw({bbox:t,textWidth:this.getActualTextWidth(),textAlign:e.textAlign,groupedIcons:this.groupedIcons,iconStyle:i}),l=s.textX,u=s.leftIconX,c=s.rightIconX,h=Mw(null==i?void 0:i.size,a,e.fontSize,e.textBaseline);return this.leftIconPosition={x:u,y:h},this.rightIconPosition={x:c,y:h},{x:l,y:a}},e}(hS),NS=function(t){return[pm.META,pm.CONTROL].includes(t.key)},IS=function(t){return t.ctrlKey||t.metaKey},AS=function(t){var e=t.getMeta()||{};return{id:e.id,colIndex:e.colIndex,rowIndex:e.rowIndex,rowQuery:e.rowQuery,type:t instanceof RS?hm.ROW_CELL:t.cellType}};function PS(t,e){var n=Math.min(t.rowIndex,e.rowIndex),r=Math.max(t.rowIndex,e.rowIndex);return{start:{rowIndex:n,colIndex:Math.min(t.colIndex,e.colIndex)},end:{rowIndex:r,colIndex:Math.max(t.colIndex,e.colIndex)}}}var kS=function(t,e){var n=t.spreadsheet.facet,r=t.getSelectedCellHighlight(),i=r.colHeader,o=r.rowHeader;i&&t.updateCells(n.getColCells()),o&&t.updateCells(n.getRowCells()),e()},BS=function(t){var e,n=t.store.get("visibleActionIcons"),r=t.interaction.getInteractedCells(),i=t.interaction.getState().cells;if(_g(r)&&_g(i)&&_g(n))return!1;(kv(n,(function(t){t.setAttribute("visibility","hidden")})),t.store.set("visibleActionIcons",[]),kv(r,(function(t){t.hideInteractionShape()})),t.interaction.resetState(),null===(e=t.options.interaction)||void 0===e?void 0:e.selectedCellsSpotlight)&&kv(t.interaction.getUnSelectedDataCells()||[],(function(t){t.clearUnselectedState()}));return!0},DS=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=O(O([],R(t),!1),[function(t,e){if(wu(t)&&wu(e))return e}],!1);return _v.apply(void 0,O([{}],R(n),!1))},FS=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r,i,o=DS.apply(void 0,O([lm],R(e),!1));o.fields=(r=o.fields,i=["rows","columns","values"].reduce((function(t,e){var n=r[e],i=Iy(n);return Mg(i,n)||console.warn("fields.".concat(e,":[").concat(n,"] should be unique")),t[e]=i,t}),{}),S(S({},r),i));var a=null===(t=o.fields.rows)||void 0===t?void 0:t.some((function(t){return!pg(t)})),s=_g(o.fields.values);return(a||s)&&(o.fields.valueInCols=!1),o},HS=function(t){var e,n,r=DS(Nm,t);return(null===(e=r.style)||void 0===e?void 0:e.layoutWidthType)===Mm.Compact&&(null===(n=r.style)||void 0===n?void 0:n.dataCell.maxLines)<=1&&(r.style.dataCell.wordWrap=!1),r},zS=function(t){return S(S({},null==t?void 0:t.colQuery),null==t?void 0:t.rowQuery)},GS=function(t,e){var n;if(t){var r=e.style,i=e.className,o=void 0===i?[]:i,a=e.visible;if(r&&Object.assign(t.style,r),o.length){var s=o.filter(Boolean);(n=t.classList).add.apply(n,O([],R(s),!1))}t.classList.toggle(SC,a),t.classList.toggle(TC,!a)}},WS=function(t,e){var n,r=null===(n=null==t?void 0:t.dataSet)||void 0===n?void 0:n.getFieldFormatter(e);return function(t,e){return n=r(t,e),i=Rg(n)&&Number.isNaN(n),o=""===n,Og(n)||i||o?"-":n;var n,i,o}},VS=function(t,e){var n,r=e.data,i=e.field,o=e.valueField,a=e.useCompleteDataForFormatter,s=void 0===a||a,l=e.targetCell,u=(null==t?void 0:t.dataSet.getCustomRowFieldName(l))||(null===(n=null==t?void 0:t.dataSet)||void 0===n?void 0:n.getFieldName(i)),c=WS(t,i),h=Cx.getFieldValue(r,i),d=Mu(h)?null:h;return{name:u,value:c(o||d,s?r:void 0)}},US=function(t,e,n){return Jv(Vv(mp([],e),(function(t){return t!==Kl&&Cx.getFieldValue(n,t)})),(function(e){return VS(t,{data:n,field:e,useCompleteDataForFormatter:!1})}))},jS=function(t,e,n){void 0===n&&(n=!0);var r=[];return kv(e,(function(e,i){kv(t,(function(t){n||-1===t.colIndex?n&&-1!==t.rowIndex&&r.push([t.rowIndex,i]):r.push([i,t.colIndex])}))})),r},YS=function(t,e,n){var r=t.facet,i=function(t){if(!t)return!1;var n=null==e?void 0:e.getMeta(),i=null==n?void 0:n.isTotals,o=(null==e?void 0:e.cellType)===hm.COL_CELL,a=(null==e?void 0:e.cellType)===hm.ROW_CELL;if(!o&&!a)return!1;var s=r.getColNodeByIndex(t.colIndex),l=r.getRowNodeByIndex(t.rowIndex),u=o?null==l?void 0:l.isTotals:null==s?void 0:s.isTotals;return!i&&(null==t?void 0:t.isTotals)||i&&u};if(n){var o=function(t){var e,n=t.facet.getRowLeafNodes(),r=t.facet.getColLeafNodes(),i=t.interaction.getState(),o=i.nodes,a=void 0===o?[]:o,s=i.cells,l=void 0===s?[]:s,u=null===(e=null==l?void 0:l[0])||void 0===e?void 0:e.type,c=t.isHierarchyTreeType()?a:a.filter((function(t){return null==t?void 0:t.isLeaf}));return u===hm.COL_CELL?jS(c,n,!1):u===hm.ROW_CELL?jS(c,r):[]}(t);return yp(Jv(o,(function(t){var e=R(t,2),n=e[0],o=e[1],a=r.getCellMeta(n,o);if(!i(a))return(null==a?void 0:a.data)||zS(a)})))}return t.interaction.getCells().filter((function(t){var e=r.getCellMeta(t.rowIndex,t.colIndex);return!i(e)})).map((function(t){var e=r.getCellMeta(t.rowIndex,t.colIndex);return(null==e?void 0:e.data)||zS(e)}))},XS=function(t){var e=t.spreadsheet,n=t.targetCell,r=t.options,i=void 0===r?{}:r,o=[],a={};if(e.isTableMode()&&(null==i?void 0:i.onlyShowCellText)){var s=null==n?void 0:n.getMeta();return[{selectedData:(null==s?void 0:s.field)?e.dataSet.getCellMultiData({query:{field:s.field}}):[e.dataSet.getRowData(s)],name:"",value:""}]}return kv(YS(e,n,i.onlyShowCellText),(function(t){var e,n=null==t?void 0:t[Kl];a[n]?null===(e=a[n])||void 0===e||e.push(t):a[n]=[t]})),function(t,e){var n={};e=uv(e),fv(t,(function(t,r,i){Sc(n,e(t,r,i),t)}))}(a,(function(t,r){var s,l=e.isCustomHeaderFields()?null==e?void 0:e.dataSet.getCustomRowFieldName(n):function(t,e,n){var r;if(n)return Fy("");var i=null===(r=null==t?void 0:t.dataSet)||void 0===r?void 0:r.getFieldName(e);return i&&"undefined"!==i?i:""}(e,r,null==i?void 0:i.isTotals),u="",c="";if(Gv(t,(function(t){return KE(Hh(t,ql))}))){var h=e.options.placeholder,d=zw(a,h);u=d,c=d}else{var f=WS(e,r),p=QE(t,ql);c=p,u=null!==(s=null==f?void 0:f(p,t))&&void 0!==s?s:parseFloat(p.toPrecision(16))}o.push({selectedData:t,name:l||"",value:u,originValue:c})})),e.isCustomHeaderFields()?function(t){var e=og(t,"name");return Object.keys(e).map((function(t){var n=e[t],r=tg(n,(function(t){return t.selectedData})),i=n.filter((function(t){return Rg(t.value)}));return{name:t,selectedData:r,value:_g(i)?null:Ty(i,"value")}}))}(o):o},qS=function(t){var e=t.spreadsheet,n=t.cellInfos,r=void 0===n?[]:n,i=t.options,o=void 0===i?{}:i,a=t.targetCell,s=null,l=[],u=null,c=null,h=e.dataSet.getCustomFieldDescription(a),d=r[0]||{};if(null==o?void 0:o.hideSummary)if(o.onlyShowCellText){var f=Cx.getFieldValue(d,"value"),p=Cx.getFieldValue(d,"valueField"),v=WS(e,p)(f);s=(o.enableFormat?e.dataSet.getFieldName(f)||v:e.dataSet.getFieldName(p))||""}else u=function(t,e,n){var r,i,o,a,s=(n||{}).isTotals,l=[],u=[];if(e){var c=null===(i=null===(r=null==t?void 0:t.dataSet)||void 0===r?void 0:r.fields)||void 0===i?void 0:i.columns,h=null===(a=null===(o=null==t?void 0:t.dataSet)||void 0===o?void 0:o.fields)||void 0===a?void 0:a.rows;l=US(t,jx(c||[]),e),u=US(t,h,e)}return _g(l)&&_g(u)&&s&&(l=[{value:Fy("")}]),{cols:l,rows:u}}(e,d,o),c=function(t,e,n,r){if(!e)return[];var i=n.isTotals,o=e[Kl],a=[];return i?a.push(VS(t,{data:e,field:o,targetCell:r,valueField:e[ql]})):a.push(VS(t,{data:e,field:o,targetCell:r})),a}(e,d,o,a);else l=XS({spreadsheet:e,options:o,targetCell:a});var g=d||{};return{name:s,summaries:l,interpretation:g.interpretation,infos:g.infos,tips:g.tips,headInfo:u,details:c,description:h}},KS=function(t){if(!t.interaction.isSelectedState())return[];var e=t.dataCfg.fields.valueInCols;return t.interaction.getCells().reduce((function(n,r){var i=t.facet.getCellMeta(null==r?void 0:r.rowIndex,null==r?void 0:r.colIndex),o=zS(i);if(_g(i)||_g(o))return[];var a=S(S({},o),{colIndex:e?null==i?void 0:i.colIndex:null,rowIndex:e?null:null==i?void 0:i.rowIndex});return n.find((function(t){return Mg(a,t)}))||n.push(a),n}),[])},ZS=function(t,e){var n;if(!e||!t)return null;var r=t.options,i=t.interaction,o=null===(n=t.getCellType)||void 0===n?void 0:n.call(t,null==e?void 0:e.target),a=i.getInteractedCells()[0];return function(t,e){void 0===t&&(t={});var n=function(e){return DS(t,e)},r=t.colCell,i=t.rowCell,o=t.dataCell,a=t.cornerCell;return e===hm.COL_CELL?n(r):e===hm.ROW_CELL?n(i):e===hm.DATA_CELL?n(o):e===hm.CORNER_CELL?n(a):S({},t)}(r.tooltip,o||(null==a?void 0:a.cellType))},$S=function(t,e){var n,r=e.defaultMenus,i=void 0===r?[]:r,o=e.cell,a=function t(e){return void 0===e&&(e=[]),e.filter((function(t){var e;return Uu(t.visible)?t.visible(o):null===(e=t.visible)||void 0===e||e})).map((function(e){return e.children&&(e.children=t(e.children)),e}))}(null===(n=null==t?void 0:t.menu)||void 0===n?void 0:n.items);return{menu:S(S({},null==t?void 0:t.menu),{items:yp(O(O([],R(i),!1),R(a),!1))})}},QS=function(){function t(t){var e=this;this.displayFormattedValueMap=new Map,this.getField=function(t){return(pg(t)?t:null==t?void 0:t.field)||t},this.getFieldMeta=Oh((function(t,n){var r=e.getField(t);return Xv(e.meta||n,{field:r})})),this.getCustomFieldDescription=function(t){var n,r;if(t){var i=null===(n=t.getMeta)||void 0===n?void 0:n.call(t);if(!(null==i?void 0:i.isTotals)){if(t.cellType===hm.DATA_CELL){var o=Xv(null==i?void 0:i.spreadsheet.dataCfg.meta,{field:(null==i?void 0:i.field)||(null==i?void 0:i.value)||(null==i?void 0:i.valueField)});return e.getFieldDescription(null==o?void 0:o.field)}return(null===(r=null==i?void 0:i.extra)||void 0===r?void 0:r.description)||e.getFieldDescription(null==i?void 0:i.field)}}},this.spreadsheet=t}return t.prototype.getFieldName=function(t,e){var n,r,i=this.getField(t),o=null===(r=null===(n=this.spreadsheet)||void 0===n?void 0:n.facet)||void 0===r?void 0:r.getHeaderNodes().find((function(t){var e;return t.field===i&&(null===(e=null==t?void 0:t.extra)||void 0===e?void 0:e.isCustomNode)})),a=(null==o?void 0:o.value)||(pg(t)?t:null==t?void 0:t.title)||t;return Hh(this.getFieldMeta(i,this.meta),"name",null!=e?e:a)},t.prototype.getCustomRowFieldName=function(t){var e;if(t){var n=null===(e=t.getMeta)||void 0===e?void 0:e.call(t);if(t.cellType===hm.DATA_CELL){var r=this.spreadsheet.facet.getRowNodeByIndex(null==n?void 0:n.rowIndex);return(null==r?void 0:r.value)||this.getFieldName(null==r?void 0:r.field)}return(null==n?void 0:n.value)||this.getFieldName(null==n?void 0:n.field)}},t.prototype.getFieldFormatter=function(t){var e=this.getField(t);return Hh(this.getFieldMeta(e,this.meta),"formatter",Hu)},t.prototype.getFieldDescription=function(t){var e=this.getField(t);return Hh(this.getFieldMeta(e,this.meta),"description")},t.prototype.setDataCfg=function(t){var e,n,r;null===(r=null===(n=null===(e=this.getFieldMeta)||void 0===e?void 0:e.cache)||void 0===n?void 0:n.clear)||void 0===r||r.call(n);var i=this.processDataCfg(t),o=i.fields,a=i.meta,s=i.data,l=i.sortParams,u=i.filterParams;this.fields=o,this.meta=a,this.originData=s,this.sortParams=l,this.filterParams=u,this.displayData=this.originData,this.indexesData={}},t.prototype.processMeta=function(t,e){var n,r;return void 0===t&&(t=[]),O(O([],R(t),!1),[sb(t,null===(r=null===(n=this.spreadsheet)||void 0===n?void 0:n.options)||void 0===r?void 0:r.cornerExtraFieldText,e)],!1)},t.prototype.getDisplayDataSet=function(){return this.displayData||[]},t.prototype.isEmpty=function(){return _g(this.getDisplayDataSet())},t.prototype.getEmptyViewIndexes=function(){return[]},t.prototype.getValueRangeByField=function(t){var e,n,r,i=(n=this.spreadsheet,r=t,n.store.get(im,om)[r]);if(i)return i;var o=yp(Jv(this.originData,(function(e){var n=e[t];return Og(n)?null:Number.parseFloat(n)}))),a={maxValue:Hg(o),minValue:Wg(o)};return function(t,e){var n=t.store.get(im,om);t.store.set(im,S(S({},n),e))}(this.spreadsheet,((e={})[t]=a,e)),a},t.prototype.moreThanOneValue=function(){var t,e;return(null===(e=null===(t=this.fields)||void 0===t?void 0:t.values)||void 0===e?void 0:e.length)>1},t}(),JS=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.handleDimensionValuesSort=function(){kv(e.sortParams,(function(t){var n=t.sortFieldId,r=t.sortByMeasure;if(n){var i=O([],R(e.sortedDimensionValues[n]||[]),!1),o=function(t){var e,n=t.dataSet,r=t.sortParam,i=t.originValues;return e=t.isSortByMeasure?lS(t):i,sS({sortParam:r,originValues:i,measureValues:e,dataSet:n})}({dataSet:e,sortParam:t,originValues:i,isSortByMeasure:!_g(r)});e.sortedDimensionValues[n]=o,e.handlePivotMetaSort(n,o)}}))},e.getTotalStatus=function(t){var n=e.fields,r=n.columns,i=n.rows,o=function(e,n){if(n){var r=Xv(e,(function(e){return!ug(t,e)}));return!(!r||r===$v(e))}return Gv(e,(function(e){return!ug(t,e)}))};return{isRowGrandTotal:o(Jx(i)),isRowSubTotal:o(i,!0),isColGrandTotal:o(Jx(r)),isColSubTotal:o(r,!0)}},e}return E(e,t),e.prototype.getExistValuesByDataItem=function(t,e){return nb(t,e)},e.prototype.setDataCfg=function(e){t.prototype.setDataCfg.call(this,e);var n=this.fields.rows;this.sortedDimensionValues={},this.rowPivotMeta=new Map,this.colPivotMeta=new Map,this.dimensionValuesCache=new Map,this.transformIndexesData(this.originData,n),this.handleDimensionValuesSort()},e.prototype.transformIndexesData=function(t,e){var n,r=this,i=this.fields,o=i.columns,a=i.values,s=i.valueInCols;return IC.getInstance().debugCallback("Transform Data",(function(){n=function(t){var e=t.rows,n=t.columns,r=t.values,i=t.valueInCols,o=t.data,a=void 0===o?[]:o,s=t.indexesData,l=void 0===s?{}:s,u=t.sortedDimensionValues,c=t.rowPivotMeta,h=t.colPivotMeta,d=t.getExistValuesByDataItem,f=[],p=new Set(bg(e,n)),v=function(t){var e=t.dimension,n=t.dimensionPath,r=t.careRepeated;(void 0===r||r)&&p.has(e)||(u[e]||(u[e]=[])).push(n)},g=ib(e,n);return a.forEach((function(t){var o,a,s,u;if(t&&!_g(t)){var p=d?d(t,r):nb(t,r),y=rb(t,e,i?null:p),m=rb(t,n,i?p:null);try{for(var C=M(y),w=C.next();!w.done;w=C.next()){var x=w.value;try{for(var b=(s=void 0,M(m)),E=b.next();!E.done;E=b.next()){var S=ob({rowDimensionValues:x,colDimensionValues:E.value,rowPivotMeta:c,colPivotMeta:h,rowFields:e,colFields:n,isFirstCreate:!0,onFirstCreate:v,prefix:g});f.push(S),Cy(l,S,t)}}catch(T){s={error:T}}finally{try{E&&!E.done&&(u=b.return)&&u.call(b)}finally{if(s)throw s.error}}}}catch(L){o={error:L}}finally{try{w&&!w.done&&(a=C.return)&&a.call(C)}finally{if(o)throw o.error}}}})),{paths:f,indexesData:l,rowPivotMeta:c,colPivotMeta:h,sortedDimensionValues:u}}({rows:e,columns:o,values:a,valueInCols:s,data:t,indexesData:r.indexesData,sortedDimensionValues:r.sortedDimensionValues,rowPivotMeta:r.rowPivotMeta,colPivotMeta:r.colPivotMeta,getExistValuesByDataItem:r.getExistValuesByDataItem}),r.indexesData=n.indexesData,r.rowPivotMeta=n.rowPivotMeta,r.colPivotMeta=n.colPivotMeta,r.sortedDimensionValues=n.sortedDimensionValues})),n},e.prototype.transformDrillDownData=function(t,e,n){var r,i=this,o=O(O([],R(QC.getFieldPath(n,!0)),!1),[t],!1),a=this.spreadsheet.store,s=null==n?void 0:n.id,l=null!==(r=a.get("drillDownIdPathMap"))&&void 0!==r?r:new Map;l.has(s)&&(kv(l.get(s),(function(t){Ay(i.indexesData,t)})),ab(this.rowPivotMeta,s));var u=this.transformIndexesData(e,o).paths;l.set(s,u),a.set("drillDownIdPathMap",l)},e.prototype.clearDrillDownData=function(t){var e=this,n=this.spreadsheet.store,r=n.get("drillDownIdPathMap");if(!r)return!1;var i=n.get("drillDownDataCache",[]);if(t){var o=r.get(t);o&&kv(o,(function(t){Ay(e.indexesData,t)})),ab(this.rowPivotMeta,t),r.delete(t);var a=Vv(i,(function(t){return r.has(null==t?void 0:t.rowId)}));n.set("drillDownDataCache",a);var s=a.map((function(t){return null==t?void 0:t.drillLevel})),l=n.get("drillDownFieldInLevel",[]).filter((function(t){return yg(s,null==t?void 0:t.drillLevel)}));n.set("drillDownFieldInLevel",l)}else{r.clear();var u=this.spreadsheet.store.get("originalDataCfg");_g(u)||this.spreadsheet.setDataCfg(u),this.spreadsheet.store.set("drillItemsNum",-1),this.spreadsheet.store.set("drillDownDataCache",[]),this.spreadsheet.store.set("drillDownFieldInLevel",[])}return n.set("drillDownIdPathMap",r),!0},e.prototype.handlePivotMetaSort=function(t,e){var n=this.fields,r=n.rows,i=n.columns;yg(r,t)?this.rowPivotMeta=cS({pivotMeta:this.rowPivotMeta,dimensions:r,sortFieldId:t,sortedDimensionValues:e}):yg(i,t)&&(this.colPivotMeta=cS({pivotMeta:this.colPivotMeta,dimensions:i,sortFieldId:t,sortedDimensionValues:e}))},e.prototype.processDataCfg=function(t){var e=t.data,n=t.meta,r=void 0===n?[]:n,i=t.fields,o=t.sortParams,a=void 0===o?[]:o,s=i.columns,l=void 0===s?[]:s,u=i.rows,c=void 0===u?[]:u,h=i.values,d=i.valueInCols,f=i.customValueOrder,p=l,v=c;return d?p=this.isCustomMeasuresPosition(f)?this.handleCustomMeasuresOrder(f,p):Iy(O(O([],R(l),!1),[Kl],!1)):v=this.isCustomMeasuresPosition(f)?this.handleCustomMeasuresOrder(f,v):Iy(O(O([],R(c),!1),[Kl],!1)),{data:e,meta:this.processMeta(r,Fy("")),fields:S(S({},i),{rows:v,columns:p,values:h}),sortParams:a}},e.prototype.getFieldsAndPivotMetaByField=function(t){var e=this.fields||{},n=e.rows,r=void 0===n?[]:n,i=e.columns,o=void 0===i?[]:i;return r.includes(t)?{dimensions:r,pivotMeta:this.rowPivotMeta}:o.includes(t)?{dimensions:o,pivotMeta:this.colPivotMeta}:{}},e.prototype.getDimensionValues=function(t,e){var n;void 0===e&&(e={});var r=this.getFieldsAndPivotMetaByField(t),i=r.pivotMeta,o=r.dimensions;if(!i||!o)return[];var a=_g(e);if(this.dimensionValuesCache.has(t)&&a)return null!==(n=this.dimensionValuesCache.get(t))&&void 0!==n?n:[];var s=Iy(lb({pivotMeta:i,dimensionValues:eb(e,o,Jl),fields:o,fieldIdx:Cg(o,t),queryType:MC.DetailOnly,sortedDimensionValues:this.sortedDimensionValues}).map((function(t){return t.value})));return a&&this.dimensionValuesCache.set(t,s),s},e.prototype.getTotalValue=function(t,e){var n,r,i=function(t,e){var n=t.isRowGrandTotal,r=t.isRowSubTotal,i=t.isColGrandTotal,o=t.isColSubTotal,a=e||{},s=a.row,l=a.col,u=s||{},c=u.calcGrandTotals,h=void 0===c?{}:c,d=u.calcSubTotals,f=void 0===d?{}:d,p=l||{},v=p.calcGrandTotals,g=void 0===v?{}:v,y=p.calcSubTotals,m=void 0===y?{}:y,C=function(t,e){if((t.aggregation||t.calcFunc)&&e)return{aggregation:t.aggregation,calcFunc:t.calcFunc}};return C(g,i)||C(m,o)||C(h,n)||C(f,r)}(by(e)?e:this.getTotalStatus(t),null===(r=this.spreadsheet.options)||void 0===r?void 0:r.totals)||{},o=i.aggregation,a=i.calcFunc,s=tS[o];if(s||a){var l=this.getCellMultiData({query:t,queryType:MC.DetailOnly}),u=null;return a?u=a(t,l):s&&(u=s(l,ql)),Cx.getCellData(S(S({},jg(t,[Kl])),((n={})[t[Kl]]=u,n)),t[Kl])}},e.prototype.getCellData=function(t){var e,n,r,i=t||{},o=i.query,a=void 0===o?{}:o,s=i.rowNode,l=i.isTotals,u=void 0!==l&&l,c=i.totalStatus,h=this.fields,d=h.rows,f=h.columns,p=d,v=null===(e=this.spreadsheet)||void 0===e?void 0:e.store.get("drillDownIdPathMap"),g=Array.from(null!==(n=null==v?void 0:v.keys())&&void 0!==n?n:[]).some((function(t){return null==s?void 0:s.id.startsWith(t)}));s&&g&&(p=null!==(r=QC.getFieldPath(s,g))&&void 0!==r?r:d);var y=ob({rowDimensionValues:eb(a,p),colDimensionValues:eb(a,f),rowPivotMeta:this.rowPivotMeta,colPivotMeta:this.colPivotMeta,rowFields:p,colFields:f,prefix:ib(p,f)}),m=Hh(this.indexesData,y);return m?Cx.getCellData(m,a[Kl]):u?this.getTotalValue(a,c):void 0},e.prototype.getQueryExtraFields=function(t){var e=this.fields.values,n=void 0===e?[]:e,r=t[Kl];return r?yg(n,r)?[r]:[]:n},e.prototype.getCellMultiData=function(t){var e,n,r,i,o=t||{},a=o.query,s=void 0===a?{}:a,l=o.queryType,u=void 0===l?MC.All:l,c=o.drillDownFields,h=void 0===c?[]:c;_g(s)&&console.warn("query: ".concat(s," shouldn't be empty, you can get all data from dataCfg if you're intended.\n you should use { EXTRA_FIELD: xxx} as least if you want query all specific value data"));var d=this.fields,f=d.rows,p=d.columns,v=_g(h)?f:f.concat(h),g=function(t){var e=t.rowFields,n=t.rowDimensionValues,r=t.rowPivotMeta,i=t.colFields,o=t.colDimensionValues,a=t.colPivotMeta,s=t.queryType,l=t.sortedDimensionValues;return{rowQueries:ub({dimensionValues:n,pivotMeta:r,fields:e,sortedDimensionValues:l,queryType:s}),colQueries:ub({dimensionValues:o,pivotMeta:a,fields:i,sortedDimensionValues:l,queryType:s})}}({rowDimensionValues:eb(s,v,Jl),colDimensionValues:eb(s,p,Jl),rowPivotMeta:this.rowPivotMeta,colPivotMeta:this.colPivotMeta,rowFields:v,colFields:p,sortedDimensionValues:this.sortedDimensionValues,queryType:u}),y=g.rowQueries,m=g.colQueries,C=ib(v,p),w=[];try{for(var x=M(y),b=x.next();!b.done;b=x.next()){var E=b.value;try{for(var S=(r=void 0,M(m)),T=S.next();!T.done;T=S.next()){for(var L,_=ob({rowDimensionValues:E,colDimensionValues:T.value,rowPivotMeta:this.rowPivotMeta,colPivotMeta:this.colPivotMeta,rowFields:v,colFields:p,prefix:C}),N=!1,I=this.indexesData,A=function(t){var e=_[t];N?I=tb(e)?cb(I,u):yp(Jv(I,(function(t){return null==t?void 0:t[e]}))):tb(e)?(N=!0,I=yp([I]),t--):I=null==I?void 0:I[e],L=t},P=0;P<_.length;P++)A(P),P=L;wu(I)?w.push.apply(w,O([],R(I),!1)):I&&w.push(I)}}catch(B){r={error:B}}finally{try{T&&!T.done&&(i=S.return)&&i.call(S)}finally{if(r)throw r.error}}}}catch(D){e={error:D}}finally{try{b&&!b.done&&(n=x.return)&&n.call(x)}finally{if(e)throw e.error}}var k=this.getQueryExtraFields(s);return tg(Iy(w),(function(t){return t?Cx.getCellDataList(t,k):[]}))},e.prototype.getFieldFormatter=function(e,n){return e===Ql?this.getFieldFormatterForTotalValue(n):t.prototype.getFieldFormatter.call(this,e)},e.prototype.getFieldFormatterForTotalValue=function(e){var n="";return!this.spreadsheet.isValueInCols()&&e&&(n=Hh(e.rowQuery,Kl)),n=null!=n?n:Hh(this.fields.values,0),t.prototype.getFieldFormatter.call(this,n)},e.prototype.handleCustomMeasuresOrder=function(t,e){var n=Iy(O([],R(e),!1));return e.length>=t?(n.splice(t,0,Kl),n):O(O([],R(n),!1),[Kl],!1)},e.prototype.isCustomMeasuresPosition=function(t){return Rg(t)},e.prototype.getRowData=function(t){return this.getCellMultiData({query:t.rowQuery})},e}(QS),tT=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return E(e,t),e.prototype.getCellData=function(t){var e=(t||{}).query,n=void 0===e?{}:e,r=this.fields,i=r.columns,o=r.rows,a=ob({rowDimensionValues:eb(n,o),colDimensionValues:eb(n,i),rowPivotMeta:this.rowPivotMeta,colPivotMeta:this.colPivotMeta,rowFields:o,colFields:i,prefix:ib(o,i)}),s=Hh(this.indexesData,a);if(s)return Cx.getCellData(s,n[Kl])},e.prototype.processDataCfg=function(e){var n=t.prototype.processDataCfg.call(this,e),r=this.processMeta(e.meta,Fy(""));return S(S({},n),{meta:r,fields:S(S({},n.fields),{rows:[Kl],valueInCols:!1})})},e}(JS),eT=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return E(e,t),e.prototype.processDataCfg=function(t){var e=!this.spreadsheet.isCustomRowFields(),n=t.fields.rows||[],r=e?O([],R(n),!1):O(O([],R(n),!1),[Kl],!1),i=this.processMeta(t.meta,Fy(""));return S(S({},t),{meta:i,fields:S(S({},t.fields),{rows:r,valueInCols:e})})},e}(tT),nT=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.handleDimensionValueFilter=function(){kv(e.filterParams,(function(t){var n=t.filterKey,r=t.filteredValues,i=t.customFilter,o=new Set(r),a=function(t){return!o.has(t[n])},s=Vv(e.displayData,(function(t){return i?i(t)&&a(t):a(t)}));e.displayData=e.getDisplayData(s)}))},e.handleDimensionValuesSort=function(){kv(e.sortParams,(function(t){var n=t.sortFieldId,r=t.sortBy,i=t.sortFunc,o=t.sortMethod,a=t.query;if(n){var s=e.displayData,l=[];if(a){var u=[];s.forEach((function(t){for(var e=Object.keys(a),n=!0,r=0;r<e.length;r++){var i=e[r];if(t[i]!==a[i]){n=!1,l.push(t);break}}n&&u.push(t)})),s=u}var c,h,d,f,p=s;if(i)p=i(S(S({},t),{data:s}));else if(r&&!Uu(r)){var v=O([],R(r),!1).reverse();p=s.sort((function(t,e){var r=v.indexOf(t[n]);return v.indexOf(e[n])-r}))}else if(eS(o)||nS(o)){var g=Uu(r)?r:null;c=s,h=[g||n],d=[null==o?void 0:o.toLocaleLowerCase()],p=null==c?[]:(wu(h)||(h=null==h?[]:[h]),wu(d=f?void 0:d)||(d=null==d?[]:[d]),Kg(c,h,d))}l.length&&(p=O(O([],R(p),!1),R(l),!1)),e.displayData=e.getDisplayData(p)}}))},e}return E(e,t),e.prototype.processDataCfg=function(t){return t},e.prototype.setDataCfg=function(e){t.prototype.setDataCfg.call(this,e),this.handleDimensionValueFilter(),this.handleDimensionValuesSort()},e.prototype.getStartFrozenRows=function(t){var e=(this.spreadsheet.options.frozen||{}).rowCount;return e?t.slice(0,e):[]},e.prototype.getEndFrozenRows=function(t){var e=(this.spreadsheet.options.frozen||{}).trailingRowCount;return e?t.slice(-e):[]},e.prototype.getDisplayData=function(t){var e=this.getStartFrozenRows(t),n=this.getEndFrozenRows(t),r=t.slice(e.length||0,-n.length||void 0);return O(O(O([],R(e),!1),R(r),!1),R(n),!1)},e.prototype.getDimensionValues=function(){return[]},e.prototype.getCellData=function(t){var e=(void 0===t?{}:t).query,n=void 0===e?{}:e;if(0!==this.displayData.length||0!==n.rowIndex){var r=this.displayData[n.rowIndex];return iv(n,"field")&&Mu(r)?r[n.field]:r}},e.prototype.getCellMultiData=function(t){var e=(void 0===t?{}:t).query,n=void 0===e?{}:e;if(!n)return this.displayData;var r=this.displayData[n.rowIndex]?[this.displayData[n.rowIndex]]:this.displayData;return iv(n,"field")?r.map((function(t){return t[n.field]})):r},e.prototype.getRowData=function(t){return this.getCellData({query:{rowIndex:t.rowIndex}})},e}(QS);function rT(t){return function(){return t}}function iT(t){return 1==(t=+t)?oT:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):rT(isNaN(e)?n:e)}}function oT(t,e){var n=e-t;return n?function(t,e){return function(n){return t+n*e}}(t,n):rT(isNaN(t)?e:t)}var aT=function t(e){var n=iT(e);function r(t,e){var r=n((t=sn(t)).r,(e=sn(e)).r),i=n(t.g,e.g),o=n(t.b,e.b),a=oT(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=i(e),t.b=o(e),t.opacity=a(e),t+""}}return r.gamma=t,r}(1);function sT(t,e){e||(e=[]);var n,r=t?Math.min(e.length,t.length):0,i=e.slice();return function(o){for(n=0;n<r;++n)i[n]=t[n]*(1-o)+e[n]*o;return i}}function lT(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function uT(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,o=new Array(i),a=new Array(r);for(n=0;n<i;++n)o[n]=gT(t[n],e[n]);for(;n<r;++n)a[n]=e[n];return function(t){for(n=0;n<i;++n)a[n]=o[n](t);return a}}function cT(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function hT(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function dT(t,e){var n,r={},i={};for(n in null!==t&&"object"===h(t)||(t={}),null!==e&&"object"===h(e)||(e={}),e)n in t?r[n]=gT(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}}var fT=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,pT=new RegExp(fT.source,"g");function vT(t,e){var n,r,i,o=fT.lastIndex=pT.lastIndex=0,a=-1,s=[],l=[];for(t+="",e+="";(n=fT.exec(t))&&(r=pT.exec(e));)(i=r.index)>o&&(i=e.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,l.push({i:a,x:hT(n,r)})),o=pT.lastIndex;return o<e.length&&(i=e.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?l[0]?function(t){return function(e){return t(e)+""}}(l[0].x):function(t){return function(){return t}}(e):(e=l.length,function(t){for(var n,r=0;r<e;++r)s[(n=l[r]).i]=n.x(t);return s.join("")})}function gT(t,e){var n,r=h(e);return null==e||"boolean"===r?rT(e):("number"===r?hT:"string"===r?(n=rn(e))?(e=n,aT):vT:e instanceof rn?aT:e instanceof Date?cT:lT(e)?sT:Array.isArray(e)?uT:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?dT:hT)(t,e)}var yT,mT,CT=0,wT=0,xT=0,bT=1e3,ET=0,ST=0,TT=0,LT="object"===("undefined"==typeof performance?"undefined":h(performance))&&performance.now?performance:Date,_T="object"===("undefined"==typeof window?"undefined":h(window))&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function MT(){return ST||(_T(RT),ST=LT.now()+TT)}function RT(){ST=0}function OT(){this._call=this._time=this._next=null}function NT(t,e,n){var r=new OT;return r.restart(t,e,n),r}function IT(){ST=(ET=LT.now())+TT,CT=wT=0;try{!function(){MT(),++CT;for(var t,e=yT;e;)(t=ST-e._time)>=0&&e._call.call(null,t),e=e._next;--CT}()}finally{CT=0,function(){var t,e,n=yT,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:yT=e);mT=t,PT(r)}(),ST=0}}function AT(){var t=LT.now(),e=t-ET;e>bT&&(TT-=e,ET=t)}function PT(t){CT||(wT&&(wT=clearTimeout(wT)),t-ST>24?(t<1/0&&(wT=setTimeout(IT,t-LT.now()-TT)),xT&&(xT=clearInterval(xT))):(xT||(ET=LT.now(),xT=setInterval(AT,bT)),CT=1,_T(IT)))}OT.prototype=NT.prototype={constructor:OT,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?MT():+n)+(null==e?0:+e),this._next||mT===this||(mT?mT._next=this:yT=this,mT=this),this._call=t,this._time=n,PT()},stop:function(){this._call&&(this._call=null,this._time=1/0,PT())}};var kT,BT=function(t){function e(e){var n=this,r=e.name,i=e.s2,o=T(e,["name","s2"]);return(n=t.call(this,{name:r,style:o})||this).gridInfo={cols:[],rows:[]},n.updateGrid=function(t,e){var r,i;void 0===e&&(e="gridGroup"),n.gridGroup&&n.getElementById(e)?n.gridGroup.removeChildren():n.gridGroup=n.appendChild(new ys({id:e,style:{zIndex:2}}));var o=null!==(r=Iv(t.cols))&&void 0!==r?r:0,a=null!==(i=Iv(t.rows))&&void 0!==i?i:0,s=n.s2.theme.dataCell.cell,l=null==s?void 0:s.verticalBorderWidth;n.gridInfo=t;var u=l/2;n.gridInfo.cols.forEach((function(t){mw(n.gridGroup,{x1:t-u,x2:t-u,y1:0,y2:a,stroke:s.verticalBorderColor,strokeOpacity:s.verticalBorderColorOpacity,lineWidth:l})}));var c=null==s?void 0:s.horizontalBorderWidth,h=c/2;n.gridInfo.rows.forEach((function(t){mw(n.gridGroup,{x1:0,x2:o,y1:t-h,y2:t-h,stroke:s.horizontalBorderColor,strokeOpacity:s.horizontalBorderColorOpacity,lineWidth:c})}))},n.s2=i,n}return E(e,t),e}(ys),DT=function(t){function e(e){var n=t.call(this,e)||this;return n.initMergedCellsGroup(),n}return E(e,t),e.prototype.getMergedCellsGroup=function(){return this.mergedCellsGroup},e.prototype.initMergedCellsGroup=function(){this.mergedCellsGroup&&this.getElementById(Hy)||(this.mergedCellsGroup=this.appendChild(new ys({id:Hy,style:{zIndex:3}})))},e.prototype.updateMergedCells=function(){this.initMergedCellsGroup(),Px(this.s2,this.mergedCellsGroup)},e.prototype.addMergeCell=function(t){var e;null===(e=this.mergedCellsGroup)||void 0===e||e.appendChild(t),this.s2.emit(Xl.MERGED_CELLS_RENDER,t),this.s2.emit(Xl.LAYOUT_CELL_RENDER,t)},e.prototype.update=function(t){this.updateGrid(t),this.updateMergedCells()},e}(BT);!function(t){t.ScrollChange="scroll-change",t.ScrollEnd="scroll-end"}(kT||(kT={}));var FT=function(t){function e(e){var n=t.call(this)||this;n.eventHandlers=[],n.scrollFrameId=null,n.getCoordinatesName=function(){return{from:n.isHorizontal?"x1":"y1",to:n.isHorizontal?"x2":"y2"}},n.getCoordinatesWithBBoxExtraPadding=function(){var t=n.theme,e=t.lineCap,r=void 0===e?"butt":e,i=t.size,o=void 0===i?0:i;if("butt"===r)return{start:n.thumbOffset,end:n.thumbOffset+n.thumbLen};var a=n.isHorizontal?0:o/2,s=n.isHorizontal?o:o/2;return{start:n.thumbOffset+a,end:n.thumbOffset+n.thumbLen-s}},n.current=function(){var t=n.thumbLen/n.trackLen;return n.thumbOffset/n.trackLen/(1-t)},n.updateThumbLen=function(t){if(n.thumbLen!==t){n.thumbLen=t;var e=n.getCoordinatesName();n.thumbShape.attr(e.to,n.thumbOffset+t),n.emitScrollChange(n.thumbOffset/(n.trackLen-n.thumbLen)*n.scrollTargetMaxOffset,!1)}},n.updateThumbOffset=function(t,e){var r;void 0===e&&(e=!0);var i=n.validateRange(t);if(!(n.thumbOffset===i&&0!==i)){n.thumbOffset=i;var o=n.getCoordinatesName(),a=o.from,s=o.to,l=n.getCoordinatesWithBBoxExtraPadding(),u=l.start,c=l.end;n.thumbShape.attr(((r={})[a]=u,r[s]=c,r)),e&&n.emitScrollChange(i/(n.trackLen-n.thumbLen)*n.scrollTargetMaxOffset,!1)}},n.onlyUpdateThumbOffset=function(t){n.updateThumbOffset(t,!1)},n.emitScrollChange=function(t,e){void 0===e&&(e=!0),cancelAnimationFrame(n.scrollFrameId),n.scrollFrameId=requestAnimationFrame((function(){n.dispatchEvent(new Pa(kT.ScrollChange,{offset:t,updateThumbOffset:e}))}))},n.bindEventListener=function(t,e,n){return null==t||t.addEventListener(e,n,!1),{remove:function(){null==t||t.removeEventListener(e,n,!1)}}},n.addEvent=function(t,e,r){t.addEventListener(e,r),n.eventHandlers.push({target:t,type:e,handler:r})},n.initScrollBar=function(){n.scrollBarGroup=n.createScrollBarGroup(),n.scrollBarGroup.setPosition(n.position.x,n.position.y),n.bindEvents()},n.createScrollBarGroup=function(){var t=n.appendChild(new ys({className:n.isHorizontal?"horizontalBar":"verticalBar"}));return n.trackShape=n.createTrackShape(t),n.thumbShape=n.createThumbShape(t),t},n.createTrackShape=function(t){var e=n.theme,r=e.lineCap,i=void 0===r?"round":r,o=e.trackColor,a=e.size,s=void 0===a?0:a,l={lineWidth:s,stroke:o,lineCap:i};return n.isHorizontal?t.appendChild(new ws({style:S(S({},l),{x1:0,y1:s/2,x2:n.trackLen,y2:s/2})})):t.appendChild(new ws({style:S(S({},l),{x1:s/2,y1:0,x2:s/2,y2:n.trackLen})}))},n.createThumbShape=function(t){var e=n.theme,r=e.size,i=void 0===r?0:r,o=e.lineCap,a=void 0===o?"round":o,s={lineWidth:i,stroke:e.thumbColor,lineCap:a,cursor:"default"},l=n.getCoordinatesWithBBoxExtraPadding(),u=l.start,c=l.end;return n.isHorizontal?t.appendChild(new ws({style:S(S({},s),{x1:u,y1:i/2,x2:c,y2:i/2})})):t.appendChild(new ws({style:S(S({},s),{x1:i/2,y1:u,x2:i/2,y2:c})}))},n.bindEvents=function(){n.addEventListener(Yl.POINTER_DOWN,n.onStartEvent),n.addEventListener(Yl.POINTER_UP,n.onPointerUp),n.trackShape.addEventListener("click",n.onTrackClick),n.thumbShape.addEventListener(Yl.POINTER_OVER,n.onTrackPointerOver),n.thumbShape.addEventListener(Yl.POINTER_OUT,n.onTrackPointerOut)},n.onStartEvent=function(t){t.preventDefault();var e=t.clientX,r=t.clientY;n.startPos=n.isHorizontal?e:r,n.bindLaterEvent()},n.bindLaterEvent=function(){var t=n.ownerDocument.defaultView,e=document.body,r=[n.bindEventListener(e,Yl.POINTER_MOVE,n.onPointerMove),n.bindEventListener(e,Yl.POINTER_UP,n.onPointerUp),n.bindEventListener(e,Yl.POINTER_LEAVE,n.onPointerUp)];n.addEvent(t,Yl.POINTER_UP,n.onPointerUp),n.clearEvents=function(){r.forEach((function(t){null==t||t.remove()})),kv(n.eventHandlers,(function(t){var e;null===(e=t.target)||void 0===e||e.removeEventListener(t.type,t.handler)})),n.eventHandlers.length=0}},n.onTrackClick=function(t){var e=n.isHorizontal?t.x-n.position.x-n.thumbLen/2:t.y-n.position.y-n.thumbLen/2,r=n.validateRange(e);n.updateThumbOffset(r)},n.onPointerMove=function(t){t.preventDefault();var e=t.clientX,r=t.clientY,i=n.isHorizontal?e:r,o=i-n.startPos;n.startPos=i,n.updateThumbOffset(n.thumbOffset+o)},n.onPointerUp=function(t){var e;n.dispatchEvent(new Pa(kT.ScrollEnd,{})),t.preventDefault(),null===(e=n.clearEvents)||void 0===e||e.call(n)},n.onTrackPointerOver=function(){var t=n.theme,e=t.thumbHoverColor,r=t.hoverSize;n.thumbShape.attr("stroke",e),n.thumbShape.attr("lineWidth",r)},n.onTrackPointerOut=function(){var t=n.theme,e=t.thumbColor,r=t.size;n.thumbShape.attr("stroke",e),n.thumbShape.attr("lineWidth",r)},n.validateRange=function(t){var e=t;return t+n.thumbLen>n.trackLen?e=n.trackLen-n.thumbLen:t+n.thumbLen<n.thumbLen&&(e=0),e};var r=e.isHorizontal,i=void 0!==r&&r,o=e.trackLen,a=e.thumbLen,s=e.position,l=e.thumbOffset,u=void 0===l?0:l,c=e.theme,h=e.scrollTargetMaxOffset;return n.isHorizontal=i,n.thumbOffset=u,n.trackLen=o,n.thumbLen=a,n.position=s,n.theme=c,n.scrollTargetMaxOffset=h,n.initScrollBar(),n}return E(e,t),e}(ys),HT=function(t,e,n){if(n<=0)return{start:0,end:0};var r=Yv(t,(function(n,r){return e>=n&&e<t[r+1]}),0);r=Math.max(r,0);var i=n===e?r:Yv(t,(function(e,r){return n>e&&n<=t[r+1]}),r);return{start:r,end:i=Math.min(-1===i?1/0:i,t.length-2)}},zT=function(t,e){var n=e.width,r=e.originalWidth,i=Math.min(r-n,t);return i<0?0:i},GT=function(t,e,n){var r=Math.min(e-n,t);return r<0?0:r},WT=function(t,e){if(void 0===t&&(t=[]),_g(t))return[];var n=[];return t.forEach((function(t){(t instanceof e&&n.push(t),t instanceof ys)&&t.children.forEach((function(t){t instanceof e&&n.push(t)}))})),n},VT=function(t,e,n){return n.slice(t,e+1).map((function(t){return t.x+t.width}))},UT=function(t,e,n){for(var r=[],i=t;i<e+1;i++)r.push(n.getCellOffsetY(i+1));return r},jT=function(t,e,n){var r=R(n,4),i=r[0],o=r[1],a=r[2],s=r[3];return t>=i&&t<=o&&e>=a&&e<=s},YT=function(t){for(var e=R(t,4),n=e[0],r=e[1],i=e[2],o=e[3],a=[],s=n;s<=r;s+=1)for(var l=i;l<=o;l+=1)a.push([s,l]);return a},XT=function(t,e){var n=[],r=[];return Object.keys(e).forEach((function(i){var o=function(t,e){var n=[],r=[];if(_g(t))return _g(e)?{add:n,remove:r}:{add:YT(e),remove:r};if(_g(e))return{add:n,remove:YT(t)};for(var i=R(t,4),o=i[0],a=i[1],s=i[2],l=i[3],u=R(e,4),c=u[0],h=u[1],d=u[2],f=u[3],p=o;p<=a;p++)for(var v=s;v<=l;v++)jT(p,v,e)||r.push([p,v]);for(p=c;p<=h;p+=1)for(v=d;v<=f;v+=1)jT(p,v,t)||n.push([p,v]);return{add:n,remove:r}}((null==t?void 0:t[i])||[],e[i]),a=o.add,s=o.remove;n.push.apply(n,O([],R(a),!1)),r.push.apply(r,O([],R(s),!1))})),{add:n,remove:r}},qT=function(t,e){void 0===e&&(e=!1),this.x=0,this.y=0,this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.width=0,this.height=0,this.originalWidth=0,this.originalHeight=0,this.viewportHeight=0,this.viewportWidth=0,this.facet=t,this.spreadsheet=t.spreadsheet,this.layoutResult=t.getLayoutResult(),e&&this.calculateBBox()},KT=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return E(e,t),e.prototype.calculateBBox=function(){var t=this.getCornerBBoxWidth(),e=this.getCornerBBoxHeight();this.width=t,this.height=e,this.maxX=t,this.maxY=e},e.prototype.getCornerBBoxOriginalHeight=function(){var t=this.layoutResult.colsHierarchy,e=this.spreadsheet.options.style.colCell;return t.sampleNodeForLastLevel?pS(t.height):null==e?void 0:e.height},e.prototype.getCornerBBoxHeight=function(){return this.originalHeight=this.getCornerBBoxOriginalHeight(),this.originalHeight},e.prototype.getCornerBBoxWidth=function(){var t=this.layoutResult.rowsHierarchy;return this.originalWidth=pS(t.width+this.facet.getSeriesNumberWidth()),this.spreadsheet.isFrozenRowHeader()?this.adjustCornerBBoxWidth():this.originalWidth},e.prototype.adjustCornerBBoxWidth=function(){var t=this.layoutResult.colsHierarchy,e=this.spreadsheet.options,n=e.width,r=e.frozen,i=null==r?void 0:r.rowHeader,o=n*(Eg(i)?.5:Zd(i,0,1)),a=null==t?void 0:t.width,s=n-this.originalWidth;if(this.originalWidth<=o||a<=s)return this.originalWidth;return pS(a<=n-o?this.originalWidth-(a-s):o)},e}(qT),ZT=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return E(e,t),e.prototype.calculateBBox=function(){this.originalWidth=this.facet.getRealWidth(),this.originalHeight=this.facet.getRealHeight();var t=this.facet.cornerBBox,e=pS(t.maxX),n=pS(t.maxY);this.x=e+vS.getVerticalBorderWidth(this.spreadsheet),this.y=n+vS.getHorizontalBorderWidth(this.spreadsheet),this.minX=this.x,this.minY=this.y;var r=this.spreadsheet.theme.scrollBar.size,i=this.spreadsheet.options,o=i.width,a=i.height,s=Math.max(0,o-this.x),l=Math.max(0,a-this.y-r);if(this.width=s,this.height=l,this.viewportHeight=Math.abs(pS(Math.min(l,this.originalHeight))),this.viewportWidth=Math.abs(pS(Math.min(s,this.originalWidth))),this.maxX=this.x+this.viewportWidth,this.maxY=this.y+this.viewportHeight,this.spreadsheet.enableFrozenHeaders()){var u=this.spreadsheet.options.frozen,c=u.trailingColCount,h=void 0===c?0:c,d=u.trailingRowCount,f=void 0===d?0:d;h>0&&(this.viewportWidth=this.width,this.maxX=this.x+this.width),f>0&&(this.viewportHeight=this.height,this.maxY=this.y+this.height)}},e}(qT),$T=function(){function t(){this._events={}}return t.prototype.on=function(t,e,n){return this._events[t]||(this._events[t]=[]),this._events[t].push({callback:e,once:!!n}),this},t.prototype.once=function(t,e){return this.on(t,e,!0)},t.prototype.emit=function(t){for(var e=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=this._events[t]||[],o=this._events["*"]||[],a=function(r){for(var i=r.length,o=0;o<i;o++)if(r[o]){var a=r[o],s=a.callback;a.once&&(r.splice(o,1),0===r.length&&delete e._events[t],i--,o--),s.apply(e,n)}};a(i),a(o)},t.prototype.off=function(t,e){if(t)if(e){for(var n=this._events[t]||[],r=n.length,i=0;i<r;i++)n[i].callback===e&&(n.splice(i,1),r--,i--);0===n.length&&delete this._events[t]}else delete this._events[t];else this._events={};return this},t.prototype.getEvents=function(){return this._events},t}();var QT=function(){var t;return null!==(t=null===performance||void 0===performance?void 0:performance.now())&&void 0!==t?t:Date.now()},JT=function(t){function e(e){var n=t.call(this)||this;return n.bindPointerDown=function(t){window.cancelAnimationFrame(n.raf),n.panning=!0,n.preX=t.x,n.preY=t.y,n.speedX=0,n.speedY=0,n.lastMoveMS=QT()},n.bindPointerMove=function(t){if(n.panning){var e=QT(),r=e-n.lastMoveMS,i=n.preX-t.x,o=n.preY-t.y;n.speedX=i/r,n.speedY=o/r,n.preX=t.x,n.preY=t.y,n.lastMoveMS=e,n.emit("wheel",S(S({},t.clone()),{x:t.x,y:t.y,deltaX:i,deltaY:o}))}},n.bindPointerUp=function(t){n.panning=!1;var e=QT();if(n.speedX&&n.speedY&&!(e-n.lastMoveMS>=100)){!function r(){var i=QT();n.raf=window.requestAnimationFrame((function(){var o=QT(),a=(o-e)/800;if(a<1){var s=function(t){return t*t*t}(1-a),l=o-i;n.emit("wheel",S(S({},t.clone()),{x:t.x,y:t.y,deltaX:n.speedX*s*l,deltaY:n.speedY*s*l})),r()}}))}()}},n.canvas=e,n.panning=!1,n.init(),n}return E(e,t),e.prototype.init=function(){this.canvas.addEventListener(Yl.POINTER_DOWN,this.bindPointerDown),this.canvas.addEventListener(Yl.POINTER_MOVE,this.bindPointerMove),this.canvas.addEventListener(Yl.POINTER_UP,this.bindPointerUp)},e.prototype.destroy=function(){this.canvas.removeEventListener(Yl.POINTER_DOWN,this.bindPointerDown),this.canvas.removeEventListener(Yl.POINTER_MOVE,this.bindPointerMove),this.canvas.removeEventListener(Yl.POINTER_UP,this.bindPointerUp)},e}($T),tL=function(){function t(t){var e=this;this.scrollFrameId=null,this.getLayoutResult=function(){return S(S({},e.layoutResult),{cornerNodes:e.getCornerNodes(),seriesNumberNodes:e.getSeriesNumberNodes()})},this.hideScrollBar=function(){var t,n,r;null===(t=e.hRowScrollBar)||void 0===t||t.setAttribute("visibility","hidden"),null===(n=e.hScrollBar)||void 0===n||n.setAttribute("visibility","hidden"),null===(r=e.vScrollBar)||void 0===r||r.setAttribute("visibility","hidden")},this.delayHideScrollBar=xv(this.hideScrollBar,1e3),this.delayHideScrollbarOnMobile=function(){qC()&&e.delayHideScrollBar()},this.showVerticalScrollBar=function(){var t;null===(t=e.vScrollBar)||void 0===t||t.setAttribute("visibility","visible")},this.showHorizontalScrollBar=function(){var t,n;null===(t=e.hRowScrollBar)||void 0===t||t.setAttribute("visibility","visible"),null===(n=e.hScrollBar)||void 0===n||n.setAttribute("visibility","visible")},this.onContainerWheelForMobileCompatibility=function(){var t,n,r=e.spreadsheet.getCanvasElement();r.addEventListener("touchstart",(function(e){t=e.touches[0].clientY})),r.addEventListener("touchend",(function(r){(n=r.changedTouches[0].clientY)<t?e.scrollDirection=xm.SCROLL_UP:n>t&&(e.scrollDirection=xm.SCROLL_DOWN)}))},this.onContainerWheel=function(){qC()?e.onContainerWheelForMobile():e.onContainerWheelForPc()},this.getMobileWheelDeltaY=function(t){return e.scrollDirection===xm.SCROLL_UP?Math.max(0,t):e.scrollDirection===xm.SCROLL_DOWN?Math.min(0,t):t},this.onContainerWheelForPc=function(){var t=e.spreadsheet.getCanvasElement();null==t||t.addEventListener("wheel",e.onWheel)},this.onContainerWheelForMobile=function(){e.mobileWheel=new JT(e.spreadsheet.container),e.mobileWheel.on("wheel",(function(t){e.spreadsheet.hideTooltip();var n=t.originalEvent,r=t.deltaX,i=t.deltaY,o=t.x,a=t.y,s=e.getMobileWheelDeltaY(i);e.onWheel(S(S({},n),{deltaX:r,deltaY:s,offsetX:o,offsetY:a}))})),e.onContainerWheelForMobileCompatibility()},this.bindEvents=function(){e.onContainerWheel(),e.emitPaginationEvent()},this.setScrollOffset=function(t){Object.keys(t).forEach((function(n){var r=Hh(t,n);Pg(r)||e.spreadsheet.store.set(n,pS(r))}))},this.getScrollOffset=function(){var t=e.spreadsheet.store;return{scrollX:t.get("scrollX",0),scrollY:t.get("scrollY",0),rowHeaderScrollX:t.get("rowHeaderScrollX",0)}},this.resetScrollX=function(){e.setScrollOffset({scrollX:0})},this.resetRowScrollX=function(){e.setScrollOffset({rowHeaderScrollX:0})},this.resetScrollY=function(){e.setScrollOffset({scrollY:0})},this.resetScrollOffset=function(){e.setScrollOffset({scrollX:0,scrollY:0,rowHeaderScrollX:0})},this.emitPaginationEvent=function(){var t=e.spreadsheet.options.pagination;if(t){var n=t.current,r=void 0===n?1:n,i=t.pageSize,o=e.viewCellHeights.getTotalLength(),a=pS((o-1)/i)+1;e.spreadsheet.emit(Xl.LAYOUT_PAGINATION,{pageSize:i,pageCount:a,total:o,current:r})}},this.unbindEvents=function(){var t,n=e.spreadsheet.getCanvasElement();null==n||n.removeEventListener("wheel",e.onWheel),null===(t=e.mobileWheel)||void 0===t||t.destroy()},this.calculateCellWidthHeight=function(){var t=yy(e.layoutResult.colLeafNodes,(function(t,e){var n=Iv(t)||0;return t.push(n+e.width),t}),[0]);e.viewCellWidths=t,e.viewCellHeights=e.getViewCellHeights()},this.getRealScrollX=function(t,n){return void 0===n&&(n=0),e.spreadsheet.isFrozenRowHeader()?n:t},this.calculatePanelBBox=function(){e.panelBBox=new ZT(e,!0)},this.getRealWidth=function(){return Iv(e.viewCellWidths)||0},this.getRealHeight=function(){var t=e.spreadsheet.options.pagination,n=e.viewCellHeights;if(t){var r=e.getCellRange(),i=r.start,o=r.end;return n.getCellOffsetY(o+1)-n.getCellOffsetY(i)}return n.getTotalHeight()},this.scrollWithAnimation=function(t,n,r){var i,o,a,s;void 0===t&&(t={}),void 0===n&&(n=200);var l=e.getAdjustedScrollOffset({scrollX:(null===(i=t.offsetX)||void 0===i?void 0:i.value)||0,scrollY:(null===(o=t.offsetY)||void 0===o?void 0:o.value)||0,rowHeaderScrollX:(null===(a=t.rowHeaderOffsetX)||void 0===a?void 0:a.value)||0}),u=l.scrollX,c=l.scrollY,h=l.rowHeaderScrollX;null===(s=e.timer)||void 0===s||s.stop();var d,f,p=e.getScrollOffset(),v=[null!=u?u:p.scrollX,null!=c?c:p.scrollY,null!=h?h:p.rowHeaderScrollX],g=(d=Object.values(p),(lT(f=v)?sT:uT)(d,f));e.timer=NT((function(t){try{var i=Math.min(t/n,1),o=R(g(i),3),a=o[0],s=o[1],l=o[2];e.setScrollOffset({rowHeaderScrollX:l,scrollX:a,scrollY:s}),e.startScroll(),t>n&&(e.timer.stop(),null==r||r())}catch(u){console.error(u),e.timer.stop()}}))},this.scrollImmediately=function(t){var n,r,i;void 0===t&&(t={});var o=e.getAdjustedScrollOffset({scrollX:(null===(n=t.offsetX)||void 0===n?void 0:n.value)||0,scrollY:(null===(r=t.offsetY)||void 0===r?void 0:r.value)||0,rowHeaderScrollX:(null===(i=t.rowHeaderOffsetX)||void 0===i?void 0:i.value)||0}),a=o.scrollX,s=o.scrollY,l=o.rowHeaderScrollX;e.setScrollOffset({scrollX:a,scrollY:s,rowHeaderScrollX:l}),e.startScroll()},this.startScroll=function(t){var n,r,i;void 0===t&&(t=!1);var o=e.getScrollOffset(),a=o.rowHeaderScrollX,s=o.scrollX,l=o.scrollY;null===(n=e.hRowScrollBar)||void 0===n||n.onlyUpdateThumbOffset(e.getScrollBarOffset(a,e.hRowScrollBar)),null===(r=e.hScrollBar)||void 0===r||r.onlyUpdateThumbOffset(e.getScrollBarOffset(s,e.hScrollBar)),null===(i=e.vScrollBar)||void 0===i||i.onlyUpdateThumbOffset(e.getScrollBarOffset(l,e.vScrollBar)),e.dynamicRenderCell(t)},this.getRendererHeight=function(){var t=e.getCellRange(),n=t.start,r=t.end;return e.viewCellHeights.getCellOffsetY(r+1)-e.viewCellHeights.getCellOffsetY(n)},this.getAdjustedScrollOffset=function(t){var n=t.scrollX,r=t.scrollY,i=t.rowHeaderScrollX;return{scrollX:GT(n,e.layoutResult.colsHierarchy.width,e.panelBBox.width),scrollY:GT(r,e.getRendererHeight(),e.panelBBox.height),rowHeaderScrollX:zT(i,e.cornerBBox)}},this.renderRowScrollBar=function(t){if(e.spreadsheet.isFrozenRowHeader()&&e.cornerBBox.width<e.cornerBBox.originalWidth){var n=e.cornerBBox.originalWidth-e.cornerBBox.width,r=e.getScrollbarPosition().maxY,i=e.spreadsheet.theme,o=i.splitLine,a=i.scrollBar,s=Math.max(e.cornerBBox.width*e.cornerBBox.width/e.cornerBBox.originalWidth,null==a?void 0:a.thumbHorizontalMinSize),l=s-(null==o?void 0:o.verticalBorderWidth);e.hRowScrollBar=new FT({isHorizontal:!0,trackLen:e.cornerBBox.width,thumbLen:l,position:{x:e.cornerBBox.minX+e.scrollBarSize/2,y:r},thumbOffset:t*(e.cornerBBox.width-s)/n,theme:e.scrollBarTheme,scrollTargetMaxOffset:n}),e.hRowScrollBar.addEventListener(kT.ScrollChange,(function(t){var r,i,o=t.offset,a=pS(e.getValidScrollBarOffset(o,n));e.setScrollOffset({rowHeaderScrollX:a}),null===(r=e.rowHeader)||void 0===r||r.onRowScrollX(a,Yy),null===(i=e.seriesNumberHeader)||void 0===i||i.onRowScrollX(a,Ky),e.cornerHeader.onRowScrollX(a,Zy);var s=e.getScrollBarOffset(a,e.hRowScrollBar),l=e.getScrollOffset(),u={scrollX:l.scrollX,scrollY:l.scrollY,rowHeaderScrollX:s};e.hRowScrollBar.updateThumbOffset(s,!1),e.spreadsheet.emit(Xl.ROW_CELL_SCROLL,u),e.spreadsheet.emit(Xl.GLOBAL_SCROLL,u)})),e.foregroundGroup.appendChild(e.hRowScrollBar)}},this.getValidScrollBarOffset=function(t,e){return Zd(t,0,e)},this.renderHScrollBar=function(t,n,r){if(pS(t)<pS(n)){var i=e.scrollBarSize/2,o=e.getScrollbarPosition().maxY,a=!e.spreadsheet.isFrozenRowHeader(),s=t+(a?Math.min(e.cornerBBox.width,e.getCanvasSize().width):0),l={x:e.panelBBox.minX+(a?-e.cornerBBox.width+i:i),y:o},u=n+(a?e.cornerBBox.width:0),c=e.spreadsheet.theme.scrollBar,h=u-s,d=Math.max(s/u*s,null==c?void 0:c.thumbHorizontalMinSize);e.hScrollBar=new FT({isHorizontal:!0,trackLen:s,thumbLen:d,position:l,thumbOffset:r*(s-d)/h,theme:e.scrollBarTheme,scrollTargetMaxOffset:h}),e.hScrollBar.addEventListener(kT.ScrollChange,(function(t){var n=t.offset,r=t.updateThumbOffset,i=e.getValidScrollBarOffset(n,h);r&&e.hScrollBar.updateThumbOffset(e.getScrollBarOffset(i,e.hScrollBar),!1),e.setScrollOffset({scrollX:i}),e.dynamicRenderCell()})),e.foregroundGroup.appendChild(e.hScrollBar)}},this.getScrollbarPosition=function(){var t=e.panelBBox,n=t.maxX,r=t.maxY,i=e.getCanvasSize(),o=i.width,a=i.height,s=e.spreadsheet.options.interaction.scrollbarPosition===wm.CONTENT;return{maxX:(s?n:o)-e.scrollBarSize,maxY:s?r:a-e.scrollBarSize}},this.renderVScrollBar=function(t,n,r){if(t<n){var i=e.spreadsheet.theme.scrollBar,o=Math.max(t/n*t,null==i?void 0:i.thumbVerticalMinSize),a=n-t,s=e.getScrollbarPosition().maxX;e.vScrollBar=new FT({isHorizontal:!1,trackLen:t,thumbLen:o,thumbOffset:r*(t-o)/a,position:{x:s,y:e.panelBBox.minY},theme:e.scrollBarTheme,scrollTargetMaxOffset:a}),e.vScrollBar.addEventListener(kT.ScrollChange,(function(t){var n=t.offset,r=t.updateThumbOffset,i=e.getValidScrollBarOffset(n,a);r&&e.vScrollBar.updateThumbOffset(e.getScrollBarOffset(i,e.vScrollBar),!1),e.setScrollOffset({scrollY:i}),e.dynamicRenderCell()})),e.foregroundGroup.appendChild(e.vScrollBar)}},this.getScrollBarOffset=function(t,e){return t*(e.trackLen-e.thumbLen)/e.scrollTargetMaxOffset},this.isScrollOverThePanelArea=function(t){var n=t.offsetX,r=t.offsetY;return n>e.panelBBox.minX&&n<e.panelBBox.maxX&&r>e.panelBBox.minY&&r<e.panelBBox.maxY},this.isScrollOverTheCornerArea=function(t){var n=t.offsetX,r=t.offsetY;return n>e.cornerBBox.minX&&n<e.cornerBBox.maxX&&r>e.cornerBBox.minY&&r<e.cornerBBox.maxY+e.panelBBox.height},this.updateHorizontalRowScrollOffset=function(t){var n,r=t.offset,i=t.offsetX,o=t.offsetY;e.isScrollOverTheCornerArea({offsetX:i,offsetY:o})&&(null===(n=e.hRowScrollBar)||void 0===n||n.emitScrollChange(r))},this.updateHorizontalScrollOffset=function(t){var n,r=t.offset,i=t.offsetX,o=t.offsetY;e.hRowScrollBar&&!e.isScrollOverThePanelArea({offsetX:i,offsetY:o})||null===(n=e.hScrollBar)||void 0===n||n.emitScrollChange(r)},this.isScrollToLeft=function(t){var n=t.deltaX,r=t.offsetX,i=t.offsetY;if(!e.hScrollBar&&!e.hRowScrollBar)return!0;var o=!e.hRowScrollBar||e.isScrollOverThePanelArea({offsetY:i,offsetX:r})||e.hRowScrollBar.thumbOffset<=0,a=!e.hScrollBar||e.hScrollBar.thumbOffset<=0;return n<=0&&a&&o},this.isScrollToRight=function(t){var n,r,i,o,a,s,l=t.deltaX,u=t.offsetX,c=t.offsetY;if(!e.hScrollBar&&!e.hRowScrollBar)return!0;var h=e.spreadsheet.isFrozenRowHeader()?null===(n=e.panelBBox)||void 0===n?void 0:n.width:null===(r=e.panelBBox)||void 0===r?void 0:r.maxX,d=!e.hRowScrollBar||e.isScrollOverThePanelArea({offsetY:c,offsetX:u})||(null===(i=e.hRowScrollBar)||void 0===i?void 0:i.thumbOffset)+(null===(o=e.hRowScrollBar)||void 0===o?void 0:o.thumbLen)>=e.cornerBBox.width,f=e.hRowScrollBar&&e.isScrollOverTheCornerArea({offsetX:u,offsetY:c})||(null===(a=e.hScrollBar)||void 0===a?void 0:a.thumbOffset)+(null===(s=e.hScrollBar)||void 0===s?void 0:s.thumbLen)>=h;return l>=0&&f&&d},this.isScrollToTop=function(t){var n;return!e.vScrollBar||t<=0&&(null===(n=e.vScrollBar)||void 0===n?void 0:n.thumbOffset)<=0},this.isScrollToBottom=function(t){var n,r,i;return!e.vScrollBar||t>=0&&(null===(n=e.vScrollBar)||void 0===n?void 0:n.thumbOffset)+(null===(r=e.vScrollBar)||void 0===r?void 0:r.thumbLen)>=(null===(i=e.panelBBox)||void 0===i?void 0:i.height)},this.isVerticalScrollOverTheViewport=function(t){return!e.isScrollToTop(t)&&!e.isScrollToBottom(t)},this.isHorizontalScrollOverTheViewport=function(t){return!e.isScrollToLeft(t)&&!e.isScrollToRight(t)},this.isScrollOverTheViewport=function(t){var n=t.deltaY,r=t.deltaX;return!(t.offsetY<=e.cornerBBox.maxY)&&(0!==n?e.isVerticalScrollOverTheViewport(n):0!==r&&e.isHorizontalScrollOverTheViewport(t))},this.cancelScrollFrame=function(){return(!qC()||!e.scrollFrameId)&&(cancelAnimationFrame(e.scrollFrameId),!0)},this.clearScrollFrameIdOnMobile=function(){qC()&&(e.scrollFrameId=null)},this.stopScrollChainingIfNeeded=function(t){var n=e.spreadsheet.options.interaction;"auto"!==(null==n?void 0:n.overscrollBehavior)&&(e.cancelScrollFrame(),e.stopScrollChaining(t))},this.stopScrollChaining=function(t){var e,n;(null==t?void 0:t.cancelable)&&(null===(e=null==t?void 0:t.preventDefault)||void 0===e||e.call(t));var r=null==t?void 0:t.originalEvent;(null==r?void 0:r.cancelable)&&(null===(n=null==r?void 0:r.preventDefault)||void 0===n||n.call(r))},this.onWheel=function(t){var n=e.spreadsheet.options.interaction,r=t.deltaX,i=t.deltaY,o=t.offsetX,a=t.offsetY;t.shiftKey&&KC()&&(o=o-r+i,r=i,a-=i,i=0);var s=R(function(t,e,n){var r=Math.abs(t/e),i=r>2?0:e;return[(r<=.5?0:t)*n.horizontal,i*n.vertical]}(r,i,null==n?void 0:n.scrollSpeedRatio),2),l=s[0],u=s[1];e.spreadsheet.hideTooltip(),e.spreadsheet.interaction.clearHoverTimer(),e.isScrollOverTheViewport({deltaX:l,deltaY:u,offsetX:o,offsetY:a})?(e.stopScrollChaining(t),e.spreadsheet.interaction.addIntercepts([gm.HOVER]),e.cancelScrollFrame()&&(e.scrollFrameId=requestAnimationFrame((function(){var t,n=e.getScrollOffset(),r=n.scrollX,i=n.scrollY,s=n.rowHeaderScrollX;0!==l&&(e.showHorizontalScrollBar(),e.updateHorizontalRowScrollOffset({offsetX:o,offsetY:a,offset:l+s}),e.updateHorizontalScrollOffset({offsetX:o,offsetY:a,offset:l+r})),0!==u&&(e.showVerticalScrollBar(),null===(t=e.vScrollBar)||void 0===t||t.emitScrollChange(u+i)),e.delayHideScrollbarOnMobile(),e.clearScrollFrameIdOnMobile()})))):e.stopScrollChainingIfNeeded(t)},this.realDataCellRender=function(t,n){var r=e.calculateXYIndexes(t,n);IC.getInstance().logger("realDataCellRender:",e.preCellIndexes,r);var i=XT(e.preCellIndexes,r),o=i.add,a=i.remove;IC.getInstance().debugCallback("Data Cell Render",(function(){kv(o,(function(t){var n,r,i=R(t,2),o=i[0],a=i[1],s=e.getCellMeta(a,o);if(s){var l=null===(r=(n=e.spreadsheet.options).dataCell)||void 0===r?void 0:r.call(n,s);if(!l)return;l.position=[a,o],l.name="".concat(o,"-").concat(a),e.addDataCell(l)}}));var t=WT(e.panelGroup.children,Sx);kv(a,(function(e){var n=R(e,2),r=n[0],i=n[1],o=Xv(t,(function(t){return t.name==="".concat(r,"-").concat(i)}));null==o||o.remove()})),IC.getInstance().logger("Render Cell Panel: ".concat(null==t?void 0:t.length,", Add: ").concat(null==o?void 0:o.length,", Remove: ").concat(null==a?void 0:a.length))})),e.preCellIndexes=r,e.spreadsheet.emit(Xl.LAYOUT_AFTER_REAL_DATA_CELL_RENDER,{add:o,remove:a,spreadsheet:e.spreadsheet})},this.getGridInfo=function(){var t=R(e.preCellIndexes.center,4),n=t[0],r=t[1],i=t[2],o=t[3];return{cols:VT(n,r,e.layoutResult.colLeafNodes),rows:UT(i,o,e.viewCellHeights)}},this.onAfterScroll=xv((function(){var t=e.spreadsheet,n=t.interaction,r=t.container;if(!n.isSelectedState()&&(n.removeIntercepts([gm.HOVER]),n.getHoverAfterScroll())){var i=n.eventController.canvasMousemoveEvent;if(i){var o=i.x,a=i.y,s=r.document.elementFromPointSync(o,a);s&&r.emit(Yl.POINTER_MOVE,S(S({},i),{shape:s,target:s,timestamp:performance.now()}))}}}),300),this.getCellChildrenNodes=function(t){var n,r=null===(n=null==t?void 0:t.getMeta)||void 0===n?void 0:n.call(t),i=(null==t?void 0:t.cellType)===hm.ROW_CELL;return e.spreadsheet.isHierarchyTreeType()&&i?QC.getAllLeaveNodes(r).filter((function(t){return t.rowIndex===r.rowIndex})):QC.getAllChildrenNodes(r)},this.spreadsheet=t,this.init()}return Object.defineProperty(t.prototype,"scrollBarTheme",{get:function(){return this.spreadsheet.theme.scrollBar},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scrollBarSize",{get:function(){var t;return null===(t=this.scrollBarTheme)||void 0===t?void 0:t.size},enumerable:!1,configurable:!0}),t.prototype.initGroups=function(){var t=this.spreadsheet.container;this.backgroundGroup=t.appendChild(new ys({name:"backGroundGroup",style:{zIndex:0}})),this.initPanelGroups(),this.foregroundGroup=t.appendChild(new ys({name:"foreGroundGroup",style:{zIndex:3}}))},t.prototype.initPanelGroups=function(){var t=this.spreadsheet.container;this.panelGroup=t.appendChild(new ys({name:"panelGroup",style:{zIndex:1}})),this.panelScrollGroup=new DT({name:"panelScrollGroup",zIndex:1,s2:this.spreadsheet}),this.panelGroup.appendChild(this.panelScrollGroup)},t.prototype.getCellCustomSize=function(t,e){return Uu(e)?null==e?void 0:e(t):e},t.prototype.getRowCellDraggedWidth=function(t){var e,n,r,i=this.spreadsheet.options.style.rowCell;return null!==(n=null===(e=null==i?void 0:i.widthByField)||void 0===e?void 0:e[null==t?void 0:t.id])&&void 0!==n?n:null===(r=null==i?void 0:i.widthByField)||void 0===r?void 0:r[null==t?void 0:t.field]},t.prototype.getRowCellDraggedHeight=function(t){var e,n,r,i=this.spreadsheet.options.style.rowCell;return null!==(n=null===(e=null==i?void 0:i.heightByField)||void 0===e?void 0:e[null==t?void 0:t.id])&&void 0!==n?n:null===(r=null==i?void 0:i.heightByField)||void 0===r?void 0:r[null==t?void 0:t.field]},t.prototype.isCustomRowCellHeight=function(t){var e,n=this.spreadsheet.options.style.dataCell,r=null===(e=Om.dataCell)||void 0===e?void 0:e.height;return Rg(this.getCustomRowCellHeight(t))||(null==n?void 0:n.height)!==r},t.prototype.getCustomRowCellHeight=function(t){var e,n=this.spreadsheet.options.style.rowCell;return null!==(e=this.getRowCellDraggedHeight(t))&&void 0!==e?e:this.getCellCustomSize(t,null==n?void 0:n.height)},t.prototype.getRowCellHeight=function(t){var e,n=this.spreadsheet.options.style.dataCell;return null!==(e=this.getCustomRowCellHeight(t))&&void 0!==e?e:null==n?void 0:n.height},t.prototype.getColCellDraggedWidth=function(t){var e,n,r,i=this.spreadsheet.options.style.colCell;return null!==(n=null===(e=null==i?void 0:i.widthByField)||void 0===e?void 0:e[null==t?void 0:t.id])&&void 0!==n?n:null===(r=null==i?void 0:i.widthByField)||void 0===r?void 0:r[null==t?void 0:t.field]},t.prototype.getColCellDraggedHeight=function(t){var e,n,r,i=this.spreadsheet.options.style.colCell;return null!==(n=null===(e=null==i?void 0:i.heightByField)||void 0===e?void 0:e[null==t?void 0:t.id])&&void 0!==n?n:null===(r=null==i?void 0:i.heightByField)||void 0===r?void 0:r[null==t?void 0:t.field]},t.prototype.getColNodeHeight=function(t,e){var n,r;if(!t)return 0;var i=this.spreadsheet.options.style.colCell,o=null!==(n=this.getColCellDraggedHeight(t))&&void 0!==n?n:this.getCellCustomSize(t,null==i?void 0:i.height);if(Rg(o)&&o!==(null===(r=Om.colCell)||void 0===r?void 0:r.height))return o;var a=new(this.spreadsheet.isTableMode()?LS:TS)(t,this.spreadsheet,{shallowRender:!0}),s=this.getDefaultColNodeHeight(t,e);return this.getCellAdaptiveHeight(a,s)},t.prototype.getDefaultColNodeHeight=function(t,e){var n,r,i,o;if(!t)return 0;var a=this.spreadsheet.options.style.colCell,s=(null===(r=null===(n=null==e?void 0:e.sampleNodesForAllLevels)||void 0===n?void 0:n.find((function(e){return e.level===t.level})))||void 0===r?void 0:r.height)||0,l=null!==(o=null!==(i=this.getColCellDraggedHeight(t))&&void 0!==i?i:this.getCellCustomSize(t,null==a?void 0:a.height))&&void 0!==o?o:0;return Math.max(l,s)},t.prototype.getCellAdaptiveHeight=function(t,e){if(void 0===e&&(e=0),!t)return e;var n=t.getStyle().cell.padding;t.drawTextShape();var r=t.getTextShape().parsedStyle,i=t.getActualTextHeight(),o=i+n.top+n.bottom;return(null==r?void 0:r.maxLines)>1&&i>=e?o:e},t.prototype.updateColsHierarchySampleMaxHeightNodes=function(t){var e=this,n=t.sampleNodesForAllLevels.map((function(n){return zg(t.getNodes(n.level).filter((function(t){return!t.isTotals})),(function(n){return e.getColNodeHeight(n,t)}))}));t.sampleNodesForAllLevels=yp(n),t.sampleNodesForAllLevels.forEach((function(n){var r;if(n.height=e.getColNodeHeight(n,t),0===n.level)n.y=0;else{var i=null!==(r=t.sampleNodesForAllLevels[n.level-1])&&void 0!==r?r:{y:0,height:0};n.y=i.y+i.height}t.height+=n.height}))},t.prototype.render=function(){var t;_g((t=this.spreadsheet.dataCfg.fields).rows)&&_g(t.columns)&&_g(t.values)||(this.adjustScrollOffset(),this.renderHeaders(),this.renderScrollBars(),this.renderBackground(),this.dynamicRenderCell(!0))},t.prototype.adjustScrollOffset=function(){var t=this.getAdjustedScrollOffset(this.getScrollOffset());this.setScrollOffset(t)},t.prototype.getSeriesNumberWidth=function(){var t,e,n=this.spreadsheet.options.seriesNumber;return(null==n?void 0:n.enable)&&null!==(e=null===(t=this.spreadsheet.theme.rowCell)||void 0===t?void 0:t.seriesNumberWidth)&&void 0!==e?e:0},t.prototype.getCanvasSize=function(){var t=this.spreadsheet.options,e=t.width,n=void 0===e?0:e,r=t.height;return{width:n,height:void 0===r?0:r}},t.prototype.getContentHeight=function(){var t=this.layoutResult,e=t.rowsHierarchy,n=t.colsHierarchy;return e.height+n.height},t.prototype.updateScrollOffset=function(t){var e,n,r,i,o,a;void 0===(null===(e=t.rowHeaderOffsetX)||void 0===e?void 0:e.value)?void 0===(null===(r=t.offsetX)||void 0===r?void 0:r.value)?void 0!==(null===(o=t.offsetY)||void 0===o?void 0:o.value)&&((null===(a=t.offsetY)||void 0===a?void 0:a.animate)?this.scrollWithAnimation(t):this.scrollImmediately(t)):(null===(i=t.offsetX)||void 0===i?void 0:i.animate)?this.scrollWithAnimation(t):this.scrollImmediately(t):(null===(n=t.rowHeaderOffsetX)||void 0===n?void 0:n.animate)?this.scrollWithAnimation(t):this.scrollImmediately(t)},t.prototype.getPaginationScrollY=function(){var t=this.spreadsheet.options.pagination;if(t){var e=t.current,n=void 0===e?1:e,r=t.pageSize,i=this.viewCellHeights,o=Math.max((n-1)*r,0);return i.getCellOffsetY(o)}return 0},t.prototype.destroy=function(){this.unbindEvents(),this.clearAllGroup(),this.preCellIndexes=null,cancelAnimationFrame(this.scrollFrameId)},t.prototype.calculateCornerBBox=function(){this.cornerBBox=new KT(this,!0)},t.prototype.getCellRange=function(){var t=this.spreadsheet.options.pagination;return function(t,e){var n=t,r=0,i=n.getTotalLength()-1;if(e){var o=e.current,a=void 0===o?1:o,s=e.pageSize;r=Math.max((a-1)*s,0),i=Math.min(a*s-1,n.getTotalLength()-1)}return{start:r,end:i}}(this.viewCellHeights,t)},t.prototype.clearAllGroup=function(){for(var t=this.panelGroup.children,e=void 0===t?[]:t,n=e.length-1;n>=0;n--){var r=e[n];r instanceof ys?r.removeChildren():e[n].remove()}this.foregroundGroup.removeChildren(),this.backgroundGroup.removeChildren()},t.prototype.translateRelatedGroups=function(t,e,n){var r,i,o,a,s,l;Wx(this.panelScrollGroup,this.panelBBox.x-t,this.panelBBox.y-e),null===(r=this.rowHeader)||void 0===r||r.onScrollXY(this.getRealScrollX(t,n),e,Yy),null===(i=this.seriesNumberHeader)||void 0===i||i.onScrollXY(this.getRealScrollX(t,n),e,Ky),null===(o=this.cornerHeader)||void 0===o||o.onCorScroll(this.getRealScrollX(t,n),Zy),null===(a=this.centerFrame)||void 0===a||a.onChangeShadowVisibility(t,this.getRealWidth()-this.panelBBox.width),null===(s=this.centerFrame)||void 0===s||s.onBorderScroll(this.getCenterFrameScrollX(t)),null===(l=this.columnHeader)||void 0===l||l.onColScroll(t,$y)},t.prototype.getCenterFrameScrollX=function(t){return this.getRealScrollX(t)},t.prototype.init=function(){var t=this;this.initGroups(),IC.getInstance().debugCallback("Header Layout",(function(){t.layoutResult=t.doLayout(),t.saveInitColumnLeafNodes(t.layoutResult.colLeafNodes),t.spreadsheet.emit(Xl.LAYOUT_AFTER_HEADER_LAYOUT,t.layoutResult)})),this.calculateCellWidthHeight(),this.calculateCornerBBox(),this.calculatePanelBBox(),this.bindEvents()},t.prototype.renderBackground=function(){var t=this.getCanvasSize(),e=t.width,n=t.height,r=this.spreadsheet.theme.background,i=r.color,o=r.opacity;this.backgroundGroup.appendChild(new Ss({style:{fill:i,opacity:o,x:0,y:0,width:e,height:n}}))},t.prototype.renderScrollBars=function(){var t=this.getScrollOffset(),e=t.scrollX,n=t.scrollY,r=t.rowHeaderScrollX,i=this.panelBBox,o=i.width,a=i.height,s=this.layoutResult.colsHierarchy.width,l=this.getRealHeight();this.renderRowScrollBar(r),this.renderHScrollBar(o,s,e),this.renderVScrollBar(a,l,n)},t.prototype.renderHeaders=function(){var t=this.getSeriesNumberWidth();this.rowHeader=this.getRowHeader(),this.columnHeader=this.getColHeader(),t>0&&!this.seriesNumberHeader&&(this.seriesNumberHeader=this.getSeriesNumberHeader()),this.cornerHeader=this.getCornerHeader(),this.centerFrame=this.getCenterFrame(),this.seriesNumberHeader&&this.foregroundGroup.appendChild(this.seriesNumberHeader),this.rowHeader&&this.foregroundGroup.appendChild(this.rowHeader),this.foregroundGroup.appendChild(this.columnHeader),this.foregroundGroup.appendChild(this.cornerHeader),this.foregroundGroup.appendChild(this.centerFrame)},t.prototype.getRowHeaderCfg=function(){var t=this.panelBBox,e=t.y,n=t.viewportHeight,r=t.viewportWidth,i=t.height,o=this.getSeriesNumberWidth();return{width:this.cornerBBox.width,height:i,viewportWidth:r,viewportHeight:n,position:{x:o,y:e},nodes:this.layoutResult.rowNodes,spreadsheet:this.spreadsheet}},t.prototype.getRowHeader=function(){return this.rowHeader?this.rowHeader:new gS(this.getRowHeaderCfg())},t.prototype.getColHeader=function(){if(!this.columnHeader){var t=this.panelBBox,e=t.x,n=t.width,r=t.viewportHeight,i=t.viewportWidth;return new Kx({width:n,cornerWidth:this.cornerBBox.width,height:this.cornerBBox.height,viewportWidth:i,viewportHeight:r,position:{x:e,y:0},nodes:this.layoutResult.colNodes,sortParam:this.spreadsheet.store.get("sortParam"),spreadsheet:this.spreadsheet})}return this.columnHeader},t.prototype.getCornerHeader=function(){return this.cornerHeader||fS.getCornerHeader({panelBBox:this.panelBBox,cornerBBox:this.cornerBBox,seriesNumberWidth:this.getSeriesNumberWidth(),layoutResult:this.layoutResult,spreadsheet:this.spreadsheet})},t.prototype.getSeriesNumberHeader=function(){return this.seriesNumberHeader||CS.getSeriesNumberHeader({spreadsheet:this.spreadsheet,panelBBox:this.panelBBox,cornerWidth:this.cornerBBox.width,seriesNumberWidth:this.getSeriesNumberWidth(),rowsHierarchy:this.layoutResult.rowsHierarchy})},t.prototype.getCenterFrame=function(){var t;if(!this.centerFrame){var e=this.panelBBox,n=e.viewportWidth,r=e.viewportHeight,i=this.cornerBBox.width,o=this.cornerBBox.height,a=null===(t=this.spreadsheet.options)||void 0===t?void 0:t.frame,s={position:{x:this.cornerBBox.x,y:this.cornerBBox.y},cornerWidth:i,cornerHeight:o,viewportWidth:n,viewportHeight:r,showViewportLeftShadow:!1,showViewportRightShadow:!1,spreadsheet:this.spreadsheet};return a?a(s):new vS(s)}return this.centerFrame},t.prototype.updatePanelScrollGroup=function(){this.gridInfo=this.getGridInfo(),this.panelScrollGroup.update(this.gridInfo)},t.prototype.dynamicRenderCell=function(t){var e=this.getScrollOffset(),n=e.scrollX,r=e.scrollY,i=e.rowHeaderScrollX,o=r+this.getPaginationScrollY();this.spreadsheet.hideTooltip(),this.spreadsheet.interaction.clearHoverTimer(),this.realDataCellRender(n,o),this.updatePanelScrollGroup(),this.translateRelatedGroups(n,o,i),this.clip(n,o),t||this.emitScrollEvent({scrollX:n,scrollY:o,rowHeaderScrollX:i}),this.onAfterScroll()},t.prototype.emitScrollEvent=function(t){this.spreadsheet.emit(Xl.GLOBAL_SCROLL,t)},t.prototype.saveInitColumnLeafNodes=function(t){void 0===t&&(t=[]);var e=this.spreadsheet,n=e.store,r=e.options.interaction.hiddenColumnFields,i=void 0===r?[]:r,o=t.length+i.length,a=this.getInitColLeafNodes();o!==(null==a?void 0:a.length)&&n.set("initColLeafNodes",t)},t.prototype.getHiddenColumnsInfo=function(t){var e=this.spreadsheet.store.get("hiddenColumnsDetail",[]);if(!_g(e))return e.find((function(e){var n;return null===(n=null==e?void 0:e.hideColumnNodes)||void 0===n?void 0:n.some((function(e){return e.id===t.id}))}))},t.prototype.updateCustomFieldsSampleNodes=function(t){if(this.spreadsheet.isCustomColumnFields()){var e=t.getNodes().filter((function(e){var n;return null===(n=t.sampleNodeForLastLevel)||void 0===n?void 0:n.id.includes(e.id)}));t.sampleNodesForAllLevels=e,t.height=Ty(e,"height")}},t.prototype.adjustRowLeafNodesWidth=function(t){this.spreadsheet.isCustomRowFields()&&this.adjustLeafNodesSize("width")(t)},t.prototype.adjustColLeafNodesHeight=function(t){this.spreadsheet.isCustomColumnFields()&&this.adjustLeafNodesSize("height")(t)},t.prototype.adjustLeafNodesSize=function(t){return function(e){var n=e.leafNodes,r=e.hierarchy,i=r.sampleNodeForLastLevel,o=r.sampleNodesForAllLevels;n.forEach((function(e){if(!(e.level>(null==i?void 0:i.level))){var n=Ty(o,(function(n){return n.level<e.level?0:n[t]}));e[t]=n}}))}},t.prototype.getHeaderNodes=function(t){var e=mp(this.getCornerNodes(),this.getSeriesNumberNodes(),this.getRowNodes(),this.getColNodes());return t?e.filter((function(e){return t.includes(e.id)})):e},t.prototype.getCornerNodes=function(){var t;return(null===(t=this.cornerHeader)||void 0===t?void 0:t.getNodes())||[]},t.prototype.getSeriesNumberNodes=function(){var t;return(null===(t=this.seriesNumberHeader)||void 0===t?void 0:t.getNodes())||[]},t.prototype.getColNodes=function(t){var e=this.layoutResult.colNodes,n=void 0===e?[]:e;return Og(t)?n:n.filter((function(e){return e.level===t}))},t.prototype.getTopLevelColNodes=function(){return this.getColNodes(0)},t.prototype.getColNodeById=function(t){return this.getColNodes().find((function(e){return e.id===t}))},t.prototype.getColNodeByIndex=function(t){return this.getColNodes().find((function(e){return e.colIndex===t}))},t.prototype.getColLeafNodeByIndex=function(t){return this.getColLeafNodes().find((function(e){return e.colIndex===t}))},t.prototype.getColNodesByField=function(t){return this.getColNodes().filter((function(e){return e.field===t}))},t.prototype.getColLeafNodes=function(){var t;return(null===(t=this.layoutResult)||void 0===t?void 0:t.colLeafNodes)||[]},t.prototype.getColTotalsNodes=function(t){return this.getColNodes(t).filter((function(t){return t.isTotals}))},t.prototype.getColSubTotalsNodes=function(t){return this.getColTotalsNodes(t).filter((function(t){return t.isSubTotals}))},t.prototype.getColGrandTotalsNodes=function(t){return this.getColTotalsNodes(t).filter((function(t){return t.isGrandTotals}))},t.prototype.getRowNodes=function(t){var e=this.layoutResult.rowNodes,n=void 0===e?[]:e;return Og(t)?n:n.filter((function(e){return e.level===t}))},t.prototype.getRowNodeById=function(t){return this.getRowNodes().find((function(e){return e.id===t}))},t.prototype.getRowNodeByIndex=function(t){return this.getRowNodes().find((function(e){return e.rowIndex===t}))},t.prototype.getRowLeafNodeByIndex=function(t){return this.getRowLeafNodes().find((function(e){return e.rowIndex===t}))},t.prototype.getRowNodesByField=function(t){return this.getRowNodes().filter((function(e){return e.field===t}))},t.prototype.getRowLeafNodes=function(){var t;return(null===(t=this.layoutResult)||void 0===t?void 0:t.rowLeafNodes)||[]},t.prototype.getRowTotalsNodes=function(t){return this.getRowNodes(t).filter((function(t){return t.isTotals}))},t.prototype.getRowSubTotalsNodes=function(t){return this.getRowTotalsNodes(t).filter((function(t){return t.isSubTotals}))},t.prototype.getRowGrandTotalsNodes=function(t){return this.getRowTotalsNodes(t).filter((function(t){return t.isGrandTotals}))},t.prototype.getDataCells=function(){var t;return WT(null===(t=this.panelGroup)||void 0===t?void 0:t.children,Sx)},t.prototype.getRowCells=function(){var t,e=(null===(t=this.getRowHeader())||void 0===t?void 0:t.children)||[];return WT(e,OS).filter((function(t){return t.cellType===hm.ROW_CELL}))},t.prototype.getRowLeafCells=function(){return this.getRowCells().filter((function(t){return t.getMeta().isLeaf}))},t.prototype.getColCells=function(){var t,e=(null===(t=this.getColHeader())||void 0===t?void 0:t.children)||[];return WT(e,TS).filter((function(t){return t.cellType===hm.COL_CELL}))},t.prototype.getColLeafCells=function(){return this.getColCells().filter((function(t){return t.getMeta().isLeaf}))},t.prototype.getMergedCells=function(){return Vv(this.panelScrollGroup.getMergedCellsGroup().children,(function(t){return t instanceof Tx}))},t.prototype.getCornerCells=function(){return Vv(this.getCornerHeader().children,(function(t){return t instanceof dS}))},t.prototype.getHeaderCells=function(t){var e=mp(this.getCornerCells(),this.getSeriesNumberCells(),this.getRowCells(),this.getColCells());return t?e.filter((function(e){return t.includes(e.getMeta().id)})):e},t.prototype.getCellById=function(t){return this.getCells().find((function(e){return e.getMeta().id===t}))},t.prototype.getCellsByField=function(t){return this.getCells().filter((function(e){return e.getMeta().field===t}))},t.prototype.getCells=function(t){var e=mp(this.getHeaderCells(),this.getDataCells());return t?e.filter((function(e){return t.includes(e.getMeta().id)})):e},t.prototype.getInitColLeafNodes=function(){return this.spreadsheet.store.get("initColLeafNodes",[])},t.prototype.clearInitColLeafNodes=function(){this.spreadsheet.store.set("initColLeafNodes",void 0)},t}(),eL=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return E(e,t),e}(BT),nL=function(t){function e(){var e,n=null!==t&&t.apply(this,arguments)||this;return n.frozenGroupInfo=((e={})[nm.FROZEN_COL]={width:0,x:0,range:[]},e[nm.FROZEN_TRAILING_COL]={width:0,x:0,range:[]},e[nm.FROZEN_ROW]={height:0,y:0,range:[]},e[nm.FROZEN_TRAILING_ROW]={height:0,y:0,range:[]},e),n.panelScrollGroupIndexes=[0,0,0,0],n.addDataCell=function(t){var e=n.getFrozenOptions(),r=e.rowCount,i=void 0===r?0:r,o=e.colCount,a=void 0===o?0:o,s=e.trailingRowCount,l=void 0===s?0:s,u=e.trailingColCount,c=void 0===u?0:u,h=n.getColNodes().length,d=n.getCellRange(),f=n.getRealFrozenColumns(a,c),p=f.colCount,v=f.trailingColCount,g=function(t,e,n,r){var i=e.colCount,o=void 0===i?0:i,a=e.rowCount,s=void 0===a?0:a,l=e.trailingColCount,u=void 0===l?0:l,c=e.trailingRowCount,h=void 0===c?0:c,d=t.colIndex,f=t.rowIndex;return Hx(f,r.start,s)?em.ROW:zx(f,r.end,h)?em.TRAILING_ROW:Dx(d,o)?em.COL:Fx(d,u,n)?em.TRAILING_COL:em.SCROLL}(t.getMeta(),{rowCount:i,trailingRowCount:l,colCount:p,trailingColCount:v},h,d),y=dm[g];y&&n[y].appendChild(t);setTimeout((function(){n.spreadsheet.emit(Xl.DATA_CELL_RENDER,t),n.spreadsheet.emit(Xl.LAYOUT_CELL_RENDER,t)}),100)},n.addFrozenCell=function(t,e,r){var i,o,a=n.getCellMeta(e,t);if(a){a.isFrozenCorner=!0;var s=null===(o=(i=n.spreadsheet.options).dataCell)||void 0===o?void 0:o.call(i,a);r.appendChild(s)}},n.translateFrozenGroups=function(){var t=n.getScrollOffset(),e=t.scrollY,r=t.scrollX,i=n.getPaginationScrollY(),o=n.panelBBox,a=o.x,s=o.y;Wx(n.frozenTopGroup,a,s-i),Wx(n.frozenBottomGroup,a,s),Wx(n.frozenRowGroup,a-r,s-i),Wx(n.frozenTrailingRowGroup,a-r,s),Wx(n.frozenColGroup,a,s-e-i),Wx(n.frozenTrailingColGroup,a,s-e-i)},n.renderFrozenGroupSplitLine=function(t,e){var r,i=n.panelBBox,o=i.width,a=i.height,s=i.viewportWidth,l=i.viewportHeight,u=i.x,c=i.y,h=n.getTopLevelColNodes(),d=n.getCellRange(),f=n.getFrozenOptions(),p=f.rowCount,v=void 0===p?0:p,g=f.colCount,y=void 0===g?0:g,m=f.trailingColCount,C=void 0===m?0:m,w=f.trailingRowCount,x=void 0===w?0:w,b=Math.floor(e-n.getPaginationScrollY()),E=Math.max(0,Iv(n.viewCellWidths)-s),T=Math.max(0,n.viewCellHeights.getCellOffsetY(d.end+1)-n.viewCellHeights.getCellOffsetY(d.start)-l);null===(r=n.foregroundGroup.getElementById(qy))||void 0===r||r.remove();var L=n.spreadsheet.theme.splitLine,_=n.foregroundGroup.appendChild(new ys({id:qy,style:{zIndex:4}})),M={lineWidth:1,stroke:null==L?void 0:L.verticalBorderColor,opacity:null==L?void 0:L.verticalBorderColorOpacity},R={lineWidth:1,stroke:null==L?void 0:L.horizontalBorderColor,opacity:null==L?void 0:L.horizontalBorderColorOpacity},O=vS.getVerticalBorderWidth(n.spreadsheet);if(y>0){var N=h.reduce((function(t,e,n){return n<y?t+e.width:t}),0),I=(x>0?a:l)+c;mw(_,S(S({},M),{x1:N+u,x2:N+u,y1:0,y2:I})),(null==L?void 0:L.showShadow)&&t>0&&_.appendChild(new Ss({style:{x:N+u,y:0,width:null==L?void 0:L.shadowWidth,height:I,fill:n.getShadowFill(0)}}))}if(v>0){var A=c+n.getTotalHeightForRange(d.start,d.start+v-1),P=C>0?o:s;mw(_,S(S({},R),{x1:0,x2:P+O,y1:A,y2:A})),(null==L?void 0:L.showShadow)&&b>0&&_.appendChild(new Ss({style:{x:0,y:A,width:P+O,height:null==L?void 0:L.shadowWidth,fill:n.getShadowFill(90)}}))}if(C>0){N=h[h.length-C].x,I=(x?a:l)+c;mw(_,S(S({},M),{x1:N+u,x2:N+u,y1:0,y2:I})),(null==L?void 0:L.showShadow)&&pS(t)<pS(E)&&_.appendChild(new Ss({style:{x:N+u-L.shadowWidth,y:0,width:L.shadowWidth,height:I,fill:n.getShadowFill(180)}}))}if(x>0){A=n.panelBBox.maxY-n.getTotalHeightForRange(d.end-x+1,d.end),P=C>0?o:s;mw(_,S(S({},R),{x1:0,x2:P+O,y1:A,y2:A})),(null==L?void 0:L.showShadow)&&b<pS(T)&&_.appendChild(new Ss({style:{x:0,y:A-L.shadowWidth,width:P+O,height:L.shadowWidth,fill:n.getShadowFill(270)}}))}},n.renderFrozenPanelCornerGroup=function(){var t=n.getTopLevelColNodes(),e=n.getCellRange(),r=n.getFrozenOptions(),i=r.rowCount,o=void 0===i?0:i,a=r.colCount,s=void 0===a?0:a,l=r.trailingRowCount,u=void 0===l?0:l,c=r.trailingColCount,h=Ux(t,s,void 0===c?0:c),d=function(t,e,n){for(var r,i=t.colCount,o=void 0===i?0:i,a=t.rowCount,s=void 0===a?0:a,l=t.trailingColCount,u=void 0===l?0:l,c=t.trailingRowCount,h=void 0===c?0:c,d=((r={})[em.TOP]=[],r[em.BOTTOM]=[],r),f=0;f<o;f++){for(var p=n.start;p<n.start+s;p++)d[em.TOP].push({x:f,y:p});if(h>0)for(p=0;p<h;p++){var v=n.end-p;d[em.BOTTOM].push({x:f,y:v})}}for(f=0;f<u;f++){var g=e-1-f;for(p=n.start;p<n.start+s;p++)d[em.TOP].push({x:g,y:p});if(h>0)for(p=0;p<h;p++)v=n.end-p,d[em.BOTTOM].push({x:g,y:v})}return d}({rowCount:o,colCount:h.colCount,trailingRowCount:u,trailingColCount:h.trailingColCount},n.getColLeafNodes().length,e);Object.keys(d).forEach((function(t){var e=d[t],r=n[dm[t]];r&&e.forEach((function(t){n.addFrozenCell(t.x,t.y,r)}))}))},n.getRealFrozenColumns=function(t,e){if(t||e){var r=n.getTopLevelColNodes();return Ux(r,t,e)}return{colCount:t,trailingColCount:e}},n.getTotalHeightForRange=function(t,e){if(t<0||e<0)return 0;if(n.rowOffsets)return n.rowOffsets[e+1]-n.rowOffsets[t];for(var r=0,i=t;i<e+1;i++){r+=n.getDefaultCellHeight()}return r},n.getShadowFill=function(t){var e,r,i=n.spreadsheet.theme.splitLine;return"l (".concat(t,") 0:").concat(null===(e=null==i?void 0:i.shadowColors)||void 0===e?void 0:e.left," 1:").concat(null===(r=null==i?void 0:i.shadowColors)||void 0===r?void 0:r.right)},n}return E(e,t),e.prototype.initPanelGroups=function(){var e,n=this;t.prototype.initPanelGroups.call(this),e=R([zy,Gy,Wy,Vy,Uy,jy].map((function(t){var e=new eL({name:t,zIndex:4,s2:n.spreadsheet});return n.panelGroup.appendChild(e),e})),6),this.frozenRowGroup=e[0],this.frozenColGroup=e[1],this.frozenTrailingRowGroup=e[2],this.frozenTrailingColGroup=e[3],this.frozenTopGroup=e[4],this.frozenBottomGroup=e[5]},e.prototype.getFrozenOptions=function(){var t=this.getColLeafNodes().length,e=this.getCellRange();return pw(this.spreadsheet.options.frozen,t,e.end-e.start+1)},e.prototype.calculateFrozenGroupInfo=function(){var t=this.getFrozenOptions(),e=t.colCount,n=void 0===e?0:e,r=t.rowCount,i=void 0===r?0:r,o=t.trailingColCount,a=void 0===o?0:o,s=t.trailingRowCount,l=void 0===s?0:s,u=this.getTopLevelColNodes(),c=this.viewCellHeights,h=this.getCellRange(),d=this.frozenGroupInfo,f=d.frozenCol,p=d.frozenTrailingCol,v=d.frozenRow,g=d.frozenTrailingRow;n>0&&(f.width=u[n-1].x+u[n-1].width,f.x=0,f.range=[0,n-1]),i>0&&(v.height=c.getCellOffsetY(h.start+i)-c.getCellOffsetY(h.start),v.y=0,v.range=[h.start,h.start+i-1]),a>0&&(p.width=u[u.length-1].x-u[u.length-a].x+u[u.length-1].width,p.x=this.panelBBox.width-p.width,p.range=[u.length-a,u.length-1]),l>0&&(g.height=c.getCellOffsetY(h.end+1)-c.getCellOffsetY(h.end+1-l),g.y=this.panelBBox.height-g.height,g.range=[h.end-l+1,h.end])},e.prototype.getFinalViewport=function(){var t=this.panelBBox,e=t.viewportHeight,n=t.viewportWidth,r=this.getFrozenOptions(),i=r.colCount,o=void 0===i?0:i,a=r.rowCount,s=void 0===a?0:a,l=r.trailingColCount,u=void 0===l?0:l,c=r.trailingRowCount,h=void 0===c?0:c,d={width:n,height:e,x:0,y:0};if(o>0||u>0){var f=this.frozenGroupInfo,p=f.frozenTrailingCol,v=f.frozenCol;d.width-=p.width+v.width,d.x+=v.width}if(s>0||h>0){var g=this.frozenGroupInfo,y=g.frozenRow,m=g.frozenTrailingRow;d.height<y.height+m.height?(d.height=0,d.y=0):(d.height-=y.height+m.height,d.y+=y.height)}return d},e.prototype.calculateXYIndexes=function(t,e){var n,r,i=this.getColLeafNodes().length,o=this.getCellRange(),a=this.getFrozenOptions(),s=a.colCount,l=void 0===s?0:s,u=a.rowCount,c=void 0===u?0:u,h=a.trailingColCount,d=void 0===h?0:h,f=a.trailingRowCount,p=void 0===f?0:f,v=this.getFinalViewport(),g=this.spreadsheet.isTableMode()&&(null===(r=null===(n=this.spreadsheet.dataSet)||void 0===n?void 0:n.isEmpty)||void 0===r?void 0:r.call(n))?this.spreadsheet.dataSet.getEmptyViewIndexes():Gx({scrollX:t,scrollY:e,widths:this.viewCellWidths,heights:this.viewCellHeights,viewport:v,rowRemainWidth:this.getRealScrollX(this.cornerBBox.width)});this.panelScrollGroupIndexes=g;var y=this.getRealFrozenColumns(l,d);return function(t,e,n,r){var i=e.colCount,o=void 0===i?0:i,a=e.rowCount,s=void 0===a?0:a,l=e.trailingColCount,u=void 0===l?0:l,c=e.trailingRowCount,h=void 0===c?0:c,d=O([],R(t),!1);Dx(d[0],o)&&(d[0]=o),Fx(d[1],u,n)&&(d[1]=n-u-1),Hx(d[2],r.start,s)&&(d[2]=r.start+s),zx(d[3],r.end,h)&&(d[3]=r.end-h);var f=O([],R(d),!1);f[2]=r.start,f[3]=r.start+s-1;var p=O([],R(d),!1);p[0]=0,p[1]=o-1;var v=O([],R(d),!1);v[2]=r.end+1-h,v[3]=r.end;var g=O([],R(d),!1);return g[0]=n-u,g[1]=n-1,{center:d,frozenRow:f,frozenCol:p,frozenTrailingCol:g,frozenTrailingRow:v}}(g,{colCount:y.colCount,trailingColCount:y.trailingColCount,rowCount:c,trailingRowCount:p},i,o)},e.prototype.updateFrozenGroupGrid=function(){var t=this;[nm.FROZEN_COL,nm.FROZEN_ROW,nm.FROZEN_TRAILING_COL,nm.FROZEN_TRAILING_ROW].forEach((function(e){if(t.frozenGroupInfo[e].range){var n=[],r=[];if(e.toLowerCase().includes("row")){var i=R(t.frozenGroupInfo[e].range||[],2),o=i[0],a=i[1];if(n=t.gridInfo.cols,r=UT(o,a,t.viewCellHeights),e===nm.FROZEN_TRAILING_ROW)r=function(t,e,n,r){var i=UT(t,e,r),o=r.getCellOffsetY(t);return i.map((function(t){return t-o+n}))}(o,a,t.frozenGroupInfo[nm.FROZEN_TRAILING_ROW].y,t.viewCellHeights)}else{var s=R(t.frozenGroupInfo[e].range||[],2),l=s[0],u=s[1],c=t.getTopLevelColNodes();n=VT(l,u,c),r=t.gridInfo.rows}t["".concat(e,"Group")].updateGrid({cols:n,rows:r},"".concat(e,"Group"))}}))},e.prototype.updatePanelScrollGroup=function(){t.prototype.updatePanelScrollGroup.call(this),this.updateFrozenGroupGrid()},e.prototype.translateRelatedGroups=function(e,n,r){t.prototype.translateRelatedGroups.call(this,e,n,r),this.translateFrozenGroups(),this.updateRowResizeArea(),this.renderFrozenGroupSplitLine(e,n)},e.prototype.updateRowResizeArea=function(){},e.prototype.render=function(){this.calculateFrozenGroupInfo(),this.renderFrozenPanelCornerGroup(),t.prototype.render.call(this)},e.prototype.getCenterFrameScrollX=function(e){return this.getFrozenOptions().colCount>0?0:t.prototype.getCenterFrameScrollX.call(this,e)},e.prototype.getDefaultCellHeight=function(){var t;return null!==(t=this.getRowCellHeight(null))&&void 0!==t?t:0},e.prototype.clip=function(){var t=this.frozenGroupInfo,e=this.spreadsheet.isFrozenRowHeader(),n=t[nm.FROZEN_COL].width,r=t[nm.FROZEN_TRAILING_COL].width,i=t[nm.FROZEN_ROW].height,o=t[nm.FROZEN_TRAILING_ROW].height,a=(e?this.panelBBox.x:0)+n,s=this.panelBBox.y+i,l=this.panelBBox.width-n-r+(e?0:this.panelBBox.x),u=this.panelBBox.height-i-o;this.panelScrollGroup.style.clipPath=new Ss({style:{x:a,y:s,width:l,height:u}}),this.frozenColGroup.style.clipPath=new Ss({style:{x:this.panelBBox.x,y:s,width:n,height:u}}),this.frozenTrailingColGroup.style.clipPath=new Ss({style:{x:this.panelBBox.x+this.panelBBox.width-r,y:s,width:r,height:u}}),this.frozenRowGroup.style.clipPath=new Ss({style:{x:a,y:this.panelBBox.y,width:l,height:i}}),this.frozenTrailingRowGroup.style.clipPath=new Ss({style:{x:a,y:this.panelBBox.y+this.panelBBox.height-o,width:l,height:o}})},e}(tL),rL=function t(e){var n,r=e.tree,i=void 0===r?[]:r,o=e.level,a=e.parentNode,s=e.hierarchy,l=e.spreadsheet,u=e.isRowHeader,c=null===(n=l.options.style)||void 0===n?void 0:n.rowCell,h=c.collapseFields,d=c.collapseAll,f=l.store.get("hiddenColumnsDetail")||[];i.forEach((function(e){var n,r,i=e.field,c=e.title,p=e.collapsed,v=e.children,g=T(e,["field","title","collapsed","children"]),y=f.some((function(t){return t.hideColumnNodes.find((function(t){return t.field===i}))}));if(!y){var m=((n={})[Kl]=i,n),C=hw(a.id,i),w=null!=p&&p,x=null!==(r=null==h?void 0:h[C])&&void 0!==r?r:null==h?void 0:h[i],b=null!=x?x:d||w,E=l.isHierarchyTreeType()&&u&&b,L=_g(v),_=new QC({id:C,field:i,value:c,level:o,parent:a,isTotals:!1,isCollapsed:E,hierarchy:s,query:m,spreadsheet:l,isLeaf:L,extra:S(S({},g),{isCustomNode:!0})});o>s.maxLevel&&!_.isSeriesNumberNode()&&(s.maxLevel=o,s.sampleNodesForAllLevels.push(_),s.sampleNodeForLastLevel=_,s.maxLevel=o);var M=iw(l,a,_,s);_g(v)||E||!M||t({spreadsheet:l,parentNode:_,level:o+1,hierarchy:s,tree:v||[],isRowHeader:u})}}))},iL=function t(e){var n,r,i,o,a,s,l,u,c,h,d=e.spreadsheet,f=e.parentNode,p=e.currentField,v=e.level,g=e.hierarchy,y=e.pivotMeta,m=f.query,C=f.id,w=(null===(s=null===(a=null===(o=d.dataCfg)||void 0===o?void 0:o.fields)||void 0===a?void 0:a.rows)||void 0===s?void 0:s.length)<=v,x=sw(Array.from(y.keys())),b=rw(d,x,f,p),E=d.store.get("drillItemsNum");w&&E>0&&(b=b.slice(0,E)),0===v&&function(t,e,n){var r=t.getTotalsConfig(e);(null==r?void 0:r.showGrandTotals)&&n[r.reverseGrandTotalsLayout?"unshift":"push"](new tw({label:r.grandTotalsLabel,isGrandTotals:!0,isSubTotals:!1,isTotalRoot:!1}))}(d,p,b);try{for(var T=M(b),L=T.next();!L.done;L=T.next()){var _=L.value,R=_ instanceof tw,O=R?null:y.get(_),N=void 0,I=m,A=!1,P=!1;if(R){var k=_;A=k.isGrandTotals,P=k.isSubTotals,N=Fy(_.label),I=m}else N=_,I=S(S({},m),((i={})[p]=N,i));var B=hw(C,N),D=null===(l=d.options.style)||void 0===l?void 0:l.rowCell,F=D.collapseFields,H=D.collapseAll,z=D.expandDepth,G=null!==(u=null==F?void 0:F[B])&&void 0!==u?u:null==F?void 0:F[p],W=Rg(z)?v>z:null,V=null!==(c=null!=G?G:W)&&void 0!==c?c:H,U=new QC({id:B,value:N,level:v,parent:f,field:p,isTotals:R,isGrandTotals:A,isSubTotals:P,isCollapsed:V,hierarchy:g,query:I,spreadsheet:d});v>g.maxLevel&&(g.maxLevel=v);var j=!(null===(h=null==O?void 0:O.children)||void 0===h?void 0:h.size);(j||R)&&(U.isLeaf=!0),j||(U.isTotals=!0);var Y=iw(d,f,U,g);j||V||R||!Y||t({level:v+1,currentField:O.childField,pivotMeta:O.children,parentNode:U,hierarchy:g,spreadsheet:d})}}catch(X){n={error:X}}finally{try{L&&!L.done&&(r=T.return)&&r.call(T)}finally{if(n)throw n.error}}},oL=function(t){var e=t.rootNode,n=t.hierarchy,r=t.fields,i=t.spreadsheet,o=t.isRowHeader,a=Vv(r,(function(t){return t!==Kl}));rL({spreadsheet:i,tree:a,level:0,parentNode:e,hierarchy:n,isRowHeader:o})},aL=function(t){var e,n,r=t.isValueInCols,i=t.moreThanOneValue,o=t.rootNode,a=t.hierarchy,s=t.fields,l=t.isRowHeader,u=t.isCustomTreeFields,c=t.spreadsheet;l?(e=!r&&i,n=!r&&!i):(e=r&&i,n=r&&!i),u?oL(t):cw({spreadsheet:c,addTotalMeasureInTotal:e,addMeasureInTotalQuery:n,parentNode:o,currentField:s[0],fields:s,hierarchy:a})},sL=function(t){t.spreadsheet.isHierarchyTreeType()?function(t){var e=t.spreadsheet,n=t.rootNode,r=t.hierarchy,i=t.isCustomTreeFields,o=e.dataSet.fields.rows;e.isHierarchyTreeType()&&!i?iL({level:0,currentField:null==o?void 0:o[0],pivotMeta:e.dataSet.rowPivotMeta,parentNode:n,hierarchy:r,spreadsheet:e}):oL(t)}(t):aL(t)},lL=function(t){var e,n=t.isCustomTreeFields,r=null!==(e=t.spreadsheet.options.seriesNumber)&&void 0!==e?e:{},i=r.enable,o=r.text;if(n){var a={field:tu,title:rm(o)},s=i?O([a],R(t.fields),!1):t.fields.filter((function(t){return(null==t?void 0:t.field)!==tu}));oL(S(S({},t),{fields:s}))}else!function(t){var e,n=t.spreadsheet,r=t.rootNode,i=t.fields,o=t.hierarchy,a=n.dataSet.fields.columns,s=void 0===a?[]:a,l=null!==(e=n.options.seriesNumber)&&void 0!==e?e:{},u=l.enable,c=l.text,h=rm(c),d=s.map((function(t){return t===tu?h:n.dataSet.getFieldName(t)}));u&&!i.includes(tu)&&(i.unshift(tu),d.unshift(h)),dw({spreadsheet:n,currentField:i[0],fields:i,fieldValues:d,hierarchy:o,parentNode:r,level:0,query:{},addMeasureInTotalQuery:!1,addTotalMeasureInTotal:!1})}(t)},uL=function(t){var e=t.isRowHeader,n=t.spreadsheet,r=n.dataSet.fields,i=r.rows,o=void 0===i?[]:i,a=r.columns,s=void 0===a?[]:a,l=n.isValueInCols(),u=n.dataSet.moreThanOneValue(),c=QC.rootNode(),h=new JC,d=e?o:s,f=n.isCustomHeaderFields(e?"rows":"columns"),p={isValueInCols:l,moreThanOneValue:u,rootNode:c,hierarchy:h,spreadsheet:n,fields:d,isRowHeader:e,isCustomTreeFields:f};e?sL(p):function(t){t.spreadsheet.isPivotMode()?aL(t):lL(t)}(p);return{hierarchy:h,leafNodes:e&&n.isHierarchyTreeType()?h.getNodes():h.getLeaves()}},cL=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.renderFrozenGroupSplitLine=function(t,n){var r;if(null===(r=e.foregroundGroup.getElementById(qy))||void 0===r||r.remove(),e.enableFrozenFirstRow()){var i=pS(n-e.getPaginationScrollY()),o=e.foregroundGroup.appendChild(new ys({id:qy,style:{zIndex:4}})),a=e.spreadsheet.theme.splitLine,s={lineWidth:1,stroke:null==a?void 0:a.horizontalBorderColor,opacity:null==a?void 0:a.horizontalBorderColorOpacity},l=e.getCellRange(),u=e.panelBBox.y+e.getTotalHeightForRange(l.start,l.start),c=e.cornerBBox.width+vS.getVerticalBorderWidth(e.spreadsheet)+e.panelBBox.viewportWidth;mw(o,S(S({},s),{x1:0,x2:c,y1:u,y2:u})),a.showShadow&&i>0&&o.appendChild(new Ss({style:{x:0,y:u,width:c,height:null==a?void 0:a.shadowWidth,fill:e.getShadowFill(90)}}))}},e}return E(e,t),Object.defineProperty(e.prototype,"rowCellTheme",{get:function(){return this.spreadsheet.theme.rowCell.cell},enumerable:!1,configurable:!0}),e.prototype.doLayout=function(){var t=this.buildAllHeaderHierarchy(),e=t.rowLeafNodes,n=t.colLeafNodes,r=t.rowsHierarchy,i=t.colsHierarchy;return this.calculateHeaderNodesCoordinate({rowLeafNodes:e,rowsHierarchy:r,colLeafNodes:n,colsHierarchy:i}),{colNodes:i.getNodes(),colsHierarchy:i,rowNodes:r.getNodes(),rowsHierarchy:r,rowLeafNodes:e,colLeafNodes:n}},e.prototype.buildAllHeaderHierarchy=function(){var t=uL({isRowHeader:!0,spreadsheet:this.spreadsheet}),e=t.leafNodes,n=t.hierarchy,r=uL({isRowHeader:!1,spreadsheet:this.spreadsheet});return{rowLeafNodes:e,colLeafNodes:r.leafNodes,rowsHierarchy:n,colsHierarchy:r.hierarchy}},e.prototype.getCellMeta=function(t,e){var n,r,i,o,a,s,l;void 0===t&&(t=0),void 0===e&&(e=0);var u=this.spreadsheet,c=u.options,h=u.dataSet,d=this.getLayoutResult(),f=d.rowLeafNodes,p=d.colLeafNodes,v=f[t],g=p[e];if(!v||!g)return null;var y=v.query,m=g.query,C=v.isTotals||v.isTotalMeasure||g.isTotals||g.isTotalMeasure,w=function(t,e){return{isRowGrandTotal:t.isGrandTotals,isRowSubTotal:t.isSubTotals,isColGrandTotal:e.isGrandTotals,isColSubTotal:e.isSubTotals}}(v,g),x=null!==(o=null===(i=null===(r=c.style)||void 0===r?void 0:r.colCell)||void 0===i?void 0:i.hideValue)&&void 0!==o&&o?((n={})[Kl]=null===(a=h.fields.values)||void 0===a?void 0:a[0],n):{},b=Gg({},y,m,x),E=h.getCellData({query:b,rowNode:v,isTotals:C,totalStatus:w}),S=b[Kl],T=Hh(E,ql,null),L={spreadsheet:this.spreadsheet,x:g.x,y:v.y,width:g.width,height:v.height,data:E,rowIndex:t,colIndex:e,isTotals:C,valueField:S,fieldValue:T,rowQuery:y,colQuery:m,rowId:v.id,colId:g.id,id:xx(v.id,g.id)};return null!==(l=null===(s=c.layoutCellMeta)||void 0===s?void 0:s.call(c,L))&&void 0!==l?l:L},e.prototype.getPreLevelSampleNode=function(t,e){return e.getNodes(t.level-1).find((function(t){return!t.isTotals}))},e.prototype.calculateHeaderNodesCoordinate=function(t){this.calculateRowNodesCoordinate(t),this.calculateColNodesCoordinate(t)},e.prototype.calculateColNodesCoordinate=function(t){var e,n=this,r=t.rowLeafNodes,i=t.colLeafNodes,o=t.rowsHierarchy,a=t.colsHierarchy;this.updateColsHierarchySampleMaxHeightNodes(a);var s=QC.blankNode(),l=0;a.getNodes().forEach((function(t){var e;if(t.isLeaf&&(t.colIndex=l,l+=1,t.x=s.x+s.width,t.width=n.calculateColLeafNodesWidth(t,i,r,o.width),a.width+=t.width,s=t),0===t.level)t.y=0;else{var u=n.getPreLevelSampleNode(t,a);t.y=null!==(e=(null==u?void 0:u.y)+(null==u?void 0:u.height))&&void 0!==e?e:0}var c=n.getColNodeHeight(t,a);t.height=t.isGrandTotals&&!t.isTotalMeasure&&t.isLeaf?a.height:c,ow(n.spreadsheet,null,t)})),this.updateCustomFieldsSampleNodes(a),this.adjustColLeafNodesHeight({leafNodes:i,hierarchy:a}),this.autoCalculateColNodeWidthAndX(i),_g(null===(e=this.spreadsheet.options.totals)||void 0===e?void 0:e.col)||(this.adjustTotalNodesCoordinate({hierarchy:a,isRowHeader:!1,isSubTotal:!0}),this.adjustTotalNodesCoordinate({hierarchy:a,isRowHeader:!1,isSubTotal:!1}))},e.prototype.getMultipleMap=function(t,e,n){for(var r=t.maxLevel,i=this.spreadsheet.dataSet,o=this.spreadsheet.options.totals,a=i.moreThanOneValue(),s=i.fields,l=s.rows,u=s.columns,c=e?l:u,h=e?o.row:o.col,d=n?(null==h?void 0:h.subTotalsGroupDimensions)||[]:(null==h?void 0:h.grandTotalsGroupDimensions)||[],f=i.isEmpty()?[]:d,p=Array.from({length:r+1},(function(){return 1})),v=r;v>0;v--){var g=c[v],y=g===Kl&&a;f.includes(g)||y||(p[v-1]+=p[v],p[v]=0)}return p},e.prototype.adjustTotalNodesCoordinate=function(t){var e=t.hierarchy,n=t.isRowHeader,r=t.isSubTotal,i=this.getMultipleMap(e,n,r),o=Vv(e.getNodes(),(function(t){return r?t.isSubTotals:t.isGrandTotals})),a=n?"width":"height";kv(o,(function(t){var n,o=i[t.level];if(!o&&r)for(var s=1;o<1;)o=i[t.level-s]-s,s++;for(var l=0,u=function(r){l+=Hh(null===(n=e.sampleNodesForAllLevels)||void 0===n?void 0:n.find((function(e){return e.level===t.level+r})),[a],0)},c=0;c<o;c++)u(c);t[a]=l}))},e.prototype.autoCalculateColNodeWidthAndX=function(t){for(var e,n,r=null,i=0,o=t.slice(0);i<o.length;){var a=o[i++],s=null==a?void 0:a.parent;if(r!==s&&s){o.push(s);var l=null===(e=s.children)||void 0===e?void 0:e.find((function(t){return t.width})),u=null!==(n=null==l?void 0:l.x)&&void 0!==n?n:0,c=Ty(s.children,"width");s.x=u,s.width=c,r=s}}},e.prototype.calculateColLeafNodesWidth=function(t,e,n,r){var i=this.spreadsheet.options.style.colCell,o=this.getColCellDraggedWidth(t);if(Rg(o))return o;var a=this.getCellCustomSize(t,null==i?void 0:i.width);return Rg(a)?a:this.spreadsheet.getLayoutWidthType()===Mm.Compact?this.getCompactGridColNodeWidth(t,n):this.spreadsheet.isHierarchyTreeType()?this.getAdaptTreeColWidth(t,e,n):this.getAdaptGridColWidth(e,r)},e.prototype.getRowNodeHeight=function(t){if(!t)return 0;var e=this.getRowCellHeight(t);if(this.isCustomRowCellHeight(t))return e||0;var n=new OS(t,this.spreadsheet,{shallowRender:!0});return this.getCellAdaptiveHeight(n,e)},e.prototype.getExpectedCellIconWidth=function(t,e,n){var r,i,o,a=0;if(e)a=1;else{var s=Jv(this.spreadsheet.options.headerActionIcons,(function(t){return S(S({},t),{displayCondition:function(){return!0}})})),l=Ew(s,null,t);a=null!==(r=null==l?void 0:l.icons.length)&&void 0!==r?r:0}return a?a*(n.size+(null===(i=n.margin)||void 0===i?void 0:i.left))+(null===(o=n.margin)||void 0===o?void 0:o.right):0},e.prototype.calculateRowNodesCoordinate=function(t){var e,n,r,i,o,a=this,s=t.rowsHierarchy,l=t.rowLeafNodes,u=t.colLeafNodes,c=this.spreadsheet.isHierarchyTreeType(),h=s.sampleNodesForAllLevels||[];c?s.width=this.getTreeRowHeaderWidth():h.forEach((function(t){var e;t.width=a.calculateGridRowNodesWidth(t,u),s.width+=t.width;var n=null!==(e=h[t.level-1])&&void 0!==e?e:{x:0,width:0};t.x=(null==n?void 0:n.x)+(null==n?void 0:n.width)}));for(var d=QC.blankNode(),f=s.getNodes(),p=0;p<f.length;p++){var v=f[p];if(c||!c&&v.isLeaf){var g=(null!==(e=null==d?void 0:d.rowIndex)&&void 0!==e?e:-1)+1,y=QC.getBranchNodes(v).map((function(t){return a.getRowNodeHeight(t)})),m=this.getRowNodeHeight(v),C=this.isCustomRowCellHeight(v)?m:null!==(n=Hg(y))&&void 0!==n?n:m;null!==(r=v.rowIndex)&&void 0!==r||(v.rowIndex=g),null!==(i=v.colIndex)&&void 0!==i||(v.colIndex=p),v.y=d.y+d.height,v.height=C,d=v,s.height+=v.height}if(c||0===v.level)v.x=0;else{var w=h[v.level-1];v.x=(null==w?void 0:w.x)+(null==w?void 0:w.width)}if(c)v.width=this.getTreeRowHeaderWidth();else{var x=h[v.level];v.width=null==x?void 0:x.width}ow(this.spreadsheet,v,null)}c||(this.adjustRowLeafNodesWidth({leafNodes:l,hierarchy:s}),this.autoCalculateRowNodeHeightAndY(l),_g(null===(o=this.spreadsheet.options.totals)||void 0===o?void 0:o.row)||(this.adjustTotalNodesCoordinate({hierarchy:s,isRowHeader:!0,isSubTotal:!1}),this.adjustTotalNodesCoordinate({hierarchy:s,isRowHeader:!0,isSubTotal:!0})))},e.prototype.autoCalculateRowNodeHeightAndY=function(t){for(var e=null,n=0,r=t.slice(0);n<r.length;){var i=r[n++],o=null==i?void 0:i.parent;e!==o&&o&&(r.push(o),o.y=o.children[0].y,o.height=Ty(o.children,"height"),e=o)}},e.prototype.calculateGridRowNodesWidth=function(t,e){var n=this.spreadsheet.options.style.rowCell,r=this.getRowCellDraggedWidth(t);if(Rg(r))return r;var i=this.getCellCustomSize(t,null==n?void 0:n.width);return Rg(i)?i:this.spreadsheet.getLayoutWidthType()!==Mm.Adaptive?this.getCompactGridRowNodeWidth(t):this.getAdaptGridColWidth(e)},e.prototype.getAdaptTreeColWidth=function(t,e,n){var r=this.getCanvasSize().width-this.getSeriesNumberWidth()-vS.getVerticalBorderWidth(this.spreadsheet),i=Math.min(r/2,this.getTreeRowHeaderWidth()),o=Math.max(1,e.length),a=this.spreadsheet.options.style.dataCell;return Math.max(Ww(a,this.getColLabelLength(t,n)),pS((r-i)/o))},e.prototype.getColLabelLength=function(t,e){var n=function(t){try{return JSON.parse(t)}catch(e){return null}}(null==t?void 0:t.value);if(wu(n))return n.length;for(var r=1,i=0;i<50;i++){var o=e[i];if(!o)return r;for(var a=this.spreadsheet.dataSet.getCellData({query:S(S({},t.query),o.query),rowNode:o,isTotals:t.isTotals||t.isTotalMeasure||o.isTotals||o.isTotalMeasure}),s=ch(a),l=0;l<s.length;l++){var u=Hh(a,s[l]),c=wy(Hh(null==u?void 0:u.values,"0"));c>r&&(r=c)}}return r},e.prototype.getAdaptGridColWidth=function(t,e){var n=this.spreadsheet.dataSet.fields.rows,r=void 0===n?[]:n,i=this.spreadsheet.options.style.dataCell,o=r.length,a=t.length,s=this.getCanvasSize().width-this.getSeriesNumberWidth()-vS.getVerticalBorderWidth(this.spreadsheet),l=Math.max(1,o+a);return e?Math.max(Ww(i),pS((s-e)/a)):Math.max(Ww(i),pS(s/l))},e.prototype.getTreeRowHeaderWidth=function(){var t,e,n,r,i=this,o=this.spreadsheet.options.style.rowCell,a=this.spreadsheet.dataSet.fields.rows,s=void 0===a?[]:a,l=this.getCellCustomSize(null,null==o?void 0:o.width);if(Rg(l))return l;var u=s.map((function(t){return i.spreadsheet.dataSet.getFieldName(t)})).join("/"),c=this.spreadsheet.theme.cornerCell,h=c.bolderText,d=c.icon,f=this.spreadsheet.measureTextWidth(u,h)+2*d.size+(null===(t=d.margin)||void 0===t?void 0:t.left)+(null===(e=d.margin)||void 0===e?void 0:e.right)+(null===(n=this.rowCellTheme.padding)||void 0===n?void 0:n.left)+(null===(r=this.rowCellTheme.padding)||void 0===r?void 0:r.right)+1,p=Math.max(null!=l?l:120,f);return Number.isNaN(p)?120:p},e.prototype.getCompactGridRowNodeWidth=function(t){var e,n=this,r=this.spreadsheet.theme.rowCell,i=r.bolderText,o=r.icon,a=r.cell,s=this.spreadsheet.theme.cornerCell,l=s.bolderText,u=s.icon,c=s.cell,h=t.field,d=t.isLeaf,f=this.getExpectedCellIconWidth(hm.ROW_CELL,!this.spreadsheet.isValueInCols()&&d&&this.spreadsheet.options.showDefaultHeaderActionIcon,o),p=null===(e=this.spreadsheet.dataSet.getDimensionValues(h))||void 0===e?void 0:e.slice(0,50).map((function(t){var e,r;return null!==(r=null===(e=n.spreadsheet.dataSet.getFieldFormatter(h))||void 0===e?void 0:e(t))&&void 0!==r?r:t})),v=zg(p,(function(t){return"".concat(t).length})),g=this.spreadsheet.measureTextWidth(v,i)+f+a.padding.left+a.padding.right+a.verticalBorderWidth,y=this.spreadsheet.dataSet.getFieldName(h),m=this.getExpectedCellIconWidth(hm.CORNER_CELL,!1,u),C=this.spreadsheet.measureTextWidth(y,l)+m+c.padding.left+c.padding.right;return IC.getInstance().logger("Max Label In Row:",h,g>C?v:y),Math.max(g,C)},e.prototype.getCompactGridColNodeWidth=function(t,e){for(var n,r,i,o=this.spreadsheet.theme.colCell,a=o.bolderText,s=o.cell,l=o.icon,u=this.spreadsheet.theme.dataCell.text,c=this.spreadsheet.dataSet.getFieldFormatter(t.field),h=null!==(n=null==c?void 0:c(t.value))&&void 0!==n?n:t.value,d=this.getExpectedCellIconWidth(hm.COL_CELL,this.spreadsheet.isValueInCols()&&this.spreadsheet.options.showDefaultHeaderActionIcon,l),f=this.spreadsheet.measureTextWidth(h,a)+d,p="",v=0,g=0;g<50;g++){var y=e[g];if(y){var m=this.spreadsheet.dataSet.getCellData({query:S(S({},t.query),y.query),rowNode:y,isTotals:t.isTotals||t.isTotalMeasure||y.isTotals||y.isTotalMeasure});if(m){var C=null==m?void 0:m[ql],w=null!==(i=null===(r=this.spreadsheet.dataSet.getFieldFormatter(m[Kl]))||void 0===r?void 0:r(C))&&void 0!==i?i:C,x="".concat(w),b=this.spreadsheet.measureTextWidth(x,u);b>v&&(p=x,v=b)}}}var E=f>v,T=E?h:p,L=E?d:0;return IC.getInstance().logger("Max Label In Col:",t.field,T,v),this.spreadsheet.measureTextWidth(T,S(S({},a),{fontSize:Math.max(u.fontSize,a.fontSize)}))+s.padding.left+s.padding.right+2*s.verticalBorderWidth+L},e.prototype.getViewCellHeights=function(){var t=yy(this.getRowLeafNodes(),(function(t,e){var n=Iv(t)||0;return t.push(n+e.height),t}),[0]);return{getTotalHeight:function(){return Iv(t)||0},getCellOffsetY:function(e){return t[e]||0},getTotalLength:function(){return t.length-1},getIndexRange:function(e,n){return HT(t,e,n)}}},e.prototype.getSeriesNumberCells=function(){var t;return Vv(null===(t=this.getSeriesNumberHeader())||void 0===t?void 0:t.children,(function(t){return t instanceof yS}))},e.prototype.updateFrozenGroupGrid=function(){var t=this;[nm.FROZEN_ROW].forEach((function(e){if(t.frozenGroupInfo[e].range){var n=[],r=[];if(e.toLowerCase().includes("row")){var i=R(t.frozenGroupInfo[e].range||[],2),o=i[0],a=i[1];n=t.gridInfo.cols,r=UT(o,a,t.viewCellHeights)}t["".concat(e,"Group")].updateGrid({cols:n,rows:r},"".concat(e,"Group"))}}))},e.prototype.getFrozenOptions=function(){return Xx(this.spreadsheet.options,this.layoutResult.rowNodes)},e.prototype.enableFrozenFirstRow=function(){return!!this.getFrozenOptions().rowCount},e}(nL),hL=function(t,e,n){var r,i,o=Hh(n,"cell.padding"),a=null!==(i=null===(r=null==n?void 0:n.cell)||void 0===r?void 0:r.horizontalBorderWidth)&&void 0!==i?i:1,s=function(t,e,n){var r,i,o,a,s=(null===(i=null===(r=n.icon)||void 0===r?void 0:r.margin)||void 0===i?void 0:i.left)||0,l=(null===(a=null===(o=n.icon)||void 0===o?void 0:o.margin)||void 0===a?void 0:a.right)||0,u=t.store.get("hiddenColumnsDetail",[]),c=!1,h=!1;u.forEach((function(t){var n,r,i,o;(null===(r=null===(n=null==t?void 0:t.displaySiblingNode)||void 0===n?void 0:n.prev)||void 0===r?void 0:r.field)===e&&(c=!0),(null===(o=null===(i=null==t?void 0:t.displaySiblingNode)||void 0===i?void 0:i.next)||void 0===o?void 0:o.field)===e&&(h=!0)}));var d=Hh(n,"icon.size");return{left:h?d+l:0,right:c?d+s:0}}(t,e.field,n),l=function(t,e,n,r){var i,o,a=null==r?void 0:r.size,s=null==r?void 0:r.margin,l=0;return(l=t.options.showDefaultHeaderActionIcon?1:null!==(o=null===(i=Ew(t.options.headerActionIcons,e,n))||void 0===i?void 0:i.icons.length)&&void 0!==o?o:0)*(a+s.left)+(l>0?s.right:0)}(t,e,hm.COL_CELL,null==n?void 0:n.icon);return o.left+o.right+l+s.left+s.right+a},dL=function(t){function e(e){var n=t.call(this,e)||this;return n.getScrollGroupClipBBox=function(){var t=n.getHeaderConfig(),e=t.width,r=t.height,i=t.spreadsheet,o=t.position,a=i.facet.frozenGroupInfo,s=a[nm.FROZEN_COL].width,l=e-s-a[nm.FROZEN_TRAILING_COL].width;return{x:o.x+s,y:o.y,width:l,height:r}},n.initFrozenColGroups(),n}return E(e,t),e.prototype.getCellInstance=function(t){var e=this.getHeaderConfig(),n=e.spreadsheet,r=n.options,i=r.seriesNumberCell,o=r.colCell,a=[t,n,e];return t.field===tu?(null==i?void 0:i.apply(void 0,O([],R(a),!1)))||new(_S.bind.apply(_S,O([void 0],R(a),!1))):(null==o?void 0:o.apply(void 0,O([],R(a),!1)))||new(LS.bind.apply(LS,O([void 0],R(a),!1)))},e.prototype.initFrozenColGroups=function(){var t=this.getHeaderConfig(),e=t.spreadsheet.options.frozen,n=e.colCount,r=e.trailingColCount,i=t.spreadsheet.facet.getColNodes(0),o=Ux(i,n,r),a=o.colCount,s=o.trailingColCount;this.finalColCount=a,this.finalTrailingColCount=s,this.topLevelColNodeLength=i.length,a&&(this.frozenColGroup=this.appendChild(new ys({name:"colFrozenGroup",style:{zIndex:4}}))),s&&(this.frozenTrailingColGroup=this.appendChild(new ys({name:"colFrozenTrailingGroup",style:{zIndex:4}})))},e.prototype.clear=function(){var e,n,r;t.prototype.clear.call(this),null===(e=this.frozenTrailingColGroup)||void 0===e||e.removeChildren(),null===(n=this.frozenColGroup)||void 0===n||n.removeChildren();var i=null===(r=this.getHeaderConfig().spreadsheet.facet)||void 0===r?void 0:r.foregroundGroup.getElementById(Qy);null==i||i.removeChildren()},e.prototype.getColFrozenOptionsByNode=function(t){var e=Yx(t);return{colLength:this.topLevelColNodeLength,leftLeafNodeColIndex:e.colIndex,colCount:this.finalColCount,trailingColCount:this.finalTrailingColCount}},e.prototype.getCellGroup=function(t){var e=this.getColFrozenOptionsByNode(t),n=e.colLength,r=e.leftLeafNodeColIndex,i=e.colCount,o=e.trailingColCount;return Dx(r,i)?this.frozenColGroup:Fx(r,o,n)?this.frozenTrailingColGroup:this.scrollGroup},e.prototype.isColCellInRect=function(e){var n=this.getColFrozenOptionsByNode(e),r=n.leftLeafNodeColIndex,i=n.colLength,o=n.colCount,a=n.trailingColCount;return!(!Dx(r,o)&&!Fx(r,a,i))||t.prototype.isColCellInRect.call(this,e)},e.prototype.offset=function(){t.prototype.offset.call(this);var e=this.getHeaderConfig().position;Vx(this.frozenColGroup,e.x),Vx(this.frozenTrailingColGroup,e.x)},e.prototype.clip=function(){this.scrollGroup.style.clipPath=new Ss({style:this.getScrollGroupClipBBox()})},e}(Kx),fL=function(t){function e(e){var n=t.call(this,e)||this;return n.onSortHandler=function(t){var e=n.spreadsheet,r=t;Array.isArray(t)||(r=[t]);var i=e.dataCfg.sortParams||[];r=r.map((function(t){var e,n,r=S(S({},t),{sortFieldId:null!==(e=t.sortKey)&&void 0!==e?e:t.sortFieldId}),o=null!==(n=i.find((function(t){return t.sortFieldId===r.sortFieldId})))&&void 0!==n?n:{};return S(S({},o),r)}));var o=i.filter((function(t){return!r.find((function(e){return e.sortFieldId===t.sortFieldId}))}));Cy(e.dataCfg,"sortParams",O(O([],R(o),!1),R(r),!1)),e.setDataCfg(e.dataCfg),e.render(!0),e.emit(Xl.RANGE_SORTED,e.dataSet.getDisplayDataSet())},n.onFilterHandler=function(t){return L(n,void 0,void 0,(function(){var e,n,r,i;return _(this,(function(o){switch(o.label){case 0:return e=this.spreadsheet,n=!t.filteredValues||0===t.filteredValues.length,r=e.dataCfg.filterParams||[],-1!==(i=r.findIndex((function(e){return e.filterKey===t.filterKey})))?n?r.splice(i,1):r[i]=t:r.push(t),Cy(e.dataCfg,"filterParams",r),[4,e.render(!0)];case 1:return o.sent(),e.emit(Xl.RANGE_FILTERED,e.dataSet.getDisplayDataSet()),[2]}}))}))},n.spreadsheet.on(Xl.RANGE_SORT,n.onSortHandler),n.spreadsheet.on(Xl.RANGE_FILTER,n.onFilterHandler),n}return E(e,t),e.prototype.init=function(){t.prototype.init.call(this),this.initRowOffsets()},e.prototype.getDataCellAdaptiveHeight=function(t){var e={id:String(null==t?void 0:t.rowIndex)},n=this.getRowCellHeight(e);if(this.isCustomRowCellHeight(e))return n||0;var r=new MS(t,this.spreadsheet,{shallowRender:!0}),i=this.getCellHeightByRowIndex(null==t?void 0:t.rowIndex);return this.getCellAdaptiveHeight(r,i)},e.prototype.getCellHeightByRowIndex=function(t){var e;return this.rowOffsets?null!==(e=this.getRowCellHeight({id:String(t)}))&&void 0!==e?e:0:this.getDefaultCellHeight()},e.prototype.presetRowCellHeightIfNeeded=function(t){var e,n,r=this,i=this.spreadsheet.options.style,o=this.getColLeafNodes();if(!(_g(o)||(null===(n=null==i?void 0:i.dataCell)||void 0===n?void 0:n.maxLines)<=1)){var a=Hg(o.map((function(e){var n=r.getCellMeta(t,e.colIndex);return r.getDataCellAdaptiveHeight(n)})));this.spreadsheet.setOptions({style:{rowCell:{heightByField:(e={},e[t]=a||this.getDefaultCellHeight(),e)}}})}},e.prototype.initRowOffsets=function(){var t,e,n=this,r=this.spreadsheet.options.style;if(ch(null===(t=null==r?void 0:r.rowCell)||void 0===t?void 0:t.heightByField).length||(null===(e=null==r?void 0:r.dataCell)||void 0===e?void 0:e.maxLines)>1){var i=this.spreadsheet.dataSet.getDisplayDataSet();this.rowOffsets=[0];var o=0;i.forEach((function(t,e){n.presetRowCellHeightIfNeeded(e);var r=n.getCellHeightByRowIndex(e),i=o+r;n.rowOffsets.push(i),o=i}))}},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.spreadsheet.off(Xl.RANGE_SORT,this.onSortHandler),this.spreadsheet.off(Xl.RANGE_FILTER,this.onFilterHandler)},e.prototype.calculateCornerBBox=function(){var t=pS(this.getLayoutResult().colsHierarchy.height);this.cornerBBox=new KT(this),this.cornerBBox.height=t,this.cornerBBox.maxY=t},e.prototype.doLayout=function(){var t=new JC,e=this.buildColHeaderHierarchy(),n=e.colLeafNodes,r=e.colsHierarchy;return this.calculateColNodesCoordinate(n,r),{colNodes:r.getNodes(),colLeafNodes:n,colsHierarchy:r,rowNodes:[],rowsHierarchy:t,rowLeafNodes:[],cornerNodes:[]}},e.prototype.buildColHeaderHierarchy=function(){var t=uL({isRowHeader:!1,spreadsheet:this.spreadsheet});return{colLeafNodes:t.leafNodes,colsHierarchy:t.hierarchy}},e.prototype.getCellMeta=function(t,e){var n,r,i,o;void 0===t&&(t=0),void 0===e&&(e=0);var a=this.spreadsheet,s=a.options,l=a.dataSet,u=this.getColLeafNodes(),c=u[e];if(!c)return null;var h,d=this.getCellHeightByRowIndex(t),f=this.getCellRange(),p=pw(this.spreadsheet.options.frozen,u.length,f.end-f.start+1).trailingRowCount,v=void 0===p?0:p,g=c.x,y=this.viewCellHeights.getCellOffsetY(t);zx(t,f.end,v)&&(y=this.panelBBox.height-this.getTotalHeightForRange(t,f.end)),h=(null===(r=s.seriesNumber)||void 0===r?void 0:r.enable)&&c.field===tu?t+1:l.getCellData({query:{field:c.field,rowIndex:t}});var m={spreadsheet:this.spreadsheet,x:g,y:y,width:c.width,height:d,data:(n={},n[c.field]=h,n),rowIndex:t,colIndex:e,isTotals:!1,colId:c.id,rowId:String(t),valueField:c.field,fieldValue:h,id:xx(String(t),c.id)};return null!==(o=null===(i=s.layoutCellMeta)||void 0===i?void 0:i.call(s,m))&&void 0!==o?o:m},e.prototype.getAdaptiveColWidth=function(t){var e,n=this.spreadsheet.options.style.dataCell,r=this.spreadsheet.options.seriesNumber;if(this.spreadsheet.getLayoutWidthType()!==Mm.Compact){var i=this.getSeriesNumberWidth(),o=t.length-((null==r?void 0:r.enable)?1:0),a=this.getCanvasSize().width-i-vS.getVerticalBorderWidth(this.spreadsheet);return Math.max(null==n?void 0:n.width,pS(a/Math.max(1,o)))}return null!==(e=null==n?void 0:n.width)&&void 0!==e?e:0},e.prototype.getContentHeight=function(){var t=this.getViewCellHeights().getTotalHeight,e=this.layoutResult.colsHierarchy;return t()+e.height},e.prototype.calculateColNodesCoordinate=function(t,e){var n,r,i;this.updateColsHierarchySampleMaxHeightNodes(e);for(var o=QC.blankNode(),a=0,s=e.getNodes(),l=this.getAdaptiveColWidth(t),u=0;u<s.length;u++){(g=s[u]).isLeaf&&(g.colIndex=a,a+=1,g.x=o.x+o.width,g.width=this.calculateColLeafNodesWidth(g,l),ow(this.spreadsheet,null,g),e.width+=g.width,o=g),0===g.level?g.y=0:g.y=null!==(i=(null===(n=null==g?void 0:g.parent)||void 0===n?void 0:n.y)+(null===(r=null==g?void 0:g.parent)||void 0===r?void 0:r.height))&&void 0!==i?i:0,g.height=this.getColNodeHeight(g,e)}var c=e.getNodes(0),h=pw(this.spreadsheet.options.frozen,c.length).trailingColCount,d=void 0===h?0:h;o=QC.blankNode();var f=this.getCanvasSize().width-vS.getVerticalBorderWidth(this.spreadsheet);if(d>0){var p=Ux(c,0,d).trailingColCount,v=s.filter((function(t){return t.isLeaf}));for(u=1;u<=p;u++){var g;(g=v[v.length-u]).x=1===u?f-g.width:o.x-g.width,o=g}}this.updateCustomFieldsSampleNodes(e),this.adjustColLeafNodesHeight({leafNodes:t,hierarchy:e}),this.autoCalculateColNodeWidthAndX(t)},e.prototype.autoCalculateColNodeWidthAndX=function(t){for(var e=null,n=t.slice(0);n.length;){var r=n.shift(),i=null==r?void 0:r.parent;e!==i&&i&&(n.push(i),i.x=i.children[0].x,i.width=i.children.map((function(t){return t.width})).reduce((function(t,e){return t+e}),0),e=i)}},e.prototype.calculateColLeafNodesWidth=function(t,e){var n=this.spreadsheet,r=n.dataSet,i=n.options.style.colCell,o=n.getLayoutWidthType(),a=this.getColCellDraggedWidth(t);if(Rg(a))return a;var s,l=this.getCellCustomSize(t,null==i?void 0:i.width);if(Rg(l))return l;if(o===Mm.Compact){var u=r.getDisplayDataSet(),c=r.getFieldFormatter(t.field),h=zg(null==u?void 0:u.slice(0,50).map((function(e){var n;return"".concat(null!==(n=null==c?void 0:c(e[t.field]))&&void 0!==n?n:e[t.field])})),(function(t){return n.measureTextWidthRoughly(t)}));IC.getInstance().logger("Max Label In Col:",t.field,h);var d=n.theme.colCell.bolderText,f=n.theme.dataCell,p=f.text,v=f.cell,g=n.measureTextWidth(h,p)+v.padding.left+v.padding.right+1,y=n.measureTextWidth(t.value,d)+hL(this.spreadsheet,t,n.theme.colCell);s=Math.max(y,g)}else s=e;return t.field===tu&&(s=this.getSeriesNumberWidth()),s},e.prototype.getViewCellHeights=function(){var t=this,e=this.getDefaultCellHeight();return{getTotalHeight:function(){return t.rowOffsets?Iv(t.rowOffsets)||0:e*t.spreadsheet.dataSet.getDisplayDataSet().length},getCellOffsetY:function(n){return n<=0?0:t.rowOffsets?t.rowOffsets[n]:n*e},getTotalLength:function(){return t.spreadsheet.dataSet.getDisplayDataSet().length},getIndexRange:function(n,r){if(t.rowOffsets)return HT(t.rowOffsets,n,r);var i=pS(n/e,0),o=r%e==0?r/e-1:pS(r/e,0);return{start:Math.max(0,i),end:Math.max(0,o)}}}},e.prototype.updateRowResizeArea=function(){var t=this.spreadsheet.options.interaction.resize;if(Eg(t)?t:null==t?void 0:t.rowCellVertical){var e=this.foregroundGroup.getElementById(Yy),n=this.foregroundGroup.getElementById(Xy);e&&e.removeChildren(),n&&n.removeChildren(),WT(this.panelGroup.children,MS).forEach((function(t){t.drawResizeArea()}))}},e.prototype.getRowHeader=function(){return null},e.prototype.getColHeader=function(){if(!this.columnHeader){var t=this.panelBBox,e=t.x,n=t.width,r=t.viewportHeight,i=t.viewportWidth;return new dL({width:n,height:this.cornerBBox.height,viewportWidth:i,viewportHeight:r,cornerWidth:this.cornerBBox.width,position:{x:e,y:0},nodes:this.getColNodes(),sortParam:this.spreadsheet.store.get("sortParam"),spreadsheet:this.spreadsheet})}return this.columnHeader},e.prototype.getSeriesNumberHeader=function(){return null},e.prototype.getSeriesNumberCells=function(){return this.getDataCells().filter((function(t){return t.getMeta().valueField===tu}))},e}(nL);function pL(t,e){var n=e.r;t.arc(n,n,n,0,2*Math.PI,!1)}function vL(t,e){var n=e.rx,r=e.ry;if(t.ellipse)t.ellipse(n,r,n,r,0,0,2*Math.PI,!1);else{var i=n>r?n:r,o=n>r?1:n/r,a=n>r?r/n:1;t.save(),t.scale(o,a),t.arc(i,i,i,0,2*Math.PI)}}function gL(t,e){var n,r,i=e.x1,o=e.y1,a=e.x2,s=e.y2,l=e.defX,u=void 0===l?0:l,c=e.defY,h=void 0===c?0:c,d=e.markerStart,f=e.markerEnd,p=e.markerStartOffset,v=e.markerEndOffset,g=0,y=0,m=0,C=0,w=0;d&&as(d)&&p&&(n=a-i,r=s-o,w=Math.atan2(r,n),g=Math.cos(w)*(p||0),y=Math.sin(w)*(p||0)),f&&as(f)&&v&&(n=i-a,r=o-s,w=Math.atan2(r,n),m=Math.cos(w)*(v||0),C=Math.sin(w)*(v||0)),t.moveTo(i-u+g,o-h+y),t.lineTo(a-u+m,s-h+C)}function yL(t,e){var n,r,i=e.defX,o=void 0===i?0:i,a=e.defY,s=void 0===a?0:a,l=e.markerStart,u=e.markerEnd,c=e.markerStartOffset,h=e.markerEndOffset,d=e.path,f=d.absolutePath,p=d.segments,v=0,g=0,y=0,m=0,C=0;if(l&&as(l)&&c){var w=R(l.parentNode.getStartTangent(),2),x=w[0],b=w[1];n=x[0]-b[0],r=x[1]-b[1],C=Math.atan2(r,n),v=Math.cos(C)*(c||0),g=Math.sin(C)*(c||0)}if(u&&as(u)&&h){var E=R(u.parentNode.getEndTangent(),2);x=E[0],b=E[1];n=x[0]-b[0],r=x[1]-b[1],C=Math.atan2(r,n),y=Math.cos(C)*(h||0),m=Math.sin(C)*(h||0)}for(var S=0;S<f.length;S++){var T=f[S],L=T[0],_=f[S+1],M=0===S&&(0!==v||0!==g),O=(S===f.length-1||_&&("M"===_[0]||"Z"===_[0]))&&0!==y&&0!==m;switch(L){case"M":M?(t.moveTo(T[1]-o+v,T[2]-s+g),t.lineTo(T[1]-o,T[2]-s)):t.moveTo(T[1]-o,T[2]-s);break;case"L":O?t.lineTo(T[1]-o+y,T[2]-s+m):t.lineTo(T[1]-o,T[2]-s);break;case"Q":t.quadraticCurveTo(T[1]-o,T[2]-s,T[3]-o,T[4]-s),O&&t.lineTo(T[3]-o+y,T[4]-s+m);break;case"C":t.bezierCurveTo(T[1]-o,T[2]-s,T[3]-o,T[4]-s,T[5]-o,T[6]-s),O&&t.lineTo(T[5]-o+y,T[6]-s+m);break;case"A":var N=p[S].arcParams,I=N.cx,A=N.cy,P=N.rx,k=N.ry,B=N.startAngle,D=N.endAngle,F=N.xRotation,H=N.sweepFlag;if(t.ellipse)t.ellipse(I-o,A-s,P,k,F,B,D,!!(1-H));else{var z=P>k?P:k,G=P>k?1:P/k,W=P>k?k/P:1;t.translate(I-o,A-s),t.rotate(F),t.scale(G,W),t.arc(0,0,z,B,D,!!(1-H)),t.scale(1/G,1/W),t.rotate(-F),t.translate(-(I-o),-(A-s))}O&&t.lineTo(T[6]-o+y,T[7]-s+m);break;case"Z":t.closePath()}}}function mL(t,e){var n,r,i=e.defX,o=void 0===i?0:i,a=e.defY,s=void 0===a?0:a,l=e.markerStart,u=e.markerEnd,c=e.markerStartOffset,h=e.markerEndOffset,d=e.points.points,f=d.length,p=d[0][0]-o,v=d[0][1]-s,g=d[f-1][0]-o,y=d[f-1][1]-s,m=0,C=0,w=0,x=0,b=0;l&&as(l)&&c&&(n=d[1][0]-d[0][0],r=d[1][1]-d[0][1],b=Math.atan2(r,n),m=Math.cos(b)*(c||0),C=Math.sin(b)*(c||0)),u&&as(u)&&h&&(n=d[f-1][0]-d[0][0],r=d[f-1][1]-d[0][1],b=Math.atan2(r,n),w=Math.cos(b)*(h||0),x=Math.sin(b)*(h||0)),t.moveTo(p+(m||w),v+(C||x));for(var E=1;E<f-1;E++){var S=d[E];t.lineTo(S[0]-o,S[1]-s)}t.lineTo(g,y)}function CL(t,e){var n,r,i=e.defX,o=void 0===i?0:i,a=e.defY,s=void 0===a?0:a,l=e.markerStart,u=e.markerEnd,c=e.markerStartOffset,h=e.markerEndOffset,d=e.points.points,f=d.length,p=d[0][0]-o,v=d[0][1]-s,g=d[f-1][0]-o,y=d[f-1][1]-s,m=0,C=0,w=0,x=0,b=0;l&&as(l)&&c&&(n=d[1][0]-d[0][0],r=d[1][1]-d[0][1],b=Math.atan2(r,n),m=Math.cos(b)*(c||0),C=Math.sin(b)*(c||0)),u&&as(u)&&h&&(n=d[f-2][0]-d[f-1][0],r=d[f-2][1]-d[f-1][1],b=Math.atan2(r,n),w=Math.cos(b)*(h||0),x=Math.sin(b)*(h||0)),t.moveTo(p+m,v+C);for(var E=1;E<f-1;E++){var S=d[E];t.lineTo(S[0]-o,S[1]-s)}t.lineTo(g+w,y+x)}function wL(t,e){var n=e.radius,r=e.width,i=e.height,o=r,a=i;if(n&&n.some((function(t){return 0!==t}))){var s=r>0?1:-1,l=i>0?1:-1,u=s+l===0,c=R(n.map((function(t){return Zt(t,0,Math.min(Math.abs(o)/2,Math.abs(a)/2))})),4),h=c[0],d=c[1],f=c[2],p=c[3];t.moveTo(s*h,0),t.lineTo(o-s*d,0),0!==d&&t.arc(o-s*d,l*d,d,-l*Math.PI/2,s>0?0:Math.PI,u),t.lineTo(o,a-l*f),0!==f&&t.arc(o-s*f,a-l*f,f,s>0?0:Math.PI,l>0?Math.PI/2:1.5*Math.PI,u),t.lineTo(s*p,a),0!==p&&t.arc(s*p,a-l*p,p,l>0?Math.PI/2:-Math.PI/2,s>0?Math.PI:0,u),t.lineTo(0,l*h),0!==h&&t.arc(s*h,l*h,h,s>0?Math.PI:0,l>0?1.5*Math.PI:Math.PI/2,u)}else t.rect(0,0,o,a)}var xL=function(t){function e(){var e=t.apply(this,O([],R(arguments),!1))||this;return e.name="canvas-path-generator",e}return E(e,t),e.prototype.init=function(){var t,e=((t={})[Bn.CIRCLE]=pL,t[Bn.ELLIPSE]=vL,t[Bn.RECT]=wL,t[Bn.LINE]=gL,t[Bn.POLYLINE]=CL,t[Bn.POLYGON]=mL,t[Bn.PATH]=yL,t[Bn.TEXT]=void 0,t[Bn.GROUP]=void 0,t[Bn.IMAGE]=void 0,t[Bn.HTML]=void 0,t[Bn.MESH]=void 0,t);this.context.pathGeneratorFactory=e},e.prototype.destroy=function(){delete this.context.pathGeneratorFactory},e}(Hn),bL=pt(),EL=pt(),SL=pt(),TL=D(),LL=function(){function t(){var t=this;this.isHit=function(e,n,r,i){var o=t.context.pointInPathPickerFactory[e.nodeName];if(o){var a=V(TL,r),s=_t(EL,Ct(SL,n[0],n[1],0),a),l=e.getGeometryBounds().halfExtents,u=e.parsedStyle.anchor;if(s[0]+=(u&&u[0]||0)*l[0]*2,s[1]+=(u&&u[1]||0)*l[1]*2,o(e,new hr(s[0],s[1]),i,t.isPointInPath,t.context,t.runtime))return!0}return!1},this.isPointInPath=function(e,n){var r=t.runtime.offscreenCanvasCreator.getOrCreateContext(t.context.config.offscreenCanvas),i=t.context.pathGeneratorFactory[e.nodeName];return i&&(r.beginPath(),i(r,e.parsedStyle),r.closePath()),r.isPointInPath(n.x,n.y)}}return t.prototype.apply=function(e,n){var r,i=this,o=e.renderingService,a=e.renderingContext;this.context=e,this.runtime=n;var s=null===(r=a.root)||void 0===r?void 0:r.ownerDocument;o.hooks.pick.tapPromise(t.tag,(function(t){return L(i,void 0,void 0,(function(){return _(this,(function(e){return[2,this.pick(s,t)]}))}))})),o.hooks.pickSync.tap(t.tag,(function(t){return i.pick(s,t)}))},t.prototype.pick=function(t,e){var n,r,i=e.topmost,o=e.position,a=o.x,s=o.y,l=Ct(bL,a,s,0),u=t.elementsFromBBox(l[0],l[1],l[0],l[1]),c=[];try{for(var h=M(u),d=h.next();!d.done;d=h.next()){var f=d.value,p=f.getWorldTransform();if(this.isHit(f,l,p,!1)){var v=$o(f);if(v){var g=v.parsedStyle.clipPath;if(this.isHit(g,l,g.getWorldTransform(),!0)){if(i)return e.picked=[f],e;c.push(f)}}else{if(i)return e.picked=[f],e;c.push(f)}}}}catch(y){n={error:y}}finally{try{d&&!d.done&&(r=h.return)&&r.call(h)}finally{if(n)throw n.error}}return e.picked=c,e},t.tag="CanvasPicker",t}();function _L(t,e,n){var r=t.parsedStyle,i=r.r,o=r.fill,a=r.stroke,s=r.lineWidth,l=r.increasedLineWidthForHitTesting,u=r.pointerEvents,c=((s||0)+(l||0))/2,h=gn(i,i,e.x,e.y),d=R(ea(u,o,a),2),f=d[0],p=d[1];return f&&p||n?h<=i+c:f?h<=i:!!p&&(h>=i-c&&h<=i+c)}function ML(t,e,n,r){return t/(n*n)+e/(r*r)}function RL(t,e,n){var r=t.parsedStyle,i=r.rx,o=r.ry,a=r.fill,s=r.stroke,l=r.lineWidth,u=r.increasedLineWidthForHitTesting,c=r.pointerEvents,h=e.x,d=e.y,f=R(ea(c,a,s),2),p=f[0],v=f[1],g=((l||0)+(u||0))/2,y=(h-i)*(h-i),m=(d-o)*(d-o);return p&&v||n?ML(y,m,i+g,o+g)<=1:p?ML(y,m,i,o)<=1:!!v&&(ML(y,m,i-g,o-g)>=1&&ML(y,m,i+g,o+g)<=1)}function OL(t,e,n,r,i,o){return i>=t&&i<=t+n&&o>=e&&o<=e+r}function NL(t,e,n,r,i,o,a,s){var l=(Math.atan2(s-e,a-t)+2*Math.PI)%(2*Math.PI),u={x:t+n*Math.cos(l),y:e+n*Math.sin(l)};return gn(u.x,u.y,a,s)<=o/2}function IL(t,e,n,r,i,o,a){var s=Math.min(t,n),l=Math.max(t,n),u=Math.min(e,r),c=Math.max(e,r),h=i/2;return o>=s-h&&o<=l+h&&a>=u-h&&a<=c+h&&Tn(t,e,n,r,o,a)<=i/2}function AL(t,e,n,r,i){var o=t.length;if(o<2)return!1;for(var a=0;a<o-1;a++){if(IL(t[a][0],t[a][1],t[a+1][0],t[a+1][1],e,n,r))return!0}if(i){var s=t[0],l=t[o-1];if(IL(s[0],s[1],l[0],l[1],e,n,r))return!0}return!1}var PL=1e-6;function kL(t){return Math.abs(t)<PL?0:t<0?-1:1}function BL(t,e,n){return(n[0]-t[0])*(e[1]-t[1])==(e[0]-t[0])*(n[1]-t[1])&&Math.min(t[0],e[0])<=n[0]&&n[0]<=Math.max(t[0],e[0])&&Math.min(t[1],e[1])<=n[1]&&n[1]<=Math.max(t[1],e[1])}function DL(t,e,n){var r=!1,i=t.length;if(i<=2)return!1;for(var o=0;o<i;o++){var a=t[o],s=t[(o+1)%i];if(BL(a,s,[e,n]))return!0;kL(a[1]-n)>0!=kL(s[1]-n)>0&&kL(e-(n-a[1])*(a[0]-s[0])/(a[1]-s[1])-a[0])<0&&(r=!r)}return r}function FL(t,e,n){for(var r=!1,i=0;i<t.length;i++){if(r=DL(t[i],e,n))break}return r}function HL(t,e,n){var r=t.parsedStyle,i=r.x1,o=r.y1,a=r.x2,s=r.y2,l=r.lineWidth,u=r.increasedLineWidthForHitTesting,c=r.defX,h=void 0===c?0:c,d=r.defY,f=void 0===d?0:d;return!(!R(ea(r.pointerEvents,r.fill,r.stroke),2)[1]&&!n||!l)&&IL(i,o,a,s,(l||0)+(u||0),e.x+h,e.y+f)}function zL(t,e,n,r,i,o){var a=t.parsedStyle,s=a.lineWidth,l=a.increasedLineWidthForHitTesting,u=a.stroke,c=a.fill,h=a.defX,d=void 0===h?0:h,f=a.defY,p=void 0===f?0:f,v=a.path,g=a.pointerEvents,y=v.segments,m=v.hasArc,C=v.polylines,w=v.polygons,x=R(ea(g,(null==w?void 0:w.length)&&c,u),2),b=x[0],E=x[1],S=Hi(t),T=!1;return b||n?T=m?r(t,e):FL(w,e.x+d,e.y+p)||FL(C,e.x+d,e.y+p):((E||n)&&(T=function(t,e,n,r,i){for(var o=!1,a=e/2,s=0;s<t.length;s++){var l=t[s],u=l.currentPoint,c=l.params,h=l.prePoint,d=l.box;if(!d||OL(d.x-a,d.y-a,d.width+e,d.height+e,n,r))switch(l.command){case"L":case"Z":if(o=IL(h[0],h[1],u[0],u[1],e,n,r))return!0;break;case"Q":if(o=Pn(h[0],h[1],c[1],c[2],c[3],c[4],n,r)<=e/2)return!0;break;case"C":if(o=Rn(h[0],h[1],c[1],c[2],c[3],c[4],c[5],c[6],n,r,i)<=e/2)return!0;break;case"A":l.cubicParams||(l.cubicParams=xe(h[0],h[1],c[1],c[2],c[3],c[4],c[5],c[6],c[7],void 0));for(var f=l.cubicParams,p=h,v=0;v<f.length;v+=6){var g=Rn(p[0],p[1],f[v],f[v+1],f[v+2],f[v+3],f[v+4],f[v+5],n,r,i);if(p=[f[v+4],f[v+5]],o=g<=e/2)return!0}}}return o}(y,(s||0)+(l||0),e.x+d,e.y+p,S)),T)}function GL(t,e,n){var r=t.parsedStyle,i=r.stroke,o=r.fill,a=r.lineWidth,s=r.increasedLineWidthForHitTesting,l=r.points,u=r.defX,c=void 0===u?0:u,h=r.defY,d=void 0===h?0:h,f=R(ea(r.pointerEvents,o,i),2),p=f[0],v=!1;return(f[1]||n)&&(v=AL(l.points,(a||0)+(s||0),e.x+c,e.y+d,!0)),v||!p&&!n||(v=DL(l.points,e.x+c,e.y+d)),v}function WL(t,e,n){var r=t.parsedStyle,i=r.lineWidth,o=r.increasedLineWidthForHitTesting,a=r.points,s=r.defX,l=void 0===s?0:s,u=r.defY,c=void 0===u?0:u;return!(!R(ea(r.pointerEvents,r.fill,r.stroke),2)[1]&&!n||!i)&&AL(a.points,(i||0)+(o||0),e.x+l,e.y+c,!1)}function VL(t,e,n,r,i){var o=t.parsedStyle,a=o.radius,s=o.fill,l=o.stroke,u=o.lineWidth,c=o.increasedLineWidthForHitTesting,h=o.width,d=o.height,f=R(ea(o.pointerEvents,s,l),2),p=f[0],v=f[1],g=(u||0)+(c||0);if(a&&a.some((function(t){return 0!==t}))){var y=!1;return(v||n)&&(y=function(t,e,n,r,i,o,a,s){var l=R(i,4),u=l[0],c=l[1],h=l[2],d=l[3];return IL(t+u,e,t+n-c,e,o,a,s)||IL(t+n,e+c,t+n,e+r-h,o,a,s)||IL(t+n-h,e+r,t+d,e+r,o,a,s)||IL(t,e+r-d,t,e+u,o,a,s)||NL(t+n-c,e+c,c,Math.PI,Math.PI,o,a,s)||NL(t+n-h,e+r-h,h,0,Math.PI,o,a,s)||NL(t+d,e+r-d,d,Math.PI,Math.PI,o,a,s)||NL(t+u,e+u,u,Math.PI,Math.PI,o,a,s)}(0,0,h,d,a.map((function(t){return Zt(t,0,Math.min(Math.abs(h)/2,Math.abs(d)/2))})),g,e.x,e.y)),y||!p&&!n||(y=r(t,e)),y}var m=g/2;return p&&v||n?OL(0-m,0-m,h+m,d+m,e.x,e.y):p?OL(0,0,h,d,e.x,e.y):!!v&&function(t,e,n,r,i,o,a){var s=i/2;return OL(t-s,e-s,n,i,o,a)||OL(t+n-s,e-s,i,r,o,a)||OL(t+s,e+r-s,n,i,o,a)||OL(t-s,e+s,i,r,o,a)}(0,0,h,d,g,e.x,e.y)}function UL(t,e,n,r,i,o){var a=t.parsedStyle,s=a.pointerEvents,l=a.width,u=a.height;if("non-transparent-pixel"===s){var c=i.config.offscreenCanvas,h=o.offscreenCanvasCreator.getOrCreateCanvas(c),d=o.offscreenCanvasCreator.getOrCreateContext(c,{willReadFrequently:!0});return h.width=l,h.height=u,i.defaultStyleRendererFactory[Bn.IMAGE].render(d,t.parsedStyle,t,void 0,void 0,void 0),d.getImageData(e.x,e.y,1,1).data.every((function(t){return 0!==t}))}return!0}var jL=function(t){function e(){var e=t.apply(this,O([],R(arguments),!1))||this;return e.name="canvas-picker",e}return E(e,t),e.prototype.init=function(){var t,e=((t={})[Bn.CIRCLE]=_L,t[Bn.ELLIPSE]=RL,t[Bn.RECT]=VL,t[Bn.LINE]=HL,t[Bn.POLYLINE]=WL,t[Bn.POLYGON]=GL,t[Bn.PATH]=zL,t[Bn.TEXT]=function(){return!0},t[Bn.GROUP]=null,t[Bn.IMAGE]=UL,t[Bn.HTML]=null,t[Bn.MESH]=null,t);this.context.pointInPathPickerFactory=e,this.addRenderingPlugin(new LL)},e.prototype.destroy=function(){delete this.context.pointInPathPickerFactory,this.removeAllRenderingPlugins()},e}(Hn),YL=function(){function t(t){this.canvasRendererPluginOptions=t,this.removedRBushNodeAABBs=[],this.renderQueue=[],this.restoreStack=[],this.clearFullScreen=!1,this.vpMatrix=D(),this.dprMatrix=D(),this.tmpMat4=D(),this.vec3a=pt(),this.vec3b=pt(),this.vec3c=pt(),this.vec3d=pt()}return t.prototype.apply=function(e,n){var r=this;this.context=e;var i=e.config,o=e.camera,a=e.renderingService,s=e.renderingContext,l=e.rBushRoot,u=e.pathGeneratorFactory;this.rBush=l,this.pathGeneratorFactory=u;var c=e.contextService,h=s.root.ownerDocument.defaultView,d=function(t){var e=t.target.rBushNode;e.aabb&&r.removedRBushNodeAABBs.push(e.aabb)},f=function(t){var e=t.target.rBushNode;e.aabb&&r.removedRBushNodeAABBs.push(e.aabb)};a.hooks.init.tap(t.tag,(function(){h.addEventListener(Ha.UNMOUNTED,d),h.addEventListener(Ha.CULLED,f);var t=c.getDPR(),e=i.width,n=i.height,o=c.getContext();r.clearRect(o,0,0,e*t,n*t,i.background)})),a.hooks.destroy.tap(t.tag,(function(){h.removeEventListener(Ha.UNMOUNTED,d),h.removeEventListener(Ha.CULLED,f),r.renderQueue=[],r.removedRBushNodeAABBs=[],r.restoreStack=[]})),a.hooks.beginFrame.tap(t.tag,(function(){var t=c.getContext(),e=c.getDPR(),n=i.width,o=i.height,s=r.canvasRendererPluginOptions,l=s.dirtyObjectNumThreshold,u=s.dirtyObjectRatioThreshold,h=a.getStats(),d=h.total,f=h.rendered,p=f/d;r.clearFullScreen=a.disableDirtyRectangleRendering()||f>l&&p>u,t&&(t.resetTransform?t.resetTransform():t.setTransform(1,0,0,1,0,0),r.clearFullScreen&&r.clearRect(t,0,0,n*e,o*e,i.background))}));var p=function t(e,i){e.isVisible()&&!e.isCulled()&&(r.renderDisplayObject(e,i,r.context,r.restoreStack,n),r.saveDirtyAABB(e)),(e.sortable.sorted||e.childNodes).forEach((function(e){t(e,i)}))};a.hooks.endFrame.tap(t.tag,(function(){var t=c.getContext(),e=c.getDPR();if($(r.dprMatrix,[e,e,1]),j(r.vpMatrix,r.dprMatrix,o.getOrthoMatrix()),r.clearFullScreen)p(s.root,t);else{var a=r.safeMergeAABB.apply(r,O([r.mergeDirtyAABBs(r.renderQueue)],R(r.removedRBushNodeAABBs.map((function(t){var e=t.minX,n=t.minY,r=t.maxX,i=t.maxY,o=new or;return o.setMinMax([e,n,0],[r,i,0]),o}))),!1));if(r.removedRBushNodeAABBs=[],or.isEmpty(a))return void(r.renderQueue=[]);var l=r.convertAABB2Rect(a),u=l.x,d=l.y,f=l.width,v=l.height,g=_t(r.vec3a,[u,d,0],r.vpMatrix),y=_t(r.vec3b,[u+f,d,0],r.vpMatrix),m=_t(r.vec3c,[u,d+v,0],r.vpMatrix),C=_t(r.vec3d,[u+f,d+v,0],r.vpMatrix),w=Math.min(g[0],y[0],C[0],m[0]),x=Math.min(g[1],y[1],C[1],m[1]),b=Math.max(g[0],y[0],C[0],m[0]),E=Math.max(g[1],y[1],C[1],m[1]),S=Math.floor(w),T=Math.floor(x),L=Math.ceil(b-w),_=Math.ceil(E-x);t.save(),r.clearRect(t,S,T,L,_,i.background),t.beginPath(),t.rect(S,T,L,_),t.clip(),t.setTransform(r.vpMatrix[0],r.vpMatrix[1],r.vpMatrix[4],r.vpMatrix[5],r.vpMatrix[12],r.vpMatrix[13]),i.renderer.getConfig().enableDirtyRectangleRenderingDebug&&h.dispatchEvent(new Pa(vs.DIRTY_RECTANGLE,{dirtyRect:{x:S,y:T,width:L,height:_}})),r.searchDirtyObjects(a).sort((function(t,e){return t.sortable.renderOrder-e.sortable.renderOrder})).forEach((function(e){e&&e.isVisible()&&!e.isCulled()&&r.renderDisplayObject(e,t,r.context,r.restoreStack,n)})),t.restore(),r.renderQueue.forEach((function(t){r.saveDirtyAABB(t)})),r.renderQueue=[]}r.restoreStack.forEach((function(){t.restore()})),r.restoreStack=[]})),a.hooks.render.tap(t.tag,(function(t){r.clearFullScreen||r.renderQueue.push(t)}))},t.prototype.clearRect=function(t,e,n,r,i,o){t.clearRect(e,n,r,i),o&&(t.fillStyle=o,t.fillRect(e,n,r,i))},t.prototype.renderDisplayObject=function(t,e,n,r,i){var o=t.nodeName,a=r[r.length-1];!a||t.compareDocumentPosition(a)&Ba.DOCUMENT_POSITION_CONTAINS||(e.restore(),r.pop());var s=this.context.styleRendererFactory[o],l=this.pathGeneratorFactory[o],u=t.parsedStyle.clipPath;if(u){this.applyWorldTransform(e,u);var c=this.pathGeneratorFactory[u.nodeName];c&&(e.save(),r.push(t),e.beginPath(),c(e,u.parsedStyle),e.closePath(),e.clip())}s&&(this.applyWorldTransform(e,t),e.save(),this.applyAttributesToContext(e,t)),l&&(e.beginPath(),l(e,t.parsedStyle),t.nodeName!==Bn.LINE&&t.nodeName!==Bn.PATH&&t.nodeName!==Bn.POLYLINE&&e.closePath()),s&&(s.render(e,t.parsedStyle,t,n,this,i),e.restore()),t.renderable.dirty=!1},t.prototype.convertAABB2Rect=function(t){var e=t.getMin(),n=t.getMax(),r=Math.floor(e[0]),i=Math.floor(e[1]);return{x:r,y:i,width:Math.ceil(n[0])-r,height:Math.ceil(n[1])-i}},t.prototype.mergeDirtyAABBs=function(t){var e=new or;return t.forEach((function(t){var n=t.getRenderBounds();e.add(n);var r=t.renderable.dirtyRenderBounds;r&&e.add(r)})),e},t.prototype.searchDirtyObjects=function(t){var e=R(t.getMin(),2),n=e[0],r=e[1],i=R(t.getMax(),2),o=i[0],a=i[1];return this.rBush.search({minX:n,minY:r,maxX:o,maxY:a}).map((function(t){return t.displayObject}))},t.prototype.saveDirtyAABB=function(t){var e=t.renderable;e.dirtyRenderBounds||(e.dirtyRenderBounds=new or);var n=t.getRenderBounds();n&&e.dirtyRenderBounds.update(n.center,n.halfExtents)},t.prototype.applyAttributesToContext=function(t,e){var n=e.parsedStyle,r=n.stroke,i=n.fill,o=n.opacity,a=n.lineDash,s=n.lineDashOffset;a&&t.setLineDash(a),Wt(s)||(t.lineDashOffset=s),Wt(o)||(t.globalAlpha*=o),Wt(r)||Array.isArray(r)||r.isNone||(t.strokeStyle=e.attributes.stroke),Wt(i)||Array.isArray(i)||i.isNone||(t.fillStyle=e.attributes.fill)},t.prototype.applyWorldTransform=function(t,e,n){var r=0,i=0,o=(e.parsedStyle||{}).anchor,a=o&&o[0]||0,s=o&&o[1]||0;if(0!==a||0!==s){var l=e.geometry.contentBounds;r=-a*(l&&2*l.halfExtents[0]||0),i=-s*(l&&2*l.halfExtents[1]||0)}n?(H(this.tmpMat4,e.getLocalTransform()),this.vec3a[0]=r,this.vec3a[1]=i,this.vec3a[2]=0,Y(this.tmpMat4,this.tmpMat4,this.vec3a),j(this.tmpMat4,n,this.tmpMat4),j(this.tmpMat4,this.vpMatrix,this.tmpMat4)):(H(this.tmpMat4,e.getWorldTransform()),this.vec3a[0]=r,this.vec3a[1]=i,this.vec3a[2]=0,Y(this.tmpMat4,this.tmpMat4,this.vec3a),j(this.tmpMat4,this.vpMatrix,this.tmpMat4)),t.setTransform(this.tmpMat4[0],this.tmpMat4[1],this.tmpMat4[4],this.tmpMat4[5],this.tmpMat4[12],this.tmpMat4[13])},t.prototype.safeMergeAABB=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=new or;return t.forEach((function(t){n.add(t)})),n},t.tag="CanvasRenderer",t}(),XL=function(){function t(t){this.imagePool=t}return t.prototype.render=function(t,e,n,r,i,o){var a=e.fill,s=e.fillRule,l=e.opacity,u=e.fillOpacity,c=e.stroke,h=e.strokeOpacity,d=e.lineWidth,f=e.lineCap,p=e.lineJoin,v=e.shadowType,g=e.shadowColor,y=e.shadowBlur,m=e.filter,C=e.miterLimit,w=!Wt(a)&&!a.isNone,x=!Wt(c)&&!c.isNone&&d>0,b=0===a.alpha,E=!(!m||!m.length),S=!Wt(g)&&y>0,T=n.nodeName,L="inner"===v,_=x&&S&&(T===Bn.PATH||T===Bn.LINE||T===Bn.POLYLINE||b||L);w&&(t.globalAlpha=l*u,_||qL(n,t,S),this.fill(t,n,a,s,r,i,o),_||this.clearShadowAndFilter(t,E,S)),x&&(t.globalAlpha=l*h,t.lineWidth=d,Wt(C)||(t.miterLimit=C),Wt(f)||(t.lineCap=f),Wt(p)||(t.lineJoin=p),_&&(L&&(t.globalCompositeOperation="source-atop"),qL(n,t,!0),L&&(this.stroke(t,n,c,r,i,o),t.globalCompositeOperation="source-over",this.clearShadowAndFilter(t,E,!0))),this.stroke(t,n,c,r,i,o))},t.prototype.clearShadowAndFilter=function(t,e,n){if(n&&(t.shadowColor="transparent",t.shadowBlur=0),e){var r=t.filter;!Wt(r)&&r.indexOf("drop-shadow")>-1&&(t.filter=r.replace(/drop-shadow\([^)]*\)/,"").trim()||"none")}},t.prototype.fill=function(t,e,n,r,i,o,a){var s=this;Array.isArray(n)?n.forEach((function(n){t.fillStyle=s.getColor(n,e,t),r?t.fill(r):t.fill()})):(vi(n)&&(t.fillStyle=this.getPattern(n,e,t,i,o,a)),r?t.fill(r):t.fill())},t.prototype.stroke=function(t,e,n,r,i,o){var a=this;Array.isArray(n)?n.forEach((function(n){t.strokeStyle=a.getColor(n,e,t),t.stroke()})):(vi(n)&&(t.strokeStyle=this.getPattern(n,e,t,r,i,o)),t.stroke())},t.prototype.getPattern=function(t,e,n,r,i,o){var a,s;if("rect"===t.image.nodeName){var l=t.image.parsedStyle,u=l.width,c=l.height;s=r.contextService.getDPR();var h=r.config.offscreenCanvas;(a=o.offscreenCanvasCreator.getOrCreateCanvas(h)).width=u*s,a.height=c*s;var d=o.offscreenCanvasCreator.getOrCreateContext(h),f=[];t.image.forEach((function(t){i.renderDisplayObject(t,d,r,f,o)})),f.forEach((function(){d.restore()}))}return this.imagePool.getOrCreatePatternSync(t,n,a,s,(function(){e.renderable.dirty=!0,r.renderingService.dirtify()}))},t.prototype.getColor=function(t,e,n){var r;if(t.type===Lr.LinearGradient||t.type===Lr.RadialGradient){var i=e.getGeometryBounds(),o=i&&2*i.halfExtents[0]||1,a=i&&2*i.halfExtents[1]||1;r=this.imagePool.getOrCreateGradient(S(S({type:t.type},t.value),{width:o,height:a}),n)}return r},t}();function qL(t,e,n){var r=t.parsedStyle,i=r.filter,o=r.shadowColor,a=r.shadowBlur,s=r.shadowOffsetX,l=r.shadowOffsetY;i&&i.length&&(e.filter=t.style.filter),n&&(e.shadowColor=o.toString(),e.shadowBlur=a||0,e.shadowOffsetX=s||0,e.shadowOffsetY=l||0)}var KL=function(){function t(t){this.imagePool=t}return t.prototype.render=function(t,e,n){var r,i=e.width,o=e.height,a=e.img,s=e.shadowColor,l=e.shadowBlur,u=i,c=o;if(Kt(a)?r=this.imagePool.getImageSync(a):(u||(u=a.width),c||(c=a.height),r=a),r){qL(n,t,!Wt(s)&&l>0);try{t.drawImage(r,0,0,u,c)}catch(h){}}},t}(),ZL=function(){function t(){}return t.prototype.render=function(t,e,n,r,i,o){var a=e,s=a.lineWidth,l=a.textAlign,u=a.textBaseline,c=a.lineJoin,h=a.miterLimit,d=a.letterSpacing,f=a.stroke,p=a.fill,v=a.fillOpacity,g=a.strokeOpacity,y=a.opacity,m=a.metrics,C=a.dx,w=a.dy,x=a.shadowColor,b=a.shadowBlur,E=m.font,S=m.lines,T=m.height,L=m.lineHeight,_=m.lineMetrics;t.font=E,t.lineWidth=s,t.textAlign="middle"===l?"center":l;var M=u;o.enableCSSParsing||"alphabetic"!==M||(M="bottom"),t.lineJoin=c,Wt(h)||(t.miterLimit=h);var R=0;"middle"===u?R=-T/2-L/2:"bottom"===u||"alphabetic"===u||"ideographic"===u?R=-T:"top"!==u&&"hanging"!==u||(R=-L);var O=C||0;R+=w||0,1===S.length&&("bottom"===M?(M="middle",R-=.5*T):"top"===M&&(M="middle",R+=.5*T)),t.textBaseline=M,qL(n,t,!Wt(x)&&b>0);for(var N=0;N<S.length;N++){var I=s/2+O;R+=L,Wt(f)||f.isNone||!s||this.drawLetterSpacing(t,S[N],_[N],l,I,R,d,v,g,y,!0),Wt(p)||this.drawLetterSpacing(t,S[N],_[N],l,I,R,d,v,g,y)}},t.prototype.drawLetterSpacing=function(t,e,n,r,i,o,a,s,l,u,c){if(void 0===c&&(c=!1),0!==a){var h=t.textAlign;t.textAlign="left";var d=i;"center"===r||"middle"===r?d=i-n.width/2:"right"!==r&&"end"!==r||(d=i-n.width);for(var f=Array.from(e),p=t.measureText(e).width,v=0,g=0;g<f.length;++g){var y=f[g];c?this.strokeText(t,y,d,o,l):this.fillText(t,y,d,o,s,u),d+=p-(v=t.measureText(e.substring(g+1)).width)+a,p=v}t.textAlign=h}else c?this.strokeText(t,e,i,o,l):this.fillText(t,e,i,o,s,u)},t.prototype.fillText=function(t,e,n,r,i,o){var a,s=!Wt(i)&&1!==i;s&&(a=t.globalAlpha,t.globalAlpha=i*o),t.fillText(e,n,r),s&&(t.globalAlpha=a)},t.prototype.strokeText=function(t,e,n,r,i){var o,a=!Wt(i)&&1!==i;a&&(o=t.globalAlpha,t.globalAlpha=i),t.strokeText(e,n,r),a&&(t.globalAlpha=o)},t}();!function(t){function e(){return null!==t&&t.apply(this,arguments)||this}E(e,t)}(XL),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}E(e,t)}(XL),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}E(e,t)}(XL),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}E(e,t)}(XL),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}E(e,t)}(XL),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}E(e,t)}(XL),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}E(e,t)}(XL);var $L=function(t){function e(e){void 0===e&&(e={});var n=t.call(this)||this;return n.options=e,n.name="canvas-renderer",n}return E(e,t),e.prototype.init=function(){var t,e=S({dirtyObjectNumThreshold:500,dirtyObjectRatioThreshold:.8},this.options),n=this.context.imagePool,r=new XL(n),i=((t={})[Bn.CIRCLE]=r,t[Bn.ELLIPSE]=r,t[Bn.RECT]=r,t[Bn.IMAGE]=new KL(n),t[Bn.TEXT]=new ZL,t[Bn.LINE]=r,t[Bn.POLYLINE]=r,t[Bn.POLYGON]=r,t[Bn.PATH]=r,t[Bn.GROUP]=void 0,t[Bn.HTML]=void 0,t[Bn.MESH]=void 0,t);this.context.defaultStyleRendererFactory=i,this.context.styleRendererFactory=i,this.addRenderingPlugin(new YL(e))},e.prototype.destroy=function(){this.removeAllRenderingPlugins(),delete this.context.defaultStyleRendererFactory,delete this.context.styleRendererFactory},e}(Hn),QL=function(){function t(){}return t.prototype.apply=function(e,n){var r=this,i=e.renderingService,o=e.renderingContext,a=e.config;this.context=e;var s=o.root.ownerDocument.defaultView,l=function(t){i.hooks.pointerMove.call(t)},u=function(t){i.hooks.pointerUp.call(t)},c=function(t){i.hooks.pointerDown.call(t)},h=function(t){i.hooks.pointerOver.call(t)},d=function(t){i.hooks.pointerOut.call(t)},f=function(t){i.hooks.pointerCancel.call(t)},p=function(t){i.hooks.pointerWheel.call(t)},v=function(t){i.hooks.click.call(t)};i.hooks.init.tap(t.tag,(function(){var t=r.context.contextService.getDomElement();n.globalThis.navigator.msPointerEnabled?(t.style.msContentZooming="none",t.style.msTouchAction="none"):s.supportsPointerEvents&&(t.style.touchAction="none"),s.supportsPointerEvents?function(t){n.globalThis.document.addEventListener("pointermove",l,!0),t.addEventListener("pointerdown",c,!0),t.addEventListener("pointerleave",d,!0),t.addEventListener("pointerover",h,!0),n.globalThis.addEventListener("pointerup",u,!0),n.globalThis.addEventListener("pointercancel",f,!0)}(t):function(t){n.globalThis.document.addEventListener("mousemove",l,!0),t.addEventListener("mousedown",c,!0),t.addEventListener("mouseout",d,!0),t.addEventListener("mouseover",h,!0),n.globalThis.addEventListener("mouseup",u,!0)}(t),s.supportsTouchEvents&&function(t){t.addEventListener("touchstart",c,!0),t.addEventListener("touchend",u,!0),t.addEventListener("touchmove",l,!0),t.addEventListener("touchcancel",f,!0)}(t),a.useNativeClickEvent&&t.addEventListener("click",v,!0),t.addEventListener("wheel",p,{passive:!0,capture:!0})})),i.hooks.destroy.tap(t.tag,(function(){var t=r.context.contextService.getDomElement();n.globalThis.navigator.msPointerEnabled?(t.style.msContentZooming="",t.style.msTouchAction=""):s.supportsPointerEvents&&(t.style.touchAction=""),s.supportsPointerEvents?function(t){n.globalThis.document.removeEventListener("pointermove",l,!0),t.removeEventListener("pointerdown",c,!0),t.removeEventListener("pointerleave",d,!0),t.removeEventListener("pointerover",h,!0),n.globalThis.removeEventListener("pointerup",u,!0)}(t):function(t){n.globalThis.document.removeEventListener("mousemove",l,!0),t.removeEventListener("mousedown",c,!0),t.removeEventListener("mouseout",d,!0),t.removeEventListener("mouseover",h,!0),n.globalThis.removeEventListener("mouseup",u,!0)}(t),s.supportsTouchEvents&&function(t){t.removeEventListener("touchstart",c,!0),t.removeEventListener("touchend",u,!0),t.removeEventListener("touchmove",l,!0),t.removeEventListener("touchcancel",f,!0)}(t),a.useNativeClickEvent&&t.removeEventListener("click",v,!0),t.removeEventListener("wheel",p,!0)}))},t.tag="DOMInteraction",t}(),JL=function(t){function e(){var e=t.apply(this,O([],R(arguments),!1))||this;return e.name="dom-interaction",e}return E(e,t),e.prototype.init=function(){this.addRenderingPlugin(new QL)},e.prototype.destroy=function(){this.removeAllRenderingPlugins()},e}(Hn),t_=function(){function t(){this.displayObjectHTMLElementMap=new WeakMap}return t.prototype.joinTransformMatrix=function(t){return"matrix(".concat([t[0],t[1],t[4],t[5],t[12],t[13]].join(","),")")},t.prototype.apply=function(e,n){var r=this,i=e.camera,o=e.renderingContext,a=e.renderingService;this.context=e;var s=o.root.ownerDocument.defaultView,l=s.context.eventService.nativeHTMLMap,u=function(t,e){e.style.transform=r.joinTransformMatrix(t.getWorldTransform())},c=function(t){var e=t.target;if(e.nodeName===Bn.HTML){r.$camera||(r.$camera=r.createCamera(i));var o=r.getOrCreateEl(e);if(r.$camera.appendChild(o),n.enableCSSParsing){var a=e.ownerDocument.documentElement.attributes;Object.keys(a).forEach((function(t){o.style[t]=a[t]}))}Object.keys(e.attributes).forEach((function(t){r.updateAttribute(t,e)})),u(e,o),l.set(o,e)}},h=function(t){var e=t.target;if(e.nodeName===Bn.HTML&&r.$camera){var n=r.getOrCreateEl(e);n&&(n.remove(),l.delete(n))}},d=function(t){var e=t.target;if(e.nodeName===Bn.HTML){var n=t.attrName;r.updateAttribute(n,e)}},f=function(t){var e=t.target;if(e.nodeName===Bn.HTML){var n=r.getOrCreateEl(e);u(e,n)}},p=function(){if(r.$camera){var t=r.context.config,e=t.width,n=t.height;r.$camera.style.width="".concat(e||0,"px"),r.$camera.style.height="".concat(n||0,"px")}};a.hooks.init.tap(t.tag,(function(){s.addEventListener(vs.RESIZE,p),s.addEventListener(Ha.MOUNTED,c),s.addEventListener(Ha.UNMOUNTED,h),s.addEventListener(Ha.ATTR_MODIFIED,d),s.addEventListener(Ha.BOUNDS_CHANGED,f)})),a.hooks.endFrame.tap(t.tag,(function(){r.$camera&&o.renderReasons.has(Ra.CAMERA_CHANGED)&&(r.$camera.style.transform=r.joinTransformMatrix(i.getOrthoMatrix()))})),a.hooks.destroy.tap(t.tag,(function(){r.$camera&&r.$camera.remove(),s.removeEventListener(vs.RESIZE,p),s.removeEventListener(Ha.MOUNTED,c),s.removeEventListener(Ha.UNMOUNTED,h),s.removeEventListener(Ha.ATTR_MODIFIED,d),s.removeEventListener(Ha.BOUNDS_CHANGED,f)}))},t.prototype.createCamera=function(t){var e=this.context.config,n=e.document,r=e.width,i=e.height,o=this.context.contextService.getDomElement(),a=o.parentNode;if(a){var s="g-canvas-camera",l=a.querySelector("#"+s);if(!l){var u=(n||document).createElement("div");l=u,u.id=s,u.style.position="absolute",u.style.left="".concat(o.offsetLeft||0,"px"),u.style.top="".concat(o.offsetTop||0,"px"),u.style.transformOrigin="left top",u.style.transform=this.joinTransformMatrix(t.getOrthoMatrix()),u.style.overflow="hidden",u.style.pointerEvents="none",u.style.width="".concat(r||0,"px"),u.style.height="".concat(i||0,"px"),a.appendChild(u)}return l}return null},t.prototype.getOrCreateEl=function(t){var e=this.context.config.document,n=this.displayObjectHTMLElementMap.get(t);return n||(n=(e||document).createElement("div"),t.parsedStyle.$el=n,this.displayObjectHTMLElementMap.set(t,n),t.id&&(n.id=t.id),t.name&&n.setAttribute("name",t.name),t.className&&(n.className=t.className),n.style.position="absolute",n.style.left="0px",n.style.top="0px",n.style["will-change"]="transform",n.style.transform=this.joinTransformMatrix(t.getWorldTransform())),n},t.prototype.updateAttribute=function(t,e){var n=this.getOrCreateEl(e);switch(t){case"innerHTML":var r=e.parsedStyle.innerHTML;Kt(r)?n.innerHTML=r:(n.innerHTML="",n.appendChild(r));break;case"transformOrigin":var i=e.parsedStyle.transformOrigin;n.style["transform-origin"]="".concat(i[0].value," ").concat(i[1].value);break;case"width":if(this.context.enableCSSParsing){var o=e.computedStyleMap().get("width");n.style.width=o.toString()}else{o=e.parsedStyle.width;n.style.width=$t(o)?"".concat(o,"px"):o.toString()}break;case"height":if(this.context.enableCSSParsing){var a=e.computedStyleMap().get("height");n.style.height=a.toString()}else{a=e.parsedStyle.height;n.style.height=$t(a)?"".concat(a,"px"):a.toString()}break;case"zIndex":var s=e.parsedStyle.zIndex;n.style["z-index"]="".concat(s);break;case"visibility":var l=e.parsedStyle.visibility;n.style.visibility=l;break;case"pointerEvents":var u=e.parsedStyle.pointerEvents;n.style.pointerEvents=u;break;case"opacity":var c=e.parsedStyle.opacity;n.style.opacity="".concat(c);break;case"fill":var h=e.parsedStyle.fill,d="";gi(h)?d=h.isNone?"transparent":e.getAttribute("fill"):Array.isArray(h)?d=e.getAttribute("fill"):vi(h),n.style.background=d;break;case"stroke":var f=e.parsedStyle.stroke,p="";gi(f)?p=f.isNone?"transparent":e.getAttribute("stroke"):Array.isArray(f)?p=e.getAttribute("stroke"):vi(f),n.style["border-color"]=p,n.style["border-style"]="solid";break;case"lineWidth":var v=e.parsedStyle.lineWidth;n.style["border-width"]="".concat(v||0,"px");break;case"lineDash":n.style["border-style"]="dashed";break;case"filter":var g=e.style.filter;n.style.filter=g;break;default:"x"!==t&&"y"!==t&&(Wt(e.style[t])||""===e.style[t]||(n.style[t]=e.style[t]))}},t.tag="HTMLRendering",t}(),e_=function(t){function e(){var e=t.apply(this,O([],R(arguments),!1))||this;return e.name="html-renderer",e}return E(e,t),e.prototype.init=function(){this.addRenderingPlugin(new t_)},e.prototype.destroy=function(){this.removeAllRenderingPlugins()},e}(Hn),n_=function(){function t(t){this.canvasConfig=t,this.imageCache={},this.gradientCache={},this.patternCache={}}return t.prototype.getImageSync=function(t,e){return this.imageCache[t]?e&&e(this.imageCache[t]):this.getOrCreateImage(t).then((function(t){e&&e(t)})),this.imageCache[t]},t.prototype.getOrCreateImage=function(t){var e=this;if(this.imageCache[t])return Promise.resolve(this.imageCache[t]);var n=this.canvasConfig.createImage;return new Promise((function(r,i){var o;n?o=n(t):qo&&(o=new window.Image),o&&(o.onload=function(){e.imageCache[t]=o,r(o)},o.onerror=function(t){i(t)},o.crossOrigin="Anonymous",o.src=t)}))},t.prototype.getOrCreatePatternSync=function(t,e,n,r,i){var o=this.generatePatternKey(t);if(o&&this.patternCache[o])return this.patternCache[o];var a,s=t.image,l=t.repetition,u=t.transform,c=!1;Kt(s)?a=this.getImageSync(s,i):n?(a=n,c=!0):a=s;var h=a&&e.createPattern(a,l);if(h){var d=void 0;d=u?ko(ao(u),new fs({})):G(D()),c&&X(d,d,[1/r,1/r,1]),h.setTransform({a:d[0],b:d[1],c:d[4],d:d[5],e:d[12],f:d[13]})}return o&&h&&(this.patternCache[o]=h),h},t.prototype.getOrCreateGradient=function(t,e){var n=this.generateGradientKey(t),r=t.type,i=t.steps,o=t.width,a=t.height,s=t.angle,l=t.cx,u=t.cy,c=t.size;if(this.gradientCache[n])return this.gradientCache[n];var h=null;if(r===Lr.LinearGradient){var d=function(t,e,n){var r=Xn(n.value),i=0+t/2,o=0+e/2,a=Math.abs(t*Math.cos(r))+Math.abs(e*Math.sin(r));return{x1:i-Math.cos(r)*a/2,y1:o-Math.sin(r)*a/2,x2:i+Math.cos(r)*a/2,y2:o+Math.sin(r)*a/2}}(o,a,s),f=d.x1,p=d.y1,v=d.x2,g=d.y2;h=e.createLinearGradient(f,p,v,g)}else if(r===Lr.RadialGradient){var y=function(t,e,n,r,i){var o=n.value,a=r.value;n.unit===vr.kPercentage&&(o=n.value/100*t),r.unit===vr.kPercentage&&(a=r.value/100*e);var s=Math.max(Le([0,0],[o,a]),Le([0,e],[o,a]),Le([t,e],[o,a]),Le([t,0],[o,a]));return i&&(i instanceof Gr?s=i.value:i instanceof Ar&&("closest-side"===i.value?s=Math.min(o,t-o,a,e-a):"farthest-side"===i.value?s=Math.max(o,t-o,a,e-a):"closest-corner"===i.value&&(s=Math.min(Le([0,0],[o,a]),Le([0,e],[o,a]),Le([t,e],[o,a]),Le([t,0],[o,a]))))),{x:o,y:a,r:s}}(o,a,l,u,c),m=y.x,C=y.y,w=y.r;h=e.createRadialGradient(m,C,0,m,C,w)}return h&&(i.forEach((function(t){var e=t.offset,n=t.color;e.unit===vr.kPercentage&&(null==h||h.addColorStop(e.value/100,n.toString()))})),this.gradientCache[n]=h),this.gradientCache[n]},t.prototype.generateGradientKey=function(t){var e=t.type,n=t.width,r=t.height,i=t.steps,o=t.angle,a=t.cx,s=t.cy,l=t.size;return"gradient-".concat(e,"-").concat((null==o?void 0:o.toString())||0,"-").concat((null==a?void 0:a.toString())||0,"-").concat((null==s?void 0:s.toString())||0,"-").concat((null==l?void 0:l.toString())||0,"-").concat(n,"-").concat(r,"-").concat(i.map((function(t){var e=t.offset,n=t.color;return"".concat(e).concat(n)})).join("-"))},t.prototype.generatePatternKey=function(t){var e=t.image,n=t.repetition;return Kt(e)?"pattern-".concat(e,"-").concat(n):"rect"===e.nodeName?"pattern-".concat(e.entity,"-").concat(n):void 0},t}(),r_=function(){function t(){}return t.prototype.apply=function(e){var n=e.renderingService,r=e.renderingContext,i=e.imagePool,o=r.root.ownerDocument.defaultView,a=function(t,e,n){var r=t.parsedStyle,i=r.width,o=r.height;i&&!o?t.setAttribute("height",n/e*i):!i&&o&&t.setAttribute("width",e/n*o)},s=function(t){var e=t.target,r=e.nodeName,o=e.attributes;if(r===Bn.IMAGE){var s=o.img,l=o.keepAspectRatio;Kt(s)&&i.getImageSync(s,(function(t){var r=t.width,i=t.height;l&&a(e,r,i),e.renderable.dirty=!0,n.dirtify()}))}},l=function(t){var e=t.target,r=t.attrName,o=t.newValue;e.nodeName===Bn.IMAGE&&"img"===r&&Kt(o)&&i.getOrCreateImage(o).then((function(t){var r=t.width,i=t.height;e.attributes.keepAspectRatio&&a(e,r,i),e.renderable.dirty=!0,n.dirtify()}))};n.hooks.init.tap(t.tag,(function(){o.addEventListener(Ha.MOUNTED,s),o.addEventListener(Ha.ATTR_MODIFIED,l)})),n.hooks.destroy.tap(t.tag,(function(){o.removeEventListener(Ha.MOUNTED,s),o.removeEventListener(Ha.ATTR_MODIFIED,l)}))},t.tag="LoadImage",t}(),i_=function(t){function e(){var e=t.apply(this,O([],R(arguments),!1))||this;return e.name="image-loader",e}return E(e,t),e.prototype.init=function(){this.context.imagePool=new n_(this.context.config),this.addRenderingPlugin(new r_)},e.prototype.destroy=function(){this.removeAllRenderingPlugins()},e}(Hn),o_=function(){function t(t){this.renderingContext=t.renderingContext,this.canvasConfig=t.config}return t.prototype.init=function(){var t=this.canvasConfig,e=t.container,n=t.canvas;if(n)this.$canvas=n,e&&n.parentElement!==e&&e.appendChild(n),this.$container=n.parentElement,this.canvasConfig.container=this.$container;else if(e&&(this.$container=Kt(e)?document.getElementById(e):e,this.$container)){var r=document.createElement("canvas");this.$container.appendChild(r),this.$container.style.position||(this.$container.style.position="relative"),this.$canvas=r}this.context=this.$canvas.getContext("2d"),this.resize(this.canvasConfig.width,this.canvasConfig.height)},t.prototype.getContext=function(){return this.context},t.prototype.getDomElement=function(){return this.$canvas},t.prototype.getDPR=function(){return this.dpr},t.prototype.getBoundingClientRect=function(){if(this.$canvas.getBoundingClientRect)return this.$canvas.getBoundingClientRect()},t.prototype.destroy=function(){this.$container&&this.$canvas&&this.$canvas.parentNode&&this.$container.removeChild(this.$canvas)},t.prototype.resize=function(t,e){var n=this.canvasConfig.devicePixelRatio||qo&&window.devicePixelRatio||1;n=n>=1?Math.ceil(n):1,this.dpr=n,this.$canvas&&(this.$canvas.width=this.dpr*t,this.$canvas.height=this.dpr*e,function(t,e,n){qo&&t.style&&(t.style.width=e+"px",t.style.height=n+"px")}(this.$canvas,t,e)),this.renderingContext.renderReasons.add(Ra.CAMERA_CHANGED)},t.prototype.applyCursorStyle=function(t){this.$container&&this.$container.style&&(this.$container.style.cursor=t)},t.prototype.toDataURL=function(t){return void 0===t&&(t={}),L(this,void 0,void 0,(function(){var e,n;return _(this,(function(r){return e=t.type,n=t.encoderOptions,[2,this.context.canvas.toDataURL(e,n)]}))}))},t}(),a_=function(t){function e(){var e=t.apply(this,O([],R(arguments),!1))||this;return e.name="canvas-context-register",e}return E(e,t),e.prototype.init=function(){this.context.ContextService=o_},e.prototype.destroy=function(){delete this.context.ContextService},e}(Hn),s_=function(t){function e(e){var n=t.call(this,e)||this;return n.registerPlugin(new a_),n.registerPlugin(new i_),n.registerPlugin(new xL),n.registerPlugin(new $L),n.registerPlugin(new JL),n.registerPlugin(new jL),n.registerPlugin(new e_),n}return E(e,t),e}(zn),l_=function(){function t(t){var e=this;this.isLinkFieldText=function(t){var n=e.getCellAppendInfo(t);return null==n?void 0:n.isLinkFieldText},this.spreadsheet=t,this.bindEvents()}return t.prototype.getCellAppendInfo=function(t){return gx(t)},t.prototype.reset=function(){},t}(),u_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return E(e,t),e.prototype.bindEvents=function(){this.bindDataCellClick()},e.prototype.bindDataCellClick=function(){var t=this;this.spreadsheet.on(Xl.DATA_CELL_CLICK,(function(e){var n;e.stopPropagation();var r=t.spreadsheet.interaction;if(r.clearHoverTimer(),!r.hasIntercepts([gm.CLICK]))if(t.isLinkFieldText(e.target))t.emitLinkFieldClickEvent(e);else{var i=t.spreadsheet.getCell(e.target),o=i.getMeta();o&&(r.addIntercepts([gm.HOVER]),r.isSelectedCell(i)?1===(null===(n=e.originalEvent)||void 0===n?void 0:n.detail)&&(r.reset(),t.spreadsheet.emit(Xl.GLOBAL_SELECTED,r.getActiveCells())):(r.changeState({cells:[AS(i)],stateName:cm.SELECTED,onUpdateCells:kS}),t.spreadsheet.emit(Xl.GLOBAL_SELECTED,[i]),t.showTooltip(e,o),r.updateDataCellRelevantHeaderCells(cm.SELECTED,o)))}}))},e.prototype.getTooltipOperator=function(t){var e=this.spreadsheet.getCell(t.target),n=ZS(this.spreadsheet,t).operation;return $S(n,{defaultMenus:[],cell:e})},e.prototype.showTooltip=function(t,e){var n=e.data,r=e.isTotals,i=void 0!==r&&r,o=e.value,a=e.fieldValue,s=e.field,l=e.valueField,u=n,c=this.spreadsheet.isTableMode(),h=[(c?S(S({},u),{value:o||a,valueField:s||l}):u)||S(S({},e.rowQuery),e.colQuery)],d=this.getTooltipOperator(t);this.spreadsheet.showTooltipWithInfo(t,h,{isTotals:i,operator:d,hideSummary:!0,onlyShowCellText:c})},e.prototype.emitLinkFieldClickEvent=function(t){var e=this.getCellAppendInfo(t.target).cellData,n=e,r=n.valueField,i=n.data;this.spreadsheet.emit(Xl.GLOBAL_LINK_FIELD_JUMP,{cellData:e,field:r,record:Object.assign({rowIndex:null==e?void 0:e.rowIndex},i)})},e}(l_),c_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return E(e,t),e.prototype.bindEvents=function(){this.bindDataCellClick()},e.prototype.bindDataCellClick=function(){var t=this;this.spreadsheet.on(Xl.MERGED_CELLS_CLICK,(function(e){e.stopPropagation();var n=t.spreadsheet.interaction;n.hasIntercepts([gm.CLICK])||n.addIntercepts([gm.HOVER])}))},e}(l_),h_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isMultiSelection=!1,e.handleRowColClick=function(t){if(t.stopPropagation(),!e.isLinkFieldText(t.target)){var n=e.spreadsheet,r=n.interaction,i=n.options,o=e.spreadsheet.getCell(t.target);if(!(o instanceof yS)){var a=!(!i.interaction.multiSelection||!e.isMultiSelection);r.selectHeaderCell({cell:o,isMultiSelection:a})&&e.showTooltip(t)}}},e.getHideColumnField=function(t){var n;return(null===(n=t.extra)||void 0===n?void 0:n.isCustomNode)?t.id:e.spreadsheet.isTableMode()?t.field:t.id},e}return E(e,t),e.prototype.bindEvents=function(){this.bindKeyboardDown(),this.bindKeyboardUp(),this.bindColCellClick(),this.bindRowCellClick(),this.bindTableColExpand(),this.bindMouseMove()},e.prototype.reset=function(){this.isMultiSelection=!1,this.spreadsheet.interaction.removeIntercepts([gm.CLICK])},e.prototype.bindKeyboardDown=function(){var t=this;this.spreadsheet.on(Xl.GLOBAL_KEYBOARD_DOWN,(function(e){NS(e)&&(t.isMultiSelection=!0)}))},e.prototype.bindKeyboardUp=function(){var t=this;this.spreadsheet.on(Xl.GLOBAL_KEYBOARD_UP,(function(e){NS(e)&&t.reset()}))},e.prototype.bindMouseMove=function(){var t=this;this.spreadsheet.on(Xl.GLOBAL_MOUSE_MOVE,(function(e){t.isMultiSelection&&!IS(e)&&t.reset()}))},e.prototype.bindRowCellClick=function(){var t=this;this.spreadsheet.on(Xl.ROW_CELL_CLICK,(function(e){t.handleRowColClick(e)}))},e.prototype.bindColCellClick=function(){var t=this;this.spreadsheet.on(Xl.COL_CELL_CLICK,(function(e){t.handleRowColClick(e)}))},e.prototype.showTooltip=function(t){var e=ZS(this.spreadsheet,t),n=e.operation;if(e.enable){var r=this.spreadsheet.interaction,i=r.isSelectedState()?Jv(r.getActiveCells(),(function(t){var e=t.getMeta();return dh({},e.query||{},dy(e,["colIndex","rowIndex"]))})):[],o=this.getTooltipOperator(t,n);this.spreadsheet.showTooltipWithInfo(t,i,{onlyShowCellText:!0,operator:o})}},e.prototype.getTooltipOperator=function(t,e){var n=this,r=this.spreadsheet.getCell(t.target),i=r.getMeta(),o=r.cellType===hm.COL_CELL,a=1===this.spreadsheet.facet.getColLeafNodes().length,s={key:"hiddenColumns",label:Fy(""),icon:"EyeOutlined"},l=o&&!a&&i.isLeaf&&e.hiddenColumns,u=S(S({},s),{onClick:function(){n.hideSelectedColumns()}});return $S(e,{defaultMenus:l?[u]:[],cell:r})},e.prototype.bindTableColExpand=function(){var t=this;this.spreadsheet.on(Xl.COL_CELL_EXPANDED,(function(e){t.handleExpandIconClick(e)}))},e.prototype.hideSelectedColumns=function(){return L(this,void 0,void 0,(function(){var t,e,n;return _(this,(function(r){switch(r.label){case 0:return t=this.spreadsheet.interaction,e=t.getActiveCells().map((function(t){return t.getMeta()})),n=e.map(this.getHideColumnField),[4,ES(this.spreadsheet,n,!0)];case 1:return r.sent(),[2]}}))}))},e.prototype.handleExpandIconClick=function(t){var e=this.spreadsheet.store.get("hiddenColumnsDetail",[]),n=(Zv(e,(function(e){var n=e.displaySiblingNode;return SS(n,t.id)}))||{}).hideColumnNodes,r=void 0===n?[]:n,i=this.spreadsheet.options.interaction.hiddenColumnFields,o=r.map(this.getHideColumnField),a=Nv(i,o),s=e.filter((function(e){var n=e.displaySiblingNode;return!SS(n,t.id)}));this.spreadsheet.setOptions({interaction:{hiddenColumnFields:a}}),this.spreadsheet.store.set("hiddenColumnsDetail",s),this.spreadsheet.interaction.reset(),this.spreadsheet.render(!1)},e}(l_),d_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.getRowData=function(t){var n,r=t.getHeadLeafChild(),i=e.spreadsheet.dataSet.getCellMultiData({query:null==r?void 0:r.query})[0],o=Cx.getFieldValue(i);return S(S({},o),{rowIndex:null!==(n=t.rowIndex)&&void 0!==n?n:null==r?void 0:r.rowIndex})},e}return E(e,t),e.prototype.bindEvents=function(){this.bindRowCellClick()},e.prototype.bindRowCellClick=function(){var t=this;this.spreadsheet.on(Xl.ROW_CELL_CLICK,(function(e){if(!t.spreadsheet.interaction.hasIntercepts([gm.CLICK])&&t.isLinkFieldText(e.target)){var n=t.getCellAppendInfo(e.target).cellData,r=n.field,i=t.getRowData(n);t.spreadsheet.emit(Xl.GLOBAL_LINK_FIELD_JUMP,{field:r,cellData:n,record:i})}}))},e}(l_),f_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return E(e,t),e.prototype.bindEvents=function(){this.bindCornerCellClick()},e.prototype.bindCornerCellClick=function(){var t=this;this.spreadsheet.on(Xl.CORNER_CELL_CLICK,(function(e){var n=t.spreadsheet.getCell(e.target);if(n){var r=n.getMeta();switch(null==r?void 0:r.cornerType){case HC.Row:t.onRowCornerClick(null==r?void 0:r.field,e);break;case HC.Col:t.onColCornerClick(null==r?void 0:r.field,e);break;case HC.Series:t.onSeriesCornerClick(null==r?void 0:r.field,e)}}}))},e.prototype.onRowCornerClick=function(t,e){var n=this.getSelectedRowNodes(t);this.selectCells(n,e)},e.prototype.onColCornerClick=function(t,e){var n=this.getSelectedColNodes(t);this.selectCells(n,e)},e.prototype.onSeriesCornerClick=function(t,e){var n=this.spreadsheet.facet.getSeriesNumberNodes();this.selectCells(n,e)},e.prototype.getSelectedRowNodes=function(t){var e=this.spreadsheet.facet;if(this.spreadsheet.isHierarchyTreeType())return e.getRowNodes();if(!this.spreadsheet.isCustomRowFields())return e.getRowNodesByField(t);var n=e.getRowNodesByField(t)[0];return e.getRowNodes(null==n?void 0:n.level)},e.prototype.getSelectedColNodes=function(t){var e=this.spreadsheet.facet;if(!this.spreadsheet.isCustomColumnFields())return e.getColNodesByField(t);var n=e.getColNodesByField(t)[0];return e.getColNodes(null==n?void 0:n.level)},e.prototype.getCellMetas=function(t,e){return t.map((function(t){return{id:t.id,colIndex:-1,rowIndex:-1,type:e}}))},e.prototype.selectCells=function(t,e){var n,r=this.spreadsheet.interaction,i=null===(n=t[0])||void 0===n?void 0:n.belongsCell,o=this.getCellMetas(t,null==i?void 0:i.cellType);if(i&&r.isSelectedCell(i))return r.reset(),void this.spreadsheet.emit(Xl.GLOBAL_SELECTED,r.getActiveCells());_g(t)||_g(o)||(r.addIntercepts([gm.HOVER]),r.changeState({cells:o,stateName:cm.SELECTED}),r.highlightNodes(t),this.showTooltip(e),this.spreadsheet.emit(Xl.GLOBAL_SELECTED,r.getActiveCells()))},e.prototype.showTooltip=function(t){var e=this.spreadsheet.interaction.getActiveCells();this.spreadsheet.showTooltipWithInfo(t,[],{data:{summaries:[{selectedData:e,name:"",value:null}]}})},e}(l_),p_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return E(e,t),e.prototype.bindEvents=function(){this.bindDataCellHover(),this.bindHeaderCellHover()},e.prototype.changeStateToHoverFocus=function(t,e){var n,r=this;if(t){var i=t.getMeta(),o=this.spreadsheet.interaction,a=this.spreadsheet.options.interaction,s=a.hoverFocus;o.clearHoverTimer();var l=function(){if(!o.hasIntercepts([gm.HOVER])){o.changeState({cells:[AS(t)],stateName:cm.HOVER_FOCUS});var n=r.spreadsheet.isTableMode(),s={isTotals:i.isTotals,hideSummary:!0,onlyShowCellText:n};(null==a?void 0:a.hoverHighlight)&&o.updateDataCellRelevantHeaderCells(cm.HOVER,i);var l=r.getCellData(i,n);r.spreadsheet.showTooltipWithInfo(e,l,s)}},u=Eg(s)?800:null!==(n=null==s?void 0:s.duration)&&void 0!==n?n:800;if(0===u)l();else{var c=window.setTimeout((function(){return l()}),u);o.setHoverTimer(c)}}},e.prototype.handleHeaderHover=function(t){var e=this.spreadsheet.getCell(t.target);if(!_g(e)){var n=this.spreadsheet.interaction;n.clearHoverTimer(),n.isActiveCell(e)||(n.changeState({cells:[AS(e)],stateName:cm.HOVER}),e.update(),this.showEllipsisTooltip(t,e))}},e.prototype.showEllipsisTooltip=function(t,e){if(e&&e.isTextOverflowing()){var n=e.getMeta(),r={isTotals:n.isTotals,hideSummary:!0,onlyShowCellText:!0,enableFormat:!0},i=this.getCellData(n,r.onlyShowCellText);this.spreadsheet.showTooltipWithInfo(t,i,r)}else this.spreadsheet.hideTooltip()},e.prototype.getCellData=function(t,e){void 0===t&&(t={});var n=t.data,r=t.query,i=t.value,o=t.field,a=t.fieldValue,s=t.valueField,l=t.rowQuery,u=t.colQuery,c=n;return e?[S(S({},r),{value:i||a,valueField:o||s})]:[c||S(S({},l),u)]},e.prototype.bindDataCellHover=function(){var t=this;this.spreadsheet.on(Xl.DATA_CELL_HOVER,(function(e){var n=t.spreadsheet.getCell(e.target);if(!_g(n)){var r=t.spreadsheet,i=r.interaction,o=r.options.interaction,a=null==n?void 0:n.getMeta();i.isActiveCell(n)||(i.changeState({cells:[AS(n)],stateName:cm.HOVER}),(null==o?void 0:o.hoverHighlight)&&i.updateDataCellRelevantHeaderCells(cm.HOVER,a),(null==o?void 0:o.hoverFocus)&&t.changeStateToHoverFocus(n,e))}}))},e.prototype.bindHeaderCellHover=function(){var t=this;[Xl.ROW_CELL_HOVER,Xl.COL_CELL_HOVER,Xl.CORNER_CELL_HOVER].forEach((function(e){t.spreadsheet.on(e,(function(e){t.handleHeaderHover(e)}))}))},e}(l_),v_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.displayedCells=[],e.brushRangeCells=[],e.brushSelectionStage=fm.UN_DRAGGED,e.brushSelectionMinimumMoveDistance=5,e.scrollAnimationComplete=!0,e.mouseMoveDistanceFromCanvas=0,e.setMoveDistanceFromCanvas=function(t,n,r){var i=0;if(n&&(i=t.x),r){var o=t.y;i=n?Math.max(o,i):o}e.mouseMoveDistanceFromCanvas=Math.abs(i)},e.formatBrushPointForScroll=function(t,n){var r,i,o,a;void 0===n&&(n=!1);var s=t.x,l=t.y,u=e.spreadsheet.facet,c=n?u.cornerBBox:u.panelBBox,h=c.minX,d=c.maxX,f=u.panelBBox,p=f.minY,v=f.maxY,g=(null===(r=e.endBrushPoint)||void 0===r?void 0:r.x)+s,y=(null===(i=e.endBrushPoint)||void 0===i?void 0:i.y)+l,m=!0,C=!0,w=null===(a=null===(o=u.vScrollBar)||void 0===o?void 0:o.getBBox())||void 0===a?void 0:a.width;return g>d?g=d-w-2:g<h?g=h+2:m=!1,y>v?y=v-2:y<=p?y=p+2:C=!1,{x:{value:g,needScroll:m},y:{value:y,needScroll:C}}},e.autoScrollIntervalId=null,e.rectanglesIntersect=function(t,e){return t.maxX>e.minX&&t.minX<e.maxX&&t.minY<e.maxY&&t.maxY>e.minY},e.autoScrollConfig=gp(Em),e.validateYIndex=function(t){var n,r,i=e.spreadsheet.facet,o=i.frozenGroupInfo,a=0,s=null===(n=null==o?void 0:o.frozenRow)||void 0===n?void 0:n.range;if((null==s?void 0:s[1])&&(a=s[1]+1),t<a)return null;var l=i.getCellRange().end,u=null===(r=null==o?void 0:o.frozenTrailingRow)||void 0===r?void 0:r.range;return(null==u?void 0:u[0])&&(l=u[0]-1),t>l?null:t},e.validateXIndex=function(t){var n,r,i=e.spreadsheet.facet,o=i.frozenGroupInfo,a=0,s=null===(n=null==o?void 0:o.frozenCol)||void 0===n?void 0:n.range;if((null==s?void 0:s[1])&&(a=s[1]+1),t<a)return null;var l=i.getColLeafNodes().length-1,u=null===(r=null==o?void 0:o.frozenTrailingCol)||void 0===r?void 0:r.range;return(null==u?void 0:u[0])&&(l=u[0]-1),t>l?null:t},e.adjustNextColIndexWithFrozen=function(t,n){var r=e.spreadsheet,i=r.facet,o=r.dataSet,a=r.options,s=o.getDisplayDataSet().length,l=i.getColLeafNodes().length,u=pw(a.frozen,l,s),c=u.trailingColCount,h=u.colCount,d=i.panelScrollGroupIndexes;return c>0&&n===xm.SCROLL_DOWN&&Fx(t,c,l)?d[1]:h>0&&n===xm.SCROLL_UP&&Dx(t,h)?d[0]:t},e.adjustNextRowIndexWithFrozen=function(t,n){var r=e.spreadsheet,i=r.facet,o=r.dataSet,a=r.options,s=o.getDisplayDataSet().length,l=i.getColLeafNodes().length,u=i.getCellRange(),c=pw(a.frozen,l,s),h=c.trailingRowCount,d=c.rowCount,f=i.panelScrollGroupIndexes;return h>0&&n===xm.SCROLL_DOWN&&zx(t,u.end,h)?f[3]:d>0&&n===xm.SCROLL_UP&&Hx(t,u.start,d)?f[2]:t},e.getWillScrollRowIndexDiff=function(t){return t===xm.SCROLL_DOWN?bm.SCROLL_DOWN:bm.SCROLL_UP},e.getDefaultWillScrollToRowIndex=function(t){var n=e.adjustNextRowIndexWithFrozen(e.endBrushPoint.rowIndex,t)+e.getWillScrollRowIndexDiff(t);return e.validateYIndex(n)},e.getWillScrollToRowIndex=function(t){return e.getDefaultWillScrollToRowIndex(t)},e.getNextScrollDelta=function(t){var n=e.spreadsheet.facet.getScrollOffset(),r=n.scrollX,i=void 0===r?0:r,o=n.scrollY,a=void 0===o?0:o,s=0,l=0;if(t.y.scroll){var u=t.y.value>0?xm.SCROLL_DOWN:xm.SCROLL_UP,c=e.getWillScrollToRowIndex(u);if(Og(c))l=0;else{var h=function(t,e,n){var r,i,o=n.facet,a=o.viewCellHeights.getCellOffsetY,s=o.panelBBox.height,l=a(t+1);if(Og(l))return 0;var u=null==o?void 0:o.frozenGroupInfo,c=null!==(r=null==u?void 0:u.frozenRow.height)&&void 0!==r?r:0,h=null!==(i=null==u?void 0:u.frozenTrailingRow.height)&&void 0!==i?i:0;return e===xm.SCROLL_UP?a(t)-c:l-(s-h)}(c,u,e.spreadsheet)-a;l=Og(h)||Number.isNaN(h)?0:h}}if(t.x.scroll){u=t.x.value>0?xm.SCROLL_DOWN:xm.SCROLL_UP;var d=e.adjustNextColIndexWithFrozen(e.endBrushPoint.colIndex,u),f=e.validateXIndex(d+(t.x.value>0?1:-1));s=Og(f)?0:function(t,e,n){var r,i,o=n.facet,a=o.panelBBox.width,s=null==o?void 0:o.frozenGroupInfo,l=null!==(r=null==s?void 0:s.frozenCol.width)&&void 0!==r?r:0,u=null!==(i=null==s?void 0:s.frozenTrailingCol.width)&&void 0!==i?i:0,c=o.getColLeafNodes()[t];return e===xm.SCROLL_UP?c.x-l:c.x+c.width-(a-u)}(f,u,e.spreadsheet)-i}return{x:s,y:l}},e.onScrollAnimationComplete=function(){e.scrollAnimationComplete=!0,e.brushSelectionStage!==fm.UN_DRAGGED&&e.renderPrepareSelected(e.endBrushPoint)},e.autoScroll=function(t){if(void 0===t&&(t=!1),e.brushSelectionStage!==fm.UN_DRAGGED&&e.scrollAnimationComplete){var n=e.autoScrollConfig,r=e.spreadsheet.facet.getScrollOffset(),i=t?"rowHeaderOffsetX":"offsetX",o={rowHeaderOffsetX:{value:r.rowHeaderScrollX,animate:!0},offsetX:{value:r.scrollX,animate:!0},offsetY:{value:r.scrollY,animate:!0}},a=e.getNextScrollDelta(n),s=a.x,l=a.y;if(0!==l||0!==s){if(n.y.scroll&&(o.offsetY.value+=l),n.x.scroll){var u=o[i];u.value+=s,u.value<0&&(u.value=0)}e.scrollAnimationComplete=!1;var c=n.x.scroll?1:3,h=Math.max(16,300-e.mouseMoveDistanceFromCanvas*c);e.spreadsheet.facet.scrollWithAnimation(o,h,e.onScrollAnimationComplete)}else e.clearAutoScroll()}},e.handleScroll=Ly((function(t,n,r){if(void 0===r&&(r=!1),e.brushSelectionStage!==fm.UN_DRAGGED){var i=e.formatBrushPointForScroll({x:t,y:n},r),o=i.x,a=o.value,s=o.needScroll,l=i.y,u=l.value,c=l.needScroll,h=e.autoScrollConfig;c&&(h.y.value=n,h.y.scroll=!0),s&&(h.x.value=t,h.x.scroll=!0),e.setMoveDistanceFromCanvas({x:t,y:n},s,c),e.renderPrepareSelected({x:a,y:u}),(c||s)&&(e.clearAutoScroll(),e.autoScroll(r),e.autoScrollIntervalId=setInterval((function(){e.autoScroll(r)}),16))}}),30),e.clearAutoScroll=function(){e.autoScrollIntervalId&&(clearInterval(e.autoScrollIntervalId),e.autoScrollIntervalId=null,e.resetScrollDelta())},e.onUpdateCells=function(t,e){return e()},e.showPrepareSelectedCells=function(){e.brushRangeCells=e.getBrushRangeCells(),e.spreadsheet.interaction.changeState({cells:Jv(e.brushRangeCells,(function(t){return AS(t)})),stateName:cm.PREPARE_SELECT,force:!0,onUpdateCells:e.onUpdateCells})},e.renderPrepareSelected=function(t){var n=t.x,r=t.y,i=e.spreadsheet.container.document.elementsFromPointSync(n,r).map((function(t){return e.spreadsheet.getCell(t)})).find(Boolean);if(i&&(i instanceof Sx||i instanceof OS||i instanceof TS)){var o=i.getMeta(),a=o.rowIndex,s=o.colIndex;e.endBrushPoint={x:n,y:r,rowIndex:a,colIndex:s};var l=e.spreadsheet.interaction;l.addIntercepts([gm.HOVER]),l.clearStyleIndependent(),e.isValidBrushSelection()&&(e.showPrepareSelectedCells(),e.updatePrepareSelectMask())}},e}return E(e,t),e.prototype.bindEvents=function(){this.bindMouseDown(),this.bindMouseMove(),this.bindMouseUp()},e.prototype.getPrepareSelectMaskTheme=function(){var t;return null===(t=this.spreadsheet.theme)||void 0===t?void 0:t.prepareSelectMask},e.prototype.initPrepareSelectMaskShape=function(){var t,e=this.spreadsheet.facet.foregroundGroup;if(e){null===(t=this.prepareSelectMaskShape)||void 0===t||t.remove();var n=this.getPrepareSelectMaskTheme();this.prepareSelectMaskShape=e.appendChild(new Ss({style:{width:0,height:0,x:0,y:0,fill:null==n?void 0:n.backgroundColor,fillOpacity:null==n?void 0:n.backgroundOpacity,zIndex:5,visibility:"hidden",pointerEvents:"none"}}))}},e.prototype.setBrushSelectionStage=function(t){this.brushSelectionStage=t},e.prototype.isPointInCanvas=function(t){var e=this.spreadsheet.facet.getCanvasSize(),n=e.height,r=e.width,i=this.spreadsheet.facet.panelBBox,o=i.minX,a=i.minY;return(null==t?void 0:t.x)>o&&(null==t?void 0:t.x)<r&&(null==t?void 0:t.y)>a&&(null==t?void 0:t.y)<n},e.prototype.resetDrag=function(){this.hidePrepareSelectMaskShape(),this.setBrushSelectionStage(fm.UN_DRAGGED)},e.prototype.isValidBrushSelection=function(){var t=this.getBrushRange(),e=t.start,n=t.end;return n.x-e.x>this.brushSelectionMinimumMoveDistance||n.y-e.y>this.brushSelectionMinimumMoveDistance},e.prototype.setDisplayedCells=function(){this.displayedCells=this.spreadsheet.facet.getDataCells()},e.prototype.updatePrepareSelectMask=function(){var t=this.getBrushRange(),e=this.getPrepareSelectMaskPosition(t),n=e.x,r=e.y;this.prepareSelectMaskShape.attr({x:n,y:r,width:t.width,height:t.height}),this.prepareSelectMaskShape.setAttribute("visibility","visible")},e.prototype.hidePrepareSelectMaskShape=function(){var t;null===(t=this.prepareSelectMaskShape)||void 0===t||t.setAttribute("visibility","hidden")},e.prototype.resetScrollDelta=function(){this.autoScrollConfig=gp(Em)},e.prototype.getBrushPoint=function(t){var e=this.spreadsheet.facet.getScrollOffset(),n=e.scrollY,r=e.scrollX,i={x:null==t?void 0:t.x,y:null==t?void 0:t.y},o=this.spreadsheet.getCell(t.target).getMeta(),a=o.colIndex,s=o.rowIndex;return S(S({},i),{rowIndex:s,colIndex:a,scrollY:n,scrollX:r})},e.prototype.getBrushRange=function(){var t,e,n,r,i,o,a,s,l=this.spreadsheet.facet.getScrollOffset(),u=l.scrollX,c=void 0===u?0:u,h=l.scrollY,d=void 0===h?0:h,f=Math.min(this.startBrushPoint.rowIndex,null===(t=this.endBrushPoint)||void 0===t?void 0:t.rowIndex),p=Math.max(this.startBrushPoint.rowIndex,null===(e=this.endBrushPoint)||void 0===e?void 0:e.rowIndex),v=Math.min(this.startBrushPoint.colIndex,null===(n=this.endBrushPoint)||void 0===n?void 0:n.colIndex),g=Math.max(this.startBrushPoint.colIndex,null===(r=this.endBrushPoint)||void 0===r?void 0:r.colIndex),y=this.startBrushPoint.x+this.startBrushPoint.scrollX-c,m=this.startBrushPoint.y+this.startBrushPoint.scrollY-d,C=Math.min(y,null===(i=this.endBrushPoint)||void 0===i?void 0:i.x),w=Math.max(y,null===(o=this.endBrushPoint)||void 0===o?void 0:o.x),x=Math.min(m,null===(a=this.endBrushPoint)||void 0===a?void 0:a.y),b=Math.max(m,null===(s=this.endBrushPoint)||void 0===s?void 0:s.y);return{start:{rowIndex:f,colIndex:v,x:C,y:x},end:{rowIndex:p,colIndex:g,x:w,y:b},width:w-C,height:b-x}},e.prototype.getBrushRangeCells=function(){var t=this;return this.setDisplayedCells(),this.displayedCells.filter((function(e){var n=e.getMeta();return t.isInBrushRange(n)}))},e.prototype.mouseDown=function(t){this.spreadsheet.interaction.hasIntercepts([gm.CLICK])||(this.setBrushSelectionStage(fm.CLICK),this.initPrepareSelectMaskShape(),this.setDisplayedCells(),this.startBrushPoint=this.getBrushPoint(t))},e.prototype.addBrushIntercepts=function(){this.spreadsheet.interaction.addIntercepts([gm.DATA_CELL_BRUSH_SELECTION])},e.prototype.bindMouseUp=function(t){var e=this;void 0===t&&(t=!1),this.spreadsheet.on(Xl.GLOBAL_MOUSE_UP,(function(n){if(e.brushSelectionStage===fm.DRAGGED){if(t&&e.clearAutoScroll(),e.isValidBrushSelection()){e.addBrushIntercepts(),e.updateSelectedCells();var r=KS(e.spreadsheet);e.spreadsheet.showTooltipWithInfo(n,r)}e.spreadsheet.interaction.getCurrentStateName()===cm.PREPARE_SELECT&&e.spreadsheet.interaction.reset(),e.resetDrag()}else e.resetDrag()})),this.spreadsheet.on(Xl.GLOBAL_CONTEXT_MENU,(function(){e.brushSelectionStage!==fm.UN_DRAGGED&&(e.spreadsheet.interaction.removeIntercepts([gm.HOVER]),e.resetDrag())}))},e.prototype.autoBrushScroll=function(t,e){var n,r;if(void 0===e&&(e=!1),this.clearAutoScroll(),!this.isPointInCanvas(t)){var i=(null==t?void 0:t.x)-(null===(n=this.endBrushPoint)||void 0===n?void 0:n.x),o=(null==t?void 0:t.y)-(null===(r=this.endBrushPoint)||void 0===r?void 0:r.y);return this.handleScroll(i,o,e),!0}return!1},e.prototype.emitBrushSelectionEvent=function(t,e){this.spreadsheet.emit(t,e),this.spreadsheet.emit(Xl.GLOBAL_SELECTED,e),_g(e)&&this.spreadsheet.interaction.removeIntercepts([gm.HOVER])},e.prototype.getVisibleBrushRangeCells=function(t){return this.brushRangeCells.find((function(e){var n=e.getMeta();return(null==n?void 0:n.id)===t}))},e.prototype.isInBrushRange=function(t){return!1},e.prototype.bindMouseDown=function(){},e.prototype.bindMouseMove=function(){},e.prototype.updateSelectedCells=function(){},e.prototype.getPrepareSelectMaskPosition=function(t){return{x:t.start.x,y:t.start.y}},e}(l_),g_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.displayedCells=[],e.brushRangeCells=[],e.onUpdateCells=function(t){return t.updateCells(e.spreadsheet.facet.getColCells())},e}return E(e,t),e.prototype.bindEvents=function(){this.bindMouseDown(),this.bindMouseMove(),this.bindMouseUp()},e.prototype.bindMouseDown=function(){var e=this;this.spreadsheet.on(Xl.COL_CELL_MOUSE_DOWN,(function(n){e.spreadsheet.interaction.getBrushSelection().colCell&&t.prototype.mouseDown.call(e,n)}))},e.prototype.isPointInCanvas=function(t){var e=this.spreadsheet.facet.getCanvasSize().width,n=this.spreadsheet.facet.cornerBBox,r=n.width,i=n.minY,o=n.maxY;return t.x>=r&&t.x<=e&&t.y>=i&&t.y<=o},e.prototype.bindMouseMove=function(){var t=this;this.spreadsheet.on(Xl.COL_CELL_MOUSE_MOVE,(function(e){var n;if(t.brushSelectionStage!==fm.UN_DRAGGED){t.setBrushSelectionStage(fm.DRAGGED);var r=null===(n=t.spreadsheet.interaction.eventController)||void 0===n?void 0:n.getViewportPoint(e);t.isPointInCanvas(r)&&t.renderPrepareSelected(r)}}))},e.prototype.setDisplayedCells=function(){this.displayedCells=this.spreadsheet.facet.getColCells()},e.prototype.isInBrushRange=function(t){var e=this.getBrushRange(),n=e.start,r=e.end,i=this.spreadsheet.facet.getScrollOffset().scrollX,o=void 0===i?0:i,a=this.spreadsheet.facet.cornerBBox,s=t.x,l=void 0===s?0:s,u=t.y,c=void 0===u?0:u,h=t.width,d=void 0===h?0:h,f=t.height,p=void 0===f?0:f;return this.rectanglesIntersect({minX:n.x-a.width+o,minY:n.y,maxX:r.x-a.width+o,maxY:r.y},{minX:l,maxX:l+d,minY:c,maxY:c+p})},e.prototype.updateSelectedCells=function(){var t=this.spreadsheet,e=t.interaction,n=t.facet;e.changeState({cells:Jv(this.brushRangeCells,AS),onUpdateCells:function(t){t.updateCells(n.getColCells())},stateName:cm.COL_CELL_BRUSH_SELECTED}),this.spreadsheet.emit(Xl.COL_CELL_BRUSH_SELECTION,this.brushRangeCells),this.spreadsheet.emit(Xl.GLOBAL_SELECTED,this.brushRangeCells),_g(this.brushRangeCells)&&e.removeIntercepts([gm.HOVER])},e.prototype.addBrushIntercepts=function(){this.spreadsheet.interaction.addIntercepts([gm.COL_CELL_BRUSH_SELECTION])},e}(v_),y_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.displayedCells=[],e.brushRangeCells=[],e.getSelectedCellMetas=function(t){var n=e.spreadsheet.facet,r=[],i=n.getRowLeafNodes(),o=n.getColLeafNodes(),a=vy(t.start.rowIndex,t.end.rowIndex+1),s=vy(t.start.colIndex,t.end.colIndex+1);return a.forEach((function(t){s.forEach((function(n){var a=String(o[n].id),s=_g(i)?String(t):String(i[t].id);r.push({colIndex:n,rowIndex:t,id:xx(s,a),type:hm.DATA_CELL,rowId:s,colId:a,spreadsheet:e.spreadsheet})}))})),r},e}return E(e,t),e.prototype.bindMouseDown=function(){var e=this;this.spreadsheet.on(Xl.DATA_CELL_MOUSE_DOWN,(function(n){e.spreadsheet.interaction.getBrushSelection().dataCell&&(t.prototype.mouseDown.call(e,n),e.resetScrollDelta())}))},e.prototype.bindMouseMove=function(){var t=this;this.spreadsheet.on(Xl.GLOBAL_MOUSE_MOVE,(function(e){if(t.brushSelectionStage!==fm.UN_DRAGGED){t.setBrushSelectionStage(fm.DRAGGED);var n=t.spreadsheet.interaction.eventController.getViewportPoint(e);t.autoBrushScroll(n)||t.renderPrepareSelected(n)}}))},e.prototype.isInBrushRange=function(t){var e=this.getBrushRange(),n=e.start,r=e.end,i=t.rowIndex,o=t.colIndex;return i>=n.rowIndex&&i<=r.rowIndex&&o>=n.colIndex&&o<=r.colIndex},e.prototype.updateSelectedCells=function(){var t=this.getBrushRange(),e=this.getSelectedCellMetas(t);this.spreadsheet.interaction.changeState({cells:e,stateName:cm.DATA_CELL_BRUSH_SELECTED,onUpdateCells:kS});var n=this.getScrollBrushRangeCells(e);this.emitBrushSelectionEvent(Xl.DATA_CELL_BRUSH_SELECTION,n)},e.prototype.getScrollBrushRangeCells=function(t){var e=this;return t.map((function(t){var n=e.getVisibleBrushRangeCells(t.id);if(n)return n;var r=e.spreadsheet.facet.getCellMeta(t.rowIndex,t.colIndex);return e.spreadsheet.options.dataCell(r)}))},e.prototype.bindMouseUp=function(){t.prototype.bindMouseUp.call(this,!0)},e.prototype.getPrepareSelectMaskPosition=function(t){var e=this.spreadsheet.facet.panelBBox,n=e.minX,r=e.minY;return{x:Math.max(t.start.x,n),y:Math.max(t.start.y,r)}},e}(v_),m_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.displayedCells=[],e.brushRangeCells=[],e.isInBrushRange=function(t){var n=e.getBrushRange(),r=n.start,i=n.end,o=e.spreadsheet.facet.getScrollOffset(),a=o.scrollY,s=o.rowHeaderScrollX,l=e.spreadsheet.facet.cornerBBox,u=t.x,c=void 0===u?0:u,h=t.y,d=void 0===h?0:h,f=t.width,p=void 0===f?0:f,v=t.height,g=void 0===v?0:v;return e.rectanglesIntersect({minX:r.x+s,minY:r.y-l.height+a,maxX:i.x+s,maxY:i.y-l.height+a},{minX:c,maxX:c+p,minY:d,maxY:d+g})},e.onUpdateCells=function(t){return t.updateCells(e.spreadsheet.facet.getRowCells())},e.getSelectedRowNodes=function(){return e.spreadsheet.facet.getRowNodes().filter(e.isInBrushRange)},e.getVisibleRowLeafCellByScrollDirection=function(t){var n=e.spreadsheet.facet.getRowCells();return t===xm.SCROLL_DOWN?Iv(n):n.find((function(t){return t.getMeta().isLeaf}))},e.getWillScrollToRowIndex=function(t){var n,r;if(!Og(e.endBrushPoint.rowIndex))return e.getDefaultWillScrollToRowIndex(t);var i=e.getVisibleRowLeafCellByScrollDirection(t),o=(null!==(r=null===(n=null==i?void 0:i.getMeta())||void 0===n?void 0:n.rowIndex)&&void 0!==r?r:0)+e.getWillScrollRowIndexDiff(t);return e.validateYIndex(o)},e}return E(e,t),e.prototype.bindMouseDown=function(){var e=this;this.spreadsheet.on(Xl.ROW_CELL_MOUSE_DOWN,(function(n){e.spreadsheet.interaction.getBrushSelection().rowCell&&t.prototype.mouseDown.call(e,n)}))},e.prototype.isPointInCanvas=function(t){var e=this.spreadsheet.facet.getCanvasSize().height,n=this.spreadsheet.facet.cornerBBox,r=n.minX,i=n.height,o=n.maxX;return t.x>=r&&t.x<=o&&t.y>=i&&t.y<=e},e.prototype.bindMouseMove=function(){var t=this;this.spreadsheet.on(Xl.GLOBAL_MOUSE_MOVE,(function(e){if(t.brushSelectionStage!==fm.UN_DRAGGED){t.setBrushSelectionStage(fm.DRAGGED);var n=t.spreadsheet.interaction.eventController.getViewportPoint(e);t.autoBrushScroll(n,!0)||t.renderPrepareSelected(n)}}))},e.prototype.setDisplayedCells=function(){this.displayedCells=this.spreadsheet.facet.getRowCells()},e.prototype.updateSelectedCells=function(){var t=this.getSelectedRowNodes(),e=this.getScrollBrushRangeCells(t),n=Jv(e,AS);this.spreadsheet.interaction.changeState({cells:n,stateName:cm.ROW_CELL_BRUSH_SELECTED,onUpdateCells:this.onUpdateCells}),this.emitBrushSelectionEvent(Xl.ROW_CELL_BRUSH_SELECTION,e)},e.prototype.addBrushIntercepts=function(){this.spreadsheet.interaction.addIntercepts([gm.ROW_CELL_BRUSH_SELECTION])},e.prototype.getScrollBrushRangeCells=function(t){var e=this;return t.map((function(t){var n=e.getVisibleBrushRangeCells(t.id);return n||e.spreadsheet.facet.rowHeader.getCellInstance(t)}))},e.prototype.getPrepareSelectMaskPosition=function(t){var e=this.spreadsheet.facet.panelBBox.minY;return{x:t.start.x,y:Math.max(t.start.y,e)}},e}(v_),C_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isMultiSelection=!1,e}return E(e,t),e.prototype.bindEvents=function(){this.bindKeyboardDown(),this.bindDataCellClick(),this.bindKeyboardUp(),this.bindMouseMove()},e.prototype.reset=function(){this.isMultiSelection=!1,this.spreadsheet.interaction.removeIntercepts([gm.CLICK])},e.prototype.bindKeyboardDown=function(){var t=this;this.spreadsheet.on(Xl.GLOBAL_KEYBOARD_DOWN,(function(e){NS(e)&&(t.isMultiSelection=!0,t.spreadsheet.interaction.addIntercepts([gm.CLICK]))}))},e.prototype.bindKeyboardUp=function(){var t=this;this.spreadsheet.on(Xl.GLOBAL_KEYBOARD_UP,(function(e){NS(e)&&t.reset()}))},e.prototype.bindMouseMove=function(){var t=this;this.spreadsheet.on(Xl.GLOBAL_MOUSE_MOVE,(function(e){t.isMultiSelection&&!IS(e)&&t.reset()}))},e.prototype.getSelectedCells=function(t){var e=t.getMeta().id,n=this.spreadsheet.interaction,r=n.getCells([hm.DATA_CELL]);return n.getCurrentStateName()!==cm.SELECTED&&(r=[]),r.find((function(t){return t.id===e}))?r.filter((function(t){return t.id!==e})):O(O([],R(r),!1),[AS(t)],!1)},e.prototype.bindDataCellClick=function(){var t=this;this.spreadsheet.on(Xl.DATA_CELL_CLICK,(function(e){e.stopPropagation();var n=t.spreadsheet.getCell(e.target),r=n.getMeta(),i=t.spreadsheet.interaction;if(t.isMultiSelection&&r){var o=t.getSelectedCells(n);if(_g(o))return i.clearState(),t.spreadsheet.hideTooltip(),void t.spreadsheet.emit(Xl.GLOBAL_SELECTED,i.getActiveCells());i.addIntercepts([gm.CLICK,gm.HOVER]),t.spreadsheet.hideTooltip(),i.changeState({cells:o,stateName:cm.SELECTED,onUpdateCells:kS}),t.spreadsheet.emit(Xl.GLOBAL_SELECTED,i.getActiveCells()),t.spreadsheet.showTooltipWithInfo(e,KS(t.spreadsheet))}}))},e}(l_),w_=function(){function t(t){var e=this;this.canvasEventHandlers=[],this.s2EventHandlers=[],this.domEventListeners=[],this.isCanvasEffect=!1,this.isGuiIconShape=function(t){return t instanceof GC&&t.imgType===YC.type},this.isConditionIconShape=function(t,e){return e.getConditionIconShapes().some((function(e){var n;return(null==e?void 0:e.name)===(null===(n=null==t?void 0:t.attributes)||void 0===n?void 0:n.name)}))},this.onCanvasMousedown=function(t){if(e.target=t.target,e.spreadsheet.interaction.clearHoverTimer(),e.isResizeArea(t)){e.spreadsheet.emit(Xl.LAYOUT_RESIZE_MOUSE_DOWN,t);var n=function(t){if(!e.spreadsheet.getCanvasElement())return!1;e.spreadsheet.getCanvasElement()!==t.target&&e.spreadsheet.emit(Xl.LAYOUT_RESIZE_MOUSE_MOVE,t)};return window.addEventListener(Yl.POINTER_MOVE,n),void window.addEventListener(Yl.POINTER_UP,(function(){window.removeEventListener(Yl.POINTER_MOVE,n)}),{once:!0})}switch(e.spreadsheet.getCellType(t.target)){case hm.DATA_CELL:e.spreadsheet.emit(Xl.DATA_CELL_MOUSE_DOWN,t);break;case hm.ROW_CELL:e.spreadsheet.emit(Xl.ROW_CELL_MOUSE_DOWN,t);break;case hm.COL_CELL:e.spreadsheet.emit(Xl.COL_CELL_MOUSE_DOWN,t);break;case hm.CORNER_CELL:e.spreadsheet.emit(Xl.CORNER_CELL_MOUSE_DOWN,t);break;case hm.MERGED_CELL:e.spreadsheet.emit(Xl.MERGED_CELLS_MOUSE_DOWN,t)}},this.onCanvasMousemove=function(t){if(e.canvasMousemoveEvent=t,e.isResizeArea(t))return e.activeResizeArea(t),void e.spreadsheet.emit(Xl.LAYOUT_RESIZE_MOUSE_MOVE,t.nativeEvent);e.resetResizeArea();var n=e.spreadsheet.getCell(t.target);if(n){var r=n.cellType;switch(r){case hm.DATA_CELL:e.spreadsheet.emit(Xl.DATA_CELL_MOUSE_MOVE,t);break;case hm.ROW_CELL:e.spreadsheet.emit(Xl.ROW_CELL_MOUSE_MOVE,t);break;case hm.COL_CELL:e.spreadsheet.emit(Xl.COL_CELL_MOUSE_MOVE,t);break;case hm.CORNER_CELL:e.spreadsheet.emit(Xl.CORNER_CELL_MOUSE_MOVE,t);break;case hm.MERGED_CELL:e.spreadsheet.emit(Xl.MERGED_CELLS_MOUSE_MOVE,t)}if(!e.hasBrushSelectionIntercepts())switch(e.spreadsheet.emit(Xl.GLOBAL_HOVER,t),r){case hm.DATA_CELL:e.spreadsheet.emit(Xl.DATA_CELL_HOVER,t);break;case hm.ROW_CELL:e.spreadsheet.emit(Xl.ROW_CELL_HOVER,t);break;case hm.COL_CELL:e.spreadsheet.emit(Xl.COL_CELL_HOVER,t);break;case hm.CORNER_CELL:e.spreadsheet.emit(Xl.CORNER_CELL_HOVER,t);break;case hm.MERGED_CELL:e.spreadsheet.emit(Xl.MERGED_CELLS_HOVER,t)}}},this.onCanvasMouseup=function(t){if(e.isResizeArea(t))e.spreadsheet.emit(Xl.LAYOUT_RESIZE_MOUSE_UP,t);else{var n=e.spreadsheet.getCell(t.target);if(n){var r=n.cellType;if(e.target===t.target){if(e.isGuiIconShape(t.target)&&!e.isConditionIconShape(t.target,n))return;switch(r){case hm.DATA_CELL:e.spreadsheet.emit(Xl.DATA_CELL_CLICK,t);break;case hm.ROW_CELL:e.spreadsheet.emit(Xl.ROW_CELL_CLICK,t);break;case hm.COL_CELL:e.spreadsheet.emit(Xl.COL_CELL_CLICK,t);break;case hm.CORNER_CELL:e.spreadsheet.emit(Xl.CORNER_CELL_CLICK,t);break;case hm.MERGED_CELL:e.spreadsheet.emit(Xl.MERGED_CELLS_CLICK,t)}}switch(r){case hm.DATA_CELL:e.spreadsheet.emit(Xl.DATA_CELL_MOUSE_UP,t);break;case hm.ROW_CELL:e.spreadsheet.emit(Xl.ROW_CELL_MOUSE_UP,t);break;case hm.COL_CELL:e.spreadsheet.emit(Xl.COL_CELL_MOUSE_UP,t);break;case hm.CORNER_CELL:e.spreadsheet.emit(Xl.CORNER_CELL_MOUSE_UP,t);break;case hm.MERGED_CELL:e.spreadsheet.emit(Xl.MERGED_CELLS_MOUSE_UP,t)}}}},this.onCanvasClick=function(t){e.spreadsheet.emit(Xl.GLOBAL_CLICK,t),qC()&&e.onCanvasMouseup(t),2===t.detail&&e.onCanvasDoubleClick(t)},this.onCanvasDoubleClick=function(t){var n=e.spreadsheet;if(e.isResizeArea(t))n.emit(Xl.LAYOUT_RESIZE_MOUSE_UP,t);else{n.emit(Xl.GLOBAL_DOUBLE_CLICK,t);var r=n.getCell(t.target);if(r){var i=r.cellType;if(e.target===t.target)switch(i){case hm.DATA_CELL:n.emit(Xl.DATA_CELL_DOUBLE_CLICK,t);break;case hm.ROW_CELL:n.emit(Xl.ROW_CELL_DOUBLE_CLICK,t);break;case hm.COL_CELL:n.emit(Xl.COL_CELL_DOUBLE_CLICK,t);break;case hm.CORNER_CELL:n.emit(Xl.CORNER_CELL_DOUBLE_CLICK,t);break;case hm.MERGED_CELL:n.emit(Xl.MERGED_CELLS_DOUBLE_CLICK,t)}}}},this.onCanvasMouseout=function(t){if(e.isAutoResetSheetStyle&&!e.isMouseOnTheCanvasContainer(t)){var n=e.spreadsheet.interaction;n.isSelectedState()||n.intercepts.size>0||n.reset()}},this.onCanvasContextMenu=function(t){var n=e.spreadsheet;if(e.isResizeArea(t))n.emit(Xl.LAYOUT_RESIZE_MOUSE_UP,t);else switch(n.emit(Xl.GLOBAL_CONTEXT_MENU,t),e.spreadsheet.getCellType(t.target)){case hm.DATA_CELL:e.spreadsheet.emit(Xl.DATA_CELL_CONTEXT_MENU,t);break;case hm.ROW_CELL:e.spreadsheet.emit(Xl.ROW_CELL_CONTEXT_MENU,t);break;case hm.COL_CELL:e.spreadsheet.emit(Xl.COL_CELL_CONTEXT_MENU,t);break;case hm.CORNER_CELL:e.spreadsheet.emit(Xl.CORNER_CELL_CONTEXT_MENU,t);break;case hm.MERGED_CELL:e.spreadsheet.emit(Xl.MERGED_CELLS_CONTEXT_MENU,t)}},this.spreadsheet=t,this.bindEvents()}return Object.defineProperty(t.prototype,"canvasContainer",{get:function(){return this.spreadsheet.container},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isAutoResetSheetStyle",{get:function(){var t;return null===(t=this.spreadsheet.options.interaction)||void 0===t?void 0:t.autoResetSheetStyle},enumerable:!1,configurable:!0}),t.prototype.bindEvents=function(){var t=this;this.clearAllEvents(),this.addCanvasEvent(Yl.CLICK,this.onCanvasClick),this.addCanvasEvent(Yl.MOUSE_DOWN,this.onCanvasMousedown),this.addCanvasEvent(Yl.TOUCH_START,(function(e){t.target=e.target})),this.addCanvasEvent(Yl.POINTER_MOVE,this.onCanvasMousemove),this.addCanvasEvent(Yl.MOUSE_OUT,this.onCanvasMouseout),this.addCanvasEvent(Yl.POINTER_UP,this.onCanvasMouseup),this.addCanvasEvent(Yl.RIGHT_DOWN,this.onCanvasContextMenu),this.addS2Event(Xl.GLOBAL_ACTION_ICON_CLICK,(function(){t.spreadsheet.interaction.addIntercepts([gm.HOVER]),t.spreadsheet.interaction.clearState()})),this.addDomEventListener(window,Yl.CLICK,(function(e){t.resetSheetStyle(e),t.isCanvasEffect=t.isMouseOnTheCanvasContainer(e)})),this.addDomEventListener(window,Yl.KEY_DOWN,(function(e){t.onKeyboardCopy(e),t.onKeyboardEsc(e),t.spreadsheet.emit(Xl.GLOBAL_KEYBOARD_DOWN,e)})),this.addDomEventListener(window,Yl.KEY_UP,(function(e){t.spreadsheet.emit(Xl.GLOBAL_KEYBOARD_UP,e)})),this.addDomEventListener(window,Yl.POINTER_UP,(function(e){t.spreadsheet.emit(Xl.GLOBAL_MOUSE_UP,e)})),this.addDomEventListener(window,Yl.POINTER_MOVE,(function(e){t.spreadsheet.emit(Xl.GLOBAL_MOUSE_MOVE,e)}))},t.prototype.onKeyboardCopy=function(t){var e=this.spreadsheet.options.interaction.copy;if(this.isCanvasEffect&&(null==e?void 0:e.enable)&&Zw(t.key,pm.COPY)&&(t.metaKey||t.ctrlKey)){var n=fx(this.spreadsheet);Og(n)||this.spreadsheet.emit(Xl.GLOBAL_COPIED,n)}},t.prototype.onKeyboardEsc=function(t){this.isCanvasEffect&&Zw(t.key,pm.ESC)&&this.resetSheetStyle(t)},t.prototype.resetSheetStyle=function(t){var e,n;if(this.isAutoResetSheetStyle&&this.spreadsheet){var r=this.spreadsheet.interaction;(null===(e=null==r?void 0:r.hasIntercepts)||void 0===e?void 0:e.call(r,[gm.DATA_CELL_BRUSH_SELECTION,gm.COL_CELL_BRUSH_SELECTION,gm.ROW_CELL_BRUSH_SELECTION]))?null===(n=null==r?void 0:r.removeIntercepts)||void 0===n||n.call(r,[gm.DATA_CELL_BRUSH_SELECTION,gm.ROW_CELL_BRUSH_SELECTION,gm.COL_CELL_BRUSH_SELECTION]):this.isMouseOnTheTooltip(t)||this.isMouseOnTheCanvasContainer(t)||(r.reset(),this.spreadsheet.emit(Xl.GLOBAL_RESET,t),this.spreadsheet.emit(Xl.GLOBAL_SELECTED,r.getActiveCells()))}},t.prototype.isMouseEvent=function(t){return iv(t,"clientX")&&iv(t,"clientY")},t.prototype.isMatchElement=function(t){var e=this.spreadsheet.getCanvasElement(),n=t.target;return n===e||n instanceof fs||n instanceof Fs},t.prototype.isMatchPoint=function(t){var e=this.spreadsheet.getCanvasElement(),n=this.getContainerRect(),r=n.width,i=n.height,o=e.getBoundingClientRect()||{},a=o.x,s=o.y,l=t.clientX,u=t.clientY;return l<=a+r&&l>=a&&u<=s+i&&u>=s},t.prototype.isMouseOnTheCanvasContainer=function(t){return!!this.isMouseEvent(t)&&(!!this.spreadsheet.getCanvasElement()&&(this.isMatchElement(t)&&this.isMatchPoint(t)))},t.prototype.getContainerRect=function(){var t,e=this.spreadsheet,n=e.facet,r=e.options,i=(null==n?void 0:n.hRowScrollBar)||(null==n?void 0:n.hScrollBar),o=(null==n?void 0:n.panelBBox)||{},a=o.maxX,s=o.maxY,l=r.width,u=void 0===l?0:l,c=r.height,h=void 0===c?0:c,d=(null===(t=null==i?void 0:i.theme)||void 0===t?void 0:t.size)||0;return{width:Math.min(u,a),height:Math.min(h,s+d)}},t.prototype.isMouseOnTheTooltip=function(t){var e,n,r,i,o=this.spreadsheet.tooltip;if(!(null==o?void 0:o.visible))return!1;var a=(null===(r=null===(n=null===(e=this.spreadsheet.tooltip)||void 0===e?void 0:e.container)||void 0===n?void 0:n.getBoundingClientRect)||void 0===r?void 0:r.call(n))||{},s=a.x,l=a.y,u=a.width,c=a.height;return t.target instanceof Node?function(t,e){for(var n=!1,r=e;r&&r!==document.body;){if(t===r){n=!0;break}r=r.parentElement}return n}(null===(i=this.spreadsheet.tooltip)||void 0===i?void 0:i.container,t.target):!!this.isMouseEvent(t)&&(t.clientX>=s&&t.clientX<=s+u&&t.clientY>=l&&t.clientY<=l+c)},t.prototype.isResizeArea=function(t){var e=gx(t.target);return null==e?void 0:e.isResizeArea},t.prototype.activeResizeArea=function(t){var e,n,r,i=Hh(t.target,"attrs.appendInfo");if(!(null==i?void 0:i.isResizeMask)){this.resetResizeArea();var o=t.target;this.spreadsheet.store.set("activeResizeArea",o),o.attr(ym.backgroundOpacity,null===(r=null===(n=null===(e=this.spreadsheet.theme.resizeArea)||void 0===e?void 0:e.interactionState)||void 0===n?void 0:n.hover)||void 0===r?void 0:r.backgroundOpacity)}},t.prototype.resetResizeArea=function(){var t,e=this.spreadsheet.store.get("activeResizeArea");_g(e)||e.attr(ym.backgroundOpacity,null===(t=this.spreadsheet.theme.resizeArea)||void 0===t?void 0:t.backgroundOpacity),this.spreadsheet.store.set("activeResizeArea",e)},t.prototype.hasBrushSelectionIntercepts=function(){return this.spreadsheet.interaction.hasIntercepts([gm.HOVER,gm.DATA_CELL_BRUSH_SELECTION,gm.ROW_CELL_BRUSH_SELECTION,gm.COL_CELL_BRUSH_SELECTION])},t.prototype.clear=function(){this.unbindEvents()},t.prototype.unbindEvents=function(){this.clearAllEvents()},t.prototype.addCanvasEvent=function(t,e){var n;null===(n=this.canvasContainer)||void 0===n||n.on(t,e),this.canvasEventHandlers.push({type:t,handler:e})},t.prototype.addS2Event=function(t,e){this.spreadsheet.on(t,e),this.s2EventHandlers.push({type:t,handler:e})},t.prototype.addDomEventListener=function(t,e,n){if(t.addEventListener){var r=this.spreadsheet.options.interaction.eventListenerOptions;t.addEventListener(e,n,r),this.domEventListeners.push({target:t,type:e,handler:n,options:r})}else console.error("Please make sure ".concat(t," has addEventListener function"))},t.prototype.clearAllEvents=function(){var t=this;kv(this.canvasEventHandlers,(function(e){var n,r=e.type,i=e.handler;null===(n=t.canvasContainer)||void 0===n||n.removeEventListener(r,i)})),kv(this.s2EventHandlers,(function(e){var n=e.type,r=e.handler;t.spreadsheet.off(n,r)})),kv(this.domEventListeners,(function(t){t.target.removeEventListener(t.type,t.handler,t.options)})),this.canvasEventHandlers=[],this.s2EventHandlers=[],this.domEventListeners=[]},t.prototype.getViewportPoint=function(t){return!this.spreadsheet.getCanvasConfig().supportsCSSTransform||Og(t.offsetX)||Og(t.offsetY)?this.spreadsheet.container.client2Viewport({x:t.clientX,y:t.clientY}):{x:t.offsetX,y:t.offsetY}},t}(),x_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isRangeSelection=!1,e.handleColClick=function(t){t.stopPropagation();var n=e.spreadsheet,r=n.interaction,i=n.facet,o=e.spreadsheet.getCell(t.target),a=null==o?void 0:o.getMeta();if(!Og(null==a?void 0:a.x)){r.addIntercepts([gm.HOVER]);var s=[AS(o)],l=e.spreadsheet.store.get("lastClickedCell");if(e.isRangeSelection&&l&&l.cellType===o.cellType&&l.getMeta().level===a.level){var u=i.getLayoutResult(),c=u.rowsHierarchy,h=u.colsHierarchy,d=R([c.maxLevel,h.maxLevel],2),f=d[0],p=d[1],v=PS(l.getMeta(),a),g=v.start,y=v.end;o instanceof Sx?s=e.handleSeriesNumberRowSelected(g.rowIndex,y.rowIndex,o):(null==o?void 0:o.cellType)===hm.ROW_CELL&&a.level===f?s=e.handleRowSelected(g.rowIndex,y.rowIndex,o):(null==o?void 0:o.cellType)===hm.COL_CELL&&a.level===p&&(s=e.handleColSelected(g.colIndex,y.colIndex,o)),r.changeState({cells:s,stateName:cm.SELECTED})}else _g(r.getCells())&&r.removeIntercepts([gm.HOVER]),e.spreadsheet.store.set("lastClickedCell",o);var m=s.map((function(t){return t.id}));r.updateCells(i.getHeaderCells(m)),e.spreadsheet.emit(Xl.GLOBAL_SELECTED,r.getActiveCells())}},e}return E(e,t),e.prototype.bindEvents=function(){this.bindKeyboardDown(),this.bindDataCellClick(),this.bindColCellClick(),this.bindKeyboardUp(),this.bindMouseMove()},e.prototype.reset=function(){this.isRangeSelection=!1,this.spreadsheet.interaction.removeIntercepts([gm.CLICK])},e.prototype.bindKeyboardDown=function(){var t=this;this.spreadsheet.on(Xl.GLOBAL_KEYBOARD_DOWN,(function(e){e.key===pm.SHIFT&&(t.isRangeSelection=!0,t.spreadsheet.interaction.addIntercepts([gm.CLICK]))}))},e.prototype.bindKeyboardUp=function(){var t=this;this.spreadsheet.on(Xl.GLOBAL_KEYBOARD_UP,(function(e){e.key===pm.SHIFT&&t.reset()}))},e.prototype.bindMouseMove=function(){var t=this;this.spreadsheet.on(Xl.GLOBAL_MOUSE_MOVE,(function(e){t.isRangeSelection&&!e.shiftKey&&t.reset()}))},e.prototype.bindColCellClick=function(){var t=this;this.spreadsheet.isTableMode()&&this.spreadsheet.on(Xl.ROW_CELL_CLICK,(function(e){t.handleColClick(e)})),this.spreadsheet.on(Xl.COL_CELL_CLICK,(function(e){t.handleColClick(e)}))},e.prototype.bindDataCellClick=function(){var t=this;this.spreadsheet.on(Xl.DATA_CELL_CLICK,(function(e){e.stopPropagation();var n=t.spreadsheet.getCell(e.target),r=n.getMeta(),i=t.spreadsheet.interaction;if(r){var o=t.spreadsheet.store.get("lastClickedCell");if(t.isRangeSelection&&(null==o?void 0:o.cellType)===n.cellType){var a=PS(o.getMeta(),n.getMeta()),s=a.start,l=a.end,u=vy(s.colIndex,l.colIndex+1).flatMap((function(e){var r=t.spreadsheet.facet.getColLeafNodes()[e].id;return vy(s.rowIndex,l.rowIndex+1).map((function(i){var o=t.spreadsheet.facet.getSeriesNumberWidth()||t.spreadsheet.isTableMode()?String(i):t.spreadsheet.facet.getRowLeafNodes()[i].id;return{id:"".concat(o,"-").concat(r),colIndex:e,rowIndex:i,type:n.cellType}}))}));i.addIntercepts([gm.CLICK,gm.HOVER]),i.changeState({cells:u,stateName:cm.SELECTED}),t.spreadsheet.showTooltipWithInfo(e,KS(t.spreadsheet)),t.spreadsheet.emit(Xl.GLOBAL_SELECTED,i.getActiveCells())}else t.spreadsheet.store.set("lastClickedCell",n)}}))},e.prototype.handleSeriesNumberRowSelected=function(t,e,n){var r=this.spreadsheet.facet.getColLeafNodes()[0].id;return vy(t,e+1).map((function(t){var e=String(t);return{id:"".concat(e,"-").concat(r),colIndex:0,rowIndex:t,type:n.cellType}}))},e.prototype.handleRowSelected=function(t,e,n){return this.spreadsheet.facet.getRowNodes().filter((function(n){return dg(n.rowIndex,t,e+1)})).map((function(t){return{id:t.id,colIndex:t.colIndex,rowIndex:t.rowIndex,type:n.cellType}}))},e.prototype.handleColSelected=function(t,e,n){return this.spreadsheet.facet.getColLeafNodes().filter((function(n){return dg(n.colIndex,t,e+1)})).map((function(t){return{id:t.id,colIndex:t.colIndex,rowIndex:t.rowIndex,type:n.cellType}}))},e}(l_),b_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.resizeStartPosition={},e}return E(e,t),e.prototype.bindEvents=function(){this.bindMouseDown(),this.bindMouseMove(),this.bindMouseUp()},e.prototype.initResizeGroup=function(){if(!this.resizeReferenceGroup){this.resizeReferenceGroup=this.spreadsheet.facet.foregroundGroup.appendChild(new ys);var t=this.spreadsheet.options,e=t.width,n=t.height,r=this.getResizeAreaTheme(),i=r.guideLineColor,o={path:"",lineDash:r.guideLineDash,stroke:i,lineWidth:r.size};this.resizeReferenceGroup.appendChild(new xs({id:"RESIZE_START_GUIDE_LINE",style:o})),this.resizeReferenceGroup.appendChild(new xs({id:"RESIZE_END_GUIDE_LINE",style:o})),this.resizeReferenceGroup.appendChild(new WC({id:"RESIZE_MASK",style:{x:0,y:0,width:e,height:n,fill:"transparent"}},{isResizeArea:!0,isResizeMask:!0}))}},e.prototype.getResizeAreaTheme=function(){return this.spreadsheet.theme.resizeArea},e.prototype.setResizeTarget=function(t){this.resizeTarget=t},e.prototype.getGuideLineWidthAndHeight=function(){var t=this.spreadsheet.options,e=t.width,n=t.height,r=this.spreadsheet.facet.panelBBox,i=r.maxY,o=r.maxX;return{width:Math.min(o,e),height:Math.min(i,n)}},e.prototype.getResizeShapes=function(){var t;return(null===(t=this.resizeReferenceGroup)||void 0===t?void 0:t.children)||[]},e.prototype.setResizeMaskCursor=function(t){var e=R(this.getResizeShapes(),3)[2];null==e||e.attr("cursor",t)},e.prototype.updateResizeGuideLinePosition=function(t,e){var n=this.getResizeShapes();if(!_g(n)){var r=R(n,2),i=r[0],o=r[1],a=e.type,s=e.offsetX,l=e.offsetY,u=e.width,c=e.height,h=e.size,d=this.getGuideLineWidthAndHeight(),f=d.width,p=d.height;this.cursorType="".concat(a,"-resize"),this.setResizeMaskCursor(this.cursorType);var v=h/2;if(a===Sm.Horizontal)return i.attr("path",[["M",s+v,l],["L",s+v,p]]),o.attr("path",[["M",s+u-v,l],["L",s+u-v,p]]),this.resizeStartPosition.offsetX=t.offsetX,void(this.resizeStartPosition.clientX=t.clientX);i.attr("path",[["M",s,l+v],["L",f,l+v]]),o.attr("path",[["M",s,l+c-v],["L",f,l+c-v]]),this.resizeStartPosition.offsetY=t.offsetY,this.resizeStartPosition.clientY=t.clientY}},e.prototype.bindMouseDown=function(){var t=this;this.spreadsheet.on(Xl.LAYOUT_RESIZE_MOUSE_DOWN,(function(e){var n=e.target,r=t.getCellAppendInfo(e.target);t.spreadsheet.store.set("resized",!1),(null==r?void 0:r.isResizeArea)&&(t.spreadsheet.hideTooltip(),t.spreadsheet.interaction.addIntercepts([gm.RESIZE]),t.setResizeTarget(n),t.showResizeGroup(),t.updateResizeGuideLinePosition(e,r))}))},e.prototype.bindMouseMove=function(){this.spreadsheet.on(Xl.LAYOUT_RESIZE_MOUSE_MOVE,Ly(this.resizeMouseMove.bind(this),33))},e.prototype.getResizeGuideLinePosition=function(){var t,e=R((null===(t=this.resizeReferenceGroup)||void 0===t?void 0:t.children)||[],2),n=e[0],r=e[1],i=(null==n?void 0:n.attr("path"))||[],o=(null==r?void 0:r.attr("path"))||[],a=R(i[0]||[],3),s=a[1],l=void 0===s?0:s,u=a[2],c=void 0===u?0:u,h=R(o[0]||[],3),d=h[1],f=void 0===d?0:d,p=h[2];return{start:{x:+l,y:+c},end:{x:+f,y:+(void 0===p?0:p)}}},e.prototype.getDisAllowResizeInfo=function(){var t,e=this.getResizeInfo(),n=this.spreadsheet.options.interaction.resize,r=e.width,i=e.height,o=e.resizedWidth,a=void 0===o?0:o,s=e.resizedHeight,l=void 0===s?0:s,u=null===(t=null==n?void 0:n.disable)||void 0===t?void 0:t.call(n,e);return{displayWidth:u?r:a,displayHeight:u?i:l,isDisabled:u}},e.prototype.getResizeCellField=function(t){var e,n,r,i,o,a=t.type===Sm.Vertical,s=a?!this.isEffectRowOf(Lm.ALL):!this.isEffectColOf(Lm.ALL);return this.spreadsheet.isTableMode()?a?(null===(e=null==t?void 0:t.meta)||void 0===e?void 0:e.rowId)||String(null===(n=null==t?void 0:t.meta)||void 0===n?void 0:n.rowIndex):null===(r=null==t?void 0:t.meta)||void 0===r?void 0:r.field:s?null===(i=null==t?void 0:t.meta)||void 0===i?void 0:i.id:null===(o=null==t?void 0:t.meta)||void 0===o?void 0:o.field},e.prototype.isEffectRowOf=function(t){var e,n;return(null===(n=null===(e=this.spreadsheet.options.interaction)||void 0===e?void 0:e.resize)||void 0===n?void 0:n.rowResizeType)===t},e.prototype.isEffectColOf=function(t){var e,n;return(null===(n=null===(e=this.spreadsheet.options.interaction)||void 0===e?void 0:e.resize)||void 0===n?void 0:n.colResizeType)===t},e.prototype.getCellStyleByField=function(t){var e,n=this,r=this.spreadsheet.interaction,i=this.getResizeInfo(),o=i.type===Sm.Vertical?r.getActiveRowCells():r.getActiveColCells(),a=r.isSelectedState()&&o.length>1;return this.isEffectRowOf(Lm.SELECTED)&&this.isEffectColOf(Lm.SELECTED)&&a?o.reduce((function(e,r){return QC.getAllLeaveNodes(r.getMeta()).forEach((function(r){var o=S(S({},i),{meta:r});e[n.getResizeCellField(o)]=t})),e}),{}):((e={})[this.getResizeCellField(i)]=t,e)},e.prototype.getResizeWidthDetail=function(){var t,e=this.getResizeInfo(),n=this.getDisAllowResizeInfo().displayWidth;switch(e.effect){case Tm.Field:return{eventType:Xl.LAYOUT_RESIZE_ROW_WIDTH,style:{rowCell:{widthByField:(t={},t[e.meta.field]=n,t)}}};case Tm.Tree:return{eventType:Xl.LAYOUT_RESIZE_TREE_WIDTH,style:{rowCell:{width:n}}};case Tm.Cell:return{eventType:Xl.LAYOUT_RESIZE_COL_WIDTH,style:{colCell:{width:this.isEffectColOf(Lm.ALL)?n:null,widthByField:this.getCellStyleByField(n)}}};case Tm.Series:return{eventType:Xl.LAYOUT_RESIZE_SERIES_WIDTH,seriesNumberWidth:n};default:return null}},e.prototype.getResizeHeightDetail=function(){var t=this.getResizeInfo(),e=this.getDisAllowResizeInfo().displayHeight;switch(t.effect){case Tm.Field:return{eventType:Xl.LAYOUT_RESIZE_COL_HEIGHT,style:{colCell:{heightByField:this.getHeightByField(t,e)}}};case Tm.Cell:return{eventType:Xl.LAYOUT_RESIZE_ROW_HEIGHT,style:{rowCell:{height:this.isEffectRowOf(Lm.ALL)?e:null,heightByField:this.getCellStyleByField(e)}}};default:return null}},e.prototype.getHeightByField=function(t,e){var n;return this.spreadsheet.isCustomColumnFields()||this.spreadsheet.isTableMode()?this.spreadsheet.facet.getColNodes().filter((function(e){var n,r;return e.level===(null===(n=t.meta)||void 0===n?void 0:n.level)&&e.height===(null===(r=t.meta)||void 0===r?void 0:r.height)})).reduce((function(t,n){return t[n.field]=e,t}),{}):((n={})[t.meta.field]=e,n)},e.prototype.getResizeDetail=function(){return this.getResizeInfo().type===Sm.Horizontal?this.getResizeWidthDetail():this.getResizeHeightDetail()},e.prototype.showResizeGroup=function(){var t;this.initResizeGroup(),null===(t=this.resizeReferenceGroup)||void 0===t||t.setAttribute("visibility","visible")},e.prototype.hideResizeGroup=function(){var t;null===(t=this.resizeReferenceGroup)||void 0===t||t.setAttribute("visibility","hidden")},e.prototype.bindMouseUp=function(){var t=this;this.spreadsheet.on(Xl.GLOBAL_MOUSE_UP,(function(){var e;t.cursorType="default",t.setResizeMaskCursor(t.cursorType),t.resizeReferenceGroup&&!_g(null===(e=t.resizeReferenceGroup)||void 0===e?void 0:e.children)&&(t.hideResizeGroup(),t.renderResizedResult())}))},e.prototype.resizeMouseMove=function(t){var e,n;if("visible"===(null===(e=this.resizeReferenceGroup)||void 0===e?void 0:e.parsedStyle.visibility)){var r=this.getResizeInfo(),i=(null===(n=this.resizeReferenceGroup)||void 0===n?void 0:n.children)||[];if(!_g(i)){var o=R(i,2)[1],a=R(vp(o.attr("path")),2),s=a[0],l=a[1];r.type===Sm.Horizontal?this.updateHorizontalResizingEndGuideLinePosition(t.offsetX,r,{start:s,end:l}):this.updateVerticalResizingEndGuideLinePosition(t.offsetY,r,{start:s,end:l}),this.updateResizeGuideLineTheme(o),o.attr("path",[s,l])}}},e.prototype.updateResizeGuideLineTheme=function(t){var e=this.getResizeAreaTheme(),n=e.guideLineColor,r=e.guideLineDisableColor,i=this.getDisAllowResizeInfo().isDisabled;t.attr("stroke",i?r:n),this.setResizeMaskCursor(i?"no-drop":this.cursorType)},e.prototype.updateHorizontalResizingEndGuideLinePosition=function(t,e,n){var r,i,o=((null===(r=this.spreadsheet.options.interaction)||void 0===r?void 0:r.resize)||{}).minCellWidth,a=void 0===o?20:o,s=t-this.resizeStartPosition.offsetX;e.width+s<a&&(s=-(e.width-a));var l=e.offsetX+e.width+s,u=e.size/2;n.start[1]=l-u,n.end[1]=l-u,null===(i=this.resizeTarget)||void 0===i||i.attr({x:l-e.size})},e.prototype.updateVerticalResizingEndGuideLinePosition=function(t,e,n){var r,i,o=((null===(r=this.spreadsheet.options.interaction)||void 0===r?void 0:r.resize)||{}).minCellHeight,a=void 0===o?20:o,s=t-this.resizeStartPosition.offsetY;e.height+s<a&&(s=-(e.height-a));var l=e.offsetY+e.height+s,u=e.size/2;n.start[2]=l-u,n.end[2]=l-u,null===(i=this.resizeTarget)||void 0===i||i.attr({y:l-e.size})},e.prototype.renderResizedResult=function(){var t=this.getResizeInfo(),e=this.getResizeDetail()||{},n=e.style,r=e.seriesNumberWidth,i=e.eventType,o={info:t,style:n};this.spreadsheet.emit(Xl.LAYOUT_RESIZE,o),this.spreadsheet.emit(i,o),n&&this.spreadsheet.setOptions({style:n}),r&&this.spreadsheet.setTheme({rowCell:{seriesNumberWidth:r}}),this.spreadsheet.store.set("resized",!0),this.render()},e.prototype.getResizeInfo=function(){var t=this.getCellAppendInfo(this.resizeTarget),e=this.getResizeGuideLinePosition(),n=e.start,r=e.end,i=pS(r.x-n.x+(t.type===Sm.Horizontal?t.size:0)),o=pS(r.y-n.y+(t.type===Sm.Vertical?t.size:0));return S(S({},t),{resizedWidth:i,resizedHeight:o})},e.prototype.render=function(){this.resizeStartPosition={},this.resizeTarget=null,this.resizeReferenceGroup=null,this.spreadsheet.render(!1)},e}(l_),E_=[pm.ARROW_LEFT,pm.ARROW_RIGHT,pm.ARROW_UP,pm.ARROW_DOWN],S_=function(t){function e(e){return t.call(this,e)||this}return E(e,t),e.prototype.isCanvasEffect=function(){return this.spreadsheet.interaction.eventController.isCanvasEffect},e.prototype.bindEvents=function(){var t=this;this.spreadsheet.on(Xl.GLOBAL_KEYBOARD_DOWN,(function(e){if(t.isCanvasEffect()){var n=e.shiftKey,r=e.metaKey,i=!1,o=!1,a=!1;E_.includes(e.key)&&(r&&n?(i=!1,o=!0,a=!1):r?(i=!0,o=!0,a=!0):n?(i=!1,o=!1,a=!1):(i=!0,o=!1,a=!0),t.handleMove({event:e,changeStartCell:i,isJumpMode:o,isSingleSelection:a}))}})),this.spreadsheet.on(Xl.DATA_CELL_CLICK,(function(e){var n=t.spreadsheet.getCell(e.target),r=null==n?void 0:n.getMeta();r&&(t.startCell=t.getCellMetaByViewMeta(r),t.endCell=t.startCell)}))},e.prototype.getCellMetaByViewMeta=function(t){return{rowIndex:t.rowIndex,colIndex:t.colIndex,id:t.id,type:hm.DATA_CELL}},e.prototype.handleMove=function(t){var e=t.event,n=t.changeStartCell,r=t.isJumpMode,i=t.isSingleSelection,o=this,a=o.spreadsheet,s=o.startCell,l=o.endCell,u=n?s:l,c=this.getMoveInfo(e.key,u,r);if(c){var h=R([c.row,c.col],2),d=h[0],f=h[1];this.scrollToActiveCell(a,d,f);var p=this.generateCellMeta(a,d,f),v=i?[p]:this.getRangeCells(a,s,p);!function(t,e){var n=t.interaction;n.changeState({stateName:cm.SELECTED,cells:e}),t.emit(Xl.GLOBAL_SELECTED,n.getActiveCells())}(a,v),n&&(this.startCell=p),this.endCell=p,this.spreadsheet.emit(Xl.DATA_CELL_SELECT_MOVE,v)}},e.prototype.generateCellMeta=function(t,e,n){var r=t.isTableMode,i=t.facet,o=i.getRowLeafNodes(),a=i.getColLeafNodes(),s=r()?String(e):o[e].id,l=a[n].id;return{rowIndex:e,colIndex:n,id:xx(s,l),type:hm.DATA_CELL}},e.prototype.getRangeCells=function(t,e,n){for(var r=PS(e,n),i=r.start,o=i.rowIndex,a=i.colIndex,s=r.end,l=s.rowIndex,u=s.colIndex,c=[],h=o;h<=l;h++)for(var d=a;d<=u;d++)c.push(this.generateCellMeta(t,h,d));return c},e.prototype.getMoveInfo=function(t,e,n){var r=this.spreadsheet,i=r.options.frozen,o=i.rowCount,a=void 0===o?0:o,s=i.trailingRowCount,l=void 0===s?0:s,u=i.colCount,c=void 0===u?0:u,h=i.trailingColCount,d=void 0===h?0:h,f=r.facet.getRowLeafNodes(),p=R([0+c,r.facet.getColLeafNodes().length-d-1],2),v=p[0],g=p[1],y=R([0+a,(r.isTableMode()?r.dataSet.getDisplayDataSet().length:f.length)-l-1],2),m=y[0],C=y[1];if(e)switch(t){case pm.ARROW_RIGHT:if(e.colIndex+1>g)return;return{row:e.rowIndex,col:n?g:e.colIndex+1};case pm.ARROW_LEFT:if(e.colIndex-1<v)return;return{row:e.rowIndex,col:n?v:e.colIndex-1};case pm.ARROW_UP:if(e.rowIndex-1<m)return;return{row:n?m:e.rowIndex-1,col:e.colIndex};case pm.ARROW_DOWN:if(e.rowIndex+1>C)return;return{row:n?C:e.rowIndex+1,col:e.colIndex}}},e.prototype.calculateOffset=function(t,e,n){var r=t.options.frozen,i=r.rowCount,o=void 0===i?0:i,a=r.trailingRowCount,s=void 0===a?0:a,l=t.facet,u=l.frozenColGroup,c=l.frozenTrailingColGroup,h=l.frozenRowGroup,d=l.frozenTrailingRowGroup,f=l.getColLeafNodes(),p=l.getScrollOffset(),v=p.scrollX,g=p.scrollY,y=l.panelBBox,m=y.viewportHeight,C=y.viewportWidth,w=Hh(t,"theme.splitLine"),x=u?pS(u.getBBox().width-w.verticalBorderWidth/2):0,b=c?pS(c.getBBox().width):0,E=h?pS(h.getBBox().height-w.horizontalBorderWidth/2):0,S=d?pS(d.getBBox().height):0,T=Gx({scrollX:v,scrollY:g,widths:l.viewCellWidths,heights:l.viewCellHeights,viewport:{width:C-x-b,height:m-E-S,x:x,y:E},rowRemainWidth:l.getRealScrollX(l.cornerBBox.width)}),L=-1,_=-1,M=f.find((function(t){return t.colIndex===n}));if(n<=T[0]?L=(null==M?void 0:M.x)-x:n>=T[1]&&n<f.length-s&&(L=(null==M?void 0:M.x)+(null==M?void 0:M.width)-C+b),e<=T[2])_=l.viewCellHeights.getCellOffsetY(e-o);else if(e>=T[3]){_=l.viewCellHeights.getCellOffsetY(e+1)+S-m}return{offsetX:L,offsetY:_}},e.prototype.scrollToActiveCell=function(t,e,n){var r=this.calculateOffset(t,e,n),i=r.offsetX,o=r.offsetY,a=t.facet,s=t.facet.getScrollOffset(),l=s.scrollX,u=s.scrollY;a.scrollWithAnimation({offsetX:{value:i>-1?i:l},offsetY:{value:o>-1?o:u}})},e}(l_),T_=function(){function t(t){var e=this;this.interactions=new Map,this.intercepts=new Set,this.hoverTimer=null,this.defaultState={cells:[],force:!1},this.onTriggerInteractionsResetEffect=function(){e.interactions.forEach((function(t){t.reset()}))},this.selectAll=function(){e.changeState({stateName:cm.ALL_SELECTED})},this.selectHeaderCell=function(t){var n;void 0===t&&(t={});var r=t.cell;if(!_g(r)){var i=null===(n=null==r?void 0:r.getMeta)||void 0===n?void 0:n.call(r);if(i&&!Og(null==i?void 0:i.x)){e.addIntercepts([gm.HOVER]);var o=e.spreadsheet.isHierarchyTreeType(),a=(null==r?void 0:r.cellType)===hm.COL_CELL,s=e.getState(),l=e.isSelectedCell(r),u=(null==t?void 0:t.isMultiSelection)&&e.isSelectedState(),c=l?[]:e.spreadsheet.facet.getCellChildrenNodes(r),h=l?[]:[AS(r)];if(u&&(h=mp((null==s?void 0:s.cells)||[],h),c=mp((null==s?void 0:s.nodes)||[],c),l&&(h=h.filter((function(t){return t.id!==i.id})),c=c.filter((function(t){return!(null==t?void 0:t.id.includes(i.id))})))),_g(h))return e.reset(),void e.spreadsheet.emit(Xl.GLOBAL_SELECTED,e.getActiveCells());if(!(Ny(h,"type").length>1)){var d=_g(c)?[r.getMeta()]:c;e.changeState({cells:h,nodes:d,stateName:cm.SELECTED});var f=h.map((function(t){return t.id}));return e.updateCells(e.spreadsheet.facet.getHeaderCells(f)),o&&!a||e.highlightNodes(c),e.spreadsheet.emit(Xl.GLOBAL_SELECTED,e.getActiveCells()),!0}}}},this.highlightNodes=function(t){void 0===t&&(t=[]),t.forEach((function(t){var e;null===(e=null==t?void 0:t.belongsCell)||void 0===e||e.updateByState(cm.SELECTED,t.belongsCell)}))},this.mergeCells=function(t,n){Nx(e.spreadsheet,t,n)},this.unmergeCell=function(t){Ix(e.spreadsheet,t)},this.spreadsheet=t,this.registerEventController(),this.registerInteractions(),window.addEventListener("visibilitychange",this.onTriggerInteractionsResetEffect)}return t.prototype.destroy=function(){this.interactions.clear(),this.intercepts.clear(),this.eventController.clear(),this.clearHoverTimer(),this.resetState(),window.removeEventListener("visibilitychange",this.onTriggerInteractionsResetEffect)},t.prototype.reset=function(){this.clearState(),this.clearHoverTimer(),this.intercepts.clear(),this.spreadsheet.hideTooltip()},t.prototype.setState=function(t){!function(t,e){var n=null==e?void 0:e.stateName;t.interaction.isEqualStateName(n)||(BS(t),t.hideTooltip(),t.store.set(Cm,e))}(this.spreadsheet,t)},t.prototype.getState=function(){return this.spreadsheet.store.get(Cm)||this.defaultState},t.prototype.setInteractedCells=function(t){var e=this.getInteractedCells().concat([t]),n=this.getState();n.interactedCells=e,this.setState(n)},t.prototype.getInteractedCells=function(){var t=this.getState();return(null==t?void 0:t.interactedCells)||[]},t.prototype.resetState=function(){this.spreadsheet.store.set(Cm,this.defaultState)},t.prototype.getCurrentStateName=function(){return this.getState().stateName},t.prototype.isEqualStateName=function(t){return this.getCurrentStateName()===t},t.prototype.isStateOf=function(t){var e=this.getState();return(null==e?void 0:e.stateName)===t},t.prototype.isSelectedState=function(){var t=this;return[cm.SELECTED,cm.ROW_CELL_BRUSH_SELECTED,cm.COL_CELL_BRUSH_SELECTED,cm.DATA_CELL_BRUSH_SELECTED].some((function(e){return t.isStateOf(e)}))},t.prototype.isAllSelectedState=function(){return this.isStateOf(cm.ALL_SELECTED)},t.prototype.isHoverFocusState=function(){return this.isStateOf(cm.HOVER_FOCUS)},t.prototype.isHoverState=function(){return this.isStateOf(cm.HOVER)},t.prototype.isActiveCell=function(t){return!!this.getCells().find((function(e){return t.getMeta().id===e.id}))},t.prototype.isSelectedCell=function(t){return this.isSelectedState()&&this.isActiveCell(t)},t.prototype.getCells=function(t){var e=this.getState(),n=(null==e?void 0:e.cells)||[];return Og(t)?n:n.filter((function(e){return t.includes(e.type)}))},t.prototype.getActiveCells=function(){var t,e=this.getCells().map((function(t){return t.id})),n=null===(t=this.spreadsheet.facet)||void 0===t?void 0:t.getCells();return Jv(e,(function(t){return Xv(n,(function(e){var n;return(null===(n=null==e?void 0:e.getMeta())||void 0===n?void 0:n.id)===t}))})).filter(Boolean)},t.prototype.getActiveDataCells=function(){return this.getActiveCells().filter((function(t){return t.cellType===hm.DATA_CELL}))},t.prototype.getActiveRowCells=function(){return this.getActiveCells().filter((function(t){return t.cellType===hm.ROW_CELL}))},t.prototype.getActiveColCells=function(){return this.getActiveCells().filter((function(t){return t.cellType===hm.COL_CELL}))},t.prototype.clearStyleIndependent=function(){(this.isSelectedState()||this.isHoverState()||this.isAllSelectedState())&&this.spreadsheet.facet.getDataCells().forEach((function(t){t.hideInteractionShape()}))},t.prototype.getUnSelectedDataCells=function(){var t=this;return this.spreadsheet.facet.getDataCells().filter((function(e){return!t.isActiveCell(e)}))},t.prototype.hideColumns=function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=!0),L(this,void 0,void 0,(function(){return _(this,(function(n){switch(n.label){case 0:return[4,ES(this.spreadsheet,t,e)];case 1:return n.sent(),[2]}}))}))},t.prototype.getBrushSelectionInfo=function(t){var e,n,r;return Eg(t)?{dataCellBrushSelection:t,rowCellBrushSelection:t,colCellBrushSelection:t}:{dataCellBrushSelection:null!==(e=null==t?void 0:t.dataCell)&&void 0!==e&&e,rowCellBrushSelection:null!==(n=null==t?void 0:t.rowCell)&&void 0!==n&&n,colCellBrushSelection:null!==(r=null==t?void 0:t.colCell)&&void 0!==r&&r}},t.prototype.getDefaultInteractions=function(){var t=this.spreadsheet.options.interaction,e=t.resize,n=t.brushSelection,r=t.multiSelection,i=t.rangeSelection,o=t.selectedCellMove,a=this.getBrushSelectionInfo(n),s=a.dataCellBrushSelection,l=a.rowCellBrushSelection,u=a.colCellBrushSelection;return[{key:um.CORNER_CELL_CLICK,interaction:f_},{key:um.DATA_CELL_CLICK,interaction:u_},{key:um.ROW_COLUMN_CLICK,interaction:h_},{key:um.ROW_TEXT_CLICK,interaction:d_},{key:um.MERGED_CELLS_CLICK,interaction:c_},{key:um.HOVER,interaction:p_,enable:!qC()},{key:um.DATA_CELL_BRUSH_SELECTION,interaction:y_,enable:!qC()&&s},{key:um.ROW_CELL_BRUSH_SELECTION,interaction:m_,enable:!qC()&&l},{key:um.COL_CELL_BRUSH_SELECTION,interaction:g_,enable:!qC()&&u},{key:um.COL_ROW_RESIZE,interaction:b_,enable:!qC()&&e},{key:um.DATA_CELL_MULTI_SELECTION,interaction:C_,enable:!qC()&&r},{key:um.RANGE_SELECTION,interaction:x_,enable:!qC()&&i},{key:um.SELECTED_CELL_MOVE,interaction:S_,enable:!qC()&&o}]},t.prototype.registerInteractions=function(){var t=this,e=this.spreadsheet.options.interaction.customInteractions;this.interactions.clear(),this.getDefaultInteractions().forEach((function(e){var n=e.key,r=e.interaction;!1!==e.enable&&t.interactions.set(n,new r(t.spreadsheet))})),_g(e)||kv(e,(function(e){var n=e.interaction;t.interactions.set(e.key,new n(t.spreadsheet))}))},t.prototype.registerEventController=function(){this.eventController=new w_(this.spreadsheet)},t.prototype.draw=function(){this.spreadsheet.container.render()},t.prototype.clearState=function(){BS(this.spreadsheet)&&this.draw()},t.prototype.changeState=function(t){var e=this,n=this.spreadsheet.interaction,r=t.cells,i=void 0===r?[]:r,o=t.force,a=t.stateName,s=t.onUpdateCells;if(_g(i)&&a===cm.SELECTED)o&&n.changeState({cells:[],stateName:cm.UNSELECTED});else{this.getCurrentStateName()===cm.ALL_SELECTED&&this.clearStyleIndependent(),this.clearState(),this.setState(t);var l=function(){e.updatePanelGroupAllDataCells()};s?s(this,l):l(),this.draw()}},t.prototype.updatePanelGroupAllDataCells=function(){this.updateCells(this.spreadsheet.facet.getDataCells())},t.prototype.updateCells=function(t){void 0===t&&(t=[]),t.forEach((function(t){t.update()}))},t.prototype.addIntercepts=function(t){var e=this;void 0===t&&(t=[]),t.forEach((function(t){e.intercepts.add(t)}))},t.prototype.hasIntercepts=function(t){var e=this;return void 0===t&&(t=[]),t.some((function(t){return e.intercepts.has(t)}))},t.prototype.removeIntercepts=function(t){var e=this;void 0===t&&(t=[]),t.forEach((function(t){e.intercepts.delete(t)}))},t.prototype.clearHoverTimer=function(){clearTimeout(this.hoverTimer)},t.prototype.setHoverTimer=function(t){this.hoverTimer=t},t.prototype.getHoverTimer=function(){return this.hoverTimer},t.prototype.getSelectedCellHighlight=function(){var t,e=this.spreadsheet.options.interaction.selectedCellHighlight;if(Eg(e))return{rowHeader:e,colHeader:e,currentRow:e,currentCol:e};var n=null!==(t=e)&&void 0!==t?t:{},r=n.rowHeader,i=void 0!==r&&r,o=n.colHeader,a=void 0!==o&&o,s=n.currentRow,l=void 0!==s&&s,u=n.currentCol;return{rowHeader:i,colHeader:a,currentRow:l,currentCol:void 0!==u&&u}},t.prototype.getHoverAfterScroll=function(){return this.spreadsheet.options.interaction.hoverAfterScroll},t.prototype.getHoverHighlight=function(){var t=this.spreadsheet.options.interaction.hoverHighlight;if(Eg(t))return{rowHeader:t,colHeader:t,currentRow:t,currentCol:t};var e=null!=t?t:{},n=e.rowHeader,r=void 0!==n&&n,i=e.colHeader,o=void 0!==i&&i,a=e.currentRow,s=void 0!==a&&a,l=e.currentCol;return{rowHeader:r,colHeader:o,currentRow:s,currentCol:void 0!==l&&l}},t.prototype.getBrushSelection=function(){var t=this.spreadsheet.options.interaction.brushSelection;if(Eg(t))return{dataCell:t,rowCell:t,colCell:t};var e=null!=t?t:{},n=e.dataCell,r=void 0!==n&&n,i=e.rowCell,o=void 0!==i&&i,a=e.colCell;return{dataCell:r,rowCell:o,colCell:void 0!==a&&a}},t.prototype.updateDataCellRelevantHeaderCells=function(t,e){this.updateDataCellRelevantColCells(t,e),this.updateDataCellRelevantRowCells(t,e)},t.prototype.updateDataCellRelevantRowCells=function(t,e){var n=e.rowId,r=this.spreadsheet,i=r.facet,o=r.interaction,a=t===cm.HOVER;if((a?o.getHoverHighlight():o.getSelectedCellHighlight()).rowHeader&&n){var s=a?yx(n,i.getRowCells(),this.spreadsheet.isHierarchyTreeType()):function(t,e){var n,r=e.facet,i=e.options;if(e.isTableMode()){if(!(null===(n=i.seriesNumber)||void 0===n?void 0:n.enable))return[];var o=r.getColLeafNodes()[0].id,a=xx(String(t.rowIndex),o),s=[],l=r.getCellById(a);return l&&l instanceof RS&&s.push(l),s}return yx(t.rowId,r.getRowCells(),e.isHierarchyTreeType())}(e,this.spreadsheet);kv(O(O([],R(i.getSeriesNumberCells().filter((function(t){return s.find((function(e){return e.getMeta().y===t.getMeta().y}))}))),!1),R(s),!1),(function(e){e.updateByState(t)}))}},t.prototype.updateDataCellRelevantColCells=function(t,e){var n=e.colId,r=this.spreadsheet,i=r.facet,o=r.interaction;(t===cm.HOVER?o.getHoverHighlight():o.getSelectedCellHighlight()).colHeader&&n&&function(t,e,n){t&&kv(yx(t,e),(function(t){t.updateByState(n)}))}(n,i.getColCells(),t)},t}(),L_=function(){function t(t){var e=this;this.viewport=window,this.isDevicePixelRatioChange=!1,this.init=function(){e.initDevicePixelRatioListener(),e.initDeviceZoomListener()},this.destroy=function(){e.removeDevicePixelRatioListener(),e.removeDeviceZoomListener()},this.removeDevicePixelRatioListener=function(){var t;(null===(t=e.devicePixelRatioMedia)||void 0===t?void 0:t.removeEventListener)?e.devicePixelRatioMedia.removeEventListener("change",e.renderByDevicePixelRatioChanged):e.devicePixelRatioMedia.removeListener(e.renderByDevicePixelRatioChanged)},this.initDeviceZoomListener=function(){var t,n;qC()||null===(n=null===(t=e.viewport)||void 0===t?void 0:t.visualViewport)||void 0===n||n.addEventListener("resize",e.renderByZoomScaleWithoutResizeEffect)},this.removeDeviceZoomListener=function(){var t,n;qC()||null===(n=null===(t=e.viewport)||void 0===t?void 0:t.visualViewport)||void 0===n||n.removeEventListener("resize",e.renderByZoomScaleWithoutResizeEffect)},this.renderByZoomScaleWithoutResizeEffect=function(t){e.isDevicePixelRatioChange=!1,e.renderByZoomScale(t)},this.renderByDevicePixelRatioChanged=function(){e.isDevicePixelRatioChange=!0,e.renderByDevicePixelRatio()},this.renderByDevicePixelRatio=function(t){void 0===t&&(t=window.devicePixelRatio);var n=e.spreadsheet,r=n.container,i=n.options,o=i.width,a=i.height,s=e.spreadsheet.getCanvasElement(),l=r.getConfig().devicePixelRatio;if(l!==t&&s){var u=Math.max(t,l,1);r.getConfig().devicePixelRatio=u,r.resize(o,a),e.spreadsheet.render(!1)}},this.renderByZoomScale=xv((function(t){var n,r=Math.ceil(null===(n=t.target)||void 0===n?void 0:n.scale);r>=1&&!e.isDevicePixelRatioChange&&e.renderByDevicePixelRatio(r)}),350),this.spreadsheet=t}return t.prototype.initDevicePixelRatioListener=function(){var t;this.devicePixelRatioMedia=window.matchMedia("(resolution: ".concat(window.devicePixelRatio,"dppx)")),(null===(t=this.devicePixelRatioMedia)||void 0===t?void 0:t.addEventListener)?this.devicePixelRatioMedia.addEventListener("change",this.renderByDevicePixelRatioChanged):this.devicePixelRatioMedia.addListener(this.renderByDevicePixelRatioChanged)},t}(),__=function(){function t(t){this.visible=!1,this.position={x:0,y:0},this.spreadsheet=t}return t.prototype.show=function(t){var e,n,r,i=t.position,o=t.content,a=t.event,s=this.spreadsheet.options.tooltip||{},l=s.autoAdjustBoundary,u=s.adjustPosition;this.visible=!0,this.options=t;var c=this.getContainer();this.renderContent(o);var h=function(t){var e=t.spreadsheet,n=t.position,r=t.tooltipContainer,i=t.autoAdjustBoundary,o=e.getCanvasElement(),a=n.x+LC,s=n.y+_C;if(!i||!o)return{x:a,y:s};var l="body"===i,u=e.facet.panelBBox,c=u.maxX,h=u.maxY,d=e.options,f=d.width,p=d.height,v=o.getBoundingClientRect(),g=v.top,y=v.left,m=r.getBoundingClientRect(),C=m.width,w=m.height,x=document.body.getBoundingClientRect(),b=x.width,E=x.height,S=l?b:Math.min(f,c)+y,T=l?E:Math.min(p,h)+g;return a+C>=S&&(a=S-C),s+w>=T&&(s=T-w),{x:a,y:s}}({spreadsheet:this.spreadsheet,position:i,tooltipContainer:c,autoAdjustBoundary:l}),d=h.x,f=h.y;this.position=null!==(e=null==u?void 0:u({position:{x:d,y:f},event:a}))&&void 0!==e?e:{x:d,y:f},GS(c,{style:{left:"".concat(null===(n=this.position)||void 0===n?void 0:n.x,"px"),top:"".concat(null===(r=this.position)||void 0===r?void 0:r.y,"px"),pointerEvents:"all"},visible:!0})},t.prototype.hide=function(){this.visible=!1,this.container&&(GS(this.container,{style:{pointerEvents:"none"},visible:!1}),this.resetPosition())},t.prototype.destroy=function(){var t,e;this.visible=!1,this.container&&(this.resetPosition(),null===(e=(t=this.container).remove)||void 0===e||e.call(t),this.container=null)},t.prototype.renderContent=function(t){var e,n,r,i;if(this.container){this.clearContent();var o=(this.spreadsheet.options.tooltip||{}).content,a=null!=t?t:o;if(!Og(a))return"string"==typeof a?(this.container.innerHTML=a,void(null===(n=(e=this.options).onMounted)||void 0===n||n.call(e))):void(a instanceof Element&&(this.container.appendChild(a),null===(i=(r=this.options).onMounted)||void 0===i||i.call(r)))}},t.prototype.clearContent=function(){this.container&&(this.container.innerHTML="")},t.prototype.disablePointerEvent=function(){this.container&&"none"!==this.container.style.pointerEvents&&GS(this.container,{style:{pointerEvents:"none"}})},t.prototype.resetPosition=function(){this.position={x:0,y:0}},t.prototype.getContainer=function(){var t;if(!this.container){var e=this.spreadsheet.options.tooltip,n=(null===(t=null==e?void 0:e.getContainer)||void 0===t?void 0:t.call(e))||document.body,r=document.createElement("div");return GS(r,{style:null==e?void 0:e.style,className:[EC].concat(null==e?void 0:e.className)}),n.appendChild(r),this.container=r,this.container}return this.container},t}();Qa.enableCSSParsing=!1;var M_=function(t){function e(e,n,r){var i=t.call(this)||this;return i.store=new XC,i.destroyed=!1,i.measureText=Oh((function(t,e){var n;if(void 0===t&&(t=""),!e)return null;var r=null===(n=i.getCanvasElement())||void 0===n?void 0:n.getContext("2d"),o=e,a=o.fontSize,s=o.fontFamily,l=o.fontWeight,u=o.fontStyle,c=o.fontVariant;return r.font=[u,c,l,"".concat(a,"px"),s].join(" ").trim(),r.measureText(String(t))}),(function(t,e){return O([t],R(vg(e)),!1).join("")})),i.measureTextWidth=function(t,e){void 0===t&&(t="");var n=i.measureText(t,e);return(null==n?void 0:n.width)||0},i.measureTextHeight=function(t,e){void 0===t&&(t="");var n=i.measureText(t,e);return n?n.actualBoundingBoxAscent+n.actualBoundingBoxDescent:0},i.measureTextWidthRoughly=function(t,e){var n,r;void 0===e&&(e={});var o=i.measureTextWidth("a",e),a=i.measureTextWidth("",e),s=0;if(!t)return s;try{for(var l=M(t),u=l.next();!u.done;u=l.next()){var c=u.value.charCodeAt(0);s+=c>=0&&c<=255?o:a}}catch(h){n={error:h}}finally{try{u&&!u.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}return s},i.dataCfg=FS(n),i.options=HS(r),i.dataSet=i.getDataSet(),i.setDebug(),i.initTooltip(),i.initContainer(e),i.bindEvents(),i.initInteraction(),i.initTheme(),i.initHdAdapter(),i.registerIcons(),i.setOverscrollBehavior(),i.mountSheetInstance(),i}return E(e,t),e.prototype.isCustomHeaderFields=function(t){var e=this.dataCfg.fields;return by(t?null==e?void 0:e[t]:O(O([],R(null==e?void 0:e.rows),!1),R(null==e?void 0:e.columns),!1),(function(t){return!pg(t)}))},e.prototype.isCustomColumnFields=function(){return this.isCustomHeaderFields("columns")},e.prototype.setOverscrollBehavior=function(){var t=this.options.interaction.overscrollBehavior,e=window.getComputedStyle(document.body).getPropertyValue("overscroll-behavior");e&&"auto"!==e?this.store.set("initOverscrollBehavior",e):t&&(document.body.style.overscrollBehavior=t)},e.prototype.restoreOverscrollBehavior=function(){document.body.style.overscrollBehavior=this.store.get("initOverscrollBehavior")||""},e.prototype.setDebug=function(){IC.getInstance().setDebug(this.options.debug)},e.prototype.initTheme=function(){this.setThemeCfg({name:"default"})},e.prototype.getMountContainer=function(t){var e=pg(t)?document.querySelector(t):t;if(!e)throw new Error("Target mount container is not a DOM element");return e},e.prototype.initHdAdapter=function(){this.options.hd&&(this.hdAdapter=new L_(this),this.hdAdapter.init())},e.prototype.initInteraction=function(){var t,e;null===(e=null===(t=this.interaction)||void 0===t?void 0:t.destroy)||void 0===e||e.call(t),this.interaction=new T_(this)},e.prototype.initTooltip=function(){var t,e,n,r;null===(e=null===(t=this.tooltip)||void 0===t?void 0:t.destroy)||void 0===e||e.call(t),this.tooltip=this.renderTooltip(),this.tooltip instanceof __||console.warn("[Custom Tooltip]: ".concat(null===(r=null===(n=this.tooltip)||void 0===n?void 0:n.constructor)||void 0===r?void 0:r.toString()," should be extends from BaseTooltip"))},e.prototype.renderTooltip=function(){var t,e;return(null===(e=null===(t=this.options.tooltip)||void 0===t?void 0:t.render)||void 0===e?void 0:e.call(t,this))||new __(this)},e.prototype.showTooltip=function(t){var e=this,n=t.content,r=t.event,i=this.getCell(null==r?void 0:r.target),o=Uu(n)?n(i,t):n;return new Promise((function(n){var r,i,a=S(S({},t),{content:o,onMounted:n});qC()?Mv((function(){var t,n;null===(n=(t=e.tooltip).show)||void 0===n||n.call(t,a)}),50):null===(i=(r=e.tooltip).show)||void 0===i||i.call(r,a)}))},e.prototype.showTooltipWithInfo=function(t,e,n){var r,i=ZS(this,t),o=i.enable,a=i.content;if(o){var s=this.getCell(null==t?void 0:t.target),l=null!==(r=null==n?void 0:n.data)&&void 0!==r?r:qS({spreadsheet:this,cellInfos:e,targetCell:s,options:S({enableFormat:!0},n)});return this.showTooltip({data:l,position:{x:t.clientX,y:t.clientY},options:n,event:t,content:a})}},e.prototype.hideTooltip=function(){var t,e;null===(e=(t=this.tooltip).hide)||void 0===e||e.call(t)},e.prototype.destroyTooltip=function(){var t,e;null===(e=(t=this.tooltip).destroy)||void 0===e||e.call(t)},e.prototype.registerIcons=function(){var t=this.options.customSVGIcons;_g(t)||kv(t,(function(t){kC(t.name,t.svg)}))},e.prototype.setDataCfg=function(t,e){this.store.set("originalDataCfg",t),this.dataCfg=e?FS(t):FS(this.dataCfg,t),this.store.set(im,om)},e.prototype.setOptions=function(t,e){var n;this.hideTooltip(),this.options=e?HS(t):DS(this.options,t),(e||(null===(n=null==t?void 0:t.tooltip)||void 0===n?void 0:n.render))&&this.initTooltip(),this.resetHiddenColumnsDetailInfoIfNeeded(),this.registerIcons()},e.prototype.resetDataCfg=function(){this.setDataCfg(null,!0)},e.prototype.resetOptions=function(){this.setOptions(null,!0)},e.prototype.resetHiddenColumnsDetailInfoIfNeeded=function(){var t;_g(null===(t=this.options.interaction)||void 0===t?void 0:t.hiddenColumnFields)||this.store.set("hiddenColumnsDetail",[])},e.prototype.doRender=function(t){return L(this,void 0,void 0,(function(){var e,n,r,i,o,a,s;return _(this,(function(l){switch(l.label){case 0:return this.getCanvasElement()&&window.document.body.contains(this.getCanvasElement())?(n=(e=t||{}).reloadData,r=void 0===n||n,i=e.reBuildDataSet,o=void 0!==i&&i,a=e.reBuildHiddenColumnsDetail,s=void 0===a||a,this.emit(Xl.LAYOUT_BEFORE_RENDER),o&&(this.dataSet=this.getDataSet()),r&&(this.clearDrillDownData("",!0),this.dataSet.setDataCfg(this.dataCfg)),this.buildFacet(),s?[4,this.initHiddenColumnsDetail()]:[3,2]):[2];case 1:l.sent(),l.label=2;case 2:return this.emit(Xl.LAYOUT_AFTER_RENDER),[2]}}))}))},e.prototype.render=function(t){return L(this,void 0,void 0,(function(){var e;return _(this,(function(n){switch(n.label){case 0:return this.destroyed?[2]:(e="boolean"==typeof t?{reloadData:t}:t,[4,this.container.ready]);case 1:return n.sent(),[4,this.doRender(e)];case 2:return n.sent(),[2]}}))}))},e.prototype.mountSheetInstance=function(){var t=this.getCanvasElement();t&&(t.__s2_instance__=this)},e.prototype.unmountSheetInstance=function(){var t=this.getCanvasElement();t&&delete t.__s2_instance__},e.prototype.destroy=function(){var t,e,n,r,i;this.destroyed||(this.destroyed=!0,this.restoreOverscrollBehavior(),this.emit(Xl.LAYOUT_DESTROY),null===(t=this.facet)||void 0===t||t.destroy(),null===(e=this.hdAdapter)||void 0===e||e.destroy(),null===(n=this.interaction)||void 0===n||n.destroy(),null===(r=this.store)||void 0===r||r.clear(),this.destroyTooltip(),this.clearCanvasEvent(),this.unmountSheetInstance(),null===(i=this.container)||void 0===i||i.destroy(),function(){var t;null===(t=document.getElementById("s2-offscreen-canvas"))||void 0===t||t.remove()}())},e.prototype.setThemeName=function(t){this.themeName=t},e.prototype.setThemeCfg=function(t){void 0===t&&(t={});var e=(null==t?void 0:t.theme)||{},n=$C(S(S({},t),{spreadsheet:this}));this.theme=DS(n,e),this.setThemeName(null==t?void 0:t.name),ZC(null==t?void 0:t.name)},e.prototype.setTheme=function(t){this.theme=DS(this.theme,t)},e.prototype.getTheme=function(){return this.theme},e.prototype.getThemeName=function(){return this.themeName},e.prototype.updatePagination=function(t){this.options=DS(this.options,{pagination:t}),this.facet.resetScrollOffset()},e.prototype.getContentHeight=function(){return this.facet.getContentHeight()},e.prototype.changeSheetSize=function(t,e){void 0===t&&(t=this.options.width),void 0===e&&(e=this.options.height);var n=this.getCanvasElement(),r=this.container.getConfig(),i=r.width,o=r.height;(t!==i||e!==o)&&n&&(this.options=DS(this.options,{width:t,height:e}),this.container.resize(t,e))},e.prototype.on=function(e,n){return t.prototype.on.call(this,e,n)},e.prototype.emit=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];t.prototype.emit.apply(this,O([e],R(n),!1))},e.prototype.getCanvas=function(){return this.container},e.prototype.getCanvasConfig=function(){return this.getCanvas().getConfig()},e.prototype.getCanvasElement=function(){return this.getCanvas().getContextService().getDomElement()},e.prototype.getLayoutWidthType=function(){var t;return null===(t=this.options.style)||void 0===t?void 0:t.layoutWidthType},e.prototype.updateScrollOffset=function(t){var e={offsetX:{value:void 0,animate:!1},offsetY:{value:void 0,animate:!1},rowHeaderOffsetX:{value:void 0,animate:!1}};this.facet.updateScrollOffset(DS(e,t))},e.prototype.isCellType=function(t){return t instanceof mx},e.prototype.getCell=function(t){for(var e=t;e&&!(e instanceof Fs);){if(this.isCellType(e))return e;e=null==e?void 0:e.parentNode}return null},e.prototype.getCellType=function(t){var e=this.getCell(t);return null==e?void 0:e.cellType},e.prototype.getTotalsConfig=function(t){var e=Hh(this.options.totals,yg(this.dataSet.fields.rows,t)?"row":"col",{}),n=!(!e.showSubTotals||!yg(e.subTotalsDimensions,t))&&e.showSubTotals;return S(S({grandTotalsLabel:Fy(""),subTotalsLabel:Fy(""),grandTotalsGroupDimensions:[],subTotalsGroupDimensions:[]},e),{showSubTotals:n})},e.prototype.initContainer=function(t){var e=this.options,n=e.width,r=e.height,i=e.transformCanvasConfig,o=new s_,a=null==i?void 0:i(o,this);this.container=new Fs(S({container:this.getMountContainer(t),width:n,height:r,renderer:o},a)),this.updateContainerStyle()},e.prototype.updateContainerStyle=function(){var t=this.getCanvasElement();t&&(t.style.display="block")},e.prototype.initHiddenColumnsDetail=function(){return L(this,void 0,void 0,(function(){var t,e;return _(this,(function(n){switch(n.label){case 0:return t=this.options.interaction.hiddenColumnFields,e=this.store.get("hiddenColumnsDetail"),_g(t)&&_g(e)?[2]:[4,ES(this,t,!0)];case 1:return n.sent(),[2]}}))}))},e.prototype.clearCanvasEvent=function(){var t=this;!function(t,e){null==t||dv(t,Pv(e),vh)}(this.getEvents(),(function(e,n){t.off(n)}))},e.prototype.updateSortMethodMap=function(t,e,n){var r;void 0===n&&(n=!1);var i=n?null:this.store.get("sortMethodMap");this.store.set("sortMethodMap",S(S({},i),((r={})[t]=e,r)))},e.prototype.getMenuDefaultSelectedKeys=function(t){var e=Hh(this.store.get("sortMethodMap"),t);return e?[e]:[]},e.prototype.handleGroupSort=function(t,e){var n=this;t.stopPropagation(),this.interaction.addIntercepts([gm.HOVER]);var r={menu:{defaultSelectedKeys:this.getMenuDefaultSelectedKeys(null==e?void 0:e.id),items:this.isTableMode()?[{key:"asc",icon:"groupAsc",label:Fy("")},{key:"desc",icon:"groupDesc",label:Fy("")},{key:"none",label:Fy("")}]:[{key:"asc",icon:"groupAsc",label:Fy("")},{key:"desc",icon:"groupDesc",label:Fy("")},{key:"none",label:Fy("")}],onClick:function(r){var i=r.key;n.groupSortByMethod(i,e),n.emit(Xl.RANGE_SORTED,t)}}};this.showTooltipWithInfo(t,[],{operator:r,onlyShowOperator:!0,forceRender:!0})},e}($T),R_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return E(e,t),e.prototype.isCustomRowFields=function(){return this.isCustomHeaderFields("rows")},e.prototype.getDataSet=function(){var t=this.options.dataSet;return t?t(this):this.isCustomRowFields()?new eT(this):new JS(this)},e.prototype.enableFrozenHeaders=function(){return!1},e.prototype.getContentHeight=function(){return this.facet.getContentHeight()},e.prototype.isPivotMode=function(){return!0},e.prototype.isTableMode=function(){return!1},e.prototype.isHierarchyTreeType=function(){return"tree"===this.options.hierarchyType},e.prototype.isFrozenRowHeader=function(){var t,e;return!!(null===(e=null===(t=this.options)||void 0===t?void 0:t.frozen)||void 0===e?void 0:e.rowHeader)},e.prototype.isValueInCols=function(){var t,e;return null===(e=null===(t=this.dataSet)||void 0===t?void 0:t.fields)||void 0===e?void 0:e.valueInCols},e.prototype.clearDrillDownData=function(t,e){this.dataSet instanceof JS&&(this.dataSet.clearDrillDownData(t)&&!e&&(this.interaction.reset(),this.render(!1)))},e.prototype.buildFacet=function(){var t,e,n,r,i,o,a=this;null!==(t=(o=this.options).dataCell)&&void 0!==t||(o.dataCell=function(t){return new Sx(t,a)}),null===(e=this.facet)||void 0===e||e.destroy(),this.facet=null!==(i=null===(r=(n=this.options).facet)||void 0===r?void 0:r.call(n,this))&&void 0!==i?i:new cL(this),this.facet.render()},e.prototype.bindEvents=function(){this.off(Xl.ROW_CELL_COLLAPSED__PRIVATE),this.off(Xl.ROW_CELL_ALL_COLLAPSED__PRIVATE),this.on(Xl.ROW_CELL_COLLAPSED__PRIVATE,this.handleRowCellCollapsed),this.on(Xl.ROW_CELL_ALL_COLLAPSED__PRIVATE,this.handleRowCellToggleCollapseAll)},e.prototype.handleRowCellCollapsed=function(t){var e,n,r=t.isCollapsed,i=t.node,o=(null===(n=this.options.style)||void 0===n?void 0:n.rowCell).collapseFields,a=S(S({},o),((e={})[i.id]=r,e));this.setOptions({style:{rowCell:{collapseFields:a}}}),this.render(!1),this.emit(Xl.ROW_CELL_COLLAPSED,{isCollapsed:r,collapseFields:a,node:i})},e.prototype.handleRowCellToggleCollapseAll=function(t){var e=!t;this.setOptions({style:{rowCell:{collapseAll:e,collapseFields:null,expandDepth:null}}}),this.render(!1),this.emit(Xl.ROW_CELL_ALL_COLLAPSED,e)},e.prototype.groupSortByMethod=function(t,e){var n,r=this.dataCfg.fields,i=r.rows,o=r.columns,a=this.options.style.colCell.hideValue,s=this.isValueInCols()?Iv(i):Iv(o),l=e.query,u=e.value,c=vp(l),h=u;a&&this.isValueInCols()&&(h=this.dataSet.fields.values[0],c[Kl]=h);var d={sortFieldId:pg(s)?s:s.field,sortMethod:t,sortByMeasure:h,query:c},f=null===(n=this.dataCfg.sortParams)||void 0===n?void 0:n.filter((function(t){return(null==t?void 0:t.sortFieldId)!==s}));this.updateSortMethodMap(e.id,t,!0);var p=O(O([],R(f),!1),[d],!1);this.emit(Xl.RANGE_SORT,p),this.setDataCfg(S(S({},this.dataCfg),{sortParams:p})),this.render()},e}(M_);!function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.groupSortByMethod=function(t,n){var r={sortFieldId:n.field,sortMethod:t};e.updateSortMethodMap(n.id,t),e.emit(Xl.RANGE_SORT,[r])},e}E(e,t),e.prototype.isCustomRowFields=function(){return!1},e.prototype.getDataSet=function(){var t=this.options.dataSet;return t?t(this):new nT(this)},e.prototype.enableFrozenHeaders=function(){var t=this.options.frozen,e=t.rowCount,n=void 0===e?0:e,r=t.trailingRowCount,i=void 0===r?0:r,o=t.colCount,a=void 0===o?0:o,s=t.trailingColCount;return n>0||i>0||a>0||(void 0===s?0:s)>0},e.prototype.isPivotMode=function(){return!1},e.prototype.isTableMode=function(){return!0},e.prototype.isHierarchyTreeType=function(){return!1},e.prototype.isFrozenRowHeader=function(){return!1},e.prototype.clearDrillDownData=function(){},e.prototype.isValueInCols=function(){return!1},e.prototype.bindEvents=function(){},e.prototype.buildFacet=function(){var t,e,n,r,i,o,a=this;null!==(t=(o=this.options).dataCell)&&void 0!==t||(o.dataCell=function(t){var e;return(null===(e=a.options.seriesNumber)||void 0===e?void 0:e.enable)&&0===t.colIndex?new RS(t,a):new MS(t,a)}),null===(e=this.facet)||void 0===e||e.destroy(),this.facet=null!==(i=null===(r=(n=this.options).facet)||void 0===r?void 0:r.call(n,this))&&void 0!==i?i:new fL(this),this.facet.render()},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.off(Xl.RANGE_SORT),this.off(Xl.RANGE_FILTER)}}(M_);var O_={exports:{}};
/**
       * @license
       * Lodash <https://lodash.com/>
       * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
       * Released under MIT license <https://lodash.com/license>
       * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
       * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
       */!function(t,e){(function(){var n,r="Expected a function",i="__lodash_hash_undefined__",a="__lodash_placeholder__",s=16,l=32,u=64,c=128,d=256,f=1/0,p=9007199254740991,v=NaN,g=4294967295,y=[["ary",c],["bind",1],["bindKey",2],["curry",8],["curryRight",s],["flip",512],["partial",l],["partialRight",u],["rearg",d]],m="[object Arguments]",C="[object Array]",w="[object Boolean]",x="[object Date]",b="[object Error]",E="[object Function]",S="[object GeneratorFunction]",T="[object Map]",L="[object Number]",_="[object Object]",M="[object Promise]",R="[object RegExp]",O="[object Set]",N="[object String]",I="[object Symbol]",A="[object WeakMap]",P="[object ArrayBuffer]",k="[object DataView]",B="[object Float32Array]",D="[object Float64Array]",F="[object Int8Array]",H="[object Int16Array]",z="[object Int32Array]",G="[object Uint8Array]",W="[object Uint8ClampedArray]",V="[object Uint16Array]",U="[object Uint32Array]",j=/\b__p \+= '';/g,Y=/\b(__p \+=) '' \+/g,X=/(__e\(.*?\)|\b__t\)) \+\n'';/g,q=/&(?:amp|lt|gt|quot|#39);/g,K=/[&<>"']/g,Z=RegExp(q.source),$=RegExp(K.source),Q=/<%-([\s\S]+?)%>/g,J=/<%([\s\S]+?)%>/g,tt=/<%=([\s\S]+?)%>/g,et=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,nt=/^\w*$/,rt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,it=/[\\^$.*+?()[\]{}|]/g,ot=RegExp(it.source),at=/^\s+/,st=/\s/,lt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ut=/\{\n\/\* \[wrapped with (.+)\] \*/,ct=/,? & /,ht=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,dt=/[()=,{}\[\]\/\s]/,ft=/\\(\\)?/g,pt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,vt=/\w*$/,gt=/^[-+]0x[0-9a-f]+$/i,yt=/^0b[01]+$/i,mt=/^\[object .+?Constructor\]$/,Ct=/^0o[0-7]+$/i,wt=/^(?:0|[1-9]\d*)$/,xt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,bt=/($^)/,Et=/['\n\r\u2028\u2029\\]/g,St="\\ud800-\\udfff",Tt="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Lt="\\u2700-\\u27bf",_t="a-z\\xdf-\\xf6\\xf8-\\xff",Mt="A-Z\\xc0-\\xd6\\xd8-\\xde",Rt="\\ufe0e\\ufe0f",Ot="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Nt="[']",It="["+St+"]",At="["+Ot+"]",Pt="["+Tt+"]",kt="\\d+",Bt="["+Lt+"]",Dt="["+_t+"]",Ft="[^"+St+Ot+kt+Lt+_t+Mt+"]",Ht="\\ud83c[\\udffb-\\udfff]",zt="[^"+St+"]",Gt="(?:\\ud83c[\\udde6-\\uddff]){2}",Wt="[\\ud800-\\udbff][\\udc00-\\udfff]",Vt="["+Mt+"]",Ut="\\u200d",jt="(?:"+Dt+"|"+Ft+")",Yt="(?:"+Vt+"|"+Ft+")",Xt="(?:['](?:d|ll|m|re|s|t|ve))?",qt="(?:['](?:D|LL|M|RE|S|T|VE))?",Kt="(?:"+Pt+"|"+Ht+")"+"?",Zt="["+Rt+"]?",$t=Zt+Kt+("(?:"+Ut+"(?:"+[zt,Gt,Wt].join("|")+")"+Zt+Kt+")*"),Qt="(?:"+[Bt,Gt,Wt].join("|")+")"+$t,Jt="(?:"+[zt+Pt+"?",Pt,Gt,Wt,It].join("|")+")",te=RegExp(Nt,"g"),ee=RegExp(Pt,"g"),ne=RegExp(Ht+"(?="+Ht+")|"+Jt+$t,"g"),re=RegExp([Vt+"?"+Dt+"+"+Xt+"(?="+[At,Vt,"$"].join("|")+")",Yt+"+"+qt+"(?="+[At,Vt+jt,"$"].join("|")+")",Vt+"?"+jt+"+"+Xt,Vt+"+"+qt,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",kt,Qt].join("|"),"g"),ie=RegExp("["+Ut+St+Tt+Rt+"]"),oe=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ae=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],se=-1,le={};le[B]=le[D]=le[F]=le[H]=le[z]=le[G]=le[W]=le[V]=le[U]=!0,le[m]=le[C]=le[P]=le[w]=le[k]=le[x]=le[b]=le[E]=le[T]=le[L]=le[_]=le[R]=le[O]=le[N]=le[A]=!1;var ue={};ue[m]=ue[C]=ue[P]=ue[k]=ue[w]=ue[x]=ue[B]=ue[D]=ue[F]=ue[H]=ue[z]=ue[T]=ue[L]=ue[_]=ue[R]=ue[O]=ue[N]=ue[I]=ue[G]=ue[W]=ue[V]=ue[U]=!0,ue[b]=ue[E]=ue[A]=!1;var ce={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},he=parseFloat,de=parseInt,fe="object"==h(o)&&o&&o.Object===Object&&o,pe="object"==("undefined"==typeof self?"undefined":h(self))&&self&&self.Object===Object&&self,ve=fe||pe||Function("return this")(),ge=e&&!e.nodeType&&e,ye=ge&&t&&!t.nodeType&&t,me=ye&&ye.exports===ge,Ce=me&&fe.process,we=function(){try{var t=ye&&ye.require&&ye.require("util").types;return t||Ce&&Ce.binding&&Ce.binding("util")}catch(e){}}(),xe=we&&we.isArrayBuffer,be=we&&we.isDate,Ee=we&&we.isMap,Se=we&&we.isRegExp,Te=we&&we.isSet,Le=we&&we.isTypedArray;function _e(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function Me(t,e,n,r){for(var i=-1,o=null==t?0:t.length;++i<o;){var a=t[i];e(r,a,n(a),t)}return r}function Re(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}function Oe(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function Ne(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function Ie(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}function Ae(t,e){return!!(null==t?0:t.length)&&Ve(t,e,0)>-1}function Pe(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}function ke(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function Be(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function De(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function Fe(t,e,n,r){var i=null==t?0:t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function He(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var ze=Xe("length");function Ge(t,e,n){var r;return n(t,(function(t,n,i){if(e(t,n,i))return r=n,!1})),r}function We(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}function Ve(t,e,n){return e==e?function(t,e,n){var r=n-1,i=t.length;for(;++r<i;)if(t[r]===e)return r;return-1}(t,e,n):We(t,je,n)}function Ue(t,e,n,r){for(var i=n-1,o=t.length;++i<o;)if(r(t[i],e))return i;return-1}function je(t){return t!=t}function Ye(t,e){var n=null==t?0:t.length;return n?Ze(t,e)/n:v}function Xe(t){return function(e){return null==e?n:e[t]}}function qe(t){return function(e){return null==t?n:t[e]}}function Ke(t,e,n,r,i){return i(t,(function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)})),n}function Ze(t,e){for(var r,i=-1,o=t.length;++i<o;){var a=e(t[i]);a!==n&&(r=r===n?a:r+a)}return r}function $e(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function Qe(t){return t?t.slice(0,gn(t)+1).replace(at,""):t}function Je(t){return function(e){return t(e)}}function tn(t,e){return ke(e,(function(e){return t[e]}))}function en(t,e){return t.has(e)}function nn(t,e){for(var n=-1,r=t.length;++n<r&&Ve(e,t[n],0)>-1;);return n}function rn(t,e){for(var n=t.length;n--&&Ve(e,t[n],0)>-1;);return n}var on=qe({"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss","":"A","":"A","":"A","":"a","":"a","":"a","":"C","":"C","":"C","":"C","":"c","":"c","":"c","":"c","":"D","":"D","":"d","":"d","":"E","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"e","":"G","":"G","":"G","":"G","":"g","":"g","":"g","":"g","":"H","":"H","":"h","":"h","":"I","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"i","":"J","":"j","":"K","":"k","":"k","":"L","":"L","":"L","":"L","":"L","":"l","":"l","":"l","":"l","":"l","":"N","":"N","":"N","":"N","":"n","":"n","":"n","":"n","":"O","":"O","":"O","":"o","":"o","":"o","":"R","":"R","":"R","":"r","":"r","":"r","":"S","":"S","":"S","":"S","":"s","":"s","":"s","":"s","":"T","":"T","":"T","":"t","":"t","":"t","":"U","":"U","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"u","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"Z","":"Z","":"z","":"z","":"z","":"IJ","":"ij","":"Oe","":"oe","":"'n","":"s"}),an=qe({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function sn(t){return"\\"+ce[t]}function ln(t){return ie.test(t)}function un(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function cn(t,e){return function(n){return t(e(n))}}function hn(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var s=t[n];s!==e&&s!==a||(t[n]=a,o[i++]=n)}return o}function dn(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}function fn(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=[t,t]})),n}function pn(t){return ln(t)?function(t){var e=ne.lastIndex=0;for(;ne.test(t);)++e;return e}(t):ze(t)}function vn(t){return ln(t)?function(t){return t.match(ne)||[]}(t):function(t){return t.split("")}(t)}function gn(t){for(var e=t.length;e--&&st.test(t.charAt(e)););return e}var yn=qe({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var mn=function t(e){var o=(e=null==e?ve:mn.defaults(ve.Object(),e,mn.pick(ve,ae))).Array,st=e.Date,St=e.Error,Tt=e.Function,Lt=e.Math,_t=e.Object,Mt=e.RegExp,Rt=e.String,Ot=e.TypeError,Nt=o.prototype,It=Tt.prototype,At=_t.prototype,Pt=e["__core-js_shared__"],kt=It.toString,Bt=At.hasOwnProperty,Dt=0,Ft=function(){var t=/[^.]+$/.exec(Pt&&Pt.keys&&Pt.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),Ht=At.toString,zt=kt.call(_t),Gt=ve._,Wt=Mt("^"+kt.call(Bt).replace(it,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Vt=me?e.Buffer:n,Ut=e.Symbol,jt=e.Uint8Array,Yt=Vt?Vt.allocUnsafe:n,Xt=cn(_t.getPrototypeOf,_t),qt=_t.create,Kt=At.propertyIsEnumerable,Zt=Nt.splice,$t=Ut?Ut.isConcatSpreadable:n,Qt=Ut?Ut.iterator:n,Jt=Ut?Ut.toStringTag:n,ne=function(){try{var t=fo(_t,"defineProperty");return t({},"",{}),t}catch(e){}}(),ie=e.clearTimeout!==ve.clearTimeout&&e.clearTimeout,ce=st&&st.now!==ve.Date.now&&st.now,fe=e.setTimeout!==ve.setTimeout&&e.setTimeout,pe=Lt.ceil,ge=Lt.floor,ye=_t.getOwnPropertySymbols,Ce=Vt?Vt.isBuffer:n,we=e.isFinite,ze=Nt.join,qe=cn(_t.keys,_t),Cn=Lt.max,wn=Lt.min,xn=st.now,bn=e.parseInt,En=Lt.random,Sn=Nt.reverse,Tn=fo(e,"DataView"),Ln=fo(e,"Map"),_n=fo(e,"Promise"),Mn=fo(e,"Set"),Rn=fo(e,"WeakMap"),On=fo(_t,"create"),Nn=Rn&&new Rn,In={},An=Ho(Tn),Pn=Ho(Ln),kn=Ho(_n),Bn=Ho(Mn),Dn=Ho(Rn),Fn=Ut?Ut.prototype:n,Hn=Fn?Fn.valueOf:n,zn=Fn?Fn.toString:n;function Gn(t){if(ns(t)&&!ja(t)&&!(t instanceof jn)){if(t instanceof Un)return t;if(Bt.call(t,"__wrapped__"))return zo(t)}return new Un(t)}var Wn=function(){function t(){}return function(e){if(!es(e))return{};if(qt)return qt(e);t.prototype=e;var r=new t;return t.prototype=n,r}}();function Vn(){}function Un(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=n}function jn(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=g,this.__views__=[]}function Yn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Xn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function qn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Kn(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new qn;++e<n;)this.add(t[e])}function Zn(t){var e=this.__data__=new Xn(t);this.size=e.size}function $n(t,e){var n=ja(t),r=!n&&Ua(t),i=!n&&!r&&Ka(t),o=!n&&!r&&!i&&cs(t),a=n||r||i||o,s=a?$e(t.length,Rt):[],l=s.length;for(var u in t)!e&&!Bt.call(t,u)||a&&("length"==u||i&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||wo(u,l))||s.push(u);return s}function Qn(t){var e=t.length;return e?t[Kr(0,e-1)]:n}function Jn(t,e){return Bo(Oi(t),lr(e,0,t.length))}function tr(t){return Bo(Oi(t))}function er(t,e,r){(r!==n&&!Ga(t[e],r)||r===n&&!(e in t))&&ar(t,e,r)}function nr(t,e,r){var i=t[e];Bt.call(t,e)&&Ga(i,r)&&(r!==n||e in t)||ar(t,e,r)}function rr(t,e){for(var n=t.length;n--;)if(Ga(t[n][0],e))return n;return-1}function ir(t,e,n,r){return fr(t,(function(t,i,o){e(r,t,n(t),o)})),r}function or(t,e){return t&&Ni(e,Is(e),t)}function ar(t,e,n){"__proto__"==e&&ne?ne(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function sr(t,e){for(var r=-1,i=e.length,a=o(i),s=null==t;++r<i;)a[r]=s?n:_s(t,e[r]);return a}function lr(t,e,r){return t==t&&(r!==n&&(t=t<=r?t:r),e!==n&&(t=t>=e?t:e)),t}function ur(t,e,r,i,o,a){var s,l=1&e,u=2&e,c=4&e;if(r&&(s=o?r(t,i,o,a):r(t)),s!==n)return s;if(!es(t))return t;var h=ja(t);if(h){if(s=function(t){var e=t.length,n=new t.constructor(e);e&&"string"==typeof t[0]&&Bt.call(t,"index")&&(n.index=t.index,n.input=t.input);return n}(t),!l)return Oi(t,s)}else{var d=go(t),f=d==E||d==S;if(Ka(t))return Si(t,l);if(d==_||d==m||f&&!o){if(s=u||f?{}:mo(t),!l)return u?function(t,e){return Ni(t,vo(t),e)}(t,function(t,e){return t&&Ni(e,As(e),t)}(s,t)):function(t,e){return Ni(t,po(t),e)}(t,or(s,t))}else{if(!ue[d])return o?t:{};s=function(t,e,n){var r=t.constructor;switch(e){case P:return Ti(t);case w:case x:return new r(+t);case k:return function(t,e){var n=e?Ti(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case B:case D:case F:case H:case z:case G:case W:case V:case U:return Li(t,n);case T:return new r;case L:case N:return new r(t);case R:return function(t){var e=new t.constructor(t.source,vt.exec(t));return e.lastIndex=t.lastIndex,e}(t);case O:return new r;case I:return i=t,Hn?_t(Hn.call(i)):{}}var i}(t,d,l)}}a||(a=new Zn);var p=a.get(t);if(p)return p;a.set(t,s),ss(t)?t.forEach((function(n){s.add(ur(n,e,r,n,t,a))})):rs(t)&&t.forEach((function(n,i){s.set(i,ur(n,e,r,i,t,a))}));var v=h?n:(c?u?oo:io:u?As:Is)(t);return Re(v||t,(function(n,i){v&&(n=t[i=n]),nr(s,i,ur(n,e,r,i,t,a))})),s}function cr(t,e,r){var i=r.length;if(null==t)return!i;for(t=_t(t);i--;){var o=r[i],a=e[o],s=t[o];if(s===n&&!(o in t)||!a(s))return!1}return!0}function hr(t,e,i){if("function"!=typeof t)throw new Ot(r);return Io((function(){t.apply(n,i)}),e)}function dr(t,e,n,r){var i=-1,o=Ae,a=!0,s=t.length,l=[],u=e.length;if(!s)return l;n&&(e=ke(e,Je(n))),r?(o=Pe,a=!1):e.length>=200&&(o=en,a=!1,e=new Kn(e));t:for(;++i<s;){var c=t[i],h=null==n?c:n(c);if(c=r||0!==c?c:0,a&&h==h){for(var d=u;d--;)if(e[d]===h)continue t;l.push(c)}else o(e,h,r)||l.push(c)}return l}Gn.templateSettings={escape:Q,evaluate:J,interpolate:tt,variable:"",imports:{_:Gn}},Gn.prototype=Vn.prototype,Gn.prototype.constructor=Gn,Un.prototype=Wn(Vn.prototype),Un.prototype.constructor=Un,jn.prototype=Wn(Vn.prototype),jn.prototype.constructor=jn,Yn.prototype.clear=function(){this.__data__=On?On(null):{},this.size=0},Yn.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Yn.prototype.get=function(t){var e=this.__data__;if(On){var r=e[t];return r===i?n:r}return Bt.call(e,t)?e[t]:n},Yn.prototype.has=function(t){var e=this.__data__;return On?e[t]!==n:Bt.call(e,t)},Yn.prototype.set=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=On&&e===n?i:e,this},Xn.prototype.clear=function(){this.__data__=[],this.size=0},Xn.prototype.delete=function(t){var e=this.__data__,n=rr(e,t);return!(n<0)&&(n==e.length-1?e.pop():Zt.call(e,n,1),--this.size,!0)},Xn.prototype.get=function(t){var e=this.__data__,r=rr(e,t);return r<0?n:e[r][1]},Xn.prototype.has=function(t){return rr(this.__data__,t)>-1},Xn.prototype.set=function(t,e){var n=this.__data__,r=rr(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},qn.prototype.clear=function(){this.size=0,this.__data__={hash:new Yn,map:new(Ln||Xn),string:new Yn}},qn.prototype.delete=function(t){var e=co(this,t).delete(t);return this.size-=e?1:0,e},qn.prototype.get=function(t){return co(this,t).get(t)},qn.prototype.has=function(t){return co(this,t).has(t)},qn.prototype.set=function(t,e){var n=co(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},Kn.prototype.add=Kn.prototype.push=function(t){return this.__data__.set(t,i),this},Kn.prototype.has=function(t){return this.__data__.has(t)},Zn.prototype.clear=function(){this.__data__=new Xn,this.size=0},Zn.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},Zn.prototype.get=function(t){return this.__data__.get(t)},Zn.prototype.has=function(t){return this.__data__.has(t)},Zn.prototype.set=function(t,e){var n=this.__data__;if(n instanceof Xn){var r=n.__data__;if(!Ln||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new qn(r)}return n.set(t,e),this.size=n.size,this};var fr=Pi(xr),pr=Pi(br,!0);function vr(t,e){var n=!0;return fr(t,(function(t,r,i){return n=!!e(t,r,i)})),n}function gr(t,e,r){for(var i=-1,o=t.length;++i<o;){var a=t[i],s=e(a);if(null!=s&&(l===n?s==s&&!us(s):r(s,l)))var l=s,u=a}return u}function yr(t,e){var n=[];return fr(t,(function(t,r,i){e(t,r,i)&&n.push(t)})),n}function mr(t,e,n,r,i){var o=-1,a=t.length;for(n||(n=Co),i||(i=[]);++o<a;){var s=t[o];e>0&&n(s)?e>1?mr(s,e-1,n,r,i):Be(i,s):r||(i[i.length]=s)}return i}var Cr=ki(),wr=ki(!0);function xr(t,e){return t&&Cr(t,e,Is)}function br(t,e){return t&&wr(t,e,Is)}function Er(t,e){return Ie(e,(function(e){return Qa(t[e])}))}function Sr(t,e){for(var r=0,i=(e=wi(e,t)).length;null!=t&&r<i;)t=t[Fo(e[r++])];return r&&r==i?t:n}function Tr(t,e,n){var r=e(t);return ja(t)?r:Be(r,n(t))}function Lr(t){return null==t?t===n?"[object Undefined]":"[object Null]":Jt&&Jt in _t(t)?function(t){var e=Bt.call(t,Jt),r=t[Jt];try{t[Jt]=n;var i=!0}catch(a){}var o=Ht.call(t);i&&(e?t[Jt]=r:delete t[Jt]);return o}(t):function(t){return Ht.call(t)}(t)}function _r(t,e){return t>e}function Mr(t,e){return null!=t&&Bt.call(t,e)}function Rr(t,e){return null!=t&&e in _t(t)}function Or(t,e,r){for(var i=r?Pe:Ae,a=t[0].length,s=t.length,l=s,u=o(s),c=1/0,h=[];l--;){var d=t[l];l&&e&&(d=ke(d,Je(e))),c=wn(d.length,c),u[l]=!r&&(e||a>=120&&d.length>=120)?new Kn(l&&d):n}d=t[0];var f=-1,p=u[0];t:for(;++f<a&&h.length<c;){var v=d[f],g=e?e(v):v;if(v=r||0!==v?v:0,!(p?en(p,g):i(h,g,r))){for(l=s;--l;){var y=u[l];if(!(y?en(y,g):i(t[l],g,r)))continue t}p&&p.push(g),h.push(v)}}return h}function Nr(t,e,r){var i=null==(t=Ro(t,e=wi(e,t)))?t:t[Fo($o(e))];return null==i?n:_e(i,t,r)}function Ir(t){return ns(t)&&Lr(t)==m}function Ar(t,e,r,i,o){return t===e||(null==t||null==e||!ns(t)&&!ns(e)?t!=t&&e!=e:function(t,e,r,i,o,a){var s=ja(t),l=ja(e),u=s?C:go(t),c=l?C:go(e),h=(u=u==m?_:u)==_,d=(c=c==m?_:c)==_,f=u==c;if(f&&Ka(t)){if(!Ka(e))return!1;s=!0,h=!1}if(f&&!h)return a||(a=new Zn),s||cs(t)?no(t,e,r,i,o,a):function(t,e,n,r,i,o,a){switch(n){case k:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case P:return!(t.byteLength!=e.byteLength||!o(new jt(t),new jt(e)));case w:case x:case L:return Ga(+t,+e);case b:return t.name==e.name&&t.message==e.message;case R:case N:return t==e+"";case T:var s=un;case O:var l=1&r;if(s||(s=dn),t.size!=e.size&&!l)return!1;var u=a.get(t);if(u)return u==e;r|=2,a.set(t,e);var c=no(s(t),s(e),r,i,o,a);return a.delete(t),c;case I:if(Hn)return Hn.call(t)==Hn.call(e)}return!1}(t,e,u,r,i,o,a);if(!(1&r)){var p=h&&Bt.call(t,"__wrapped__"),v=d&&Bt.call(e,"__wrapped__");if(p||v){var g=p?t.value():t,y=v?e.value():e;return a||(a=new Zn),o(g,y,r,i,a)}}if(!f)return!1;return a||(a=new Zn),function(t,e,r,i,o,a){var s=1&r,l=io(t),u=l.length,c=io(e),h=c.length;if(u!=h&&!s)return!1;var d=u;for(;d--;){var f=l[d];if(!(s?f in e:Bt.call(e,f)))return!1}var p=a.get(t),v=a.get(e);if(p&&v)return p==e&&v==t;var g=!0;a.set(t,e),a.set(e,t);var y=s;for(;++d<u;){var m=t[f=l[d]],C=e[f];if(i)var w=s?i(C,m,f,e,t,a):i(m,C,f,t,e,a);if(!(w===n?m===C||o(m,C,r,i,a):w)){g=!1;break}y||(y="constructor"==f)}if(g&&!y){var x=t.constructor,b=e.constructor;x==b||!("constructor"in t)||!("constructor"in e)||"function"==typeof x&&x instanceof x&&"function"==typeof b&&b instanceof b||(g=!1)}return a.delete(t),a.delete(e),g}(t,e,r,i,o,a)}(t,e,r,i,Ar,o))}function Pr(t,e,r,i){var o=r.length,a=o,s=!i;if(null==t)return!a;for(t=_t(t);o--;){var l=r[o];if(s&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++o<a;){var u=(l=r[o])[0],c=t[u],h=l[1];if(s&&l[2]){if(c===n&&!(u in t))return!1}else{var d=new Zn;if(i)var f=i(c,h,u,t,e,d);if(!(f===n?Ar(h,c,3,i,d):f))return!1}}return!0}function kr(t){return!(!es(t)||function(t){return!!Ft&&Ft in t}(t))&&(Qa(t)?Wt:mt).test(Ho(t))}function Br(t){return"function"==typeof t?t:null==t?il:"object"==h(t)?ja(t)?Wr(t[0],t[1]):Gr(t):fl(t)}function Dr(t){if(!To(t))return qe(t);var e=[];for(var n in _t(t))Bt.call(t,n)&&"constructor"!=n&&e.push(n);return e}function Fr(t){if(!es(t))return function(t){var e=[];if(null!=t)for(var n in _t(t))e.push(n);return e}(t);var e=To(t),n=[];for(var r in t)("constructor"!=r||!e&&Bt.call(t,r))&&n.push(r);return n}function Hr(t,e){return t<e}function zr(t,e){var n=-1,r=Xa(t)?o(t.length):[];return fr(t,(function(t,i,o){r[++n]=e(t,i,o)})),r}function Gr(t){var e=ho(t);return 1==e.length&&e[0][2]?_o(e[0][0],e[0][1]):function(n){return n===t||Pr(n,t,e)}}function Wr(t,e){return bo(t)&&Lo(e)?_o(Fo(t),e):function(r){var i=_s(r,t);return i===n&&i===e?Ms(r,t):Ar(e,i,3)}}function Vr(t,e,r,i,o){t!==e&&Cr(e,(function(a,s){if(o||(o=new Zn),es(a))!function(t,e,r,i,o,a,s){var l=Oo(t,r),u=Oo(e,r),c=s.get(u);if(c)return void er(t,r,c);var h=a?a(l,u,r+"",t,e,s):n,d=h===n;if(d){var f=ja(u),p=!f&&Ka(u),v=!f&&!p&&cs(u);h=u,f||p||v?ja(l)?h=l:qa(l)?h=Oi(l):p?(d=!1,h=Si(u,!0)):v?(d=!1,h=Li(u,!0)):h=[]:os(u)||Ua(u)?(h=l,Ua(l)?h=ms(l):es(l)&&!Qa(l)||(h=mo(u))):d=!1}d&&(s.set(u,h),o(h,u,i,a,s),s.delete(u));er(t,r,h)}(t,e,s,r,Vr,i,o);else{var l=i?i(Oo(t,s),a,s+"",t,e,o):n;l===n&&(l=a),er(t,s,l)}}),As)}function Ur(t,e){var r=t.length;if(r)return wo(e+=e<0?r:0,r)?t[e]:n}function jr(t,e,n){e=e.length?ke(e,(function(t){return ja(t)?function(e){return Sr(e,1===t.length?t[0]:t)}:t})):[il];var r=-1;e=ke(e,Je(uo()));var i=zr(t,(function(t,n,i){var o=ke(e,(function(e){return e(t)}));return{criteria:o,index:++r,value:t}}));return function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}(i,(function(t,e){return function(t,e,n){var r=-1,i=t.criteria,o=e.criteria,a=i.length,s=n.length;for(;++r<a;){var l=_i(i[r],o[r]);if(l)return r>=s?l:l*("desc"==n[r]?-1:1)}return t.index-e.index}(t,e,n)}))}function Yr(t,e,n){for(var r=-1,i=e.length,o={};++r<i;){var a=e[r],s=Sr(t,a);n(s,a)&&ti(o,wi(a,t),s)}return o}function Xr(t,e,n,r){var i=r?Ue:Ve,o=-1,a=e.length,s=t;for(t===e&&(e=Oi(e)),n&&(s=ke(t,Je(n)));++o<a;)for(var l=0,u=e[o],c=n?n(u):u;(l=i(s,c,l,r))>-1;)s!==t&&Zt.call(s,l,1),Zt.call(t,l,1);return t}function qr(t,e){for(var n=t?e.length:0,r=n-1;n--;){var i=e[n];if(n==r||i!==o){var o=i;wo(i)?Zt.call(t,i,1):di(t,i)}}return t}function Kr(t,e){return t+ge(En()*(e-t+1))}function Zr(t,e){var n="";if(!t||e<1||e>p)return n;do{e%2&&(n+=t),(e=ge(e/2))&&(t+=t)}while(e);return n}function $r(t,e){return Ao(Mo(t,e,il),t+"")}function Qr(t){return Qn(Gs(t))}function Jr(t,e){var n=Gs(t);return Bo(n,lr(e,0,n.length))}function ti(t,e,r,i){if(!es(t))return t;for(var o=-1,a=(e=wi(e,t)).length,s=a-1,l=t;null!=l&&++o<a;){var u=Fo(e[o]),c=r;if("__proto__"===u||"constructor"===u||"prototype"===u)return t;if(o!=s){var h=l[u];(c=i?i(h,u,l):n)===n&&(c=es(h)?h:wo(e[o+1])?[]:{})}nr(l,u,c),l=l[u]}return t}var ei=Nn?function(t,e){return Nn.set(t,e),t}:il,ni=ne?function(t,e){return ne(t,"toString",{configurable:!0,enumerable:!1,value:el(e),writable:!0})}:il;function ri(t){return Bo(Gs(t))}function ii(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),(n=n>i?i:n)<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var a=o(i);++r<i;)a[r]=t[r+e];return a}function oi(t,e){var n;return fr(t,(function(t,r,i){return!(n=e(t,r,i))})),!!n}function ai(t,e,n){var r=0,i=null==t?r:t.length;if("number"==typeof e&&e==e&&i<=2147483647){for(;r<i;){var o=r+i>>>1,a=t[o];null!==a&&!us(a)&&(n?a<=e:a<e)?r=o+1:i=o}return i}return si(t,e,il,n)}function si(t,e,r,i){var o=0,a=null==t?0:t.length;if(0===a)return 0;for(var s=(e=r(e))!=e,l=null===e,u=us(e),c=e===n;o<a;){var h=ge((o+a)/2),d=r(t[h]),f=d!==n,p=null===d,v=d==d,g=us(d);if(s)var y=i||v;else y=c?v&&(i||f):l?v&&f&&(i||!p):u?v&&f&&!p&&(i||!g):!p&&!g&&(i?d<=e:d<e);y?o=h+1:a=h}return wn(a,4294967294)}function li(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n],s=e?e(a):a;if(!n||!Ga(s,l)){var l=s;o[i++]=0===a?0:a}}return o}function ui(t){return"number"==typeof t?t:us(t)?v:+t}function ci(t){if("string"==typeof t)return t;if(ja(t))return ke(t,ci)+"";if(us(t))return zn?zn.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function hi(t,e,n){var r=-1,i=Ae,o=t.length,a=!0,s=[],l=s;if(n)a=!1,i=Pe;else if(o>=200){var u=e?null:Zi(t);if(u)return dn(u);a=!1,i=en,l=new Kn}else l=e?[]:s;t:for(;++r<o;){var c=t[r],h=e?e(c):c;if(c=n||0!==c?c:0,a&&h==h){for(var d=l.length;d--;)if(l[d]===h)continue t;e&&l.push(h),s.push(c)}else i(l,h,n)||(l!==s&&l.push(h),s.push(c))}return s}function di(t,e){return null==(t=Ro(t,e=wi(e,t)))||delete t[Fo($o(e))]}function fi(t,e,n,r){return ti(t,e,n(Sr(t,e)),r)}function pi(t,e,n,r){for(var i=t.length,o=r?i:-1;(r?o--:++o<i)&&e(t[o],o,t););return n?ii(t,r?0:o,r?o+1:i):ii(t,r?o+1:0,r?i:o)}function vi(t,e){var n=t;return n instanceof jn&&(n=n.value()),De(e,(function(t,e){return e.func.apply(e.thisArg,Be([t],e.args))}),n)}function gi(t,e,n){var r=t.length;if(r<2)return r?hi(t[0]):[];for(var i=-1,a=o(r);++i<r;)for(var s=t[i],l=-1;++l<r;)l!=i&&(a[i]=dr(a[i]||s,t[l],e,n));return hi(mr(a,1),e,n)}function yi(t,e,r){for(var i=-1,o=t.length,a=e.length,s={};++i<o;){var l=i<a?e[i]:n;r(s,t[i],l)}return s}function mi(t){return qa(t)?t:[]}function Ci(t){return"function"==typeof t?t:il}function wi(t,e){return ja(t)?t:bo(t,e)?[t]:Do(Cs(t))}var xi=$r;function bi(t,e,r){var i=t.length;return r=r===n?i:r,!e&&r>=i?t:ii(t,e,r)}var Ei=ie||function(t){return ve.clearTimeout(t)};function Si(t,e){if(e)return t.slice();var n=t.length,r=Yt?Yt(n):new t.constructor(n);return t.copy(r),r}function Ti(t){var e=new t.constructor(t.byteLength);return new jt(e).set(new jt(t)),e}function Li(t,e){var n=e?Ti(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function _i(t,e){if(t!==e){var r=t!==n,i=null===t,o=t==t,a=us(t),s=e!==n,l=null===e,u=e==e,c=us(e);if(!l&&!c&&!a&&t>e||a&&s&&u&&!l&&!c||i&&s&&u||!r&&u||!o)return 1;if(!i&&!a&&!c&&t<e||c&&r&&o&&!i&&!a||l&&r&&o||!s&&o||!u)return-1}return 0}function Mi(t,e,n,r){for(var i=-1,a=t.length,s=n.length,l=-1,u=e.length,c=Cn(a-s,0),h=o(u+c),d=!r;++l<u;)h[l]=e[l];for(;++i<s;)(d||i<a)&&(h[n[i]]=t[i]);for(;c--;)h[l++]=t[i++];return h}function Ri(t,e,n,r){for(var i=-1,a=t.length,s=-1,l=n.length,u=-1,c=e.length,h=Cn(a-l,0),d=o(h+c),f=!r;++i<h;)d[i]=t[i];for(var p=i;++u<c;)d[p+u]=e[u];for(;++s<l;)(f||i<a)&&(d[p+n[s]]=t[i++]);return d}function Oi(t,e){var n=-1,r=t.length;for(e||(e=o(r));++n<r;)e[n]=t[n];return e}function Ni(t,e,r,i){var o=!r;r||(r={});for(var a=-1,s=e.length;++a<s;){var l=e[a],u=i?i(r[l],t[l],l,r,t):n;u===n&&(u=t[l]),o?ar(r,l,u):nr(r,l,u)}return r}function Ii(t,e){return function(n,r){var i=ja(n)?Me:ir,o=e?e():{};return i(n,t,uo(r,2),o)}}function Ai(t){return $r((function(e,r){var i=-1,o=r.length,a=o>1?r[o-1]:n,s=o>2?r[2]:n;for(a=t.length>3&&"function"==typeof a?(o--,a):n,s&&xo(r[0],r[1],s)&&(a=o<3?n:a,o=1),e=_t(e);++i<o;){var l=r[i];l&&t(e,l,i,a)}return e}))}function Pi(t,e){return function(n,r){if(null==n)return n;if(!Xa(n))return t(n,r);for(var i=n.length,o=e?i:-1,a=_t(n);(e?o--:++o<i)&&!1!==r(a[o],o,a););return n}}function ki(t){return function(e,n,r){for(var i=-1,o=_t(e),a=r(e),s=a.length;s--;){var l=a[t?s:++i];if(!1===n(o[l],l,o))break}return e}}function Bi(t){return function(e){var r=ln(e=Cs(e))?vn(e):n,i=r?r[0]:e.charAt(0),o=r?bi(r,1).join(""):e.slice(1);return i[t]()+o}}function Di(t){return function(e){return De(Qs(Us(e).replace(te,"")),t,"")}}function Fi(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=Wn(t.prototype),r=t.apply(n,e);return es(r)?r:n}}function Hi(t){return function(e,r,i){var o=_t(e);if(!Xa(e)){var a=uo(r,3);e=Is(e),r=function(t){return a(o[t],t,o)}}var s=t(e,r,i);return s>-1?o[a?e[s]:s]:n}}function zi(t){return ro((function(e){var i=e.length,o=i,a=Un.prototype.thru;for(t&&e.reverse();o--;){var s=e[o];if("function"!=typeof s)throw new Ot(r);if(a&&!l&&"wrapper"==so(s))var l=new Un([],!0)}for(o=l?o:i;++o<i;){var u=so(s=e[o]),c="wrapper"==u?ao(s):n;l=c&&Eo(c[0])&&424==c[1]&&!c[4].length&&1==c[9]?l[so(c[0])].apply(l,c[3]):1==s.length&&Eo(s)?l[u]():l.thru(s)}return function(){var t=arguments,n=t[0];if(l&&1==t.length&&ja(n))return l.plant(n).value();for(var r=0,o=i?e[r].apply(this,t):n;++r<i;)o=e[r].call(this,o);return o}}))}function Gi(t,e,r,i,a,s,l,u,h,d){var f=e&c,p=1&e,v=2&e,g=24&e,y=512&e,m=v?n:Fi(t);return function c(){for(var C=arguments.length,w=o(C),x=C;x--;)w[x]=arguments[x];if(g)var b=lo(c),E=function(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}(w,b);if(i&&(w=Mi(w,i,a,g)),s&&(w=Ri(w,s,l,g)),C-=E,g&&C<d){var S=hn(w,b);return qi(t,e,Gi,c.placeholder,r,w,S,u,h,d-C)}var T=p?r:this,L=v?T[t]:t;return C=w.length,u?w=function(t,e){var r=t.length,i=wn(e.length,r),o=Oi(t);for(;i--;){var a=e[i];t[i]=wo(a,r)?o[a]:n}return t}(w,u):y&&C>1&&w.reverse(),f&&h<C&&(w.length=h),this&&this!==ve&&this instanceof c&&(L=m||Fi(L)),L.apply(T,w)}}function Wi(t,e){return function(n,r){return function(t,e,n,r){return xr(t,(function(t,i,o){e(r,n(t),i,o)})),r}(n,t,e(r),{})}}function Vi(t,e){return function(r,i){var o;if(r===n&&i===n)return e;if(r!==n&&(o=r),i!==n){if(o===n)return i;"string"==typeof r||"string"==typeof i?(r=ci(r),i=ci(i)):(r=ui(r),i=ui(i)),o=t(r,i)}return o}}function Ui(t){return ro((function(e){return e=ke(e,Je(uo())),$r((function(n){var r=this;return t(e,(function(t){return _e(t,r,n)}))}))}))}function ji(t,e){var r=(e=e===n?" ":ci(e)).length;if(r<2)return r?Zr(e,t):e;var i=Zr(e,pe(t/pn(e)));return ln(e)?bi(vn(i),0,t).join(""):i.slice(0,t)}function Yi(t){return function(e,r,i){return i&&"number"!=typeof i&&xo(e,r,i)&&(r=i=n),e=ps(e),r===n?(r=e,e=0):r=ps(r),function(t,e,n,r){for(var i=-1,a=Cn(pe((e-t)/(n||1)),0),s=o(a);a--;)s[r?a:++i]=t,t+=n;return s}(e,r,i=i===n?e<r?1:-1:ps(i),t)}}function Xi(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=ys(e),n=ys(n)),t(e,n)}}function qi(t,e,r,i,o,a,s,c,h,d){var f=8&e;e|=f?l:u,4&(e&=~(f?u:l))||(e&=-4);var p=[t,e,o,f?a:n,f?s:n,f?n:a,f?n:s,c,h,d],v=r.apply(n,p);return Eo(t)&&No(v,p),v.placeholder=i,Po(v,t,e)}function Ki(t){var e=Lt[t];return function(t,n){if(t=ys(t),(n=null==n?0:wn(vs(n),292))&&we(t)){var r=(Cs(t)+"e").split("e");return+((r=(Cs(e(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return e(t)}}var Zi=Mn&&1/dn(new Mn([,-0]))[1]==f?function(t){return new Mn(t)}:ul;function $i(t){return function(e){var n=go(e);return n==T?un(e):n==O?fn(e):function(t,e){return ke(e,(function(e){return[e,t[e]]}))}(e,t(e))}}function Qi(t,e,i,h,f,p,v,g){var y=2&e;if(!y&&"function"!=typeof t)throw new Ot(r);var m=h?h.length:0;if(m||(e&=-97,h=f=n),v=v===n?v:Cn(vs(v),0),g=g===n?g:vs(g),m-=f?f.length:0,e&u){var C=h,w=f;h=f=n}var x=y?n:ao(t),b=[t,e,i,h,f,C,w,p,v,g];if(x&&function(t,e){var n=t[1],r=e[1],i=n|r,o=i<131,s=r==c&&8==n||r==c&&n==d&&t[7].length<=e[8]||384==r&&e[7].length<=e[8]&&8==n;if(!o&&!s)return t;1&r&&(t[2]=e[2],i|=1&n?0:4);var l=e[3];if(l){var u=t[3];t[3]=u?Mi(u,l,e[4]):l,t[4]=u?hn(t[3],a):e[4]}l=e[5],l&&(u=t[5],t[5]=u?Ri(u,l,e[6]):l,t[6]=u?hn(t[5],a):e[6]);l=e[7],l&&(t[7]=l);r&c&&(t[8]=null==t[8]?e[8]:wn(t[8],e[8]));null==t[9]&&(t[9]=e[9]);t[0]=e[0],t[1]=i}(b,x),t=b[0],e=b[1],i=b[2],h=b[3],f=b[4],!(g=b[9]=b[9]===n?y?0:t.length:Cn(b[9]-m,0))&&24&e&&(e&=-25),e&&1!=e)E=8==e||e==s?function(t,e,r){var i=Fi(t);return function a(){for(var s=arguments.length,l=o(s),u=s,c=lo(a);u--;)l[u]=arguments[u];var h=s<3&&l[0]!==c&&l[s-1]!==c?[]:hn(l,c);return(s-=h.length)<r?qi(t,e,Gi,a.placeholder,n,l,h,n,n,r-s):_e(this&&this!==ve&&this instanceof a?i:t,this,l)}}(t,e,g):e!=l&&33!=e||f.length?Gi.apply(n,b):function(t,e,n,r){var i=1&e,a=Fi(t);return function e(){for(var s=-1,l=arguments.length,u=-1,c=r.length,h=o(c+l),d=this&&this!==ve&&this instanceof e?a:t;++u<c;)h[u]=r[u];for(;l--;)h[u++]=arguments[++s];return _e(d,i?n:this,h)}}(t,e,i,h);else var E=function(t,e,n){var r=1&e,i=Fi(t);return function e(){return(this&&this!==ve&&this instanceof e?i:t).apply(r?n:this,arguments)}}(t,e,i);return Po((x?ei:No)(E,b),t,e)}function Ji(t,e,r,i){return t===n||Ga(t,At[r])&&!Bt.call(i,r)?e:t}function to(t,e,r,i,o,a){return es(t)&&es(e)&&(a.set(e,t),Vr(t,e,n,to,a),a.delete(e)),t}function eo(t){return os(t)?n:t}function no(t,e,r,i,o,a){var s=1&r,l=t.length,u=e.length;if(l!=u&&!(s&&u>l))return!1;var c=a.get(t),h=a.get(e);if(c&&h)return c==e&&h==t;var d=-1,f=!0,p=2&r?new Kn:n;for(a.set(t,e),a.set(e,t);++d<l;){var v=t[d],g=e[d];if(i)var y=s?i(g,v,d,e,t,a):i(v,g,d,t,e,a);if(y!==n){if(y)continue;f=!1;break}if(p){if(!He(e,(function(t,e){if(!en(p,e)&&(v===t||o(v,t,r,i,a)))return p.push(e)}))){f=!1;break}}else if(v!==g&&!o(v,g,r,i,a)){f=!1;break}}return a.delete(t),a.delete(e),f}function ro(t){return Ao(Mo(t,n,Yo),t+"")}function io(t){return Tr(t,Is,po)}function oo(t){return Tr(t,As,vo)}var ao=Nn?function(t){return Nn.get(t)}:ul;function so(t){for(var e=t.name+"",n=In[e],r=Bt.call(In,e)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==t)return i.name}return e}function lo(t){return(Bt.call(Gn,"placeholder")?Gn:t).placeholder}function uo(){var t=Gn.iteratee||ol;return t=t===ol?Br:t,arguments.length?t(arguments[0],arguments[1]):t}function co(t,e){var n=t.__data__;return function(t){var e=h(t);return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}(e)?n["string"==typeof e?"string":"hash"]:n.map}function ho(t){for(var e=Is(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,Lo(i)]}return e}function fo(t,e){var r=function(t,e){return null==t?n:t[e]}(t,e);return kr(r)?r:n}var po=ye?function(t){return null==t?[]:(t=_t(t),Ie(ye(t),(function(e){return Kt.call(t,e)})))}:gl,vo=ye?function(t){for(var e=[];t;)Be(e,po(t)),t=Xt(t);return e}:gl,go=Lr;function yo(t,e,n){for(var r=-1,i=(e=wi(e,t)).length,o=!1;++r<i;){var a=Fo(e[r]);if(!(o=null!=t&&n(t,a)))break;t=t[a]}return o||++r!=i?o:!!(i=null==t?0:t.length)&&ts(i)&&wo(a,i)&&(ja(t)||Ua(t))}function mo(t){return"function"!=typeof t.constructor||To(t)?{}:Wn(Xt(t))}function Co(t){return ja(t)||Ua(t)||!!($t&&t&&t[$t])}function wo(t,e){var n=h(t);return!!(e=null==e?p:e)&&("number"==n||"symbol"!=n&&wt.test(t))&&t>-1&&t%1==0&&t<e}function xo(t,e,n){if(!es(n))return!1;var r=h(e);return!!("number"==r?Xa(n)&&wo(e,n.length):"string"==r&&e in n)&&Ga(n[e],t)}function bo(t,e){if(ja(t))return!1;var n=h(t);return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!us(t))||(nt.test(t)||!et.test(t)||null!=e&&t in _t(e))}function Eo(t){var e=so(t),n=Gn[e];if("function"!=typeof n||!(e in jn.prototype))return!1;if(t===n)return!0;var r=ao(n);return!!r&&t===r[0]}(Tn&&go(new Tn(new ArrayBuffer(1)))!=k||Ln&&go(new Ln)!=T||_n&&go(_n.resolve())!=M||Mn&&go(new Mn)!=O||Rn&&go(new Rn)!=A)&&(go=function(t){var e=Lr(t),r=e==_?t.constructor:n,i=r?Ho(r):"";if(i)switch(i){case An:return k;case Pn:return T;case kn:return M;case Bn:return O;case Dn:return A}return e});var So=Pt?Qa:yl;function To(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||At)}function Lo(t){return t==t&&!es(t)}function _o(t,e){return function(r){return null!=r&&(r[t]===e&&(e!==n||t in _t(r)))}}function Mo(t,e,r){return e=Cn(e===n?t.length-1:e,0),function(){for(var n=arguments,i=-1,a=Cn(n.length-e,0),s=o(a);++i<a;)s[i]=n[e+i];i=-1;for(var l=o(e+1);++i<e;)l[i]=n[i];return l[e]=r(s),_e(t,this,l)}}function Ro(t,e){return e.length<2?t:Sr(t,ii(e,0,-1))}function Oo(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var No=ko(ei),Io=fe||function(t,e){return ve.setTimeout(t,e)},Ao=ko(ni);function Po(t,e,n){var r=e+"";return Ao(t,function(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(lt,"{\n/* [wrapped with "+e+"] */\n")}(r,function(t,e){return Re(y,(function(n){var r="_."+n[0];e&n[1]&&!Ae(t,r)&&t.push(r)})),t.sort()}(function(t){var e=t.match(ut);return e?e[1].split(ct):[]}(r),n)))}function ko(t){var e=0,r=0;return function(){var i=xn(),o=16-(i-r);if(r=i,o>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(n,arguments)}}function Bo(t,e){var r=-1,i=t.length,o=i-1;for(e=e===n?i:e;++r<e;){var a=Kr(r,o),s=t[a];t[a]=t[r],t[r]=s}return t.length=e,t}var Do=function(t){var e=ka(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(rt,(function(t,n,r,i){e.push(r?i.replace(ft,"$1"):n||t)})),e}));function Fo(t){if("string"==typeof t||us(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Ho(t){if(null!=t){try{return kt.call(t)}catch(e){}try{return t+""}catch(e){}}return""}function zo(t){if(t instanceof jn)return t.clone();var e=new Un(t.__wrapped__,t.__chain__);return e.__actions__=Oi(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var Go=$r((function(t,e){return qa(t)?dr(t,mr(e,1,qa,!0)):[]})),Wo=$r((function(t,e){var r=$o(e);return qa(r)&&(r=n),qa(t)?dr(t,mr(e,1,qa,!0),uo(r,2)):[]})),Vo=$r((function(t,e){var r=$o(e);return qa(r)&&(r=n),qa(t)?dr(t,mr(e,1,qa,!0),n,r):[]}));function Uo(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:vs(n);return i<0&&(i=Cn(r+i,0)),We(t,uo(e,3),i)}function jo(t,e,r){var i=null==t?0:t.length;if(!i)return-1;var o=i-1;return r!==n&&(o=vs(r),o=r<0?Cn(i+o,0):wn(o,i-1)),We(t,uo(e,3),o,!0)}function Yo(t){return(null==t?0:t.length)?mr(t,1):[]}function Xo(t){return t&&t.length?t[0]:n}var qo=$r((function(t){var e=ke(t,mi);return e.length&&e[0]===t[0]?Or(e):[]})),Ko=$r((function(t){var e=$o(t),r=ke(t,mi);return e===$o(r)?e=n:r.pop(),r.length&&r[0]===t[0]?Or(r,uo(e,2)):[]})),Zo=$r((function(t){var e=$o(t),r=ke(t,mi);return(e="function"==typeof e?e:n)&&r.pop(),r.length&&r[0]===t[0]?Or(r,n,e):[]}));function $o(t){var e=null==t?0:t.length;return e?t[e-1]:n}var Qo=$r(Jo);function Jo(t,e){return t&&t.length&&e&&e.length?Xr(t,e):t}var ta=ro((function(t,e){var n=null==t?0:t.length,r=sr(t,e);return qr(t,ke(e,(function(t){return wo(t,n)?+t:t})).sort(_i)),r}));function ea(t){return null==t?t:Sn.call(t)}var na=$r((function(t){return hi(mr(t,1,qa,!0))})),ra=$r((function(t){var e=$o(t);return qa(e)&&(e=n),hi(mr(t,1,qa,!0),uo(e,2))})),ia=$r((function(t){var e=$o(t);return e="function"==typeof e?e:n,hi(mr(t,1,qa,!0),n,e)}));function oa(t){if(!t||!t.length)return[];var e=0;return t=Ie(t,(function(t){if(qa(t))return e=Cn(t.length,e),!0})),$e(e,(function(e){return ke(t,Xe(e))}))}function aa(t,e){if(!t||!t.length)return[];var r=oa(t);return null==e?r:ke(r,(function(t){return _e(e,n,t)}))}var sa=$r((function(t,e){return qa(t)?dr(t,e):[]})),la=$r((function(t){return gi(Ie(t,qa))})),ua=$r((function(t){var e=$o(t);return qa(e)&&(e=n),gi(Ie(t,qa),uo(e,2))})),ca=$r((function(t){var e=$o(t);return e="function"==typeof e?e:n,gi(Ie(t,qa),n,e)})),ha=$r(oa);var da=$r((function(t){var e=t.length,r=e>1?t[e-1]:n;return r="function"==typeof r?(t.pop(),r):n,aa(t,r)}));function fa(t){var e=Gn(t);return e.__chain__=!0,e}function pa(t,e){return e(t)}var va=ro((function(t){var e=t.length,r=e?t[0]:0,i=this.__wrapped__,o=function(e){return sr(e,t)};return!(e>1||this.__actions__.length)&&i instanceof jn&&wo(r)?((i=i.slice(r,+r+(e?1:0))).__actions__.push({func:pa,args:[o],thisArg:n}),new Un(i,this.__chain__).thru((function(t){return e&&!t.length&&t.push(n),t}))):this.thru(o)}));var ga=Ii((function(t,e,n){Bt.call(t,n)?++t[n]:ar(t,n,1)}));var ya=Hi(Uo),ma=Hi(jo);function Ca(t,e){return(ja(t)?Re:fr)(t,uo(e,3))}function wa(t,e){return(ja(t)?Oe:pr)(t,uo(e,3))}var xa=Ii((function(t,e,n){Bt.call(t,n)?t[n].push(e):ar(t,n,[e])}));var ba=$r((function(t,e,n){var r=-1,i="function"==typeof e,a=Xa(t)?o(t.length):[];return fr(t,(function(t){a[++r]=i?_e(e,t,n):Nr(t,e,n)})),a})),Ea=Ii((function(t,e,n){ar(t,n,e)}));function Sa(t,e){return(ja(t)?ke:zr)(t,uo(e,3))}var Ta=Ii((function(t,e,n){t[n?0:1].push(e)}),(function(){return[[],[]]}));var La=$r((function(t,e){if(null==t)return[];var n=e.length;return n>1&&xo(t,e[0],e[1])?e=[]:n>2&&xo(e[0],e[1],e[2])&&(e=[e[0]]),jr(t,mr(e,1),[])})),_a=ce||function(){return ve.Date.now()};function Ma(t,e,r){return e=r?n:e,e=t&&null==e?t.length:e,Qi(t,c,n,n,n,n,e)}function Ra(t,e){var i;if("function"!=typeof e)throw new Ot(r);return t=vs(t),function(){return--t>0&&(i=e.apply(this,arguments)),t<=1&&(e=n),i}}var Oa=$r((function(t,e,n){var r=1;if(n.length){var i=hn(n,lo(Oa));r|=l}return Qi(t,r,e,n,i)})),Na=$r((function(t,e,n){var r=3;if(n.length){var i=hn(n,lo(Na));r|=l}return Qi(e,r,t,n,i)}));function Ia(t,e,i){var o,a,s,l,u,c,h=0,d=!1,f=!1,p=!0;if("function"!=typeof t)throw new Ot(r);function v(e){var r=o,i=a;return o=a=n,h=e,l=t.apply(i,r)}function g(t){var r=t-c;return c===n||r>=e||r<0||f&&t-h>=s}function y(){var t=_a();if(g(t))return m(t);u=Io(y,function(t){var n=e-(t-c);return f?wn(n,s-(t-h)):n}(t))}function m(t){return u=n,p&&o?v(t):(o=a=n,l)}function C(){var t=_a(),r=g(t);if(o=arguments,a=this,c=t,r){if(u===n)return function(t){return h=t,u=Io(y,e),d?v(t):l}(c);if(f)return Ei(u),u=Io(y,e),v(c)}return u===n&&(u=Io(y,e)),l}return e=ys(e)||0,es(i)&&(d=!!i.leading,s=(f="maxWait"in i)?Cn(ys(i.maxWait)||0,e):s,p="trailing"in i?!!i.trailing:p),C.cancel=function(){u!==n&&Ei(u),h=0,o=c=a=u=n},C.flush=function(){return u===n?l:m(_a())},C}var Aa=$r((function(t,e){return hr(t,1,e)})),Pa=$r((function(t,e,n){return hr(t,ys(e)||0,n)}));function ka(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new Ot(r);var n=function n(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(ka.Cache||qn),n}function Ba(t){if("function"!=typeof t)throw new Ot(r);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}ka.Cache=qn;var Da=xi((function(t,e){var n=(e=1==e.length&&ja(e[0])?ke(e[0],Je(uo())):ke(mr(e,1),Je(uo()))).length;return $r((function(r){for(var i=-1,o=wn(r.length,n);++i<o;)r[i]=e[i].call(this,r[i]);return _e(t,this,r)}))})),Fa=$r((function(t,e){var r=hn(e,lo(Fa));return Qi(t,l,n,e,r)})),Ha=$r((function(t,e){var r=hn(e,lo(Ha));return Qi(t,u,n,e,r)})),za=ro((function(t,e){return Qi(t,d,n,n,n,e)}));function Ga(t,e){return t===e||t!=t&&e!=e}var Wa=Xi(_r),Va=Xi((function(t,e){return t>=e})),Ua=Ir(function(){return arguments}())?Ir:function(t){return ns(t)&&Bt.call(t,"callee")&&!Kt.call(t,"callee")},ja=o.isArray,Ya=xe?Je(xe):function(t){return ns(t)&&Lr(t)==P};function Xa(t){return null!=t&&ts(t.length)&&!Qa(t)}function qa(t){return ns(t)&&Xa(t)}var Ka=Ce||yl,Za=be?Je(be):function(t){return ns(t)&&Lr(t)==x};function $a(t){if(!ns(t))return!1;var e=Lr(t);return e==b||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!os(t)}function Qa(t){if(!es(t))return!1;var e=Lr(t);return e==E||e==S||"[object AsyncFunction]"==e||"[object Proxy]"==e}function Ja(t){return"number"==typeof t&&t==vs(t)}function ts(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=p}function es(t){var e=h(t);return null!=t&&("object"==e||"function"==e)}function ns(t){return null!=t&&"object"==h(t)}var rs=Ee?Je(Ee):function(t){return ns(t)&&go(t)==T};function is(t){return"number"==typeof t||ns(t)&&Lr(t)==L}function os(t){if(!ns(t)||Lr(t)!=_)return!1;var e=Xt(t);if(null===e)return!0;var n=Bt.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&kt.call(n)==zt}var as=Se?Je(Se):function(t){return ns(t)&&Lr(t)==R};var ss=Te?Je(Te):function(t){return ns(t)&&go(t)==O};function ls(t){return"string"==typeof t||!ja(t)&&ns(t)&&Lr(t)==N}function us(t){return"symbol"==h(t)||ns(t)&&Lr(t)==I}var cs=Le?Je(Le):function(t){return ns(t)&&ts(t.length)&&!!le[Lr(t)]};var hs=Xi(Hr),ds=Xi((function(t,e){return t<=e}));function fs(t){if(!t)return[];if(Xa(t))return ls(t)?vn(t):Oi(t);if(Qt&&t[Qt])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[Qt]());var e=go(t);return(e==T?un:e==O?dn:Gs)(t)}function ps(t){return t?(t=ys(t))===f||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function vs(t){var e=ps(t),n=e%1;return e==e?n?e-n:e:0}function gs(t){return t?lr(vs(t),0,g):0}function ys(t){if("number"==typeof t)return t;if(us(t))return v;if(es(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=es(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=Qe(t);var n=yt.test(t);return n||Ct.test(t)?de(t.slice(2),n?2:8):gt.test(t)?v:+t}function ms(t){return Ni(t,As(t))}function Cs(t){return null==t?"":ci(t)}var ws=Ai((function(t,e){if(To(e)||Xa(e))Ni(e,Is(e),t);else for(var n in e)Bt.call(e,n)&&nr(t,n,e[n])})),xs=Ai((function(t,e){Ni(e,As(e),t)})),bs=Ai((function(t,e,n,r){Ni(e,As(e),t,r)})),Es=Ai((function(t,e,n,r){Ni(e,Is(e),t,r)})),Ss=ro(sr);var Ts=$r((function(t,e){t=_t(t);var r=-1,i=e.length,o=i>2?e[2]:n;for(o&&xo(e[0],e[1],o)&&(i=1);++r<i;)for(var a=e[r],s=As(a),l=-1,u=s.length;++l<u;){var c=s[l],h=t[c];(h===n||Ga(h,At[c])&&!Bt.call(t,c))&&(t[c]=a[c])}return t})),Ls=$r((function(t){return t.push(n,to),_e(ks,n,t)}));function _s(t,e,r){var i=null==t?n:Sr(t,e);return i===n?r:i}function Ms(t,e){return null!=t&&yo(t,e,Rr)}var Rs=Wi((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Ht.call(e)),t[e]=n}),el(il)),Os=Wi((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Ht.call(e)),Bt.call(t,e)?t[e].push(n):t[e]=[n]}),uo),Ns=$r(Nr);function Is(t){return Xa(t)?$n(t):Dr(t)}function As(t){return Xa(t)?$n(t,!0):Fr(t)}var Ps=Ai((function(t,e,n){Vr(t,e,n)})),ks=Ai((function(t,e,n,r){Vr(t,e,n,r)})),Bs=ro((function(t,e){var n={};if(null==t)return n;var r=!1;e=ke(e,(function(e){return e=wi(e,t),r||(r=e.length>1),e})),Ni(t,oo(t),n),r&&(n=ur(n,7,eo));for(var i=e.length;i--;)di(n,e[i]);return n}));var Ds=ro((function(t,e){return null==t?{}:function(t,e){return Yr(t,e,(function(e,n){return Ms(t,n)}))}(t,e)}));function Fs(t,e){if(null==t)return{};var n=ke(oo(t),(function(t){return[t]}));return e=uo(e),Yr(t,n,(function(t,n){return e(t,n[0])}))}var Hs=$i(Is),zs=$i(As);function Gs(t){return null==t?[]:tn(t,Is(t))}var Ws=Di((function(t,e,n){return e=e.toLowerCase(),t+(n?Vs(e):e)}));function Vs(t){return $s(Cs(t).toLowerCase())}function Us(t){return(t=Cs(t))&&t.replace(xt,on).replace(ee,"")}var js=Di((function(t,e,n){return t+(n?"-":"")+e.toLowerCase()})),Ys=Di((function(t,e,n){return t+(n?" ":"")+e.toLowerCase()})),Xs=Bi("toLowerCase");var qs=Di((function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}));var Ks=Di((function(t,e,n){return t+(n?" ":"")+$s(e)}));var Zs=Di((function(t,e,n){return t+(n?" ":"")+e.toUpperCase()})),$s=Bi("toUpperCase");function Qs(t,e,r){return t=Cs(t),(e=r?n:e)===n?function(t){return oe.test(t)}(t)?function(t){return t.match(re)||[]}(t):function(t){return t.match(ht)||[]}(t):t.match(e)||[]}var Js=$r((function(t,e){try{return _e(t,n,e)}catch(r){return $a(r)?r:new St(r)}})),tl=ro((function(t,e){return Re(e,(function(e){e=Fo(e),ar(t,e,Oa(t[e],t))})),t}));function el(t){return function(){return t}}var nl=zi(),rl=zi(!0);function il(t){return t}function ol(t){return Br("function"==typeof t?t:ur(t,1))}var al=$r((function(t,e){return function(n){return Nr(n,t,e)}})),sl=$r((function(t,e){return function(n){return Nr(t,n,e)}}));function ll(t,e,n){var r=Is(e),i=Er(e,r);null!=n||es(e)&&(i.length||!r.length)||(n=e,e=t,t=this,i=Er(e,Is(e)));var o=!(es(n)&&"chain"in n&&!n.chain),a=Qa(t);return Re(i,(function(n){var r=e[n];t[n]=r,a&&(t.prototype[n]=function(){var e=this.__chain__;if(o||e){var n=t(this.__wrapped__);return(n.__actions__=Oi(this.__actions__)).push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,Be([this.value()],arguments))})})),t}function ul(){}var cl=Ui(ke),hl=Ui(Ne),dl=Ui(He);function fl(t){return bo(t)?Xe(Fo(t)):function(t){return function(e){return Sr(e,t)}}(t)}var pl=Yi(),vl=Yi(!0);function gl(){return[]}function yl(){return!1}var ml=Vi((function(t,e){return t+e}),0),Cl=Ki("ceil"),wl=Vi((function(t,e){return t/e}),1),xl=Ki("floor");var bl,El=Vi((function(t,e){return t*e}),1),Sl=Ki("round"),Tl=Vi((function(t,e){return t-e}),0);return Gn.after=function(t,e){if("function"!=typeof e)throw new Ot(r);return t=vs(t),function(){if(--t<1)return e.apply(this,arguments)}},Gn.ary=Ma,Gn.assign=ws,Gn.assignIn=xs,Gn.assignInWith=bs,Gn.assignWith=Es,Gn.at=Ss,Gn.before=Ra,Gn.bind=Oa,Gn.bindAll=tl,Gn.bindKey=Na,Gn.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return ja(t)?t:[t]},Gn.chain=fa,Gn.chunk=function(t,e,r){e=(r?xo(t,e,r):e===n)?1:Cn(vs(e),0);var i=null==t?0:t.length;if(!i||e<1)return[];for(var a=0,s=0,l=o(pe(i/e));a<i;)l[s++]=ii(t,a,a+=e);return l},Gn.compact=function(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var o=t[e];o&&(i[r++]=o)}return i},Gn.concat=function(){var t=arguments.length;if(!t)return[];for(var e=o(t-1),n=arguments[0],r=t;r--;)e[r-1]=arguments[r];return Be(ja(n)?Oi(n):[n],mr(e,1))},Gn.cond=function(t){var e=null==t?0:t.length,n=uo();return t=e?ke(t,(function(t){if("function"!=typeof t[1])throw new Ot(r);return[n(t[0]),t[1]]})):[],$r((function(n){for(var r=-1;++r<e;){var i=t[r];if(_e(i[0],this,n))return _e(i[1],this,n)}}))},Gn.conforms=function(t){return function(t){var e=Is(t);return function(n){return cr(n,t,e)}}(ur(t,1))},Gn.constant=el,Gn.countBy=ga,Gn.create=function(t,e){var n=Wn(t);return null==e?n:or(n,e)},Gn.curry=function t(e,r,i){var o=Qi(e,8,n,n,n,n,n,r=i?n:r);return o.placeholder=t.placeholder,o},Gn.curryRight=function t(e,r,i){var o=Qi(e,s,n,n,n,n,n,r=i?n:r);return o.placeholder=t.placeholder,o},Gn.debounce=Ia,Gn.defaults=Ts,Gn.defaultsDeep=Ls,Gn.defer=Aa,Gn.delay=Pa,Gn.difference=Go,Gn.differenceBy=Wo,Gn.differenceWith=Vo,Gn.drop=function(t,e,r){var i=null==t?0:t.length;return i?ii(t,(e=r||e===n?1:vs(e))<0?0:e,i):[]},Gn.dropRight=function(t,e,r){var i=null==t?0:t.length;return i?ii(t,0,(e=i-(e=r||e===n?1:vs(e)))<0?0:e):[]},Gn.dropRightWhile=function(t,e){return t&&t.length?pi(t,uo(e,3),!0,!0):[]},Gn.dropWhile=function(t,e){return t&&t.length?pi(t,uo(e,3),!0):[]},Gn.fill=function(t,e,r,i){var o=null==t?0:t.length;return o?(r&&"number"!=typeof r&&xo(t,e,r)&&(r=0,i=o),function(t,e,r,i){var o=t.length;for((r=vs(r))<0&&(r=-r>o?0:o+r),(i=i===n||i>o?o:vs(i))<0&&(i+=o),i=r>i?0:gs(i);r<i;)t[r++]=e;return t}(t,e,r,i)):[]},Gn.filter=function(t,e){return(ja(t)?Ie:yr)(t,uo(e,3))},Gn.flatMap=function(t,e){return mr(Sa(t,e),1)},Gn.flatMapDeep=function(t,e){return mr(Sa(t,e),f)},Gn.flatMapDepth=function(t,e,r){return r=r===n?1:vs(r),mr(Sa(t,e),r)},Gn.flatten=Yo,Gn.flattenDeep=function(t){return(null==t?0:t.length)?mr(t,f):[]},Gn.flattenDepth=function(t,e){return(null==t?0:t.length)?mr(t,e=e===n?1:vs(e)):[]},Gn.flip=function(t){return Qi(t,512)},Gn.flow=nl,Gn.flowRight=rl,Gn.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r},Gn.functions=function(t){return null==t?[]:Er(t,Is(t))},Gn.functionsIn=function(t){return null==t?[]:Er(t,As(t))},Gn.groupBy=xa,Gn.initial=function(t){return(null==t?0:t.length)?ii(t,0,-1):[]},Gn.intersection=qo,Gn.intersectionBy=Ko,Gn.intersectionWith=Zo,Gn.invert=Rs,Gn.invertBy=Os,Gn.invokeMap=ba,Gn.iteratee=ol,Gn.keyBy=Ea,Gn.keys=Is,Gn.keysIn=As,Gn.map=Sa,Gn.mapKeys=function(t,e){var n={};return e=uo(e,3),xr(t,(function(t,r,i){ar(n,e(t,r,i),t)})),n},Gn.mapValues=function(t,e){var n={};return e=uo(e,3),xr(t,(function(t,r,i){ar(n,r,e(t,r,i))})),n},Gn.matches=function(t){return Gr(ur(t,1))},Gn.matchesProperty=function(t,e){return Wr(t,ur(e,1))},Gn.memoize=ka,Gn.merge=Ps,Gn.mergeWith=ks,Gn.method=al,Gn.methodOf=sl,Gn.mixin=ll,Gn.negate=Ba,Gn.nthArg=function(t){return t=vs(t),$r((function(e){return Ur(e,t)}))},Gn.omit=Bs,Gn.omitBy=function(t,e){return Fs(t,Ba(uo(e)))},Gn.once=function(t){return Ra(2,t)},Gn.orderBy=function(t,e,r,i){return null==t?[]:(ja(e)||(e=null==e?[]:[e]),ja(r=i?n:r)||(r=null==r?[]:[r]),jr(t,e,r))},Gn.over=cl,Gn.overArgs=Da,Gn.overEvery=hl,Gn.overSome=dl,Gn.partial=Fa,Gn.partialRight=Ha,Gn.partition=Ta,Gn.pick=Ds,Gn.pickBy=Fs,Gn.property=fl,Gn.propertyOf=function(t){return function(e){return null==t?n:Sr(t,e)}},Gn.pull=Qo,Gn.pullAll=Jo,Gn.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?Xr(t,e,uo(n,2)):t},Gn.pullAllWith=function(t,e,r){return t&&t.length&&e&&e.length?Xr(t,e,n,r):t},Gn.pullAt=ta,Gn.range=pl,Gn.rangeRight=vl,Gn.rearg=za,Gn.reject=function(t,e){return(ja(t)?Ie:yr)(t,Ba(uo(e,3)))},Gn.remove=function(t,e){var n=[];if(!t||!t.length)return n;var r=-1,i=[],o=t.length;for(e=uo(e,3);++r<o;){var a=t[r];e(a,r,t)&&(n.push(a),i.push(r))}return qr(t,i),n},Gn.rest=function(t,e){if("function"!=typeof t)throw new Ot(r);return $r(t,e=e===n?e:vs(e))},Gn.reverse=ea,Gn.sampleSize=function(t,e,r){return e=(r?xo(t,e,r):e===n)?1:vs(e),(ja(t)?Jn:Jr)(t,e)},Gn.set=function(t,e,n){return null==t?t:ti(t,e,n)},Gn.setWith=function(t,e,r,i){return i="function"==typeof i?i:n,null==t?t:ti(t,e,r,i)},Gn.shuffle=function(t){return(ja(t)?tr:ri)(t)},Gn.slice=function(t,e,r){var i=null==t?0:t.length;return i?(r&&"number"!=typeof r&&xo(t,e,r)?(e=0,r=i):(e=null==e?0:vs(e),r=r===n?i:vs(r)),ii(t,e,r)):[]},Gn.sortBy=La,Gn.sortedUniq=function(t){return t&&t.length?li(t):[]},Gn.sortedUniqBy=function(t,e){return t&&t.length?li(t,uo(e,2)):[]},Gn.split=function(t,e,r){return r&&"number"!=typeof r&&xo(t,e,r)&&(e=r=n),(r=r===n?g:r>>>0)?(t=Cs(t))&&("string"==typeof e||null!=e&&!as(e))&&!(e=ci(e))&&ln(t)?bi(vn(t),0,r):t.split(e,r):[]},Gn.spread=function(t,e){if("function"!=typeof t)throw new Ot(r);return e=null==e?0:Cn(vs(e),0),$r((function(n){var r=n[e],i=bi(n,0,e);return r&&Be(i,r),_e(t,this,i)}))},Gn.tail=function(t){var e=null==t?0:t.length;return e?ii(t,1,e):[]},Gn.take=function(t,e,r){return t&&t.length?ii(t,0,(e=r||e===n?1:vs(e))<0?0:e):[]},Gn.takeRight=function(t,e,r){var i=null==t?0:t.length;return i?ii(t,(e=i-(e=r||e===n?1:vs(e)))<0?0:e,i):[]},Gn.takeRightWhile=function(t,e){return t&&t.length?pi(t,uo(e,3),!1,!0):[]},Gn.takeWhile=function(t,e){return t&&t.length?pi(t,uo(e,3)):[]},Gn.tap=function(t,e){return e(t),t},Gn.throttle=function(t,e,n){var i=!0,o=!0;if("function"!=typeof t)throw new Ot(r);return es(n)&&(i="leading"in n?!!n.leading:i,o="trailing"in n?!!n.trailing:o),Ia(t,e,{leading:i,maxWait:e,trailing:o})},Gn.thru=pa,Gn.toArray=fs,Gn.toPairs=Hs,Gn.toPairsIn=zs,Gn.toPath=function(t){return ja(t)?ke(t,Fo):us(t)?[t]:Oi(Do(Cs(t)))},Gn.toPlainObject=ms,Gn.transform=function(t,e,n){var r=ja(t),i=r||Ka(t)||cs(t);if(e=uo(e,4),null==n){var o=t&&t.constructor;n=i?r?new o:[]:es(t)&&Qa(o)?Wn(Xt(t)):{}}return(i?Re:xr)(t,(function(t,r,i){return e(n,t,r,i)})),n},Gn.unary=function(t){return Ma(t,1)},Gn.union=na,Gn.unionBy=ra,Gn.unionWith=ia,Gn.uniq=function(t){return t&&t.length?hi(t):[]},Gn.uniqBy=function(t,e){return t&&t.length?hi(t,uo(e,2)):[]},Gn.uniqWith=function(t,e){return e="function"==typeof e?e:n,t&&t.length?hi(t,n,e):[]},Gn.unset=function(t,e){return null==t||di(t,e)},Gn.unzip=oa,Gn.unzipWith=aa,Gn.update=function(t,e,n){return null==t?t:fi(t,e,Ci(n))},Gn.updateWith=function(t,e,r,i){return i="function"==typeof i?i:n,null==t?t:fi(t,e,Ci(r),i)},Gn.values=Gs,Gn.valuesIn=function(t){return null==t?[]:tn(t,As(t))},Gn.without=sa,Gn.words=Qs,Gn.wrap=function(t,e){return Fa(Ci(e),t)},Gn.xor=la,Gn.xorBy=ua,Gn.xorWith=ca,Gn.zip=ha,Gn.zipObject=function(t,e){return yi(t||[],e||[],nr)},Gn.zipObjectDeep=function(t,e){return yi(t||[],e||[],ti)},Gn.zipWith=da,Gn.entries=Hs,Gn.entriesIn=zs,Gn.extend=xs,Gn.extendWith=bs,ll(Gn,Gn),Gn.add=ml,Gn.attempt=Js,Gn.camelCase=Ws,Gn.capitalize=Vs,Gn.ceil=Cl,Gn.clamp=function(t,e,r){return r===n&&(r=e,e=n),r!==n&&(r=(r=ys(r))==r?r:0),e!==n&&(e=(e=ys(e))==e?e:0),lr(ys(t),e,r)},Gn.clone=function(t){return ur(t,4)},Gn.cloneDeep=function(t){return ur(t,5)},Gn.cloneDeepWith=function(t,e){return ur(t,5,e="function"==typeof e?e:n)},Gn.cloneWith=function(t,e){return ur(t,4,e="function"==typeof e?e:n)},Gn.conformsTo=function(t,e){return null==e||cr(t,e,Is(e))},Gn.deburr=Us,Gn.defaultTo=function(t,e){return null==t||t!=t?e:t},Gn.divide=wl,Gn.endsWith=function(t,e,r){t=Cs(t),e=ci(e);var i=t.length,o=r=r===n?i:lr(vs(r),0,i);return(r-=e.length)>=0&&t.slice(r,o)==e},Gn.eq=Ga,Gn.escape=function(t){return(t=Cs(t))&&$.test(t)?t.replace(K,an):t},Gn.escapeRegExp=function(t){return(t=Cs(t))&&ot.test(t)?t.replace(it,"\\$&"):t},Gn.every=function(t,e,r){var i=ja(t)?Ne:vr;return r&&xo(t,e,r)&&(e=n),i(t,uo(e,3))},Gn.find=ya,Gn.findIndex=Uo,Gn.findKey=function(t,e){return Ge(t,uo(e,3),xr)},Gn.findLast=ma,Gn.findLastIndex=jo,Gn.findLastKey=function(t,e){return Ge(t,uo(e,3),br)},Gn.floor=xl,Gn.forEach=Ca,Gn.forEachRight=wa,Gn.forIn=function(t,e){return null==t?t:Cr(t,uo(e,3),As)},Gn.forInRight=function(t,e){return null==t?t:wr(t,uo(e,3),As)},Gn.forOwn=function(t,e){return t&&xr(t,uo(e,3))},Gn.forOwnRight=function(t,e){return t&&br(t,uo(e,3))},Gn.get=_s,Gn.gt=Wa,Gn.gte=Va,Gn.has=function(t,e){return null!=t&&yo(t,e,Mr)},Gn.hasIn=Ms,Gn.head=Xo,Gn.identity=il,Gn.includes=function(t,e,n,r){t=Xa(t)?t:Gs(t),n=n&&!r?vs(n):0;var i=t.length;return n<0&&(n=Cn(i+n,0)),ls(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&Ve(t,e,n)>-1},Gn.indexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:vs(n);return i<0&&(i=Cn(r+i,0)),Ve(t,e,i)},Gn.inRange=function(t,e,r){return e=ps(e),r===n?(r=e,e=0):r=ps(r),function(t,e,n){return t>=wn(e,n)&&t<Cn(e,n)}(t=ys(t),e,r)},Gn.invoke=Ns,Gn.isArguments=Ua,Gn.isArray=ja,Gn.isArrayBuffer=Ya,Gn.isArrayLike=Xa,Gn.isArrayLikeObject=qa,Gn.isBoolean=function(t){return!0===t||!1===t||ns(t)&&Lr(t)==w},Gn.isBuffer=Ka,Gn.isDate=Za,Gn.isElement=function(t){return ns(t)&&1===t.nodeType&&!os(t)},Gn.isEmpty=function(t){if(null==t)return!0;if(Xa(t)&&(ja(t)||"string"==typeof t||"function"==typeof t.splice||Ka(t)||cs(t)||Ua(t)))return!t.length;var e=go(t);if(e==T||e==O)return!t.size;if(To(t))return!Dr(t).length;for(var n in t)if(Bt.call(t,n))return!1;return!0},Gn.isEqual=function(t,e){return Ar(t,e)},Gn.isEqualWith=function(t,e,r){var i=(r="function"==typeof r?r:n)?r(t,e):n;return i===n?Ar(t,e,n,r):!!i},Gn.isError=$a,Gn.isFinite=function(t){return"number"==typeof t&&we(t)},Gn.isFunction=Qa,Gn.isInteger=Ja,Gn.isLength=ts,Gn.isMap=rs,Gn.isMatch=function(t,e){return t===e||Pr(t,e,ho(e))},Gn.isMatchWith=function(t,e,r){return r="function"==typeof r?r:n,Pr(t,e,ho(e),r)},Gn.isNaN=function(t){return is(t)&&t!=+t},Gn.isNative=function(t){if(So(t))throw new St("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return kr(t)},Gn.isNil=function(t){return null==t},Gn.isNull=function(t){return null===t},Gn.isNumber=is,Gn.isObject=es,Gn.isObjectLike=ns,Gn.isPlainObject=os,Gn.isRegExp=as,Gn.isSafeInteger=function(t){return Ja(t)&&t>=-9007199254740991&&t<=p},Gn.isSet=ss,Gn.isString=ls,Gn.isSymbol=us,Gn.isTypedArray=cs,Gn.isUndefined=function(t){return t===n},Gn.isWeakMap=function(t){return ns(t)&&go(t)==A},Gn.isWeakSet=function(t){return ns(t)&&"[object WeakSet]"==Lr(t)},Gn.join=function(t,e){return null==t?"":ze.call(t,e)},Gn.kebabCase=js,Gn.last=$o,Gn.lastIndexOf=function(t,e,r){var i=null==t?0:t.length;if(!i)return-1;var o=i;return r!==n&&(o=(o=vs(r))<0?Cn(i+o,0):wn(o,i-1)),e==e?function(t,e,n){for(var r=n+1;r--;)if(t[r]===e)return r;return r}(t,e,o):We(t,je,o,!0)},Gn.lowerCase=Ys,Gn.lowerFirst=Xs,Gn.lt=hs,Gn.lte=ds,Gn.max=function(t){return t&&t.length?gr(t,il,_r):n},Gn.maxBy=function(t,e){return t&&t.length?gr(t,uo(e,2),_r):n},Gn.mean=function(t){return Ye(t,il)},Gn.meanBy=function(t,e){return Ye(t,uo(e,2))},Gn.min=function(t){return t&&t.length?gr(t,il,Hr):n},Gn.minBy=function(t,e){return t&&t.length?gr(t,uo(e,2),Hr):n},Gn.stubArray=gl,Gn.stubFalse=yl,Gn.stubObject=function(){return{}},Gn.stubString=function(){return""},Gn.stubTrue=function(){return!0},Gn.multiply=El,Gn.nth=function(t,e){return t&&t.length?Ur(t,vs(e)):n},Gn.noConflict=function(){return ve._===this&&(ve._=Gt),this},Gn.noop=ul,Gn.now=_a,Gn.pad=function(t,e,n){t=Cs(t);var r=(e=vs(e))?pn(t):0;if(!e||r>=e)return t;var i=(e-r)/2;return ji(ge(i),n)+t+ji(pe(i),n)},Gn.padEnd=function(t,e,n){t=Cs(t);var r=(e=vs(e))?pn(t):0;return e&&r<e?t+ji(e-r,n):t},Gn.padStart=function(t,e,n){t=Cs(t);var r=(e=vs(e))?pn(t):0;return e&&r<e?ji(e-r,n)+t:t},Gn.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),bn(Cs(t).replace(at,""),e||0)},Gn.random=function(t,e,r){if(r&&"boolean"!=typeof r&&xo(t,e,r)&&(e=r=n),r===n&&("boolean"==typeof e?(r=e,e=n):"boolean"==typeof t&&(r=t,t=n)),t===n&&e===n?(t=0,e=1):(t=ps(t),e===n?(e=t,t=0):e=ps(e)),t>e){var i=t;t=e,e=i}if(r||t%1||e%1){var o=En();return wn(t+o*(e-t+he("1e-"+((o+"").length-1))),e)}return Kr(t,e)},Gn.reduce=function(t,e,n){var r=ja(t)?De:Ke,i=arguments.length<3;return r(t,uo(e,4),n,i,fr)},Gn.reduceRight=function(t,e,n){var r=ja(t)?Fe:Ke,i=arguments.length<3;return r(t,uo(e,4),n,i,pr)},Gn.repeat=function(t,e,r){return e=(r?xo(t,e,r):e===n)?1:vs(e),Zr(Cs(t),e)},Gn.replace=function(){var t=arguments,e=Cs(t[0]);return t.length<3?e:e.replace(t[1],t[2])},Gn.result=function(t,e,r){var i=-1,o=(e=wi(e,t)).length;for(o||(o=1,t=n);++i<o;){var a=null==t?n:t[Fo(e[i])];a===n&&(i=o,a=r),t=Qa(a)?a.call(t):a}return t},Gn.round=Sl,Gn.runInContext=t,Gn.sample=function(t){return(ja(t)?Qn:Qr)(t)},Gn.size=function(t){if(null==t)return 0;if(Xa(t))return ls(t)?pn(t):t.length;var e=go(t);return e==T||e==O?t.size:Dr(t).length},Gn.snakeCase=qs,Gn.some=function(t,e,r){var i=ja(t)?He:oi;return r&&xo(t,e,r)&&(e=n),i(t,uo(e,3))},Gn.sortedIndex=function(t,e){return ai(t,e)},Gn.sortedIndexBy=function(t,e,n){return si(t,e,uo(n,2))},Gn.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var r=ai(t,e);if(r<n&&Ga(t[r],e))return r}return-1},Gn.sortedLastIndex=function(t,e){return ai(t,e,!0)},Gn.sortedLastIndexBy=function(t,e,n){return si(t,e,uo(n,2),!0)},Gn.sortedLastIndexOf=function(t,e){if(null==t?0:t.length){var n=ai(t,e,!0)-1;if(Ga(t[n],e))return n}return-1},Gn.startCase=Ks,Gn.startsWith=function(t,e,n){return t=Cs(t),n=null==n?0:lr(vs(n),0,t.length),e=ci(e),t.slice(n,n+e.length)==e},Gn.subtract=Tl,Gn.sum=function(t){return t&&t.length?Ze(t,il):0},Gn.sumBy=function(t,e){return t&&t.length?Ze(t,uo(e,2)):0},Gn.template=function(t,e,r){var i=Gn.templateSettings;r&&xo(t,e,r)&&(e=n),t=Cs(t),e=bs({},e,i,Ji);var o,a,s=bs({},e.imports,i.imports,Ji),l=Is(s),u=tn(s,l),c=0,h=e.interpolate||bt,d="__p += '",f=Mt((e.escape||bt).source+"|"+h.source+"|"+(h===tt?pt:bt).source+"|"+(e.evaluate||bt).source+"|$","g"),p="//# sourceURL="+(Bt.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++se+"]")+"\n";t.replace(f,(function(e,n,r,i,s,l){return r||(r=i),d+=t.slice(c,l).replace(Et,sn),n&&(o=!0,d+="' +\n__e("+n+") +\n'"),s&&(a=!0,d+="';\n"+s+";\n__p += '"),r&&(d+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),c=l+e.length,e})),d+="';\n";var v=Bt.call(e,"variable")&&e.variable;if(v){if(dt.test(v))throw new St("Invalid `variable` option passed into `_.template`")}else d="with (obj) {\n"+d+"\n}\n";d=(a?d.replace(j,""):d).replace(Y,"$1").replace(X,"$1;"),d="function("+(v||"obj")+") {\n"+(v?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var g=Js((function(){return Tt(l,p+"return "+d).apply(n,u)}));if(g.source=d,$a(g))throw g;return g},Gn.times=function(t,e){if((t=vs(t))<1||t>p)return[];var n=g,r=wn(t,g);e=uo(e),t-=g;for(var i=$e(r,e);++n<t;)e(n);return i},Gn.toFinite=ps,Gn.toInteger=vs,Gn.toLength=gs,Gn.toLower=function(t){return Cs(t).toLowerCase()},Gn.toNumber=ys,Gn.toSafeInteger=function(t){return t?lr(vs(t),-9007199254740991,p):0===t?t:0},Gn.toString=Cs,Gn.toUpper=function(t){return Cs(t).toUpperCase()},Gn.trim=function(t,e,r){if((t=Cs(t))&&(r||e===n))return Qe(t);if(!t||!(e=ci(e)))return t;var i=vn(t),o=vn(e);return bi(i,nn(i,o),rn(i,o)+1).join("")},Gn.trimEnd=function(t,e,r){if((t=Cs(t))&&(r||e===n))return t.slice(0,gn(t)+1);if(!t||!(e=ci(e)))return t;var i=vn(t);return bi(i,0,rn(i,vn(e))+1).join("")},Gn.trimStart=function(t,e,r){if((t=Cs(t))&&(r||e===n))return t.replace(at,"");if(!t||!(e=ci(e)))return t;var i=vn(t);return bi(i,nn(i,vn(e))).join("")},Gn.truncate=function(t,e){var r=30,i="...";if(es(e)){var o="separator"in e?e.separator:o;r="length"in e?vs(e.length):r,i="omission"in e?ci(e.omission):i}var a=(t=Cs(t)).length;if(ln(t)){var s=vn(t);a=s.length}if(r>=a)return t;var l=r-pn(i);if(l<1)return i;var u=s?bi(s,0,l).join(""):t.slice(0,l);if(o===n)return u+i;if(s&&(l+=u.length-l),as(o)){if(t.slice(l).search(o)){var c,h=u;for(o.global||(o=Mt(o.source,Cs(vt.exec(o))+"g")),o.lastIndex=0;c=o.exec(h);)var d=c.index;u=u.slice(0,d===n?l:d)}}else if(t.indexOf(ci(o),l)!=l){var f=u.lastIndexOf(o);f>-1&&(u=u.slice(0,f))}return u+i},Gn.unescape=function(t){return(t=Cs(t))&&Z.test(t)?t.replace(q,yn):t},Gn.uniqueId=function(t){var e=++Dt;return Cs(t)+e},Gn.upperCase=Zs,Gn.upperFirst=$s,Gn.each=Ca,Gn.eachRight=wa,Gn.first=Xo,ll(Gn,(bl={},xr(Gn,(function(t,e){Bt.call(Gn.prototype,e)||(bl[e]=t)})),bl),{chain:!1}),Gn.VERSION="4.17.21",Re(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){Gn[t].placeholder=Gn})),Re(["drop","take"],(function(t,e){jn.prototype[t]=function(r){r=r===n?1:Cn(vs(r),0);var i=this.__filtered__&&!e?new jn(this):this.clone();return i.__filtered__?i.__takeCount__=wn(r,i.__takeCount__):i.__views__.push({size:wn(r,g),type:t+(i.__dir__<0?"Right":"")}),i},jn.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}})),Re(["filter","map","takeWhile"],(function(t,e){var n=e+1,r=1==n||3==n;jn.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:uo(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}})),Re(["head","last"],(function(t,e){var n="take"+(e?"Right":"");jn.prototype[t]=function(){return this[n](1).value()[0]}})),Re(["initial","tail"],(function(t,e){var n="drop"+(e?"":"Right");jn.prototype[t]=function(){return this.__filtered__?new jn(this):this[n](1)}})),jn.prototype.compact=function(){return this.filter(il)},jn.prototype.find=function(t){return this.filter(t).head()},jn.prototype.findLast=function(t){return this.reverse().find(t)},jn.prototype.invokeMap=$r((function(t,e){return"function"==typeof t?new jn(this):this.map((function(n){return Nr(n,t,e)}))})),jn.prototype.reject=function(t){return this.filter(Ba(uo(t)))},jn.prototype.slice=function(t,e){t=vs(t);var r=this;return r.__filtered__&&(t>0||e<0)?new jn(r):(t<0?r=r.takeRight(-t):t&&(r=r.drop(t)),e!==n&&(r=(e=vs(e))<0?r.dropRight(-e):r.take(e-t)),r)},jn.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},jn.prototype.toArray=function(){return this.take(g)},xr(jn.prototype,(function(t,e){var r=/^(?:filter|find|map|reject)|While$/.test(e),i=/^(?:head|last)$/.test(e),o=Gn[i?"take"+("last"==e?"Right":""):e],a=i||/^find/.test(e);o&&(Gn.prototype[e]=function(){var e=this.__wrapped__,s=i?[1]:arguments,l=e instanceof jn,u=s[0],c=l||ja(e),h=function(t){var e=o.apply(Gn,Be([t],s));return i&&d?e[0]:e};c&&r&&"function"==typeof u&&1!=u.length&&(l=c=!1);var d=this.__chain__,f=!!this.__actions__.length,p=a&&!d,v=l&&!f;if(!a&&c){e=v?e:new jn(this);var g=t.apply(e,s);return g.__actions__.push({func:pa,args:[h],thisArg:n}),new Un(g,d)}return p&&v?t.apply(this,s):(g=this.thru(h),p?i?g.value()[0]:g.value():g)})})),Re(["pop","push","shift","sort","splice","unshift"],(function(t){var e=Nt[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);Gn.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var i=this.value();return e.apply(ja(i)?i:[],t)}return this[n]((function(n){return e.apply(ja(n)?n:[],t)}))}})),xr(jn.prototype,(function(t,e){var n=Gn[e];if(n){var r=n.name+"";Bt.call(In,r)||(In[r]=[]),In[r].push({name:e,func:n})}})),In[Gi(n,2).name]=[{name:"wrapper",func:n}],jn.prototype.clone=function(){var t=new jn(this.__wrapped__);return t.__actions__=Oi(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Oi(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Oi(this.__views__),t},jn.prototype.reverse=function(){if(this.__filtered__){var t=new jn(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},jn.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=ja(t),r=e<0,i=n?t.length:0,o=function(t,e,n){var r=-1,i=n.length;for(;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=wn(e,t+a);break;case"takeRight":t=Cn(t,e-a)}}return{start:t,end:e}}(0,i,this.__views__),a=o.start,s=o.end,l=s-a,u=r?s:a-1,c=this.__iteratees__,h=c.length,d=0,f=wn(l,this.__takeCount__);if(!n||!r&&i==l&&f==l)return vi(t,this.__actions__);var p=[];t:for(;l--&&d<f;){for(var v=-1,g=t[u+=e];++v<h;){var y=c[v],m=y.iteratee,C=y.type,w=m(g);if(2==C)g=w;else if(!w){if(1==C)continue t;break t}}p[d++]=g}return p},Gn.prototype.at=va,Gn.prototype.chain=function(){return fa(this)},Gn.prototype.commit=function(){return new Un(this.value(),this.__chain__)},Gn.prototype.next=function(){this.__values__===n&&(this.__values__=fs(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?n:this.__values__[this.__index__++]}},Gn.prototype.plant=function(t){for(var e,r=this;r instanceof Vn;){var i=zo(r);i.__index__=0,i.__values__=n,e?o.__wrapped__=i:e=i;var o=i;r=r.__wrapped__}return o.__wrapped__=t,e},Gn.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof jn){var e=t;return this.__actions__.length&&(e=new jn(this)),(e=e.reverse()).__actions__.push({func:pa,args:[ea],thisArg:n}),new Un(e,this.__chain__)}return this.thru(ea)},Gn.prototype.toJSON=Gn.prototype.valueOf=Gn.prototype.value=function(){return vi(this.__wrapped__,this.__actions__)},Gn.prototype.first=Gn.prototype.head,Qt&&(Gn.prototype[Qt]=function(){return this}),Gn}();ye?((ye.exports=mn)._=mn,ge._=mn):ve._=mn}).call(o)}(O_,O_.exports);var N_={describe:"",fields:{rows:["province","city"],columns:["type","sub_type"],values:["number"],valueInCols:!0},meta:[{field:"number",name:""},{field:"province",name:""},{field:"city",name:""},{field:"type",name:""},{field:"sub_type",name:""}],data:[{number:7789,province:"",city:"",type:"",sub_type:""},{number:2367,province:"",city:"",type:"",sub_type:""},{number:3877,province:"",city:"",type:"",sub_type:""},{number:4342,province:"",city:"",type:"",sub_type:""},{number:5343,province:"",city:"",type:"",sub_type:""},{number:632,province:"",city:"",type:"",sub_type:""},{number:7234,province:"",city:"",type:"",sub_type:""},{number:834,province:"",city:"",type:"",sub_type:""},{number:945,province:"",city:"",type:"",sub_type:""},{number:1304,province:"",city:"",type:"",sub_type:""},{number:1145,province:"",city:"",type:"",sub_type:""},{number:1432,province:"",city:"",type:"",sub_type:""},{number:1343,province:"",city:"",type:"",sub_type:""},{number:1354,province:"",city:"",type:"",sub_type:""},{number:1523,province:"",city:"",type:"",sub_type:""},{number:1634,province:"",city:"",type:"",sub_type:""},{number:1723,province:"",city:"",type:"",sub_type:""},{number:1822,province:"",city:"",type:"",sub_type:""},{number:1943,province:"",city:"",type:"",sub_type:""},{number:2330,province:"",city:"",type:"",sub_type:""},{number:2451,province:"",city:"",type:"",sub_type:""},{number:2244,province:"",city:"",type:"",sub_type:""},{number:2333,province:"",city:"",type:"",sub_type:""},{number:2445,province:"",city:"",type:"",sub_type:""},{number:2335,province:"",city:"",type:"",sub_type:""},{number:245,province:"",city:"",type:"",sub_type:""},{number:2457,province:"",city:"",type:"",sub_type:""},{number:2458,province:"",city:"",type:"",sub_type:""},{number:4004,province:"",city:"",type:"",sub_type:""},{number:3077,province:"",city:"",type:"",sub_type:""},{number:3551,province:"",city:"",type:"",sub_type:""},{number:352,province:"",city:"",type:"",sub_type:""}],totalData:[{number:[26193],type:"",sub_type:""},{number:49709,type:""},{number:23516,type:"",sub_type:""},{number:29159,type:""},{number:12321,type:"",sub_type:""},{number:16838,type:"",sub_type:""},{number:18375,province:"",type:"",sub_type:""},{number:14043,province:"",type:"",sub_type:""},{number:4826,province:"",type:"",sub_type:""},{number:5854,province:"",type:"",sub_type:""},{number:7818,province:"",type:"",sub_type:""},{number:9473,province:"",type:"",sub_type:""},{number:7495,province:"",type:"",sub_type:""},{number:10984,province:"",type:"",sub_type:""},{number:13132,province:"",city:"",type:""},{number:2288,province:"",city:"",type:""},{number:15420,province:"",city:""},{number:2999,province:"",city:"",type:""},{number:2658,province:"",city:"",type:""},{number:5657,province:"",city:""},{number:11111,province:"",city:"",type:""},{number:2668,province:"",city:"",type:""},{number:13779,province:"",city:""},{number:5176,province:"",city:"",type:""},{number:3066,province:"",city:"",type:""},{number:8242,province:"",city:""},{number:4174,province:"",city:"",type:""},{number:6339,province:"",city:"",type:""},{number:10513,province:"",city:""},{number:4066,province:"",city:"",type:""},{number:3322,province:"",city:"",type:""},{number:7388,province:"",city:""},{number:4276,province:"",city:"",type:""},{number:6008,province:"",city:"",type:""},{number:10284,province:"",city:""},{number:4775,province:"",city:"",type:""},{number:2810,province:"",city:"",type:""},{number:7585,province:"",city:""},{number:32418,province:"",type:""},{number:10680,province:"",type:""},{number:43098,province:""},{number:17291,province:"",type:""},{number:18479,province:"",type:""},{number:35770,province:""},{number:78868}]},I_=d("div",null," tooltip ",-1),A_={__name:"antvS2TooltipContent",props:["meta"],setup:function(t){return function(e,n){var r,i,o;return a(),l("div",null,[d("p",null,""+f(null!==(r=null===(i=t.meta)||void 0===i?void 0:i.label)&&void 0!==r?r:null===(o=t.meta)||void 0===o?void 0:o.fieldValue),1),I_])}}},P_=d("div",{style:{width:"100%"}},[d("div",{id:"antvContainer"})],-1);e("default",{__name:"antvS2",setup:function(e){var r=p("grid"),o=v({options:[{label:"grid",value:"grid"},{label:"tree",value:"tree"}],s2:null}),h=function(){var t,e=(t=u().mark((function t(e){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o.s2.setOptions({hierarchyType:e}),t.next=3,o.s2.render(!1);case 3:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){c(o,r,i,a,s,"next",t)}function s(t){c(o,r,i,a,s,"throw",t)}a(void 0)}))});return function(t){return e.apply(this,arguments)}}(),d=function(e){function r(e){return t(this,r),i(this,r,[e])}return s(r,e),n(r,[{key:"renderContent",value:function(){var t,e=this.spreadsheet.getCell(null===(t=this.options.event)||void 0===t?void 0:t.target),n=null==e?void 0:e.getMeta(),r=m(A_,{meta:n});x(r,this.container)}}])}(__),f=function(e){function r(e,n,o){return t(this,r),i(this,r,[e,n,o])}return s(r,e),n(r,[{key:"drawTextShape",value:function(){}},{key:"render",value:function(t){t.innerHTML="";var e=document.createElement("div");e.style.width="100%",e.style.height="100%",e.innerHTML="test",t.appendChild(e),createChart(e,this.cells.map((function(t){return t.data})))}}])}(Tx);return g((function(){var t,e;y(r),t=document.getElementById("antvContainer"),e={width:600,height:480,hierarchyType:"grid",tooltip:{enable:!0,render:function(t){return new d(t)}},mergeCells:{hideData:!0},mergedCellsInfo:[[{colIndex:0,rowIndex:0},{colIndex:1,rowIndex:0},{colIndex:2,rowIndex:0},{colIndex:3,rowIndex:0}]],mergedCell:function(t,e,n){return new f(t,e,n)}},o.s2=new R_(t,N_,e),o.s2.render()})),function(t,e){var n=w;return a(),l(C,null,[m(n,{style:{width:"200px"},value:r.value,"onUpdate:value":e[0]||(e[0]=function(t){return r.value=t}),options:o.options,onChange:h,placeholder:""},null,8,["value","options"]),P_],64)}}})}}}))}();
