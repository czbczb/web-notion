import{P as un,at as ln,r as ut,k as cn,j as hn,u as dn,o as fn}from"./antdv.415263d7.js";var xt={exports:{}};(function(lt,ct){(function(g,m){lt.exports=m()})(typeof self<"u"?self:un,function(){return function(g){var m={};function c(h){if(m[h])return m[h].exports;var f=m[h]={i:h,l:!1,exports:{}};return g[h].call(f.exports,f,f.exports,c),f.l=!0,f.exports}return c.m=g,c.c=m,c.d=function(h,f,w){c.o(h,f)||Object.defineProperty(h,f,{enumerable:!0,get:w})},c.r=function(h){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(h,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(h,"__esModule",{value:!0})},c.t=function(h,f){if(1&f&&(h=c(h)),8&f||4&f&&typeof h=="object"&&h&&h.__esModule)return h;var w=Object.create(null);if(c.r(w),Object.defineProperty(w,"default",{enumerable:!0,value:h}),2&f&&typeof h!="string")for(var P in h)c.d(w,P,function(S){return h[S]}.bind(null,P));return w},c.n=function(h){var f=h&&h.__esModule?function(){return h.default}:function(){return h};return c.d(f,"a",f),f},c.o=function(h,f){return Object.prototype.hasOwnProperty.call(h,f)},c.p="",c(c.s="fb15")}({2470:function(g,m,c){c("5341")},"3ad9":function(g,m,c){c("41f0")},"41f0":function(g,m,c){},5341:function(g,m,c){},"5ebe":function(g,m,c){},"5fa5":function(g,m,c){},"7e2d":function(g,m,c){c("5fa5")},8875:function(g,m,c){var h,f,w;(function(P,S){f=[],h=S,w=typeof h=="function"?h.apply(m,f):h,w===void 0||(g.exports=w)})(typeof self<"u"&&self,function(){function P(){if(document.currentScript)return document.currentScript;try{throw new Error}catch(X){var S,R,F,z=/.*at [^(]*\((.*):(.+):(.+)\)$/gi,V=/@([^@]*):(\d+):(\d+)\s*$/gi,N=z.exec(X.stack)||V.exec(X.stack),O=N&&N[1]||!1,G=N&&N[2]||!1,D=document.location.href.replace(document.location.hash,""),x=document.getElementsByTagName("script");O===D&&(S=document.documentElement.outerHTML,R=new RegExp("(?:[^\\n]+?\\n){0,"+(G-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),F=S.replace(R,"$1").trim());for(var b=0;b<x.length;b++)if(x[b].readyState==="interactive"||x[b].src===O||O===D&&x[b].innerHTML&&x[b].innerHTML.trim()===F)return x[b];return null}}return P})},a733:function(g,m,c){},b8fb:function(g,m,c){c("a733")},bce9:function(g,m,c){c("5ebe")},fb15:function(g,m,c){if(c.r(m),typeof window<"u"){var h=window.document.currentScript,f=c("8875");h=f(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:f});var w=h&&h.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);w&&(c.p=w[1])}var P=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"flow-canvas",staticClass:"super-flow",on:{contextmenu:function(i){return i.preventDefault(),i.stopPropagation(),t.contextmenu(i)}}},[t.temEdgeConf.visible?n("graph-line",{attrs:{padding:t.linkPadding,graph:t.graph,link:t.temEdgeConf.link,"link-base-style":t.linkBaseStyle,"link-desc":t.linkDesc,"link-style":t.linkStyle}}):t._e(),t._l(t.graph.linkList,function(i,r){return n("graph-line",{key:i.key,attrs:{index:r,padding:t.linkPadding,graph:t.graph,link:i,"link-base-style":t.linkBaseStyle,"link-desc":t.linkDesc,"link-style":t.linkStyle}})}),t.moveNodeConf.isMove&&t.hasMarkLine?n("mark-line",{attrs:{width:t.clientWidth,height:t.clientHeight,"mark-color":t.markLineColor,markLine:t.moveNodeConf.markLine}}):t._e(),t._l(t.graph.nodeList,function(i,r){return n("graph-node",{key:i.key,attrs:{index:r,node:i,graph:t.graph,"is-move":i===t.moveNodeConf.node,"is-tem-edge":t.temEdgeConf.visible,"node-intercept":t.nodeIntercept(i),"line-drop":t.linkAddable,"node-drop":t.draggable},on:{"node-mousedown":t.nodeMousedown,"node-mouseenter":t.nodeMouseenter,"node-mouseleave":t.nodeMouseleave,"node-mouseup":t.nodeMouseup,"side-mousedown":t.sideMousedown,"node-contextmenu":t.nodeContextmenu},scopedSlots:t._u([{key:"default",fn:function(o){var s=o.meta;return[t._t("node",null,{meta:s})]}}],null,!0)})}),n("graph-menu",{attrs:{visible:t.menuConf.visible,graph:t.graph,position:t.menuConf.position,list:t.menuConf.list,source:t.menuConf.source},on:{"update:visible":function(i){return t.$set(t.menuConf,"visible",i)}},scopedSlots:t._u([{key:"default",fn:function(i){var r=i.item;return[t._t("menuItem",null,{item:r})]}}],null,!0)}),n("div",{directives:[{name:"show",rawName:"v-show",value:t.graph.graphSelected,expression:"graph.graphSelected"}],ref:"selectAllMask",staticClass:"select-all__mask",style:t.maskStyle,attrs:{tabindex:"-1"},on:{blur:function(i){t.graph.graphSelected=!1},mousedown:t.selectAllMaskMouseDown,contextmenu:function(i){i.preventDefault(),i.stopPropagation()}}})],2)},S=[];function R(t){return N(t)||V(t)||z(t)||F()}function F(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function z(t,e){if(t){if(typeof t=="string")return O(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?O(t,e):void 0}}function V(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function N(t){if(Array.isArray(t))return O(t)}function O(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function G(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function D(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function x(t,e,n){return e&&D(t.prototype,e),n&&D(t,n),t}var b,X=function(){function t(){G(this,t),this.listeners={}}return x(t,[{key:"add",value:function(e,n){e in this.listeners||(this.listeners[e]=[]),this.listeners[e].push(n)}},{key:"remove",value:function(e,n){if(e in this.listeners){for(var i=this.listeners[e],r=0,o=i.length;r<o;r++)if(i[r]===n)return i.splice(r,1),this.remove(e,n)}}},{key:"dispatch",value:function(e){var n=this,i=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(e.type in this.listeners){var r=this.listeners[e.type];e.target=this,i?r.some(function(o,s){var a=o.call(n,e);return a&&r.unshift.apply(r,R(r.splice(s,1))),a}):r.forEach(function(o){return o.call(n,e)})}}}]),t}();function At(t){return _t(t)||Ct(t)||St(t)||Mt()}function Mt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function St(t,e){if(t){if(typeof t=="string")return q(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?q(t,e):void 0}}function Ct(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function _t(t){if(Array.isArray(t))return q(t)}function q(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function Y(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),i=n.length,r=[],o=16,s=0;s<o;s++)r[s]=n[0|Math.random()*i];return t+r.join("")+e}function A(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,n=t.clientX,i=t.clientY,r=t.currentTarget,o=e||r,s=o.getBoundingClientRect(),a=s.left,u=s.top;return[n-a,i-u]}function Pt(t,e){return[t[0]+e[0],t[1]+e[1]]}function Ot(t,e){return[t[0]*e,t[1]*e]}function jt(t,e){return[e[0]-t[0],e[1]-t[1]]}function Et(t,e){return[t[0]-e[0],t[1]-e[1]]}function $t(t,e){return t[0]*e[0]+t[1]*e[1]}function Nt(t,e){return t[0]*e[1]-t[1]*e[0]}function It(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]);return[t[0]/e,t[1]/e]}function Dt(t,e){return t[0]===e[0]&&t[1]===e[1]}function Tt(t){return Math.round(180/Math.PI*Math.atan2(t[1],t[0]))+180}function Bt(t,e){return t[0]*e[1]-t[1]*e[0]===0}function d(t){var e={add:Pt,multiply:Ot,differ:jt,minus:Et,dotProduct:$t,cross:Nt,unitVector:It,equals:Dt,angle:Tt,parallel:Bt},n={};return Object.keys(e).forEach(function(i){Object.defineProperty(n,i,{get:function(){return function(r){return t=e[i](t,r),n}}})}),Object.defineProperty(n,"end",{get:function(){return t}}),n}function H(t){return Object.prototype.toString.call(t).slice(8,-1).toLocaleLowerCase()}function Q(t){return H(t)==="function"}function ht(t){return H(t)==="boolean"}function Rt(t){return H(t)==="string"}function Ft(t){return H(t)==="object"}function j(t,e){t.splice.apply(t,[0,t.length].concat(At(e)))}function U(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var k={top:1,right:2,bottom:3,left:4},K=(b={},U(b,k.top,[0,-1]),U(b,k.right,[1,0]),U(b,k.bottom,[0,1]),U(b,k.left,[-1,0]),b);function dt(t){return Ut(t)||Ht(t)||Yt(t)||Xt()}function Xt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Yt(t,e){if(t){if(typeof t=="string")return Z(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Z(t,e):void 0}}function Ht(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Ut(t){if(Array.isArray(t))return Z(t)}function Z(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function Wt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ft(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Jt(t,e,n){return e&&ft(t.prototype,e),n&&ft(t,n),t}var pt=function(){function t(e,n){Wt(this,t);var i=e.id,r=i===void 0?Y("node"):i,o=e.width,s=o===void 0?180:o,a=e.height,u=a===void 0?100:a,l=e.coordinate,y=l===void 0?[0,0]:l,v=e.meta,p=v===void 0?null:v;this.key=Y("node"),this.graph=n,this.id=r,this.coordinate=dt(y),this.meta=p,this.width=s,this.height=u}return Jt(t,[{key:"position",get:function(){return d(this.coordinate).add(this.graph.origin).end},set:function(e){this.coordinate=d(e).minus(this.graph.origin).end}},{key:"center",get:function(){return d(this.coordinate).add([this.width/2,this.height/2]).end},set:function(e){this.coordinate=d(e).minus([this.width/2,this.height/2]).end}},{key:"width",get:function(){return this._width},set:function(e){e=Math.floor(e),this._width=e>50?e:50,this.angle()}},{key:"height",get:function(){return this._height},set:function(e){e=Math.floor(e),this._height=e>20?e:20,this.angle()}},{key:"angle",value:function(){var e=this.width/2,n=this.height/2,i=[0,0],r=d(i).minus([e,n]).angle().end,o=d(i).add([e,0]).minus([0,n]).angle().end,s=d(i).add([e,n]).angle().end,a=d(i).add([0,n]).minus([e,0]).angle().end;this.angleList=[r,o,s,a]}},{key:"relative",value:function(e){var n=d(e).minus([this.width/2,this.height/2]).angle().end,i=this.angleList,r=[k.top,k.right,k.bottom,k.left],o=k.left;return i.reduce(function(s,a,u){return n>=s&&n<a&&(o=r[u-1]),a}),{position:this.fixOffset(e,o),direction:K[o]}}},{key:"fixOffset",value:function(e,n){switch(n){case k.top:e[0]=this.width/2,e[1]=0;break;case k.right:e[0]=this.width,e[1]=this.height/2;break;case k.bottom:e[0]=this.width/2,e[1]=this.height;break;case k.left:default:e[0]=0,e[1]=this.height/2;break}return e}},{key:"remove",value:function(){return this.graph.removeNode(this)}},{key:"toJSON",value:function(){return{id:this.id,width:this.width,height:this.height,coordinate:dt(this.coordinate),meta:this.meta}}}]),t}();function zt(t,e){return Qt(t)||qt(t,e)||Gt(t,e)||Vt()}function Vt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Gt(t,e){if(t){if(typeof t=="string")return mt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?mt(t,e):void 0}}function mt(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function qt(t,e){var n=t&&(typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"]);if(n!=null){var i,r,o=[],s=!0,a=!1;try{for(n=n.call(t);!(s=(i=n.next()).done)&&(o.push(i.value),!(e&&o.length===e));s=!0);}catch(u){a=!0,r=u}finally{try{s||n.return==null||n.return()}finally{if(a)throw r}}return o}}function Qt(t){if(Array.isArray(t))return t}function Kt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function vt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Zt(t,e,n){return e&&vt(t.prototype,e),n&&vt(t,n),t}function te(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var tt=function(){function t(e,n){Kt(this,t);var i=e.id,r=i===void 0?Y("link"):i,o=e.start,s=e.end,a=s===void 0?null:s,u=e.startAt,l=u===void 0?[0,0]:u,y=e.endAt,v=y===void 0?[0,0]:y,p=e.meta,L=p===void 0?null:p;this.key=Y("link"),this.id=r,this.graph=n,this.start=o,this.meta=L,this.end=a,this.startDirection=K[k.top],this.endDirection=K[k.top],this.startAt=l,this.endAt=v}return Zt(t,[{key:"end",get:function(){return this._end},set:function(e){if(this.start===e)return!1;this._end=e}},{key:"startAt",get:function(){return this._startAt},set:function(e){var n=this.start.relative(e);this._startAt=n.position,this.startDirection=n.direction}},{key:"endAt",get:function(){return this._endAt},set:function(e){if(this.end){var n=this.end.relative(e);this._endAt=n.position,this.endDirection=n.direction}else this._endAt=e}},{key:"movePosition",get:function(){return this._movePosition},set:function(e){if(this._movePosition=e,!this.end){var n=this.start.relative(d(e).minus(this.graph.origin).minus(this.start.coordinate).end);this.endDirection=d(n.direction).multiply(-1).end}}},{key:"pathPointList",get:function(){var e=this.coordinateList(),n=[],i=[];return e.forEach(function(r){n.push(r[0]),i.push(r[1])}),{pointList:e,xList:n,yList:i,minX:Math.min.apply(Math,n),maxX:Math.max.apply(Math,n),minY:Math.min.apply(Math,i),maxY:Math.max.apply(Math,i)}}},{key:"startCoordinate",value:function(){return d(this.start.position).add(this.startAt).end}},{key:"endCoordinate",value:function(){return this.end?d(this.end.position).add(this.endAt).end:this.movePosition}},{key:"coordinateList",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:.5,n=this.startCoordinate(),i=this.endCoordinate(),r=this.startDirection,o=this.endDirection,s=d(r).multiply(t.distance).add(n).end,a=d(o).multiply(t.distance).add(i).end;o=d(o).multiply(-1).end;var u=[a[0]-s[0],0],l=[0,a[1]-s[1]],y=this.pathDirection(l,u,r),v=this.pathDirection(l,u,o),p=d(y).dotProduct(v).end>0?2:1,L=v===u?l:u,M=[];if(M.push(n,s),p===1){var E=d(s).add(y).end,B=d(E).add(v).end;M.push(E,B)}else{var C=d(y).multiply(e).add(s).end,_=d(C).add(L).end,$=d(v).multiply(1-e).add(_).end;M.push(C,_,$)}return M.push(i),M}},{key:"pathDirection",value:function(e,n,i){return d(n).parallel(i).end?d(n).dotProduct(i).end>0?n:e:d(e).dotProduct(i).end>0?e:n}},{key:"isPointInLink",value:function(e,n){var i=n||this.pathPointList,r=i.pointList,o=i.minX,s=i.minY,a=i.maxX,u=i.maxY,l=5;if(e[0]<o-l||e[0]>a+l||e[1]<s-l||e[1]>u+l)return!1;for(var y=0;y<r.length-2;y++){var v=r[y],p=r[y+1],L=Math.min(v[1],p[1])-l,M=Math.max(v[0],p[0])+l,E=Math.max(v[1],p[1])+l,B=Math.min(v[0],p[0])-l,C=zt(e,2),_=C[0],$=C[1];if(_>B&&_<M&&$>L&&$<E)return!0}return!1}},{key:"remove",value:function(){return this.graph.removeLink(this)}},{key:"toJSON",value:function(){return{id:this.id,startId:this.start.id,endId:this.end.id,startAt:this.startAt,endAt:this.endAt,meta:this.meta}}}]),t}();function et(t){return et=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},et(t)}function I(t){return re(t)||ie(t)||ne(t)||ee()}function ee(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ne(t,e){if(t){if(typeof t=="string")return nt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?nt(t,e):void 0}}function ie(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function re(t){if(Array.isArray(t))return nt(t)}function nt(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function oe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function yt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function se(t,e,n){return e&&yt(t.prototype,e),n&&yt(t,n),t}function ae(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&it(t,e)}function it(t,e){return it=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},it(t,e)}function ue(t){var e=he();return function(){var n,i=W(t);if(e){var r=W(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return le(this,n)}}function le(t,e){return!e||et(e)!=="object"&&typeof e!="function"?ce(t):e}function ce(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function he(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function W(t){return W=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},W(t)}te(tt,"distance",15);var de=function(t){ae(n,t);var e=ue(n);function n(i){var r;oe(this,n);var o=i.nodeList,s=o===void 0?[]:o,a=i.linkList,u=a===void 0?[]:a,l=i.origin;return r=e.call(this),r.nodeList=[],r.linkList=[],r.origin=l,r.mouseonLink=null,r.mouseonNode=null,r.graphSelected=!1,r.maskBoundingClientRect={},r.initNode(s),r.initLink(u),r}return se(n,[{key:"pointMap",value:function(){var i={};return this.nodeList.forEach(function(r){i[r.id]=r}),i}},{key:"initNode",value:function(i){var r=this;return j(this.nodeList,i.map(function(o){return r.createNode(o)})),this.nodeList}},{key:"initLink",value:function(i){var r=this,o=[];return i.forEach(function(s){var a=s.startId,u=a===void 0?"":a,l=s.endId,y=l===void 0?"":l,v=s.startAt,p=v===void 0?[0,0]:v,L=s.endAt,M=L===void 0?[0,0]:L,E=s.meta,B=E===void 0?null:E,C=r.pointMap(),_=C[u],$=C[y];_&&$&&o.push(r.createLink({start:_,end:$,meta:B,startAt:p,endAt:M}))}),j(this.linkList,o),this.linkList}},{key:"createNode",value:function(i){return new pt(i,this)}},{key:"createLink",value:function(i){return new tt(i,this)}},{key:"addNode",value:function(i){var r=i.constructor===pt?i:this.createNode(i);return this.nodeList.push(r),r}},{key:"addLink",value:function(i){var r=i.constructor===tt?i:this.createLink(i),o=this.linkList.find(function(s){return s.start===r.start&&s.end===r.end});return o?(o.startAt=r.startAt,o.endAt=r.endAt):r.start&&r.end&&this.linkList.push(r),r}},{key:"removeNode",value:function(i){var r=this,o=this.nodeList.indexOf(i);return this.linkList.filter(function(s){return s.start===i||s.end===i}).forEach(function(s){r.removeLink(s)}),this.nodeList.splice(o,1),i}},{key:"removeLink",value:function(i){var r=this.linkList.indexOf(i);return this.linkList.splice(r,1),this.mouseonLink===i&&(this.mouseonLink=null),i}},{key:"toLastNode",value:function(i){var r=this.nodeList;r.splice.apply(r,[r.length-1,0].concat(I(r.splice(i,1))))}},{key:"toLastLink",value:function(i){var r=this.linkList;r.splice.apply(r,[r.length-1,0].concat(I(r.splice(i,1))))}},{key:"toJSON",value:function(){return{origin:this.origin,nodeList:this.nodeList.map(function(i){return i.toJSON()}),linkList:this.linkList.map(function(i){return i.toJSON()})}}},{key:"selectAll",value:function(){var i=this.nodeList,r=20;this.maskBoundingClientRect={top:Math.min.apply(Math,I(i.map(function(o){return o.center[1]-o.height/2})))-r,right:Math.max.apply(Math,I(i.map(function(o){return o.center[0]+o.width/2})))+r,bottom:Math.max.apply(Math,I(i.map(function(o){return o.center[1]+o.height/2})))+r,left:Math.min.apply(Math,I(i.map(function(o){return o.center[0]-o.width/2})))-r},this.graphSelected=!0}}]),n}(X),fe=de,pe=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"super-flow__menu-container"},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"flow__menu-mask",on:{mousemove:function(i){i.stopPropagation(),i.preventDefault()},mousedown:t.close}}),n("ul",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"super-flow__menu",style:t.style,attrs:{tabindex:"-1"},on:{mousemove:function(i){i.stopPropagation(),i.preventDefault()},contextmenu:function(i){i.preventDefault(),i.stopPropagation()},blur:t.close}},[t._l(t.list,function(i){return[t._l(i,function(r){return n("li",{staticClass:"super-flow__menu-item",class:{"is-disabled":r.disable},on:{click:function(o){return t.select(r)}}},[t._t("default",[n("span",{staticClass:"super-flow__menu-item-icon"}),n("span",{staticClass:"super-flow__menu-item-content"},[t._v(" "+t._s(r.label)+" ")])],{item:r})],2)}),n("li",{staticClass:"super-flow__menu-line"})]})],2)])},me=[],ve={props:{graph:Object,visible:{type:Boolean,default:!1},list:{type:Array,default:function(){return[]}},position:{type:Array,default:function(){return[0,0]}},source:{type:Object,default:function(){return{}}}},computed:{style:function(){return{left:this.position[0]+"px",top:this.position[1]+"px"}}},methods:{select:function(t){t.disable||(this.$emit("update:visible",!1),t.selected(this.source,d(this.position).minus(this.graph.origin).end))},close:function(t){this.$emit("update:visible",!1)}},watch:{visible:function(){var t=this;this.visible&&this.$nextTick(function(){return t.$el.focus()})}}},ye=ve;c("b8fb");function T(t,e,n,i,r,o,s,a){var u,l=typeof t=="function"?t.options:t;if(e&&(l.render=e,l.staticRenderFns=n,l._compiled=!0),i&&(l.functional=!0),o&&(l._scopeId="data-v-"+o),s?(u=function(p){p=p||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,p||typeof __VUE_SSR_CONTEXT__>"u"||(p=__VUE_SSR_CONTEXT__),r&&r.call(this,p),p&&p._registeredComponents&&p._registeredComponents.add(s)},l._ssrRegister=u):r&&(u=a?function(){r.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:r),u)if(l.functional){l._injectStyles=u;var y=l.render;l.render=function(p,L){return u.call(L),y(p,L)}}else{var v=l.beforeCreate;l.beforeCreate=v?[].concat(v,u):[u]}return{exports:t,options:l}}var ge=T(ye,pe,me,!1,null,null,null),be=ge.exports,ke=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"super-flow__node",class:{"can-move":t.nodeDrop},style:t.style,attrs:{tabindex:"-1"},on:{mousedown:function(i){return!i.type.indexOf("key")&&t._k(i.keyCode,"left",37,i.key,["Left","ArrowLeft"])||"button"in i&&i.button!==0?null:t.nodeMousedown(i)},mouseenter:t.nodeMouseenter,mouseleave:t.nodeMouseleave,mouseup:t.nodeMouseup,contextmenu:function(i){return i.preventDefault(),i.stopPropagation(),t.nodeContextmenu(i)}}},[t._t("default",null,{meta:t.node.meta}),t._l(t.direction,function(i,r){return n("div",{directives:[{name:"show",rawName:"v-show",value:t.output&&t.lineDrop,expression:"output && lineDrop"}],class:"node-side node-side-"+r,on:{contextmenu:function(o){o.stopPropagation(),o.preventDefault()},mousedown:function(o){return!o.type.indexOf("key")&&t._k(o.keyCode,"left",37,o.key,["Left","ArrowLeft"])||"button"in o&&o.button!==0?null:(o.preventDefault(),o.stopPropagation(),function(s){return t.sideMousedown(s,i)}(o))}}})})],2)},we=[],Le={props:{graph:Object,node:Object,index:Number,isMove:Boolean,isTemEdge:Boolean,nodeIntercept:Function,lineDrop:Boolean,nodeDrop:Boolean},data:function(){return{direction:k,output:this.nodeIntercept()}},computed:{style:function(){var t=this.node,e=t.position,n=t.width,i=t.height;return{width:n+"px",height:i+"px",top:e[1]+"px",left:e[0]+"px"}}},methods:{nodeMousedown:function(t){this.graph.toLastNode(this.index),this.$emit("node-mousedown",this.node,A(t))},nodeMouseenter:function(t){this.output=this.nodeIntercept(),this.graph.mouseonNode=this.node,this.isTemEdge&&this.$emit("node-mouseenter",t,this.node,A(t,this.$el))},nodeMouseleave:function(){this.graph.mouseonNode=null,this.isTemEdge&&this.$emit("node-mouseleave")},nodeMouseup:function(){this.isTemEdge&&this.$emit("node-mouseup")},nodeContextmenu:function(t){this.$emit("node-contextmenu",t,this.node)},sideMousedown:function(t){this.$emit("side-mousedown",t,this.node,A(t,this.$el))}}},xe=Le,Ae=(c("2470"),T(xe,ke,we,!1,null,null,null)),Me=Ae.exports,Se=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("canvas",{staticClass:"super-flow__line"})},Ce=[];function _e(t,e){return je(t)||Oe(t,e)||gt(t,e)||Pe()}function Pe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Oe(t,e){var n=t&&(typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"]);if(n!=null){var i,r,o=[],s=!0,a=!1;try{for(n=n.call(t);!(s=(i=n.next()).done)&&(o.push(i.value),!(e&&o.length===e));s=!0);}catch(u){a=!0,r=u}finally{try{s||n.return==null||n.return()}finally{if(a)throw r}}return o}}function je(t){if(Array.isArray(t))return t}function J(t){return Ne(t)||$e(t)||gt(t)||Ee()}function Ee(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gt(t,e){if(t){if(typeof t=="string")return rt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?rt(t,e):void 0}}function $e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Ne(t){if(Array.isArray(t))return rt(t)}function rt(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var Ie={props:{padding:{type:Number,default:50},linkDesc:[Function,null],linkStyle:[Function,null],linkBaseStyle:Object,index:Number,graph:Object,link:Object},data:function(){return{top:0,right:0,bottom:0,left:0,currentPointList:[],currentPathPointList:null}},mounted:function(){var t=this;this.ctx=this.$el.getContext("2d"),this.draw(),this.graph.add("mousemove",this.rootMousemove),this.$once("hook:beforeDestroy",function(){t.graph.remove("mousemove",t.rootMousemove)})},computed:{styles:function(){return Object.assign({hover:"#FF0000",color:"#666666",textColor:"#666666",textHover:"#FF0000",font:"14px Arial",dotted:!1,lineDash:[4,4],background:"rgba(255,255,255,0.6)"},this.linkBaseStyle)},inPath:{get:function(){return this.graph.mouseonLink===this.link},set:function(t){t&&!this.graph.mouseonNode?(this.graph.mouseonLink=this.link,this.$el.style.zIndex="1",this.graph.toLastLink(this.index)):this.inPath&&(this.graph.mouseonLink=null,this.$el.style.zIndex="0")}}},methods:{draw:function(){var t=this,e=this.currentPathPointList=this.link.pathPointList,n=e.pointList,i=e.minX,r=e.minY,o=e.maxX,s=e.maxY;this.top=r-this.padding,this.right=o+this.padding,this.bottom=s+this.padding,this.left=i-this.padding,this.currentPointList=n.map(function(a){return[Math.floor(a[0]-t.left),Math.floor(a[1]-t.top)]}),this.changeStyle(),this.initLine()},changeStyle:function(){this.$el.width=this.right-this.left,this.$el.height=this.bottom-this.top,this.$el.style.top=this.top+"px",this.$el.style.left=this.left+"px"},initLine:function(){if(this.ctx.clearRect(0,0,this.$el.width,this.$el.height),this.linkStyle){var t=this.linkStyle(this.link);Ft(t)&&Object.assign(this.styles,t)}if(this.inPath){var e=this.styles.hover,n=this.styles.textHover;this.drawLine(e),this.drawDesc(n),this.drawArrow(e)}else{var i=this.styles.color,r=this.styles.textColor;this.drawLine(i),this.drawDesc(r),this.drawArrow(i)}},drawLine:function(t){var e=2,n=this.ctx;n.lineJoin="round",n.beginPath(),this.styles.dotted&&n.setLineDash(this.styles.lineDash),n.lineWidth=e,n.strokeStyle=t,this.currentPointList.forEach(function(i,r){r===0?n.moveTo.apply(n,J(i)):(n.lineTo.apply(n,J(i)),n.stroke())}),n.save()},drawDesc:function(t){var e,n=this.ctx;if(Q(this.linkDesc)&&(e=this.linkDesc(this.link)),Rt(e)){var i=this.styles,r=i.font,o=i.background;this.ctx.font=r,this.ctx.textAlign="center",this.ctx.textBaseline="middle";var s=this.descIntercept(e),a=s.text,u=s.width,l=parseInt(r.match(/(\d+px)/g)[0]),y=this.descPosition(),v=d(y).minus([u/2,l/2]).end;this.ctx.fillStyle=o,n.fillRect(v[0],v[1],u,l),this.ctx.fillStyle=t,n.fillText.apply(n,[a].concat(J(y)))}},descPosition:function(){var t=0,e=0,n=null;return this.currentPointList.reduce(function(i,r){var o=d(i).minus(r).end;return t+=Math.abs(o[0])+Math.abs(o[1]),r}),this.currentPointList.reduce(function(i,r){var o=d(i).minus(r).end,s=Math.abs(o[0])+Math.abs(o[1]),a=e,u=t/2;return e+=s,e>=t/2&&n===null&&(n=i,n=i[0]===r[0]?i[1]<r[1]?d(i).add([0,u-a]).end:d(i).add([0,-(u-a)]).end:i[0]<r[0]?d(i).add([u-a,0]).end:d(i).add([-(u-a),0]).end),r}),n},descIntercept:function(t){var e=this.ctx,n=e.measureText(t).width,i=2*this.padding-10,r="...",o=e.measureText(r).width;if(n<=i||i<=o)return{text:t,width:n};for(var s=t.length;n>=i-o&&s-- >0;)t=t.slice(0,s),n=e.measureText(t).width;return{text:t+r,width:i+o}},drawArrow:function(t){var e=4,n=this.currentPointList.length;if(!(n<2)){var i=this.currentPointList[n-2],r=this.currentPointList[n-1],o=this.ctx;o.translate.apply(o,J(r));var s=Math.atan((r[0]-i[0])/(r[1]-i[1]));o.beginPath(),r[1]-i[1]>=0?o.rotate(-s):o.rotate(Math.PI-s),o.fillStyle=t,o.lineTo(-e,2*-e),o.lineTo(0,-e),o.lineTo(e,2*-e),o.lineTo(0,0),o.closePath(),o.fill(),o.restore()}},getCoordinates:function(t){var e=t.clientX,n=t.clientY,i=this.$el.getBoundingClientRect(),r=i.top,o=i.left;return[e-o,n-r]},isPointInStroke:function(t){var e=this.getCoordinates(t),n=_e(e,2),i=n[0],r=n[1];return this.link.isPointInLink([this.left+i,this.top+r],this.currentPathPointList)},rootMousemove:function(t){var e=t.evt;return this.inPath=this.isPointInStroke(e),this.inPath}},watch:{"link.pathPointList":function(){this.draw()},inPath:function(){this.initLine()},"link.meta":{deep:!0,handler:function(){this.draw()}},linkBaseStyle:{deep:!0,handler:function(){this.draw()}}}},De=Ie,Te=(c("7e2d"),T(De,Se,Ce,!1,null,null,null)),Be=Te.exports,Re=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("canvas",{ref:"markLine",staticClass:"super-flow__mark-line"})},Fe=[];function bt(t){return He(t)||Ye(t)||kt(t)||Xe()}function Xe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ye(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function He(t){if(Array.isArray(t))return ot(t)}function Ue(t,e){return ze(t)||Je(t,e)||kt(t,e)||We()}function We(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kt(t,e){if(t){if(typeof t=="string")return ot(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ot(t,e):void 0}}function ot(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function Je(t,e){var n=t&&(typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"]);if(n!=null){var i,r,o=[],s=!0,a=!1;try{for(n=n.call(t);!(s=(i=n.next()).done)&&(o.push(i.value),!(e&&o.length===e));s=!0);}catch(u){a=!0,r=u}finally{try{s||n.return==null||n.return()}finally{if(a)throw r}}return o}}function ze(t){if(Array.isArray(t))return t}var Ve={props:{width:{type:Number,default:0},height:{type:Number,default:0},markLine:Array,markColor:String},mounted:function(){this.$refs.markLine.height=this.height,this.$refs.markLine.width=this.width,this.draw()},methods:{draw:function(){var t=this.$el.getContext("2d");t.clearRect(0,0,this.width,this.height),t.strokeStyle=this.markColor,t.lineWidth=1,t.setLineDash([4,2]),this.markLine.forEach(function(e){var n=Ue(e,2),i=n[0],r=n[1];t.beginPath(),t.moveTo.apply(t,bt(i)),t.lineTo.apply(t,bt(r)),t.stroke()})}},watch:{markLine:function(){this.draw()}}},Ge=Ve,qe=(c("bce9"),T(Ge,Re,Fe,!1,null,null,null)),Qe=qe.exports;function st(t){return en(t)||tn(t)||Ze(t)||Ke()}function Ke(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ze(t,e){if(t){if(typeof t=="string")return at(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?at(t,e):void 0}}function tn(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function en(t){if(Array.isArray(t))return at(t)}function at(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function wt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Lt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?wt(Object(n),!0).forEach(function(i){nn(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wt(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function nn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var rn={name:"super-flow",props:{draggable:{type:Boolean,default:!0},linkAddable:{type:Boolean,default:!0},linkEditable:{type:Boolean,default:!0},hasMarkLine:{type:Boolean,default:!0},linkDesc:{type:[Function,null],default:null},linkStyle:{type:[Function,null],default:null},linkBaseStyle:{type:Object,default:function(){return{}}},markLineColor:{type:String,default:"#55abfc"},origin:{type:Array,default:function(){return[0,0]}},nodeList:{type:Array,default:function(){return[]}},linkList:{type:Array,default:function(){return[]}},graphMenu:{type:Array,default:function(){return[]}},nodeMenu:{type:Array,default:function(){return[]}},linkMenu:{type:Array,default:function(){return[]}},linkPadding:{type:Number,default:50},enterIntercept:{type:Function,default:function(){return!0}},outputIntercept:{type:Function,default:function(){return!0}}},data:function(){return{graph:new fe({width:this.width,height:this.height,origin:this.origin}),menuConf:{visible:!1,position:[0,0],source:null,list:[]},moveNodeConf:{isMove:!1,node:null,offset:null,verticalList:[],horizontalList:[],markLine:[]},moveAllConf:{isMove:!1,downPosition:[0,0]},temEdgeConf:{visible:!1,link:null},loaded:!1,clientWidth:0,clientHeight:0}},components:{GraphMenu:be,GraphNode:Me,GraphLine:Be,MarkLine:Qe},computed:{maskStyle:function(){var t=this.graph.maskBoundingClientRect,e=t.top,n=t.right,i=t.bottom,r=t.left;return{width:"".concat(n-r,"px"),height:"".concat(i-e,"px"),top:"".concat(e+this.graph.origin[1],"px"),left:"".concat(r+this.graph.origin[0],"px")}}},mounted:function(){var t=this;document.addEventListener("mouseup",this.docMouseup),document.addEventListener("mousemove",this.docMousemove),this.$once("hook:beforeDestroy",function(){document.removeEventListener("mouseup",t.docMouseup),document.removeEventListener("mousemove",t.docMousemove)}),this.$nextTick(function(){t.graph.initNode(t.nodeList),t.graph.initLink(t.linkList)})},methods:{initMenu:function(t,e){return t.map(function(n){return n.map(function(i){var r,o;return r=Q(i.disable)?i.disable(e):ht(i.disable)?i.disable:Boolean(i.disable),o=Q(i.hidden)?i.hidden(e):ht(i.hidden)?i.hidden:Boolean(i.hidden),Lt(Lt({},i),{},{disable:r,hidden:o})}).filter(function(i){return!i.hidden})}).filter(function(n){return n.length})},showContextMenu:function(t,e,n){e.length&&(this.$set(this.menuConf,"position",t),this.$set(this.menuConf,"list",e),this.$set(this.menuConf,"source",n),this.menuConf.visible=!0)},docMouseup:function(t){this.moveNodeConf.isMove&&(t.stopPropagation(),t.preventDefault()),this.moveNodeConf.isMove=!1,this.moveNodeConf.node=null,this.moveNodeConf.offset=null,j(this.moveNodeConf.markLine,[]),this.temEdgeConf.visible=!1,this.temEdgeConf.link=null,this.moveAllConf.isMove=!1},docMousemove:function(t){this.moveNodeConf.isMove?this.moveNode(t):this.temEdgeConf.visible?this.moveTemEdge(t):this.graph.graphSelected?this.moveWhole(t):this.linkEditable&&this.graph.dispatch({type:"mousemove",evt:t},!0)},moveNode:function(t){var e=this,n=10,i=this.moveNodeConf,r=this.graph.origin,o=d(i.offset).differ(A(t,this.$el)).minus(r).add([i.node.width/2,i.node.height/2]).end;if(this.hasMarkLine){var s=[];i.verticalList.some(function(a){var u=o[0],l=a-n<u&&a+n>u;return l&&(o[0]=a,a=Math.floor(a),a+=r[0],a+=a%1===0?.5:0,s.push([[a,0],[a,e.clientHeight]])),l}),i.horizontalList.some(function(a){var u=o[1],l=a-n<u&&a+n>u;return l&&(o[1]=a,a=Math.floor(a),a+=r[1],a+=a%1===0?.5:0,s.push([[0,a],[e.clientWidth,a]])),l}),j(i.markLine,s)}i.node.center=o},moveTemEdge:function(t){this.temEdgeConf.link.movePosition=A(t,this.$el)},moveWhole:function(t){if(this.moveAllConf.isMove){var e=d(this.moveAllConf.downPosition).differ([t.clientX,t.clientY]).end;j(this.graph.origin,d(this.moveAllConf.origin).add(e).end)}},contextmenu:function(t){var e,n,i=this.graph.mouseonLink,r=A(t);i&&i.isPointInLink(r)?(e=this.initMenu(this.linkMenu,i),n=i):(i&&(this.graph.mouseonLink=null),e=this.initMenu(this.graphMenu,this.graph),n=this.graph),this.showContextMenu(r,e,n)},nodeMousedown:function(t,e){if(this.draggable){this.clientWidth=this.$el.clientWidth,this.clientHeight=this.$el.clientHeight;var n=this.moveNodeConf.verticalList,i=this.moveNodeConf.horizontalList,r=this.graph.nodeList.filter(function(o){return o!==t}).map(function(o){return o.center});j(n,st(new Set(r.map(function(o){return o[0]}))).sort(function(o,s){return o-s})),j(i,st(new Set(r.map(function(o){return o[1]}))).sort(function(o,s){return o-s})),this.moveNodeConf.isMove=!0,this.moveNodeConf.node=t,this.moveNodeConf.offset=e}},nodeMouseenter:function(t,e,n){var i=this.temEdgeConf.link;this.enterIntercept(i.start,e,this.graph)&&(i.end=e,i.endAt=n)},nodeMouseleave:function(){this.temEdgeConf.link.end=null},nodeMouseup:function(){this.graph.addLink(this.temEdgeConf.link)},nodeContextmenu:function(t,e){var n=this.initMenu(this.nodeMenu,e);n.length&&(this.$set(this.menuConf,"position",A(t,this.$el)),this.$set(this.menuConf,"list",n),this.$set(this.menuConf,"source",e),this.menuConf.visible=!0)},sideMousedown:function(t,e,n){if(this.linkAddable){var i=this.graph.createLink({start:e,startAt:n});i.movePosition=A(t,this.$el),this.$set(this.temEdgeConf,"link",i),this.temEdgeConf.visible=!0}},nodeIntercept:function(t){var e=this;return function(){return e.outputIntercept(t,e.graph)}},menuItemSelect:function(){this.menuConf.visible=!1},selectAllMaskMouseDown:function(t){this.moveAllConf.isMove=!0,this.moveAllConf.origin=st(this.graph.origin),this.moveAllConf.downPosition=[t.clientX,t.clientY]},selectedAll:function(){this.graph.selectAll()},toJSON:function(){return this.graph.toJSON()},getMouseCoordinate:function(t,e){var n=A({clientX:t,clientY:e},this.$el);return d(n).minus(this.graph.origin).end},addNode:function(t){return this.graph.addNode(t)}},watch:{"graph.graphSelected":function(){var t=this;this.graph.graphSelected&&this.$nextTick(function(){t.$refs.selectAllMask.focus()})},"graph.mouseonLink":function(){this.graph.mouseonLink?document.body.style.cursor="pointer":document.body.style.cursor=""},origin:function(){this.graph.origin=this.origin||[]},nodeList:function(){this.graph.initNode(this.nodeList)},linkList:function(){this.graph.initLink(this.linkList)}},install:function(t){t.component(this.name,this)}},on=rn,sn=(c("3ad9"),T(on,P,S,!1,null,null,null)),an=sn.exports;m.default=an}}).default})})(xt);const pn=ln(xt.exports);const mn={style:{height:"calc(100vh - 120px)"}},yn={__name:"index",setup(lt){const ct=ut([0,0]),g=ut([{id:"node43ciCsyL5ERMSDXL",width:50,height:25,coordinate:[179.828125,-229],meta:{id:"69edbfc2-f0f9-4a12-92ae-b2154f5dcc8f",prop:"condition",name:"IP\u5E93\u670D\u52A1",desc:"IP\u5E93\u670D\u52A1",users:[237]}},{id:"node07Yr3DlCiLUQ4dpN",width:50,height:25,coordinate:[123.8359375,-293.5],meta:{id:"6801bbfc-f06e-40c5-a553-537d43c7b6cd",prop:"condition",name:"HB/ADNET/Frontier",desc:"HB/ADNET",users:[153]}}]),m=ut([{id:"linkozpMt9FvxDKjhFxe",startId:"node07Yr3DlCiLUQ4dpN",endId:"node43ciCsyL5ERMSDXL",startAt:[50,12.5],endAt:[25,0],meta:null}]);return(c,h)=>(fn(),cn("div",mn,[hn(dn(pn),{ref:"flow",origin:ct.value,"node-list":g.value,"link-list":m.value},null,8,["origin","node-list","link-list"])]))}};export{yn as default};
