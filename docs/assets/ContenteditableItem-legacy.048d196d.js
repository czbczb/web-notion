(function(){System.register(["./antdv-legacy.7bd4694a.js","./NotionView-legacy.10671aac.js","./_plugin-vue_export-helper-legacy.649209c3.js","./main-legacy.ed2566eb.js"],(function(exports,module){"use strict";var __vite_style__=document.createElement("style"),reactive,ref,watch,onMounted,nextTick,openBlock,createElementBlock,withKeys,withModifiers,toRaw,markdownCommand,_export_sfc;return __vite_style__.textContent=".editItem[data-v-bbb91e27]{padding:0 5px;border:1px solid #fff;transition:all linear .1s;border-radius:2px;margin-top:5px;border:1px solid transparent}.editItem[data-v-bbb91e27]:hover{border:1px solid #ccc;background-color:#eee}\n",document.head.appendChild(__vite_style__),{setters:[function(e){reactive=e.b,ref=e.r,watch=e.w,onMounted=e.aa,nextTick=e.n,openBlock=e.o,createElementBlock=e.k,withKeys=e.az,withModifiers=e.aA,toRaw=e.ax},function(e){markdownCommand=e.m},function(e){_export_sfc=e._},function(){}],execute:function execute(){var ContenteditableItem_vue_vue_type_style_index_0_scoped_bbb91e27_lang="",_hoisted_1=["onKeydown","contenteditable"],_sfc_main={__name:"ContenteditableItem",props:{config:Object,configItem:{type:Object,default:function(){return{type:"p",html:""}}},order:Number,readOnly:{type:Boolean,default:!1},focusOrder:Number},emits:["removeConfigItem","addConfigItem","setFocusOrder","updateConfigItem","updateMarkerPosition"],setup:function setup(__props,_ref){var __emit=_ref.emit,props=__props,state=reactive({value:"",isActive:!1}),editItem=ref(null);watch((function(){return props.focusOrder}),autofocusHandler);var emit=__emit;function autofocusHandler(e){e===props.order&&setAnchorPosition(editItem.value)}function mouseDownHandler(){}function mouseUpHandler(e){var t=document.getSelection().toString().length,n={x:0,y:0};if(0!==t){var o=t/2;n.x=o,n.y=e.y,emit("updateMarkerPosition",n)}else emit("updateMarkerPosition",n)}function setAnchorPosition(e){e.focus();var t=document.createRange();t.selectNodeContents(e),t.collapse(!1);var n=window.getSelection();0==n.anchorOffset&&(n.removeAllRanges(),n.addRange(t))}function changeSpace(){console.log("space",state.value)}function inputText(){state.value=editItem.value.innerHTML}function hasCommand(e){return"p"!==e.type}function changeEnter(){var config=markdownCommand.default,html=editItem.value.innerHTML;if(Object.keys(markdownCommand).map((function(command){if(state.value.startsWith(command)){config=markdownCommand[command];var reg=eval("/"+command+"/gi");html=html.replace(reg,"")}})),config.html=html,hasCommand(config))return emit("updateConfigItem",{order:props.order,config:config}),void emit("setFocusOrder",props.order);state.value="",config.html="",emit("addConfigItem",{order:props.order,config:toRaw(config)}),emit("setFocusOrder",props.order+1)}return onMounted((function(){editItem.value.innerHTML=props.configItem.html})),nextTick((function(){autofocusHandler(props.focusOrder)})),function(e,t){return openBlock(),createElementBlock("div",{onKeydown:[withKeys(withModifiers(changeEnter,["prevent"]),["enter"]),withKeys(changeSpace,["enter","space"])],onMousedown:mouseDownHandler,onMouseup:mouseUpHandler,onInput:inputText,ref_key:"editItem",ref:editItem,class:"editItem p",contenteditable:!__props.readOnly},null,40,_hoisted_1)}}},ContenteditableItem=exports("default",_export_sfc(_sfc_main,[["__scopeId","data-v-bbb91e27"]]))}}}))})();
